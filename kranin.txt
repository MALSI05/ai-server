#pragma dynamic 200000
#pragma warning disable 239
#pragma warning disable 214

main();

#include <a_samp>
#include <a_http>



// -- ??????????ù
// -- 0 - ??????ù ? ??????
// -- 1 - ??????ù ? ??????
// -- 2 - ??????ù
// -- 3 - ??????ù
// -- 4 ? 5 ? ???????

// -- mx.txt
#include <mxINI>

// -- include
#include "../include/a_mysql.inc"
#include "../include/Pawn.CMD.inc" // -- ?????? ?????, ?? ????
#include "../include/Pawn.RakNet.inc" // -- ??? ???? ??? ????? ???
#include "../include/streamer.inc"
#include "../include/sscanf2.inc"
#include "../include/foreach.inc"
#include "../include/lib/m_crzones.inc"
#include "../include/lib/m_crp.inc"
#include "../include/lib/m_dialog.inc"
#include "../include/mxdate.inc"
#include "../include/fdialog.inc"
#include "../include/fly.inc"
#include "../include/crp.inc"

// -- system
#include "../include/system/cp.pwn"
#include "../include/system/cp_race.pwn"
#include "../include/system/pickup.pwn"
#include "../include/system/vehicle.pwn"

#include <voicechat> // -- ?? ?????????? ???

#include <brnotification> // -- inc 

//#include <pawncmd> // -- ?????
#include <pawnraknet> // -- fix

// -- pr
#define FOREACH_I_Bot 0
#define FOREACH_I_Character 0
#define OC_VEHICLE_ID   0

#define vTint              3

#define MAX_ITEMS 100
#define ITEM_MEDKIT 22
#define ITEM_HEADPHONES 23

// ?????????ù ??ù ???????ù ????????ù ??????
new PlayerInventory[MAX_PLAYERS][MAX_ITEMS];

new Float:gGreenZoneAreas[][4] = {
    {844.824829, 794.637268, 13.381684, 69.833580},    // ???????
    {1804.63, 2518.68, 14.64, 119.86},                 // ????????
    {2740.715820, -2441.796142, 21.781099, 289.500274}, // ?????
    {-2430.725341, 204.739364, 26.095102, 171.770828}, // ?????????
    {-2669.68, 2006.10, 11.23, 175.16},                // ???????????
    {-2154.60, 1557.08, 9.88, 73.36}                   // ????? ???????????
};

new bool:gPlayerInGreenZone[MAX_PLAYERS];

//========donate systems=======
new player_sale_time_timer[MAX_PLAYERS];
new player_update_promotions_timer[MAX_PLAYERS];


#define MAX_PLAYERS_PROMOTIONS 3

enum player_donate_data
{
	Node:JSON_PROMOTIONS_ARRAY,
	ADDED_PROMOTIONS
};
new g_player_donate_data[MAX_PLAYERS][player_donate_data];
new g_player_added_promotions_data[1000][3][3];

new Float:cameraTargets[5][3] = {
    {-1698.90, -2702.17, 1499.54},
    {-1698.90, -2702.17, 1499.54},
    {-1698.90, -2702.17, 1499.54},
    {-1698.90, -2702.17, 1499.54},
    {-1698.90, -2702.17, 1499.54}
};

new Float:g_karcer_entrances[3][3] =
{
	{-1816.29, -2733.57, 1501.04},
	{-1807.66, -2733.50, 1501.04},
	{-1799.09, -2733.52, 1501.04}
};

new Float:karcerTarget[3] = { -2399.97,-2400.19,1499.46 };

new Float:g_MoveX[MAX_PLAYERS];
new Float:g_MoveY[MAX_PLAYERS];
new bool:g_IsWalking[MAX_PLAYERS];

new PSpawnLocate[MAX_PLAYERS];

new car_game_ids[][2] = {
    {5, 555},
    {6, 549},
    {7, 401},
    {8, 479},
    {9, 496},
    {10, 404},
    {11, 458},
    {12, 585},
    {13, 536},
    {14, 529},
    {15, 534},
    {16, 542},
    {17, 540},
    {18, 559},
    {19, 421},
    {20, 2554},
    {21, 2548},
    {22, 419},
    {23, 562},
    {24, 507},
    {25, 426},
    {26, 516},
    {27, 467},
    {28, 527},
    {29, 445},
    {30, 589},
    {31, 587},
    {32, 436},
    {33, 560},
    {34, 550},
    {35, 603},
    {36, 2552},
    {37, 565},
    {38, 551},
    {39, 526},
    {40, 442},
    {41, 489},
    {42, 543},
    {43, 480},
    {44, 558},
    {45, 495},
    {46, 475},
    {47, 503},
    {48, 410},
    {49, 402},
    {50, 2553},
    {51, 505},
    {52, 2547},
    {53, 502},
    {54, 400},
    {55, 604},
    {56, 405},
    {57, 506},
    {58, 2550},
    {59, 466},
    {60, 2545},
    {61, 490},
    {62, 420},
    {63, 533},
    {64, 2546},
    {65, 494},
    {66, 429},
    {67, 451},
    {68, 2544},
    {69, 2551},
    {70, 2549},
    {71, 579},
    {72, 541},
    {73, 411},
    {74, 415},
    {75, 2543},
    {76, 462},
    {77, 468},
    {78, 461},
    {79, 463},
    {80, 523},
    {81, 586},
    {82, 521},
    {83, 581},
    {84, 522},
    {85, 582},
    {86, 529},
    {87, 470},
    {88, 416},
    {89, 516},
    {90, 466},
    {201, 413},
    {202, 418},
    {195, 440},
    {211, 2555},
    {212, 2557},
    {213, 2565},
    {214, 2566},
    {215, 2560},
    {216, 2561},
    {217, 2568},
    {218, 2567},
    {219, 2559},
    {220, 2558},
    {353, 2583},
    {221, 2564},
    {222, 2563},
    {223, 2570},
    {224, 2569},
    {275, 2571},
    {276, 2572},
    {327, 2574},
    {328, 2575},
    {329, 2573},
    {330, 2577},
    {331, 2576},
    {366, 2586},
    {367, 2585},
    {349, 2582},
    {400, 412},
    {401, 439},
    {402, 492},
    {403, 547},
    {404, 491},
    {405, 546},
    {406, 2589},
    {407, 2588},
    {408, 2587},
    {409, 483},
    {410, 2590},
    {411, 2591},
    {413, 452},
    {414, 453},
    {415, 454},
    {416, 472},
    {417, 473},
    {418, 493},
    {424, 2592},
    {426, 2594},
    {427, 2596},
    {428, 2595},
    {429, 2593},
    {444, 2597},
    {445, 2598},
    {446, 2599},
    {447, 2600},
    {448, 2601},
    {449, 2602},
    {450, 2603},
    {451, 2604},
    {452, 2607},
    {453, 2608},
    {454, 2609},
    {455, 2610},
    {456, 2611},
    {459, 448},
    {460, 2616},
    {461, 2617},
    {465, 2618},
    {466, 2619},
    {467, 2620},
    {468, 2621},
    {469, 2622},
    {470, 2623},
    {471, 2624},
    {472, 2625},
    {473, 2626},
    {474, 2627},
    {484, 434}
};

new clothes_game_ids[][2] = {
    {475, 11917},
    {462, 12293},
    {463, 12291},
    {457, 14386},
    {458, 14388},
    {419, 5323},
    {430, 5326},
    {431, 5325},
    {425, 5362},
    {420, 5367},
    {421, 5365},
    {399, 18606},
    {390, 310},
    {391, 18621},
    {392, 311},
    {393, 18620},
    {394, 18623},
    {395, 18624},
    {396, 18625},
    {397, 18626},
    {398, 18628},
    {346, 2},
    {344, 302},
    {345, 301},
    {332, 196},
    {333, 129},
    {334, 130},
    {335, 24},
    {340, 197},
    {336, 245},
    {337, 243},
    {338, 89},
    {339, 88},
    {341, 10},
    {342, 92},
    {343, 99},
    {315, 110},
    {313, 108},
    {311, 95},
    {322, 49},
    {323, 53},
    {324, 160},
    {314, 109},
    {312, 106},
    {316, 165},
    {317, 166},
    {318, 174},
    {319, 5},
    {320, 267},
    {321, 283},
    {325, 162},
    {326, 210},
    {238, 65},
    {257, 209},
    {239, 39},
    {240, 207},
    {225, 86},
    {226, 224},
    {227, 232},
    {228, 269},
    {205, 252},
    {206, 236},
    {207, 48},
    {208, 63},
    {91, 23},
    {92, 22},
    {229, 231},
    {93, 220},
    {94, 225},
    {230, 175},
    {95, 202},
    {96, 204},
    {97, 229},
    {203, 57},
    {231, 208},
    {232, 199},
    {233, 264},
    {234, 262},
    {235, 62},
    {98, 200},
    {99, 234},
    {100, 249},
    {101, 235},
    {236, 298},
    {237, 266},
    {209, 270},
    {210, 122}
};
//========the end donate systems=======

new g_armory_materials[5];

new bool:g_IsLeading[MAX_PLAYERS];

// ??????? ???? ??

new Text:clothingbuttons_TD[13];
new PlayerText:clothingbuttons_PTD[MAX_PLAYERS][1];

//-------?????? ????-----------
new kamerazone1, kamerazone2, kamerazone3, kamerazone4, kamerazone5;
new kameratext1, kameratext2, kameratext3, kameratext4, kameratext5;

//-------??????? ????----------
new karcerzone1, karcerzone2, karcerzone3;
new karcertext1, karcertext2, karcertext3;

new Text: admin_time_TD;

new ammoTimer[MAX_PLAYERS];
new zakazdvornik[MAX_PLAYERS];
new mysorarz[MAX_PLAYERS];
new mysorbat[MAX_PLAYERS];
new mysorysh[MAX_PLAYERS];
new mysactor;
new kladactor;
new zona1;
new zona11;
new timersecfer;
new vishka1;
new timerochkov;
new Text:zakaz3_TD[4]; //????
new Text:zakaz4_TD[4];//???
new Text:zakaz5_TD[4];//???ù?
new Text:zakaz6_TD[4];//??????
new Text:zakaz7_TD[4];//?????
new PlayerText:zakaz3_PTD[MAX_PLAYERS][1]; 
new PlayerText:zakaz4_PTD[MAX_PLAYERS][1]; 
new PlayerText:zakaz5_PTD[MAX_PLAYERS][1]; 
new PlayerText:zakaz6_PTD[MAX_PLAYERS][1]; 
new PlayerText:zakaz7_PTD[MAX_PLAYERS][1]; 
new PlayerText:ygygydodo_PTD[MAX_PLAYERS][4];
new	cblit;
new cblitexit;
new mchsrazdewalka;
new mchsavto;
new mchsexit;
new mchsvhod;

new bool:gWhitelist = 0;



//------???????ù ???????????-------
#define notifcmdyes 2
#define notifcmde 3
#define notifcmdpost 4
#define notifcmdopendoor 5
#define vodolaz 9
#define notifycmdarmykpp 6
#define notifcmdkamerzek 7
#define notifcmdkarcerfsin 8


//-----------------------------------


new LastVehicle[MAX_PLAYERS];
new LastSeat[MAX_PLAYERS];
new bool:IsPlayerEntering[MAX_PLAYERS];

new bool:gPlayerInMedBed[MAX_PLAYERS];

new g_last_pr[MAX_PLAYERS];
new g_last_unpr[MAX_PLAYERS];
new g_last_mr[MAX_PLAYERS];
new g_last_unmr[MAX_PLAYERS];

new edited_text[128]; // ?????????ù ?????????ù ??ù ?????? ???ù?????ù

new g_IsFollowing[MAX_PLAYERS];
new g_FollowingTarget[MAX_PLAYERS];
new g_FollowTimer[MAX_PLAYERS];

#define FSIN_SKIN_ID 48 // ID ????? ????????????
new g_original_skin[MAX_PLAYERS];
new Text3D:gEventLabel = Text3D:0;

new g_delivery_target[MAX_VEHICLES];

//??????? ????-------------------------
new vorotafsinkpp;
new vorotafsinkpp1;
new openvorotafsinkpp1;
new vorotastatik;
new vorotki;
new openvorotki;
new kalitka1;
new kalitka2;
new kalitka3;
new kalitka4;
new spherekalitka1;
new spherekalitka2;
new spherekalitka3;
new spherekalitka4;
new svidaniedoor;
new svidaniesphere;

new doorSvidaniePickup[8];
new Text3D:doorSvidanieLabel[8];

new g_gpsZone[MAX_PLAYERS]; // ?????? ID ????

//??????? ??----------------------------
new vorotamo1;
new vorotamo;
new openvorotamo1;
new openvorotamo;
new sphereyahik1;
new sphereyahik2;

//????? ???????----------------------------
new openvoen;
new openbolka1;
new openbolka2;
new bolka1;
new bolka2;
new bolka4;
new bolka5;
new openf1;
new openf2;
new openf3;
new openf4;
new openf5;
new openf6;
new doorf;
new doorf1;
new doorf2;
new doorf3;
new doorf4;
new doorf5;
new doorf6;
new doorvoen;
new voenka;
new door;
new door1;
new door2;
new door3;
new door4;
new door5;
new door6;
new bolk1;
new bolk2;
new barrier1;
new barrier2;

#define INVALID_TEXT_3D Text3D:0

new bool:g_doorOpened[15]; // ?????? ?????? ?????: true = ???????, false = ???????

new bool:gateOpened[7]; // 0 - vorotki, 1 - fsin kpp, 2 - fsin kpp1, 3 - army1, 4 - army, 5 - mvd barrier, 6 fsb barrier
new bool:kpp_hacked = false;
new kpp_hack_timer = -1;
new army_kpp_cp;
//---------------------------------------

new gNotifIndex[MAX_PLAYERS];

new busExitTime[MAX_PLAYERS]; // ????ù ?????? ?? ????????
new busTimer[MAX_PLAYERS];    // ID ???????

new playerPickup[MAX_PLAYERS]; 

#include "../include/json.inc"

new Shopclothing[MAX_PLAYERS]; 
new helpspawn;

new testrazdevminner;
new testrazdevstatus[MAX_PLAYERS];

new player_sell_ownable_car[MAX_PLAYERS];
new ownable_car_sell_status[MAX_PLAYERS];
new player_sell_area;

// --------------------------------------------------------
new bool:FamText = true;
// --------------------------------------------------------

#define MAX_UCHECK 18
#define UrogMoney  200
#define MAX_USCHECK 2

#define STRMAX 32

#define COLOR_GREEN 0x00FF00 // ???????? ?????

new tehsentervlad;

new SpawnWertonFix[MAX_PLAYERS];
new Autorize[MAX_PLAYERS];
new UseAnimWerton[MAX_PLAYERS];

// -- vehicle stream
new Iterator:streamed_players_in_veh[MAX_VEHICLES]<MAX_PLAYERS-1>;
new Iterator:vehicle_in_stream[MAX_PLAYERS]<MAX_VEHICLES-1>;
new bool:Povorotnk[3][MAX_VEHICLES];
new Povor[4];
new pickupotd;

new bool:serverLocked = false;

new koiki;

new Float:SvetforsPos[18][4] = 
{
    //???
    {-366.0, 981.0, 11.14, 0.0}, // ??? 1
    {-368.546600,957.560302,11.14, 270.0}, // ??? 2
    {-391.058990,961.149108,11.14, 180.0}, // ??? 1
    {328.835540,1699.297729,11.14,250.971023}, // ??? 2
    {318.586883,1671.872436,11.14,172.068237}, // ??? 1
    {345.156921,1663.895263,11.14,267.259231}, // ??? 2
    {360.339538,1687.765258,11.14,358.703964}, // ??? 1
    {-388.625457,983.269531,11.14, -270.0}, // ??? 2
    //?? ????? ?????
    {2249.259033,-2144.601074,20.960937,359.253479}, // ??? 2
    {2224.446533,-2140.237060,20.960937,93.107521}, // ??? 1
    {2245.327148,-2169.859130,20.960937,275.290405}, // ??? 1
    //??
    {2454.441406,-2140.342773,20.968269,95.382904}, // ??? 1
    {2450.083496,-2165.327880,20.970085,176.587860}, // ??? 2
    {2475.265869,-2169.774658,20.976562,266.861999}, // ??? 1
    {2479.759277,-2144.504394,20.973707,3.563263}, // ??? 2
    //?? ?ù??? ?? ???????
    {2732.063476,-2144.249023,20.979000,357.948333}, // ??? 2
    {2704.337402,-2139.719238,20.981679,91.915931}, // ??? 1
    {2701.037841,-2165.455810,20.976562,185.278167} // ??? 2
};

new SvetforsColor[sizeof SvetforsPos];
new SvetforsType[18] = {1,2,1,2,1,2,1,2,2,1,1,1,2,1,2,2,1,2};


new Float:gVezd[16][4] = {
{457.414428,994.900451,1001.039978,180},
{460.409393,994.633666,1001.039978,180},
{463.527008,994.476196,1001.039978,180},
{466.723785,994.493286,1001.039978,180},
{479.496978,994.941101,1001.039978,180},
{482.490447,994.761840,1001.039978,180},
{485.538940,994.795043,1001.039978,180},
{488.777587,994.781494,1001.039978,180},
{484.581085,976.139648,1001.039978,0},
{481.391479,976.139526,1001.039978,0},
{478.450775,976.211486,1001.039978,0},
{475.372680,976.791320,1001.039978,0},
{470.754516,976.268493,1001.039978,0},
{467.648162,976.436279,1001.039978,0},
{464.430145,976.352416,1001.039978,0},
{461.381805,976.542419,1001.039978,0}
};

new Float:gViezd[8][3] = {
{1936.1517,-511.5483,11.3228},
{1943.0174,-511.2795,11.3012},
{1949.8996,-511.5617,11.3231},
{1957.0704,-511.5148,11.3201},
{1964.0029,-511.7130,11.3350},
{1971.0075,-511.7753,11.3404},
{1977.7071,-511.5423,11.3221},
{1984.7070,-511.6167,11.3276}
};
new golod[MAX_PLAYERS] = 100;

new Float:urogcheck[MAX_UCHECK][3] = {
    {1218.839355,1186.336303,22.195657},
    {1210.846557,1186.252319,22.238286},
    {1203.372802,1186.267578,22.311395},
    {1203.215698,1191.280029,22.215251},
    {1211.415771,1191.924316,22.124559},
    {1219.193481,1191.427612,22.094377},
    {1211.420532,1207.481811,21.820604},
    {1203.383789,1236.951171,21.298858},
    {1211.013671,1236.726074,21.251373},
    {1218.504882,1236.500122,21.271039},
    {1218.564575,1241.166137,21.227155},
    {1211.262573,1242.359375,21.148031},
    {1203.682861,1242.962646,21.147756},
    {1203.859985,1247.785766,20.981599},
    {1210.098632,1248.272949,21.046739},
    {1201.990600,1259.066528,20.220586},
    {1210.714965,1259.207519,20.337518},
    {1190.945556,1315.731811,18.601379} 
};

enum Wheel_Properties
{
	Radius,
	Width[2],
	Alignment[2],
	Departure[2],
}

enum NumberPlate_Info
{
	Type,
	Number[8],
	Region[3],
}

enum Veh_Info 
{
	Float:vFuel,
	Float:vMileage,
	
	vLightColor,
	vHighLights, 
	
	vNeon[3],

	vNeon1,
	vNeon2,
	vNeon3,

	vColorBody,
	vColorWheels,
	vWheel[Wheel_Properties],
	
	vClearance,
	vSeparate,
	
	vHydraulics, 
	
	vStrob,

	vNumber[NumberPlate_Info],
	
	vTonerFront,
	vTonerRear,
	vTonerFrontSide,
	vTonerRearSide,

	//---------------------------------
	vNitro,
	vLaunchControl,
	vHornSound,
	vExhaustSound,
	vEnableHydraulics,
	vEnableNeon,
	vEnableStrob,
	vEnableHighLights,
	//---------------------------------
	vVinyl,
	vVinylTexture[16],
	
	vSiren,
	vTurnSiren,
};
new vInfo[MAX_VEHICLES][Veh_Info];

#define		DSI		DIALOG_STYLE_INPUT
#define 	DSM		DIALOG_STYLE_MSGBOX

#define CW          "{FFFFFF}"

#define CLRED    	0xFF3030FF
#define CYELLOW 	0xFFFF00FF

new koika1;
new koika2;
new koika3;
new koika4;
new koika5;
new koika6;
new koika7;
new koika8;
new koika9;
new koika10;
new koika11;
new koika12;
new koika13;
new koika14;
new koika15;
new koika16;
new koika17;
new koika18;
new koika19;
new koika20;
new koika21;
new koika22;
new koika23;
new koika24;
new koika25;
new koika26;
new koika27;
new koika28;
new koika29;
new koika30;
new koika31;
new koika32;

new Float:urogscheck[MAX_USCHECK][3] = {
   {1190.945556,1315.731811,18.601379},
   {1190.945556,1315.731811,18.601379} 
};

new
    Float: rent_bike[9][3] = //?????? ??????, ?????????? ?? ??????
{
    //{853.970397,828.781372,13.32386},
    //{-2453.712402,193.706008,26.045289},
    {1904.663696,2228.08078,15.815745},
    {617.4754,1679.3779,12.0710},
    {2260.5508,497.6972,15.7897},
    {2384.1431,1763.8330,-1.5997},
    {-124.0433,975.4545,12.0424},	// SPAWN ???????
    {-1813.411865,708.724853,35.247500},    //???? ?????
    {2747.781738,-2420.139892,21.679512},    //???? ????
    //{1797.775390,2536.721923,14.676565},     //??? ????
    {-304.658447,581.842834,12.129455},    //?????? ????
    {-2471.233154,2830.465332,37.713836}     //????? ???? ?????
};

new
    Float: rent_bikelut[1][3] = //?????? ??????, ??????????
{
    {-2453.712402,193.706008,26.045289}
};

new
    Float: rent_bikebat[1][3] = //?????? ??????, ??????????
{
    {1797.775390,2536.721923,14.676565}
};

new
    Float: rent_bikearz[1][3] = //?????? ??????, ??????????, ?????? ???????
{
    {853.970397,828.781372,13.32386}
};


#include <customhud> // - ? ????
#include <customtune> // - ? ???
#include <sampvoice>

AntiDeAMX2();
AntiDeAMX();

//???ù????? ???????
#define SERVER_NAME 	"Baze Russia RolePlay"
#define SERVER_SITE 	"forum-Baze Russiaroleplay-online.hgweb.ru/index.php"
#define SERVER_MAP_NAME "MST Russia"
#define SERVER_VERSION	"MST Russia v0.1"
#define SERVER_VK       "t.me/"
#define SERVER_TG       "t.me/"

// ----------------???????? ????? ?????------------------------------------------------------------------------
#define ADM_LVL1_NAME 	"??????? ?????????" //1 ??? ???
#define ADM_LVL2_NAME     "?????????" //2 ??? ???
#define ADM_LVL3_NAME     "?????????????" //3 ??? ???
#define ADM_LVL4_NAME     "??????? ?????????????" //4 ??? ???
#define ADM_LVL5_NAME     "??????? ?????????????" //5 ??? ???
#define ADM_LVL6_NAME     "??????? ???????" //6 ??? ???
#define ADM_LVL7_NAME     "???????????" //7 ??? ???

#define REYTIZ_HOST     "172.18.0.1"
#define REYTIZ_USER     "gs115252"
#define REYTIZ_DB     	"gs115252"
#define REYTIZ_PASSWORD "Malsi010"

#define SERVER            "{ffff00}" // - ???????ù ????? ???????
#define SC              "{ffff00}| {ffffff}"
#define USC             "{ff2400}| {ffffff}"
#define tire                      "{FFFF00} | {FFFFFF}"
//??????
#define c_green             "{66CC00}"
#define c_orange_red        "{FF4500}"
#define c_light_grey        "{BDBABD}"
#define c_orange            "{F7C300}"
#define c_yellow            "{FFFF00}"
#define c_red               "{FF0000}"
#define c_gold              "{FFD700}"
#define c_server            "{296A8C}"
#define c_white             "{FFFFFF}"
#define c_Baze Russia           "{DC143C}"
#define c_grey              "{AFAFAF}"
#define c_silver            "{C0C0C0}"
#define c_succes            "{228B22}"
#define tire                      "{FFFF00} | {FFFFFF}"
#define scm_sucess              ""c_green"|"c_white" "
#define scm_error               ""c_red"|"c_white" "
#define scm_info                ""c_gold"|"c_white" " 
#define scm_dialog              ""c_server"|"c_white" "
#define show_dialog             ShowPlayerDialog
#define COLOR_GOLD 0xFFD700FF // ?????????? ???????

//--------???---------
#define BrDialogVoice 						0
#define BrDialogPlates 						1
#define BrDialogFuelFill 					2
#define BrDialogDiner 						3
#define BrDialogHack 						4
#define BrDialogRobbery 					5
#define BrDialogRent 						6
#define BrDialogWires 						7
#define BrDialogPipes 						8
#define BrAudioDialog 						9
#define BrDialogWindow 						10
#define BrChooseServerDialog 				11
#define BrFingerPrintDialog 				12
#define BrNotification 						13
#define BrDialogMenu 						14
#define BrDialogDance 						15
#define BrDialogTaxi 						16
#define BrDialogTaxiOrder 					17
#define BrDialogTaxiRating 					18
#define BrDialogGraphicsSetting 			19
#define BrCaptcha 							20
#define BrDialogMap 						21
#define GUIDonate 							22
#define BrDialogSawmill 					23
#define GUISmiEditor 						24
#define GUIPlayersList 						25
#define BrNewCaptcha 						26
#define GUIRadialMenuForCar 				27
#define GUITuning 							28
#define GUIHalloween 						30
#define GUIHalloweenGame 					31
#define HudManager 							32
#define GUIUsersInventory 					33
#define GUICarsTrunkOrCloset 				34
#define GUIBlackPassBanner 					35
#define GUISocialInteraction 				36
#define GUIDrivingSchool 					37
#define GUIRegistration 					38
#define GUITutorial 						39
#define GUIWoundSystem 						40
#define GUIVipAccount 						41
#define GUIEntertainmentSystem 				42
#define GUIEntertainmentSystemFinalWindow 	43
#define GUIFamilySystem 					45
#define GUIFractionSystem 					46
#define GUISpawnLocation 					50
#define GUIOpenURL							51 
#define GUISocialNetworkLink 				52	
#define GUIInviteBanner 					55

#define PACKET_BLACKRRPC					251
//??, ?????

#define MAX_GATE_DISTANCE 8.0


new TEST_SERVER;
new ISBONUS;
new bonusdon; // ????? ??????
new bonuscash; // ????? ?????
new vodprava; // ???????????? ????? [1 - ???? | 0 - ??? ]
new licoresh; // ???????ù ?? ?????? [1 - ???? | 0 - ??? ]
new bonuslvl;
new SV_GSTREAM:gstream = SV_NULL;
new SV_LSTREAM:lstream[MAX_PLAYERS] = { SV_NULL, ... };

new RazdewPravo, RazdewGibdd, RazdewMvd, RazdewFsb, RazdewBolka, RazdewTrk, RazdewArmy, RazdewFSIN, RazdewArz, RazdewBat, RazdewLit, fsbspec, fsinmeet;

new Text: acs_TD[26];

new PlayerText: acs_coords_PTD[MAX_PLAYERS][1];
new razdev6;
new razdevfsin;
new razdev7;
new razdev8;
new medka;
new kaptfam;
new kaptfam2;
new avtorinokz;
new avtorinokv;
new shetochkovferma = 1;
new pkvixod;
new pkvxod;
new starik;
new prizrak;
new NPC_Dityukovich;
new pickupferma;
new pickuplarek;
new OtdelKadrovPravo;
new OtdelKadrovVoenkom;
new OtdelKadrovCb;
new OtdelKadrovSmi;
new OtdelKadrovGibdd;
new OtdelKadrovMO;

new g_HalloweenQuestActive = 0;
new g_PlayerQuestStatus[MAX_PLAYERS];
new playerid;

// ----------- ??? ?????ù ??? ???ù?? -------------
const max_report = 50;
new report_text[max_report][141];
new report_text_admin[max_report][131];
new report_player[max_report] = {-1,...};
new report_id[MAX_PLAYERS] = {-1,...};
new report_slot[max_report] = {-1,...};
new bool: report_cooldown[MAX_PLAYERS];
new Iterator:admin_players<MAX_PLAYERS-1>;

#define MAX_GREEN_ZONES			(14)	 // ???????????? ???-?? ??????? ???

enum E_GREEN_ZONES_STRUCT
{
	Float: GZ_X,
	Float: GZ_Y,
	Float: GZ_Z,
	Float: GZ_SIZE,
	GZ_NAME[32],
	GZ_AREA,
	bool: GZ_ALLOW_PARK
}

new
	g_green_zones[MAX_GREEN_ZONES][E_GREEN_ZONES_STRUCT] =
{
	{2907.5503,1513.4010,1551.9464, 50.00, "????????? ???????", -1, false},
	{1854.6537,2043.9581,15.8865, 50.00, "????", -1, true},
	{406.4704,1940.9047,8.1792, 50.00, "????", -1, false}, //???? ???????
	{2490.1707,-735.2915,12.1878, 99.00, "????????? ??????? ??????", -1, false},
	{1410.7759,460.1069,13.1630, 99.00, "????????? ???????? ??????", -1, false},
	{1761.8707,2279.4844,15.8625, 70.00, "????????? ?????? ??????'", -1, true},
	{-2239.9749,268.9089,24.5391, 70.00, "????-???? ?????", -1, false},
	{-113.0476,981.1268,12.0230, 50.00, "?????????? ?????", -1, false},
	{1926.6003,2232.8459,15.7236, 35.00, "?????????", -1, false},
	{498.0786,1499.4578,1501.0000, 80.00, "?????????", -1, false}, //??????
	{1916.9771,2312.2861,15.6606, 20.00, "?????????", -1, false}, //??????
	{-126.2508,620.1169,12.0158, 70.00, "?????????????", -1, false},
	{978.1717,-5.9652,1380.9962, 99.00, "?????????????", -1, false}, //??????
	{1818.683227,2516.680419,15.664262, 50.00, "?????? ???", -1, false} //?????? ???
};

new Text: green_zone_TD[1]; // ????? ??????? ????





new Text: ask_edit_TD;
new Text: report_edit_TD;
new stage1[MAX_PLAYERS];
new stage2[MAX_PLAYERS];
new stage3[MAX_PLAYERS];
new stage4[MAX_PLAYERS];
new stage5[MAX_PLAYERS];
new stage6[MAX_PLAYERS];
new texvzai;



//???ù????? ???????

main(){
new a[][] = {"Unarmed (Fist)","Brass K"};
#pragma unused a
}

AntiDeAMX2()
{
        new a[][] =
        {
                "Unarmed (Fist)",
                "Brass K"
        };
        #pragma unused a
}

// -- flame fixx
#define M_DIALOG_DialogForPlayer 1

#define COLOR_YELLOW       0xFFFF00AA

new cont1 = 10;
new cont3 = 10;

new gPlayerLoggin[MAX_PLAYERS char];

//new DuelOffer[999];
new timeduel[MAX_PLAYERS]; 
new DuelTimer[MAX_PLAYERS]; 
new DuelCash[MAX_PLAYERS];

new g_bChatHidden[MAX_PLAYERS];

new stringer1[256];





new Text:autosalon_select_TD[3];
new vixodpravo;
new vxodpravo;
new Text:autosalon_color_TD[9];
new PlayerText:autosalon_select_PTD[MAX_PLAYERS][1];
new Text:autosalon_price_TD[3];
new PlayerText:autosalon_price_PTD[MAX_PLAYERS][1];
new Text:business_menu_TD[4];
new PlayerText:business_menu_PTD[MAX_PLAYERS][4];
new PlayerText:shop_clothes_PTD[MAX_PLAYERS][1];
new Text:shop_clothes_TD[6];
new Text:buy_car_number_TD[14];
new PlayerText:buy_car_number_PTD[MAX_PLAYERS][2];
new PlayerText:logo_PTD[MAX_PLAYERS][2];
new mysql_query_[512];
new PlayerText:speedometr02_PTD[MAX_PLAYERS][8];
new Text:speedometr02_TD[1];
new Text:enter_speedometr_TD[4];
new Text:meetentop_TD[4];
new tkvxodpon;
new tkvixodpon;
new lazaretvhod;
new lazaretvihod;
new cameravhod;
new cameravihod;
new lesopilvhod;
new lesopilvihod;

// -- pr
#define FOREACH_I_Bot 0
#define FOREACH_I_Character 0
#define SPD ShowPlayerDialog

#define         c_main              	"{bb7dff}"
#define         c_white             	"{ffffff}"
#define         c_red               	"{d54a4a}"
#define         c_green             	"{7aca74}"
#define         c_orange            	"{ffad55}"
#define         c_yellow            	"{f9b961}"
#define         c_purple            	"{ea8afd}"
#define         c_gray              	"{999999}"
#define         c_brown             	"{97754f}"
#define         c_black             	"{080808}"
#define         c_lightyellow           "{e1daa3}"
#define         c_lightred          	"{ff6347}"


#define MAX_ADMIN_FORMS 50

#define FORM_BAN 1
#define FORM_PERMBAN 2
#define FORM_WARN 3
#define FORM_UNWARN 4
#define FORM_UNBAN 5


new brak[MAX_PLAYERS];

// ??????? ??? ????? (/af) full work

//?????
new zona2;
new zona21;
new minzavod=9;
new siczavod=59;
new timerzavod;
new timerzavodp;
new vishka2;
//????? ???
new zona3;
new zona31;
new minarz=9;
new minvish=4;
//new minzavod=14;
//new siczavod=59;
new sicvish=59;
new sicarz=59;
new timerarz;
new timerarzl;
new vishka3;
//????? ???
new zona5;
new zona51;
new minkar=9;
new sickar=59;
new timerkar;
new timerkarr;
new vishka5;
//????? ???
new zona4;
new zona41;
new minbus=9;
new sicbus=59;
new timebusz;
new timerbuszl;
new vishka4;
new PlayerText:tiningbr_TD[MAX_PLAYERS][66];

// ------------------------------------
new bool:vodolazrabota[MAX_PLAYERS];
new bool:mestogovodo[MAX_PLAYERS][1];
new vodolazactor;
new bool:vodogopoint[MAX_PLAYERS][1];
new bool:vodolod[MAX_PLAYERS];
new vodolootsphere[1][1];
new minferma=9;
new sicferma=59;
new zakaz11=0;
new zakaz22=0;
new bfam=0;
new shcarup;
new bool:mestolootgo[MAX_PLAYERS][1][1];
// -----------------------------------

new Text:REP_TEXT_TD[2]; // ??????????ù ???-?? ??????? ? ????????

new PlayerText:avtsln_PTD[MAX_PLAYERS][15];
//new Text:avtsln_TD[15];
new quest;

new PickupPoint;
new PickupCreated = 0;


//??????
new Float:PizzaCheckpoint[10][3] = {
{2199.6738,-1766.1499,21.4903},
{2431.0461,-1706.7495,21.4876},
{2378.8538,-1862.7435,21.4903},
{2374.2595,-1887.1068,21.4903},
{2409.5942,-2143.4617,21.4864},
{2552.6003,-2195.3875,21.5006},
{2752.5759,-2447.5283,21.2174},
{2326.6321,-1804.7623,21.9824},
{2308.0000,-1912.1495,21.3555},
{2256.9080,-2102.9331,21.4971}
};
new Pizza[MAX_PLAYERS];
new kyrpick;
new razdkyr;
new mexpick;
new mexs[MAX_PLAYERS];
new launch[MAX_PLAYERS];
new nitro[MAX_PLAYERS];
new diski[MAX_PLAYERS];
new fars[MAX_PLAYERS];

new PlayerText:Textdraw0[MAX_PLAYERS];
new PlayerText:Textdraw1[MAX_PLAYERS];

new PlayerReportFix[MAX_PLAYERS];

#define REPORT_STATUS_NONE			0
#define REPORT_STATUS_ANSWERED		1
#define REPORT_STATUS_SKIPPED		2
#define REPORT_STATUS_DISCONNECT	3

#define TABLE_REPORTS				"reports_list"

enum TEMP_REPORT_E {
	reportID,
	reportPlayerID,
	reportDate[20],
	reportText[144]
};
new TempReportInfo[MAX_PLAYERS][TEMP_REPORT_E];

// -- ?????? ?????/????
#define AUTH_CAMERA_POS 	19.2, 479.3, 13.1
#define AUTH_CAMERA_LOOK 	-400.0, 400.0, 5.0

new buspick1;
new buspick2;
new buspick3;
new buses[MAX_PLAYERS];

new fura[MAX_VEHICLES];
new cargo[MAX_VEHICLES];
new ystroitk;
new arendafuri;
new PlayerIsDalnoboi[MAX_PLAYERS];

new Float:zakazlist[3][11] =
{
{-2404.693603,2709.432373,37.918350,53.883522}, // edovo

{-1092.844970,2200.376708,37.713562,53.883522}, // zavod

{-514.258728,-1653.446655,40.586181,83.539146} // bysaevo
};
//-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
#define MAX_BJ_LOBBY 6



new Text:bj_fon;

new Text:bj_double;
new Text:bj_stop;
new Text:bj_play;
new Text:bj_take;
new Text:bj_exit;
new Text:bj_dealer_score;
new Text:bj_help;

new Text:bj_log_text[MAX_BJ_LOBBY+1][2];
new Text:bj_table_ready[MAX_BJ_LOBBY+1][5];

new Text:bj_text_bet[2];
new Text:bj_text_start_time;
new Text:bj_text_start_timer[MAX_BJ_LOBBY+1];

new Text:bj_text_bj_table[MAX_BJ_LOBBY+1][4];
new Text:bj_text_point_table[MAX_BJ_LOBBY+1][4];

new Text:bj_dealer_card[MAX_BJ_LOBBY+1][4];
new Text:bj_result_table[MAX_BJ_LOBBY+1][4];
//new Text:bj_


forward OnLogsFetched(playerid, page);


new PlayerText:bj_bet[MAX_PLAYERS]; //??????
new PlayerText:bj_money[MAX_PLAYERS]; //?????? ??????

new PlayerText:bj_dealer_point[MAX_PLAYERS];

new PlayerText:bj_members_name[MAX_PLAYERS][4]; //???? ????ù?????

new PlayerText:bj_card_table[MAX_PLAYERS][5][4]; //????? ?????? ?????

new PlayerText:bj_panel_info[MAX_PLAYERS];




new Text3D: BlackJackText[MAX_BJ_LOBBY+1];

new Float:BlackJackPos[MAX_BJ_LOBBY+1][3] =
{
	{0.0,0.0,0.0},
	{2508.173583,2464.578857,2499.664062},
	{2512.847412,2461.920166,2499.664062},
	{2509.147949,2455.435302,2499.664062},
	{2514.589843,2455.347167,2499.664062},
	{2512.984375,2448.713623,2499.664062},
	{2508.083984,2445.854980,2499.664062}
};

enum BJ_Card_struct
{
	Pointscore,
	Cardtexture[32]
}

new BlackJackCard[13][4][BJ_Card_struct] =
{
	{{2, "txd:cards2c"}, {2, "txd:cards2d"}, {2, "txd:cards2h"}, {2, "txd:cards2s"}}, //??????
	{{3, "txd:cards3c"}, {3, "txd:cards3d"}, {3, "txd:cards3h"}, {3, "txd:cards3s"}}, //??????
	{{4, "txd:cards4c"}, {4, "txd:cards4d"}, {4, "txd:cards4h"}, {4, "txd:cards4s"}}, //????????
	{{5, "txd:cards5c"}, {5, "txd:cards5d"}, {5, "txd:cards5h"}, {5, "txd:cards5s"}}, //?ù?????
	{{6, "txd:cards6c"}, {6, "txd:cards6d"}, {6, "txd:cards6h"}, {6, "txd:cards6s"}}, //????????
	{{7, "txd:cards7c"}, {7, "txd:cards7d"}, {7, "txd:cards7h"}, {7, "txd:cards7s"}}, //???????
	{{8, "txd:cards8c"}, {8, "txd:cards8d"}, {8, "txd:cards8h"}, {8, "txd:cards8s"}}, //?????????
	{{9, "txd:cards9c"}, {9, "txd:cards9d"}, {9, "txd:cards9h"}, {9, "txd:cards9s"}}, //???ù???
	{{10, "txd:cards10c"}, {10, "txd:cards10d"}, {10, "txd:cards10h"}, {10, "txd:cards10s"}}, //???ù???

	{{10, "txd:cardsjc"}, {10, "txd:cardsjd"}, {10, "txd:cardsjh"}, {10, "txd:cardsjs"}}, //?????
	{{10, "txd:cardsqc"}, {10, "txd:cardsqd"}, {10, "txd:cardsqh"}, {10, "txd:cardsqs"}}, //????
	{{10, "txd:cardskc"}, {10, "txd:cardskd"}, {10, "txd:cardskh"}, {10, "txd:cardsks"}}, //??????
	{{11, "txd:cardsac"}, {11, "txd:cardsad"}, {11, "txd:cardsah"}, {11, "txd:cardsas"}}  //???
};


enum BJ_Lobby
{
	bool:ActivedLobby,
	bool:StartedLobby,
	StartTimer,
	StageLobby,
	DealerPoint,

	DealerTurnGived,
	TableTurn,
	TableTurnTime,

	Table1Id,
	Table2Id,
	Table3Id,
	Table4Id,

	Table1Point,
	Table2Point,
	Table3Point,
	Table4Point,

	Table1Result,
	Table2Result,
	Table3Result,
	Table4Result,
}
new BlackJackLobby[MAX_BJ_LOBBY+1][BJ_Lobby];

new stol1, stol2, stol3, stol4, stol5, stol6;

enum P_BJ_Info
{
	bool:OnLobby,
	pBJLobby,
	pBJTable,
	pBJBet,

	pBJTakedCard,
}
new pBJInfo[MAX_PLAYERS][P_BJ_Info];


/******************************************************************************/ //??????//
forward IsAInkasator(carid);
//============================??ù?==============================================

//new actor_ink;
new Inkasator[7];
new PlayerIsInkasator[MAX_PLAYERS];
new Float:gInkasator[3][11] =
{
{409.3833,742.8289,12.0027,338.7780},  // ??? ???????? ?? ?????????? ???? ?????
{2376.4221,-2141.5938,21.9713,1.9811},
{1846.0197,2038.5002,15.8865,17.6492}
}; // ??? ???????? ?? ?????????? ???? ?????

/******************************************************************************/
/****************************** [ TUNING ] ************************************/
new Float: pos_tuning [ 4 ] [ 4 ] =
{
	{0, 0, 0, 0}, 
	{0, 0, 0, 0}, 
	{0, 0, 0, 0}, 
	{0, 0, 0, 0}
};
new Nitro[3][] = {
    {1009, 100,"Nitro 2X"},
    {1008, 200,"Nitro 5X"},
    {1010, 300,"Nitro 10X"}
};
/*******************************************************************************/

new l_string[64];

#define MAX_FLOOD_RATE	(3000)
#define FLOOD_RATE_INC	(1000)
#define FLOOD_RATE_KICK	(5000)
//??????
#define PizzaMoney  1000 // ???? ?? ???? ????????
#define PizzaTime 300 // ??????? ?????? ?????ù ??????? (? ????????) ????? ????????? ?????

// ??????????

#define MAX_PFORMA 7

#define SPD ShowPlayerDialog

#define snot ShowNotificationDefault

#define DSMB DIALOG_STYLE_MSGBOX


#define DONATE_CAR_ID_1 	1
#define DONATE_CAR_ID_2 	1
#define DONATE_CAR_ID_3 	1
#define DONATE_CAR_ID_4 	1
#define DONATE_CAR_ID_5 	1
#define DONATE_CAR_ID_6 	1
#define DONATE_CAR_ID_7 	1
#define DONATE_CAR_ID_8 	1
#define DONATE_CAR_ID_9 	1
#define DONATE_CAR_ID_10 	1

#define DONATE_CAR_PRICE_1 		1
#define DONATE_CAR_PRICE_2 		1
#define DONATE_CAR_PRICE_3 		1
#define DONATE_CAR_PRICE_4 		1
#define DONATE_CAR_PRICE_5 		1
#define DONATE_CAR_PRICE_6 		1
#define DONATE_CAR_PRICE_7 		1
#define DONATE_CAR_PRICE_8 		1
#define DONATE_CAR_PRICE_9 		1
#define DONATE_CAR_PRICE_10 	1

#define RAND_WEATHER				// ??????? ????????? ??????
#define ATM_CREATED_PICKUP			// ????????? ?? ?????? ??ù ??????????
#define FUEL_ST_CREATED_PICKUP		// ????????? ?? ?????? ??ù ???

#define ENTER_PASSWORD_ATTEMPS 	(3)  // ???-?? ??????? ?? ???? ?????ù
#define REFER_BONUS_MONEY	(50_000) // ????? ?????? ????? ??????

#define MAX_FAMILY              (200) // ???????????? ???-?? ?????
#define MAX_GIFT                (100) // ???????????? ???-?? ??????
#define DIALOG_START_QUEST 1001
#define DIALOG_END_QUEST 1002
#define DIALOG_AHELP_MAIN        1003
#define DIALOG_AHELP_LEVELS      1004
#define DIALOG_AHELP_COMMANDS    1005
#define DIALOG_SPAWN_SELECT 1337
#define DIALOG_FAM_SPAWN_SET     8500
#define DIALOG_FAM_SPAWN_REMOVE  8501
#define DIALOG_SHABLON_CATEGORY        8502 // ????? ????????? ????????
#define DIALOG_SHABLON_BASIC           8503 // ??????? ???????
#define DIALOG_SHABLON_FOLLOWERS       8504 // ??????? ????ù???
#define DIALOG_SHABLON_HEADFOLLOWERS   8505 // ??????? ????ù???
#define DIALOG_SHABLON_TECH            8506 // ù?????????? ???????
#define DIALOG_SHABLON_MAINADMIN       8507 // ??????ù ????????????ù


#define DIALOG_MASC_MAIN 8517
#define DIALOG_MASC_GOV 8518
#define DIALOG_MASC_GANG 8519
#define DIALOG_MASC_SKIN 8520
#define DIALOG_MASC_INFO 8521

#define DIALOG_KPP_ARMY 8522
#define DIALOG_KPP_HACK 8523

#define DIALOG_ADELIVERY_SELECT 8948
#define DIALOG_ADELIVERY_CONFIRM 8953

#define DIALOG_ADMFLY 9345

#define DIALOG_FSIN_MEETINFO 9346

#define DIALOG_ADMIN_KICK 9347
#define DIALOG_ADMIN_KICK_REASON 9348
#define DIALOG_ADMIN_MUTE 9349
#define DIALOG_ADMIN_MUTE_TIME 9350
#define DIALOG_ADMIN_MUTE_REASON 9351
#define DIALOG_ADMIN_MUTE_UNREASON 9352
#define DIALOG_ADMIN_JAIL 9353
#define DIALOG_ADMIN_JAIL_TIME 9354
#define DIALOG_ADMIN_JAIL_REASON 9355
#define DIALOG_ADMIN_JAIL_UNREASON 9356
#define DIALOG_ADMIN_WARN 9357
#define DIALOG_ADMIN_WARN_REASON 9358
#define DIALOG_ADMIN_WARN_UNREASON 9359
#define DIALOG_ADMIN_SLAP 9360
#define DIALOG_ADMIN_SLAP_REASON 9361
#define DIALOG_ADMIN_BAN 9362
#define DIALOG_ADMIN_BAN_TIME 9363
#define DIALOG_ADMIN_BAN_REASON 9364

#define VEHICLE_MODEL_SUPPLY_TRUCK 433
#define TEAM_SUPPLY_ARMY TEAM_ARMY

#define PICKUP_ACTION_TYPE_ADELIVERY 8524
#define PICKUP_ACTION_TYPE_ADELIVERY_LOAD 8525
#define PICKUP_ACTION_TYPE_ADELIVERY_UNLOAD 8526
#define PICKUP_ACTION_TYPE_ARMORY_ACCEPT 8527

#define MAX_DELIVERY_BOXES 10

#define PICKUP_DATA_TYPE 23111
#define PICKUP_DATA_EXTRA 23112

new bool:g_player_delivery[MAX_PLAYERS];
new g_player_delivery_vehicle[MAX_PLAYERS];
new g_delivery_vehicle[MAX_VEHICLES];
new g_delivery_boxes[MAX_VEHICLES];
new Text3D:g_delivery_label[MAX_VEHICLES];
new Text3D:g_armory_zagruzka_label;
new g_delivery_load_pickup[MAX_VEHICLES];
new g_delivery_unload_pickup[MAX_VEHICLES];
new g_delivery_checkpoint[MAX_VEHICLES];
new g_armory_delivery_pickup;
new g_armory_zagruzka_pickup;

new g_delivery_target_name[MAX_VEHICLES][32];

new g_delivery_load_area[MAX_VEHICLES];
new g_delivery_unload_area[MAX_VEHICLES];

new P_MASCIR[MAX_PLAYERS];
new P_MASCIR_SKIN[MAX_PLAYERS];
new P_REAL_SKIN[MAX_PLAYERS];
new P_REAL_COLOR[MAX_PLAYERS];

#define MAX_POSTS 16
#define MAX_GUARDS 3
#define MAX_JOURNAL 10
#define MAX_PLAYER_NAME 24
#define DIALOG_POST 12429

new Float:GuardPostX[MAX_POSTS];
new Float:GuardPostY[MAX_POSTS];
new Float:GuardPostZ[MAX_POSTS];

new GuardPostZoneBudka[MAX_POSTS];
new GuardPostZonePost[MAX_POSTS];

new GuardPostTimerID[MAX_POSTS];

new Text3D:GuardPostLabel[MAX_POSTS];

new GuardPostGuards[MAX_POSTS][MAX_GUARDS];
new GuardPostGuardTime[MAX_POSTS][MAX_GUARDS];

new GuardPostJournal[MAX_POSTS][MAX_JOURNAL][MAX_PLAYER_NAME + 1];
new GuardPostJournalTime[MAX_POSTS][MAX_JOURNAL];

new gov_ids[7] = {
    1, // ?????????????
    2, // ????ù
    3, // ????????
    4, // ???
    5, // ?????
    6, // ????
    8  // ????
};

new gang_ids[3] = {
    9, // ??????????? ???
    10, // ??????????? ???
    11  // ???????????? ???
};

new org_mask_names[11][64] = {
    "{F0E68C}????????????? ???????",
    "{8B4513}???????ù ?????",
    "{FA8072}????????ù ????????",
    "{FF4500}???",
    "{4169E1}?????",
    "{4169E1}????",
    "{4169E1}???",
    "{AFEEEE}????",
    "{00FF00}??????????ù ???",
    "{483D8B}??????????ù ???",
    "{FFD700}???????????? ???"
};

new gov_names[7][64] = {
    "{F0E68C}????????????? ???????",
    "{8B4513}???????ù ?????",
    "{FA8072}????????ù ????????",
    "{FF4500}???",
    "{4169E1}?????",
    "{4169E1}????",
    "{AFEEEE}????"
};

new gang_names[3][64] = {
    "{00FF00}??????????? ???",
    "{483D8B}??????????? ???",
    "{FFD700}???????????? ???"
};

new org_colors[12] = {
    0xFFFF00FF, 0x8B4513FF, 0xFF3366FF, 0xFFA500FF,
    0x00008BFF, 0x00008BFF, 0xAFEEEEFF,
    0x00FF00FF, 0x483D8BFF, 0xFFD700FF
};

#define COLOR_ERROR 0xFF4444FF


#define MAX_AFK_TIME 			(30) // ???????????? ????ù ??? (? ???????)
#define MAX_BANK_ACCOUNTS 		(8)	 // ???????????? ??? ?????? ? ?????
#define MAX_PHONE_BOOK_CONTACTS (20) // ????. ???-?? ????????? ??ù ?????????? ?????
#define MAX_AUTHORIZATION_TIME	(90) // ????ù ?? ??????????? (? ????????)
#define MAX_FUEL_STATIONS		(18) // ???????????? ???-?? ????????
#define MAX_BUSINESS			(200)// ???????????? ???-?? ???????ù???
#define MAX_BUSINESS_GPS		(50) // ???????????? ???-?? ???????ù??? ? GPS
#define MAX_HOUSES				(900)// ???????????? ???-?? ?????
#define MAX_HOUSE_ROOMS			(5)	 // ???????????? ???-?? ?????? ? ????
#define MAX_GATES				(1)	 // ???????????? ???-?? ????????/?????
#define MAX_ENTRANCES			(200) // ???????????? ???-?? ?????????
#define MAX_ENTRANCE_FLOORS		(5)	 // ???????????? ???-?? ?????? ? ????????
#define MAX_HOTELS 				(3)	 // ???????????? ???-?? ??????
#define MAX_HOTEL_FLOORS 		(7)  // ???????????? ???-?? ?????? ????ù
#define MAX_HOTEL_ROOMS 		(MAX_HOTEL_FLOORS * 12) // ???????????? ???-?? ??????? ? ?????
#define MAX_OWNABLE_CARS		(1500)// ???????????? ???-?? ?????? ù?
#define MAX_VEHICLE_TRUNK_SLOTS	(8)	 // ???????????? ???-?? ?????? ?????????
#define MAX_GANG_REPOSITORIES	(3)  // ???????????? ???-?? ??????? ??ù ????
#define MAX_GZ					(101)// ???????????? ???-?? ????-???
//#define MAX_RADARS				(100)// ???????????? ???-?? ???????
//#define MAX_WEAPON_TINTS		(13) // ???????????? ???-?? ????????? ?????ù
#define MAX_ADVERTS				(100)// ???????????? ???-?? ???ù??????
#define MAX_GREEN_ZONES			(13)	 // ???????????? ???-?? ??????? ???
#define RandomEx(%0,%1) (%0+random(%1-%0))


#define MIN_PLAYERS_FOR_CAPTURE (1)	 // ??????????? ???-?? ??????? ??ù ??????? ??????????

#define BIZ_HEALTH_SERVICE_PRICE (150)	// ????????? ????????????? ??????? ? ???????

#define ADVERT_SEND_PRICE		(250) // ????????? ???????? ???ù?????ù

#define MAP_ICON_STREAM_DISTANCE (100.0) // ?????????? ?????? ?? ????? (??????)

#define MAX_ADMINS 15


#define MAX_ASK				(100)
#define MAX_REPORTS				(100)

enum R_ASK_STRUCT
{
	ASK_CREATOR,
	bool: ASK_EDIT,
	ASK_TEXT[128]
}

new g_ask[MAX_ASK][R_ASK_STRUCT];

new g_ask_created;

enum R_REPORT_STRUCT
{
	REP_CREATOR,
	bool: REP_EDIT,
	REP_TEXT[128]
}

enum HSTATS {
     report
};
new InfoHstats[HSTATS];

enum ASTATS {
     mute,
     ban,
     report,
     spawn,
     kick,
     warn,
     jail
};
new InfoAstats[ASTATS];

enum e_lastpos
{
    Float:lp_x,
    Float:lp_y,
    Float:lp_z,
    lp_int,
    lp_vw
}
new g_lastposition[MAX_PLAYERS][e_lastpos];

new g_PlayerQuestState[MAX_PLAYERS]; // ?????? ?????ù??? ?????? ??ù ??????? ??????

enum QuestState {
    QUEST_NOT_STARTED,
    QUEST_IN_PROGRESS,
    QUEST_COMPLETED
}

new g_report[MAX_REPORTS][R_REPORT_STRUCT];

new g_report_created;

#define MAX_BIND 20
#define DIALOG

#define DIALOG_QM 6565
#define DIALOG_EDIT_QM 6566
#define DIALOG_TEXT_QM 6567

// ------------------------------------------
#define public:%0(%1) \
			forward %0(%1); \
				public %0(%1)

#define Kick:(%0) FixKick(%0)


#define RandomPrize   100000
//#define Dialog ShowPlayerDialog

#define HOLDING(%0) \
	((newkeys & (%0)) == (%0))

#define PRESSED(%0) \
	(((newkeys & (%0)) == (%0)) && ((oldkeys & (%0)) != (%0)))

#define RELEASED(%0) \
	(((newkeys & (%0)) != (%0)) && ((oldkeys & (%0)) == (%0)))

#define PRESSING(%0,%1) \
	(%0 & (%1))

//forward AntiBH(playerid);
//forward AntiBH1(playerid);

// ------------------------------------------
#define VEHICLE_COORD_TYPE_BOOT		(1)
#define VEHICLE_COORD_TYPE_BONNET	(2)

// ------------------------------------------
#define SELECT_PANEL_TYPE_NONE			0
#define SELECT_PANEL_TYPE_CLOTHING		1
#define SELECT_PANEL_TYPE_REG_SKIN		2
#define SELECT_PANEL_TYPE_CAR_MARKET 	3
//*****************************************

#define PT_ITEM_TYPE_NONE   		(0)
#define PT_ITEM_TYPE_ENGINE     	(1)
#define PT_ITEM_TYPE_BRAKE     		(2)
#define PT_ITEM_TYPE_STABILITY     	(3)

// ------------------------------------------
#define GATE_STATUS_OPEN	true
#define GATE_STATUS_CLOSE	false

// ------------------------------------------
#define GPS_STATUS_ON	true
#define GPS_STATUS_OFF	false

// ------------------------------------------
#define ADMIN_TYPE_NONE 	0

// ------------------------------------------
#define CONVERT_TIME_TO_SECONDS 	1
#define CONVERT_TIME_TO_MINUTES 	2
#define CONVERT_TIME_TO_HOURS 		3
#define CONVERT_TIME_TO_DAYS 		4
#define CONVERT_TIME_TO_MONTHS 		5
#define CONVERT_TIME_TO_YEARS 		6

// ------------------------------------------
#define ACCOUNT_STATE_NONE 		0
#define ACCOUNT_STATE_REGISTER 	1
#define ACCOUNT_STATE_LOGIN 	2
#define ACCOUNT_STATE_REG_SKIN 	3

// ------------------------------------------
#define REQUEST_TYPE_OFF		-1
#define REQUEST_TYPE_SUBNET		1
#define REQUEST_TYPE_IP			2

// ------------------------------------------
#define PIN_CODE_STATE_NONE 	0
#define PIN_CODE_STATE_SET 		1 // ????????? ??? ????
#define PIN_CODE_STATE_CHECK	2 // ???????? ??? ????
#define PIN_CODE_STATE_CHANGE	3 // ????? ??? ????
#define PIN_CODE_STATE_LOGIN_CHECK 4 // ???????? ??? ???? ??? ???????????

// ------------------------------------------
#define HOUSE_TYPE_NONE		(-1) 	// ???
#define HOUSE_TYPE_HOME		(0) 	// ???
#define HOUSE_TYPE_ROOM		(1) 	// ?????? ???????
#define HOUSE_TYPE_HOTEL	(2) 	// ?????

// ------------------------------------------
#define REALTOR_TYPE_NONE	(0)
#define REALTOR_TYPE_HOUSE	(1) // ???
#define REALTOR_TYPE_BIZ	(2) // ???

// ------------------------------------------
#define GetItemInfo(%0,%1) 		g_item_type[%0][%1]


#define GetPromoPayDayInfo(%0)		GetPromoPayDayInfo[%0]

#define GetPromoPrizInfo(%0, %1)           GetPromoPriz(%0, %1)

// ------------------------------------------
#define GetTrunkData(%0,%1,%2) 			g_vehicle_trunk[%0][%1][%2]
#define SetTrunkData(%0,%1,%2,%3) 		g_vehicle_trunk[%0][%1][%2] = %3
#define AddTrunkData(%0,%1,%2,%3,%4) 	g_vehicle_trunk[%0][%1][%2] %3= %4

#define IsTrunkFreeSlot(%0,%1)			!GetTrunkData(%0, %1, VT_SQL_ID)

// ------------------------------------------
#define GetOwnableCarData(%0,%1) 		g_ownable_car[%0][%1]
#define SetOwnableCarData(%0,%1,%2)		g_ownable_car[%0][%1] = %2
#define AddOwnableCarData(%0,%1,%2,%3)	g_ownable_car[%0][%1] %2= %3

#define IsOwnableCarOwned(%0)			(GetOwnableCarData(%0, OC_OWNER_ID) > 0)

// ------------------------------------------
#define GetHotelData(%0,%1,%2) 			g_hotel[%0][%1][%2]
#define SetHotelData(%0,%1,%2,%3) 		g_hotel[%0][%1][%2] = %3
#define AddHotelData(%0,%1,%2,%3,%4) 	g_hotel[%0][%1][%2] %3= %4

#define IsHotelRoomOwned(%0,%1)		(GetHotelData(%0, %1, H_OWNER_ID) > 0) // ???ù? ?? ????? ????ù

// ------------------------------------------
#define GetEntranceData(%0,%1) 			g_entrance[%0][%1]
#define SetEntranceData(%0,%1,%2) 		g_entrance[%0][%1] = %2
#define AddEntranceData(%0,%1,%2,%3) 	g_entrance[%0][%1] %2= %3

#define GetPlayerPremium(%0)	GetPlayerData(%0, P_PREMIUM)		// ???????-???????

#define GetFamilyCarData(%0,%1)        g_family_car[%0][%1]
#define SetFamilyCarData(%0,%1,%2)     g_family_car[%0][%1] = %2
#define AddFamilyCarData(%0,%1,%2,%3)  g_family_car[%0][%1] %2= %3

// ------------------------------------------
#define GetOrderData(%0,%1)			g_order[%0][%1]
#define SetOrderData(%0,%1,%2)		g_order[%0][%1] = %2
#define AddOrderData(%0,%1,%2,%3)	g_order[%0][%1] %2= %3

#define	GetPlayerYouTubeEx(%0)	GetPlayerData(%0, P_YOUTUBE) 			// ??????? ????????

#define GetAskData(%0,%1)			g_ask[%0][%1]
#define SetAskData(%0,%1,%2)			g_ask[%0][%1] = %2

#define GetReportData(%0,%1)			g_report[%0][%1]
#define SetReportData(%0,%1,%2)			g_report[%0][%1] = %2


// ------------------------------------------
#define AntiFloodPlayerInit(%0) 			g_player_flood[%0] = g_flood_default_values

#define GetPlayerAntiFloodData(%0,%1) 		g_player_flood[%0][%1]
#define SetPlayerAntiFloodData(%0,%1,%2)	g_player_flood[%0][%1] = %2
#define AddPlayerAntiFloodData(%0,%1,%2,%3)	g_player_flood[%0][%1] %2= %3

#define GetFamilyData(%0,%1)    g_family[%0][%1]
#define SetFamilyData(%0,%1,%2) g_family[%0][%1] = %2
#define AddFamilyData(%0,%1,%2,%3) g_family[%0][%1] %2= %3

#define GetGiftData(%0,%1) 			g_gift[%0][%1]
#define SetGiftData(%0,%1,%2)		g_gift[%0][%1] = %2
#define AddGiftData(%0,%1,%2,%3) 	g_gift[%0][%1] %2= %3

#define GetPlayerCurrentDonate(%0)      GetPlayerData(%0, P_DONATE_MONEY)     // ??????? ?????? ?????-?????
#define GetPlayerTotalDonate(%0)        GetPlayerData(%0, P_DONATE_TOTAL)   // ????? ?????????? ???????

// ------------------------------------------
#define GetPlayerPhoneBook(%0,%1,%2) 	g_player_phone_book[%0][%1][%2]
#define SetPlayerPhoneBook(%0,%1,%2,%3)	g_player_phone_book[%0][%1][%2] = %3

#define IsPlayerPhoneBookInit(%0) 			g_player_phone_book_init[%0]
#define SetPlayerPhoneBookInitStatus(%0,%1) g_player_phone_book_init[%0] = %1

#define GetPlayerPhoneBookContacts(%0) 		g_player_phone_book_contacts[%0]
#define SetPlayerPhoneBookContacts(%0,%1) 	g_player_phone_book_contacts[%0] = %1

#define GetPlayerPhoneBookSelectContact(%0) 		g_player_phone_book_select_cont[%0]
#define SetPlayerPhoneBookSelectContact(%0,%1) 		g_player_phone_book_select_cont[%0] = %1

// ------------------------------------------
#define GetPlayerPhoneCall(%0,%1) 		g_player_phone_call[%0][%1]
#define SetPlayerPhoneCall(%0,%1,%2)	g_player_phone_call[%0][%1] = %2

#define ClearPlayerPhoneCall(%0) g_player_phone_call[%0] = g_phone_call_default_values

// ------------------------------------------
#define GetPlayerOfferInfo(%0,%1) 		g_player_offer[%0][%1]
#define SetPlayerOfferInfo(%0,%1,%2) 	g_player_offer[%0][%1] = %2

#define SetPlayerOfferValue(%0,%1,%2) g_player_offer[%0][O_INCOMING_VALUE][%1] = %2
#define ClearPlayerOffer(%0) g_player_offer[%0] = g_offer_default_values

// ------------------------------------------
#define GetRepositoryData(%0,%1,%2) 	g_repository[%0][%1][%2]
#define SetRepositoryData(%0,%1,%2,%3)	g_repository[%0][%1][%2] = %3

#define	GetPlayerTest(%0)	GetPlayerData(%0, P_TEST)

// ------------------------------------------
#define GetPlayerListitemValue(%0,%1) 		g_player_listitem[%0][%1]
#define SetPlayerListitemValue(%0,%1,%2) 	g_player_listitem[%0][%1] = %2

#define ClearPlayerListitemValues(%0)		g_player_listitem[%0] = g_listitem_values

#define GetPlayerUseListitem(%0) 		g_player_listitem_use[%0]
#define SetPlayerUseListitem(%0,%1) 	g_player_listitem_use[%0] = %1

// ------------------------------------------
#define GetBankAccountData(%0,%1,%2)		g_bank_account[%0][%1][%2]
#define SetBankAccountData(%0,%1,%2,%3) 	g_bank_account[%0][%1][%2] = %3

#define GetPlayerBankTransfer(%0,%1) 	g_player_bank_transfer[%0][%1]
#define SetPlayerBankTransfer(%0,%1,%2)	g_player_bank_transfer[%0][%1] = %2

// ------------------------------------------
#define GetInfoPickupData(%0,%1) info_pickup[%0][%1]

// ------------------------------------------
#define GetTempJobInfo(%0,%1) g_temp_jobs[%0][%1]

// ------------------------------------------
#define GetMonthName(%0) 	month_name[%0 - 1]
#define GetDayName(%0) 		day_name[%0 - 1]

// ------------------------------------------
#define GetNumericName(%0)	numeric_name[%0 - 1]

// ------------------------------------------
#define GetATMInfo(%0,%1)	g_atm[%0][%1]

// ------------------------------------------
#define GetPlayerDrivingExamInfo(%0,%1) 	g_player_driving_exam[%0][%1]
#define SetPlayerDrivingExamInfo(%0,%1,%2) 	g_player_driving_exam[%0][%1] = %2
#define ClearPlayerDrivingExamInfo(%0) 		g_player_driving_exam[%0] = g_driving_exam_default_values

// ------------------------------------------
#define GetTeleportData(%0,%1)		g_teleport[%0][%1]
#define SetTeleportData(%0,%1,%2)	g_teleport[%0][%1] = %2

// ------------------------------------------
#define GetTeleportListData(%0,%1)		g_teleport_list[%0][%1]

// ------------------------------------------
#define GetGangZoneData(%0,%1)			g_gang_zone[%0][%1]
#define SetGangZoneData(%0,%1,%2)		g_gang_zone[%0][%1] = %2

// ------------------------------------------
#define GetGangRepositoryData(%0,%1)		g_gang_repository[%0][%1]
#define SetGangRepositoryData(%0,%1,%2)		g_gang_repository[%0][%1] = %2

// ------------------------------------------
#define GetServerRadioData(%0,%1)	g_server_radio[%0][%1]
#define GetHelpInfoData(%0,%1) 		help_info[%0][%1]
#define GetAnimListData(%0,%1) 		anim_list[%0][%1]
#define GetMapIconsData(%0,%1) 		map_icons[%0][%1]

// ------------------------------------------
#define GetPlayerGPSInfo(%0,%1) 	g_player_gps[%0][%1]
#define SetPlayerGPSInfo(%0,%1,%2) 	g_player_gps[%0][%1] = %2

// ------------------------------------------
#define GetPlayerImprovementInfo(%0,%1) g_player_improvements[%0][%1]

// ------------------------------------------
#define GetPlayerPinCodeState(%0) 		pin_code_state[%0]
#define SetPlayerPinCodeState(%0,%1) 	pin_code_state[%0] = %1

#define GetPlayerPinCodeValue(%0,%1) 	pin_code_value[%0][%1]
#define SetPlayerPinCodeValue(%0,%1,%2)	pin_code_value[%0][%1] = %2

// ------------------------------------------
#define GetPlayerSettingData(%0,%1)		g_player_setting[%0][%1]
#define SetPlayerSettingData(%0,%1,%2)	g_player_setting[%0][%1] = %2
#define AddPlayerSettingData(%0,%1,%2)	g_player_setting[%0][%1] += %2

// ------------------------------------------
#define GetPlayerData(%0,%1) 	g_player[%0][%1]

//23
#define	GetPlayerBoxEx(%0)	GetPlayerData(%0, P_BOXQUEST) 			// ??????? ???????
//

#define SetPlayerData(%0,%1,%2)	g_player[%0][%1] = %2
#define AddPlayerData(%0,%1,%2,%3) g_player[%0][%1] %2= %3

#define GetPlayerAccountID(%0)	GetPlayerData(%0, P_ACCOUNT_ID) 	// ?? ????????
#define GetPlayerIpEx(%0)		GetPlayerData(%0, P_IP) 			// ?? ??????
#define GetPlayerNameEx(%0)		GetPlayerData(%0, P_NAME) 			// ??ù ??????
#define GetPlayerColorEx(%0)	GetPlayerData(%0, P_COLOR)			// ???? ??????
#define GetPlayerSelectSkin(%0)	GetPlayerData(%0, P_SELECT_SKIN) 	// ???????? ????
#define GetPlayerLevel(%0)		GetPlayerData(%0, P_LEVEL)			// ??????? ??????
#define GetPlayerExp(%0)		GetPlayerData(%0, P_EXP)			// ???? ????? ??????
#define GetPlayerSuspect(%0)	GetPlayerData(%0, P_SUSPECT)		// ??????? ??????? ??????
#define GetExpToNextLevel(%0)	((GetPlayerData(%0, P_LEVEL)+1)*4) 	// ????? ????? ? ?????????? ??????
#define GetPlayerPhone(%0)		GetPlayerData(%0, P_PHONE)			// ????? ???????? ??????
#define GetPlayerSex(%0)		GetPlayerData(%0, P_SEX)			// ??? ??????
#define GetPlayerSexName(%0)	GetPlayerData(%0, P_SEX) ? ("???????") : ("???????") // ???????? ????
#define GetPlayerChatType(%0)	GetPlayerData(%0, P_CHAT_TYPE) 		// ??? ???? GetPlayerRepCar
#define GetPlayerRepCar(%0)	GetPlayerData(%0, P_REPCARID) 		// ??? ???? GetPlayerRepCar
#define	GetPlayerAdminEx(%0)	GetPlayerData(%0, P_ADMIN) 			// ??????? ???????
#define	GetPlayerWeaponLic(%0)	GetPlayerData(%0, P_WEAPON_LIC)
#define	GetPlayerHelperEx(%0)	GetPlayerData(%0, P_HELPER) 			// ??????? ????? ???????????
#define	GetPlayerSecretEx(%0)	GetPlayerData(%0, P_SECRET) 			// ??????????
#define GetPlayerMoneyEx(%0)	GetPlayerData(%0, P_MONEY) 			// ?????? ??????
#define GetPlayerBankMoney(%0)	GetPlayerData(%0, P_BANK) 			// ?????? ??????
#define GetPlayerAFKTime(%0)	GetPlayerData(%0, P_AFK_TIME) 		// ????ù ???
#define GetPlayerLastVehicle(%0) GetPlayerData(%0, P_LAST_VEHICLE) 	// ?? ?????????? ???? ? ??????? ?????
#define GetPlayerJobCar(%0)		GetPlayerData(%0, P_JOB_CAR) 		// ??????? ?????????
#define GetPlayerJob(%0)		GetPlayerData(%0, P_JOB) 			// ??????
#define GetPlayerInBiz(%0)		GetPlayerData(%0, P_IN_BUSINESS) 	// ? ????? ?????? ?????\????????ù
#define GetPlayerInHouse(%0)	GetPlayerData(%0, P_IN_HOUSE) 		// ? ????? ???? ?????\????????ù
#define GetPlayerTeamEx(%0)		GetPlayerData(%0, P_TEAM)			// ??????????ù ? ??????? ??????? ?????
#define GetPlayerHealthEx(%0)	GetPlayerData(%0, P_HEALTH)			// ?????????? ???????ù
#define GetPlayerPremiumTime(%0)	GetPlayerData(%0, P_PREMIUM_TIME) // ????ù ???????ù ???????-????????

#define GetPlayerSpawnSetting(%0) 		GetPlayerData(%0, P_SPAWN)  // ????? ??????
#define SetPlayerSpawnSetting(%0,%1) 	SetPlayerData(%0, P_SPAWN, %1)  // ????????? ????? ??????

#define GetPlayerDonateRub(%0) 			GetPlayerData(%0, P_DONATE_RUB) 	// ??????? ?????? ?????-??????

#define GetPlayerDonateMoney(%0) 		GetPlayerData(%0, P_DONATE_MONEY) 	// ??????? ?????? ?????-?????
#define GetPlayerTotalDonate(%0) 		GetPlayerData(%0, P_DONATE_TOTAL) 	// ????? ?????????? ???????

#define GetPlayerInEntrance(%0)			GetPlayerData(%0, P_IN_ENTRANCE)		// ? ????? ????????
#define GetPlayerInEntranceFloor(%0)	GetPlayerData(%0, P_IN_ENTRANCE_FLOOR)	// ?? ????? ????? ? ????????

#define GetPlayerJobName(%0) 	job_name[GetPlayerData(%0, P_JOB)]

#define GetPlayerTempJob(%0) 			GetPlayerData(%0, P_TEMP_JOB) 		// ????????ù ??????
#define GetPlayerTempJobState(%0) 		GetPlayerData(%0, P_TEMP_JOB_STATE) // ??? ??????
#define GetPlayerTempJobCheckAnim(%0)	GetPlayerData(%0, P_TEMP_JOB_CHECK) // ???????? ??????
#define GetPlayerJobLoadItems(%0) 		GetPlayerData(%0, P_JOB_LOAD_ITEMS) // ????????? (...)
#define GetPlayerJobWage(%0) 			GetPlayerData(%0, P_JOB_WAGE) 		// ????????

#define GetPlayerOwnableCar(%0)			GetPlayerData(%0, P_OWNABLE_CAR)	// ?? ??????? ù?
#define GetPlayerRentCar(%0)			GetPlayerData(%0, P_RENT_CAR)		// ?? ????????????? ù?
#define GetPlayerAllowedCar(%0)			GetPlayerData(%0, P_ALLOWED_CAR)	// ?? ??????????? ù?
#define GetPlayerUseTrunk(%0)			GetPlayerData(%0, P_USE_TRUNK)		// ?? ???? ????????????? ?????????

#define GetPlayerCarSlots(%0)			GetPlayerData(%0, P_CAR_SLOTS)		// ?????????? ?????? ??ù ??????????

#define GetPlayerAdminWarn(%0)			GetPlayerData(%0, P_ADMIN_WARN)		// ?????????? ????? ??????

#define SetPlayerUseTrunk(%0,%1)			SetPlayerData(%0, P_USE_TRUNK,	%1)	// ?????????? ?? ???? ????????????? ?????????
#define SetPlayerLogged(%0,%1)				SetPlayerData(%0, P_LOGGED, %1) 	// ?????????? ?????? ???????????
#define SetPlayerChatType(%0,%1)			SetPlayerData(%0, P_CHAT_TYPE, %1) 	// ?????????? ??? ????

#define SetPlayerInBiz(%0,%1)				SetPlayerData(%0, P_IN_BUSINESS, %1)	// ?????????? ??? ? ??????? ????????ù
#define SetPlayerInHouse(%0,%1)				SetPlayerData(%0, P_IN_HOUSE, %1)		// ?????????? ??? ? ??????? ????????ù
#define SetPlayerTeamEx(%0,%1)				SetPlayerData(%0, P_TEAM, %1)			// ??????????ù ? ??????? ??????? ?????

#define SetPlayerInEntrance(%0,%1)			SetPlayerData(%0, P_IN_ENTRANCE, %1)		// ?????????? ??????? ? ??????? ????????ù
#define SetPlayerInEntranceFloor(%0,%1)		SetPlayerData(%0, P_IN_ENTRANCE_FLOOR, %1)  // ?????????? ???? ? ??????? ??????? ????????ù

#define SetPlayerTempJob(%0,%1) 			SetPlayerData(%0, P_TEMP_JOB, %1) 		// ????????ù ??????
#define SetPlayerTempJobState(%0,%1) 		SetPlayerData(%0, P_TEMP_JOB_STATE, %1)	// ??? ??????
#define SetPlayerTempJobCheckAnim(%0,%1)	SetPlayerData(%0, P_TEMP_JOB_CHECK, %1) // ???????? ??????
#define SetPlayerJobLoadItems(%0,%1) 		SetPlayerData(%0, P_JOB_LOAD_ITEMS, %1)	// ????????? (...)

#define IsPlayerLogged(%0)		GetPlayerData(%0, P_LOGGED)		// ?????? ???????????
#define IsPlayerUseAnim(%0)		GetPlayerData(%0, P_USE_ANIM)	// ?????????? ?? ?????? (/anim)
#define IsPlayerInJob(%0)		GetPlayerData(%0, P_IN_JOB)		// ?? ?????? ??
#define IsPlayerAFK(%0)			(GetPlayerData(%0, P_AFK_TIME) >= 5) // ??? ?? ?????
#define IsPlayerMuted(%0)       GetPlayerData(%0, P_MUTE)       // ???? ?? ???
#define IsPlayerFMuted(%0)       GetPlayerData(%0, P_FMUTE)       // ???? ?? ???

// ------------------------------------------
#define GetHouseTypeInfo(%0,%1)		g_house_type[%0][%1]
#define SetHouseTypeInfo(%0,%1,%2)	g_house_type[%0][%1] = %2

#define GetHouseData(%0,%1)			g_house[%0][%1]
#define SetHouseData(%0,%1,%2)		g_house[%0][%1] = %2
#define AddHouseData(%0,%1,%2,%3)	g_house[%0][%1] %2= %3

#define IsHouseOwned(%0)			(GetHouseData(%0, H_OWNER_ID) > 0) // ?????? ?? ???

// ------------------------------------------
#define GetHouseRenterInfo(%0,%1,%2) 		g_house_renters[%0][%1][%2]
#define SetHouseRenterInfo(%0,%1,%2,%3) 	g_house_renters[%0][%1][%2] = %3
#define AddHouseRenterInfo(%0,%1,%2,%3,%4)	g_house_renters[%0][%1][%2] %3= %4

#define GetHouseRentersCount(%0)			g_house_renters_count[%0]
#define SetHouseRentersCount(%0,%1)			g_house_renters_count[%0] = %1
#define AddHouseRentersCount(%0,%1,%2)		g_house_renters_count[%0] %1= %2

#define IsHouseRoomOwned(%0,%1)				(GetHouseRenterInfo(%0, %1, HR_OWNER_ID) > 0)

// ------------------------------------------
#define GetBusinessInteriorInfo(%0,%1)	 	g_business_interiors[%0][%1]
#define SetBusinessInteriorInfo(%0,%1,%2) 	g_business_interiors[%0][%1] = %2

#define GetBusinessData(%0,%1) 			g_business[%0][%1]
#define SetBusinessData(%0,%1,%2) 		g_business[%0][%1] = %2
#define AddBusinessData(%0,%1,%2,%3) 	g_business[%0][%1] %2= %3

#define IsBusinessOwned(%0)				(GetBusinessData(%0, B_OWNER_ID) > 0)

#define GetBusinessGPSInfo(%0,%1)		g_business_gps[%0][%1]
#define SetBusinessGPSInfo(%0,%1,%2)	g_business_gps[%0][%1] = %2
#define AddBusinessGPSInfo(%0,%1,%2,%3) g_business_gps[%0][%1] %2= %3

// ------------------------------------------
#define GetFuelStationData(%0,%1)		g_fuel_station[%0][%1]
#define SetFuelStationData(%0,%1,%2)	g_fuel_station[%0][%1] = %2
#define AddFuelStationData(%0,%1,%2,%3)	g_fuel_station[%0][%1] %2= %3

#define IsFuelStationOwned(%0)			(GetFuelStationData(%0, FS_OWNER_ID) > 0) // ??????? ?? ????????

#define GetTeamRankName(%0,%1)			rank_names[%0-1][%1-1]
#define GetTeamData(%0,%1)				g_organization[%0][%1]
#define SetTeamData(%0,%1,%2)			g_organization[%0][%1] = %2
#define GetTeamName(%0)					GetTeamData(%0, O_NAME)

#define GetWeaponName(%0)				weapon_names[%0]

//#define GetWeaponTint(%0)				weapon_tints[%0]
#define GetWeaponTintData(%0,%1)		g_weapon_tint[%0][%1]

#define GetPlayerSpectateData(%0,%1)	g_spectate[%0][%1]
#define SetPlayerSpectateData(%0,%1,%2) g_spectate[%0][%1] = %2

// ------------------------------------------
#define GetDonatePrice(%0)				g_donate_prices[%0]

// ------------------------------------------
#define GetAdvertData(%0,%1)			g_advert[%0][%1]
#define SetAdvertData(%0,%1,%2)			g_advert[%0][%1] = %2
//***********
#define COR_SERVER          0xFF0000FF
#define COR_QUEST           0xFFD700FF
#define c_server            "{FF6347}"
#define c_s		            "{FF0000}"
#define c_b     	        "{FFFFFF}"
#define c_i		             "{32CD32}"
#define c_m		             "{009900}"
#define COR_RED             0xFF0000FF
#define c_red               "{FF0000}"
#define c_white               "{FF0000}"
#define c_gray               "{FF0000}"


#define f_1					"{FFFFFF}" // ?????
#define f_2					"{CD5C5C}" // ????????
#define f_3					"{FF0000}" // ???????
#define f_4					"{8B0000}" // ?????-???????
#define f_5					"{FFC0CB}" // ??????-???????
#define f_6					"{FFA07A}" // ???? ????
#define f_7					"{FFFF00}" // ??????
#define f_8					"{FFD700}" // ???????
#define f_9					"{EE82EE}" // ??????????
#define f_10				"{800080}" // ?????-??????????
#define f_11				"{808080}" // ?????
#define f_12				"{C0C0C0}" // ???????????
#define f_13				"{00FF00}" // ????
#define f_14				"{008000}" // ???????
#define f_15				"{228B22}" // ??????
#define f_16				"{1E90FF}" // ?????
#define f_17				"{00BFFF}" // ???? ????

#define Send            SendClientMessage
#define SCM 											SendClientMessage
#define f( 				format(string, sizeof(string),
#define GUIRadialMenuForCar 				27


new VehicleColoursTableRGBA[128] = {
// The existing colours from San Andreas
	0x000000FF, 0xF5F5F5FF, 0x2A77A1FF, 0x840410FF, 0x263739FF, 0x86446EFF, 0xD78E10FF, 0x4C75B7FF, 0xBDBEC6FF, 0x5E7072FF,
	0x46597AFF, 0x656A79FF, 0x5D7E8DFF, 0x58595AFF, 0xD6DAD6FF, 0x9CA1A3FF, 0x335F3FFF, 0x730E1AFF, 0x7B0A2AFF, 0x9F9D94FF,
	0x3B4E78FF, 0x732E3EFF, 0x691E3BFF, 0x96918CFF, 0x515459FF, 0x3F3E45FF, 0xA5A9A7FF, 0x635C5AFF, 0x3D4A68FF, 0x979592FF,
	0x421F21FF, 0x5F272BFF, 0x8494ABFF, 0x767B7CFF, 0x646464FF, 0x5A5752FF, 0x252527FF, 0x2D3A35FF, 0x93A396FF, 0x6D7A88FF,
	0x221918FF, 0x6F675FFF, 0x7C1C2AFF, 0x5F0A15FF, 0x193826FF, 0x5D1B20FF, 0x9D9872FF, 0x7A7560FF, 0x989586FF, 0xADB0B0FF,
	0x848988FF, 0x304F45FF, 0x4D6268FF, 0x162248FF, 0x272F4BFF, 0x7D6256FF, 0x9EA4ABFF, 0x9C8D71FF, 0x6D1822FF, 0x4E6881FF,
	0x9C9C98FF, 0x917347FF, 0x661C26FF, 0x949D9FFF, 0xA4A7A5FF, 0x8E8C46FF, 0x341A1EFF, 0x6A7A8CFF, 0xAAAD8EFF, 0xAB988FFF,
	0x851F2EFF, 0x6F8297FF, 0x585853FF, 0x9AA790FF, 0x601A23FF, 0x20202CFF, 0xA4A096FF, 0xAA9D84FF, 0x78222BFF, 0x0E316DFF,
	0x722A3FFF, 0x7B715EFF, 0x741D28FF, 0x1E2E32FF, 0x4D322FFF, 0x7C1B44FF, 0x2E5B20FF, 0x395A83FF, 0x6D2837FF, 0xA7A28FFF,
	0xAFB1B1FF, 0x364155FF, 0x6D6C6EFF, 0x0F6A89FF, 0x204B6BFF, 0x2B3E57FF, 0x9B9F9DFF, 0x6C8495FF, 0x4D8495FF, 0xAE9B7FFF,
	0x406C8FFF, 0x1F253BFF, 0xAB9276FF, 0x134573FF, 0x96816CFF, 0x64686AFF, 0x105082FF, 0xA19983FF, 0x385694FF, 0x525661FF,
	0x7F6956FF, 0x8C929AFF, 0x596E87FF, 0x473532FF, 0x44624FFF, 0x730A27FF, 0x223457FF, 0x640D1BFF, 0xA3ADC6FF, 0x695853FF,
	0x9B8B80FF, 0x620B1CFF, 0x5B5D5EFF, 0x624428FF, 0x731827FF, 0x1B376DFF, 0xEC6AAEFF, 0x000000FF
};

// ------------------------------------------
stock Float: GetAngleToPoint(Float:x1, Float:y1, Float:x2, Float:y2)
{
	return atan2(y1-y2, x1-x2)-90.0;
}





stock SendAsk(playerid, message[])
{
	new ask_id = g_ask_created;

	if (g_ask_created >= MAX_ASK) return 1;

	SetAskData(ask_id, ASK_CREATOR, 	playerid);
	SetAskData(ask_id, ASK_EDIT, 		false);

	format(g_ask[ask_id][ASK_TEXT], 128, message);

	g_ask_created ++;

	return 1;
}

stock DeleteAsk(ask_id)
{
	if(!(0 <= ask_id <= g_ask_created - 1)) return 0;

	SetAskData(ask_id, ASK_CREATOR, 	INVALID_PLAYER_ID);
	SetAskData(ask_id, ASK_EDIT, 		false);

	format(g_ask[ask_id][ASK_TEXT], 128, "");

	if(ask_id == g_ask_created - 1 && ask_id != 0)
		g_ask_created --;

	return 1;
}

stock GetAskId(ask_id)
{
	new index;

	for(new idx; idx < g_ask_created; idx ++)
	{
		if(GetAskData(idx, ASK_EDIT) || GetAskData(idx, ASK_CREATOR) == INVALID_PLAYER_ID) continue;

		index ++;

		if(idx != ask_id) continue;
	}

	return index;
}

stock UpdateAskText()
{
	new count = 0;
	new fmt_text[15];

	for (new idx = 0; idx < g_ask_created; idx ++)
	{
		if (GetAskData(idx, ASK_EDIT)) continue;
		if (GetAskData(idx, ASK_CREATOR) == INVALID_PLAYER_ID) continue;

		count ++;
	}

	format(fmt_text, sizeof fmt_text, "ASK: %d", count);
	TextDrawSetString(ask_edit_TD, fmt_text);
}

stock ShowHud(playerid)
{
    SendCustomRPC(playerid, 0x35);
}

stock HideHud(playerid)
{
    SendCustomRPC(playerid, 0x36);
}


stock SendReport(playerid, message[])
{
	new rep_id = g_report_created;

	if (g_report_created >= MAX_REPORTS) return 1;

	SetReportData(rep_id, REP_CREATOR, 	playerid);
	SetReportData(rep_id, REP_EDIT, 		false);

	format(g_report[rep_id][REP_TEXT], 128, message);

	g_report_created ++;

	return 1;
}

stock DeleteReport(rep_id)
{
	if(!(0 <= rep_id <= g_report_created - 1)) return 0;

	SetReportData(rep_id, REP_CREATOR, 	INVALID_PLAYER_ID);
	SetReportData(rep_id, REP_EDIT, 		false);

	format(g_report[rep_id][REP_TEXT], 128, "");

	if(rep_id == g_report_created - 1 && rep_id != 0)
		g_report_created --;

	return 1;
}

stock GetReportId(rep_id)
{
	new index;

	for(new idx; idx < g_report_created; idx ++)
	{
		if(GetReportData(idx, REP_EDIT) || GetReportData(idx, REP_CREATOR) == INVALID_PLAYER_ID) continue;

		index ++;

		if(idx != rep_id) continue;
	}

	return index;
}

stock UpdateReportText()
{
	new count = 0;
	new fmt_text[15];

	for (new idx = 0; idx < g_report_created; idx ++)
	{
		if (GetReportData(idx, REP_EDIT)) continue;
		if (GetReportData(idx, REP_CREATOR) == INVALID_PLAYER_ID) continue;

		count ++;
	}

	format(fmt_text, sizeof fmt_text, "REP: %d", count);
	TextDrawSetString(report_edit_TD, fmt_text);
}


// ------------------------------------------
stock Float: GetVehicleSpeed(vehicleid)
{
	new Float: speed = -1;

	if(vehicleid != INVALID_VEHICLE_ID)
	{
		new Float: x,
			Float: y,
			Float: z,
			Float: angle;

		GetVehicleVelocity(vehicleid, x, y, z);
		GetVehicleZAngle(vehicleid, angle);

		speed = x / floatsin(-angle, degrees);

		speed *= 100.0;
	}

	return speed;
}


enum e_QM_DATA
{
	line[128]
}
new quick_mes[MAX_PLAYERS][MAX_BIND][e_QM_DATA];

// GLOBAL STRING


new sctring[256], stringer[2000];










new Float:pos[MAX_PLAYERS][3];




// ------------------------------------------
enum
{
	CMD_SETLEADER,
	CMD_SETADMIN,
	CMD_VEH,
	CMD_AWARN,
	CMD_AUNWARN,
	CMD_BANIP,
	CMD_NUM
};
// ------------------------------------------
enum E_PLAYER_STRUCT // ????????? ??????
{
	P_ACCOUNT_ID, 	// ?? ????????
	P_REFER,		// ?????
	P_SEX,			// ??? ??????
	P_SALT[11],		// ????
	P_PASSWORD[65], // ?????? ??????
	P_EMAIL[60 + 1],// ????? ??????
	bool: P_CONFIRM_EMAIL,// ??????????? ?? ?????
	P_SKIN,			// ???? ??????
	P_MONEY,		// ?????? ??????
	P_BANK,			// ?????? ? ?????
	P_ADMIN,		// ??????? ???????
	P_DRIVING_LIC,	// ???????ù ?? ?????????? ????
	P_WEAPON_LIC,	// ???????ù ?? ??????
	P_REG_TIME,		// ????ù ???????????
	P_REG_IP[16],	// ?? ??? ???????????
	P_LAST_IP[16],	// ?? ??? ????????? ?????
	P_LEVEL,		// ??????? ??????
	P_EXP,			// ???? ????? ??????
	P_SUSPECT,		// ??????? ???????
	P_PHONE,		// ????? ????????
	P_PHONE_BALANCE,// ?? ????? ????????
	P_PHONE_COLOR,	// ???? ????????
	P_LAW_ABIDING,	// ?????????????????
	P_IMPROVEMENTS, // ????????ù
	P_DRUGS,		// ?????????
	P_AMMO,			// ???????
	P_METALL,		// ?????????
	P_WIFE,			// ????
	P_TEAM,			// ??????????ù
	P_OSKIN,		// ???? ???????????
	P_SUBDIVISON,	// ?????????????
	P_WAGE,			// ????????
	P_JOB,			// ?????? / ?????????(????)
	P_HOUSE_TYPE,	// ??? ????ù (???/?????/? ????ù?)
	P_HOUSE_ROOM,	// ??????? ? ????
	P_HOUSE,		// ???
	P_BUSINESS,		// ??????
	P_FUEL_ST,	 	// ????????
	P_SETTING_PHONE[13],// ???????? ??????? ??????
	P_SETTING_PIN[5], 	// ??? ???
	P_REQUEST_PHONE,	// ?????? ???????? ??? ???????????
	P_REQUEST_PIN,		// ?????? ??? ???? ??? ???????????
	// -------------------------
	P_LAST_LOGIN_TIME,	// ????ù ?????????? ?????\??????
	// -------------------------
	P_GAME_FOR_HOUR,	// ????ù ???? ?? ???
	P_GAME_FOR_DAY,		// ????ù ???? ?? ????
	P_GAME_FOR_DAY_PREV,// ????ù ???? ?? ????????? ????
	// -------------------------
	P_COLOR,		// ???? ??????
	P_SELECT_SKIN, 	// ???????? ????
	P_CHAT_TYPE,	// ??? ????
	P_AFK_TIME,		// ????ù ???
	P_LAST_VEHICLE,	// ?? ?????????? ???? ? ??????? ?????
	P_LAST_DIALOG,	// ?? ?????????? ???????
	P_USE_ANIM_TYPE,// ??? ?????? ??????? ??????????
	P_PASS_ATTEMPS, // ???-?? ??????? ?? ???????????
	P_TARGET_ID,	// ??????? ?? ??????
	Float: P_HEALTH,// ?? ??????
	// -------------------------
	P_TEMP_JOB,				// ????????ù ??????
	P_TEMP_JOB_STATE,		// ???????? ??? ???? ??????
	P_TEMP_JOB_CHECK,		// ???????? ??????
	// -------------------------
	P_JOB_SERVICE_NAME[17],	// ???????? ??????
	P_JOB_TARIFF,			// ?????
	P_JOB_WAGE,				// ????????
	P_JOB_LOAD_ITEMS,		// ?????????/?????????? (?????/????)
	P_JOB_CAR,				// ??????? ?????????
	P_END_JOB_TIMER,		// ?????? ????????ù ??????
	P_FACTORY_USE_DESK,		// ????? ???? ?????????? ?? ??????
	P_BUS_ROUTE, 			// ??????? ????????
	P_BUS_ROUTE_STEP,		// ??? ????????
	P_MECHANIC_FILL_PAY,	// ?????????? ?? N ???
	P_MECHANIC_REPAIR_PAY,	// ??????????????? ?? N ???
	bool: P_IN_JOB,			// ?? ?????? ??
	// -------------------------
	bool: P_LOGGED,				// ?????? ???????????
	bool: P_USE_ANIM,			// ?????????? ?? ?????? (/anim)
	bool: P_BLOCK_LEAVE_AREA, 	// ????????????? ????? OnPlayerLeaveDynamicArea
	bool: P_ANIMS_INIT,			// ?????????? ?? ?????? ??? ??????
	bool: P_ANIM_LIST_INIT,		// ????????? ?? ????????
	bool: P_SNACK,				// ???? ?? ? ?????? ???????
	Text3D: P_ADVISOR_LABEL,	// ??????? ?????????
	Text3D: P_ADMIN_LABEL,	// ????? ???????
	bool: P_ADVISOR_BLOCK_CHAT,	// ?????????? ???? ???????????
	// -------------------------
	P_AUTH_TIME,		// ????ù ?? ??????????
	P_IN_BUSINESS,		// ? ????? ?????? ?????
	P_IN_HOUSE,			// ? ????? ??? ?????
	P_IN_ENTRANCE,		// ? ????? ????????
	P_IN_ENTRANCE_FLOOR,// ?? ????? ????? ? ????????
	P_LAST_PICKUP,		// ?? ?????? ?? ??????? ???ù? ????????? ???
	P_IN_HOTEL_ROOM,	// ? ????? ?????? ? ?????
	P_IN_HOTEL_FLOOR,	// ?? ????? ????? ? ?????
	P_MED_CHEST,		// ???????
	P_MASK,				// ?????
	P_LOTTERY,			// ?????????? ?????
	P_DRINK_STEP,		// ???-?? ????????????? ???????
	P_REALTOR_TYPE,		// ?????????
	P_USE_SELECT_PANEL,	// ?????????? ?? ?????? ??????
	P_OWNABLE_CAR,		// ?? ??????? ù?
	P_USE_TRUNK,		// ?? ???? ????????????? ?????????
	// -------------------------
	P_LAST_POS_X,
    P_LAST_POS_Y,
    P_LAST_POS_Z,
    P_LAST_POS_INT,
    P_LAST_POS_VW,
    P_LAST_LOGOUT,
    // -------------------------
	P_IP[16], 			// ?? ??????
	P_NAME[20 + 1], 	// ??ù ??????
	P_WIFE_NAME[21],	// ??ù ????
	// -------------------------
	P_ACCOUNT_STATE, 		// ?????? ???????? (??????????/??????????ù)
	P_ACCOUNT_STEP_STATE, 	// ??? (???????????/???????????)
	// -------------------------
	P_WARN,             // ?????
	P_WARN_TIME,        // ????ù ??????
	P_MUTE,             // ????ù ????
	// -------------------------
	P_POWER,			// ????
	P_SKILL_COLT,     	// ????? ?????
	P_SKILL_SDPISTOL,   // ????? ???????????
	P_SKILL_DEAGLE,     // ????? ????
	P_SKILL_SHOTGUN,    // ????? ????????
	P_SKILL_MP5,        // ????? ??5
	P_SKILL_AK47,	    // ????? ??47
	P_SKILL_M4,         // ????? ?4
	P_SKILL_SNIPER_RIFLE,	// ????? ??????????ù ???????? ?????????
	P_SKILL_SAWNOFF,    // ????? ?????
	P_SKILL_COMBAT_SG,  // ????? ??????????? ????????
 	P_SKILL_MICRO_UZI,  // ????? ?????-???
 	// -------------------------
 	P_SPAWN,            // ????? ??????
 	// -------------------------
 	P_DONATE_RUB,	// ù?????? ?????? ?????-??????
	P_DONATE_MONEY,	// ??????? ?????? ?????-?????
	P_DONATE_TOTAL,		// ????? ??????????? ?????-?????
	// -------------------------
	bool: P_HOSPITAL,	// ????? ?? ? ????????
	P_OCCUPIED_BED,		// ????? ?????
	// -------------------------
	bool: P_WEAPON_RELOADING,	// ???????ù???? ?? ??????
	P_RELOADINGS_COUNT[11],		// ?????????? ???????ù??? ??ù ??????? ?????ù
	bool: P_CUFFED,		// ????????? ?? ??????
	// -------------------------
	P_BUY_CAR,			// ???????? ?? ????
	P_RENT_CAR,			// ???????????ù ??????
	P_ALLOWED_CAR,		// ?????????ù ??????
	P_CAR_SLOTS,		// ?????????? ?????? ??ù ????
	P_TARGET_PLAYER_ID,
	P_SLEDAK,
	// -------------------------
	P_JAIL,				// ????ù ?????????ù
	P_FJAIL,              // ????ù ????. ? ????
	P_PR,					
	P_MR, 
	P_KARCER,
	P_KARCER_TIME, 
	P_LOGDOSTUP,
	// -------------------------
	P_REPS_TOTAL,
	P_REPS_TODAY,
	P_ASKS_TOTAL,     // ??????
	P_ASKS_TODAY,     // ??????
	P_MUTES_TOTAL,
	P_MUTES_TODAY,
	P_JAILS_TOTAL,
	P_JAILS_TODAY,
	P_WARNS_TOTAL,
	P_WARNS_TODAY,
	P_BANS_TOTAL,
	P_BANS_TODAY,
	P_SPAWNS_TOTAL,
	P_SPAWNS_TODAY,
	P_KICKS_TOTAL,
	P_KICKS_TODAY, 
	// -------------------------
//	P_WEAPON_TINT[MAX_WEAPON_TINTS], // ????????? ?????ù
	P_PREMIUM,			// ??????? ??????? ????????
	P_PREMIUM_DATE,
	P_PREMIUM_CHAT,
	// -------------------------
	P_ORDER,			// ??????ù?? ?? ?????
	// -------------------------
	P_PREMIUM_TIME,		// ????ù ???????ù ??????? ????????
	//
	P_LOADER_SKILL,
	P_LAST_MP,              // ???????ù???
	P_PREFIX[36], 				// prefix ?????
	P_VIP_STATUS,
	// ----------------------------
	P_APASS,			// ????? ??????????ù
	P_ADMIN_LOGGED,			// ????? ??????????ù
	P_ADMIN_WARN,			// ???? ?????????????
	P_SECRET,               //??????????
	P_3D_PREFIX,            //3d ??????? ?? ?????????
	// ----------------------------
	P_PLAY_PLAYER,
	// -----------------------------
	P_FAMILY,           // ????ù
    P_FAMILY_RANK,      // ???? ? ?????
    P_FAMILY_NAME,    // ??ù ?????
    // -----------------------------
   	P_GIFTS,                // ???????
   	// ------------------------------
   	P_RENT_BIKE,        // ?????? ??????????
   	// ------------------------------
   	CMD_ACCESS[CMD_NUM+1],
   	//
   	P_TEST,
   	//
	P_QUEST_1,
	P_QUEST_2,
	P_QUEST_3,
	P_QUEST_4,
	P_QUEST_5,
	P_QUEST_6,
	P_QUEST_7,
	P_QUEST_8,
	//
	P_QUEST_EXP_1,
	P_QUEST_EXP_2,
	P_QUEST_EXP_3,
	P_QUEST_EXP_4,
	P_QUEST_EXP_5,
	P_QUEST_EXP_6,
	P_QUEST_EXP_7,
	P_QUEST_EXP_8,
	//
	P_UNJ,
	//
	P_YOUTUBE,
	//
	P_BANIHOP,
	//
	P_ADMIN_STATUS,
	P_ADMIN_HOUR,
	P_GET_RUB,
	//
	P_HELPER,
	P_FRACTION_CAR,
	P_PICKUP_TIME,
	P_ANTISLIV,
	P_TOTALHOUR,
	P_BOXQUEST,
	P_QUEST231,
	P_QUEST232,
	P_REPCARID,
	P_QUEST233,
	P_POSTCARD,
	P_BOX_QUEST_1,
	P_BOX_QUEST_2,
	P_BOX_QUEST_3,
	P_BOX_QUEST_4,
	P_BOX_QUEST_5,
	P_BOX_QUEST_6,
	
	P_VERIFICATION,
	
	P_FMUTE,
	P_FWARN,
	P_OWARN,
	
	P_DMZ_STATUS,
	P_DMZ_KILL,
	P_DMZ_KILL1,
	
	P_ACOINS,
	
	P_PROGRESS_EXP_1,
	P_PROGRESS_EXP_2,
	P_PROGRESS_EXP_3,
	P_PROGRESS_EXP_4,
	P_PROGRESS_EXP_5,
	P_PROGRESS_EXP_6,
	P_PROGRESS_1,
	P_PROGRESS_2,
	P_PROGRESS_3,
	P_PROGRESS_4,
	P_PROGRESS_5,
	P_PROGRESS_6,
	
	P_CAPT_KILL,
	
	P_AFREASON,
	
	P_MEDCARD,
    P_MEDCARD_DATE[16],
    P_MEDCARD_STATE, // 0 - ???, 1 - ????????, 2 - ??????
    P_MEDCARD_WARNED_DATE[16],
	
	P_VOENBILET,
    P_VOENBILET_NUM,
    P_VOENBILET_KEM[32],
    P_VOENBILET_ZVANIE[32],
    P_VOENBILET_DATE[16],
   
    P_WORKDAY,
	
	P_DONATE_CASE,

	P_FLOWER_1,
	P_FLOWER_2,
	P_FLOWER_3,
	P_TAKE_FLOWER,
	P_CONGRATULATE_WOMEN,
	P_BUY_PERFUME,
	P_GIVE_PERFUME,
	P_BUY_CAKE,
	P_BUY_PRODUCTS,
	P_BUY_CANDLE,
	P_END_QUEST_8MARTA,
	
	P_COINS,
	
	P_YTPROMO_ACTIVATE,
	
	P_F_QUEST_EXP_1,
	P_F_QUEST_EXP_2,
	P_F_QUEST_EXP_3,
	P_F_QUEST_EXP_4,
	P_F_QUEST_EXP_5,
	
	P_F_QUEST_1,
	P_F_QUEST_2,
	P_F_QUEST_3,
	P_F_QUEST_4,
	P_F_QUEST_5,
	
	P_TOP_1,
	P_TOP_2,
	P_TOP_3,
	P_TOP_4,
	P_TOP_5,
	
	P_BOOMBOX,
	
	P_AUTOSALON_COLOR1,
	P_AUTOSALON_COLOR2,
	
	P_CARREGION_ENTER,
	P_CARNUMBER_ENTER,
	P_CARNUMBER_REGION,
	
	P_SPEEDOMETR,
	P_OHFAM,
	P_OHZAVOD,
	P_OHARZ,
	P_OHKAR,
	P_OHBUS,
	
	P_DATA_ORG_SKIN, 
};

enum E_GIFT_STRUCT
{
	G_SQL_ID,
	Float: G_POS_X,
	Float: G_POS_Y,
	Float: G_POS_Z
}

new g_gift[MAX_GIFT][E_GIFT_STRUCT];
new g_gift_loaded;

new CheckPass[MAX_PLAYERS][65];

// ------------------------------------------
enum
{
	PROMO_TYPE_MONEY = 0, 	// ??????
	PROMO_TYPE_DONATE,		// ?????
	PROMO_TYPE_EXP,			// ????
}

enum E_PROMO_STRUCT
{
	E_PLAYER_STRUCT: P_DATA,
	P_SQL_NAME[16],
	P_NAME[17]
}

new promo_info[4][E_PROMO_STRUCT] =
{
	{P_BANK, "bank", "??????"},
	{P_DONATE_MONEY, "donate_current", "?????-??????"},
	{P_DONATE_RUB, "rub", "?????-?????"},
	{P_EXP, "exp", "Exp"}
};

enum E_COMMAND_TIMER
{
    report,
    adm_nakaz,
	vipad,
}

new use_commad_time[MAX_PLAYERS][E_COMMAND_TIMER];

#define MAX_PERFORMANCE_ITEMS

new engine_ptune[MAX_PERFORMANCE_ITEMS][] =
{
	"???-??????",
	"???????? ?????????????",
	"????????? ?????? ???????? ????????????ù",
	"??????????ù ???????? ???????????? ????????",
	"??????? ?????? ????????ù"
};

new engine_ptune_price[MAX_PERFORMANCE_ITEMS] = {150000, 100000, 70000, 120000, 140000};
new Float:engine_ptune_boost[MAX_PERFORMANCE_ITEMS] = {0.15, 0.08, 0.08, 0.08, 0.10};

new brake_ptune[MAX_PERFORMANCE_ITEMS][] =
{
	"???????????? ???????",
	"?????????? ????????? ?????",
	"??????????? ????????",
	"ù???????? ???????",
	"????????? ????????? ????????"
};
new brake_ptune_price[MAX_PERFORMANCE_ITEMS] = {90000, 100000, 70000, 120000, 140000};
new Float:brake_ptune_boost[MAX_PERFORMANCE_ITEMS] = {2.5, 2.5, 2.0, 3.0, 3.5};

new stability_ptune[MAX_PERFORMANCE_ITEMS][] =
{
	"???????? ?? ??????",
	"????????????",
	"????????? ???????",
	"????????????? ?????????? ????????????",
	"??????? ????????"
};

new stability_ptune_price[MAX_PERFORMANCE_ITEMS] = {25000, 70000, 50000, 80000, 65000};

// ------------------------------------------
enum
{
	STORAGE_METALL = 0, // ???????????? ???-?? ??????????
	STORAGE_AMMO, // ???????????? ???-?? ????????
	STORAGE_DRUGS // ???????????? ???-?? ??????????
}

// ------------------------------------------
enum PInfo
{
    pHelper,
}

// ------------------------------------------
enum E_OWNABLE_CAR_STRUCT
{
	OC_SQL_ID, 			// ?? ? ????
	OC_OWNER_ID,		// ?? ?????????
	OC_OWNER_NAME[21],	// ??ù ?????????
	OC_NUMBER[8],		// ????? ù?
	OC_MODEL_ID,		// ??????
	OC_COLOR_1,			// ???? 1
	OC_COLOR_2,			// ???? 2
	Float: OC_POS_X,	// ??????? ù?
	Float: OC_POS_Y,	// ??????? ù?
	Float: OC_POS_Z,	// ??????? ù?
	Float: OC_ANGLE,	// ??????? ù? (???? ????????)
	bool: OC_ALARM,		// ???????????ù
	bool: OC_KEY_IN,	// ???????? ?? ????
	OC_CREATE,	// ????ù ???????ù
	OC_VINILCAR,	// ????ù ???????ù
	OC_PT_ENGINE,       // performance tuning ?????????
	OC_PT_BRAKE,       	// performance tuning ???????
	OC_PT_STABILITY,    // performance tuning ????????????
	OC_LAST_PRICE,      // ???????ùù ???? ?? ????????? ??ù??????
	OC_LAST_OWNER_GAME_ID,      // ????????? ???? ????????? ???? ??ù??????
	OC_COMFORT_PL,
	OC_SPORT,
	OC_SPORT_PL,
	OC_DRIFT,
};

enum E_FAMILY_CAR_STRUCT
{
    F_CAR_ID,           // ?? ????
    F_SQL_ID,          // ?? ? ????
    F_OWNER_ID,        // ?? ?????????
    F_OWNER_NAME[21],  // ??ù ?????????
    F_MODEL_ID,        // ??????
    F_COLOR_1,         // ???? 1
    F_COLOR_2,         // ???? 2
    F_RANG,             // ? ?????? ?????
    Float: F_POS_X,    // ??????? ù?
    Float: F_POS_Y,    // ??????? ù?
    Float: F_POS_Z,    // ??????? ù?
    Float: F_ANGLE,    // ??????? ù? (???? ????????)
    F_World,
	F_Int,
    bool: OC_KEY_IN,    // ???????? ?? ????
    OC_CREATE,          // ????ù ???????ù
    Float: OC_FUEL      // ???????
};

new g_family_car[MAX_OWNABLE_CARS][E_FAMILY_CAR_STRUCT];
new g_family_car_loaded;

// ------------------------------------------
enum E_VEHICLE_TRUNK_STRUCT
{
	VT_SQL_ID,
	VT_ITEM_TYPE, 		// ??? ????????
	VT_ITEM_AMOUNT,		// ???-??
	VT_ITEM_VALUE
};

// ------------------------------------------
enum E_ITEM_STRUCT
{
	I_NAME[16],
	I_NAME_COUNT[8],
	bool: I_COMBINATION
};

// ------------------------------------------
enum E_ENTRANCE_STRUCT
{
	E_SQL_ID,		// ?? ? ????
	E_FLOORS,		// ???-?? ??????
	Float: E_POS_X, // ???? (?????)
	Float: E_POS_Y, // ???? (?????)
	Float: E_POS_Z, // ???? (?????)
	Float: E_EXIT_POS_X,// ?????
	Float: E_EXIT_POS_Y,// ?????
	Float: E_EXIT_POS_Z,// ?????
	Float: E_EXIT_ANGLE,// ????? (????)
	E_PICKUP_ID,		// ?? ??????
	E_MAP_ICON,			// ?????? ?? ?????
	Text3D: E_LABEL,	// 3? ?????
	E_STATUS			// ?????? (??????? ?? ??? ????????)
};

// ------------------------------------------
enum E_HOTEL_STRUCT
{
	H_SQL_ID,
	H_OWNER_ID,
	H_RENT_DATE,
	bool: H_STATUS,
	H_OWNER_NAME[21]
};

enum E_HOTEL_CAR_PARK_STRUCT
{
	Float: HC_POS_X,
	Float: HC_POS_Y,
	Float: HC_POS_Z,
	Float: HC_ANGLE,
	HC_VEHICLE_ID
};

// ------------------------------------------
enum E_HOUSE_STRUCT
{
	H_SQL_ID,			// ?? ? ???? ??????
	H_NAME[20],			// ???????? \ ???
	H_OWNER_ID,			// ?? ???????? ?????????
	H_IMPROVEMENTS,		// ??????? ?????????
	H_RENT_DATE,		// ?????? ?? n ???????
	H_PRICE,			// ????????? ????
	H_RENT_PRICE,		// ????? ?? ?????? ? ????
	H_LOCK_STATUS,		// ?????? (???????/???????)
	H_ENTRACE,			// ?? ????????
	H_TYPE,				// ??? ???? (????????)
	Float: H_POS_X,		// ??????ù ?????? ?????
	Float: H_POS_Y,		// ??????ù ?????? ?????
	Float: H_POS_Z,		// ??????ù ?????? ?????
	Float: H_EXIT_POS_X,// ??????ù ????? ?????? ?? ????
	Float: H_EXIT_POS_Y,// ??????ù ????? ?????? ?? ????
	Float: H_EXIT_POS_Z,// ??????ù ????? ?????? ?? ????
	Float: H_EXIT_ANGLE,// ???? ????????
	Float: H_CAR_POS_X,	// ??????ù ??????????
	Float: H_CAR_POS_Y,	// ??????ù ??????????
	Float: H_CAR_POS_Z,	// ??????ù ??????????
	Float: H_CAR_ANGLE,	// ???? ???????? ??????????
	Float: H_STORE_X,	// ??????ù ?????
	Float: H_STORE_Y,	// ??????ù ?????
	Float: H_STORE_Z,	// ??????ù ?????
	// -------------------------
	H_OWNER_NAME[20 + 1],	// ??ù ?????????
	Text3D: H_STORE_LABEL,	// 3? ????? (????)
	H_ENTER_PICKUP,			// ????? ?????
	H_HEALTH_PICKUP,		// ????? ???????
	H_MAP_ICON,				// ?????? ?? ?????
	H_FLAT_ID,				// ????? ????????
	// -------------------------
	H_EVICTION,			// ??????? ??-?? ?????????????
	// -------------------------
	H_STORE_METALL,		// ????????? ? ?????
	H_STORE_DRUGS,		// ????????? ? ?????
	H_STORE_WEAPON,		// ?????? ? ?????
	H_STORE_AMMO,		// ??????? ?????ù ? ?????
	H_STORE_SKIN		// ?????? ? ?????
};

enum E_HOUSE_TYPE_STRUCT
{
	HT_NAME[20],
	Float: HT_ENTER_POS_X,		// ??????? ????? ????? ? ?????????
	Float: HT_ENTER_POS_Y,		// ??????? ????? ????? ? ?????????
	Float: HT_ENTER_POS_Z,		// ??????? ????? ????? ? ?????????
	Float: HT_ENTER_POS_ANGLE,	// ??????? ????? ????? ? ?????????
	Float: HT_HEALTH_POS_X,		// ??????? ???????
	Float: HT_HEALTH_POS_Y,		// ??????? ???????
	Float: HT_HEALTH_POS_Z,		// ??????? ???????
	Float: HT_STORE_POS_X,		// ??????? ?????
	Float: HT_STORE_POS_Y,		// ??????? ?????
	Float: HT_STORE_POS_Z,		// ??????? ?????
	HT_INTERIOR,				// ?? ?????????
	HT_ROOMS					// ???-?? ??????
};

enum E_HOUSE_ROOM_STRUCT
{
	HR_SQL_ID,			// ?? ? ????
	HR_OWNER_ID,		// ?? ??????
	HR_RENT_DATE,		// ????????? ?????????? ???????
	HR_RENT_TIME,		// ????? ????????ù
	HR_OWNER_NAME[21]	// ??? ??????????
};

enum // ?????????? ?????
{
	HOUSE_OPERATION_PARAMS, 		// ????????? ?????????? ????
	HOUSE_OPERATION_LOCK,			// ??????? / ???????
	HOUSE_OPERATION_IMPROVEMENTS,	// ?????????
	HOUSE_OPERATION_CAR_DELIVERY,	// ????????? ù? ? ????
	HOUSE_OPERATION_CAR_GPS,		// ???????? ????????? ?? GPS
	HOUSE_OPERATION_RENTERS			// ?????? ???????????
}

// ------------------------------------------
enum E_BUSINESS_STRUCT
{
	B_SQL_ID,			// ?? ? ???? ??????
	B_NAME[24],			// ????????
	B_KRIHA[24],			// ?????
	B_OWNER_ID,			// ?? ???????? ?????????
	B_ENTER_PRICE,		// ???? ?? ???? ? ???
	B_ENTER_MUSIC,		// ???? ??? ?????
	B_IMPROVEMENTS,		// ??????? ?????????
	B_PRODS,			// ?????????? ?????????
	B_PROD_PRICE,		// ????????? 1 ????????
	B_BALANCE,			// ?????? ???????
	B_RENT_DATE,		// ?????? ?? n ???????
	B_PRICE,			// ????????? ???????
	B_RENT_PRICE,		// ????? ?? ?????? ? ????
	B_LOCK_STATUS,		// ?????? (???????/???????)
	B_TYPE,				// ??? ???????
	B_INTERIOR,			// ????????
	Float: B_POS_X,		// ??????ù ???????
	Float: B_POS_Y,		// ??????ù ???????
	Float: B_POS_Z,		// ??????ù ???????
	Float: B_EXIT_POS_X,// ??????ù ????? ?????? ?? ???????
	Float: B_EXIT_POS_Y,// ??????ù ????? ?????? ?? ???????
	Float: B_EXIT_POS_Z,// ??????ù ????? ?????? ?? ???????
	Float: B_EXIT_ANGLE,// ???? ????????
	// -------------------------
	B_OWNER_NAME[20 + 1],	// ??ù ?????????
	Text3D: B_LABEL,		// 3? ?????
	B_ORDER_ID,				// ???? ??????
	B_HEALTH_PICKUP,		// ?? ?????? ???????
	// -------------------------
	B_EVICTION				// ??????? ??-?? ?????????????
};

enum // ???? ????????
{
	BUSINESS_TYPE_SHOP_24_7 = 1, 	// ??????? 24/7
	BUSINESS_TYPE_CLUB = 2, 		// ???? (????????)
	BUSINESS_TYPE_REALTOR_BIZ = 3, 	// ?????????? ?????????? (???????)
	BUSINESS_TYPE_REALTOR_HOME = 4,	// ??????????? ???????? (????)
	BUSINESS_TYPE_CLOTHING_SHOP = 5,// ??????? ??????
	BUSINESS_TYPE_HOTEL = 6,		// ?????
	BUSINESS_TYPE_CAR_MARKET = 7,	// ?????????
	BUSINESS_TYPE_CASINO = 8,		// ??????
	BUSINESS_TYPE_CELL_SALON = 9,	// ??????? ?????
	BUSINESS_TYPE_CAR_TUNING = 10, 	// ??????ù ???. ???????????ù
	BUSINESS_TYPE_SHOP_GUN = 11, 	// ??????? ?????ù
	BUSINESS_TYPE_ACCESSORY_SHOP = 13, 	// ??????? ?????ù
};

enum E_GOS_INTERVIEW
{
	text_time[15],
	text_crit[100]
}
new interview[8][E_GOS_INTERVIEW];
new click_status[MAX_PLAYERS];


enum config
{
    admin_price,
    helper_price,
    sDistRub,
    sDonPower,
    sGiveCoins,
    sBonusMoney,
    sBonusDonate,
    sBonusLevel,
    sBuyBiz
}
new Config[config];

enum cars
{
    car_1,
    car_2,
    car_3,
    car_4,
    car_5
}
new Cars[cars];

enum //
{
	BIZ_OPERATION_PARAMS = 0,		// ?????????? ?????????
	BIZ_OPERATION_LOCK,				// ??????? / ???????
	BIZ_OPERATION_ENTER_PRICE,		// ?????????? ???? ?? ????
	BIZ_OPERATION_PROD_PRICE,		// ?????????? ????????? ????????
	BIZ_OPERATION_PROD_ORDER,		// ???????? ????????
	BIZ_OPERATION_PROD_ORDER_CANCEL,// ???????? ?????
	BIZ_OPERATION_PROFIT_STATS,		// ?????????ù ??????????
	BIZ_OPERATION_IMPROVEMENTS		// ????????ù
};

enum E_BUSINESS_INTERIOR_STRUCT
{
	BT_NAME[64],			// ???????ù ?????????
	Float: BT_EXIT_POS_X, 	// ??????? ?????? ??????
	Float: BT_EXIT_POS_Y, 	// ??????? ?????? ??????
	Float: BT_EXIT_POS_Z, 	// ??????? ?????? ??????
	// -------------------
	Float: BT_ENTER_POS_X, 	// ??????? ?????
	Float: BT_ENTER_POS_Y, 	// ??????? ?????
	Float: BT_ENTER_POS_Z, 	// ??????? ?????
	Float: BT_ENTER_ANGLE, 	// ???? ????????
	BT_ENTER_INTERIOR,		// ????????
	// -------------------
	Float: BT_HEALTH_POS_X,	// ??????? ???????
	Float: BT_HEALTH_POS_Y,	// ??????? ???????
	Float: BT_HEALTH_POS_Z,	// ??????? ???????
	// -------------------
	Float: BT_BUY_POS_X, 	// ??????? ???????
	Float: BT_BUY_POS_Y, 	// ??????? ???????
	Float: BT_BUY_POS_Z, 	// ??????? ???????
	// -------------------
	Float: BT_LABEL_POS_X,	// ??????? 3? ??????
	Float: BT_LABEL_POS_Y,	// ??????? 3? ??????
	Float: BT_LABEL_POS_Z,	// ??????? 3? ??????
	BT_BUY_CHECK_ID			// ?? ?????????
};

enum E_BUSINESS_GPS_STRUCT // ?????? ???????? ? GPS
{
	BG_SQL_ID,
	BG_BIZ_ID,
	BG_POS,
	BG_TIME
};

// ------------------------------------------

enum E_FUEL_STATION_STRUCT
{
	FS_SQL_ID,			// ?? ? ???? ??????
	FS_NAME[20],		// ????????
	FS_OWNER_ID,		// ?? ???????? ?????????
	FS_IMPROVEMENTS,	// ??????? ?????????
	FS_FUELS,			// ?????????? ???????
	FS_FUEL_PRICE,		// ???? ??????? ?? 1 ?
	FS_BUY_FUEL_PRICE,	// ?????????ù ???? ?? 1 ?
	FS_BALANCE,			// ?????? ????????
	FS_RENT_DATE,		// ?????? ?? n ???????
	FS_PRICE,			// ????????? ????????
	FS_RENT_PRICE,		// ????? ?? ?????? ? ????
	FS_LOCK_STATUS,		// ?????? (???????/???????)
	Float: FS_POS_X,	// ??????ù ????????
	Float: FS_POS_Y,	// ??????ù ????????
	Float: FS_POS_Z,	// ??????ù ????????
	// -------------------------
	FS_OWNER_NAME[20 + 1],	// ??ù ?????????
	Text3D: FS_LABEL,		// 3? ?????
	FS_ORDER_ID,			// ???? ??????
	FS_AREA,				// ????
	// -------------------------
	FS_EVICTION				// ??????? ??-?? ?????????????
};

enum //
{
	FUEL_ST_OPERATION_PARAMS = 0,		// ?????????? ?????????
	FUEL_ST_OPERATION_LOCK,				// ??????? / ???????
	FUEL_ST_OPERATION_NEW_NAME,			// ????? ????????
	FUEL_ST_OPERATION_FUEL_PRICE,		// ?????????? ???? ?? ???????
	FUEL_ST_OPERATION_BUY_FUEL_PRIC,	// ?????????? ?????????? ???? ???????
	FUEL_ST_OPERATION_FUEL_ORDER,		// ???????? ???????
	FUEL_ST_OPERATION_FUEL_ORDER_CA, 	// ???????? ?????
	FUEL_ST_OPERATION_PROFIT_STATS,		// ?????????ù ??????????
	FUEL_ST_OPERATION_IMPROVEMENTS		// ????????ù
};

// ------------------------------------------
enum E_WEATHER_STRUCT
{
	W_NAME[16],
	W_ID,
	W_DEGREES
};

// ------------------------------------------
enum E_ORDER_STRUCT
{
	O_SQL_ID, 		// ?? ??????
	O_TYPE,			// ??? (???,???)
	O_COMPANY_ID,	// ?? ???????ù??ù
	O_AMOUNT,		// ???-??
	O_PRICE,		// ???? ?? 1 (???????/? ???????/...)
	O_TIME,			// ????ù ?????????ù
	O_USED			// ??????ù???ù ??
};

enum
{
	ORDER_TYPE_FUEL_STATION = 1, // ????????
	ORDER_TYPE_BUSINESS 		// ??????
};

// ------------------------------------------
// 			?????? ?????????

enum E_PLAYER_SETTINGS_STRUCT
{
	S_CHAT_TYPE,	// ??? ???? (????????,????????,Advance)
	S_TEAM_CHAT,	// ??????????? ???? ???????????
	S_PLAYERS_NICK,	// ??????????? ????? ??? ????????
	S_NICK_IN_CHAT,	// ??????????? ????? ? ????
	S_ID_IN_CHAT,	// ??????????? ?? ?????? ? ????
	S_VEH_CONTROL	// ?????????? ??????????? (??????? ? ???????/???????)
};

enum
{
	SETTING_CHAT_OFF = 0,
	SETTING_CHAT_STANDART,
	SETTING_CHAT_ADVANCE,
	SETTING_TYPE_OFF = 0,
	SETTING_TYPE_ON
};

// ------------------------------------------
enum E_IMPROVEMENTS_STRUCT
{
	I_NAME[32],
	I_PRICE,
	I_LEVEL
};

// ------------------------------------------
enum E_PLAYER_GPS_STRUCT
{
	bool: G_ENABLED,
	Float: G_POS_X,
	Float: G_POS_Y,
	Float: G_POS_Z
};

enum E_GPS_STRUCT
{
	G_POS_X,
	G_POS_Y,
	G_POS_Z
};

// ------------------------------------------
enum E_HELP_INFO_STRUCT
{
	H_TITLE[64],
	H_INFO[1024]
};

// ------------------------------------------
enum E_MP_STRUCT
{
	MP_CREATE, 			// ??????? ?? ???????ù???
	MP_NAME[32],        // ????????
	MP_PRIZE,           // ???? ?? ???????ù???
	Float: MP_POS_X,    // ?????????? X
	Float: MP_POS_Y,    // ?????????? Y
	Float: MP_POS_Z     // ?????????? Z
};

new mp[E_MP_STRUCT];

// ------------------------------------------
enum E_SERVER_RADIO_STRUCT
{
	SR_CHANNEL_NAME[32],
	SR_CHANNEL_URL[64]
};

// ------------------------------------------
enum E_ANIM_LIST_STRUCT
{
	AL_DESCRIPTION[32],
	AL_LIB[32],
	AL_NAME[32],
	Float: AL_DELTA,
	AL_LOOP,
	AL_LOCK_X,
	AL_LOCK_Y,
	AL_FREEZE,
	AL_TIME
};

// ------------------------------------------
enum E_MAP_ICONS_STRUCT
{
	Float: MI_POS_X,
	Float: MI_POS_Y,
	Float: MI_POS_Z,
	MI_TYPE
};

// ------------------------------------------
enum E_TELEPORT_STRUCT
{
	T_NAME[128],
	Float: T_PICKUP_POS_X,
	Float: T_PICKUP_POS_Y,
	Float: T_PICKUP_POS_Z,
	T_PICKUP_VIRTUAL_WORLD,
	Float: T_POS_X,
	Float: T_POS_Y,
	Float: T_POS_Z,
	Float: T_ANGLE,
	T_INTERIOR,
	T_VIRTUAL_WORLD,
	T_ACTION_TYPE,
	Text3D: T_LABEL
};

enum // ???? ?????????
{
	T_ACTION_TYPE_BLOCK_LEAVE_AREA = 1, // ????????????? ????? ??????? OnPlayerLeaveDynamicArea
	T_ACTION_TYPE_END_JOB,	// ??????????? ?????? ?? ????????? ?????? ???? ??????? ?? ????
	T_ACTION_TYPE_LEAVE_HOSPITAL, // ????????? ????????ù ??? ??? ? ????????
	T_ACTION_TYPE_LEAVE_PPS, // ????????? ????? ?? ? ??????
	T_ACTION_TYPE_FSINVHOD, // ?????? ??ù ????
	T_ACTION_TYPE_ARMYVHOD, // ???????
	T_ACTION_TYPE_KPZVHOD, // ???
	T_ACTION_TYPE_FSINANDZEK, // ??????????? ? ????
	T_ACTION_TYPE_GROOMROOM, // ???????ù
	T_ACTION_TYPE_FSINSVIDANIE1, 
	T_ACTION_TYPE_FSINSVIDANIE2, 
	T_ACTION_TYPE_FSINSVIDANIE3, 
	T_ACTION_TYPE_FSINSVIDANIE4, 
	T_ACTION_TYPE_FSINSVIDANIE5, 
	T_ACTION_TYPE_FSINSVIDANIE6, 
	T_ACTION_TYPE_FSINSVIDANIE7, 
	T_ACTION_TYPE_FSINSVIDANIE8, 
};

// ------------------------------------------
enum E_DRIVING_TUTORIAL_STRUCT
{
	DT_TITLE[64],
	DT_INFO[2048]
};

enum E_PLAYER_DRIVING_EXAM_STRUCT
{
	DE_POINTS, // ????
	DE_EXAM_STEP, // ?????ù
	DE_ROUTE_STEP // ????????
};

// ------------------------------------------
enum E_DRIVING_EXAM_STRUCT
{
	DE_TITLE[64],
	DE_LIST_ITEMS[256],
	DE_CORRECT_ANSWER
};

// ------------------------------------------
enum E_ATM_STRUCT
{
	Float: A_POS_X,
	Float: A_POS_Y,
	Float: A_POS_Z,
	Float: A_ROT_Z
};

enum E_REPORT_STRUCT
{
    Reptex[130],// ù???? ??????? ????? ????? 130 ????????
    RepTime,
};
enum E_ASK_STRUCT
{
    Asktex[130],// ù???? ??????? ????? ????? 130 ????????
    AskTime,
};
new RepInfo[MAX_PLAYERS][E_REPORT_STRUCT]; // ???????? 100 ????????.
new AskInfo[MAX_PLAYERS][E_ASK_STRUCT]; // ???????? 100 ????????.
// ------------------------------------------

// ------------------------------------------
enum E_BANK_ACCOUNT_STRUCT
{
	BA_ID,
	BA_NAME[20 + 1],
	BA_PIN_CODE[9],
	BA_BALANCE,
	BA_REG_TIME
};

enum E_BANK_TRANSFER_STRUCT
{
	BT_ID,
	BT_NAME[20 + 1]
};

// ------------------------------------------
enum E_PHONE_CALL_STRUCT
{
	PC_INCOMING_PLAYER,		// ?????ù??? ?????
	PC_OUTCOMING_PLAYER,	// ????ù??? ?????
	PC_TIME,				// ????ù ??????
	bool:PC_ENABLED		// ????? ???????? (???\????)
};

// ------------------------------------------
enum E_PHONE_BOOK_STRUCT
{
	PB_SQL_ID,
	PB_NAME[21],
	PB_NUMBER[10],
	PB_TIME
};

enum
{
	PHONE_BOOK_OPERATION_OPTIONS = 0,	// ????????
	PHONE_BOOK_OPERATION_CALL,			// ?????????
	PHONE_BOOK_OPERATION_SEND_SMS,		// ????????? ???
	PHONE_BOOK_OPERATION_CHANGE_NAM,	// ???????? ??ù
	PHONE_BOOK_OPERATION_CHANGE_NUM,	// ???????? ?????
	PHONE_BOOK_OPERATION_DELETE_CON,	// ??????? ???????
};
// ------------------------------------------
enum E_MINER_CARRIAGE_STRUCT
{
	Float: MC_START_POS_X,
	Float: MC_START_POS_Y,
	Float: MC_START_POS_Z,
	Float: MC_END_POS_X,
	Float: MC_END_POS_Y,
	Float: MC_END_POS_Z,
	bool: MC_STATUS,
	MC_OBJECT_ID,
	MC_PICKUP_ID,
	Text3D: MC_LABEL,
	MC_ORE_COUNT,
	bool: MC_IN_MOVE
};

// ------------------------------------------
enum E_FACTORY_DESK_STRUCT
{
	Float: FD_POS_X,
	Float: FD_POS_Y,
	Float: FD_POS_Z,
	FD_CHEK_ID,
	FD_OBJECT_ID,
	bool: FD_USED,
	Text3D: FD_LABEl
};

// ------------------------------------------
enum E_REPOSITORY_STRUCT
{
	R_AMOUNT, // ???-??
	Text3D: R_LABEL,
	Text3D: R_LABEL_2,
	bool: R_NOT_SAVE
};

enum // ???? ???????
{
	REPOSITORY_TYPE_MINER, 		// ?????
	REPOSITORY_TYPE_FACTORY, 	// ?????
	REPOSITORY_TYPE_OIL_FACTORY, // ??????????
	REPOSITORY_TYPE_ARMY,		// ???????ù ?????
	REPOSITORY_TYPE_SAWMILL,	// ?????????
};

enum
{
	// ?????
	REPOSITORY_ACTION_MINER_METAL = 0,	// ????????? ?????
	REPOSITORY_ACTION_MINER_ORE,		// ????
	REPOSITORY_ACTION_MINER_REMELTI,	// ?? ??????????

	// ?????
	REPOSITORY_ACTION_FACTORY_METAL = 0, // ?????????
	REPOSITORY_ACTION_FACTORY_FUEL,		// ???????
	REPOSITORY_ACTION_FACTORY_PROD,		// ????????

	// ??????????
	REPOSITORY_ACTION_OIL_FACTORY_F = 0, // ??????? ?? ???????????

	// ???????ù ?????
	REPOSITORY_ACTION_ARMY_METAL,	// ????????? ?? ?????? ???????? ?????
	REPOSITORY_ACTION_ARMY_AMMO,		// ??????? ?? ?????? ???????? ?????

	// ?????????
	REPOSITORY_ACTION_SAWMILL_WOOD = 0,	// ????????? ??????
};
new g_repository[5][3][E_REPOSITORY_STRUCT]; // ??????

// ------------------------------------------
enum E_GANG_REPOSITORY_STRUCT
{
	GR_GANG,
	GR_METALL,
	GR_AMMO,
	GR_DRUGS,
	GR_MONEY,
	Text3D: GR_LABEL,
	GR_PICKUP,
	bool: GR_LOCK
}

new g_gang_repository[MAX_GANG_REPOSITORIES][E_GANG_REPOSITORY_STRUCT]; // ?????? ????

// ------------------------------------------

enum E_GANG_ZONES_STRUCT
{
	Float: GZ_MIN_X,
	Float: GZ_MIN_Y,
	Float: GZ_MAX_X,
	Float: GZ_MAX_Y,
	GZ_GANG,
	GZ_ZONE,
	GZ_AREA
}

new g_gang_zone[MAX_GZ][E_GANG_ZONES_STRUCT]; // ????????
new g_gang_zones_loaded; // ?????????? ??????????? ???????

// ------------------------------------------
enum
{
	GANG_ARZ = 1,	// ??? ??????????ù
	GANG_BAT,		// ??? ??????????ù
	GANG_LYT,		// ??? ???????????ù
}

// ------------------------------------------
new gang_zone_colors[4] =
{
	0xFFFFFF75,	// ????????ù ????
	0x00990075, // ??????????ù ???
	0x6666FF75, // ??????????ù ???
	0xFFCD0075  // ???????????ù ???
};

new family_colors[17] =
{
	0xFFFFFFFF, // ?????
	0xCD5C5CFF, // ????????
	0xFF0000FF, // ???????
	0x8B0000FF, // ?????-???????
	0xFFC0CBFF, // ??????-???????
	0xFFA07AFF, // ???? ????
	0xFFFF00FF, // ??????
	0xFFD700FF, // ???????
	0xEE82EEFF, // ??????????
	0x800080FF, // ?????-??????????
	0x808080FF, // ?????
	0xC0C0C0FF, // ???????????
	0x00FF00FF, // ????
	0x008000FF, // ???????
	0x228B22FF, // ??????
	0x1E90FFFF, // ?????
	0x00BFFFFF // ???? ????
};

new family_colors_name[][32] =
{
	{"?????"},
	{"????????"},
	{"???????"},
	{"ù????-???????"},
	{"??????-???????"},
	{"???? ????"},
	{"??????"},
	{"???????"},
	{"??????????"},
	{"ù????-??????????"},
	{"?????"},
	{"???????????"},
	{"????"},
	{"???????"},
	{"??????"},
	{"?????"},
	{"???? ????"}
};

// ------------------------------------------
enum E_CAPTURE_STRUCT
{
	bool: C_STATUS,
	C_GANG_ZONE,
	C_ATTACK_TEAM,
	C_PROTECT_TEAM,
	C_ATTACKER_KILLS,
	C_PROTECTOR_KILLS,
	C_TIME,
	C_WAIT_TIME[3]
}

new g_capture[E_CAPTURE_STRUCT]; // ????? ??ù ???

enum E_FAMILY_STRUCT // ????????? ?????
{
    F_SQL_ID,       // ?? ????????
    F_NAME[63 + 1], // ???????? ?????
    F_USER_ID,      // ????????? ?????
    F_TIME,         // ????ù ???????ù
    F_COLOR,        // ???? ?????
    F_LEVEL,        // ??????? ?????
    F_EXP,          // ???? ?????
    F_RANK1[32],    // ???? 1
    F_RANK2[32],    // ???? 2
    F_RANK3[32],    // ???? 3
    F_RANK4[32],    // ???? 4
    F_RANK5[32],    // ???? 5
    F_RANK6[32],    // ???? 6
    F_RANK7[32],    // ???? 7
    F_RANK8[32],    // ???? 8
    F_RANK9[32],    // ???? 9
    F_RANK10[32],   // ???? 10
    F_MONEY,        // ?????: ??????
    F_DRUGS,        // ?????: ?????????
    F_TREE,         // ?????: ??????
    F_METAL,        // ?????: ?????????
    F_AMMO,         // ?????: ???????
    F_HOUSE_ID,      // ????? ????
    Float:F_SPAWN_POSITION[4],    // ??????ù ??????
    F_SPAWN_IV[2],
    F_TAKE_MONEY,    //???? ??????? ??ù??ù ????? ?? ?????? ?????
	F_TAKE_DRUGS,    //???? ??????? ??ù??ù ????? ?? ?????? ?????
	F_TAKE_METALL,    //???? ??????? ??ù??ù ?????????? ?? ?????? ?????
	F_TAKE_AMMO,    //???? ??????? ??ù??ù ???????? ?? ?????? ?????
	F_RANG_INV,
	F_RANG_UNINV,
	F_RANG_MUTE,
	F_RANG_UNMUTE,
	F_RANG_WARN,
	F_RANG_UNWARN,
	F_RANG_GIVER,
	F_FAMILY_CARS,//?????????? ?? ? ?????
	F_OCKIFARMA,
	F_OCZAVOD,
	F_VISHARZ,
	F_VISHKAR,
	F_VISBUS
};

new g_family[200][E_FAMILY_STRUCT];

new g_family_loaded;

// ------------------------------------------




//RP TEST

enum tRPinfo
{
    tRPVopros[64],
    tRPOtvet[256],
    tRPOtvet_Good
};

new RPtest[8][tRPinfo] = {
    {"??? ?????????? ?????? RolePlay ? ","(1) ???????? ??? ???????\n(2) ??????ù ????\n(3) ????????????? ???????? ?????????? ? ??????? ???",2},
    {"??? ?????????? ?????? MetaGaming ? ","(1) ???????? ? ù/?\n(2) ??????????? ?? ???ù ????? ????ù\n(3) ???????? ????? ?????? ???????????\n(4) ????????????? ???????? ?????????? ? ??????? ???",4},
    {"??? ?????????? ?????? SpawnKill ? ","(1) ???????? ?? ????? ??ù?????ù (Spawn)\n(2) ???????? ? ù/?\n(3) ??? ??? - ?.?. ??????????.\n(4) ????????? ??????",1},
    {"??? ?????????? ?????? RepeatKill ? ","(1) ??????????, ????????? ??????????? ?? ????? ??????.\n(2) NonRP ??? ? ???????? ( shift+space )\n(3) ????????????? ??????\n(4) ???????? ??? ???????.",1},
    {"??? ?????????? ?????? DeathMatch ? ","(1) ???????? ? ù???????????? ????????\n(2) ???????? ????? ?????? ???????????\n(3) ???????? ??? ???????",3},
    {"??? ?????????? ?????? DriveBy ? ","(1) ???????? ????? ?????? ???????????\n(2) ???????? ? ù???????????? ????????\n(3) ???????? ??? ???????",2},
    {"??? ?????????? ?????? PowerGaming ? ","(1) NonRP ??? ? ???????? ( shift+space )\n(2) ????????????? ??????\n(3) ????????????? ???????? ?????????? ? ??????? ???\n(4) ??????????? ?? ???ù ????? ????ù",4},
    {"???? ?? ????? ?????? ?? ????? ??????????????? ","(1) ???????? ?? ???????\n(2) ????????? ??\n(3) ??????????? ? ?? ????????\n(4) ???????? ???????",3}
};

#define COLOR_LIGHTBLUE 0x00C3FFFF
#define COLOR_WHITE 0xFFFFFFFF
#define COLOR_RED 0xFF0000FF
#define COLOR_LIME 0x00FF33FF
#define COLOR_GREY 0xAFAFAFFF
#define COL_WHITE "{FFFFFF}"
#define COL_LBLUE "{00C3FF}"
#define COL_RED "{FF0000}"
#define COL_LIME "{00FF33}"
#define COLOR_BLUE 0x3399FFFF
#define COLOR_RADIO 0x33CC66FF
#define COLOR_PURPLE 0xC2A2DAAA
#define COLOR_BROWN     0xA0522DFF



// ------------------------------------------

enum E_BUY_CMD_STRUCT
{
	CMD_NAME[64],
	CMD_DESCRIPTION[128],
	CMD_PRICE
};

new
	g_admin_cmd_buy[CMD_NUM][E_BUY_CMD_STRUCT] =
{
	{"/setleader", "?????ù ??????? ???? ??? ??????????? ???????? ????? ??????", 800},
	{"/setadmin",  "?????ù ??????? ???? ??? ??????????? ???????? ????? ??????????????", 1500},
	{"/veh",       "?????ù ??????? ???? ??? ??????????? ??????? ????????? ? ????? ?????", 500},
	{"/awarn",     "?????ù ??????? ???? ??? ??????????? ???????? ????? ????", 800},
	{"/unawarn",   "?????ù ??????? ???? ??? ??????????? ??????? ????? ????", 750},
	{"/banip",     "?????ù ??????? ???? ??? ??????????? ??????????? IP ??????", 400}
};
// ------------------------------------------
enum E_BUS_ROUTE_STRUCT
{
	BR_NAME[32],
	BR_COLOR,
	BR_IN_JOB
};

enum E_BUS_ROUTE_STEP_STRUCT
{
	Float: BRS_POS_X,
	Float: BRS_POS_Y,
	Float: BRS_POS_Z,
	bool: BRS_STOP
};

// ------------------------------------------
enum E_PLAYER_SPECTATE_STRUCT
{
	Float: S_START_POS_X,
	Float: S_START_POS_Y,
	Float: S_START_POS_Z,
	Float: S_START_ANGLE,
	S_START_INTERIOR,
	S_START_VIRTUAL_WORLD,
	S_PLAYER
};
new g_spectate[MAX_PLAYERS][E_PLAYER_SPECTATE_STRUCT];

// ------------------------------------------
enum
{
	PEDAL_TYPE_NONE = 0, // ?? ???? ?? ?? ????? ??????
	PEDAL_TYPE_GAS, // ?????? ????
	PEDAL_TYPE_BRAKE // ?????? ???????
}

new player_press_pedal[MAX_PLAYERS];

// ------------------------------------------
enum // ??? ????????
{
	INVALID_DIALOG_ID,
	// ---------------
	DIALOG_LOGIN,					// ??????????ù
	DIALOG_REGISTER,				// ??????????ù
	
	DIALOG_OBMEN_MONET,
	DIALOG_SERVER_SETTINGS_COINS,
	DIALOG_SERVER_SETTINGS_BONUSM,
	DIALOG_SERVER_SETTINGS_BONUSD,
	DIALOG_SERVER_SETTINGS_BONUSL,
	
	// ---------------
	DIALOG_PLAYER_MENU,  			// ???? ??????
	DIALOG_PLAYER_STATS, 			// ?????????? ??????
	DIALOG_PLAYER_CMDS,  			// ?????? ??????
	DIALOG_PLAYER_SETTINGS,			// ?????? ?????????
	DIALOG_PLAYER_SECURITY_SETTINGS,// ????????? ????????????
	
	DIALOG_BOOMBOX0,
	DIALOG_BOOMBOX,
	DIALOG_BOOMBOX1,
	DIALOG_BOOMBOX2,
	DIALOG_BOOMBOX3,
	DIALOG_BOOMBOX4,
	DIALOG_LAREK, 
	DIALOG_BOOMBOX5,
	DIALOG_BOOMBOX6,
	DIALOG_BOOMBOX7,
	DIALOG_BOOMBOX_MENU,
	
	DIALOG_CONTENER1,
	DIALOG_CONTENER2,
	DIALOG_CONTENER3,

	DIALOG_TEST,
	
	DIALOG_ADMIN,
	
    DIALOG_MED_NOTIF, 
    DIALOG_HELP_SPAWN_NOTIF, 
	
	DIALOG_SELLCARMY,
	DIALOG_SELLCAR, 
	
	DIALOG_MCHS_AVTO,
	DIALOG_MCHS_LIST,
	DIALOG_MCHS,
	
	DIALOG_CHANGEPROP,
	DIALOG_CHANGEPROPOBMEN,
	DIALOG_CHANGEPROPTIP,
	DIALOG_CHANGEPROPDOPLATA,
	DIALOG_CHANGEPROPSKOKDP,
	DIALOG_CHANGEPROPOBMENV,
	
	DIALOG_TESTERSKII,
	
	DIALOG_DRAGY,
	DIALOG_DRAGYTEST,
	DIALOG_DRAGYRESULT,
	DIALOG_DRAGYRAZGON,
	DIALOG_DRAGYTOPZAEZD,
	
	DIALOG_LAREK,
	
	DIALOG_BG,
	
	DIALOG_VERIF,
	
	DIALOG_ACSHELP,
	DIALOG_ACSHELP2,
	
	DIALOG_V2PROMO_CREATE,          // create promo
	DIALOG_YTPROMO_ACTIVATE,        // ytpromo 
	DIALOG_PROMO_ACTIVATE,			// ????????ù ???????? ?????
	
	DIALOG_ADMSHOP,
	DIALOG_CONVERT_ADMSHOP,
	DIALOG_SKIN_ADMSHOP,
	DIALOG_VEH_ADMSHOP,
	DIALOG_VIP_ADMSHOP,
	
	DIALOG_INV,
	
	LOG_TYPE_ADMIN_SETADMIN,
	
	DIALOG_ASTATS,
	DIALOG_AHELP,
		 
	DIALOG_AF,
DIALOG_AFMENU,
DIALOG_AF_LIST,
DIALOG_BANAF,
DIALOG_PERMBANAF,
DIALOG_WARNAF,
DIALOG_UNWARNAF,
DIALOG_UNBANAF,
DIALOG_BANOD,
DIALOG_PERMBANOD,
DIALOG_WARNOD,
DIALOG_UNWARNOD,
DIALOG_UNBANOD,
	
	DIALOG_DINFO,
	
	DIALOG_TEX_WERTON_FIX, 

	
	DIALOG_ADMHELP,
	
	DIALOG_WHITELIST,
	
	DIALOG_SHABLON_TESTERS,

    DIALOG_PBASE,
	
	DIALOG_HELPERLIST,
	DIALOG_ADDREWARD,
	DIALOG_ADDDONATE,
	DIALOG_ADDMONEY,
	DIALOG_ADDSKIN,
	DIALOG_ADDCAR,
    DIALOG_ADDEPOINTS, 
	
	DIALOG_MPREG,
	
	DIALOG_HELPADM,
	
	DIALOG_HHELP,
	
	DIALOG_MENUHUD,
	
	DIALOG_STTSKIN,
	
	DIALOG_OTD,
    DIALOG_EX,
    DIALOG_EB,
    DIALOG_EM,
    DIALOG_OPR,
    DIALOG_EK,
    DIALOG_NG,
    

    
    DIALOG_HUD_MANAGER,
    DIALOG_MANAGER_HUDA_MENU,
    
    DIALOG_MUSIC,
    DIALOG_ACS_EDIT,
    DIALOG_FERMA,
    DIALOG_FERMAHELP,
    DIALOG_FERMABEGIN,
    DIALOV_FERMAARENDA,
    DIALOG_FERMAKOMB,
    DIALOG_FERMASBOR,
    DIALOG_INVENTORYTEST, 
    
	//
	DIALOG_LEADER_MENU,                 //????????? ????
	DIALOG_LEADER_MENU_UNINVITE,        //????????? ????
	DIALOG_LEADER_MENU_CARSPAWN,		//????????? ????
	DIALOG_LEADER_MENU_JOBS,            //????????? ????
	DIALOG_FRAKSKINS,
	//
 	DIALOG_RENT_BIKE,               // ?????? ??????????
     DIALOG_RENT_BIKE_ARZ,           // ?????? ???????
    DIALOG_RENT_BIKE_BAT,            // ?????? ????????
    DIALOG_RENT_BIKE_LUT,            // ?????? ?????????
 
 	DIALOG_AUTOSALON_CAR_BUY,
	// ---------------
	DIALOG_SECURITY_SETTING_INFO,	// ?????????? ? ??????????
	DIALOG_SECURITY_SETTING_PHONE,	// ?????? ???????? ??? ???????????
	DIALOG_SECURITY_SETTING_PHONE_S,// ?????????? ?????? ???????? ??? ???????????
	DIALOG_SECURITY_SETTING_PIN,	// ?????? ??? ???? ??? ???????????
	DIALOG_SECURITY_SETTING_PIN_SET,// ?????????? ?????? ??? ???? ??? ???????????
	DIALOG_SECURITY_SETTING_PASS_1, // ????? ?????ù (???????? ????????)
	DIALOG_SECURITY_SETTING_PASS_2, // ????? ?????ù (?????)
	DIALOG_SECURITY_SETTING_EMAIL,	// ????????????ù ??????
	DIALOG_LAUNCHPON, 
   DIALOG_TEX,
   DIALOG_PROSHIVKI,
   DIALOG_NITRO,
	// ---------------
	DIALOG_REPORT,					// ??????
	DIALOG_ASK,
	DIALOG_AUTOREPORT,				// ????? ????????
	// ---------------
	DIALOG_PLAYER_IMPROVEMENTS, 	// ????????ù
	// ---------------
	DIALOG_CHANGE_NAME, 			// ????? ????
	// ---------------
	
	DIALOG_CHANGE_COLOR_CAR,
	
	DIALOG_GPS, 					// gps
	DIALOG_GPS_PUBLIC_PLACES, 		// ???????????? ?????
	DIALOG_GPS_TRANSPORT, 			// ???????????? ????
	DIALOG_GPS_STATE_ORGANIZATIONS, // ??????????????? ???????????
	DIALOG_GPS_GANGS,				// ???? ???? ? ?????
	DIALOG_GPS_JOBS,				// ?? ??????
	DIALOG_GPS_BANKS,				// ?? ??????
	DIALOG_GPS_ENTERTAINMENT,
	DIALOG_GPS_AUTOSALONS,
	DIALOG_GPS_CITIES,
	DIALOG_GPS_VOKZALS,
	DIALOG_GPS_MISTS,
	DIALOG_GPS_TK,
	DIALOG_GPS_BUSINESS,			// ??????? ???????
	DIALOG_GPS_MP,			// ??????? ???????
	DIALOG_GPS_QUEST,
	// ---------------
	DIALOG_HELP,					// ?????? ?? ????
	DIALOG_HELP_SECTION,			// ??????
	// ---------------
	DIALOG_SERVER_RADIO, 			// ????? (/play)
	DIALOG_CAR_RADIO,
	DIALOG_PLAY_RADIO,
	// ---------------
	DIALOG_ANIM_LIST, 				// ???? ???? (/anim)
	// ---------------
	DIALOG_OPEN_HOOD_OR_TRUNK,		// ?????????? ???????/??????????
	// ---------------
	DIALOG_DRIVING_TUTORIAL_START,	// ?????ù ? ?????????
	DIALOG_DRIVING_TUTORIAL,	 	// ?????ù ? ?????????
	DIALOG_DRIVING_TUTORIAL_END, 	// ?????ù ? ?????????
	DIALOG_DRIVING_EXAM_INFO, 		// ??????? ?? ????????
	DIALOG_DRIVING_EXAM_START,		// ??????? ?? ????????
	DIALOG_DRIVING_EXAM, 			// ??????? ?? ????????
	DIALOG_DRIVING_EXAM_RESULT, 	// ??????? ?? ????????
	
	DIALOG_MTOP,
	DIALOG_MTOP_MENU,
	// ---------------
	DIALOG_ATM, 					// ????????
	DIALOG_ATM_TAKE_MONEY, 			// ??ù?? ??????
	DIALOG_ATM_TAKE_OTHER_MONEY,	// ??ù?? ?????? (?????ù ????)
	DIALOG_ATM_PUT_MONEY, 			// ???????? ??????
	DIALOG_ATM_PUT_OTHER_MONEY, 	// ???????? ?????? (?????ù ????)
	DIALOG_ATM_BALANCE, 			// ?????? ? ?????
	DIALOG_ATM_PHONE_BALANCE,		// ????????? ?????? ????????

	DIALOG_ATM_SELECT_COMPANY_TAKE,	// ??????? ???????ù??? ? ???????? ??ù?? ??????
	DIALOG_ATM_SELECT_COMPANY_PUT,	// ??????? ???????ù??? ?? ??????? ???????? ??????
	DIALOG_ATM_FUEL_ST_TAKE_MONEY,	// ??ù?? ?????? ? ??????????? ???????
	DIALOG_ATM_FUEL_ST_PUT_MONEY,	// ???????? ?????? ?? ???? ??????????? ???????
	DIALOG_ATM_BIZ_TAKE_MONEY,		// ??ù?? ?????? ? ???????ù??ù
	DIALOG_ATM_BIZ_PUT_MONEY,		// ???????? ?????? ?? ???? ???????ù??ù

	DIALOG_ATM_TRANSFER_MONEY_1, 	// ??????? ?? ?????????? ????
	DIALOG_ATM_TRANSFER_MONEY_2, 	// ??????? ?? ?????????? ????
	DIALOG_ATM_CHARITY, 			// ???????????????????

	DIALOG_ATM_TICKET_SELECT,		// ????? ??????? ?????? ??????
	DIALOG_ATM_TICKET_LIST,			// ?????? ???????
	DIALOG_ATM_TICKET_PAY,			// ?????? ?????? ?? ??????
	// ---------------
	DIALOG_PAY_FOR_RENT,			// ?????? ?????? (???,???,???)
	DIALOG_PAY_FOR_RENT_FUEL_ST,	// ?????? ?? ???
	DIALOG_PAY_FOR_RENT_BIZ,		// ?????? ?? ??????
	DIALOG_PAY_FOR_RENT_HOUSE,		// ?????? ?? ???
	DIALOG_RETURN_MONEY,			// ??????? ?????
	// ---------------
	DIALOG_BANK,					// ????
	DIALOG_BANK_ACCOUNTS, 			// ??? ?????
	DIALOG_BANK_ACCOUNT_LOGIN, 		// ??????????ù
	DIALOG_BANK_ACCOUNT_OPERATION,	// ?????? ????????
	DIALOG_BANK_ACCOUNT_INFO, 		// ?????????ù ? ?????
	DIALOG_BANK_ACCOUNT_TAKE_MONEY,	// ??ù?? ??????
	DIALOG_BANK_ACCOUNT_PUT_MONEY,	// ???????? ??????
	DIALOG_BANK_ACCOUNT_TRANSFER_1, // ??????? ????? ?? ?????? ???? 1
	DIALOG_BANK_ACCOUNT_TRANSFER_2, // ??????? ????? ?? ?????? ???? 2
	DIALOG_BANK_ACCOUNT_CHANGE_NAME,// ???????????????? ?????
	DIALOG_BANK_ACCOUNT_CHANGE_PIN,	// ????? ???-????

	DIALOG_BANK_CREATE_ACCOUNT, 	// ???????? ?????
	DIALOG_BANK_CREATED_ACCOUNT, 	// ???????? ?????
	// ---------------
	DIALOG_PHONE_CALL,				// ?????? ??????????????? ???????????
	DIALOG_PHONE_CALL_BALANCE,		// ?????? ?????? ??????????
	// ---------------
	DIALOG_ACTION,					// ???? ???????ù
	// ---------------
	DIALOG_VIEV_JOBS_LIST,			// ?????????? ?????? ?????
	DIALOG_JOIN_TO_JOB,				// ????????ù ?? ??????
	// ---------------
	DIALOG_END_JOB,					// ????????? ??????
	// ---------------

	DIALOG_BUS_RENT_CAR,			// ?????????? ???????
	DIALOG_BUS_ROUTE_COST,			// ?????? ????????? ???????
	DIALOG_BUS_ROUTE_SELECTION,		// ??????? ???????
	//---
	DIALOG_TAXI_RENT_CAR,			// ?????????? ?????
	DIALOG_TAXI_NAME,				// ???????? ?????
	DIALOG_TAXI_TARIFF,				// ?????
	
	DIALOG_ACTION_F_PROGRESS,
	DIALOG_ACTION_EXIT_HOUSE,
	//---
	DIALOG_MECHANIC_RENT_CAR,		// ?????????? ?????????
	DIALOG_MECHANIC_START_JOB,		// ?????? ?????? ????????
	DIALOG_MECHANIC_NAME,			// ???????? ??????
	//---
	DIALOG_TRUCKER_RENT_CAR,		// ?????????? ????????
	DIALOG_TRUCKER_START_JOB,		// ?????? ??????

	// ---------------
	DIALOG_PHONE_BOOK,				// ?????????ù ?????
	DIALOG_PHONE_BOOK_OPTION,		// ????????
	DIALOG_PHONE_BOOK_SEND_SMS,		// ????????? ???
	DIALOG_PHONE_BOOK_CHANGE_NAME,	// ??????? ??ù ????????
	DIALOG_PHONE_BOOK_CHANGE_NUMBER,// ??????? ????? ????????

	DIALOG_PHONE_BOOK_ADD_CONTACT,	// ?????????ù ????? (???????? ???????)
	// ---------------
	DIALOG_MINER_BUY_METALL, 		// ??????? ?????????? ?? ?????
	// ---------------
	DIALOG_TEMP_JOB_LOADER_START,	// ?????? ?????? ????????
	DIALOG_TEMP_JOB_LOADER_END,		// ????????? ?????? ????????
	DIALOG_TEMP_JOB_MINER_START,	// ?????? ?????? ???????
	DIALOG_TEMP_JOB_MINER_END,		// ????????? ?????? ???????
	DIALOG_TEMP_JOB_FACTORY_TRUCKER,// ?????? ???????? ??????
	DIALOG_TEMP_JOB_FACTORY,		// ???????????????? ???
	DIALOG_TEMP_JOB_LUMBERJACK_ST, 	// ?????? ?????? ????????
	DIALOG_TEMP_JOB_LUMBERJACK_END,	// ????????? ?????? ????????
	// ---------------
	DIALOG_FUEL_STATION_BUY,		// ??????? ??????????? ???????
	DIALOG_FUEL_STATION_INFO,		// ???? ? ??????????? ???????
	DIALOG_FUEL_STATION_PARAMS,		// ???? ?????????ù ??????????? ????????
	DIALOG_FUEL_STATION_NAME,		// ????? ???????ù
	DIALOG_FUEL_STATION_PRICE_FUEL,	// ???? ???????
	DIALOG_FUEL_STATION_BUY_FUEL_PR,// ?????????ù ????
	DIALOG_FUEL_STATION_ORDER_FUELS,// ????? ???????
	DIALOG_FUEL_STATION_ORDER_CANCE,// ?????? ??????
	DIALOG_FUEL_STATION_IMPROVEMENT,// ????????ù ???
	DIALOG_FUEL_STATION_SELL,		// ??????? ??? ???????????
	DIALOG_FUEL_STATION_BUY_JERRICA,// ??????? ???????? ?? ???
	DIALOG_FUEL_STATION_BUY_REPAIR,
	DIALOG_FUEL_STATION_BUY_FUEL_M,	// ??????? ??????? (???????)
	// ---------------
	DIALOG_JERRICAN_FILL_CAR,		// ???????? ???? ? ????????
	
	DIALOG_YTPROMO_ACTIVATE,
	DIALOG_YTPROMO_CREATE,
	// ---------------
	DIALOG_BIZ_BUY,					// ??????? ???????
	DIALOG_BIZ_INFO,				// ???? ? ???????
	DIALOG_BIZ_PARAMS,				// ???? ?????????ù ????????
	DIALOG_BIZ_ENTER_PRICE,			// ?????????? ???? ?? ????
	DIALOG_BIZ_PROD_PRICE,			// ?????????? ????????? ????????
	DIALOG_BIZ_ORDER_PRODS,			// ????? ?????????
	DIALOG_BIZ_ORDER_CANCEL,		// ?????? ??????
	DIALOG_BIZ_IMPROVEMENT,			// ?????????
	DIALOG_BIZ_SELL,				// ??????? ??????? ???????????
	DIALOG_BIZ_ENTER_MUSIC,			// ?????????? ???? ??? ?????
	DIALOG_BIZ_ENTER,				// ??????? ????

	DIALOG_BIZ_SHOP_24_7,			// ??????? 24\7
	DIALOG_BIZ_LOTTERY,				// ??????ù
	
	DIALOG_BIZ_SHOP_GUN,

	DIALOG_BIZ_CAR_MARKET,			// ?????????
	DIALOG_BIZ_CAR_MARKET_BUY_CAR,	// ??????? ????
	DIALOG_BIZ_CAR_MARKET_CAR_INFO,	// ?????????ù ?? ????

	DIALOG_BIZ_CELL_SALON,			// ??????? ?????
	DIALOG_BIZ_PHONE_BALANCE,		// ????????? ???? ????????
	DIALOG_BIZ_CHANGE_PHONE_NUMBER,	// ????? ?????? ????????
	DIALOG_BIZ_CHANGE_PHONE_COLOR,	// ????? ???? ????????

	DIALOG_BIZ_CLUB,				// ???? ???? (????)

	DIALOG_BIZ_REALTOR_BIZ_LIST,	// ?????? ????????? ???????? (?????????? ??????????)
	DIALOG_BIZ_REALTOR_BIZ_INFO,	// ???? ???????

	DIALOG_BIZ_REALTOR_HOME_GET,	// ????? ?????????? ? ????
	DIALOG_BIZ_REALTOR_HOME_INFO,	// ???? ????

	DIALOG_BIZ_CLOTHING_BUY,		// ??????? ??????

	DIALOG_BIZ_CAR_TUNING,          // -- ????? ??????
	DIALOG_BIZ_CAR_TUNING_LIGHTS,	// -- ?????? ???
	// ---------------
	DIALOG_HOUSE_BUY,				// ??????? ????
	DIALOG_HOUSE_SELL,				// ??????? ????
	DIALOG_HOUSE_INFO,				// ???? ? ????
	DIALOG_HOUSE_PARAMS,			// ???? ?????????ù ?????
	DIALOG_HOUSE_IMPROVEMENTS,		// ????????? ??ù ????
	DIALOG_HOUSE_RENTERS,			// ?????? ???????????
	DIALOG_HOUSE_RENTER_INFO,		// ?????????ù ? ??????????
	DIALOG_HOUSE_RENTER_EVICT,		// ????????? ??????????
	DIALOG_HOUSE_EVICT,				// ????????? ?????????? (/liveout)
	DIALOG_HOUSE_MOVE_STORE,		// ??????????? ???? (/makestore)
	DIALOG_HOUSE_STORE,				// ???????????? ????
	DIALOG_HOUSE_STORE_PUT,			// ???????? ?????????/?????????
	DIALOG_HOUSE_STORE_TAKE,		// ??ù?? ?????????/?????????

	DIALOG_HOUSE_ENTER,				// ???? ? ???
	// ---------------
	DIALOG_ENTRANCE_LIFT,			// ???? ????????
	// ---------------
	DIALOG_HOTEL,					// ???? ????ù
	DIALOG_HOTEL_FLOOR_SELECT,		// ??????? ???? (???????? ???? ? ???????)
	DIALOG_HOTEL_FLOOR_INFO,		// ?????????ù ? ??????? ?????
	DIALOG_HOTEL_FLOOR_LIFT,		// ???? ? ?????
	DIALOG_HOTEL_REG_ROOM,			// ??????????ù ? ??????
	DIALOG_HOTEL_CLIENT_MENU,		// ???? ???????
	DIALOG_HOTEL_PAY_FOR_ROOM,		// ?????? ?? ???????
	DIALOG_HOTEL_OUT,				// ?????????ù

	// ---------------

	DIALOG_ACT_PROMO,

	// ---------------

	DIALOG_OWNABLE_CAR,				// ??????? ?????????ù ???????????
	DIALOG_OWNABLE_CAR_LOAD,		// ????????? ?????????
	DIALOG_OWNABLE_CAR_LOAD_ARZ, 
    DIALOG_OWNABLE_CAR_LOAD_BAT, 
    DIALOG_OWNABLE_CAR_LOAD_LUT, 
	
	DIALOG_OWNABLE_CAR_LIST,		// ????? ?????????? ?? ??????
	DIALOG_OWNABLE_CAR_SELL,		// ??????? ??????? ù?
	DIALOG_FAMILY_CAR_SELL,		// ??????? ????????? ù?
	DIALOG_OWNABLE_CAR_NUMBER,		// ????????? ?????? ?? ù?
	DIALOG_OWNABLE_CAR_PT,          // performance tuning
	DIALOG_OWNABLE_CAR_PT_ITEM,     // ????????ù
	DIALOG_OWNABLE_CAR_PT_ACCEPT,   // ??????????? ?????????

	// ---------------
	DIALOG_VEHICLE_TRUNK,			// ????????
	DIALOG_VEHICLE_TRUNK_PUT,		// ???????? ???????
	DIALOG_VEHICLE_TRUNK_PUT_ITEM,	// ?????????? ?????????
	DIALOG_VEHICLE_TRUNK_TAKE,		// ??????? ???????
	// ---------------
	DIALOG_SET_SPAWN,               // ?????? ????? ??????

	DIALOG_DONATE_CASE_PRISE,
	DIALOG_DONATE_CASE,
	
	DIALOG_DONATE_OPEN,
	
	DIALOG_ACTION_F_QUEST,
	DIALOG_QUEST_OPEN,
	
	// ---------------
	DIALOG_DONATE_INFO, 			// ?????????ù ? ?????? (?????? ??????)
	DIALOG_DONATE_MENU,				// ???? ??????
	DIALOG_DONATE_CONVERT,			// ??????????ù ??????
	DIALOG_DONATE_GET_MONEY,		// ????????? ?????
	DIALOG_DONATIONS,				// ??? ?????????ù
	DIALOG_DONATE_ENROLLMENT,		// ?????????? ?????-?????
	DIALOG_DONATE_BUY_CAR_NUMBER,	// ??????? ?????? ?? ù?
	DIALOG_DONATE_ACCEPT_CAR_NUM,	// ????????????? ??????
	DIALOG_DONATE_CHANGE_NAME,		// ????? ????? ? ??????
	DIALOG_DONATE_BUY_NUMBER,		// ????? ?????? ???????? ?? 4-????????
	DIALOG_DONATE_SKILLS,			// ?????? ??????? ??ù ????????
	DIALOG_DONATE_SKILL_BUY,		// ???????? ??????
	// ---------------
	DIALOG_DRUB_MENU,
	DIALOG_DRUB_BUYLEAD,
	DIALOG_DRUB_BUYADMIN,
	DIALOG_DRUB_BUYZAM,
	DIALOG_BUY_DONATE_CAR,
	
	
	//==============[??ù ????? ???????? ???????? ????????]=======================================================
	
	DLG_ASKIN,
	
	
	DIALOG_PASSPORT,
	DLG_MAPTRUE,
	
	DIALOG_CREATE_FAMILY666,
	
	DLG_MYSKIN,
	
	DIALOG_REPORT_CLAIM,
	
	DIALOG_REPORT_EDIT,
	
	DIALOG_VEHICLE_NUMBER, 
	
	DIALOG_REPORT_SELECTOR,
	
	DIALOG_REPORTOSN, //??? ??? ??????
	DIALOG_REPORTM, 
	DIALOG_MM_REQUEST, 
	DIALOG_REPORTSM, 
	
	DIALOG_ASK_CLAIM,
	
	DIALOG_ASK_EDIT,
	
	DLG_HSTATS,
	
	DLG_TEMP_LEADER,
	
	DIALOG_REWARDS,
	
	DIALOG_VODOLAZACTOR,
	
	DIALOG_ARECOVERY,
	
	DIALOG_ROULETTE,
	
	DIALOG_REWARD,
	
	DIALOG_INFO,
	

	
	//=====================================================================
	
	DIALOG_BUYBIZ_CLOSE,
	DIALOG_BUYBIZ_OPEN,
	// ----------------
	DIALOG_ADONATE_MENU,			// ???? ??????
	DIALOG_BUY_PREFIX,				// Prefix
	DIALOG_BUY_CMD,					// ????? ???????
	// ---------------
	DIALOG_TEAM_CHANGE_SKIN,		// ????? ????? ??????
	DIALOG_TEAM_LEAVE,				// ????????ù ?? ???????????? ???????

	DIALOG_DEBTORLIST, 				// ?????? ?????????
	DIALOG_DEBTORLIST_HOUSE, 		// ???? ?????????
	DIALOG_DEBTORLIST_BIZ, 			// ???? ?????????
	DIALOG_DEBTORLIST_FUEL_ST, 		// ??? ?????????

	DIALOG_DEBTOR_SELL_LIST, 		// ?????????
	DIALOG_DEBTOR_SELL_HOUSE, 		// ????????? ????
	DIALOG_DEBTOR_SELL_BIZ, 		// ????????? ????
	
	DIALOG_DEBTOR_SELL_FUEL_ST, 	// ????????? ???

	DIALOG_ADVISOR_MENU,			// ???? ????????? ????-??
	DIALOG_ADVISOR_TEAM_STRUCTURE,	// ????????? ???????????
	// ---------------
	DIALOG_ADMIN_PANEL,				// ?????? ?????????ù ????????
	DIALOG_ADMIN_REG,				// ??????????ù ? ???????
	DIALOG_ADMIN_LOGIN,				// ??????????ù ? ???????
	DIALOG_ADMINS,					// ?????? ???????????????
	DIALOG_LEADERS,					// ?????? ???????
	DIALOG_EDIT_ADMIN,				// ?????????????? ??????????????
	DIALOG_EDIT_LEADER,				// ?????????????? ??????
	DIALOG_EDIT_ADMIN_RANG,			// ????????/???????? ??????????????
	DIALOG_EDIT_LEADER_FRAC,		// ??????? ??????ù???? ???????
	DIALOG_REMOVE_ADMIN,			// ??????????? ??????????????
	DIALOG_REMOVE_LEADER,			// ??????????? ??????
	DIALOG_BLOCK_ACCOUNT,			// ????????????? ???????
	DIALOG_BLOCK_ACCOUNT_CONFIRM,	// ??????????? ??????????
	// ---------------
	DIALOG_TELEPORT_LIST,			// ?????? ???? ??ù ?????????
	DIALOG_SET_DOUBLING,			// ???????? ????????
	// ---------------
	DIALOG_GANG_REPOSITORY,			// ????????/??ù?? ?? ?????? ?????
	DIALOG_GANG_REPOSITORY_USE,		// ????????????? ?????? ?????
	// ---------------
	DIALOG_ADVERT_EDIT,				// ?????????????? ???ù?????ù
	// ---------------
	DIALOG_ARMORY,					// ????????? ?????
	// ---------------
	DIALOG_BIZ_ORDERS,				// ?????? ??????? ??ù ????????
	DIALOG_FS_ORDERS,				// ?????? ??????? ??ù ???
	// ---------------
	DIALOG_PROMO_CREATE,			// ???????? ?????????
	DIALOG_PROMO_ACTIVATE,			// ????????ù ?????????
	// ---------------
	DIALOG_MP_CREATE,               // ???????? ??
	DIALOG_MP_MENU,                 // ?????? ??
	DIALOG_MP_SKIN,                 // ?????? ????? ?? ??
	DIALOG_EVENT_CREATE,               // ???????? ??
	DIALOG_EVENT_MENU,                 // ?????? ??
	DIALOG_FINISH_EVENT,               // ??????????
	DIALOG_EVENT_SKIN,                 // ?????? ????? ?? ??
	DIALOG_EVENT_GUN,
	//
	DIALOG_FAMILY_CAR_RANG_SET,
	DIALOG_FAMILY_CAR_RANG,
 	DIALOG_CREATE_FAMILY,           // ???????? ?????
    DIALOG_FAMILY_MENU,             // ???? ?????
    DIALOG_FAMILY_RANG,             // ????? ?????? ?????
    DIALOG_FAMILY_RCHANGE,          // ????? ?????? ?????
    DIALOG_FAMILY_LEAVE,            // ????? ?? ?????
    DIALOG_FAMILY_SETTINGS,         // ????????? ?????
    DIALOG_ACTION_TYPE_GET_FAMILY,
    DIALOG_FAMILY_SPAWN_SET,
    DIALOG_FAMILY_WAREHOUSE, //????? ?????
    DIALOG_FAMILY_PUT_CASH,
	DIALOG_FAMILY_PUT_DRUGS,
	DIALOG_FAMILY_PUT_METALL,
	DIALOG_FAMILY_PUT_AMMO,
	DIALOG_FAMILY_TAKE_CASH,
	DIALOG_FAMILY_TAKE_DRUGS,
	DIALOG_FAMILY_TAKE_METALL,
	DIALOG_FAMILY_TAKE_AMMO,
	DIALOG_FAMILY_COLOR,
	DIALOG_COLOR_FAMILY_SET,
	DIALOG_FAMILY_NCHANGE,
	
	DIALOG_FAMILY_SETRANG_MENU,
	DIALOG_SET_FRANG_TAKEMONEY,
	DIALOG_SET_FRANG_TAKEDRUGS,
	DIALOG_SET_FRANG_TAKEMETALL,
	DIALOG_SET_FRANG_TAKEAMMO,
	DIALOG_SET_FRANG_INV,
	DIALOG_SET_FRANG_UNINV,
	DIALOG_SET_FRANG_MUTE,
	DIALOG_SET_FRANG_UNMUTE,
	DIALOG_SET_FRANG_WARN,
	DIALOG_SET_FRANG_UNWARN,
	DIALOG_SET_FRANG_GIVER,
	DIALOG_FAMSKLAD,
    //
    DIALOG_SELL_GIFT,               // ??????? ??????
    //
    DIALOG_DONATE_SKIN,

    DIALOG_ACTION_QUEST,
    //
    DIALOG_DONATE_PREMIUM,          // ???????? "SERVER_NAME"+
    DIALOG_DONATE_VIP_HELP,			// VIP HELP
    DIALOG_GOADM,
    // ----------
    DIALOG_SERVER_SETTINGS,
    DIALOG_SERVER_SETTINGS_ADM,
    DIALOG_SERVER_SETTINGS_HELP,
    DIALOG_SERVER_SETTINGS_RUB,
    DIALOG_SERVER_SETTINGS_DON,
    DIALOG_ADMINCALL_MENU,
    DIALOG_ORG_CAR_GET, 
    DIALOG_REMOVEDLEADER
};

// ------------------------------------------
enum // ??? ????? (???????????)
{
	JOB_BUS_DRIVER = 1, // ???????? ????????
	JOB_KYRER,	// ??????
	JOB_MECHANIC,		// ???????
	JOB_INK,             //???????????
	JOB_TRUCKER // ????????????
};

// ------------------------------------------
enum // ???? ???????
{
	PICKUP_ACTION_TYPE_TELEPORT = 1, 	// ù??????? (?????/??????)
	PICKUP_ACTION_TYPE_DRIVING_TUTO, 	// ?????ù ? ?????????
	PICKUP_ACTION_TYPE_ATM,			// ????????
	
	PICKUP_ACTION_OBMEN_MONET,
	PICKUP_ACTION_TYPE_FAM,
	PICKUP_ACTION_FLOWER_1,
	PICKUP_ACTION_FLOWER_2,
	PICKUP_ACTION_FLOWER_3,
	PICKUP_TAKE_FLOWER,
	PICKUP_CONGRATULATE_WOMEN,
	PICKUP_BUY_PERFUME,
	PICKUP_GIVE_PERFUME,
	PICKUP_BUY_CAKE,
	PICKUP_BUY_PRODUCTS,
	PICKUP_BUY_CANDLE,
	PICKUP_END_QUEST_8MARTA,
	
	PICKUP_ACTION_TYPE_BIZ_SHOP_GUN,
	PICKUP_CAMERAVHOD,
	PICKUP_CAMERAVIHOD,
	PICKUP_LAZARETVHOD,
	PICKUP_LAZARETVIHOD,
	PICKUP_LESOPILVHOD,
	PICKUP_LESOPILVIHOD, 
	PICKUP_ACTION_TYPE_BANK, 			// ????
	PICKUP_ACTION_TYPE_TEMP_JOB, 		// ????????ù ??????
	PICKUP_ACTION_TYPE_TEMP_ARMY,
	PICKUP_ACTION_TYPE_INFO_PICKUP, 	// ???? ?????
	PICKUP_ACTION_TYPE_MINER_SELL_M, 	// ??????? ?????????? ?? ?????
	PICKUP_ACTION_TYPE_FACTORY_MET,		// ????? ????????? (?????)
	PICKUP_ACTION_TYPE_FUEL_STATION,	// ??????? ???????? ?? ???
	PICKUP_ACTION_TYPE_BIZ_ENTER,		// ???? ? ??????
	PICKUP_ACTION_TYPE_BIZ_EXIT,		// ????? ? ??????
	PICKUP_ACTION_TYPE_BIZ_HEALTH,		// ??????? ? ???????
	PICKUP_ACTION_TYPE_BIZ_SHOP_247,	// ??????? ? 24\7
	PICKUP_ACTION_TYPE_CELL_SALON,		// ??????? ? ??????? ??????
	PICKUP_ACTION_TYPE_HOUSE,			// ???? ? ???
	PICKUP_ACTION_TYPE_HOUSE_HEALTH,	// ??????? ????
	PICKUP_ACTION_TYPE_REALTOR_HOME,	// ??????????? ????????
	PICKUP_ACTION_TYPE_BIZ_CLOTHING,	// ??????? ??????
	PICKUP_ACTION_TYPE_ENTRANCE_ENT,	// ???? ? ???????
	PICKUP_ACTION_TYPE_ENTRANCE_EXI,	// ????? ?? ????????
	PICKUP_ACTION_TYPE_ENTRANCE_LIF,	// ???? ? ????????
	PICKUP_ACTION_TYPE_ENTRANCE_FLA,	// ???????? ? ????????
	PICKUP_ACTION_TYPE_HOTEL_ROOM,		// ????? ? ?????
	PICKUP_ACTION_TYPE_BIZ_CAR_MARK,	// ??????? ????
	PICKUP_ACTION_TYPE_BIZ_CAR_ENT,		// ???????? ?? ????? ? ?????????
	PICKUP_ACTION_TYPE_BIZ_CAR_EXI,		// ???????? ? ?????? ?? ?????????
	PICKUP_ACTION_TYPE_GET_CAR_NUM,		// ????????? ??????? ?? ù?
	PICKUP_ACTION_TYPE_GET_CAR_N2,		// ????????? ??????? ?? ù?
	PICKUP_ACTION_TYPE_MINER_CARRI,		// ????? ? ?????????
	PICKUP_ACTION_TYPE_GANG_REPOSIT,	// ?????? ??ù ????
	PICKUP_ACTION_TYPE_MPREG,
	PICKUP_PKVXOD,
	PICKUP_PKVIXOD, 
	PICKUP_ACTION_TYPE_LUMBERJACK_P,	// ???????? ????? ?? ????? ?????????
	PICKUP_ACTION_TYPE_ARMORY,			// ????????? ?????
	PICKUP_ACTION_TYPE_BIZ_CAR_TUN,		// ?????? ??????????
	PICKUP_ACTION_TYPE_MAYOR_JOB,
	PICKUP_ACTION_TYPE_ZAVOD_JOB,
	PICKUP_ACTION_TYPE_PUT_PROD,
	PICKUP_ACTION_TYPE_P_CREATE,
	//
	PICKUP_ACTION_TYPE_GIFT,            // ????? ???????
	PICKUP_ACTION_TYPE_SELL_GIFT,       // ??????? ??????
	//
	PICKUP_ACTION_HELP_SPAWN,
	//
	PICKUP_ACTION_RENT_BIKE,            // ?????? ??????????
	PICKUP_ACTION_RENT_BIKE_ARZ,         // ?????? ???????
    PICKUP_ACTION_RENT_BIKE_BAT,        // ?????? ????????
    PICKUP_ACTION_RENT_BIKE_LUT,       // ?????? ?????????

	PICKUP_ACTION_QUEST_MENU,
	//
	PICKUP_ACTION_TYPE_ORG_CAR
};

enum // ???? ????
{
	VEHICLE_ACTION_TYPE_DRIVING_SCH = 1, // ??????? ????????? (??ù ????? ?? ?????)
	VEHICLE_ACTION_TYPE_OWNABLE_CAR,	// ?????? ?????????
	VEHICLE_ACTION_TYPE_LOADER, 		// ????????? ? ?????
	VEHICLE_ACTION_TYPE_FACTORY, 		// ????? (?????? ????????)
	VEHICLE_ACTION_TYPE_BUS_DRIVER,		// ???????? ????????
	VEHICLE_ACTION_TYPE_TAXI_DRIVER,	// ù??????
	VEHICLE_ACTION_TYPE_MECHANIC,		// ???????????
	VEHICLE_ACTION_TYPE_TRUCKER,		// ????????????
	VEHICLE_ACTION_TYPE_RENT_CAR,		// ù???????? ??ù ??????
	VEHICLE_ACTION_TYPE_GOV_CAR,		// ?????????? ?????????????
	VEHICLE_ACTION_TYPE_ARMY_CAR,		// ?????????? ???????? ?????
	VEHICLE_ACTION_TYPE_MED_CAR,		// ?????????? ????????
	VEHICLE_ACTION_TYPE_RADIO_CAR,		// ?????????? ???????????
	VEHICLE_ACTION_TYPE_DPS_CAR,		// ?????????? ?????
	VEHICLE_ACTION_TYPE_PPS_CAR,		// ?????????? ????
	VEHICLE_ACTION_TYPE_FBI_CAR,		// ?????????? ???
	VEHICLE_ACTION_TYPE_ARZ_CAR,		// ?????????? ??????????? ???
	VEHICLE_ACTION_TYPE_BAT_CAR,		// ?????????? ??????????? ???
	VEHICLE_ACTION_TYPE_LYT_CAR,		// ?????????? ???????????? ???
	VEHICLE_ACTION_TYPE_ADMIN_CAR,		// ù????????, ????????? ???????????????
	VEHICLE_ACTION_ORG_CAR,				// ù???????? ???????????
	//
	VEHICLE_ACTION_TYPE_RENT_BIKE,             // ?????? ???????????
	VEHICLE_ACTION_TYPE_RENT_BIKE_ARZ,       // ?????? ???????
	VEHICLE_ACTION_TYPE_RENT_BIKE_BAT,         // ????? ????????
	VEHICLE_ACTION_TYPE_RENT_BIKE_LUT,         // ?????? ?????????
	
	VEHICLE_ACTION_TYPE_FAMILY_CAR,
};

new
    Float: quest_pos[1][3] =
{
    {0.3824,0.7363,12.0381}
};

enum // ???? cp
{
	CP_ACTION_TYPE_LOADER_JOB_TAKE = 1,	// ??????? (????? ????)
	CP_ACTION_TYPE_LOADER_JOB_PUT, 		// ??????? (?????? ????)
	// -------
	CP_ACTION_TYPE_MINER_JOB_TAKE, 		// ?????? (????? ????)
	CP_ACTION_TYPE_MINER_JOB_PUT, 		// ?????? (?????? ????)
	// -------
	CP_ACTION_TYPE_LUMBERJACK_TAKE,		// ??????? (????? ?????)
 	CP_ACTION_TYPE_LUMBERJACK_PUT,
 	
 	CP_ACTION_TYPE_GPS //gps
};

enum // ???? race_cp
{
	RCP_ACTION_TYPE_DRIVING_EXAM = 1, // ????? ?? ????? (????????)
	RCP_ACTION_TYPE_BUS_ROUTE,	// ???????? ????????
	RCP_ACTION_TYPE_ORDER,		// ?????? ????????
};

// ------------------------------------------
enum // ???? ??????
{
	USE_ANIM_TYPE_NONE,
	USE_ANIM_TYPE_CHAT, // ?????? ????
};

// ------------------------------------------
enum // ???? ????????
{
	OBJECT_TYPE_FACTORY = 1,	// ??????? ?? ??????
	OBJECT_TYPE_CARRIAGE,		// ????????? ? ?????
	OBJECT_TYPE_WOOD,			// ?????? ?? ?????????
//	OBJECT_TYPE_TRAIN,			// ?????
};

// ------------------------------------------
enum E_PLAYER_OFFER_STURCT
{
	O_OUTCOMIG_PLAYER,  // ??????????? ??????????? ??????
	O_INCOMING_PLAYER, 	// ????ù??? ??????????? ?? ??????
	O_INCOMING_TYPE, 	// ????ù??? ???????????
	O_INCOMING_VALUE[2] // ???????? ????ù???? ??????????ù
};

stock CreateCLTHButtonBR(playerid)
{
    clothingbuttons_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 309.4163, 406.8438, "Prise:10000000");
    PlayerTextDrawLetterSize(playerid, clothingbuttons_PTD[playerid][0], 0.1466, 0.9860);
    PlayerTextDrawTextSize(playerid, clothingbuttons_PTD[playerid][0], 0.0000, -137.0000);
    PlayerTextDrawAlignment(playerid, clothingbuttons_PTD[playerid][0], 2);
    PlayerTextDrawColor(playerid, clothingbuttons_PTD[playerid][0], -2139062017);
    PlayerTextDrawBackgroundColor(playerid, clothingbuttons_PTD[playerid][0], 255);
    PlayerTextDrawFont(playerid, clothingbuttons_PTD[playerid][0], 1);
    PlayerTextDrawSetProportional(playerid, clothingbuttons_PTD[playerid][0], 1);
    PlayerTextDrawSetShadow(playerid, clothingbuttons_PTD[playerid][0], 0);
    return 1;
}

stock CreateTextDrawCLTHButtonBR()
{
    clothingbuttons_TD[0] = TextDrawCreate(395.1665, 374.5928, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[0], 0.0087, 4.5451);
    TextDrawTextSize(clothingbuttons_TD[0], 440.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[0], 1);
    TextDrawColor(clothingbuttons_TD[0], -1);
    TextDrawUseBox(clothingbuttons_TD[0], 1);
    TextDrawBoxColor(clothingbuttons_TD[0], -1607587841);
    TextDrawBackgroundColor(clothingbuttons_TD[0], 255);
    TextDrawFont(clothingbuttons_TD[0], 1);
    TextDrawSetProportional(clothingbuttons_TD[0], 1);
    TextDrawSetShadow(clothingbuttons_TD[0], 0);

    clothingbuttons_TD[1] = TextDrawCreate(395.8331, 374.5928, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[1], 0.0170, 0.9518);
    TextDrawTextSize(clothingbuttons_TD[1], 440.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[1], 1);
    TextDrawColor(clothingbuttons_TD[1], -1);
    TextDrawUseBox(clothingbuttons_TD[1], 1);
    TextDrawBoxColor(clothingbuttons_TD[1], 255);
    TextDrawBackgroundColor(clothingbuttons_TD[1], 255);
    TextDrawFont(clothingbuttons_TD[1], 1);
    TextDrawSetProportional(clothingbuttons_TD[1], 1);
    TextDrawSetShadow(clothingbuttons_TD[1], 0);

    clothingbuttons_TD[2] = TextDrawCreate(395.4165, 405.7038, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[2], 0.0170, 0.9518);
    TextDrawTextSize(clothingbuttons_TD[2], 440.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[2], 1);
    TextDrawColor(clothingbuttons_TD[2], -1);
    TextDrawUseBox(clothingbuttons_TD[2], 1);
    TextDrawBoxColor(clothingbuttons_TD[2], 255);
    TextDrawBackgroundColor(clothingbuttons_TD[2], 255);
    TextDrawFont(clothingbuttons_TD[2], 1);
    TextDrawSetProportional(clothingbuttons_TD[2], 1);
    TextDrawSetShadow(clothingbuttons_TD[2], 0);

    clothingbuttons_TD[3] = TextDrawCreate(195, 374.5927, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[3], 0.0087, 4.5451);
    TextDrawTextSize(clothingbuttons_TD[3], 240.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[3], 1);
    TextDrawColor(clothingbuttons_TD[3], -1);
    TextDrawUseBox(clothingbuttons_TD[3], 1);
    TextDrawBoxColor(clothingbuttons_TD[3], -1607587841);
    TextDrawBackgroundColor(clothingbuttons_TD[3], 255);
    TextDrawFont(clothingbuttons_TD[3], 1);
    TextDrawSetProportional(clothingbuttons_TD[3], 1);
    TextDrawSetShadow(clothingbuttons_TD[3], 0);

    clothingbuttons_TD[4] = TextDrawCreate(400.0000, 388.0742, ">>>"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[4], 0.4053, 1.5273);
    TextDrawTextSize(clothingbuttons_TD[4], 435.0000, 80.0000);
    TextDrawAlignment(clothingbuttons_TD[4], 1);
    TextDrawColor(clothingbuttons_TD[4], -1);
    TextDrawUseBox(clothingbuttons_TD[4], 1);
    TextDrawBoxColor(clothingbuttons_TD[4], -1607587841);
    TextDrawBackgroundColor(clothingbuttons_TD[4], 255);
    TextDrawFont(clothingbuttons_TD[4], 1);
    TextDrawSetProportional(clothingbuttons_TD[4], 1);
    TextDrawSetShadow(clothingbuttons_TD[4], 0);
    TextDrawSetSelectable(clothingbuttons_TD[4], true);

    clothingbuttons_TD[5] = TextDrawCreate(195, 374.5927, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[5], 0.0170, 0.9518);
    TextDrawTextSize(clothingbuttons_TD[5], 240.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[5], 1);
    TextDrawColor(clothingbuttons_TD[5], -1);
    TextDrawUseBox(clothingbuttons_TD[5], 1);
    TextDrawBoxColor(clothingbuttons_TD[5], 255);
    TextDrawBackgroundColor(clothingbuttons_TD[5], 255);
    TextDrawFont(clothingbuttons_TD[5], 1);
    TextDrawSetProportional(clothingbuttons_TD[5], 1);
    TextDrawSetShadow(clothingbuttons_TD[5], 0);

    clothingbuttons_TD[6] = TextDrawCreate(195.9166, 405.7038, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[6], 0.0170, 0.9518);
    TextDrawTextSize(clothingbuttons_TD[6], 240.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[6], 1);
    TextDrawColor(clothingbuttons_TD[6], -1);
    TextDrawUseBox(clothingbuttons_TD[6], 1);
    TextDrawBoxColor(clothingbuttons_TD[6], 255);
    TextDrawBackgroundColor(clothingbuttons_TD[6], 255);
    TextDrawFont(clothingbuttons_TD[6], 1);
    TextDrawSetProportional(clothingbuttons_TD[6], 1);
    TextDrawSetShadow(clothingbuttons_TD[6], 0);

    clothingbuttons_TD[7] = TextDrawCreate(200.0000, 388.0742, "<<<"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[7], 0.3999, 1.4858);
    TextDrawTextSize(clothingbuttons_TD[7], 235.0000, 80.0000);
    TextDrawAlignment(clothingbuttons_TD[7], 1);
    TextDrawColor(clothingbuttons_TD[7], -1);
    TextDrawUseBox(clothingbuttons_TD[7], 1);
    TextDrawBoxColor(clothingbuttons_TD[7], -1607587841);
    TextDrawBackgroundColor(clothingbuttons_TD[7], 255);
    TextDrawFont(clothingbuttons_TD[7], 1);
    TextDrawSetProportional(clothingbuttons_TD[7], 1);
    TextDrawSetShadow(clothingbuttons_TD[7], 0);
    TextDrawSetSelectable(clothingbuttons_TD[7], true);


    clothingbuttons_TD[8] = TextDrawCreate(257.4165, 378.2438, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[8], 0.0447, 4.2666);
    TextDrawTextSize(clothingbuttons_TD[8], 365.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[8], 1);
    TextDrawColor(clothingbuttons_TD[8], -1);
    TextDrawUseBox(clothingbuttons_TD[8], 1);
    TextDrawBoxColor(clothingbuttons_TD[8], -1607587841);
    TextDrawBackgroundColor(clothingbuttons_TD[8], 255);
    TextDrawFont(clothingbuttons_TD[8], 1);
    TextDrawSetProportional(clothingbuttons_TD[8], 1);
    TextDrawSetShadow(clothingbuttons_TD[8], 0);

    clothingbuttons_TD[9] = TextDrawCreate(259.0829, 380.6067, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[9], 0.0501, 3.8134);
    TextDrawTextSize(clothingbuttons_TD[9], 363.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[9], 1);
    TextDrawColor(clothingbuttons_TD[9], -1);
    TextDrawUseBox(clothingbuttons_TD[9], 1);
    TextDrawBoxColor(clothingbuttons_TD[9], 255);
    TextDrawBackgroundColor(clothingbuttons_TD[9], 255);
    TextDrawFont(clothingbuttons_TD[9], 1);
    TextDrawSetProportional(clothingbuttons_TD[9], 1);
    TextDrawSetShadow(clothingbuttons_TD[9], 0);

    clothingbuttons_TD[10] = TextDrawCreate(258.2500, 388.2810, "_"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[10], 0.0430, 1.8402);
    TextDrawTextSize(clothingbuttons_TD[10], 364.0000, 0.0000);
    TextDrawAlignment(clothingbuttons_TD[10], 1);
    TextDrawColor(clothingbuttons_TD[10], -1);
    TextDrawUseBox(clothingbuttons_TD[10], 1);
    TextDrawBoxColor(clothingbuttons_TD[10], -1607587841);
    TextDrawBackgroundColor(clothingbuttons_TD[10], 255);
    TextDrawFont(clothingbuttons_TD[10], 1);
    TextDrawSetProportional(clothingbuttons_TD[10], 1);
    TextDrawSetShadow(clothingbuttons_TD[10], 0);

    clothingbuttons_TD[11] = TextDrawCreate(321.9993, 391.0805, "EXIT"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[11], 0.2726, 1.3414);
    TextDrawTextSize(clothingbuttons_TD[11], 362.0000, 80.0000);
    TextDrawAlignment(clothingbuttons_TD[11], 1);
    TextDrawColor(clothingbuttons_TD[11], -1);
    TextDrawUseBox(clothingbuttons_TD[11], 1);
    TextDrawBoxColor(clothingbuttons_TD[11], 255);
    TextDrawBackgroundColor(clothingbuttons_TD[11], 255);
    TextDrawFont(clothingbuttons_TD[11], 2);
    TextDrawSetProportional(clothingbuttons_TD[11], 1);
    TextDrawSetShadow(clothingbuttons_TD[11], 0);
    TextDrawSetSelectable(clothingbuttons_TD[11], true);

    clothingbuttons_TD[12] = TextDrawCreate(260.1662, 391.0807, "BUY"); // ?????
    TextDrawLetterSize(clothingbuttons_TD[12], 0.2261, 1.3370);
    TextDrawTextSize(clothingbuttons_TD[12], 296.0000, 80.0000);
    TextDrawAlignment(clothingbuttons_TD[12], 1);
    TextDrawColor(clothingbuttons_TD[12], -1);
    TextDrawUseBox(clothingbuttons_TD[12], 1);
    TextDrawBoxColor(clothingbuttons_TD[12], 255);
    TextDrawBackgroundColor(clothingbuttons_TD[12], 255);
    TextDrawFont(clothingbuttons_TD[12], 2);
    TextDrawSetProportional(clothingbuttons_TD[12], 1);
    TextDrawSetShadow(clothingbuttons_TD[12], 0);
    TextDrawSetSelectable(clothingbuttons_TD[12], true);
    


    return 1;
}

enum // ???? ???????????
{
	OFFER_TYPE_NONE = -1,
	OFFER_TYPE_HANDSHAKE, 		// ???????????
	OFFER_TYPE_SELL_FUEL_ST, 	// ??????? ???
	OFFER_TYPE_FILL_CAR,		// ???????? ???? (???????)
	OFFER_TYPE_REPAIR_CAR,		// ??????? ???? (???????)
	OFFER_TYPE_SELL_BUSINESS,	// ??????? ???????
	OFFER_TYPE_BUSINESS_MANAGER,// ?????????? ?????????? ???? ?? ???????ù???
	OFFER_TYPE_SELL_HOME,		// ??????? ??? ??????
	OFFER_TYPE_HOME_RENT_ROOM,	// ?????????? ?????????ù ? ??????? ?????? ????
	OFFER_TYPE_SELL_OWNABLE_CAR,// ??????? ?????? ù?
	OFFER_TYPE_SELL_OWNABLE_CAR2,// ??????? ?????? ù? 2
	OFFER_TYPE_INVITE,			// ?????????? ???????? ? ???????????
	OFFER_TYPE_FINVITE,         // ??????????? ???????? ? ?????
	OFFER_TYPE_MEDHELP,			// ???????
	OFFER_TYPE_HEAL,			// ??????? ? ?????? ?????? ??????
	OFFER_TYPE_CHANGE_SEX,		// ????? ????
	OFFER_TYPE_SHOW_SKILL,		// ???????? ??????? ???????ù ???????
	OFFER_TYPE_GIVE_CAR_KEY,	// ???? ????? ?? ??????? ??????????
	OFFER_TYPE_CASINO_DICE,		// ??????? ????? ? ??????
	OFFER_TYPE_GETHERE,			// ???????? ? ???? ?????? ???? ??????
	OFFER_TYPE_GIVE_MIC,		// ?????? ? ?????????
	OFFER_TYPE_GIVE_LIC,		// ??????? ????????
	OFFER_TYPE_SELL_SKIN,		// ??????? ?????
	OFFER_TYPE_JAIL_FREE,		// ????????? ?? ?????? (??ù ?????????)
	OFFER_TYPE_SELL_COINS_MONEY,
	OFFER_TYPE_SELL_COINS_RUB,
	OFFER_TYPE_ACCESSORY,
	OFFER_TYPE_SHOWVB,
	OFFER_TYPE_SHOWMED,
	OFFER_TYPE_MEDCARD,
	OFFER_TYPE_SHOWPASS,
	OFFER_TYPE_SHOWLIC, 
};

// ?????????
enum
	E_RENT_CARS
{
	rent_car_modelid,
	Float: rent_car_pos_x,
	Float: rent_car_pos_y,
	Float: rent_car_pos_z,
	Float: rent_car_angle,
	rent_car_tenant_id,
};

new first_rent_car_id;

new
	rent_cars_data[][E_RENT_CARS] =
{
	// --- ????-???? ?????
	{509, -2229.4900, 266.4987, 24.1909, 115.0000}, // 0
	{510, -2230.2104, 268.7669, 24.1909, 115.0000}, // 1
	{481, -2230.9236, 270.7679, 24.1909, 115.0000}, // 2
	{462, -2249.3242, 267.3882, 24.0889, -98.0000}, // 3
	{468, -2248.8162, 270.7087, 24.1789, -97.6799}, // 4
	{586, -2248.0940, 274.1864, 24.2209, -97.6799}, // 5
	{463, -2246.8218, 283.6239, 24.0249, -97.6799}, // 6
	{581, -2246.5383, 286.7294, 24.0209, -97.6799}, // 7
	{461, -2247.7026, 277.5329, 24.0489, -97.6799}, // 8
	{521, -2247.3396, 280.6474, 24.0569, -97.6799}, // 9
	{471, -2246.1233, 290.3882, 23.9309, -97.6799}, // 10
	// --- ??????? ?????
	{400, 571.204345, 2647.225830, 12.635792, 358.790008}, // 11
	{402, 587.539306, 2673.305175, 12.635789, 358.790008}, // 12
	{415, 564.638793, 2636.512939, 12.635786, 358.790008}, // 13
	{451, 558.270996, 2625.584228, 12.635788, 358.790008}, // 14
	{466, 668.339223, 2638.740966, 12.635819, 358.790008}, // 15
	{506, 663.934692, 2631.745117, 12.635816, 358.790008}, // 16
	{541, 677.564880, 2633.422119, 12.635575, 358.790008}, // 17
	{579, 674.874206, 2629.840820, 12.635312, 358.790008}, // 18
	{602, 672.749938, 2625.949951, 12.635790, 358.790008}, // 19
	{603, 695.669250, 2627.084960, 12.635794, 358.790008}, // 20
	{477, 693.488098, 2623.407470, 12.635791, 358.790008}, // 21
	{409, 691.307434, 2619.594726, 12.635835, 358.790008}, // 22
	{410, 684.840576, 2609.046875, 12.635798, 358.790008}, // 23
	{405, 655.268859, 2617.131347, 12.635813, 358.790008}, // 24
	// --- ?????? ?????
	{404, 1767.2644, 2306.8350, 15.9280, 133.2001}, // 25
	{439, 1767.3580, 2302.7463, 15.9280, 133.2001}, // 26
	{467, 1767.5084, 2298.6968, 15.9280, 133.2001}, // 27
	{496, 1767.6865, 2294.7922, 15.9280, 133.2001}, // 28
	{516, 1767.8269, 2291.0906, 15.9280, 133.2001}, // 29
	{545, 1767.9811, 2287.2329, 15.9280, 133.2001}, // 30
	{474, 1767.8712, 2283.1111, 15.9280, 133.2001}, // 31
	{600, 1767.1371, 2278.0391, 15.9280, 133.2001}, // 32
	{478, 1757.2560, 2306.9846, 15.9280, -133.2001}, // 33
	{424, 1757.0476, 2303.1274, 15.6560, -133.2001}, // 34
	{500, 1757.2192, 2298.8496, 15.9280, -133.2001}, // 35
	{545, 1757.1465, 2294.9729, 15.9280, -133.2001}, // 36
	{518, 1757.1348, 2291.0195, 16.2320, -133.2001}, // 37
	{546, 1757.5938, 2286.5496, 15.9280, -133.2001}, // 38
	{547, 1757.4060, 2282.4246, 15.9280, -133.2001}, // 39
	{549, 1757.5575, 2277.9214, 15.9280, -133.2001}, // 40
	// --- C?????? ?????
	{411, 1442.9701,437.8552,12.6009,148.1335}, // 41
	{418, 1446.3816,435.4646,13.0605,149.6839}, // 42
	{419, 1449.9580,433.2914,12.7653,150.1192}, // 43
	{421, 1453.4365,430.9986,12.8502,149.8632}, // 44
	{422, 1457.1110,429.0847,12.9309,149.8907}, // 45
	{426, 1460.6003,426.5983,12.9408,150.4805}, // 45
	{429, 1464.6666,425.0737,12.6805,150.6823}, // 47
	{434, 1362.7384,484.5772,12.9360,149.8843}, // 48
	{436, 1358.9193,486.2404,12.7318,149.7653}, // 49
	{440, 1355.2421,488.1748,13.0831,150.2781}, // 50
	{442, 1351.5869,490.6852,12.4641,152.5053}, // 51
	{445, 1348.1659,492.8422,12.8241,149.6584}, // 52
	{458, 1344.1530,494.5126,12.8777,149.1822}, // 53
	{459, 1340.3928,496.2902,13.0204,149.7258} // 54
};

new buy_car_select_car[MAX_PLAYERS] = {-1, ...};
new buy_car_select_color[MAX_PLAYERS][2];
new buy_car_select_color_type[MAX_PLAYERS] = {0, ...};

new Text:buy_car_TD[2];
new PlayerText:buy_car_PTD[MAX_PLAYERS][6];
new PlayerText:buy_menu_PTD[MAX_PLAYERS];

new Text: change_color_TD[7];
new PlayerText: change_color_PTD[4][MAX_PLAYERS];

new car_market_data[4][77][2] =
{
	{//moto
		{462, 0},//skyt
		{468, 0},//pitbike
		{448, 0},
		{461, 0},
		{463, 0},
		{523, 0},
		{586, 0},
		{521, 0},
		{581, 0},
		{522, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0}
	},
	{//nizk
		{555, 0},
		{549, 0},
		{401, 0},
		{479, 0},
		{412, 0},
		{496, 0},
		{404, 0},
		{439, 0},
		{492, 0},
		{547, 0},
		{458, 0},
		{491, 0},
		{585, 0},
		{536, 0},
		{529, 0},
		{534, 0},
		{542, 0},
		{2616, 0},
		{2555, 0},
		{540, 0},
		{559, 0},
		{421, 0},
		{2554, 0},
		{2611, 0},
		{2618, 0},
		{762, 0},
		{419, 0},
		{2548, 0},
		{2624, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0}
	},
	{//visokii
		{543, 0},
		{489, 0},
		{2387, 0},
		{480, 0},
		{2394, 0},
		{2388, 0},
		{2622, 0},
		{2608, 0}, 
		{558, 0},
		{2392, 0},
		{495, 0},
		{475, 0},
		{503, 0},
		{613, 0},
		{402, 0},
		{410, 0},
		{2553, 0},
		{505, 0},
		{622, 0},
		{2603, 0},
		{2598, 0},
		{2547, 0},
		{502, 0},
		{400, 0},
		{604, 0},
		{405, 0},
		{2389, 0},
		{506, 0},
		{2602, 0},
		{466, 0},
		{2550, 0},
		{763, 0},
		{2545, 0},
		{466, 0},
		{490, 0},
		{2574, 0},
		{2582, 0},
		{420, 0},
		{533, 0},
		{2575, 0},
		{2559, 0},
		{2546, 0},
		{451, 0},
		{2391, 0},
		{429, 0},
		{2386, 0},
		{2599, 0},
		{2626, 0},
		{2544, 0},
		{680, 0},
		{2551, 0},
		{2549, 0},
		{679, 0},
		{2393, 0},
		{541, 0},
		{579, 0},
		{2578, 0},
		{2579, 0},
		{2581, 0},
		{411, 0},
		{415, 0},
		{2573, 0},
		{2543, 0},
		{2619, 0},
		{2590, 0},
		{2558, 0},
		{2564, 0},
		{2597, 0},
		{2583, 0},
		{2591, 0},
		{2563, 0},
		{2607, 0},
		{2600, 0},
		{2601, 0},
		{2569, 0},
		{2570, 0},
		{0, 0}
	},
	{//srednii
		{2610, 0},
		{562, 0},
		{2557, 0},
		{2565, 0},
		{507, 0},
		{620, 0},
		{2566, 0},
		{426, 0},
		{546, 0},
		{516, 0},
		{467, 0},
		{2589, 0},
		{2588, 0},
		{2580, 0},
		{527, 0},
		{621, 0},
		{445, 0},
		{2560, 0},
		{2561, 0},
	    {589, 0},
	    {759, 0},
		{2568, 0},
		{682, 0},
		{2623, 0},
		{2385, 0},
		{2627, 0},
		{2567, 0},
		{436, 0},
		{587, 0},
		{550, 0},
		{560, 0},
		{761, 0},
		{603, 0},
		{2584, 0},
		{681, 0},
		{526, 0},
		{2390, 0},
		{760, 0},
		{678, 0},
		{551, 0},
		{2604, 0},
		{2609, 0},
		{2552, 0},
		{565, 0},
		{2620, 0},
		{2625, 0},
		{442, 0},
		{2610, 0},
		{2621, 0},
		{2380, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0},
		{0, 0}
	}
};


new cars_after_purchase_count[4];
new
	Float: cars_pos_after_purchase[4][5][4] =
{
	{ // --- ????-?????
		{-916.068847,1175.710937,10.521624,229.770004},
		{-906.332458,1188.274536,10.521624,228.333618},
		{-904.379333,1190.520874,10.521624,233.366668},
		{-900.198303,1195.525634,10.521624,230.238952},
		{-920.126037,1170.902343,10.521624,231.342346}
	},
	{ // --- ???? ?????
		{2477.4668, -740.9326, 11.7950, 0.0000},
		{2481.3069, -740.8926, 11.7950, 0.0000},
		{2487.4067, -740.8926, 11.7950, 0.0000},
		{2477.4668, -740.9326, 11.7950, 0.0000},
		{2481.3069, -740.8926, 11.7950, 0.0000}
	},
	{ // --- ???? ?????
		{591.761657,2680.664550,13.399374,232.312332},
		{580.849731,2662.773193,13.399374,233.793518},
		{670.485229,2642.435302,13.399374,58.197315},
		{663.715515,2631.626953,13.399374,56.792018},
		{657.406127,2620.838378,13.399374,59.069255}
	},
	{ // --- C?????? ?????
		{1371.4735,452.4453,12.6497,149.0897},
		{1375.5096,451.0787,12.6476,146.9182},
		{1378.7089,448.5965,12.6462,149.5981},
		{1382.3378,446.2499,12.6481,148.5284},
		{1389.3162,441.9747,12.6460,148.1852}
	}
};

stock GetVehicleCarMarketID(vehicleid)
{
	if(GetVehicleData(vehicleid, V_ACTION_TYPE) != VEHICLE_ACTION_TYPE_RENT_CAR) return -1;
	else return GetVehicleData(vehicleid, V_ACTION_ID);
}

stock BuyCarTDsShowForPlayer(playerid)
{
	for(new i; i < 2; i ++)
	{
		TextDrawShowForPlayer(playerid, buy_car_TD[i]);
		PlayerTextDrawShow(playerid, buy_car_PTD[playerid][i]);
	}
	return 1;
}

stock BuyCarTDsHideForPlayer(playerid)
{
	for(new i; i < 6; i ++)
		PlayerTextDrawHide(playerid, buy_car_PTD[playerid][i]);

	TextDrawHideForPlayer(playerid, buy_car_TD[0]);
	TextDrawHideForPlayer(playerid, buy_car_TD[1]);
	return 1;
}

// ------------------------------------------
enum E_ANTI_FLOOD_STRUCT
{
	AF_LAST_TICK,
	AF_RATE
}

// ------------------------------------------
enum E_TEMP_JOB_STRUCT // ????????? ??????
{
	Float: TJ_POS_X,
	Float: TJ_POS_Y,
	Float: TJ_POS_Z,
	TJ_PAY_FOR_LOAD, // ????? ?? 1 ??????? (ù???/?? ????)
	TJ_SKIN[2]		// ???? ?????? (0 - ???????, 1 - ???????)
};

new Text3D: player_test_label[MAX_PLAYERS][4];

new Float: vehicle_temp_position[MAX_PLAYERS][4]; // ??????ù ?????????ù ??? ?????? ? ??????

// ------------------------------------------
enum E_ADVERT_STRUCT
{
	A_CREATOR,
	bool: A_EDIT,
	A_TEXT[128]
}

new g_advert[MAX_ADVERTS][E_ADVERT_STRUCT]; // ???ù?????ù

new g_advert_created; // ???-?? ???????????? ???ù??????

// ------------------------------------------
enum // ??? ????????? ?????
{
	TEMP_JOB_NONE = -1,
	// ----------------
	TEMP_JOB_LOADER = 0, 		// ???????
	TEMP_JOB_MINER, 			// ??????
	TEMP_JOB_FACTORY_TRUCKER,	// ????? (?????? ????????)
	TEMP_JOB_FACTORY,			// ?????
	TEMP_JOB_LUMBERJACK,			// ???????
	TEMP_JOB_FERMA
};

enum //
{
	TEMP_JOB_STATE_NONE,
	// --------
	TEMP_JOB_STATE_LOADER_LOAD, 	// ????? ????
	TEMP_JOB_STATE_LOADER_UNLOAD, 	// ?????? ????
	TEMP_JOB_STATE_LOADER_DROP_LOAD,// ?????? ????
	// --------
	TEMP_JOB_STATE_MINER_LOAD, 		// ???????? ????
	TEMP_JOB_STATE_MINER_UNLOAD, 	// ????? ?? ?????
	TEMP_JOB_STATE_MINER_DROP_LOAD, // ?????? ????
	// --------
	TEMP_JOB_STATE_FACTORY_TAKE_MET, // ????? ?????????
	TEMP_JOB_STATE_FACTORY_CREATE_P, // ?????? ???????
	TEMP_JOB_STATE_FACTORY_CREATED,  // ?????? ???????
	TEMP_JOB_STATE_FACTORY_PUT_PROD, // ????? ??????? ?? ?????
	TEMP_JOB_STATE_FACTORY_DROP_P,	 // ?????? ???????
	// --------
	TEMP_JOB_STATE_LUMBERJACK_CHOP,	 // ?????? ?????
	TEMP_JOB_STATE_LUMBERJACK_PUT,	 // ????? ?? ?????
	TEMP_JOB_STATE_LUMBERJACK_DROP,	 // ?????? ?????
};

// ------------------------------------------
// attached object (TODO)
enum
{
	A_OBJECT_SLOT_SPINE = 0, 		// ù???
	A_OBJECT_SLOT_HEAD, 			// ??????
	A_OBJECT_SLOT_ARM, 				// ?????
	A_OBJECT_SLOT_HAND, 			// ????
	A_OBJECT_SLOT_THIGH, 			// ?????
	A_OBJECT_SLOT_FOOT, 			// ????
	A_OBJECT_SLOT_CALF, 			// ??????
	A_OBJECT_SLOT_FOREARM, 			// ??????????
	A_OBJECT_SLOT_CLAVICLE,			// ???????
	A_OBJECT_SLOT_NECK, 			// ??ù
	A_OBJECT_SLOT_JAW				// ???????
};

enum
{
	A_OBJECT_BONE_SPINE = 1, 		// ù???
	A_OBJECT_BONE_HEAD, 			// ??????
	A_OBJECT_BONE_LEFT_ARM, 		// ????? ?????
	A_OBJECT_BONE_RIGHT_ARM, 		// ?????? ?????
	A_OBJECT_BONE_LEFT_HAND, 		// ????ù ????
	A_OBJECT_BONE_RIGHT_HAND, 		// ?????ù ????
	A_OBJECT_BONE_LEFT_THIGH, 		// ????? ?????
 	A_OBJECT_BONE_RIGHT_THIGH,		// ?????? ?????
	A_OBJECT_BONE_LEFT_FOOT, 		// ????ù ????
	A_OBJECT_BONE_RIGHT_FOOT, 		// ?????ù ????
	A_OBJECT_BONE_RIGHT_CALF, 		// ?????ù ??????
	A_OBJECT_BONE_LEFT_CALF, 		// ????ù ??????
	A_OBJECT_BONE_LEFT_FOREARM, 	// ????? ??????????
	A_OBJECT_BONE_RIGHT_FOREARM,	// ?????? ??????????
	A_OBJECT_BONE_LEFT_CLAVICLE,	// ????ù ??????? (?????)
	A_OBJECT_BONE_RIGHT_CLAVICLE,	// ?????ù ??????? (?????)
	A_OBJECT_BONE_NECK, 			// ??ù
	A_OBJECT_BONE_JAW				// ???????
};

// ------------------------------------------
enum // ???? ???????????
{
	REGISTER_STATE_PASSWORD = 1, // ???? ?????ù
	//REGISTER_STATE_EMAIL, 		// ???? ??????
	REGISTER_STATE_REFER, 		// ???? ???? ????????????? ??????
	REGISTER_STATE_SEX, 		// ????? ????
	REGISTER_STATE_RULES, 		// ??????? ???????
	REGISTER_STATE_CREATE_ACC 	// ???????? ????????
};

enum // ???? ???????????
{
	LOGIN_STATE_CHECK_BAN = 0,	// ???????? ????
	LOGIN_STATE_PASSWORD, 		// ???? ?????ù
	LOGIN_STATE_PHONE,			// ???? 5 ??????. ???? ????????
	LOGIN_STATE_PIN_CODE,		// ???? ??? ????
	//LOGIN_STATE_GOOGLE_CODE,	// ???? ???? ?? ?????
	LOGIN_STATE_LOAD_ACC	 	// ???????? ????????
};
// ------------------------------------------
new mysql; // ?? ?????????ù


#include "../include/anticheat.inc"
// ------------------------------------------
new Text: gps_on_TD[1]; 			// gps
new Text: stop_anim_TD[1];			// anim list
new Text: select_TD[6];		// ?????? ??????
new Text: capture_TD[2];	// ?????????? ??ù ?????



new PlayerText:speedometr_PTD[MAX_PLAYERS][10];
new Text: speedometr_TD[1];
new PlayerText: price_select_TD[MAX_PLAYERS][1]; 	// ???? ? ?????? ??????

// ------------------------------------------
new PlayerText:pin_code_PTD[MAX_PLAYERS][10];
new pin_code_value[MAX_PLAYERS][10];
new pin_code_state[MAX_PLAYERS] = {PIN_CODE_STATE_NONE, ...};
new pin_code_input[MAX_PLAYERS][5];

// ------------------------------------------
new Text: radio_edit_TD;	// ?????????? ???ù?????? ??ù ?????????????ù

// ------------------------------------------
//new Menu: reg_select_skin_menu;

// ------------------------------------------

new Menu: admin_spec_menu;

// ------------------------------------------
new g_player[MAX_PLAYERS][E_PLAYER_STRUCT];
new
	g_player_default_values[E_PLAYER_STRUCT] =
{
	0,		// ?? ????????
	0,		// ?????
	0,		// ??? ??????
	"",		// ????
	"",		// ?????? ??????
	"None",	// ????? ??????
	false, 	// ??????????? ?? ?????
	0,		// ???? ??????
	0,		// ?????? ??????
	0,		// ?????? ? ?????
	ADMIN_TYPE_NONE, // ??????? ???????
	false,	// ???????ù ?? ?????????? ????
	false,	// ???????ù ?? ??????
	0,		// ????ù ???????????
	"255.255.255.255",	// ?? ??? ???????????
	"255.255.255.255",	// ?? ??? ????????? ?????
	1,		// ??????? ??????
	0,		// ???? ????? ??????
	0,		// ??????? ???????
	0,		// ????? ????????
	0,		// ?? ????? ????????
	0,		// ???? ????????
	0,		// ?????????????????
	0, 		// ????????ù
	0,		// ?????????
	0,		// ???????
	0,		// ?????????
	0,		// ????
	0,		// ??????????ù
	0,		// ???? ???????????
	0,		// ?????????????
	0,		// ????????
	0,		// ?????? / ?????????(????)
	HOUSE_TYPE_NONE, // ??? ????ù (???/?????/? ????ù?)
	-1,		// ??????? ? ????
	-1,		// ???
	-1,		// ??????
	-1,	 	// ????????
	"None", // ???????? ??????? ??????
	"None", // ??? ???
	REQUEST_TYPE_OFF, // ?????? ???????? ??? ???????????
	REQUEST_TYPE_OFF, // ?????? ??? ???? ??? ???????????
	// -------------------------
	0,					// ????ù ?????????? ?????\??????
	// -------------------------
	0,					// ????ù ???? ?? ???
	0,					// ????ù ???? ?? ????
	0,					// ????ù ???? ?? ????????? ????
	// -------------------------
	0xFFFFFF11,			// ???? ??????
	-1,					// ???????? ????
	0,					// ??? ????
	0,					// ????ù ???
	INVALID_VEHICLE_ID, // ?? ?????????? ???? ? ??????? ?????
	INVALID_DIALOG_ID,	// ?? ?????????? ???????
	USE_ANIM_TYPE_NONE,	// ??? ?????? ??????? ??????????
	ENTER_PASSWORD_ATTEMPS,// ???-?? ??????? ?? ???????????
	INVALID_PLAYER_ID,	// ??????? ?? ??????
	100.0,				// ?? ??????
	// -------------------------
	TEMP_JOB_NONE,		// ????????ù ??????
	TEMP_JOB_STATE_NONE,// ???????? ??? ???? ??????
	false,				// ???????? ??????
	// ---------------------------------
	"",					// ???????? ??????
	0,					// ?????
	0,					// ????????
	0,					// ?????????/?????????? (?????/????)
	INVALID_VEHICLE_ID,	// ??????? ?????????
	-1,					// ?????? ????????ù ??????
	-1,					// ????? ???? ?????????? ?? ??????
	0, 					// ??????? ????????
	0,					// ??? ????????
	0,					// ?????????? ?? N
	0,					// ??????????????? ?? N ???
	false,				// ?? ?????? ??
	// -------------------------
	false,				// ?????? ???????????
	false,				// ?????????? ?? ?????? (/anim)
	false,				// ????????????? ????? OnPlayerLeaveDynamicArea
	false,				// ?????????? ?? ?????? ??? ??????
	false,				// ????????? ?? ????????
	false,				// ???? ?? ? ?????? ???????
	Text3D: -1,			// ??????? ?????????
	Text3D: -1,			// Admin Prefix
	false,				// ?????????? ???? ???????????
	// -------------------------
	-1, 				// ????ù ?? ??????????
	-1, 				// ? ????? ?????? ?????
	-1, 				// ? ????? ??? ?????
	-1,					// ? ????? ????????
	-1,					// ?? ????? ????? ? ????????
	-1,					// ?? ?????? ?? ??????? ???ù? ????????? ???
	-1,					// ? ????? ?????? ? ?????
	0,					// ?? ????? ????? ? ?????
	0,					// ???????
	0,					// ?????
	0,					// ?????????? ?????
	0,					// ???-?? ????????????? ???????
	REALTOR_TYPE_NONE,	// ?????????
	SELECT_PANEL_TYPE_NONE, // ?????????? ?? ?????? ??????
	INVALID_VEHICLE_ID,	// ?? ??????? ù?
	INVALID_VEHICLE_ID,	// ?? ???? ????????????? ?????????
	// -------------------------
	"255.255.255.255", 	// ?? ??????
	"", 				// ??ù ??????
	"ó", 				// ??ù ????/????
	// -------------------------
	ACCOUNT_STATE_NONE, // ?????? ???????? (??????????/??????????ù)
	0, 					// ??? (???????????/???????????)
	// -------------------------
	0,             		// ?????
	0,        			// ????ù ??????
	0,             		// ????ù ????
	// -------------------------
	0, 					// ????
	0,     				// ????? ?????
	0,   				// ????? ???????????
	0,     				// ????? ????
	0,    				// ????? ????????
	0,        			// ????? ??5
	0,	    			// ????? ??47
	0,         			// ????? ?4
	0,					// ????? ??????????ù ???????? ?????????
	0,    				// ????? ?????
	0,  				// ????? ??????????? ????????
 	0,  				// ????? ?????-???
 	// -------------------------
 	0,                   // ????? ??????
	// -------------------------
	0,					// ?????? ?????? ?????-??????
	0,					// ??????? ?????? ?????-?????
	0,					// ????? ?????????? ?????-?????
	// -------------------------
	false,				// ????? ?? ? ????????
	-1,					// ????? ?????
	// -------------------------
	false,				// ???????ù???? ?? ??????
	0,					// ?????????? ???????ù???
	false,				// ???? ?? ?????????
	// -------------------------
	INVALID_VEHICLE_ID,	// ???????? ?? ????
	INVALID_VEHICLE_ID,	// ???????????? ????
	INVALID_VEHICLE_ID,	// ?????????? ????
	1,					// ?????????? ?????? ??ù ????
	// -------------------------
	0,					// ????ù ?????????ù
	// -------------------------
	0,					// ??????? ??????? ????????
	0,                  // Date premium
	1,                  // preimum chat
	//
	-1,					// ??????ù?? ?? ?????
	// -------------------------
	0,					// ????ù ???????ù ??????? ????????
	// -------------------------
	0,
	0,              // ???????ù???
	"[A]", 				// prefix ?????
};

new mysql_race[MAX_PLAYERS];
new g_speed_line_update[MAX_PLAYERS] = {-1, ...};

new Float: g_taxi_mileage[MAX_PLAYERS] = {0.0, ...};

// ------------------------------------------
new g_ownable_car[MAX_OWNABLE_CARS][E_OWNABLE_CAR_STRUCT];
new g_ownable_car_loaded;

// ------------------------------------------
new g_vehicle_trunk[MAX_VEHICLES][MAX_VEHICLE_TRUNK_SLOTS][E_VEHICLE_TRUNK_STRUCT];

// ------------------------------------------
new g_hotel[MAX_HOTELS][MAX_HOTEL_ROOMS][E_HOTEL_STRUCT];
new g_hotel_rooms_loaded[MAX_HOTELS];
new g_hotel_loaded;

new g_hotel_lift_CP[2];

new const
	Float: g_hotel_room_exit_pos[3][3] =
{
	{1275.9808, -772.4982, 1202.7220},
	{1275.9808, -764.2992, 1202.7220},
	{1275.9808, -756.2681, 1202.7220}
};

// ?????? ???????? ??????? ??ù ??????? ??????
new Float:buspick1_positions[4][4] = {
    {1783.01,2528.52,13.91,214.43},
    {1785.47,2530.08,13.89,214.43},
    {1787.77,2531.73,13.88,214.43},
    {1790.09,2533.37,13.87,214.43}
};

new Float:buspick2_positions[4][4] = {
    {2639.05,-2486.21,21.0,321.95},
    {2635.42,-2486.11,21.0,321.95},
    {2631.33,-2486.25,21.01,321.95},
    {2627.55,-2486.23,21.02,321.95}
};

new Float:buspick3_positions[4][4] = {
    {902.24,784.31,13.63,257.85},
    {900.32,779.11,13.63,257.85},
    {898.36,774.09,13.63,257.85},
    {896.64,769.52,13.63,257.85}
};

new const // ??????? ???? (???????? ????ù / ????????? ?? ? ?????)
	g_hotel_car_park_pos[1][33][E_HOTEL_CAR_PARK_STRUCT] =
{
	{
		{-133.1494,	983.9849,	12.1618,	180.4495,	INVALID_VEHICLE_ID},
		{-137.5265,	983.8444,	12.1608,	179.9925,	INVALID_VEHICLE_ID},
		{-139.5423,	975.4324,	12.1614,	269.4506,	INVALID_VEHICLE_ID},
		{-139.2751,	971.6942,	12.1608,	267.8990,	INVALID_VEHICLE_ID},
		{-139.3615,	967.6329,	12.1618,	268.9070,	INVALID_VEHICLE_ID},
		{-139.2914,	963.4075,	12.1611,	270.4609,	INVALID_VEHICLE_ID},
		{-139.2221,	958.7978,	12.1608,	269.5585,	INVALID_VEHICLE_ID},
		{-116.4657,	971.6745,	12.1570,	89.46280,	INVALID_VEHICLE_ID},
		{-116.5386,	967.9235,	12.1557,	90.18910,	INVALID_VEHICLE_ID},
		{-116.5738,	963.9881,	12.1531,	90.00600,	INVALID_VEHICLE_ID},
		{-116.5876,	960.3621,	12.1551,	92.67610,	INVALID_VEHICLE_ID},
		{-116.2813,	950.5233,	12.1536,	90.45550,	INVALID_VEHICLE_ID},
		{-102.8195,	971.5937,	12.1614,	270.0878,	INVALID_VEHICLE_ID},
		{-102.6861,	968.0194,	12.1620,	269.5782,	INVALID_VEHICLE_ID},
		{-102.7776,	964.1411,	12.1621,	270.2165,	INVALID_VEHICLE_ID},
		{-102.9098,	960.6828,	12.1615,	270.6911,	INVALID_VEHICLE_ID},
		{-102.8726,	950.8474,	12.1610,	270.0904,	INVALID_VEHICLE_ID},
		{-116.2799,	950.5248,	12.1551,	90.53890,	INVALID_VEHICLE_ID},
		{-102.5865,	946.5525,	12.1611,	268.3489,	INVALID_VEHICLE_ID},
		{-94.7682,	983.9437,	12.1606,	178.0583,	INVALID_VEHICLE_ID},
		{-89.6837,	983.7529,	12.1627,	180.2712,	INVALID_VEHICLE_ID},
		{-88.7005,	975.4258,	12.1573,	91.58140,	INVALID_VEHICLE_ID},
		{-88.7543,	971.4301,	12.1574,	90.29010,	INVALID_VEHICLE_ID},
		{-88.7361,	968.0562,	12.1570,	90.12850,	INVALID_VEHICLE_ID},
		{-88.7494,	964.4591,	12.1579,	91.67410,	INVALID_VEHICLE_ID},
		{-88.6165,	960.7374,	12.1577,	90.89440,	INVALID_VEHICLE_ID},
		{-88.6389,	957.0118,	12.1556,	91.18100,	INVALID_VEHICLE_ID},
		{-88.5814,	953.0699,	12.1540,	90.86370,	INVALID_VEHICLE_ID},
		{-88.6637,	949.1523,	12.1536,	91.07860,	INVALID_VEHICLE_ID},
		{-88.6821,	945.1238,	12.1542,	91.11890,	INVALID_VEHICLE_ID},
		{-88.8479,	941.1545,	12.1542,	90.08610,	INVALID_VEHICLE_ID},
		{-88.8513,	937.4927,	12.1536,	90.22390,	INVALID_VEHICLE_ID},
		{-88.8047,	933.3365,	12.1541,	90.21220,	INVALID_VEHICLE_ID}
	}
};

// ------------------------------------------
new g_entrance[MAX_ENTRANCES][E_ENTRANCE_STRUCT];
new g_entrance_loaded;

new g_entrance_flat[MAX_ENTRANCES][MAX_ENTRANCE_FLOORS][4];
new g_entrance_flats_loaded[MAX_ENTRANCES];

new const
	Float: g_entrance_flat_pos[4][6] =
{
	{ // 1 ????????
		553.0098,25.2907,1049.2656, // x | y | z
		558.6488, 25.2916, 180.0 // x | y | angle
	},
	{ // 2 ????????
		554.5970,26.6261,1049.2656,
		558.6488, 25.2916, 180.0
	},
	{ // 3 ????????
		565.1951,26.6265,1049.2656,
		558.6488, 25.2916, 180.0
	},
	{ // 4 ????????
		567.2014,25.2727,1049.2656,
		558.6488, 25.2916, 180.0
	}
};

// ------------------------------------------
new g_house[MAX_HOUSES][E_HOUSE_STRUCT];
new g_house_loaded;

new g_house_renters[MAX_HOUSES][MAX_HOUSE_ROOMS][E_HOUSE_ROOM_STRUCT];
new g_house_renters_count[MAX_HOUSES];



new g_house_type[7][E_HOUSE_TYPE_STRUCT] =
{
	{
		"??????????? ?????", 						// ???????? / ??? 0
		2491.4910,1003.5193,1499.5813, 268.0, 	// ????? ?????
		2497.2397,996.9626,1499.5886, 			// ???????
		236.5589, -138.6849, 998.5800,			// ????
		1,										// ????????
		1										// ??????
	},
	{
		"??????", 						// ???????? / ??? 1
		2903.2188,1498.0972,2001.0000, 268.0, 	// ????? ?????
		2904.4951,1508.7185,2001.0000, 			// ???????
		236.5589, -138.6849, 998.5800,			// ????
		1,										// ????????
		2										// ??????
	},
	{
		"??????? ?????", 						// ???????? / ??? 2
		667.4174,29.3543,1024.1985, 268.0, 	// ????? ?????
		658.1136,31.6934,1024.1875, 			// ???????
		236.5589, -138.6849, 998.5800,			// ????
		1,										// ????????
		3										// ??????
	},
	{
		"??????? ?????", 						// ???????? / ??? 3
		994.7635,2021.9585,1561.0112, 268.0, 	// ????? ?????
		991.6368,2010.1846,1561.0034, 			// ???????
		236.5589, -138.6849, 998.5800,			// ????
		1,										// ????????
		4										// ??????
	},
	{
		"???????",						// ???????? / ??? 4
		-2.3367,483.5531,1381.0022, 270.0,	// ????? ?????
		7.3987,503.3117,1381.0022, 			// ???????
		647.6192, -9.4187, 1001.4048,			// ????
		1,										// ????????
		5										// ??????
	},
	{
		"?????????",						// ???????? / ??? 5
		10.3718,2494.1458,1540.9941, 0.0,	// ????? ?????
		13.1270,2508.1614,1541.0020, 			// ???????
		572.0909, 3.8222, 1001.4543,			// ????
		1,										// ????????
		6										// ??????
	},
	{
		"??????? ?????",						// ???????? / ??? 6
		294.716125,2139.311523,1765.464111, 0.0,	// ????? ?????
		19.6689,1516.1731,1380.9976, 			// ???????
		572.0909, 3.8222, 1001.4543,			// ????
		1,										// ????????
		7										// ??????
	}
};

new const
	g_house_improvements[6][E_IMPROVEMENTS_STRUCT] =
{
	{"?????????????? ?????", 	8_000, 	0},
	{"??????ùù ???????", 		14_500, 0},
	{"?????????? ??????????",	20_000, 0},
	{"?????????? ????????",		55_000, 0},
	{"???? ??ù ?????",			60_000, 0},
	{"???????? ?????????",		160_000, 0}
};

// ------------------------------------------
new g_business[MAX_BUSINESS][E_BUSINESS_STRUCT];
new g_business_loaded;

new const
	g_business_improvements[6][E_IMPROVEMENTS_STRUCT] =
{
	{"?????????????? ????????", 			15_000,		0},
	{"??????????? ????????????", 			30_000,		0},
	{"?????????? ???????????????",			80_000,		0},
	{"???????? ??????? ??? ?????",			150_000,	0},
	{"??????. ????? ??ù ?????????",			300_000,	0},
	{"????????ù ???????ù",					450_000,	0}
};

enum // ??? ??????????
{
	BUSINESS_INTERIOR_SHOP_24_7 = 0,	// ??????? 24/7
	BUSINESS_INTERIOR_CLUB = 1,			// ????
	BUSINESS_INTERIOR_REALTOR_BIZ = 2,	// ?????????? ?????????? (???????)
	BUSINESS_INTERIOR_REALTOR_HOME = 3,	// ??????????? ???????? (????)
	BUSINESS_INTERIOR_CLOTHING_SHOP = 4,// ??????? ??????
	BUSINESS_INTERIOR_HOTEL = 5,		// ?????
	BUSINESS_INTERIOR_CAR_MARKET = 6,	// ?????????
	BUSINESS_INTERIOR_CASINO = 7,		// ??????
	BUSINESS_INTERIOR_CELL_SALON = 8,	// ??????? ?????
	BUSINESS_INTERIOR_CAR_TUNING = 9,	// ?????? ??????????
	BUSINESS_INTERIOR_SHOP_GUN = 10,	// ??????? ?????ù
};
new const
	g_business_interiors[11][E_BUSINESS_INTERIOR_STRUCT] =
{
	{ // ??????? 27/7
		"??????? 27/7",
		1544.0565,416.4893,1000.9993, 		// ??????? ?????? (?????)
		1545.7554,416.3236,1000.9993, 263.5638,// ??????? ?????
		1, 									// ????????
		1553.139892,412.252441,1000.999328, 		// ??????? ???????
		1546.955078,414.242492,1000.999328, 		// ??????? ???????
		0.0, 0.0, 0.0,						// ??????? 3? ??????
		-1									// ????????\?????
	},
	{ // 
		"???? (????????)",
		493.3602, -24.8439, 1000.6797, 		// ??????? ?????? (?????)
		493.3910, -22.7228, 1000.6797, 0.0, // ??????? ?????
		17, 								// ????????
		503.6340, -11.6332, 1000.6797, 		// ??????? ???????
		499.970, -20.697, 1000.680, 		// ??????? ??????? ??ù? ??ù?
		498.365, -24.535, 1002.696, 		// ??????? 3? ??????
		-1									// ????????\?????
	},
	{ // 
		"?????????? ??????????",
		-364.2391, 2740.8413, 2502.1704,	// ??????? ?????? (?????)
		-365.4391, 2740.8413, 2502.1704, 90.0,	// ??????? ?????
		0,									// ????????
		-366.2918, 2736.5081, 2502.1704,	// ??????? ???????	??ù? ??ù?
		-371.4008, 2739.6472, 2502.1704,	// ??????? ???????
		-370.0462, 2738.7839, 2503.8501,	// ??????? 3? ??????
		-1									// ????????\?????
	},
	{ // 
		"??????????? ????????",
		162.4737, 742.7685, 25.8272,		// ??????? ?????? (?????)
		163.3701, 745.0021, 25.8272, 339.92,// ??????? ?????
		0,									// ????????
		161.4340, 748.0493, 25.8272,		// ??????? ???????	??ù? ??ù?
		160.5056, 744.9833, 25.8272,		// ??????? ???????
		154.5396, 748.7235, 26.9926,		// ??????? 3? ??????
		-1
	},
	{ // ??????? ??????
		"??????? ??????",
		0.0, 0.0, 0.0,		// ??????? ?????? (?????)
		0.0, 0.0, 0.0, 0.0, // ??????? ?????
		1,									// ???????? ??ù? ??ù?
		0.0, 0.0, 0.0,		// ??????? ???????
		0.0, 0.0, 0.0,		// ??????? ???????
		0.0, 0.0, 0.0,						// ??????? 3? ??????
		-1
	},
	{ // ?????
		"?????",
		725.0262, 592.7350, 1002.9598,		// ??????? ?????? (?????)
		725.0227, 594.9494,1002.9598, 360.0,// ??????? ?????
		1,									// ????????
		718.5051, 593.9505, 1002.9598,		// ??????? ??????? ??ù? ??ù?
		724.8739, 602.2747, 1002.9598,		// ??????? ???????
		0.0, 0.0, 0.0,						// ??????? 3? ??????
		-1
	},
	{ // ?????????
		"?????????",
		0.0, 0.0, 0.0,		// ??????? ?????? (?????)
		0.0, 0.0, 0.0, 0.0, // ??????? ?????
		1,									// ???????? ??ù? ??ù?
		0.0, 0.0, 0.0,		// ??????? ???????
		0.0, 0.0, 0.0,		// ??????? ???????
		0.0, 0.0, 0.0,						// ??????? 3? ??????
		-1
	},
	{ // ??????
		"??????",
		2498.7358,2511.5403,2501.0313,		// ??????? ?????? (?????)
		2498.9124,2509.1658,2501.0313, 270.0, // ??????? ?????
		1,									// ????????
		2505.2590,2505.6582,2501.0325,		// ??????? ???????
		2490.3923,2497.1082,2501.0313,		// ??????? ???????
		164.3450, -235.3091, 1003.5235, 	// ??????? 3? ??????
		-1
	},
	{ // ??????? ?????
		"??????? ?????",
		1540.5625,426.9298,1001.0156, 		// ??????? ?????? (?????)
		1542.8002,427.5040,1001.0156, 360.0,// ??????? ?????
		1, 									// ????????
		1541.4470,430.3529,1001.0156, 		// ??????? ???????
		1543.0145,424.1506,1001.0156, 		// ??????? ???????
		0.0, 0.0, 0.0,						// ??????? 3? ??????
		-1
	},
	{ // ?????? ?????
		"ù????? ?????",
		2497.3086,1514.3608,1498.1797, 	// ??????? ?????? (?????)
		2497.4919,1512.3165,1498.1797, 180.9736, // ??????? ?????
		1, 									// ???????? ??ù? ??ù?
		2485.3884,1484.8821,1498.1797, 	// ??????? ???????
		2480.1868,1488.0485,1498.1797, 	// ??????? ???????
		2480.1868,1488.0485,1498.1797,		// ??????? 3? ??????
		-1
		//
	},
    { // ??????? ?????ù
		"??????? ?????ù",
		2894.7336,2900.0076,1501.0000, 		// ??????? ?????? (?????)
		2896.4705,2900.3047,1501.0000, 360.0,// ??????? ?????
		1, 									// ????????
		2896.0269,2902.1741,1501.0000, 		// ??????? ???????
		2904.6665,2900.7778,1501.0000, 		// ??????? ???????
		2904.6665,2900.7778,1501.0000,						// ??????? 3? ??????
		-1									// ????????\?????
}
};
// ?????????? ??????????
new Text3D: g_business_realtor_label;

new g_business_realtor_list[2048];
new g_business_realtor_list_idx[MAX_BUSINESS];
// --------------------

// ??????????? ????????
new Text3D: g_house_realtor_label;
new g_house_realtor_list[2048];
// --------------------

// ??????? ??????
new const
    g_business_clothing_skins[2][59][2] =
{
    {// ?,?????
        {29, 5500},
        {33, 9000},
        {30, 14500},
		{43, 17000},
		{142, 18000},
		{36, 20000},
		{7, 28000},
		{47, 30000},
		{37, 35000},
		{44, 37000},
		{97, 40000},
		{66, 42000},
		{176, 44000},
		{156, 45000},
		{96, 50000},
		{60, 55000},
		{143, 60000},
		{144, 65000},
		{181, 80000},
		{101, 95000},
		{67, 100000},
		{177, 100000},
		{128, 110000},
		{123, 120000},
		{127, 130000},
		{153, 140000},
		{180, 150000},
		{189, 230000},
		{182, 250000},
		{183, 270000},
		{146, 300000},
		{247, 320000},
		{185, 350000},
		{240, 600000},
		{242, 800000},
		{248, 1000000},
		{241, 1400000},
		{120, 1500000},
		{222, 2500000},
		{221, 2800000},
		{250, 3000000},
		{217, 3200000},
		{98, 3300000},
		{81, 3400000},
		{126, 3500000},
		{223, 3900000},
		{80, 4000000},
		{213, 4500000},
		{82, 5000000},
		{125, 5000000},
		{124, 6500000},
		{83, 7000000},
		{203, 7100000},
		{121, 7300000},
		{84, 7500000},
		{118, 10000000},
    	{312, 550000},
    	{313, 550000},
    	{314, 550000}
    },
    {// ?,?????
        {40, 4000},
		{12, 8000},
		{131, 25000},
		{56, 30000},
		{85, 50000},
		{87, 70000},
		{246, 100000},
		{178, 180000},
		{219, 190000},
		{55, 200000},
		{152, 250000},
		{169, 270000},
		{194, 320000},
		{75, 500000},
		{201, 550000},
		{11, 600000},
		{244, 650000},
		{215, 700000},
		{211, 850000},
		{216, 900000},
		{237, 1100000},
		{233, 1500000},
		{238, 1700000},
		{214, 2000000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
		{0, 1000},
        {0, 1000},
		{0, 1000},
		{0, 1000}
    }
};

new const
	g_business_sound[5] =
{
	17001,
	4203,
	21000,
	1135,
	1137
};

new bool:times[MAX_PLAYERS];


new g_business_gps[MAX_BUSINESS_GPS][E_BUSINESS_GPS_STRUCT];
new g_business_gps_count;
new bool: g_business_gps_init;

// ------------------------------------------
new g_fuel_station[MAX_FUEL_STATIONS][E_FUEL_STATION_STRUCT];
new g_fuel_station_loaded;

new const
	g_fuel_station_improvements[4][E_IMPROVEMENTS_STRUCT] =
{
	{"??????? ????????? ??????? I", 	9_500, 	0},
	{"??????? ????????? ??????? II", 	24_000, 0},
	{"??????? ????????? ??????? III",	58_000, 0},
	{"?????? ????????? ?????", 			74_000, 0}
};

// ------------------------------------------
new g_order[MAX_FUEL_STATIONS + MAX_BUSINESS][E_ORDER_STRUCT]; // ??????

new
	Float: g_med_bed_pos[][] = // ??????? ????
{
	{1467.396362,2496.544189,2501.601074},
	{1467.154907,2492.711425,2501.601074},
	{1472.005737,2492.452148,2501.601074},
	{1471.970092,2496.781738,2501.601074},
	{1469.495849,2507.833007,2501.601074},//
	{1469.318481,2503.437988,2501.601074},
	{1474.038940,2507.649169,2501.601074},
	{1473.808227,2503.513427,2501.601074},
	{1480.658081,2507.849121,2501.601074},
	{1480.560180,2503.403320,2501.601074},//
	{1484.993530,2503.685058,2501.601074},
	{1484.831298,2507.541748,2501.601074},
	{1487.302978,2492.450683,2501.601074},
	{1487.212158,2496.884521,2501.601074},
	{1482.740722,2496.433593,2501.601074},//
	{1482.713623,2492.742675,2501.601074},
	{2035.5959,1408.4237,998.6864},
	{2032.6282,1408.4419,998.6864},
	{2029.6198,1408.4548,998.6864},
	{2026.6152,1408.4497,998.6864},//
	{2023.7863,1408.4072,998.6864},
	{2021.8552,1415.2566,998.6864},
	{2018.6506,1415.1599,998.6864},
	{2011.2804,1415.1678,998.6864},
	{2008.3539,1415.2153,998.6864},//
	{2008.6503,1408.5542,998.6864},
	{2011.8329,1408.5302,998.6864},
	{2014.7455,1408.6299,998.6864},
	{2017.7767,1408.7332,998.6864},
	{2020.7014,1408.7979,998.6864},//
	{2024.5049,1431.8531,998.6864},
	{2027.6940,1432.0294,998.6864},
	{2030.9901,1431.8896,998.6864},
	{2034.0316,1431.9585,998.6864},
	{2036.8600,1431.9725,998.6864},//
	{2040.1072,1431.9537,998.6864},
	{2042.9485,1431.9716,998.6864},
	{2046.0444,1431.9978,998.6864},
	{2046.5886,1424.8135,998.6864},
	{2043.4453,1424.7853,998.6864},//
	{2040.2178,1424.7631,998.6864},
	{2037.2761,1424.8629,998.6864},
	{2034.1207,1424.9250,998.6864},
	{2027.3944,1424.9261,998.6864},
	{2024.5508,1424.8071,998.6864},
	{2026.5610,1415.3983,998.7046},
	{2023.6172,1415.2797,998.8893},
	{2023.6761,1408.3976,998.8710},
	{2026.7393,1408.6593,998.8710},
	{2029.5962,1408.5573,998.8710},
	{2032.4895,1408.4834,998.8710},
	{2035.6399,1408.5160,998.8710},
	{2038.4742,1408.5648,998.8710}
};
new g_med_bed_used[sizeof g_med_bed_pos] = {false, ...}; // ???ù?? ?? ?????
new Text3D: g_med_bed_label[sizeof g_med_bed_pos]; // ????? ?????

// ------------------------------------------
new
	Float: g_casino_table_pos[][] = // ??????? ???????? ? ??????
{
	{2500.7969,2448.9399,2499.6641},
	{2500.8159,2443.7556,2499.6641},
	{2500.7998,2438.1450,2499.6641},
	{2496.7371,2438.3884,2499.6641},
	{2496.6824,2443.4790,2499.6641},
	{2496.7109,2448.8103,2499.6641}
};
new g_casino_area[sizeof g_casino_table_pos]; // ???? ??ù ????????????ù /dice

// ------------------------------------------

enum E_ADMIN_FORM
{
    form_type,
    form_target_name[MAX_PLAYER_NAME],
    form_target_id,
    form_target_account,
    form_reason[128],
    form_duration,
    form_author,
    form_author_name[MAX_PLAYER_NAME],
    form_author_account,
    form_time,
    form_status,
    form_approved_by,
    form_approved_name[MAX_PLAYER_NAME]
};

new AdminForms[MAX_ADMIN_FORMS][E_ADMIN_FORM];
new FormCount = 0;
new CurrentFormType[MAX_PLAYERS];

enum E_ARMORY_STRUCT
{
	A_DESCRIPTION[21],
	A_TYPE,
	Float: A_POS_X,
	Float: A_POS_Y,
	Float: A_POS_Z,
	A_VW,
	A_INTERIOR,
	A_MATERIALS,
	A_IS_OPEN,
	Text3D:A_LABEL
}

enum
{
	ARMORY_TYPE_ARMOR = 0,
	ARMORY_TYPE_FSB,
	ARMORY_TYPE_SECURITY, 
	ARMORY_TYPE_POLICE,
	ARMORY_TYPE_FSIN
}

new g_armory[5][E_ARMORY_STRUCT] =
{
	{"???????ù ?????", ARMORY_TYPE_ARMOR, 1804.36, 1729.92, 1493.07, 1, 1, 50000, true, Text3D:INVALID_TEXT_3D},
	{"???", ARMORY_TYPE_FSB, 2913.74, 2007.19, 2051.00, -1, -1, 50000, true, Text3D:INVALID_TEXT_3D},
	{"?????? ?????????????", ARMORY_TYPE_SECURITY, -870.67, -1589.14, 1398.50, 1, 1, 50000, true, Text3D:INVALID_TEXT_3D},
	{"??????ù", ARMORY_TYPE_POLICE, -1099.75, 1523.35, 1499.98, 1, 1, 50000, true, Text3D:INVALID_TEXT_3D},
	{"????", ARMORY_TYPE_FSIN, -1879.81, -2739.69, 7.62, 0, 0, 50000, true, Text3D:INVALID_TEXT_3D}
};

enum E_FSIN_ROOM
{
    Float:roomPosX,
    Float:roomPosY,
    Float:roomPosZ,
    Float:roomAngle,
    roomVW,
    roomInt,
    Text3D:roomLabel,
    bool:isBusy,
    roomPickupID,
    roomTimer,
    roomPrisonerID,
    roomVisitorID
};
new g_fsinRooms[8][E_FSIN_ROOM];
new g_fsinRoomTimerID[8];

// ------------------------------------------
new g_player_setting[MAX_PLAYERS][E_PLAYER_SETTINGS_STRUCT];
new
	g_settings_default_values[E_PLAYER_SETTINGS_STRUCT] =
{
	SETTING_CHAT_ADVANCE,
	SETTING_TYPE_ON,
	SETTING_TYPE_ON,
	SETTING_TYPE_ON,
	SETTING_TYPE_OFF,
	SETTING_TYPE_ON
};

// ------------------------------------------
new g_player_gps[MAX_PLAYERS][E_PLAYER_GPS_STRUCT];
new
	g_gps_default_values[E_PLAYER_GPS_STRUCT] =
{
	GPS_STATUS_OFF,
	0.0,
	0.0,
	0.0
};

// ------------------------------------------
new const gps_public_places[][E_GPS_STRUCT] = // ???????????? ?????
{
	{-139.5045, 595.2235, 12.1445},  // ?????
	{1912.0990, 2227.6367, 16.0831}, // ?????????
	{1916.5503, 2302.2786, 15.1412}, // ?????????
	{-286.9034, 576.8859, 12.8447}   // ????????ù ????????
};
new const gps_entertainment[][E_GPS_STRUCT] = // ??????????ù
{
	{1334.0336, 2370.7607, 17.6642}, // ????
	{611.4083, 1693.0724, 11.2432}   // ??????
};
new const gps_autosalons[][E_GPS_STRUCT] = // ??????????
{
	{2477.1899, -720.0678, 12.3315}, // ????????? 1
	{1409.7476, 458.4746, 13.1630},  // ????????? 2
	{-18.6553, 2614.9434, 11.9766},  // ????????? 3
	{-2243.4968, 264.5101, 24.5391}, // ????????? 4
	{781.6177, 751.9495, 12.9271},   // ????????? 5
	{2494.7471, -718.3454, 12.3706}  // ????????? 6
};
new const gps_cities[][E_GPS_STRUCT] = // ??????
{
	{2741.3228, -1434.8730, 23.8142}, // ?????
	{214.1069, 819.7451, 12.1323},    // ???????
	{-630.5291, 964.9764, 12.0046},   // ????????
	{-436.7209, 1249.8666, 17.3866},  // ?????????
	{1888.2777, 2253.6804, 15.9527},  // ??????
	{-2117.3633, -269.0161, 25.8835}, // ????????
	{-2374.6292, 2617.7007, 39.6368}, // ????????
	{-514.9841, -1594.6741, 40.9649}, // ???????
	{1879.8423, 1330.9150, 10.0102},  // ????????
	{385.3375, -1252.2156, 40.5613}   // ???????????
};
new const gps_vokzals[][E_GPS_STRUCT] = // ???????
{
	{-117.7860, 950.1594, 11.2847},   // ?????? ???????
	{2768.9883, -2418.0916, 20.9745}, // ?????? ?????
	{1806.4391, 2518.9517, 14.8192}   // ?????? ??????
};

new const gps_tk[][E_GPS_STRUCT] = // ???????? ?????????
{
	{2353.5378, 1974.4648, 15.9694},  // ù? ???????
	{-516.1411, -1647.6530, 40.9868}, // ù? ???????
	{-2405.2961, 2708.0486, 37.5497}, // ù? ????????
	{-1057.2089, 2160.0227, 37.1965}, // ù? ??????
	{2316.7854, 1744.0284, -0.0499},  // ù? ?????
	{1739.9163, 2259.9426, 15.0579}   // ù? ????????
};

new const gps_mp[][E_GPS_STRUCT] = // ???????ù??ù
{
	{-34.8391, 615.1650, 12.1475}, // DM-????
	{151.0777, 776.6240, 11.9847}  // ?????
};

new const gps_transport[][E_GPS_STRUCT] = // ???????????? ????
{
	{2382.0808, 1723.0762, -1.8476}, // ?????
	{615.2017, 1669.4125, 12.0710},  // ????????
	{-1044.0151, 2207.8337, 38.1192} // ?????
};

new const gps_state_organizations[][E_GPS_STRUCT] = // ???. ???????????
{
	{-113.2410, 627.7893, 11.8676},   // ????????????? ???????
	{1895.6697, -2212.2500, 10.9975}, // ?????
	{2578.9482, -2416.1196, 21.9922}, // ????
	{1818.4851, 2095.7136, 16.1642},  // ???
	{-286.9034, 576.8859, 12.8447},   // ????????ù ????????
	{2412.2505, -1841.7004, 22.9498}, // ???
	{1731.4894, 1768.2654, 16.7501}   // ???????ù ?????
};

new const gps_gangs[][E_GPS_STRUCT] = // ???? ???
{
	{435.3237, 1046.8125, 12.0026},   // ??????????ù ???
	{1943.9056, 2164.6016, 15.2714},  // ??????????ù ???
	{-2343.5857, 72.3564, 21.0030}    // ???????????ù ???
};

new const gps_quest[][E_GPS_STRUCT] = // ?????? 8 ?????
{
	{1869.5806, 2936.7817, 11.2508},  // ?????
	{1856.5134, 2270.0735, 15.5854},  // ??????? ??????
	{207.7438, 830.0139, 13.3807},    // ???
	{2431.9763, -1712.6957, 23.0137}, // ????
	{-286.7967, 578.5308, 12.8376},   // ??????
	{-315.3805, 410.3977, 13.1093},   // ù???
	{571.3802, 646.5099, 12.2150},    // ????????
	{2309.9827, -1925.7393, 21.9503}, // ?????
	{1857.0389, 2297.0947, 15.2506}   // ??? ù?????
};

new const gps_jobs[][E_GPS_STRUCT] = // ??????
{
	{1836.6302, -116.0337, 15.5716},     // ???ù??? ?????????????
	{2760.5935, -2396.1897, 21.8906},    // ???? ????????
	{2773.8394, -2452.6726, 21.8822},    // ?????? ????????
	{-129.1484, 941.4583, 12.1427},      // ?????? ???????? 2
	{1795.2192, 2530.7998, 15.6720}      // ?????? ???????? 3
};

new const gps_banks[][E_GPS_STRUCT] = // ?????
{
	{1852.0315, 2035.9677, 16.9802},  // ??????????? ???? ????????
	{2376.7163, -2139.2356, 22.0886}, // ????? ?????? ?????
	{1852.0315, 2035.9677, 16.9802}   // ??????: ??????????? ???? ????????
};

// ------------------------------------------
new help_info[14][E_HELP_INFO_STRUCT] =
{
	{
		"? ???????",
		""SERVER_NAME"  - ???? ?? ????? ?????ù???? ????????\n"\
		"????????????????????? GTA Criminal Russia Multiplayer. ? ?????ù???\n"\
		"????ù ? ??? ???????? 9 ????????, ? ????????????? ??????????? ????????\n"\
		"???????? ?????????? ??? ?????? ? ?????? ????? ???????.\n\n"\
		"?? ??????????? ?????????? ?????? ???????? ??????? ???? SA-MP ?\n"\
		"?????? ???ù?? ? ??????????ù??. ?? ??????? ??????? ???????\n"\
		"??????, ??? ???? ??????? ???? ??????????? ??????, ??????????ù\n"\
		"???????? ??????. ????? ??? ????????ù ???????? ? ???? ?? ???????????\n"\
		"? ?????? ????????? ????. ??? ?? ????? ?????? ???ù??? ????????\n"\
		"????ù, ????ù? ??????? ? ??????, ??? ?????? ? ?????ù?? ? ??????? ???.\n\n"\
		"?? ???????, ??? "SERVER_NAME" RolePlay ??????? ??? ???ù??? ???????? ????\n"\
		"????????? ????? ?? ??????-?????!"
	},
	{
		"????????????",
		"??? ??????? - ??? ???? ?????????????. ?????? ?? ??????? ???? ??????,\n"\
		"????? ?? ???????? ???????? ??? ???? ?????????ù. ?? ??????????\n"\
		"?????????????? ????????? - ????, ????, ????????. ??? ???\n"\
		"????????ù ???????????????? ?????? ? ????? ????? - ??????????\n"\
		"?????? ? ?????? ????????.\n\n"\
		"?????? "SERVER_NAME" RolePlay ????? ???????????? ??????????? ?????????\n"\
		"????????????,  ??????? ??????????? ????????? ??????????? ??????.\n"\
		"?????????: ??????? {66CCFF}/menu > ????????? ????????????."
	},
	{
		"?????? ????",
		"????ù ?? ???????, ?? ????????? ???? ?????. ??? ?????????? ??\n"\
		"????????????? ?????????? ?????????? ??????? ?? ????????? ???????.\n"\
		"? ?????? ????? ??????? ??????????ù ????? ??????????? ?\n"\
		"??????ù??ù ???????? ????? ?????????? ???????.\n\n"\
		"??ù ????????? ?????????? ?????????????? ???????? /menu. ? ???????\n"\
		"???????? ?????ù??? ????? ????? ???????????ù ????????? ?????????.\n"\
		"??? ????ù??ù ? ??????? ??? (F6) ????? ????? ?????, ???????? /anim\n"\
		"/help ? ?. ?. ??????? /menu, ????? ???????? ????? \"?????? ??????\". ù??\n"\
		"?????????? ?????? ???????? ??????, ? ????? ?????? \"???????? ??????\"\n"\
		"??ù ??ù?????ù ?????? ?? ???."
	},
	{
		"RolePlay",
		"RolePlay - ??? ????? ??? ????, ? ??????? ? ??????? ???? ???ù ????. ????\n"\
		"?? ???????, ???????? ???????? ??? ??????, ??????????? ??? ???????,\n"\
		"???? ????? ??? ???????. ?????? ????? ???????ù??, ??? ?? ????? ????.\n\n"\
		"RolePlay (RP) ????? ????????????? ?????? ????????? ?????? ?\n"\
		"???ù???, ???????????? ??????? ?????? ?? ????? ????????ù. ? ????\n"\
		"??????????? ????? ???????????ù ?? ????? ??????, ??? ?? ?????\n"\
		"?????? ??? ???????????? ??? ??????? ?? ???????? ????????."
	},
	{
		"?????? ????",
		"?????? ????? ?????????? ?????????? ??????. ? ??????????? ????\n"\
		"???????ù??ù, ???? ?? ??????? ?????????ù ?? ?????? ????ù. ??? ?????,\n"\
		"????? ? ????????? ?????. ??????ù ???, ?? ?? ?????? ???????? ???????,\n"\
		"?? ? ?????????? ????????????? ??????? ???????????. ? ??? ??\n"\
		"??????? ????? ?????? ? ???????? ?????? ???????????ù.\n\n"\
		"??? ??? ????? ????? ?????, ????????ù ??????? /gps. ????????ù ??\n"\
		"??????? ??????? ??? ??????? ??????????  ?????????. ??ù?? ? ??\n"\
		"??????? ????? ??????? ?? ?????, ?  ?? ?????? ????? ?????????? ?????\n"\
		"????????? ???????. ????? ?????? ????????? ? ?????????? ??????,\n"\
		"??????? ??????? /bushelp.\n\n"\
		"????? ????, ??? ?? ??????????? ??????, ???????ù????? ? ????????? ?\n"\
		"???????? ??????? ?? ?????. ??? ??????ù? ?????? ??? ??????????\n"\
		"??????????, ?????????ù ?? ????? ?????????????????? ? ??????????\n"\
		"??????. ????? ?? ????? ????? 600 ??????, ????? ???????? ? ?????????\n"\
		"?????????, ??? ?????? ????? ?????."
	},
	{
		"???????",
		"?? ????ù ???? ??? ?????ù??? ???????ù ????????????????? ? ??????. ?????????? 2\n"\
		"???? ?????:\n\n"\
		"\t1. IC (In Character) - ??????? ?????? ???? ? ?????? ??ù ?????????? ???????\n"\
		"\t????????. ??? ?????????ù ???????? F6.\n"\
		"\t2. OOC (Out Of Character) - ???, ??? ???????ù ?????????, ?? ???????? ????.\n"\
		"\t??????? F6, ????? ??????? ??????? /n ? ???? ?????????. ??? ????????ù ?\n"\
		"\t??????? ??????.\n\n"\
		"?????? ?????, ?????????? ????? ?????? ???????? ??????ù. ?? ?????? ??????? ??\n"\
		"???????? ??? ???????ù?? SMS ????????ù. ??????? ? ???????????, ??ù????ù\n"\
		"??????????? ??ù???????ù ? ???????????? ?? ?????, ? ????? ????? ??????\n"\
		"?????????? ???????.\n\n"\
		"?????????? ? ???????? ??????ù ?????? ?????? ? ??????????????? ??????? ????:\n"\
		"{66CCFF}/menu > ?????? ??????"
	},
	{
		"ù????????",
		"ù??????????ù ??????? - ???? ?? ????????? ? ??????. ? ?? ??????? ????????\n"\
		"?????????ù ?????? ??????????? ???????ù??? ? ???????????.\n\n"\
		"???????? ??? ?????????? - ??? ???????. ???????? ????????? ?? ?????\n"\
		"??????????? ? ??ù?????? ??? ?????????? ?????? ? ???????ù??ù.\n"\
		"ù???? - ???????? ??????? ??? ??????????. ?? ??????? ????????ù ?? ?????? ?????,\n"\
		"?????? ????ù ??????? ????? ?????? ??????????? ??????, ??? ?? ????????.\n"\
		"????? - ??????? ? ????????? ??? ??????????. ?? ?? ????????? ????? ???????\n"\
		"????????ù ?? ????? ???????, ?? ??????? ????????? ?? ??? ?????.\n\n"\
		"??????????????? ???????????? ???????? ?????? ????????ù ????? ?????????. ?\n"\
		"???????ù? ? ?????????ù? ????? ?????? ? ????????? ????? (/gps)."
	},
	{
		"??????????????ù ???????",
		"??ù ??????ù ????? ???????? ??? ????????? ????????????? -\n"\
		"???????? ??????????? ? ???????????. ? ?? ?????? ????ù? ????? ????\n"\
		"??????? ? ????????????ù ??????????. ??? ? ???ù? ??????ù?\n"\
		"??????, ??? ?????? ????? ????? ??????. ? ????? ???? ?????????ù ??\n"\
		"????? ?????????ù ????????????ù ???????ù, ??? ????????? ?? ????\n"\
		"?????????? ?????????? ??????, ???????? ? ???????, ?????????ù\n"\
		"????? ????? ???????????Ö\n\n"\
		"??????????????? ??????? ? ?? ???????? ?? ??????? ???????????\n"\
		"??????????ù??. ???????????ù ????? ?????????? ?????????ù, ? ??\n"\
		"???? ????????? ? ???? ? ?????? ???? ????? ? ???!"
	},
	{
		"?????",
		"?? ????? ??????????? ??????????? ????? ????, ??????? ????? ??????.\n"\
		"?????? ??? ????? ???? ?????????, ??????? ???????ù?? ?????????\n"\
		"????????. ????? ?????? ???????? ?? ????????? ??????, ??? ??????\n"\
		"???????? ?? ????????? ?????ù? ? ??????? ??????.\n\n"\
		"???? ? ??? ???? ???, ?? ?? ??????? ?????????? ??????, ??? ??????\n"\
		"?????????????? ????????ù, ????? ??? ???? ??ù ???????ù ????? ???\n"\
		"?????????????? ?????. ? ??? ?????? ????????? ??????????? ????ù.\n\n"\
		"? ??????????? ?? ???????????? ????, ? ??? ????? ????????ù ?????????ù\n"\
		"??????????. ???? ?????? ????ù ?? ????? ????? ??????ù???ù ?????????????\n"\
		"??????, ???? ????ù??????, ??? ????????? ????? ?????ù? ???."
	},
	{
		"?????? ? ???",
		"?? ?????? ??????? ??????????? ??????, ? ???????????? ????????\n"\
		"??????. ??? ????? ???? ????????ù ??????ù, ??????? ?????? ???\n"\
		"??????????????? ?????, ???????ù, ?????????????ù, ???? ??????ù\n"\
		"??????????ù ?????. ??? ?? ???????? ????? ???????????? ??????? ????\n"\
		"?????????????, ?????????? ??? ???????. ? ????? ?????? ??????????\n"\
		"???????? ?????????? ????????????? ???????ù???.\n\n"\
		"???ù ??????, ????? ???? ????????ù ??????? ??????????? ??ù\n"\
		"??????????ù ????? ????????, ??? ????? ?????ù??? ???????? ????\n"\
		"??????. ?? ??????? ???????????? ????, ???????? ?????????\n"\
		"?????????????? ?????? ???????ù??ù, ???????????? ??????ù ?????? ?\n"\
		"????????????.\n\n"\
		"??? (??????????????? ???????) - ?????? ??? ???????, ?????? ??\n"\
		"???????? ??????????? ????, ??? ?? ??????? ???????ù???. ??ù\n"\
		"?????????? ?????? ??? ????? ?????ù??? ????????? ????????? ??\n"\
		"??????? ???????? ???????. ????????? ????? ??????? ???????\n"\
		"???????ù???? ? ??? ????????????."
	},
	{
		"?????, ???????? ???????",
		"?????? ????? ???????? ???? ???? ? ?????. ?? ???? ????????ù???ù\n"\
		"???????? ? ?????? ??????. ???? ???? ?????????ù ????????, ? ???????? ?\n"\
		"????? ?????????.\n\n"\
		"?????? ?????, ?? ?????? ??????????????ù ???????? ????????????????\n"\
		"??????, ????? ??????? ??????? GPS. ù?? ????? ??????? ?? 8\n"\
		"?????????????? ??????. ?????? ?? ??? ????? ???? ?????, ???????\n"\
		"???????ù ?????? ??? ???????? ?????. ???ù ???, ????? ????? ?????\n"\
		"??????????? ??? ??????, ???? ???? ?? ???????. ????????, ?????\n"\
		"??????? ???? ? ????????? \"???????????????????\", ???????? ?? ????????\n"\
		"????????????????? ??????????? ????? ???, ???????? ????? ?????, ?\n"\
		"????? ?????? ??????????? ?? ???? ?????? ? ????????? ????? ??? ?????\n"\
		"????????.\n\n"\
		"?????????????? ????? ????? ???????????, ????????????? ??????\n"\
		"PIN-?????, ?????ù?? ???????ù ? ????? ????????????? ?????????\n"\
		"??????? ????????."
	},
	{
		"???????????",
		"? ????? ?????? ???????? ??????? ?????????? ???????????. ??? ?????\n"\
		"???? ??? ???????????? (?????????????, ???, ???. ???????, ???.\n"\
		"??????????????ù, ù? ? ?????), ??? ? ?????????????? (????? ? ?????).\n\n"\
		"??? ?????????? ????????????? ?????ù, ?? ?????? ???????? ? ????? ??\n"\
		"???????????. ??????????? ????????? ????? ????????? ? ??????????????\n"\
		"?????????ù ??ù ?????????ù. ????????, ???? ?? ?????? ??????? ? ?????,\n"\
		"?? ??? ???????ù ?????????????????? ???? ?????? ??????? ???????. ?\n"\
		"???? ?? ?????? ???ù ? ???? ????????? ???ù??????, ?? ????? ??????? ?\n"\
		"???????? ??????. ? ?????????????? ?????????ù? ??????? ???????????\n"\
		"??????????? ?? ????ù ?????? ???????????.\n\n"\
		"????? ?????????ù, ??? ????? ???????? ??????????? ?? ?????????\n"\
		"????????, ?????????? ????????ù ????? ???????????. ? ?????? ??????????\n"\
		"????? ????????????ù ???? ???????? ? ?????? ? ????????. ?? ???????\n"\
		"????? ??????, ? ?? ???????? ??????? ???ù?? ???? ?? ???????ù???\n"\
		"??????????. ????? ? ??????????? ?????????? ?????????ù ? ????????????ù!"
	},
	{
		"??????",
		"? ????? ?????? ?????? ???????? ????? ???ù?????, ??? ?? ??????\n"\
		"?????????ù ?? ????? ??????. ??????? ???????? ????????, ??? ?????????\n"\
		"?????? ???????? ??? ?????????? ????????????? ?????ù. ?? ?? ??????\n"\
		"???????????? ???? ??????????? ?? ?????? ? ????? ? ?????ù?? ?\n"\
		"???????????.\n\n"\
		"?????? ???????? ????? ?????????? ? ??????????????. ? ??? ?????ù??ù\n"\
		"?????? ?? ?????, ?????? ? ??????. ù???? ?????? ????? ????????? ?\n"\
		"????????? ? ???????????? ?????? ?????. ??????????? ??????? /gps ??ù\n"\
		"????, ????? ????? ????? ???????????ù ????????? ?????. ?? ????? ??\n"\
		"???????? ????????? ??????????, ??? ? ??? ??????? ??????."
	},
	{
		"??????????ù",
		"???? ? ??? ??ù?????? ????????? ????ù ? ???????, ?? ??????????? ???\n"\
		"???????? ???? ?? ??????????????? ???????ù???. ?????? 3 ????\n"\
		"??????ù??ù ?????, ????????????? ? ??????? ????? ????? ????????.\n"\
		"?????? ??????? ????????????? ??????? ??????? ? ??????, ?? ?????\n"\
		"?????????? ??????????ù!\n\n"\
		"?????? ??????? ?? ??????????, ?????????????? ??????? ????? ?????\n"\
		"??????ù? ??????? ???? ???????ù??ù, ??????????? ? ??????? ?? ??????\n"\
		"?????????, ?? ? ??????? - ?????????? ???????? ?????? ???????.\n\n"\
		"? ?????????? ???? ??? ????? ???????????????? ???????ù??ù ?? ???????\n"\
		"??????? ?? ?????????????? ????????? ? ????? ????."
	}
};
new help_info_items[35 * (sizeof help_info) + 1];
new help_info_CP;

new markerhelp;
new markerhelp1;

// ------------------------------------------

// ------------------------------------------
new g_server_radio[6][E_SERVER_RADIO_STRUCT] =
{
	{
		"Russia Radio",
		"http://rusradio.hostingradio.ru/rusradio128.mp3"
	},
	{
		"Radio Europa Plus",
		"http://ep256.streamr.ru"
	},
	{
		"Radio Hit FM",
		"http://hitfm.hostingradio.ru/hitfm128.mp3"
	},
	{
		"Radio Record",
		"http://online.radiorecord.ru:8101/rr_128"
	},
	{
		"Radio D-FM",
		"http://dfm.hostingradio.ru/dfm128.mp3"
	},
	{
		"Comedy Radio",
		"http://ic7.101.ru:8000/s60"
	}
};
new g_server_radio_items[37 * (sizeof g_server_radio) + 1];

new
	Float: g_jail_positions[4][4] =
{
	{-1106.84,1459.30,1491.52,270.13},
	{-1094.71,1457.54,1491.52,92.14},
	{-1095.34,1449.73,1491.52,86.83,},
	{-1107.41,1451.58,1491.52,268.07}
}; // 23.4808, 280.7559, 12.0264, 69.2843 - ??????ù ?????? 

new Float:g_fjail_positions[4][5] =
{
	{-1700.73, -2702.34, 1499.54, 268.81, 2},
	{-1700.73, -2702.34, 1499.54, 268.81, 3},
	{-1700.73, -2702.34, 1499.54, 268.81, 4},
	{-1700.73, -2702.34, 1499.54, 268.81, 5}
};

new Float:g_karcer_positions[3][5] =
{
	{-2400.15,-2399.37,1499.46,179.20, 5},
	{-2400.15,-2399.37,1499.46,179.20, 6},
	{-2400.15,-2399.37,1499.46,179.20, 7}
};

// ------------------------------------------
new anim_list[65][E_ANIM_LIST_STRUCT] =
{	
	{"??????? ??ù????",					"PED",				"WALK_DRUNK",			4.0, true,  1, 1, 1, 0},
	{"??????????ù",						"ped",				"endchat_03",			4.0, true,  1, 1, 1, 0},
	{"?????? ???",						"benchpress",		"gym_bp_celebrate",		4.0, true,  0, 1, 1, 0},
	{"???????ù",						"ped",				"cower", 				3.0, true,  0, 0, 0, 0},
	{"????????? ?????",					"BOMBER",			"BOM_Plant",			4.0, false, 0, 0, 0, 0},
	{"?????? ?????",					"SHOP",				"ROB_Shifty",			4.0, false, 0, 0, 0, 0},
	{"???ù???? ???? ????? ?????",		"SHOP",				"ROB_Loop_Threat",		4.0, true,  0, 0, 0, 0},
	{"??????? ???? ??????",				"COP_AMBIENT",		"Coplook_loop",			4.0, true,  0, 1, 1, 0},
	{"???? ???-?? ?? ??...",			"FOOD",				"EAT_Vomit_P", 			3.0, false, 0, 0, 0, 0},
	{"??????????",						"FOOD",				"EAT_Burger", 			3.0, false, 0, 0, 0, 0},
	{"???????? ????-?? ?? ???????",		"SWEET",			"sweet_ass_slap",		4.0, false, 0, 0, 0, 0},
	{"?????????? ?????????",			"DEALER",			"DEALER_DEAL",			4.0, false, 0, 0, 0, 0},
	{"?????? ?????????????",			"CRACK",			"crckdeth2",			4.0, true,  0, 0, 0, 0},
	{"??????? ???????",					"SMOKING",			"M_smklean_loop",		4.0, true,  0, 0, 0, 0},
	{"??????? ???????",					"SMOKING",			"F_smklean_loop",		4.0, true,  0, 0, 0, 0},
	{"????????",						"BEACH",			"ParkSit_M_loop",		4.0, true,  0, 0, 0, 0},
	{"????????? ????????????",			"PARK",				"Tai_Chi_Loop",			4.0, true,  0, 0, 0, 0},
	{"?????? ???????",					"BAR",				"dnk_stndF_loop",		4.0, true,  0, 0, 0, 0},
	{"??????????? ?????",				"BLOWJOBZ",			"BJ_COUCH_LOOP_P",		4.0, true,  0, 0, 0, 0},
	{"???? ??????ù",					"BSKTBALL",			"BBALL_def_loop",		4.0, true,  0, 0, 0, 0},
	{"Facepalm",						"MISC",				"plyr_shkhead",			4.0, false, 0, 0, 0, 0},
	{"??????? ?????????? ?????",		"BSKTBALL",			"BBALL_idle",			4.0, true,  0, 0, 0, 0},
	{"??????? ????-??",					"CAMERA",			"camstnd_cmon",			4.0, true,  0, 0, 0, 0},
	{"???? ?????!",						"PED",				"HANDSUP",				4.0, 2, 1, 0, 1, 0},
	{"????? ?? ????",					"CRACK",			"crckidle2",			4.0, true,  0, 0, 0, 0},
	{"????? ?? ?????",					"CRACK",			"crckidle4",			4.0, true,  0, 0, 0, 0},
	{"???????? ?? ????????",			"DEALER",			"DEALER_IDLE",			4.0, true,  0, 0, 0, 0},
	{"???????????ù ?? ???",				"GANGS",			"leanIDLE",				4.0, true,  0, 0, 0, 0},
	{"ù??????? ?????",					"GANGS",			"shake_carSH",			4.0, false, 0, 0, 0, 0},
	{"????????",						"GANGS",			"smkcig_prtl",			4.0, false, 0, 0, 0, 0},
	{"????, ?????????? ?? ??????",		"BEACH",			"ParkSit_W_loop",		4.0, true,  0, 0, 0, 0},
	{"????? ?? ????",					"INT_HOUSE",		"LOU_Loop",				4.0, true,  0, 0, 0, 0},
	{"?????? ???????? ?? ???????????",	"INT_OFFICE",		"OFF_Sit_Bored_Loop",	4.0, true,  0, 0, 0, 0},
	{"?????? ?? ??????",				"INT_OFFICE",		"OFF_Sit_Idle_Loop",	4.0, true,  0, 0, 0, 0},
	{"?????? ? ????????",				"INT_OFFICE",		"OFF_Sit_Type_Loop",	4.0, true,  0, 0, 0, 0},
	{"??ù?? ???-?? ? ???????????",		"INT_SHOP",			"shop_shelf",			4.0, false, 0, 0, 0, 0},
	{"?????, ??????? ???? ?? ????",		"JST_BUISNESS",		"girl_02",				4.0, true,  0, 0, 0, 0},
	{"?????????ù ?? ????-????",			"KISSING",			"GF_StreetArgue_02",	4.0, false, 0, 0, 0, 0},
	{"??????? 1",						"KISSING",			"Grlfrd_Kiss_01",		4.0, false, 0, 0, 0, 0},
	{"??????? 2",						"KISSING",			"Grlfrd_Kiss_02",		4.0, false, 0, 0, 0, 0},
	{"??????? 3",						"KISSING",			"Grlfrd_Kiss_03",		4.0, false, 0, 0, 0, 0},
	{"??????????? ?????? ?? ?????",		"LOWRIDER",			"RAP_B_Loop",			4.0, true,  0, 0, 0, 0},
	{"???????????? ???????",			"MEDIC",			"CPR",					4.0, false, 0, 0, 0, 0},
	{"???????? ??ù ????????",			"MISC",				"bitchslap",			4.0, true,  0, 0, 0, 0},
	{"?????ù?????? ????? ???-??",		"MISC",				"bng_wndw",				4.0, false, 0, 0, 0, 0},
	{"???????ù ?????????",				"MISC",				"KAT_Throw_K",			4.0, false, 0, 0, 0, 0},
	{"????? ?? ???? (2)",				"MISC",				"SEAT_LR",				4.0, true,  0, 0, 0, 0},
	{"????? ?? ???? (3)",				"ped",				"SEAT_idle",			4.0, true,  0, 0, 0, 0},
	{"???????? ??????",					"ON_LOOKERS",		"lkup_loop",			4.0, true,  0, 0, 0, 0},
	{"??????? ????? ??????",			"ON_LOOKERS",		"Pointup_loop",			4.0, true,  0, 0, 0, 0},
	{"???? ? ??????",					"ON_LOOKERS",		"panic_loop",			4.0, true,  0, 0, 0, 0},
	{"????????? ? ????-????",			"ON_LOOKERS",		"shout_02",				4.0, true,  0, 0, 0, 0},
	{"??????? ??-??????????",			"PAULNMAC",			"Piss_loop",			4.0, true,  0, 0, 0, 0},
	{"???????????? ????",				"GHANDS",			"gsign1LH", 			3.0, true,  0, 0, 0, 0},
	{"?????????? ?? ?????????",			"ped",				"IDLE_taxi", 			3.0, true,  0, 0, 0, 0},
	{"???? ?????",						"POLICE",			"Door_Kick",			4.0, false, 0, 0, 0, 0},
	{"????????ù ? ?????",				"POLICE",			"CopTraf_Stop",			4.0, true,  0, 0, 0, 0},
	{"???????? ????",					"RIOT",				"RIOT_ANGRY_B",			4.0, true,  0, 0, 0, 0},
	{"??????????????",					"RAPPING",			"RAP_C_Loop",			4.0, true,  0, 0, 0, 0},
	{"???? ?? ????? (2)",				"SWAT",				"gnstwall_injurd",		4.0, true,  0, 0, 0, 0},
	{"?????? ????????????",				"SWEET",			"Sweet_injuredloop",	4.0, true,  0, 0, 0, 0},
	{"??????????? 1",					"RIOT",				"RIOT_ANGRY",			4.0, false, 0, 0, 0, 0},
	{"??????????? 2",					"GHANDS",			"gsign2",				4.0, false, 0, 0, 0, 0},
	{"??????????? 3",					"GHANDS",			"gsign5",				4.0, false, 0, 0, 0, 0},
	{"??????????? 4",					"GHANDS",			"gsign4",				4.0, false, 0, 0, 0, 0}
};
new anim_list_items[34 * (sizeof(anim_list)+1) + 1];
new
	g_anim_libs[38][13] =
{
	"BAR",
	"BASEBALL",
	"BEACH",
	"BENCHPRESS",
	"BLOWJOBZ",
	"BOMBER",
	"BSKTBALL",
	"CAMERA",
	"CARRY",
	"COP_AMBIENT",
	"CRACK",
	"CRIB",
	"DANCING",
	"DEALER",
	"FOOD",
	"GANGS",
	"GHANDS",
	"GRAVEYARD",
	"INT_HOUSE",
	"INT_OFFICE",
	"INT_SHOP",
	"JST_BUISNESS",
	"KISSING",
	"LOWRIDER",
	"MEDIC",
	"MISC",
	"ON_LOOKERS",
	"OTB",
	"PARK",
	"PAULNMAC",
	"PED",
	"POLICE",
	"RAPPING",
	"RIOT",
	"SHOP",
	"SMOKING",
	"SWAT",
	"SWEET"
};

// ------------------------------------------
new map_icons[31][E_MAP_ICONS_STRUCT] = //??? ?????? / map ??????
{
	{1912.0990, 2227.6367, 16.0831, 36}, // gps ?????????
	{1916.5503,2302.2786,15.1412, 	46}, // gps ?????????
	{1757.3501, 2242.5107, 15.8600, 55}, // ????????? "????????"
	{2503.4800, -653.8940, 12.2938, 55}, // ????????? "??????"
	{-1511.0200, 1608.1721, 36.7735,55}, // ????????? "???????"
	{-2243.6758, 263.2350, 24.5337, 55}, // ????-???? ?????
	{761.0068,667.9042,12.0074, 	42}, // gps ?/? ?????? ????????
	{1867.8488,2265.0942,15.2740, 	42}, // gps ?????????? ????????
	{-2491.2036,2839.9934,37.6357, 	42}, // gps ??????????ù ??????????ù
	{-251.8752,444.5735,12.8608, 	42}, // gps ?????????? ????????
	{-2395.7615,193.9361,21.1678, 	42}, // gps ?????????? ?????????
	{-113.2410,627.7893,11.8676, 	19}, // gps ????????????? ???????
	{1895.6697,-2212.2500,10.9975, 	30}, // gps ?????
	{2576.0847,-2416.1118,22.4946, 	30}, // gps ????
	{1818.4851,2095.7136,16.1642, 	30}, // gps ???
	{-286.9034, 576.8859, 12.8447, 	22}, // gps ????????ù ????????
	{-317.8738,816.2292,13.0515, 	42}, // gps ù?? "????"
	{1731.4894,1768.2654,16.7501, 	18},  // gps ???????ù ?????
	{623.3203, 1665.7656, 12.0710, 	11},	// ???????
	{1852.0315,2035.9677,16.9802, 	52}, // gps ??????????? ???? ????????
	{406.4704,1940.9047,8.1792, 	52},
	{617.3452,1665.7614,12.0710, 	11}, // gps ???????
	{2296.8718, 1757.0005, 1.0234, 	11}, // gps ??????
	{2268.8354,506.1029,16.7323, 11}, // gps ???????
	{-1060.9310, 2208.5684, 38.0988, 11}, // gps ?????
//	{2710.3369,-2383.5164,17.9063,	51}, // gps ??????????????? ?????
	{2738.3379,-2273.0725,17.9063, 	51}, // gps ????????????????????? ?????
	{2424.5317,1765.6780,-0.2507, 	51},
//	{-1060.9310, 2208.5684, 38.0988, 	51},
	//{583.8480,1732.2230,12.4207, 	40}, // gps ???????? ??ù ??????????? (??????????????) ?????????
	//{583.8480,1732.2230,12.4207, 	40}, // gps ???????? ??ù ??????????? (??????????????) ???????
	{1836.6302,-116.0337,15.5716, 	40},  // gps ???ù??? ?????????????
	{481.8158,742.3323,12.0006, 	62}, // ??????????ù ???
	{1943.9056,2164.6016,15.2714, 	61}, // gps ??????????ù ???
	{-2379.8054,198.8082,20.7308, 	60}  // gps ???????????ù ???
};

// ------------------------------------------
stock PlayerText:CreatePlayerTextDrawBeta(playerid, Float:x, Float:y, text[])
{
	x = x-225.0;

    return CreatePlayerTextDraw(playerid, x, y, text);
}
new g_teleport[94][E_TELEPORT_STRUCT] =
{
	{"?????\n{33CC00}???????????????? ???", -1060.9310, 2208.5684, 38.0988, 0, 18.2589,-7.7952,1380.9985, 90.0, 1, 1, T_ACTION_TYPE_BLOCK_LEAVE_AREA},
	{"", 21.0981,-7.3687,1380.9985, 1, -1060.7987,2203.4385,38.0989, 180.0, 0, 0},
	// -------------------------------------------------------------------------------
	{"?????????", 1919.4528,2304.0503,15.5746, 0, 498.0520,1492.1211,1501.0000, 358.9150, 1, 8},
	{"?????", 498.1315,1490.2589,1501.0000, 8, 1916.7314,2302.4727,15.5746,120.4222, 0, 0},
	//====================================
	{"???\n?????-?????", 2412.374755,-1841.697265,22.949813, 0, 1999.8596,-0.0805,1381.0035,88.6506, 1, 1},
	{"?????", 2002.2726,0.2222,1381.0035, 1, 2412.379882,-1844.079956,21.960956,179.265106, 0, 0},
	//*********************************
	{"?????????", -2561.979980,40.261657,27.879764, 0, -603.121826,-308.211212,798.981994,266.986022, 1, 1},
	{"?????", -605.49,-308.52,798.98, 1, -2561.733398,37.204780,27.866283,180.017257, 0, 0},
	//-------------------------------------
	{"????????????? ???????", -2576.52, 2248.34, 58.66, 0, -897.177124,-1562.787597,1398.778808,179.593124, 1, 1},
	{"?????", -899.061767, -1558.579101, 1398.778808, 1, -2574.40, 2248.39, 58.66, 272.72, 0, 0, 0, 0},
	{"?????", -894.317260, -1558.577636, 1398.778808, 1, -2574.40, 2248.39, 58.66, 272.72, 0, 0, 0, 0},
	// -------------------------------------------------------------------------------
	{"????????ù ????????", -287.528564,569.952270,12.807999, 0, 1501.540039,2488.010986,2501.000000, 90.0, 1, 1},
	{"?????", 1501.510620,2487.304687,2501.000000, 1, -287.27, 571.97, 12.84, 352.87, 0, 0, T_ACTION_TYPE_LEAVE_HOSPITAL},
	// -------------------------------------------------------------------------------
	{"????", 395.446350,762.707275,12.630935, 0, 2889.636474,2485.717773,1051.004760,3.257623, 1, 5}, // ???? ? ??????????? ???? ????????
	{"?????", 2893.051269,2481.399902,1051.004760, 5, 394.693603,760.181091,12.624366,126.185203, 0, 0}, // ????? ?? ??????????? ???? ????????
	{"?????", 2886.979248,2481.403076,1051.004760, 5, 394.693603,760.181091,12.624366,126.185203, 0, 0}, // ????? ?? ??????????? ???? ????????
	//
	{"????", 1851.922729,2037.299438,16.518316, 0, 2889.636474,2485.717773,1051.004760,3.257623, 1, 1}, // ???? ? ???? ????????
	{"?????", 2893.051269,2481.399902,1051.004760, 1, 1852.051269,2039.586425,16.511747, 0, 0}, // ????? ?? ????? ????????
	{"?????", 2886.979248,2481.403076,1051.004760, 1, 1852.051269,2039.586425,16.511747, 0, 0}, // ????? ?? ????? ????????
	// -------------------------------------------------------------------------------
	{"?????", 2378.828369,1677.696655,15.248530, 0, 522.987304,517.629821,1000.336730, 180.6500, 1, 0}, // ???? ? ?????
	{"", 519.045959,517.649047,1000.347412, 0, 2378.930664,1675.177856,15.254065, 0, 0}, // ????? ?? ?????
	// -------------------------------------------------------------------------------
	{"??????\n?????", 1907.3573,-2229.1538,12.1824, 0, -1111.023315,1522.757324,1499.945922, 90.0, 1, 1}, // ???? ?????
    {"?????", -1111.010864,1525.703735,1499.945922, 1, 1907.8326,-2231.9600,11.5150, 75.8276, 0, 0}, // ????? ?????
	// -------------------------------------------------------------------------------
	{"??????\n????", 2576.0847,-2416.1118,22.4946, 0, -1111.023315,1522.757324,1499.945922, 90.0, 1, 2}, // ???? ????
    {"?????", -1111.010864,1525.703735,1499.945922, 2, 2580.003662,-2415.737060,21.956363, 0, 0}, // ????? ????
	// -------------------------------------------------------------------------------
	{"??????????ù\n?????? ????????????", -2400.414306,-394.220458,30.582771, 0, 2892.143310,1989.651367,2050.988525,350.718353,1,1},
	{"?????", 2892.269287,1987.358642,2050.988525, 1, -2400.414306,-394.220458,30.582771, 0, 0},
	// -------------------------------------------------------------------------------
	{"??????????? ???", 415.675506,1049.060058,12.012184, 0, -2.445545,486.663726,1381.002197, 90.0, 1, 1}, // ???? ??? ???
	{"?????", -2.405641,483.553100,1381.002197, 1, 410.804809,1049.578369,12.039920,79.722656, 0, 0}, // ????? ??? ???
	//--------------------------------------------------------------------------------
	{"??????????? ???", 1937.373046,2160.891357,15.659812, 0, -2.445545,486.663726,1381.002197, 90.0, 1, 2}, // ???? ??? ??ù
	{"?????", -2.405641,483.553100,1381.002197, 2, 1942.156372,2161.284179,15.705187,270.503204, 0, 0}, // ????? ??? ??ù
	//--------------------------------------------------------------------------------
	{"???????????? ???", -2396.364013,58.059032,27.178485, 0, -2.445545,486.663726,1381.002197, 90.0, 1, 3}, // ???? ??? ??ù
	{"?????", -2.405641,483.553100,1381.002197, 3, -2400.950439,58.223949,26.563339,83.084442, 0, 0}, // ????? ??? ??ù
	// -------------------------------------------------------------------------------
	{"???????ù ?????", 1681.677246,1779.731811,16.400110, 0, 1793.820800,1741.199951,1493.047119,180.904403, 1, 1}, // ????ù ????
	{"?????", 1793.610839,1744.554321,1493.047119, 1, 1681.613281,1773.994018,16.259756,178.145324, 0, 0},  // ????ù
	// -------------------------------------------------------------------------------
    {" ", -916.038757,1187.975952,10.684749, 0, -587.358764,2310.932128,1501.000000,183.19132, 1, 0}, // ????????? ????
	{"?????", -587.705993,2313.558593,1501.000000, 0, -913.705566,1186.226684,10.684749,231.383682, 0, 0}, // ????????? ?????
	// -------------------------------------------------------------------------------
	{"???? ? ???", 2571.23,-2426.95,25.00, 0, -1101.02,1460.00,1491.52,178.64, 1, 2, T_ACTION_TYPE_KPZVHOD}, // ???? ? ??? ???
	{"?????", -1100.96,1461.83,1491.52, 2, 2569.10,-2427.20,25.00,96.17, 0, 0, T_ACTION_TYPE_KPZVHOD}, // ?????
	// -------------------------------------------------------------------------------
	{"????? ?? ????????", 2925.97,1999.94,2051.02, 1, -2357.64,-411.25,29.43,269.58, 0, 0}, // ????? ? ???????? ???
	{"???? ? ??????", -2359.46,-411.37,29.43, 0, 2923.56,1999.93,2051.02,87.51, 1, 1}, // ???? ? ??? ? ????????
	// -------------------------------------------------------------------------------
	{"", 1898.28,1727.85,16.58, 0, 1886.70,1727.51,16.29, 88.81, 0, 0, T_ACTION_TYPE_ARMYVHOD}, // ????ù ??? ????
	{"", 1888.98,1727.50,16.58, 0, 1901.92,1727.77,16.26,269.96, 0, 0, T_ACTION_TYPE_ARMYVHOD}, // ?????
	// -------------------------------------------------------------------------------
	{"????", 2376.63,-2139.30,22.12, 0, 2889.636474,2485.717773,1051.004760,3.257623, 1, 7}, // ???? ? ???? ?????
	{"?????", 2893.051269,2481.399902,1051.004760, 7, 2376.61,-2141.76,22.00, 0, 0}, // ????? ?? ????? ??????
	{"?????", 2886.979248,2481.403076,1051.004760, 7, 2376.61,-2141.76,22.00, 0, 0}, // ????? ?? ????? ??????
	// -------------------------------------------------------------------------------
	{"????", -2326.64,-29.07,27.41, 0, 2889.636474,2485.717773,1051.004760,3.257623, 1, 10}, // ???? ? ???? ?????????
	{"?????", 2893.051269,2481.399902,1051.004760, 10, -2326.82,-26.51,27.41, 0, 0}, // ????? ?? ????? ?????????
	{"?????", 2886.979248,2481.403076,1051.004760, 10, -2326.82,-26.51,27.41, 0, 0}, // ????? ?? ????? ?????????
	// -------------------------------------------------------------------------------
	{"????", -2112.31,2169.79,58.72, 0, -2112.31,2169.79,58.72, 1, 11}, // ???? ? ???? ????
	{"?????", 2893.051269,2481.399902,1051.004760, 11, -2112.63,2167.39,58.72, 0, 0}, // ????? ?? ????? ????
	{"?????", 2886.979248,2481.403076,1051.004760, 11, -2112.63,2167.39,58.72, 0, 0}, // ????? ?? ????? ????
	// -------------------------------------------------------------------------------
	{"????????? ??????", 1465.64,1729.56,17.29, 0, 492.64,1003.56,1442.05,223.340, 1, 1}, // ????????? ?????? ????
	{"?????", 490.83,1005.56,1442.17, 1, 1466.46,1727.17,17.29,212.51, 0, 0}, // ????????? ?????? ?????
	// -------------------------------------------------------------------------------
	{"ù??????? ??????", -1747.65,-2835.63,8.03, 0, -1799.89,-2764.60,1501.04,356.34, 1, 1}, // ???? ?????? ????
	{"?????", -1799.97,-2766.85,1501.04, 1, -1745.96,-2833.56,7.61,319.37, 0, 0}, // ???? ?????? ?????
	// -------------------------------------------------------------------------------
	{"???? ? ???????", -1714.68,-2835.19,8.03, 0, -2003.36,-1504.86,1751.04,1.25, 1, 1}, // ???? ??????? ????
	{"?????", -2003.557861,-1506.610107,1751.005249, 1, -1715.97,-2834.22,7.62,48.31, 0, 0}, // ???? ??????? ?????
	// -------------------------------------------------------------------------------
	{"???? ? ??????????", -1699.78,-2724.23,8.02, 0, -1887.82,-2607.64,1501.04,358.14, 1, 1}, // ???? ???? ????
	{"?????", -1887.860717,-2609.774902,1501.233764, 1, -1700.66,-2725.26,7.61,143.25, 0, 0}, // ???? ???? ?????
	// -------------------------------------------------------------------------------
	{"???? ? ????????", -1673.10,-2767.66,8.04, 0, -2197.22,-1203.85,1501.04,359.81, 1, 1}, // ???? ???????ù ????
	{"?????", -2197.20,-1204.85,1501.04, 1, -1674.65,-2769.48,7.62,146.03, 0, 0}, // ???? ???????ù ?????
	// -------------------------------------------------------------------------------
	{"?????", -1697.535400,-2702.098876,1499.500000, 2, -1799.23,-2759.45,1501.04,89.93, 1, 1}, // ?????? 1
	{"?????", -1697.535400,-2702.098876,1499.500000, 3, -1801.26,-2757.96,1501.04,265.51, 1, 1}, // 2
	{"?????", -1697.535400,-2702.098876,1499.500000, 4, -1799.32,-2750.98,1501.04,89.45, 1, 1}, // 3
	{"?????", -1697.535400,-2702.098876,1499.500000, 5, -1800.40,-2749.32,1501.04,279.86, 1, 1}, // 4
	{"?????", -1697.535400,-2702.098876,1499.500000, 6, -1799.93,-2742.23,1501.04,95.03, 1, 1}, // 5
	{"?????", -2399.98,-2402.32,1499.46, 98, -1814.69,-2735.42,1501.04,268.37, 1, 1, T_ACTION_TYPE_FSINVHOD}, // ????? ?????? 1
	{"?????", -2399.98,-2402.32,1499.46, 99, -1807.69,-2734.67,1501.04,177.45, 1, 1, T_ACTION_TYPE_FSINVHOD}, // ????? ?????? 2
	{"?????", -2399.98,-2402.32,1499.46, 100, -1799.12,-2734.27,1501.04,177.16, 1, 1, T_ACTION_TYPE_FSINVHOD}, // ????? ?????? 3
	{"{FFFF00}???? ? ??? ?2\n\n{FFFFFF}???????? ?? ?????\n??ù ?????", -1777.63,-2701.12,7.77, 0, -1767.72,-2707.04,7.74,225.98, 0, 0, T_ACTION_TYPE_FSINVHOD}, // ???? ??? 2
	{"{FFFF00}???? ? ??? ?2\n\n{FFFFFF}???????? ?? ?????\n??ù ?????", -1769.02,-2705.99,7.74, 0, -1778.95,-2699.98,7.77,48.31, 0, 0, T_ACTION_TYPE_FSINVHOD}, // ????? ??? 2
	{"{FFFF00}<< ????? ???? ? ??????\n??ù ???????? >>\n\n{FFFFFF}???????? ?? ?????\n??ù ????? ? ?????????", -1758.36,-2668.70,7.75, 0, -2015.94,-1799.98,1501.18,88.52, 1, 1, T_ACTION_TYPE_GROOMROOM}, // ???? ???????ù 1
	{"?????", -2014.02,-1800.00,1501.34, 1, -1759.55,-2667.86,7.75,51.16, 0, 0, T_ACTION_TYPE_GROOMROOM}, // ????? ???????ù 1
	{"{FFFF00}<< ???? ? ??????\n??ù ???????? >>\n\n{FFFFFF}???????? ?? ?????\n??ù ????? ? ?????????", -1746.31,-2678.26,7.75, 0, -2025.24,-1799.94,1501.18,269.78, 1, 1, T_ACTION_TYPE_FSINANDZEK}, // ????? ???????ù 2
	{"?????", -2027.17,-1799.95,1501.20, 1, -1745.23,-2679.11,7.75,231.01, 0, 0, T_ACTION_TYPE_FSINANDZEK}, // ????? ???????ù 2
	// -------------------------------------------------------------------------------
	{"", -2019.02, -1790.33, 1501.18, 1, -1996.37,-1819.97,1501.18,268.30, 1, 2, T_ACTION_TYPE_FSINSVIDANIE1},
    {"", -2022.37, -1790.36, 1501.18, 1, -1996.37,-1819.97,1501.18,268.30, 1, 3, T_ACTION_TYPE_FSINSVIDANIE2},
    {"", -2019.02, -1793.88, 1501.18, 1, -1996.37,-1819.97,1501.18,268.30, 1, 4, T_ACTION_TYPE_FSINSVIDANIE3},
    {"", -2022.37, -1793.92, 1501.18, 1, -1996.37,-1819.97,1501.18,268.30, 1, 5, T_ACTION_TYPE_FSINSVIDANIE4},
    {"", -2019.02, -1806.09, 1501.18, 1, -1996.37,-1819.97,1501.18,268.30, 1, 6, T_ACTION_TYPE_FSINSVIDANIE5},
    {"", -2022.37, -1806.13, 1501.18, 1, -1996.37,-1819.97,1501.18,268.30, 1, 7, T_ACTION_TYPE_FSINSVIDANIE6},
    {"", -2019.02, -1809.62, 1501.18, 1, -1996.37,-1819.97,1501.18,268.30, 1, 8, T_ACTION_TYPE_FSINSVIDANIE7},
    {"", -2022.37, -1809.64, 1501.18, 1, -1996.37,-1819.97,1501.18,268.30, 1, 9, T_ACTION_TYPE_FSINSVIDANIE8},
    {"????? ? ??????? 1", -1997.42, -1819.94, 1501.18, 2, -2020.64,-1790.32,1501.18,87.76, 1, 1, T_ACTION_TYPE_FSINVHOD},
    {"????? ? ??????? 2", -1997.42, -1819.94, 1501.18, 3, -2020.64,-1790.32,1501.18,268.70, 1, 1, T_ACTION_TYPE_FSINVHOD},
    {"????? ? ??????? 3", -1997.42, -1819.94, 1501.18, 4, -2020.59,-1793.88,1501.18,88.83, 1, 1, T_ACTION_TYPE_FSINVHOD},
    {"????? ? ??????? 4", -1997.42, -1819.94, 1501.18, 5, -2020.59,-1793.88,1501.18,268.97, 1, 1, T_ACTION_TYPE_FSINVHOD},
    {"????? ? ??????? 5", -1997.42, -1819.94, 1501.18, 6, -2020.71,-1806.10,1501.18,89.24, 1, 1, T_ACTION_TYPE_FSINVHOD},
    {"????? ? ??????? 6", -1997.42, -1819.94, 1501.18, 7, -2020.71,-1806.10,1501.18,269.80, 1, 1, T_ACTION_TYPE_FSINVHOD},
    {"????? ? ??????? 7", -1997.42, -1819.94, 1501.18, 8, -2020.74,-1809.68,1501.18,88.83, 1, 1, T_ACTION_TYPE_FSINVHOD},
    {"????? ? ??????? 8", -1997.42, -1819.94, 1501.18, 9, -2020.74,-1809.68,1501.18,269.71, 1, 1, T_ACTION_TYPE_FSINVHOD}, 
	// -------------------------------------------------------------------------------
	{"{FFFF00}???? ? ??? ?1\n\n{FFFFFF}???????? ?? ?????\n??ù ?????", -1803.23,-2647.76,7.77, 0, -1800.95,-2662.40,7.76,186.21, 0, 0, T_ACTION_TYPE_FSINVHOD},
	{"{FFFF00}???? ? ??? ?1\n\n{FFFFFF}???????? ?? ?????\n??ù ?????", -1801.07,-2660.77,7.76, 0, -1803.50,-2646.16,7.77,11.97, 0, 0, T_ACTION_TYPE_FSINVHOD} 
};
//new g_teleport_object[MAX_PLAYERS][2];

// ------------------------------------------
new g_teleport_names[][] = {
	"?????????????",
	"?????????",
	"???????",
	"?????????",
	"????? ?????",
	"????",
	"??????? ??????",
	"????????ù ???????? ?. ???????",
	"????????ù ???????? ?. ??????.",
	"?????????????? ?????",
	"????????? ??????? ??????",
	"????????? ???????? ??????",
	"????????? ???????? ??????",
	"????????? Harley Davidson",
	"ù? ???",
	"????? ??????? ?1 (?????)",
	"????? ??????? ?2 (????)",
	"????? ???",
	"???",
	"??? ?????",
	"????",
	"????????",
	"?????????",
	"??????",
	"????? ?? ??????????",
	"??????????ù ???",
	"??????????ù ???",
	"???????????ù ???"
};

enum E_TELEPORT_LIST {
	Float:TL_POS_X,
	Float:TL_POS_Y,
	Float:TL_POS_Z
};

new Float:g_teleport_list[][E_TELEPORT_LIST] = {
	{-2568.37, 2248.35, 58.18},
	{-2560.66, 34.60, 27.91},
	{2085.275390, -2283.675781, 21.742187},
	{1916.731445, 2302.472656, 15.683650},
	{-35.645275, 1359.856933, 12.002090},
	{-2351.67, 1582.62, 9.89},
	{1937.544067, 2086.936035, 15.678567},
	{-286.281311, 575.960266, 12.077640},
	{-2333.936279, -173.047851, 26.805118},
	{2381.891113, -1902.428222, 21.921875},
	{2476.73, -723.91, 12.37},
	{1407.7449, 455.4801, 13.1630},
	{655.87, 2660.43, 13.51},
	{-912.14, 1184.83, 10.72},
	{2327.63, 2018.29, 15.91},
	{1906.805786, -2234.382812, 11.257631},
	{2581.309326, -2416.139892, 21.960090},
	{-2400.38, -379.95, 29.39},
	{2412.48, -1846.11, 21.85},
	{1917.25, 1722.52, 16.06},
	{-1815.31, -2620.63, 7.73},
	{-837.7783, 888.6161, 12.7232},
	{-2721.04, -529.37, 8.46},
	{1332.4252, 2358.7014, 17.6641},
	{-1752.03, 2094.28, 9.55},
	{410.81, 1049.86, 12.07},
	{1941.203857, 2161.006591, 15.705187},
	{-2403.68, 58.01, 26.64}
};

// ------------------------------------------
new driving_tutorial[4][E_DRIVING_TUTORIAL_STRUCT] =
{
	{
		"?????????? ????????? ?????????ù",
		"{669900}???? ???????? ???????? ?????? ?????????ù ??????????? ? ?? ????????:\n\n"\
		"{3399FF}????? Ctrl\t{FFFFFF}??????? ??? ????????? ?????????\n"\
		"{3399FF}????? Alt\t{FFFFFF}???????? ??? ????????? ????\n"\
		"{3399FF}?????? Ctrl\t{FFFFFF}??????? ??? ??????? ?????? {9966FF}(?????? ??ù ???????? ??????)\n"\
		"{3399FF}Num 4\t\t{FFFFFF}???????? ??? ????????? ???????????? ????????\n"\
		"{3399FF}Num 8\t\t{FFFFFF}?????????? ??????? ? ?????????? {9966FF}(???? ??? ??????ù ? ?????? ??????)\n"\
		"{3399FF}Num 2\t\t{FFFFFF}????????? ????????? {9966FF}(????????? ? ????????? ????????)\n\n"\
		"{FFFF00}???????????? ????????? ?????????ù ?????? ?????????ù\n"\
		"????? ?????? ?????? ??????? \"?????\""
	},
	{
		"?????? ???????????",
		"{FFFFFF}?????? ??????????? ??ù??ù???ù ? ?????? ?????? ???? ?????? ??? ?????? ?? ???????? ? ????? ?????????\n"\
		"??? ??????????? ???????ù ? ??? ??????? ?????ù???. ????, ?????????? ???????? ???????? ???? ??????:\n\n"\
		"\t{3366FF}25 km/h  {00CCFF}Fuel: 45  {006699}1000\n"\
		"\t{00CC00}Open  {FF3300}max  {FFFFFF}E {009933}S   M {FFFFFF}L B\n\n"\
		"{FFFF00}?? ?????? ??????? ?????? ?????ù??ù ???????? ??????????:\n"\
		"{3366FF}25 km/h\t{FFFFFF}?????????? ??????? ???????? ??????????\n"\
		"{00CCFF}Fuel: 45\t{FFFFFF}?????????? ?????????? ??????? ? ????\n"\
		"{006699}1000\t\t{FFFFFF}?????????? \"????????\" ??????????. ???? ? ???? ??? ???????????, ?? ??? ????? ????? 1000\n\n"\
		"{FFFF00}?? ?????? ??????? ?????ù??ù ???????? ??????????:\n"\
		"{00CC00}Open\t\t{FFFFFF}(??? {FF3300}Close{FFFFFF}) ?????????? ?????? ??? ?????? ?????????\n"\
		"{FF3300}max\t\t{FFFFFF}?????????ù ??????? ??? ?????????? ???????????? ????????\n"\
		"E\t\t?????????ù ??????? ??? ?????? ?????? ??????? ? ????\n"\
		"{CC99CC}S\t\t{FFFFFF}?????????ù ????????? ??? ?????????? ????????????\n"\
		"{009933}M\t\t{FFFFFF}????????? ??????????? ????????ù\n"\
		"L\t\t????????? ??????????? ????? ???\n"\
		"B\t\t?????????ù ??????? ??? ???????? ????????? ??? ??????\n\n"\
		"{9966FF}?????????ù:\n"\
		"1. ?????? ??????????? ??????ù???ù ??? ? ???????\n"\
		"2. ??????????? ?????????? ?? ?????? ?ù?? {FFFFFF}?????? {9966FF}?????"
	},
	{
		"???????? ? ??????",
		"{FFFFFF}ù???????? ????ù ?? ??????? ?????????? ???????ù??. ??????? ??? ????? ????ù ?????????:\n\n"\
		"{FFFF00}1. ?? ??????????? ???????\n"\
		"{FFFFFF}??ù ????? ????????? ? ??? ? ??????? {3366FF}Num 2{FFFFFF}. ?????? ??????? ???????ù?? ??? ????????? ?? 10 ??????\n\n"\
		"{FFFF00}2. ???????? ? ????????\n"\
		"{FFFFFF}ù???? ?????? ???????? ???? ?????????? ?? ????? ?????? ??-?? ?????????ù ???????\n"\
		"??????? ????????? ???????? ? ???????? {3366FF}/buyfuel{FFFFFF}. ?? ???????? ???????? ???????? 15 ??????\n"\
		"????? ????? ?????? ????????? ? ??????????, ??????? ?????? ?????????. 15 ?????? ?????? ?????? ????? ??????? ?? ????????? ????????\n\n"\
		"{66CCCC}???????? ??????:\n"\
		"1. ???????? ????? ???????? ???????? 150 ?????? ???????. ??? ?????? ?? 50 ????? ???????????? ?????? ????????ù\n"\
		"2. ?????? ?????????? ????????? ????? ???????? ?? ?????? ??? ????? ?????? ?? ?????! ???? ?? ??????? ????????? ?????? ???????\n"\
		"3. ????? ?? ?????? ?? ????????? ??????? ???? ???????? ??????? ????? ??????? ???????? (/c)\n\n"\
		"{99CC66}???????? ????????? ????? ? ????? ??????????? ?????? ???? ?????? ???????? (/c)\n"\
		"???????? ????????, ??? ???? ????????? ??? ???????????? ???? ????????? ????????ù, ?? ???????ù ???????? ??? ?????????? ??? ??????!"
	},
	{
		"??????? ????????? ???????ù",
		"{66CC00}1. ????? ????????ù\n"\
		"{FFFFFF}????? ???????????? ??????? ???????? ?????? ? ????? ???????\n"\
		"??? ???? ???????? ?????? ????????ù ??? ????????ù ?????? ???????? ?? ??????????? ??ù ?????? ??????ù???\n"\
		"??? ?ù? ???????ù? ????????????ù ??????? ??????? (/c) ? ????????ù ??????? ?????\n"\
		"{66CC00}2. ???????? ???????ù\n"\
		"{FFFFFF}??????????? ???????? ???????ù ? ???????? ??????? ? ???????? 50 ??/?\n"\
		"?? ????????? ?????????? ??????? ??????????? ???????? ???\n"\
		"??ù ?????????ù ??????????? ?????? ????????????ù ???????????ù ????????????? ????????, ??????? ?????????ù ???????? {3366FF}Num 4\n"\
		"{66CC00}3. ????????? ? ???ù???\n"\
		"{FFFFFF}????????? ? ???ù??? ???????????? ??????? ??????????ù ?????? ?? ??????? ?????? ??? ? ?????????? ?????????? ??ù ????? ??????\n"\
		"?? ????????? ????? ??????? ??? ?????????? ????? ???? ????????? ?? ????????ù???\n"\
		"{66CC00}4. ?????\n"\
		"{FFFFFF}??? ???? ?????????ù ? ?????????? ??????? ???????? ??ù??? ??????? ???????? ? ????????ù ? ???????\n"\
		"???????? ??ù??? ?????ù???? ????????? ????? ?????????, ??????? ?? ????????"
	}
};

new const
	Float: driving_exam_route[27][3] = // ??????? ????????
{
	{1908.1394,2246.4573,15.2793}, // 1
	{1887.2677,2233.8284,15.5133},
	{1827.6771,2229.1616,15.4069},
	{1768.4437,2204.5515,15.5672},
	{1769.0942,2057.4329,15.5118},
	{1876.7019,2053.6848,15.4542},
	{1963.1599,2027.2074,15.4588},
	{1962.9563,1917.6659,15.0649},
	{1984.8197,1902.6099,15.0857},
	{2235.5906,1903.8340,15.4785}, //10
	{2359.4978,1911.4387,15.4939},
	{2382.5203,1892.3778,15.2946},
	{2751.3455,1892.0446,15.8760},
	{2762.2747,2107.1575,17.6485},
	{2755.5586,2339.7378,15.6725},
	{2437.3162,2951.3494,22.6093},
	{2093.8494,2965.3408,11.5355},
	{2070.2361,2940.9878,11.4323},
	{1935.4342,2709.0713,14.7915}, // 20
	{1746.3171,2531.9512,14.9293},
	{1882.4036,2312.2119,15.5184},
	{1888.2998,2255.1619,15.5189},
	{1896.7715,2246.6313,15.3917},
	{1910.5236,2246.4551,15.2868},
	{1919.3710,2248.3159,15.2849},
	{1924.2465,2228.0378,15.7248},
	{0.0, 0.0, 0.0}
};

new driving_exam[12][E_DRIVING_EXAM_STRUCT] =
{
	{
		"??? ???????? ??????ù ????? \"M\" ?? ?????? ????????????",
		"?????????? ????\n"\
		"??????????? ????\n"\
		"?????????? ?????????\n"\
		"??????????? ?????????\n"\
		"???????? ????????\n"\
		"???????? ????????\n"\
		"?????????ù ???????????ù\n"\
		"???????? ?????",
		3
	},
	{
		"????? ???????? ???. ? ????. ?????",
		"????? Ctrl\n"\
		"????? Alt\n"\
		"?????? Ctrl\n"\
		"Num 2\n"\
		"Num 4",
		2
	},
	{
		"??????????? ???????? ???????ù ?? ??????:",
		"50 ??/?\n"\
		"60 ??/?\n"\
		"70 ??/?\n"\
		"80 ??/?\n"\
		"90 ??/?",
		1
	},
	{
		"????? ??????????ù ?? ??????????? ??????? ????:",
		"??????? ????????\n"\
		"?????? {0099CC}?????? Ctrl\n"\
		"?????? ??????? {0099CC}/fill\n"\
		"?????? {0099CC}????? Alt\n"\
		"?????? {0099CC}Num 2\n"\
		"?? ???? ?? ????????? ?? ????????",
		5
	},
	{
		"??? ???????? ??? ????????? ??????????",
		"?????? ??????? {0099CC}/buyfuel\n"\
		"?????? {0099CC}????? Ctrl\n"\
		"?????? {0099CC}????? Alt\n"\
		"?????? ??????? {0099CC}/start\n"\
		"?????? {0099CC}Num 2\n"\
		"??? ?????? ???????",
		2
	},
	{
		"??? ???????? \"Fuel: 45\" ?? ?????? ????????????",
		"ù?????ù ???????? {0099CC}45 ??/?\n"\
		"??????? ??????????? ???? {0099CC}45 ??????\n"\
		"???? ?????????? {0099CC}45\n"\
		"? ????????? ???????? {0099CC}45 ??????\n"\
		"??? ??????????? ??????",
		4
	},
	{
		"??? ????? ???????, ????? ????????? ?????? ????????",
		"????? ?? ??????\n"\
		"????????? ?????????\n"\
		"????????? ???? / ????????????\n"\
		"???????? ???????????? ????????\n"\
		"??????? ??????\n"\
		"??????????????? ?????????",
		2
	},
	{
		"??? ??????? ??? ??????? ???????? ???????",
		"?????? {0099CC}Num 8\n"\
		"?????? {0099CC}????? Ctrl\n"\
		"?????? {0099CC}?????? Ctrl\n"\
		"?????? {0099CC}Num 2\n"\
		"?????? ??????? {0099CC}/fill\n"\
		"?????? ??????? {0099CC}/buyfuel\n"\
		"??? ?????? ???????",
		3
	},//by Dergen and Tima
	{
		"??? ?????? ????????? ????ù ?????? ????????ù?",
		"20 ?????\n"\
		"30 ?????\n"\
		"40 ?????\n"\
		"50 ?????\n"\
		"1 ???\n"\
		"????? 1 ????",
		4
	},
	{
		"??? ???????? ??? ????????? ???????????? ?????????",
		"???????? {0099CC}Num 2\n"\
		"???????? {0099CC}Num 4\n"\
		"???????? {0099CC}H\n"\
		"???????? {0099CC}????? Ctrl\n"\
		"??? ?????????? ???????",
		2
	},
	{
		"?? ?????? ??????????? ?????????? \"?\". ??? ??? ???????",
		"??? ??????? ???????????? ????????\n"\
		"??? ?????? ????? ??? ????????\n"\
		"???? ???????? ???????????ù\n"\
		"?????? ??????? ??????? ? ????\n"\
		"?????? ??????? \"???????ù\" ????\n"\
		"???????? ????",
		4
	},
	{
		"??? ???? ?????????ù ? ?????????? ??????? ??:",
		"?????????? ???????? ? ?????????? ?????????\n"\
		"?????????? ???????? ?????? ????????\n"\
		"????????? ????????\n"\
		"??????????? ???????ù\n"\
		"????? ???????????? ????????? ??? ???????????",
		5
	}
};
new driving_exam_CP; // ??????? ????? ?? ?????

new g_player_driving_exam[MAX_PLAYERS][E_PLAYER_DRIVING_EXAM_STRUCT];
new g_driving_exam_default_values[E_PLAYER_DRIVING_EXAM_STRUCT] = {-1, ...};


new const
	atm_item_sum[7] = {100, 200, 500, 1000, 2000, 5000, 10000};

// ------------------------------------------
new g_bank_account[MAX_PLAYERS][MAX_BANK_ACCOUNTS][E_BANK_ACCOUNT_STRUCT];
new g_player_bank_transfer[MAX_PLAYERS][E_BANK_TRANSFER_STRUCT];

// ------------------------------------------
new g_player_listitem[MAX_PLAYERS][32];
new g_listitem_values[sizeof(g_player_listitem[])] = {0, ...};

new g_player_listitem_use[MAX_PLAYERS] = {-1, ...};
// ------------------------------------------
new g_player_offer[MAX_PLAYERS][E_PLAYER_OFFER_STURCT];
new const
	g_offer_default_values[E_PLAYER_OFFER_STURCT] =
{
	INVALID_PLAYER_ID,	// ??????????? ??????????? ??????
	INVALID_PLAYER_ID, 	// ????ù??? ??????????? ?? ??????
	OFFER_TYPE_NONE, 	// ????ù??? ???????????
	{-1, -1} 			// ???????? ????ù???? ??????????ù
};


// ------------------------------------------
new g_player_phone_call[MAX_PLAYERS][E_PHONE_CALL_STRUCT];
new
	g_phone_call_default_values[E_PHONE_CALL_STRUCT] =
{
	INVALID_PLAYER_ID,
	INVALID_PLAYER_ID,
	-1,
	true
};

// ------------------------------------------
new g_player_phone_book[MAX_PLAYERS][MAX_PHONE_BOOK_CONTACTS][E_PHONE_BOOK_STRUCT];

new g_player_phone_book_contacts[MAX_PLAYERS] = {0, ...};
new g_player_phone_book_select_cont[MAX_PLAYERS] = {INVALID_PLAYER_ID, ...};

new bool: g_player_phone_book_init[MAX_PLAYERS] = {false, ...};

new bool: g_admin_ears;

new bool: server_restart;

new bool: whitelist = false;

// ------------------------------------------
new g_player_flood[MAX_PLAYERS][E_ANTI_FLOOD_STRUCT];
new const
	g_flood_default_values[E_ANTI_FLOOD_STRUCT] =
{
	0,
	0
};

// ------------------------------------------
new g_bus_routes[4][E_BUS_ROUTE_STRUCT] =
{
	{"??????? ó ?????",			0, 0},
	{"??????? ó ?????", 		0, 0},
	{"??????? ó ?????????", 	0, 0},
	{"?????????????",			0, 0}
};
new g_bus_routes_list[40 * (sizeof g_bus_routes) + 1];

new g_bus_route[sizeof g_bus_routes][128][E_BUS_ROUTE_STEP_STRUCT] =
{
	{ // ??????? ó ?????
		{804.0963,759.3428,11.5305, false}, // ?????????. ??????
		{807.1755,796.6493,11.5641, false},
		{781.3264,807.5077,11.5999, false},
		{777.8690,819.6682,11.5316, true}, // ?????????. ? ??????
		{788.4371,866.4033,11.6193, false},
		{783.4990,922.7868,11.6198, false},
		{724.8358,993.2124,11.6059, false},
		{653.1397,1069.6758,11.6175, false},
		{561.9534,1134.0715,11.6187, false},
		{449.6951,1146.5718,11.5336, false},
		{329.1326,1160.0376,11.5335, false},
		{298.2704,1177.5603,11.5327, false},
		//{309.5753,1272.1222,25.1132, false},
		{315.7555,1380.6211,25.1481, false},
		{330.3693,1529.8469,11.5333, false},
		{343.0248,1663.2931,11.5401, false},
		{375.4905,1668.9850,11.5333, false},
		{503.5475,1655.0031,11.5790, true}, // ?????????. ?/?
		{489.3311,1671.6630,11.5805, false},
		{431.1419,1677.8170,11.5810, false},
		{355.8469,1680.8859,11.5314, false},
		{259.5001,1690.6257,11.5322, false},
		{181.8215,1607.5934,11.5337, false},
		{167.0842,1536.0015,11.5199, false},
		{205.3887,1520.2244,11.5335, false},
		{197.9151,1469.6622,11.5450, true}, // ?????????. ?????
		{190.1873,1427.9275,11.5637, false},
		{163.9051,1426.8372,11.5826, false},
		{122.8895,1341.6932,11.5332, false},
		{96.6886,1215.3988,11.5352, false},
		{57.0523,1018.1173,11.5311, false},
		{27.1411,928.3366,11.5312, true}, // ?????????
		{13.8773,892.2931,11.5308, false},
		{-41.1742,903.9217,11.5342, false},
		{-102.4958,927.5821,11.5341, false},
		{-133.8530,940.9750,11.5408, true}, // ?????????. ?????
		{-183.8621,958.4486,11.5337, false},
		{-306.6450,978.6062,11.5342, false},
		{-371.0784,988.8942,11.5317, false},
		{-372.4652,1165.7811,11.8071, false},
		{-438.3715,1225.9684,17.1975, false},
		{-576.4442,1247.1815,20.2868, false},
		{-705.8118,1352.2239,20.2824, false},
		{-842.2934,1505.1222,23.4898, false},
		{-1079.2939,1587.7079,34.6537, false},
		{-1258.3180,1735.7507,35.0802, false},
		{-1273.3208,1829.1630,47.9041, false},
		{-1116.6130,1916.5510,45.3853, false},
		{-937.7880,1950.7174,45.3854, false},
		{-928.0551,1994.3236,42.8219, false},
		{-1014.0432,2057.9045,39.3367, false},
		{-1050.4742,2141.9661,37.5642, false},
		{-1054.7905,2188.3250,37.6235, true}, // ?????????. ?????
		{-1061.1486,2167.9629,37.5780, false},
		{-1020.0714,2094.6267,41.5694, false},
		{-937.3565,2001.8298,42.3229, false},
		{-937.0294,1956.2084,45.3855, false},
		{-1083.1884,1939.5122,45.3857, false},
		{-1187.5752,1884.4073,45.3857, false},
		{-1277.6946,1835.0138,47.8955, false},
		{-1255.6719,1686.1691,35.0179, false},
		{-1115.2577,1586.8229,35.0175, false},
		{-832.9486,1488.2214,22.4248, false},
		{-716.5996,1343.6909,20.2838, false},
		{-543.3049,1228.0764,20.2832, false},
		{-443.8060,1213.6299,17.1999, false},
		{-385.3225,1078.7760,11.5347, false},
		{-381.1606,987.6623,11.5335, false},
		{-348.7059,964.4541,11.5347, false},
		{-177.1574,940.5574,11.5372, false},
		{86.4576,841.9703,11.5345, false},
		{203.3397,802.2369,11.5338, false},
		{251.4614,863.7733,11.5351, false},
		{293.7149,1139.5114,11.5326, false},
		{379.9212,1146.9272,11.5334, false},
		{490.6891,1136.0294,11.6247, false},
		{579.8975,1121.5365,11.6111, false},
		{681.5302,1036.2469,11.6320, false},
		{772.9662,929.1800,11.6632, false},
		{789.5692,883.0237,11.6275, false},
		{777.8110,808.4282,11.5681, false},
		{803.6309,781.3038,11.5477, false}, // ?????. ?? ??????
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
  		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false}
	},
	{ // ?? ?????? ?? ó ??????? ?????
		{785.8178,733.8877,11.5791, false},
		{791.5625,803.0234,11.6428, false},
		{780.6000,820.5082,11.5576, true}, // ?????????
		{782.2230,850.4604,11.6209, false},
		{797.8289,905.1847,11.6307, false},
		{735.5002,980.0391,11.6114, false},
		{668.3276,1057.2330,11.6193, false},
		{628.2550,1090.2228,11.6125, false},
		{558.3439,1134.0463,11.6268, false},
		{460.2363,1145.8254,11.5322, false},
		{312.0343,1162.4246,11.5330, false},
		{298.6253,1186.1451,11.8133, false},
		{311.8743,1304.6932,25.1465, false},
		{319.2766,1420.3534,24.8471, false},
		{328.4369,1513.4751,11.5330, false},
		{339.8739,1631.2836,11.5335, false},
		{361.1027,1670.5613,11.5337, false},
		{499.2119,1655.4762,11.5790, true}, // ?????????. ?/?
		{483.3976,1672.8696,11.5811, false},
		{358.6141,1685.3270,11.5333, false},
		{352.4224,1712.0112,11.5332, false},
		{407.0217,1857.8940,10.7249, false},
		{453.1217,2003.7932,5.4445, false},
		{524.8339,2178.4915,11.5330, false},
		{611.4445,2339.9956,11.5314, false},
		{721.7032,2492.1174,11.5331, false},
		{928.3762,2613.5100,11.5328, false},
		{1057.4771,2689.3472,11.5322, false},
		{1087.8593,2705.2639,11.5312, true}, // ?????????. ????????
		{1142.6873,2739.4819,11.5327, false},
		{1256.6520,2791.2935,11.5326, false},
		{1356.3508,2886.7231,11.5327, false},
		{1486.0658,2952.2690,11.5334, false},
		{1692.0784,2952.7112,11.5336, false},
		{1914.5933,2952.6221,11.5322, false},
		{2058.9854,2952.4248,11.8603, false},
		{2069.7026,2919.9446,12.2003, false},
		{1973.4771,2761.8638,14.6938, false},
		{1811.7389,2578.0510,14.7418, false},
		{1772.3623,2473.5608,15.4931, false},
		{1806.0780,2480.2139,15.2224, false},
		{1812.7412,2514.3738,15.1960, true}, // ?????????. ???
		{1783.1885,2519.0115,15.1971, false},
		{1759.0511,2495.6106,15.4911, false},
		{1841.2544,2375.0576,15.4712, false},
		{1886.6233,2291.0061,15.4862, false},
		{1885.6765,2241.8660,15.4848, true}, // ?????????. ?????????
		{1887.0750,2164.2449,15.3981, false},
		{1886.0106,2065.0347,15.4061, false},
		{1918.8690,2052.6516,15.4023, false},
		{1962.1838,2013.8074,15.4443, false},
		{1961.6436,1916.9833,15.0466, false},
		{2003.5902,1903.0016,15.0450, false},
		{2125.3281,1904.3101,15.4286, false},
		{2258.8311,1903.8417,15.4487, false},
		{2357.8098,1907.3590,15.4196, false},
		{2372.2461,1815.7744,3.9887, false},
		{2374.5317,1772.6249,-1.5149, true}, // ?????????. ?????
		{2378.6646,1806.1595,2.6092, false},
		{2377.6704,1896.5450,14.9163, false},
		{2510.3728,1894.5598,15.7670, false},
		{2658.1067,1894.8307,15.7658, false},
		{2732.9934,1895.0286,15.7915, false},
		{2758.0222,1960.3650,16.5103, false},
		{2765.5271,2139.8530,17.4811, false},
		{2744.9497,2430.8582,15.0301, false},
		{2700.9429,2674.8462,16.2729, false},
		{2651.3350,2814.2864,19.6743, false},
		{2444.3723,2951.4492,22.7301, false},
		{2128.1565,2967.6182,10.9400, false},
		{1806.9750,2968.4924,11.5330, false},
		{1506.0865,2967.6211,11.5317, false},
		{1333.6772,2880.7810,11.5333, false},
		{1216.1221,2792.5459,11.5331, false},
		{895.8690,2610.9192,11.5325, false},
		{649.9877,2442.0422,11.5330, false},
		{475.1823,2114.6855,10.9737, false},
		{390.2416,1851.0229,11.1688, false},
		{320.9989,1534.4823,11.5325, false},
		{296.8673,1243.0820,24.1259, false},
		{328.7727,1152.7751,11.5334, false},
		{543.6455,1130.1685,11.6124, false},
		{643.2175,1071.0590,11.6220, false},
		{737.5670,968.7892,11.6173, false},
		{793.5345,902.0283,11.6005, false},
		{770.5798,836.4699,11.5224, false},
		{791.3061,803.1495,11.6429, false},
		{801.8435,770.3690,11.5319, true}, // ?????????. ?? ??????
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false}
	},
	{ // ?? ?????? ?? ó ù??????? ????
		{780.4178,727.2006,11.6021, false},
		{798.3979,800.8493,11.6381, false},
		{780.1346,821.4786,11.5538, true}, // ?????????.
		{797.7029,888.6456,11.6051, false},
		{673.8666,1050.9592,11.6403, false},
		{573.7012,1132.0703,11.6548, false},
		{309.1552,1161.7903,11.5405, false},
		{306.6163,1246.9374,24.7787, false},
		{317.6702,1398.3157,25.1483, false},
		{336.0221,1584.2373,11.5332, false},
		{391.7831,1667.9263,11.5810, false},
		{501.4952,1654.9908,11.5792, true}, // ?????????. ?/?
		{467.4220,1669.4408,11.5811, false},
		{357.7765,1680.7673,11.5335, false},
		{266.1915,1690.1921,11.5330, false},
		{170.3249,1547.4205,11.5339, false},
		{93.1306,1169.7964,11.5354, false},
		{49.4706,984.1645,11.5333, false},
		{28.5538,931.5492,11.5411, true}, // ?????????.
		{19.1627,890.9694,11.5343, false},
		{96.5565,836.9958,11.5344, false},
		{192.6803,801.1299,11.5343, false},
		{178.9009,713.8533,11.5345, false},
		{122.1390,555.6907,11.5334, false},
		{154.6347,516.4274,11.5359, false},
		{233.3019,485.1019,11.5314, true}, // ?????????.
		{374.0205,431.1635,13.1213, false},
		{530.7493,376.7204,24.7750, false},
		{616.2057,143.1509,24.8471, false},
		{632.8180,-108.0908,13.5322, false},
		{684.5417,-176.1120,3.8981, false},
		{939.5273,-173.5067,3.8265, false},
		{1131.1257,-172.2897,3.8225, false},
		{1297.7870,-220.1640,3.8427, false},
		{1642.6250,-225.6595,3.7952, true}, // ?????????. ???
		{1785.7213,-224.0345,3.8294, false},
		{1793.1658,-281.3170,3.8178, false},
		{1857.9297,-312.3727,12.8249, false},
		{2039.8502,-329.4668,16.5561, false},
		{2111.2561,-488.9375,16.5540, false},
		{2121.5532,-652.9269,16.5321, false},
		{2139.5938,-802.5333,14.3969, false},
		{2182.0945,-811.3425,14.4699, false},
		{2386.7263,-798.0540,12.3403, false},
		{2400.5815,-755.9683,11.8368, false},
		{2427.1692,-617.4779,11.9096, true}, // ?????????. ????????
		{2395.2302,-647.2762,11.8409, false},
		{2394.9399,-773.0400,11.8373, false},
		{2324.7573,-790.0723,12.6925, false},
		{2171.1777,-804.1882,14.3471, false},
		{2138.3821,-757.6460,14.4885, false},
		{2132.2083,-561.0246,16.5556, false},
		{2092.4204,-376.5380,16.5570, false},
		{1896.9425,-297.6446,16.5329, false},
		{1799.3170,-281.2733,3.8201, false},
		{1769.4387,-218.6841,3.8279, false},
		{1529.4707,-218.4079,3.8221, false},
		{1208.8314,-189.7240,3.8389, false},
		{884.9227,-168.7566,3.8019, false},
		{694.2114,-160.4446,3.8801, false},
		{647.6750,-98.5738,14.9823, false},
		{638.9136,85.5042,26.2247, false},
		{585.8060,358.9880,24.7759, false},
		{467.1305,413.2276,24.7821, false},
		{199.2020,514.2813,11.5329, false},
		{138.2974,538.3425,11.5330, false},
		{139.1546,572.7580,11.5344, false},
		{149.9627,595.9069,11.5312, true}, // ?????????
		{171.7104,657.4917,11.5327, false},
		{236.5534,826.3988,11.5343, false},
		{277.9897,997.0731,11.7726, false},
		{293.8099,1139.3777,11.5327, false},
		{391.7524,1145.9104,11.5334, false},
		{565.0103,1128.1143,11.6137, false},
		{662.4227,1054.6722,11.6063, false},
		{771.2302,930.1013,11.6353, false},
		{789.8817,885.7687,11.6138, false},
		{788.1815,804.4682,11.6427, false},
		{791.0405,758.6101,11.5322, true}, // ?????????. ? ?????
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false},
		{0.0, 0.0, 0.0, false}
	},
	{ // ?? ?????? ?? ó ?????????
		{787.9899,737.3123,11.5710, false},
		{793.3630,802.1804,11.6428, false},
		{780.4693,821.8019,11.5442, true}, // ?????????
		{798.4664,891.6359,11.6129, false},
		{777.0601,930.0786,11.6229, false},
		{676.1186,1049.5214,11.6240, false},
		{579.9954,1128.9869,11.6161, false},
		{312.6412,1161.5272,11.5302, false},
		{305.7333,1242.8467,24.1905, false},
		{328.4750,1513.5687,11.5329, false},
		{342.3961,1660.9371,11.5325, false},
		{513.0868,1695.3979,11.5476, true}, // ?????????. ?/? ???????
		{481.3032,1673.3887,11.5806, false},
		{357.2000,1685.8246,11.5335, false},
		{398.0929,1833.5394,11.4720, false},
		{493.0337,2119.4668,11.2766, false},
		{665.3842,2440.8296,11.5328, false},
		{1040.7347,2679.5566,11.5327, false},
		{1084.5813,2703.6069,11.5290, true}, // ?????????. ????????
		{1178.5232,2759.8821,11.5312, false},
		{1367.8978,2902.7573,11.5328, false},
		{1617.1583,2952.2393,11.5329, false},
		{2010.3989,2952.2800,12.0703, false},
		{2070.5879,2924.1306,12.0026, false},
		{1760.0981,2546.4333,14.7490, false},
		{1767.3916,2483.2244,15.4942, false},
		{1806.6837,2479.9934,15.2230, false},
		{1814.6934,2512.1545,15.1823, true}, // ?????????. ?????????? ????????
		{1766.5570,2509.9673,15.2375, false},
		{1803.5001,2430.9045,15.4893, false},
		{1885.8512,2243.0408,15.4826, true}, // ?????????. ?????????
		{1886.0441,2065.9612,15.4069, false},
		{1957.3859,2043.8644,15.4010, false},
		{1962.4486,1914.6210,15.0558, false},
		{2039.8900,1904.8533,15.4537, false},
		{2285.5439,1904.1499,15.4653, false},
		{2374.9858,1770.2043,-1.6893, true}, // ?????????. ?????
		{2378.3889,1806.2183,2.6175, false},
		{2371.7773,1891.0868,15.3369, false},
		{2502.8794,1893.8397,15.7669, false},
		{2732.8333,1895.5476,15.7916, false},
		{2731.6873,1778.2247,15.3588, false},
		{2554.7383,1502.4097,11.8261, false},
		{2680.1140,1131.4674,19.4727, false},
		{2850.3950,739.0171,31.4996, false},
		{2898.8374,230.6370,12.1628, false},
		{2897.7466,-158.5092,24.1596, false},
		{2822.4792,-355.3473,26.3462, false},
		{2765.8787,-442.3799,23.0099, true}, // ?????????. ? ??????
		{2740.4727,-561.4509,23.2926, false},
		{2605.1946,-727.5572,12.4791, false},
		{2471.5764,-784.3000,11.8714, true}, // ?????????. ??????
		{2267.1509,-792.5616,13.1236, false},
		{2052.6919,-832.4374,15.3386, false},
		{1836.0454,-952.8130,13.6815, false},
		{1745.2719,-978.0508,11.8243, false},
		{1706.8506,-814.2382,34.0767, false},
		{1557.1355,-687.5613,40.8769, false},
		{1270.7510,-635.9218,40.8940, false},
		{946.0969,-740.0735,40.4627, false},
		{832.7188,-774.3143,40.0398, true}, // ?????????. ???ù????
		{568.1791,-858.9227,32.6240, false},
		{155.3385,-988.5547,40.4751, false},
		{-200.0290,-1185.5417,40.4756, false},
		{-439.1202,-1582.6089,40.4808, false},
		{-476.0527,-1640.8954,40.4473, true}, // ?????????. ???????
		{-601.8219,-1867.0111,40.4838, false},
		{-733.5305,-2230.3132,40.9539, false},
		{-734.6354,-2363.3152,38.6685, false},
		{-969.1361,-2421.0542,30.9774, false},
		{-1169.9259,-2478.7441,28.0161, false},
		{-1290.1781,-2505.9141,28.0137, false},
		{-1559.1868,-2374.3394,28.2283, false},
		{-1947.1075,-2117.1072,16.4737, false},
		{-2244.3979,-1747.0317,10.1017, false},
		{-2469.0754,-1417.8335,9.4151, false},
		{-2603.2778,-1275.6914,8.7736, false},
		{-2590.4954,-1160.1410,16.6581, false},
		{-2589.7524,-823.7059,29.2303, false},
		{-2637.9370,-410.8065,24.6845, false},
		{-2654.8884,-54.1762,10.4663, false},
		{-2658.8003,197.2989,10.4648, false},
		{-2564.9153,231.0769,12.3016, false},
		{-2397.9492,232.0039,16.8059, false},
		{-2259.1260,215.5012,24.0472, false},
		{-2212.2849,193.4742,24.0604, true}, // ?????????. ?????????
		{-2263.0046,224.2567,23.9677, false},
		{-2560.5115,237.5524,12.4220, false},
		{-2647.8083,269.1061,12.8730, false},
		{-2630.2310,639.0733,12.8736, false},
		{-2641.8301,880.2888,12.8752, false},
		{-2654.6033,1092.2378,12.8751, false},
		{-2497.8696,1262.8240,14.4634, false},
		{-2341.2803,1700.3708,52.5478, false},
		{-2387.7502,1777.2646,52.5545, true}, // ?????????. ??????
		{-2565.1953,1895.2128,52.5480, false},
		{-2626.2312,2000.1528,52.5475, false},
		{-2609.6714,2299.9053,52.5271, false},
		{-2440.1873,2476.7908,42.8585, false},
		{-2373.6965,2561.7986,42.0734, false},
		{-2373.8145,2746.8027,36.9760, false},
		{-2458.7029,2815.8057,36.9642, false},
		{-2488.0146,2825.8862,37.1673, false},
		{-2477.0903,2836.7332,37.1635, true}, // ?????????. ?????
		{-2511.1621,2822.4543,36.9658, false},
		{-2386.0806,2811.4109,36.9635, false},
		{-2379.3640,2596.0176,42.0872, false},
		{-2345.0049,2512.1946,42.2063, false},
		{-2110.6428,2492.1580,39.2072, false},
		{-1828.6377,2491.4763,48.3243, false},
		{-1653.6299,2496.0674,42.434, false},
		{-1477.2354,2388.6394,43.9515, false},
		{-1393.5088,2207.4861,45.1462, false},
		{-1308.1812,1877.5199,42.4691, false},
		{-1210.6033,1619.9750,35.0147, true}, // ?????????
		{-951.2002,1530.2247,28.9315, false},
		{-714.3251,1339.3547,20.2827, false},
		{-543.6758,1228.1691,20.2812, false},
		{-386.0414,1155.8013,11.5202, false},
		{-381.0251,988.7273,11.5319, false},
		{-283.9621,968.2222,11.5340, false},
		{3.8998,878.4814,11.5407, false},
		{374.4273,736.4326,11.5336, false},
		{518.6818,681.0500,11.5329, false},
		{709.2870,653.0804,11.5337, false},
		{787.5905,804.1089,11.6397, false},
		{796.8284,755.3444,11.5307, true}, // ?????????. ?? ??????
		{0.0, 0.0, 0.0, false}
	}
};

// ------------------------------------------
new g_temp_jobs[5][E_TEMP_JOB_STRUCT] =
{
	{617.3452,1665.7614,12.0710, 		350,	{27, 157}},  	// ???????
	{547.3035,492.1857,998.7578, 		500,	{16, 157}},  	// ??????
	{-1088.2688, 2167.4514, 38.0373, 	780,	{16, 157}}, 	// ????? (?????? ????????)
	{-1063.6638,2208.5696,38.0952, 		900,	{258, 157}},  	// ?????
	{2268.8354,506.1029,16.7323, 	700,{161, 157}}		// ???????
};

// ---------------------------------------
new const
	Float: loader_job_unload_cp[1][3] = // ??????? ????????? (???????)
{
	{622.3066,1664.1621,12.1726}
};

//new g_skin_donate[22] = {62,30,58,29,81,299,289,295,292,82,273,240,259,258,248,236,221,223,204,8,33,23};

new const
	Float: loader_get_cp[6][3] = // ??????? ???????? (???????)
{
    {598.3508, 1623.3436, 12.0788},
	{586.1584, 1619.3082, 12.0788},
	{598.3497, 1599.8641, 12.0788},
	{586.1585, 1599.7047, 12.0788},
	{586.1581, 1646.9740, 12.0788},
	{598.3505, 1650.8558, 12.0788}
};

// ---------------------------------------
new const
	Float: miner_job_load_pos[7][3] = // ??????? ???????? (??????)
{
	{571.3219,564.4913,999.4324},
	{549.5953,572.4483,999.6491},
	{546.2889,562.7280,999.4429},
	{563.6879,572.1982,999.5966},
	{560.5733,574.1584,1001.2046},
	{546.8384,559.9129,999.0386},
	{572.1130,560.8156,999.3467}
};

new const
	Float: miner_job_chop_cp[7][3] = // ??????? ???????? (??????)
{
	{541.587158,535.840454,998.627624},
	{553.863403,542.676147,998.658996},
	{574.633911,538.369018,998.648437},
	{559.169799,543.447753,998.692565},
	{565.277221,531.326599,998.648437},
	{574.633911,538.369018,998.648437},
	{565.277221,531.326599,998.648437}
};

//new miner_job_load_cp[sizeof miner_job_load_pos] = {-1, ...};
new miner_carriage[1][E_MINER_CARRIAGE_STRUCT] =
{
	{-2375.1228, 294.7194, -15.4815, -2548.1228, 294.7194, -15.4815, false, 0, -1}
};
new miner_job_area; // ???? ????? (??????)

// ---------------------------------------
new Text3D: factory_store_label[2];

new factory_job_area;
new factory_put_zone;
new
	Float: factory_take_metall_pos[14][3] =
{
	{8.5082,8.2146,1380.9985},
	{0.8614,8.2154,1380.9985},
	{-5.5999,8.2160,1380.9985},
	{-12.1685,8.2158,1380.9985},
	{-18.6312,8.2158,1380.9985},
	{-25.1918,8.2160,1380.9985},
	{-31.8010,8.2156,1380.9985},
	{-31.8547,-4.2555,1380.9985},
	{-25.2927,-4.2556,1380.9985},
	{-18.7336,-4.2551,1380.9985},
	{-12.2371,-4.2557,1380.9985},
	{-5.5854,-4.2554,1380.9985},
	{0.8263,-4.2553,1380.9985},
	{6.9856,-4.2556,1380.9985}
};

new
	Float: factory_put_metall_pos[2][3] =
{
	{6.5996,1.1691,1380.9985},
	{5.1219,2.0442,1380.9985}
};
new factory_desk[16][E_FACTORY_DESK_STRUCT];

// ---------------------------------------
new const
	Float: lumberjack_job_chop_cp[5][3] =
{
	{2304.8523,482.4505,16.3201},
	{2283.2234,476.2262,17.5957},
	{2298.9263,523.8738,19.9927},
	{2290.5212,543.8743,24.2620},
	{2275.5784,533.1171,21.7402}
};

// ------------------------------------------
new Cache: charity_cache_data; 	// ??? ?????????????
new g_last_pay_day_time; 		// ????ù ?????????? ?????ù
new g_last_lottery_time; 		// ????ù ?????????? ????????? ???????
new g_last_m_timer_time;		// ????ù ?????????? 1-??? ???????

// ------------------------------------------
new const
	numeric_name[7][11] =
{
	"???????",
	"???????",
	"????????",
	"??????????",
	"?ù????",
	"???????",
	"????????"
};

new const
	job_name[6][18] =
{
	"???????????",
	"???????? ????????",
	"??????",
	"???????????",
	"??????????",
	"????????????"
};

new const
	month_name[12][8 + 1] =
{
	"ù????ù",
	"??????ù",
	"?????",
	"?????ù",
	"??ù",
	"???ù",
	"???ù",
	"???????",
	"????ù??ù",
	"???ù??ù",
	"??ù??ù",
	"??????ù"
};

new const
	day_name[7][12] =
{
	"???????????",
	"???????",
	"?????",
	"???????",
	"?ù?????",
	"???????",
	"???????????"
};



new army_ammo_CP; // ??ù??? ???????? ?? ?????? ???????? ?????
// ------------------------------------------
new const
	g_item_type[7][E_ITEM_STRUCT] =
{
	{"Error",		"???", 	false},
	{"??????", 		"???", 	true},
	{"????????", 	"?", 	false},
	{"???????", 	"??", 	true},
	{"?????????", 		"??", 	true},
	{"???????", 	"??", 	true},
	{"?????????", 	"?", 	true}
};

enum // ???? ?????????
{
	ITEM_TYPE_NONE = 0,	// ?????? ????
	ITEM_TYPE_MONEY = 1, // ??????
	ITEM_TYPE_JERRICAN, // ????????
	ITEM_TYPE_MED, // ???????
	ITEM_TYPE_METALL, // ?????????
	ITEM_TYPE_AMMO,	// ???????
	ITEM_TYPE_DRUGS, // ?????????
}

// ------------------------------------------
new const
	g_player_improvements[5][E_IMPROVEMENTS_STRUCT] =
{
	{"????????????", 	50_000, 	5},
	{"?????????????", 	75_000, 	8},
	{"??????", 			100_000, 	11},
	{"?????? ???????ù", 125_000, 	15},
	{"?????ù ??????????", 150_000, 	17}
};

new chat_message[5][128 + 1];
new const
	reg_skin_data[2][10] = // ????? ??? ???????????
{
	{79,78,230,134,136,158,159,161,71,71}, // ?
	{137,77,135,218,239,137,77,135,218,239} // ?
};

new const
	Float: spawn_pos_data[6][4] = // ??????? ???????
{
	{844.824829, 794.637268, 13.381684, 69.833580},	// ???????
	{1804.63, 2518.68, 14.64, 119.86},   // ????????
	{2740.715820, -2441.796142, 21.781099, 289.500274},    // ?????
	{-2430.725341, 204.739364, 26.095102, 171.770828}, // ?????????
	{-2669.68, 2006.10, 11.23, 175.16}, // ???????????
	{-2154.60, 1557.08, 9.88, 73.36} // ????? ???????????
};

// headers
#include "../gamemodes/modules/core/admin/headers.inc"
#include "../gamemodes/modules/core/vehicle/auto-race/headers.inc"

// callbacks
#include "../gamemodes/modules/core/admin/callbacks.pwn"
#include "../gamemodes/modules/core/vehicle/auto-race/callbacks.pwn"

// functions
#include "../gamemodes/modules/core/vehicle/auto-race/functions.pwn"

// commands
#include "../gamemodes/modules/core/admin/commands.pwn"

// dialogs
#include "../gamemodes/modules/core/admin/dialogs.pwn"
#include "../gamemodes/modules/core/vehicle/auto-race/dialogs.pwn"


stock GetSkillBar(amount)
{
	new tmp_bar[101];
	if(!amount) return tmp_bar;
 	for(new i = 0; i < amount; i++)
		strcat(tmp_bar, "|");

 	return tmp_bar;
}

stock SetPlayerReportState(playerid, reportState)
{
	PlayerReportState[playerid] = reportState;
}

stock GetPlayerReportState(playerid)
{
	return PlayerReportState[playerid];
}

stock SetPlayerCallReport(playerid, index, value)
{
	PlayerCallReport[playerid][index] = value;
}

stock GetPlayerCallReport(playerid, index)
{
	return PlayerCallReport[playerid][index];
}

stock ClearReportCall(playerid)
{
	PlayerCallReport[playerid][PC_REPORT_TARGET] = INVALID_PLAYER_ID;
	PlayerCallReport[playerid][PC_REPORT_SOURCE] = INVALID_PLAYER_ID;
	PlayerCallReport[playerid][PC_REPORT_TIME] = -1;
}

stock GetPlayerIDFromDialog(listitem, reportType)
{
	new index;
	foreach(Player, i)
	{
		if(GetPlayerReportState(i) == reportType)
		{
			if(index++ == listitem)
				return i;
		}
	}
	return INVALID_PLAYER_ID;
}

stock ShowPlayerSkills(playerid, to_player = -1)
{
	if(to_player < 0)
		to_player = playerid;

	new tmp_skills[1560];
	format
	(
	    tmp_skills,
	    sizeof(tmp_skills),
	    "????\t\t%d%s\t%s\n\
	    {99ff66}\
		Colt 45\t\t%d%s\t%s\n\
		SD Pistol\t%d%s\t%s\n\
	    Desert Eagle\t%d%s\t%s\n\
	    Shotgun\t%d%s\t%s\n\
	    MP5\t\t%d%s\t%s\n\
	    AK47\t\t%d%s\t%s\n\
	    M4\t\t%d%s\t%s\n\
	    Sniper Rifle\t%d%s\t%s\n\
		Sawnoff\t%d%s\t%s\n\
		Combat SG\t%d%s\t%s\n\
		Micro Uzi\t%d%s\t%s\
	    ",
	    GetPlayerData(playerid, P_POWER), "%",
	    GetSkillBar(GetPlayerData(playerid, P_POWER)),
	    GetPlayerData(playerid, P_SKILL_COLT), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_COLT)),
		GetPlayerData(playerid, P_SKILL_SDPISTOL), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_SDPISTOL)),
		GetPlayerData(playerid, P_SKILL_DEAGLE), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_DEAGLE)),
		GetPlayerData(playerid, P_SKILL_SHOTGUN), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_SHOTGUN)),
		GetPlayerData(playerid, P_SKILL_MP5), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_MP5)),
		GetPlayerData(playerid, P_SKILL_AK47), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_AK47)),
		GetPlayerData(playerid, P_SKILL_M4), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_M4)),
		GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE)),
		GetPlayerData(playerid, P_SKILL_SAWNOFF), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_SAWNOFF)),
		GetPlayerData(playerid, P_SKILL_COMBAT_SG), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_COMBAT_SG)),
		GetPlayerData(playerid, P_SKILL_MICRO_UZI), "%",
		GetSkillBar(GetPlayerData(playerid, P_SKILL_MICRO_UZI))
	);
	Dialog(to_player, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FFCC00}?????? ???????ù ???????", tmp_skills, "???????", "");

	return 1;
}

stock GetPlayerSkillAmount(playerid, skill_index)
{
	new amount;

	switch(skill_index)
	{
		case 0: amount = GetPlayerData(playerid, P_POWER);
		case 1: amount = GetPlayerData(playerid, P_SKILL_COLT);
		case 2: amount = GetPlayerData(playerid, P_SKILL_SDPISTOL);
		case 3: amount = GetPlayerData(playerid, P_SKILL_DEAGLE);
		case 4: amount = GetPlayerData(playerid, P_SKILL_SHOTGUN);
		case 5: amount = GetPlayerData(playerid, P_SKILL_MP5);
		case 6: amount = GetPlayerData(playerid, P_SKILL_AK47);
		case 7: amount = GetPlayerData(playerid, P_SKILL_M4);
		case 8: amount = GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE);
		case 9: amount = GetPlayerData(playerid, P_SKILL_SAWNOFF);
		case 10: amount = GetPlayerData(playerid, P_SKILL_COMBAT_SG);
		case 11: amount = GetPlayerData(playerid, P_SKILL_MICRO_UZI);
	}

	return amount;
}

stock SetPlayerSkillAmount(playerid, skill_index, amount)
{
	switch(skill_index)
	{
		case 0: SetPlayerData(playerid, P_POWER, amount);
		case 1: SetPlayerData(playerid, P_SKILL_COLT, amount);
		case 2: SetPlayerData(playerid, P_SKILL_SDPISTOL, amount);
		case 3: SetPlayerData(playerid, P_SKILL_DEAGLE, amount);
		case 4: SetPlayerData(playerid, P_SKILL_SHOTGUN, amount);
		case 5: SetPlayerData(playerid, P_SKILL_MP5, amount);
		case 6: SetPlayerData(playerid, P_SKILL_AK47, amount);
		case 7: SetPlayerData(playerid, P_SKILL_M4, amount);
		case 8: SetPlayerData(playerid, P_SKILL_SNIPER_RIFLE, amount);
		case 9: SetPlayerData(playerid, P_SKILL_SAWNOFF, amount);
		case 10: SetPlayerData(playerid, P_SKILL_COMBAT_SG, amount);
		case 11: SetPlayerData(playerid, P_SKILL_MICRO_UZI, amount);
	}

	return 1;
}

stock ShowTeleportList(playerid)
{
	new list_text[34 * sizeof g_teleport_list];
	new dest[64]; // ???????? ?????, ????? ??????? ??????? ???????ù

	for (new i = 0; i < sizeof g_teleport_list; i++)
	{
		format(dest, sizeof dest, "%d. %s\n", i + 1, g_teleport_names[i]);
		strcat(list_text, dest);
	}

	Dialog(playerid, DIALOG_TELEPORT_LIST, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{ffffff} | ?????? ?????", list_text, "???????", "?????");
	return 1;
}

stock CreateTicket(playerid, amount, issuer[], description[])
{
	new query[190];

	mysql_format(mysql, query, sizeof query, "INSERT INTO tickets (uid, amount, issuer, description) VALUES (%d, %d, '%s', '%s')",
	GetPlayerAccountID(playerid), amount, issuer, description);
	mysql_query(mysql, query, false);

	return 1;
}

stock PayTicket(playerid, ticketid)
{
	new query[90],
		Cache: result,
		rows;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM tickets WHERE id=%d LIMIT 1", ticketid);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	new uid = cache_get_field_content_int(0, "uid"),
		amount = cache_get_field_content_int(0, "amount"),
		status = cache_get_field_content_int(0, "status"),
		desc[64];

	cache_get_field_content(0, "description", desc);

	cache_delete(result);

	if(!rows)
		return SendClientMessage(playerid, 0xCECECEFF, "?????? ????? ?? ??????");

	if(uid != GetPlayerAccountID(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?????? ????? ??????? ?? ???");

	if(status)
		return SendClientMessage(playerid, 0xCECECEFF, "?????? ????? ??? ???????");

	if(GetPlayerBankMoney(playerid) < amount)
		return SendClientMessage(playerid, 0x999999FF, "???????????? ??????? ?? ???????? ?????????? ????? ??ù ?????? ??????");

	GivePlayerMoneyEx(playerid, -amount, "?????? ??????", true, true);

	mysql_format(mysql, query, sizeof query, "UPDATE tickets SET status=1 WHERE id=%d", ticketid);
	mysql_query(mysql, query, false);

	format(query, sizeof query, "?? ???????? ????? ?%d (%s)", ticketid, desc);
	SendClientMessage(playerid, 0x66CC33FF, query);

	return 1;
}

stock SendAdvert(playerid, message[])
{
	new ad_id = g_advert_created;

	if (g_advert_created >= MAX_ADVERTS) return 1;

	SetAdvertData(ad_id, A_CREATOR, 	playerid);
	SetAdvertData(ad_id, A_EDIT, 		false);

	format(g_advert[ad_id][A_TEXT], 128, message);

	g_advert_created ++;

	return 1;
}

stock DeleteAdvert(ad_id)
{
	if(!(0 <= ad_id <= g_advert_created - 1)) return 0;

	SetAdvertData(ad_id, A_CREATOR, 	INVALID_PLAYER_ID);
	SetAdvertData(ad_id, A_EDIT, 		false);

	format(g_advert[ad_id][A_TEXT], 128, "");

	if(ad_id == g_advert_created - 1 && ad_id != 0)
		g_advert_created --;

	return 1;
}


stock CheckPlayerDistanceToPoint(playerid, Float:x, Float:y, Float:z, Float: distance)
{
	if(IsPlayerInRangeOfPoint(playerid, distance, x, y, z)) return 1;
	else return 0;
}

stock playermoney(playerid)
{
	return GetPlayerMoneyEx(playerid);
}

stock playername(playerid)
{
	new name[MAX_PLAYER_NAME]; GetPlayerName(playerid, name, MAX_PLAYER_NAME);
	return name;
}


stock FreezePlayer(playerid)
{
	ClearAnimations(playerid);
	TogglePlayerControllable(playerid, false);
}

stock UnFreezePlayer(playerid)
{
	ClearAnimations(playerid);
	TogglePlayerControllable(playerid, true);
} 


stock UpdateReporterText()
{
	new count,
		fmt_text[15];

	for(new idx; idx < g_advert_created; idx ++)
	{
		if(GetAdvertData(idx, A_EDIT) || GetAdvertData(idx, A_CREATOR) == INVALID_PLAYER_ID) continue;

		count ++;
	}

	format(fmt_text, sizeof fmt_text, "%d~n~Edit", count);

	TextDrawSetString(radio_edit_TD, fmt_text);
}

stock GetAdvertIndexInQueue(ad_id)
{
	new index;

	for(new idx; idx < g_advert_created; idx ++)
	{
		if(GetAdvertData(idx, A_EDIT) || GetAdvertData(idx, A_CREATOR) == INVALID_PLAYER_ID) continue;

		index ++;

		if(idx != ad_id) continue;
	}

	return index;
}

stock SendLog(playerid = INVALID_PLAYER_ID, type, desc[])
{
	new fmt_log[700];

	mysql_format(mysql, fmt_log, sizeof fmt_log, "INSERT INTO action_log (acc_id, uip, type, description, time) VALUES (%d, '%s', %d, '%s', %d)",
	GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), type, desc, gettime());

	mysql_query(mysql, fmt_log, false);

	return 1;
}

stock GetTruckIndex(vehicleid)
{
	if(GetVehicleModel(vehicleid) == 609)
		return 0;

	else if(GetVehicleModel(vehicleid) == 514 || GetVehicleModel(vehicleid) == 584)
		return 1;

	else
		return -1;
}

stock StartSpectate(playerid, for_player)
{
	if(GetPlayerAdminEx(playerid) < 1) return 1;

	SetPlayerSpectateData(playerid, S_PLAYER, for_player);

	SetPlayerInterior(playerid, GetPlayerInterior(for_player));
	SetPlayerVirtualWorld(playerid, GetPlayerVirtualWorld(for_player));

	TogglePlayerSpectating(playerid, true);

	PlayerSpectatePlayer(playerid, for_player);

	return 1;
}

stock StopSpectate(playerid)
{
	if(GetPlayerAdminEx(playerid) < 1) return 1;
	if(GetPlayerSpectateData(playerid, S_PLAYER) == -1) return 1;

	new Node:closeJson = JSON_Object();
    JSON_SetInt(closeJson, "t", -1); // ??? ?????? ???? ???????ù
    JSON_SetBool(closeJson, "isInterfaceVisible", false);
        
    ShowPlayerGUI(playerid, 66, closeJson);
    JSON_Cleanup(closeJson);

	TogglePlayerSpectating(playerid, false);
	SetPlayerSpectateData(playerid, S_PLAYER, -1);

	return 1;
}

stock UpdateSpectate(playerid, disconnect)
{
	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		else if(!IsPlayerLogged(i)) continue;
		else if(GetPlayerAdminEx(i) < 1) continue;
		else if(GetPlayerSpectateData(i, S_PLAYER) != playerid) continue;

		if(disconnect)
		{
			StopSpectate(i);
			ShowNotificationNew(i, 0, 5, 0, 0, "????? ?? ??????? ?? ????????? ?????", "");
		}
		else
		{
			PlayerSpectatePlayer(i, playerid);
		}
	}
	return 1;
}

new const
	weapon_names[47][40] =
{
	"?????",
	"??????",
	"?????? ??ù ??????",
	"???????",
	"???",
	"????",
	"??????",
	"???",
	"??????",
	"?????????",
	"???????",
	"?????",
	"????????",
	"??????ù??? ????????",
	"?????",
	"ù????",
	"???????",
	"??????ù ???????",
	"???????? ????????",
	"?????",
	"?????",
	"?????",
	"????????",
	"???????????",
	"????????? ????",
	"????????",
	"?????",
	"ù?????????? ????????",
	"Micro-Uzi",
	"MP5",
	"AK-47",
	"M4",
	"TEC-9",
	"???????? ?????????",
	"??????????ù ???????? ?????????",
	"???",
	"?????????ù??ù?ù ?????????",
	"???????",
	"???????",
	"C4",
	"?????? ??????????",
	"?????????",
	"????????????",
	"???????????",
	"???? ??????? ??????ù",
	"???? ? ????????????",
	"???????"
};

new const
	weapon_dialog_tabulation[47][7] =
{
	"\t\t\t",
	"\t\t\t",
	"\t",
	"\t\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t",
	"\t",
	"\t\t\t",
	"\t\t",
	"\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t",
	"\t",
	"\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t",
	"\t",
	"\t",
	"\t\t",
	"\t\t\t",
	"\t",
	"\t\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t\t",
	"\t\t",
	"\t",
	"\t\t\t",
	"\t",
	"\t\t",
	"\t\t",
	"\t\t\t",
	"\t",
	"\t\t",
	"\t\t",
	"\t\t",
	"\t",
	"\t",
	"\t\t"
};

// ---------------------------------------------------------------
new const
	skill_name[12][16] =
{
	"????",
	"Colt 45",
	"SD Pistol",
	"Desert Eagle",
	"Shotgun",
	"MP5",
	"AK47",
	"M4",
	"Sniper Rifle",
	"Sawnoff",
	"Combat SG",
	"Micro Uzi"
};

// ---------------------------------------------------------------


enum
{
	LOG_TYPE_ADMIN_CHAT = 1,
	LOG_TYPE_ADMIN_ANSWER,
	LOG_TYPE_ADMIN_ACTION,
	LOG_TYPE_SET_ADMIN,
	LOG_TYPE_SET_LEADER,
	LOG_TYPE_SMS_CHAT,
	LOG_TYPE_OOC_CHAT,
	LOG_TYPE_REPORT,
	LOG_TYPE_FRACTION,
	LOG_TYPE_SUPERADMIN_ACTION
}

new const log_names[10][37] =
{
	"????????????????? ???",
	"?????? ?? ???????",
	"????????????????? ???????ù",
	"?????? ????????????????? ????",
	"?????? ????????? ????",
	"??? ????????ù",
	"????????ù ? ????? ???",
	"???????/?????? ? ??????",
	"???????ù ?? ????? ??????",
	"???????ù ???????? ??????????????"
};
// ---------------------------------------------------------------
new
	g_donate_prices[] =
{
	2000, 8, 65, 1, 4, 249, 1, 299, 99, 100, 400, 49, 49, 299, 250, 55, 300, 88, 400, 100, 400, 600, 800, 30000
}; // ???? ?? ?????? ? ???? ?????????????

enum
{
	DONATE_PRICE_MONEY = 0,
	DONATE_PRICE_NAME,
	DONATE_PRICE_WARNS,
	DONATE_PRICE_DRUGS,
	DONATE_PRICE_LAW_ABIDING,
	DONATE_PRICE_PHONE_NUMBER,
	DONATE_PRICE_SKILLS,
	DONATE_PRICE_CAR_NUMBER,
	DONATE_PRICE_CAR_SLOT,
	DONATE_PRICE_LIC_PACK,
	DONATE_PRICE_PREMIUM_ACCOUNT,
	// ADONATE
	DONATE_PRICE_A_UNWARN,
	DONATE_PRICE_A_SETPASS,
	DONATE_PRICE_A_INVISIBLE,
	DONATE_PRICE_A_PREFIX,
	DONATE_PRICE_A3D_PREFIX,
	DONATE_PRICE_FAMILY,
	DONATE_PRICE_GIFT,
	DONATE_PRICE_SKIN,
	DONATE_PRICE_ZAM,
	//
	DONATE_PRICE_BRONSE,
	DONATE_PRICE_SILVER,
	DONATE_PRICE_GOLD,
	DONATE_PRICE_ANTIBH,
}
// ---------------------------------------------------------------
new
	bool: g_doubling[3] =
{
	true, true, true
};

enum
{
	DOUBLING_DONATE = 0,
	DOUBLING_EXP,
	DOUBLING_WAGE,
}

// ---------------------------------------------------------------
// ??? ????
enum
{
	TEAM_NONE = 0,
	// ----
	TEAM_GOVERNMENT, // ????????????? 1
	// ----
	TEAM_ARMY, // ???????ù ????? 2
	// ----
	TEAM_HOSPITAL, // ????????ù ???????? 3
	// ----
	TEAM_RADIO, // ??? 4
	// ----
	TEAM_DPS, // ????? 5
	TEAM_PPS, // ???? 6
	TEAM_FBI, // ??? 7
	TEAM_FSIN, // ???? 8
	// ----
	TEAM_OPG_ARZAMASKAYA = 9, // ??????????ù ???
	TEAM_OPG_BATYREVSKAYA = 10, // ??????????ù ???
	TEAM_OPG_LYTKARINSKAYA = 11 // ???????????ù ???
};

#define MAX_ORG 12

#define GetPlayerTeamName(%0) g_organization[GetPlayerTeamEx(%0)][O_NAME]
#define GetPlayerTeamColor(%0) g_organization[GetPlayerTeamEx(%0)][O_COLOR]

new const
	team_subdivision_name[4][32] =
{
	"???",
	"????? ??????? ?1 (?????)",
	"????? ??????? ?2 (????)",
	"???"
};

enum
	E_ORG_DATA
{
	O_NAME[32],
	O_SKINS[10],
	O_WOMEN_SKIN,
	Float: O_SPAWN[4],
	Float: O_REPOSITORY_POS[3],
	O_SPAWN_INT,
	O_SPAWN_VW,
	O_COLOR,
	O_PRICE,
	O_LEADER[64],
};

new
	g_organization[MAX_ORG][E_ORG_DATA] =
{
	{"???",										{0, 0, 0, 0, 0, 0, 0, 0, 0, 0},		0,		{0.0,0.0,0.0,0.0},							{0.0, 0.0, 0.0}, 					0, 0, 0xFFFFFF11, 0, ""},
	{"????????????? ???????",					{17,187,227,147,147,141,141,141,141,147}, 141, 	{-870.575134,-1580.093627,1398.461059,95.966629}, 		{0.0, 0.0, 0.0}, 					1, 1, 0xCCFF00FF, 450, ""},
	{"???????ù ?????",							{179,253,287,61,61,191,31,31,31,61}, 191, 	{1817.029907,1700.969116,1493.047119,94.826721},	{2883.7461,1444.4747,1050.9984}, 	1, 1, 0x996633FF, 250, ""},
	{"????????ù ????????",						{274,275,276,70,70,304,69,305,305,70},	304, 	{1496.149658,2527.073730,2501.000000,264.984924}, 	{0.0, 0.0, 0.0},					1, 1, 0xFF6666FF, 150, ""},
	{"???",								{184,188,261,186,186,263,263,263,263,186},	263, 	{1981.5616,-17.8172,1381.0035,354.2428}, 	{0.0, 0.0, 0.0}, 					1, 1, 0xFF6600FF, 250, ""},
	{"?????",				{282,281,308,280,288,76,309,309,309,288},	76, 	{-1094.254394,1523.638549,1499.947265,177.775161},	{0.0, 0.0, 0.0}, 					1, 1, 0x0000FFFF, 450, ""},
	{"????",					{284,285,277,15,15,265,251,251,251,15}, 265, 	{-1094.254394,1523.638549,1499.947265,177.775161}, 	{0.0, 0.0, 0.0}, 					1, 2, 0x0000FFFF, 450, ""},
	{"???", 									{286,163,72,164,164,54,150,150,150,164}, 54, 	{2911.483398,1991.545776,2050.988525,358.470306}, 	{0.0, 0.0, 0.0}, 					1, 1, 0x0000FFFF, 300, ""},
	{"????", 									{4,32,26,26,26,93,64,38,38,26}, 93, 	{-1877.69,-2728.61,8.62,230.41}, 	{0.0, 0.0, 0.0}, 					0, 0, 0x00A8D8E6, 300, ""},
	{"??????????ù ???",							{112,113,119,111,111,148,148,148,148,111},	148, 	{-9.807738,495.974731,1381.009521,266.401397}, 		{-10.164318,489.312469,1381.002197},		1, 1, 0x009900FF, 450, ""},
	{"??????????ù ???",							{116,114,115,117,117,193,193,193,193,117},	193, 	{-9.807738,495.974731,1381.009521,266.401397}, 	{-10.164318,489.312469,1381.002197},	1, 2, 0x6666FFFF, 350, ""},
	{"???????????ù ???",						{104,103,102,105,105,195,195,195, 195,105},	195, 	{-9.807738,495.974731,1381.009521,266.401397}, 		{-10.164318,489.312469,1381.002197},		1, 3, 0xFFCD00FF, 250, ""}
};

enum E_ORG_CAR_DATA
{
    O_NAME[32],
    Float:O_PICKUP[3],
    O_COUNT,
    O_MODEL[5],
    O_COLOR[2],
    O_FRAC_ID,
    O_PICKUP_ID,
}

new g_org_car[11][E_ORG_CAR_DATA] =
{
	{
        "?????????????",
        // PICKUP POS
        {-2605.81, 2259.34, 58.19},
        // COUNT
        0,
        // MODEL
        {540,550,490,2558},
        // COLOR ONE/TWO
        {1,1},
        // FRAC ID
        1,
        // PICKUP ID
        -1,
    },
    {
        "????ù",
        // PICKUP POS
        {1683.516235,1688.854736,15.971530},
        // COUNT
        0,
        // MODEL
        {433,470,2560,550},
        // COLOR ONE/TWO
        {99,1},
        // FRAC ID
        2,
        // PICKUP ID
        -1,
    },

    {
        "????????",
        // PICKUP POS
        {-250.90, 547.33, 12.85},
        // COUNT
        0,
        // MODEL
        {416,516,0,0},
        // COLOR ONE/TWO
        {1,1},
        // FRAC ID
        3,
        // PICKUP ID
        -1,
    },
    {
        "???",
        // PICKUP POS
        {2382.91, -1821.48, 21.85},
        // COUNT
        0,
        // MODEL
        {582,2584,0,0},
        // COLOR ONE/TWO
        {0,1},
        // FRAC ID
        4,
        // PICKUP ID
        -1,
    },


    {
        "????????? ?????", //?????
        // PICKUP POS
        {1931.26, -2236.85, 11.19},
        // COUNT
        0,
        // MODEL
        {598,596,0,0},
        // COLOR ONE/TWO
        {1,1},
        // FRAC ID
        5,
        // PICKUP ID
        -1,
    },
    {
        "????????? ????", //????
        // PICKUP POS
        {2577.19, -2432.73, 21.99},
        // COUNT
        0,
        // MODEL
        {597,598,2562,2587},
        // COLOR ONE/TWO
        {1,1},
        // FRAC ID
        6,
        // PICKUP ID
        -1,
    },

    {
        "???", //????
        // PICKUP POS
        {-2341.42, -431.73, 29.44},
        // COUNT
        0,
        // MODEL
        {550,2547,2558,440},
        // COLOR ONE/TWO
        {0,1},
        // FRAC ID
        7,
        // PICKUP ID
        -1,
    },

    {
        "????",
        // PICKUP POS
        {-1857.76,-2775.86,7.61},
        // COUNT
        0,
        // MODEL
        {2562,2556,427,456},
        // COLOR ONE/TWO
        {1,1},
        // FRAC ID
        8,
        // PICKUP ID
        -1,
    }, 

    {
        "??? ????????",
        // PICKUP POS
        {407.96,1037.53,12.0},
        // COUNT
        0,
        // MODEL
        {426,421,418,579},
        // COLOR ONE/TWO
        {0,0},
        // FRAC ID
        9,
        // PICKUP ID
        -1,
    },

    {
        "??? ????????",
        // PICKUP POS
        {1950.042724,2152.681884,15.705187},
        // COUNT
        0,
        // MODEL
        {426,421,418,579},
        // COLOR ONE/TWO
        {0,0},
        // FRAC ID
        10,
        // PICKUP ID
        -1,
    },

    {
        "???????????ù ???",
        // PICKUP POS
        {-2397.14,64.78,27.21},
        // COUNT
        0,
        // MODEL
        {426,421,418,579},
        // COLOR ONE/TWO
        {0,0},
        // FRAC ID
        11,
        // PICKUP ID
        -1,
    }
};


new
    Float: org_car_pos_spawn[11][4][4] =
{
	{   // ????ù
        {-2620.14,2247.75,57.95,91.68},
        {-2620.05,2250.81,57.95,91.68},
        {-2620.29,2253.78,57.95,91.68},
        {-2620.13,2256.69,57.95,91.68}
    },

    {   // ????ù
        {1675.44,1697.67,15.59,269.31},
        {1675.25,1691.86,15.59,269.31},
        {1707.39,1697.74,15.61,85.28},
        {1707.53,1691.80,15.61,85.28} 
    },

    {   // ????????
        {-278.69,541.39,11.88,258.28},
        {-278.72,544.62,12.00,258.28},
        {-278.72,544.62,12.00,258.28},
        {-278.69,541.39,11.88,258.28} 
    },

    {   // ?????
        {2381.88,-1831.46,21.09,185.38},
        {2381.88,-1831.46,21.09,185.38},
        {2381.88,-1831.46,21.09,185.38},
        {2381.88,-1831.46,21.09,185.38} 
    },
    {   // ?????
        {1935.83,-2232.66,10.89,179.23},
        {1939.27,-2232.56,10.89,179.23},
        {1942.53,-2232.58,10.89,179.23},
        {1945.83,-2232.63,10.89,179.23} 
    },

    {   // ????
        {2574.71,-2446.35,21.08,2.06},
        {2571.05,-2446.32,21.08,2.06},
        {2571.05,-2446.32,21.08,2.06},
        {2574.71,-2446.35,21.08,2.06} 
    },


    {   // ???
        {-2346.66,-446.83,28.63,1.14},
        {-2349.42,-446.95,28.63,1.14},
        {-2352.13,-447.03,28.63,1.14},
        {-2355.33,-447.13,28.63,1.14} 
    },

    {   // ????
        {-1850.83,-2765.74,7.28,323.60},
        {-1848.12,-2767.87,7.28,323.60},
        {-1842.88,-2771.89,7.28,323.60},
        {-1845.21,-2770.31,7.28,323.60}
    }, 

    {   // ??? ???????
        {396.45,1033.54,11.50,354.46},
        {391.62,1034.05,11.50,354.46},
        {383.92,1044.05,11.4,174.41},
        {380.98,1044.40,11.46,174.41}
    },

    {   // ??? ????????
        {1947.057128,2167.904541,15.694192,89.662925},
        {1947.151123,2164.170654,15.694192,90.881637},
        {1947.263183,2160.795898,15.695243,87.127212},
        {1947.158203,2156.712402,15.704269,89.654975}
    },
    {   // ??? ?????????
        {-2397.29,45.50,25.93,89.39},
        {-2397.29,42.49,25.93,89.39},
        {-2397.29,39.48,25.93,89.39},
        {-2397.30,36.13,25.93,89.39}
    }
};


new const
	rank_names[11][10][50] =
{
	// ????????????? ???????
	{"????????", "????????", "????????? ??????", "?????????", "????????", "????????", "???????", "???????", "????-??????????", "??????????"},

	// ???????ù ?????
	{"?ù?????", "????????", "???????", "????????", "?????????", "?????????", "???????", "?????", "????????????", "?????????"},

	// ????????ù ????????
	{"??????", "?????????", "????????", "????????", "???????", "ù???????", "ù??????????", "??????", "??????????", "????. ????"},

	// ???
	{"??????????", "????????", "?????????", "?????????????", "???????", "????????", "??????????", "????????", "????????", "????????"},

	// ????? ??????? ?1 (?????)
	{"?ù?????", "????????", "???????", "????????", "?????????", "?????????", "???????", "?????", "????????????", "?????????"},

	// ????? ??????? ?2 (????)
	{"?ù?????", "????????", "???????", "????????", "?????????", "?????????", "???????", "?????", "????????????", "?????????"},

	// ???
	{"?ù?????", "????????", "???????", "????????", "?????????", "?????????", "???????", "?????", "????????????", "?????????"},

	// ????
	{"?ù?????", "????????", "???????", "????????", "?????????", "?????????", "???????", "?????", "????????????", "?????????"}, 

	// ??????????ù ???
	{"?????", "?????", "?????", "??????", "???????", "???ù?", "??????", "?????ù???", "?????????", "??? ? ??????"},

	// ??????????ù ???
	{"?????", "?????", "?????", "??????", "???????", "???ù?", "??????", "?????ù???", "?????????", "??? ? ??????"},

	// ???????????ù ???
	{"?????", "?????", "?????", "??????", "???????", "???ù?", "??????", "?????ù???", "?????????", "??? ? ??????"}
};

new const
	rank_wages[8][10] =
{
	{50000, 60000, 65000, 70000, 70000, 70000, 70000, 80000, 85000, 90000}, // ????????????? ???????
	{50000, 60000, 65000, 70000, 70000, 70000, 70000, 80000, 85000, 90000}, // ???????ù ?????
	{50000, 60000, 65000, 70000, 70000, 70000, 70000, 80000, 85000, 90000}, // ????????ù ????????
	{50000, 60000, 65000, 70000, 70000, 70000, 70000, 80000, 85000, 90000}, // ???
	{50000, 60000, 65000, 70000, 70000, 70000, 70000, 80000, 85000, 90000}, // ????? ??????? ?1 (?????)
	{50000, 60000, 65000, 70000, 70000, 70000, 70000, 80000, 85000, 90000}, // ????? ??????? ?2 (????)
	{50000, 60000, 65000, 70000, 70000, 70000, 70000, 80000, 85000, 90000},  // ???
	{50000, 60000, 65000, 70000, 70000, 70000, 70000, 80000, 85000, 90000}  // ????
};

// ------------------------------------------
#include "../include/system/pickup_fix_werton.pwn"
#include "welsi.inc"


stock rusificator(const input[], output[], outputSize)
{
    new i = 0, j = 0, c;
    while((c = input[i]) && j < outputSize - 1)
    {
        if (c >= 0 && c < 128)
        {
            output[j++] = c;
        }
        else
        {
            new uc;
            if (c >= 0xC0)
                uc = 0x410 + (c - 0xC0);
            else if (c == 0xA8)
                uc = 0x401;
            else if (c == 0xB8)
                uc = 0x451;
            else
                uc = c;

            if (uc < 0x800)
            {
                output[j++] = 0xC0 | (uc >> 6);
                output[j++] = 0x80 | (uc & 0x3F);
            }
            else
            {
                output[j++] = 0xE0 | (uc >> 12);
                output[j++] = 0x80 | ((uc >> 6) & 0x3F);
                output[j++] = 0x80 | (uc & 0x3F);
            }
        }
        i++;
    }
    output[j] = 0;
}

stock SendClientMessageRus(playerid, color, const message[])
{
    new output[448];
    rusificator(message, output, sizeof output);
    return SendClientMessage(playerid, color, output);
}

stock SendClientMessageToAllRus(color, const message[])
{
    new output[448];
    rusificator(message, output, sizeof output);
    return SendClientMessageToAll(color, output);
}

public SV_VOID:OnPlayerActivationKeyRelease(SV_UINT:playerid, SV_UINT:keyid)
{
    if (keyid == 0x42 && lstream[playerid]) SvDetachSpeakerFromStream(lstream[playerid], playerid);
    if (keyid == 0x5A && gstream) SvDetachSpeakerFromStream(gstream, playerid);
}


new family223;




#include "../gamemodes/ipacket.inc"
public OnGameModeInit()
{
	CreateTextDrawCLTHButtonBR();
	
	LoadTextDraw();

	vorotafrack();
	
	LoadBlackJack();

	
	for (new i = 0; i < sizeof g_fsinRooms; i++)
{
    CreateFSINRoomLabel(i);
    UpdateFSINRoomText(i);
}
	
	fsinobjects();
	
	Doorfrack();

    LoadSvetfor();
   
    InitGuardPosts();
   
   SetupCameraEntrances();
  
  SetupKarcerEntrances();
   
   for (new i = 0; i < MAX_VEHICLES; i++)
{
    g_delivery_unload_pickup[i] = -1;
    g_delivery_unload_area[i] = -1;
}
   
   for (new i = 0; i < MAX_VEHICLES; i++)
{
    g_delivery_load_pickup[i] = -1;
    g_delivery_load_area[i] = -1;
}
   
   g_armory_delivery_pickup = CreateDynamicPickup(
    2969, 23,
    1892.18, -1932.83, 34.01,
    -1, -1, -1,
    30.0 
);

g_armory_zagruzka_pickup = CreateDynamicPickup(
    2969, 23,
    1584.39, 1636.23, 16.07,
    -1, -1, -1,
    30.0
);

	ArmoryZagruzkaLabel();

	CreateDynamic3DTextLabel("{FFFF00}????? ù?????\n{FFFFFF}????????? ????? ??ù ?????????????ù", 0xFFFF00FF, 1892.18, -1932.83, 34.01 + 0.5, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}????? ù?????\n{FFFFFF}????????? ????? ??ù ?????????????ù", 0xFFFF00FF, 1584.39,1636.23,16.07 + 0.5, 10.0);
	
	

// ==================[tekst]
CreateDynamic3DTextLabel("<< ??????? >>\n\n{FFFFFF}??????? ??????? /auction\n{FFFFFF}??ù ?????????????ù", 0xFFFF00FF, 1000.065917,2509.815673,1497.982666 + 0.3, 5.0);
CreateDynamic3DTextLabel("????? ?? ????????", 0x3399FFEE, 2925.97,1999.94,2051.02 + 0.7, 5.0);

	CreateDynamic3DTextLabel("{FFFF00}???? ?1\n{FFFFFF}??????? /blackjack ??ù ?????????????ù", 0xFFFF00FF, 2508.173583,2464.578857,2499.664062 + 1.0, 10.0);
	stol1 = CreateDynamicSphere(2508.173583,2464.578857,2499.664062, 5.0);

	CreateDynamic3DTextLabel("{FFFF00}???? ?2\n{FFFFFF}??????? /blackjack ??ù ?????????????ù", 0xFFFF00FF, 2512.847412,2461.920166,2499.664062 + 1.0, 10.0);
	stol2 = CreateDynamicSphere(2512.847412,2461.920166,2499.664062, 5.0);

	CreateDynamic3DTextLabel("{FFFF00}???? ?3\n{FFFFFF}??????? /blackjack ??ù ?????????????ù", 0xFFFF00FF, 2509.147949,2455.435302,2499.664062 + 1.0, 10.0);
	stol3 = CreateDynamicSphere(2509.147949,2455.435302,2499.664062, 5.0);

	CreateDynamic3DTextLabel("{FFFF00}???? ?4\n{FFFFFF}??????? /blackjack ??ù ?????????????ù", 0xFFFF00FF, 2514.589843,2455.347167,2499.664062 + 1.0, 10.0);
	stol4 = CreateDynamicSphere(2514.589843,2455.347167,2499.664062, 5.0);

	CreateDynamic3DTextLabel("{FFFF00}???? ?5\n{FFFFFF}??????? /blackjack ??ù ?????????????ù", 0xFFFF00FF, 2512.984375,2448.713623,2499.664062 + 1.0, 10.0);
	stol5 = CreateDynamicSphere(2512.984375,2448.713623,2499.664062, 2.0);

	CreateDynamic3DTextLabel("{FFFF00}???? ?6\n{FFFFFF}??????? /blackjack ??ù ?????????????ù", 0xFFFF00FF, 2508.083984,2445.854980,2499.664062 + 1.0, 10.0);
	stol6 = CreateDynamicSphere(2508.083984,2445.854980,2499.664062, 5.0);
	
	Create3DTextLabel("{ffff00}????? (50)\n{ffff00}?????: ???????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 2744.195312,-2429.347167,21.781099 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (32)\n{ffff00}?????: ??????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 1801.870971,2531.611572,14.658257 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (78)\n{ffff00}?????: ?????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 847.433837,802.794616,13.378705 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (21)\n{ffff00}?????: ???????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, -2402.389892,194.550170,26.032144 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (49)\n{ffff00}?????: ?????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, -256.008636,573.953796,12.194987 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (65)\n{ffff00}?????: ???????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1,-1760.459106,791.015319,35.744747 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (22)\n{ffff00}?????: ???????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, -2322.793212,-150.507369,26.527236 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (42)\n{ffff00}?????: ????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, -112.912979,942.352966,12.214087 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (43)\n{ffff00}?????: ????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, -111.541137,905.045593,12.214187 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (44)\n{ffff00}?????: ????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 57.969646,942.911987,12.212887 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (45)\n{ffff00}?????: ????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 154.856292,586.634887,12.214087 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (38)\n{ffff00}?????: ??????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 1905.709228,2103.839843,15.697778 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (56)\n{ffff00}?????: ???????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 1888.656494,-2243.409423,11.075387 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (57)\n{ffff00}?????: ???????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 1912.993286,-2267.191406,11.091187 + 1.2, 15.0);

    Create3DTextLabel("{ffff00}????? (54)\n{ffff00}?????: ???????????? ???\n{ffffff}????????: {0099CC}???????????\n{ffff00}????????? ??ù ?????? ??????", 1, 2251.602783,-2110.579589,22.037588 + 1.2, 15.0);

    report_edit_TD = TextDrawCreate(7.499990, 314.444396, "REP:_0");
	TextDrawLetterSize(report_edit_TD, 0.400000, 1.600000);
	TextDrawAlignment(report_edit_TD, 1);
	TextDrawColor(report_edit_TD, -1);
	TextDrawSetShadow(report_edit_TD, 0);
	TextDrawSetOutline(report_edit_TD, 1);
	TextDrawBackgroundColor(report_edit_TD, 255);
	TextDrawFont(report_edit_TD, 1);
	TextDrawSetProportional(report_edit_TD, 1);
	TextDrawSetShadow(report_edit_TD, 0);

	ask_edit_TD = TextDrawCreate(6.249957, 330.518493, "ASK:_0");
	TextDrawLetterSize(ask_edit_TD, 0.400000, 1.600000);
	TextDrawAlignment(ask_edit_TD, 1);
	TextDrawColor(ask_edit_TD, -1);
	TextDrawSetShadow(ask_edit_TD, 0);
	TextDrawSetOutline(ask_edit_TD, 1);
	TextDrawBackgroundColor(ask_edit_TD, 255);
	TextDrawFont(ask_edit_TD, 1);
	TextDrawSetProportional(ask_edit_TD, 1);
	TextDrawSetShadow(ask_edit_TD, 0);
	
	admin_time_TD = TextDrawCreate(10.000000, 420.000122, "_");
	TextDrawLetterSize(admin_time_TD, 0.262385, 1.605833);
	TextDrawTextSize(admin_time_TD, -0.468522, -10.583328);
	TextDrawAlignment(admin_time_TD, 1);
	TextDrawColor(admin_time_TD, -1);
	TextDrawSetShadow(admin_time_TD, 0);
	TextDrawSetOutline(admin_time_TD, 1);
	TextDrawBackgroundColor(admin_time_TD, 255);
	TextDrawFont(admin_time_TD, 1);
	TextDrawSetProportional(admin_time_TD, 1);


// ==================[otdel]

    pickupotd = CreatePickup(1239,23,499.268341,1509.874511,1501.000000,1);
    
// ==================[redtart]
    
    SetTimer("AutoRestart", 60000, 1); // ?????? 60 ?????? ???????? ?????? AutoRestart ( 1 ???. = 1000)
    
// ==================[fama]

    //family223= CreatePickup(1314,23, -886.711730,-1568.088745,1398.461059);
    CreateDynamic3DTextLabel("{FFFF00}???????? ?????\n\n{FFFFFF}??ù ???????ù ????????? ?????", 0xFFFF00FF, -886.711730,-1568.088745,1398.461059 + 0.3, 10.0);
    CreatePickup(1314, 23, -886.711730,-1568.088745,1398.461059, 1, PICKUP_ACTION_TYPE_FAM);

    
//=================[??????????]

RazdewPravo = CreatePickup(1275, 23, -874.329650,-1577.651733,1398.461059, 1);
 	RazdewGibdd = CreatePickup(1275, 23, -1090.645629,1521.239990,1499.947265, 1);
 	RazdewMvd = CreatePickup(1275, 23, -1091.081298,1521.694213,1499.947265, 2);
 	RazdewFsb = CreatePickup(1275, 23, 2909.969238,1989.642822,2050.988525, 1);
 	RazdewBolka = CreatePickup(1275, 23, 1497.136596,2531.014892,2501.000000, 1);
 	RazdewTrk = CreatePickup(1275, 23, 1978.27,-17.70,1381.04, 1);

	RazdewArmy = CreatePickup(1275, 23, 1815.684570,1698.172729,1493.039794, 1);
	RazdewFSIN = CreatePickup(1275, 23, -1880.61,-2728.43,8.62, 0);
	RazdewArz = CreatePickup(1275, 23, -10.13,485.52,1381.04, 1);
	RazdewBat = CreatePickup(1275, 23, -10.13,485.52,1381.04, 2);
	RazdewLit = CreatePickup(1275, 23, -10.13,485.52,1381.04, 3);
	fsbspec = CreatePickup(1275, 23, 2913.33,1994.14,2051.02, 1);
	fsinmeet = CreatePickup(1314, 23, -2015.25,-1796.93,1501.18, 1);
	//------------------------------
    CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, -874.329650,-1577.651733,1398.461059, 10.0);
    CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, -1090.645629,1521.239990,1499.947265, 10.0);
   // CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, -1091.081298,1521.694213,1499.947265, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, 2909.969238,1989.642822,2050.988525, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, 1497.136596,2531.014892,2501.000000, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, 1978.27,-17.70,1381.04, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, 1815.684570,1698.172729,1493.039794, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, -1880.61,-2728.43,8.62, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ?????????? >>\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, -10.13,485.52,1381.04, 10.0);
	CreateDynamic3DTextLabel("{FFFFFF}?????????? ?? {FFFF00}????. ???????\n{FFFFFF}????????? ??ù ?????????????ù", 0xFFFF00FF, 2913.33,1994.14,2051.02, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ?????????? ??? >>\n\n{FFFFFF}????????? ????? ??ù ?????????????ù", 0xFFFF00FF, 1910.61, 1728.09, 16.95, 4.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ????? ????? ?? ?????ù\n??ù ???????? >>\n\n{FFFFFF}???????? ?? ?????\n??ù ?????? ?? ????????ù", 0xFFFF00FF, -2014.02,-1800.00,1501.34 + 0.8, 4.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ????? ?? ?????ù\n??ù ???????? >>\n\n{FFFFFF}???????? ?? ?????\n??ù ?????? ?? ????????ù", 0xFFFF00FF, -2027.17,-1799.95,1501.20 + 0.8, 3.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ?????? ????????>>\n\n{FFFFFF}???????? ?? ?????\n??ù ????????? ??????????", 0xFFFF00FF, -2015.25,-1796.93,1501.18, 6.0);
	

    //???? ?????? ????? werton ??
	testrazdevminner = CreatePickup(1275, 23, 540.114135,514.767639,1000.287170);

   //????? ???? ??????
    koika1 = CreateDynamicSphere(1486.96, 2496.20, 2501.60, 2.0);
	koika2 = CreateDynamicSphere(1487.08, 2492.86, 2501.60, 2.0);
	koika3 = CreateDynamicSphere(1482.71, 2492.71, 2501.60, 2.0);
	koika4 = CreateDynamicSphere(482.72, 2496.41, 2501.60, 2.0);
	koika5 = CreateDynamicSphere(1484.96, 2504.06, 2501.60, 2.0);
	koika6 = CreateDynamicSphere(1484.72, 2507.10, 2501.60, 2.0);
	koika7 = CreateDynamicSphere(1480.52, 2507.26, 2501.60, 2.0);
	koika8 = CreateDynamicSphere(1480.38, 2503.78, 2501.60, 2.0);
	koika9 = CreateDynamicSphere(1471.71, 2496.20, 2501.60, 2.0);
	koika10 = CreateDynamicSphere(1471.60, 2492.82, 2501.60, 2.0);
	koika11 = CreateDynamicSphere(1467.40, 2492.95, 2501.60, 2.0);
	koika12 = CreateDynamicSphere(1467.36, 2496.46, 2501.60, 2.0);
	koika13 = CreateDynamicSphere(1473.69, 2503.78, 2501.60, 2.0);
	koika14 = CreateDynamicSphere(1473.90, 2507.18, 2501.60, 2.0);
	koika15 = CreateDynamicSphere(1469.51, 2507.27, 2501.60, 2.0);
	koika16 = CreateDynamicSphere(1469.47, 2504.00, 2501.60, 2.0);
	koika17 = CreateDynamicSphere(1486.96, 2496.20, 2506.60, 2.0);
	koika18 = CreateDynamicSphere(1487.08, 2492.86, 2506.60, 2.0);
	koika19 = CreateDynamicSphere(1482.71, 2492.71, 2506.60, 2.0);
	koika20 = CreateDynamicSphere(482.72, 2496.41, 2506.60, 2.0);
	koika21 = CreateDynamicSphere(1484.96, 2504.06, 2506.60, 2.0);
	koika22 = CreateDynamicSphere(1484.72, 2507.10, 2506.60, 2.0);
	koika23 = CreateDynamicSphere(1480.52, 2507.26, 2506.60, 2.0);
	koika24 = CreateDynamicSphere(1480.38, 2503.78, 2506.60, 2.0);
	koika25 = CreateDynamicSphere(1471.71, 2496.20, 2506.60, 2.0);
	koika26 = CreateDynamicSphere(1471.60, 2492.82, 2506.60, 2.0);
	koika27 = CreateDynamicSphere(1467.40, 2492.95, 2506.60, 2.0);
	koika28 = CreateDynamicSphere(1467.36, 2496.46, 2506.60, 2.0);
	koika29 = CreateDynamicSphere(1473.69, 2503.78, 2506.60, 2.0);
	koika30 = CreateDynamicSphere(1473.90, 2507.18, 2506.60, 2.0);
	koika31 = CreateDynamicSphere(1469.51, 2507.27, 2506.60, 2.0);
	koika32 = CreateDynamicSphere(1469.47, 2504.00, 2506.60, 2.0);

	CreateDynamic3DTextLabel("{FFFF00}<< ???? ????? >>\n\n{FFFFFF}????????? ?????\n{FFFFFF}??ù ?????????????ù", 0xFFFF00FF, 1466.26, 2500.16, 2501.60, 10.0);
	CreateDynamic3DTextLabel("{FFFF00}<< ???? ???? >>\n\n{FFFFFF}????????? ?????\n{FFFFFF}??ù ?????????????ù", 0xFFFF00FF, 1466.26, 2500.16, 2506.60, 10.0);

CreateDynamic3DTextLabel("{f6fa05}???????? ?????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 2311.418945,-2607.487304,21.808467, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}???????? ?????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 2311.424804,-2613.460937,21.808467, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}???????? ?????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 2311.318603,-2619.407470,21.808467, 9.0, _, _, _, -1, -1);
    
    CreateDynamic3DTextLabel("{FFFF00}???????? ????? (33)\n{228B22}?????? ?????????ù ?? ????????\n{228B22}?????: ???????????\n{FFFF00}????????? ??ù ?????????????ù", 0xFFFF00FF, 2311.739990,-2601.705810,21.805349 + 0.9, 10.0);
    tehsentervlad = CreatePickup(1318,23,2311.739990,-2601.705810,21.805349,0);

	//=============================
    AntiDeAMX2();
	AntiDeAMX();
	new hour;
	gettime(hour);
	load_tuning();
	gstream = SvCreateGStream(0xffff0000, "Global");

	SetWorldTime(hour);
	AddPlayerClass(0, 0.0, 0.0, 0.0, 0.0, 0, 0, 0, 0, 0, 0);
	
	//LoadMySQLSettings();
	
	CreateGreenZones();
	
    //SetTimer("jonny", 1000, 1); // -- ????ù ????? ??????? ???????ù??ù ???? ? ????

	
	
	//CreateDynamic3DTextLabel("???????? ???????\n/bankomat", 0xFFFF00FF, 2908.593750,2485.025878,1051.000000 + 1.8, 10.0);
	//CreateDynamic3DTextLabel("{ffff00}????? ?23\n{ffffff}????????:{ff0000}Enzo_Ludovic\n{EB4C42}????? ??????", 0xFFFF00FF, 501.124755,276.682281,13.223153 + 0.5, 10.0);
	medka = CreatePickup(1318, 23, 1501.575927,2498.214843,2501.000000);
    Create3DTextLabel("{ffff00}´ ????????? ???. ????? ª\n{ffffff}????????? ?????\n??ù ?????????????ù", -1, 1501.584228,2498.212158,2501.000000, 15.0, 1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 1963.987792,-546.881042,12.344052, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 1956.944213,-546.849548,12.348891, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 1949.870971,-546.380981,12.420888, 9.0, _, _, _, -1, -1); //
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 1943.005126,-546.514587,12.400360, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 1935.871093,-546.598449,12.387474, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 1970.980102,-546.651245,12.379362, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 1985.850708,-546.406677,12.416940, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 1992.923095,-546.738647,12.365932, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 482.254608,954.700195,1001.000000, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 499.931915,918.361816,1001.000000, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 481.850952,1081.980712,1001.000000, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 561.913696,1018.296691,1001.000000, 9.0, _, _, _, -1, -1); //
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 553.966735,918.125732,1001.000000, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 473.902709,1018.365661,1001.000000, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 553.964111,1082.194213,1001.000000, 9.0, _, _, _, -1, -1);
    CreateDynamic3DTextLabel("{f6fa05}?????????\n{ffffff}???????: {e81717}'?????' {ffffff}?????ù?? ? ??????", -1, 562.388244,963.125244,1001.000000, 9.0, _, _, _, -1, -1);
    pkvxod = CreatePickup(1318, 23, -2383.645751,31.737224,27.031343, -1, PICKUP_PKVXOD);
pkvixod = CreatePickup(1318, 23, 1312.644531,1711.863281,1498.363159, 0, PICKUP_PKVIXOD);


   
   
avtorinokz = CreatePickup(1318, 23, 1981.001586,-545.951904,12.500099);
avtorinokv = CreatePickup(1318, 23, 437.292938,982.754150,1001.000000);
	
	//==============[?????? ???]===============
	
	CreateActor(20, 294.588439,2148.936279,1356.900878,10.944473);
	CreateActor(62, -697.602050, 104.546569, 16.380235, 41.612815);
	CreateDynamic3DTextLabel("{FFFF00}??????\n????????? ????????.", -697.602050,104.546569,16.380235 + 1.8, 10.0);
    CreateDynamic3DTextLabel("??????", 0xFFFF00FF, 1817.349975,2900.032958,21.888763 + 1.8, 10.0);

	SendRconCommand("hostname "SERVER_NAME"");
	SendRconCommand("weburl www."SERVER_SITE"");
	SendRconCommand("mapname "SERVER_MAP_NAME"");
	
	SendRconCommand("ackslimit 10000");

	ShowNameTags(true);
	DisableInteriorEnterExits();
	EnableStuntBonusForAll(false);
	ManualVehicleEngineAndLights();
	ShowPlayerMarkers(PLAYER_MARKERS_MODE_STREAMED);
	SetNameTagDrawDistance(30.0);

	// -- streamer

	//Streamer_SetMaxItems(STREAMER_TYPE_MAP_ICON, 98);
	Streamer_SetVisibleItems(STREAMER_TYPE_MAP_ICON, 98);
	Streamer_SetVisibleItems(STREAMER_TYPE_OBJECT, 650); // Default: 500
	
	// -- custom-side-brilliant
    Iter_Init(streamed_players_in_veh);
    Iter_Init(vehicle_in_stream);

	Streamer_ToggleErrorCallback(true);
	//Streamer_SetTickRate(40); // Default: 50

	//LimitPlayerMarkerRadius(200.0);
	//LimitGlobalChatRadius(30.0);
	
	CreatePickup(1239,23,-316.1636,400.8567,13.5937,0,PICKUP_ACTION_OBMEN_MONET);

    CreatePickup(1239,23,1301.493896,1704.872924,1498.363159,0, PICKUP_ACTION_TYPE_MPREG);

  
    
/*    CreateActor(236, 652.252075,173.563812,2.041145,183.585617);
    Create3DTextLabel("{ffff00}??????? ?????\n{ffffff}????????? ??ù ?????????????ù", -1, 652.252075,173.563812,2.041145, 15.0, 0);
    
    CreateActor(236, 2272.684570,309.651611,4.000000,344.699798);
    Create3DTextLabel("{ffff00}??????? ?????\n{ffffff}????????? ??ù ?????????????ù", -1, 2272.684570,309.651611,4.000000, 15.0, 0);
    
    CreateActor(236, 2500.639648,-1252.934204,1.396202,207.274276);
    Create3DTextLabel("{ffff00}??????? ?????\n{ffffff}????????? ??ù ?????????????ù", -1, 2500.639648,-1252.934204,1.396202, 15.0, 0);
    
    CreateActor(236, -2527.409423,358.139892,2.060437,144.376846);
    Create3DTextLabel("{ffff00}??????? ?????\n{ffffff}????????? ??ù ?????????????ù", -1, -2527.409423,358.139892,2.060437, 15.0, 0);
    */
    //------------------------------------------------------------------------------------------
    helpspawn = CreateDynamicSphere(-2433.244140,186.891983,26.095102, 2.0);
    CreateActor(98, -2433.244140,186.891983,26.095102,308.512725);
    Create3DTextLabel("{ffff00}??ù ????????\n{ffffff}?????? ?? ????", -1, -2433.244140,186.891983,26.095102, 15.0, 0);
    
    helpspawn = CreateDynamicSphere(1816.017578,2510.523437,14.664855, 2.0);
    CreateActor(98, 1816.017578,2510.523437,14.664855,211.883209);
    Create3DTextLabel("{ffff00}??ù ????????\n{ffffff}?????? ?? ????", -1, 1816.017578,2510.523437,14.664855, 15.0, 0);

    helpspawn = CreateDynamicSphere(2741.403564,-2433.814697,21.781099, 2.0);
    CreateActor(98, 2741.403564,-2433.814697,21.781099,231.110839);
    Create3DTextLabel("{ffff00}??ù ????????\n{ffffff}?????? ?? ????", -1, 2741.403564,-2433.814697,21.781099, 15.0, 0);
    
    helpspawn = CreateDynamicSphere(840.062255,787.889404,13.346978, 2.0);
    CreateActor(98, 840.062255,787.889404,13.346978,4.800282);
    Create3DTextLabel("{ffff00}??ù ????????\n{ffffff}?????? ?? ????", -1, 840.062255,787.889404,13.346978, 15.0, 0);

    
    CreateActor(57, -1721.147827,-2815.024169,7.582671,132.815338);
    Create3DTextLabel("{ffff00}´ ???? ª\n{ffffff}????????? ?????\n??ù ?????????????ù", -1, -1721.147827,-2815.024169,7.582671, 15.0, 0);
    
    Create3DTextLabel("{ffff00}????? ??????\n{ffffff}????????? ????? ??ù ?????????????ù", -1, -1698.703979,-2698.262695,1499.500000, 15.0, 6);
    

   

 
   NPC_Dityukovich = CreateActor(34, 1633.826660,1294.855712,12.221715,310.005340);
   pickupferma = CreatePickup(1275, 23, 1634.798217,1295.547119,12.204029);
   CreateDynamic3DTextLabel("[NPC]\n ?????????", 0xFFFF00FF, 1633.826660,1294.855712,12.221715 + 1.8, 10.0);
  
  //--------------------[?????????]------------------
	CreateDynamic3DTextLabel("????????\n{FFFFFF}??ù ?????????????ù {FFD700}/bankomat", 0x006400FF, 2879.75,2498.69,1051.04 + 0.2, 10.0); // ???????? ? ????? 
	CreateDynamic3DTextLabel("????????\n{FFFFFF}??ù ?????????????ù {FFD700}/bankomat", 0x006400FF, 2879.75,2501.08,1051.04 + 0.2, 10.0); // ???????? ? ?????
	CreateDynamic3DTextLabel("????????\n{FFFFFF}??ù ?????????????ù {FFD700}/bankomat", 0x006400FF, 2879.75,2503.48,1051.04 + 0.2, 10.0); // ???????? ? ?????
	CreateDynamic3DTextLabel("????????\n{FFFFFF}??ù ?????????????ù {FFD700}/bankomat", 0x006400FF, 2879.75,2505.94,1051.04 + 0.2, 10.0); // ???????? ? ?????
	CreateDynamic3DTextLabel("????????\n{FFFFFF}??ù ?????????????ù {FFD700}/bankomat", 0x006400FF, 2879.75,2508.32,1051.04 + 0.2, 10.0); // ???????? ? ?????
	CreateDynamic3DTextLabel("????????\n{FFFFFF}??ù ?????????????ù {FFD700}/bankomat", 0x006400FF, 2879.75,2510.91,1051.04 + 0.2, 10.0); // ???????? ? ?????
	CreateDynamic3DTextLabel("????????\n{FFFFFF}??ù ?????????????ù {FFD700}/bankomat", 0x006400FF, 1551.05,411.32,1001.03 + 0.4, 10.0); // ???????? ? 24/7
   
	CreateDynamic3DTextLabel("????? ?? ??????", 0xFFFF00FF, -886.710144,-1572.791381,1398.461059 + 0.7, 10.0);
	CreatePickup(1210, 23, -886.710144,-1572.791381,1398.461059, 1, PICKUP_ACTION_TYPE_MAYOR_JOB);

	
	CreateDynamic3DTextLabel("????????? ??????????", 0xFFD700FF, -2559.474365,-299.025604,27.260526 + 0.3, 5.0);
	mchsavto = CreatePickup(1239, 23, -2559.474365,-299.025604,27.260526, 0);
	CreateDynamic3DTextLabel("{FFFFFF}????????? ??ù{FFFF00} ?????????????ù", 0xFFD700FF, -2615.92,-282.03,1252.04 + 0.3, 5.0);
	mchsrazdewalka = CreatePickup(1275, 23, -2615.92,-282.03,1252.04, 0);

	mchsexit = CreatePickup(1275, 23, -2615.92,-282.03,1252.04, 0);
	mchsvhod = CreatePickup(1275, 23, -2615.92,-282.03,1252.04, 0);

CreateDynamic3DTextLabel("????????????? ???????", 0xFFFF00FF, 978.711975,-18.241992,1380.996215, -1 + 1.0, 10.0);
vxodpravo = (1318, 23, 978.711975,-18.241992,1380.996215, 1);

CreateDynamic3DTextLabel("?????", 0xFFFF00FF, 980.241271,-20.293521,1380.996215, -1 + 1.0, 10.0);
vixodpravo = CreatePickup(1318, 23, 980.241271,-20.293521,1380.996215, -1);

	/*tkvxodpon = CreatePickup(1318, 23, 2327.705566,2009.635742,16.620204, 0);
	Create3DTextLabel("{ffff00}ù??????????ù ???????ù", -1, 2327.705566,2009.635742,16.620204, 40.0, 0);
	tkvixodpon = CreatePickup(1318, 23, -0.259740,2500.243896,2011.005126, -1);
	Create3DTextLabel("{ffff00}?????", -1, -0.319910,2500.244628,2011.005126, 40.0, 0);
	arendafuri = CreatePickup(1318, 23, 2320.664794,2012.756103,16.121875, 0);
	Create3DTextLabel("{ffff00}?????? ????", -1, 2320.732666,2012.828857,16.121875, 40.0, 0);
	ystroitk = CreatePickup(1275, 23, 1.942432,2503.549316,2011.005126, 0);
	Create3DTextLabel("{ffff00}?????????? ? ???????????? ????????", -1, 1.942432,2503.549316,2011.005126, 40.0, 0);*/
	//bus job
	buspick1 = CreatePickup(19134, 23, 0,0,0, -1);
	CreateDynamic3DTextLabel("{FF6347}?????? ????????", 0xFFFF00FF, 0,0,0 + 1.5, 10.0);
	buspick2 = CreatePickup(19134, 23, 0,0,0, -1);
	CreateDynamic3DTextLabel("{FF6347}?????? ????????", 0xFFFF00FF, 0,0,0 + 1.5, 10.0);
	buspick3 = CreatePickup(19134, 23, 889.34,787.70,14.20, -1);
	CreateDynamic3DTextLabel("{FF6347}?????? ????????", 0xFFFF00FF, 889.34,787.70,14.20 + 1.5, 10.0);
	//kyr job
	razdkyr = CreatePickup(1275, 23, 2761.081054,-2391.775634,21.890625, -1);
	CreateDynamic3DTextLabel("{FFFF00}?????? ???????", 0xFFFF00FF,2761.081054,-2391.775634,21.890625 + 1.5, 10.0);
	kyrpick = CreatePickup(19134, 23, 2760.888916,-2395.334716,21.890625, -1);
	CreateDynamic3DTextLabel("{FFFF00}????? ??ù ???????", 0xFFFF00FF, 2760.888916,-2395.334716,21.890625 + 1.5, 10.0);
	SetTimer("SecondTimes", 1000, true);
	//mex
	mexpick = CreatePickup(19134, 23, 1846.6710,-111.2327,15.5693, -1);
    CreateDynamic3DTextLabel("{FFFF00}?????? ?????????", 0xFFFF00FF,1846.6710,-111.2327,15.5693 + 1.5, 10.0);

	CreatePickup(1279, 23, -1120.4103,2175.6133,38.0294,0);
	CreatePickup(1650, 23, -1043.8157,2205.5217,38.1195,0);
	CreatePickup(1279, 23, 2424.5317,1765.6780,-0.2507,0);
	CreatePickup(1650, 23, 2710.3369,-2383.5164,17.9063,0);
	CreatePickup(1650, 23, 2738.3379,-2273.0725,17.9063,0);
	CreatePickup(1650, 23, 13.1749,2.9268,1380.9985, 1, PICKUP_ACTION_TYPE_PUT_PROD);
	
	CreateDynamic3DTextLabel("{FFFF00}????? ??????????\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", 0xFFFF00FF, 1561.954833,1643.207153,15.971530, 10.0);
	CreatePickup(1239, 23, 2883.7095,1447.6533,1050.9984, 1);
	CreatePickup(2969, 23, 1561.954833,1643.207153,15.971530, 0, PICKUP_ACTION_TYPE_TEMP_ARMY);

	CreateDynamic3DTextLabel("- ????????? -\n{FFFFFF}??????? ?? ?????? ù?\n \n{FFFFFF}??????? ??????? {66FFCC}/buynumber", 0x3399FFFF, -1109.050415,1510.751464,1499.945922 + 1.8, 10.0);
	CreatePickup(1239, 23, -1109.050415,1510.751464,1499.945922, 1, PICKUP_ACTION_TYPE_GET_CAR_NUM);
	CreatePickup(1239, 23, -1109.050415,1510.751464,1499.945922, 2, PICKUP_ACTION_TYPE_GET_CAR_N2);

	g_last_lottery_time =
	g_last_pay_day_time =
	g_last_m_timer_time = gettime();

	CreateTextDraws();
	CreateMenus();
	CreateVehicles();
	CreateMedBeds();
	CreateCasinoTables();
	CreateArmories();

	CreateQuestPickup();
	CreateGreenZones();

	HelpInfoInit();
	ServerRadioInit();
	AnimListInit();
	BusRoutesInit();
	BanksInit();
	TempJobsInit();
	
	report_OnGameModeInit();
	
	MapIconsInit();

	TeleportPickupsInit();
	DrivingSchoolInit();
 	CreateRentBike();
 CreateRentBikeArz();
 CreateRentBikeBat();
 CreateRentBikeLut();
 
 	CreateFractionCar();


	#if defined _GANG_ZONES_INC
	//CreateGangZonesCR();
	#endif

	mysql_log();
	mysql = mysql_connect(REYTIZ_HOST,REYTIZ_USER,REYTIZ_DB,REYTIZ_PASSWORD);

	if(mysql_errno() != 0)
		return print("?? ??????? ??????????ù ? ???? ??????!");

	mysql_set_charset("cp1251");
	mysql_tquery(mysql, "SET NAMES cp1251");

	//LoadGift();
	
	LoadAllArmories();

	UpdateCharity();
	RepositoriesLoad();

	LoadEntrances();
	LoadHouses();
	LoadHousesRenters();
	EntranceStatusInitAll();

	LoadFamily();
	LoadSettings();
	
	LoadCarObmen();


	LoadHotels();

	LoadFuelStations();
	LoadBusinesses();
	LoadOrders();

	//LoadGangZones();
	LoadGangRepositories();

	LoadLeaderList();
	
	SetWeather(11);

	//LoadOwnableCars();
	//LoadTrunks();

	SetTimer("ClearBanList", 15_000, false);
	SetTimer("OnSecondTimer", 1000, true);

	//SetTimer_("SpeedBooster", 100, 0, -1);

	CallLocalFunction("HospitalTreatment", "");

	SetGameModeText(SERVER_VERSION);

	s_autorace_Pos_PickupID[0] = CreateDynamicPickup(1318, 23, 9999,9999,9999, 0, 0);
	s_autorace_Pos_PickupID[1] = CreateDynamicPickup(1318, 23, 9999,9999,9999, 0, 0);
	//CreateDynamicMapIcon(AUTORACE_ENTER_POS, 53, -1, 0, 0);
	s_autorace_Main_CPID = CreateDynamicCP(9999,9999,9999-1.0, 1.5, 0,0,0, 0);
	return 1;
}

public OnGameModeExit()
{
	SaveRepository();
    if (gstream) SvDeleteStream(gstream);
	mysql_close(mysql);
	return 1;
}

public OnPlayerRequestClass(playerid, classid)
{
	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, FLOOD_RATE_INC, FLOOD_RATE_KICK);

	if(IsPlayerLogged(playerid))
	{
		SetPlayerSpawnInit(playerid);
	}
	//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} OnPlayerRequestClass");
	return 1;
}

public OnPlayerRequestSpawn(playerid)
{
	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, FLOOD_RATE_INC, FLOOD_RATE_KICK);

	if(!IsPlayerLogged(playerid))
	{
		new a_state = GetPlayerData(playerid, P_ACCOUNT_STATE);
		if(a_state != ACCOUNT_STATE_REG_SKIN)
		{
			new fmt_str[64];
			format(fmt_str, sizeof fmt_str, "{FFFFFF}??ù ???? ?? ??????? ?? ?????? %s", a_state == ACCOUNT_STATE_REGISTER ? ("?????? ???????????") : ("???????????????ù"));

			Dialog
			(
				playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
				"{FF6600}??????",
				fmt_str,
				"???????", ""
			);
			Kick:(playerid);
			SendClientMessage(playerid, 0xFF6600FF, fmt_str[8]);
		}
	}
	else if(IsPlayerLogged(playerid))
	{
		//SetPlayerSpawnInit(playerid);
		//SpawnPlayer(playerid);

//		SendClientMessage(playerid, 0xFFFF00FF, "??ù ????? ????????? ???????? ????? ??????? ??????");
	}

	return 1;
}

public: AddPlayerPromotion(playerid)
{
	new promotions_len;
	JSON_ArrayLength(g_player_donate_data[playerid][JSON_PROMOTIONS_ARRAY], promotions_len);

	if(g_player_donate_data[playerid][ADDED_PROMOTIONS] < 3)
	{
		new valid_donate_items[] = {
			200, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
			21, 22, 23, 24, 25, 26, 27, 347, 28, 29, 215, 216, 30, 217, 31, 32, 218,
			33, 34, 348, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48,
			49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 349, 63, 64,
			219, 65, 66, 67, 473, 68, 69, 70, 71, 351, 72, 352, 73, 350, 74, 75,
			329, 410, 220, 444, 353, 221, 447, 452, 448, 223, 224, 484, 461, 426,
			427, 428, 429, 424, 366, 367, 86, 87, 88, 89, 90, 275, 276, 330, 331
		};

		new item_id = valid_donate_items[random(sizeof(valid_donate_items))];
		new sale_time = random(82800) + 3600;
		new percent = random(40) + 10;

		g_player_donate_data[playerid][JSON_PROMOTIONS_ARRAY] = JSON_Append(g_player_donate_data[playerid][JSON_PROMOTIONS_ARRAY], JSON_Array(
			JSON_Int(item_id), JSON_Int(sale_time), JSON_Int(percent)
		));

		g_player_added_promotions_data[playerid][g_player_donate_data[playerid][ADDED_PROMOTIONS]][0] = item_id;
		g_player_added_promotions_data[playerid][g_player_donate_data[playerid][ADDED_PROMOTIONS]][1] = sale_time;
		g_player_added_promotions_data[playerid][g_player_donate_data[playerid][ADDED_PROMOTIONS]][2] = percent;

		g_player_donate_data[playerid][ADDED_PROMOTIONS]++;
	}
}

public: RestorePlayerPromotions(playerid)
{
	g_player_donate_data[playerid][JSON_PROMOTIONS_ARRAY] = JSON_Array();

	for(new i = 0; i < g_player_donate_data[playerid][ADDED_PROMOTIONS]; i++)
	{
		g_player_donate_data[playerid][JSON_PROMOTIONS_ARRAY] = JSON_Append(g_player_donate_data[playerid][JSON_PROMOTIONS_ARRAY], JSON_Array(
			JSON_Int(g_player_added_promotions_data[playerid][i][0]),
			JSON_Int(g_player_added_promotions_data[playerid][i][1]),
			JSON_Int(g_player_added_promotions_data[playerid][i][2])
		));
	}
}

public SendConnectionSucceeded(playerid)
{
    new BitStream:bs = BS_New();
    new MyPlayerID = playerid;
    new iVersion = 0x037;
    new ModByte = 1;
    new uiChallenge = 0x12345678;

    new authKey[11] = {0x15,0x12,0x1F,0x6F,0x18,0x55,0x0C,0x00,0xAC,0x4B,0x4F};

    new localPlayerName[32];
    GetPlayerName(playerid, localPlayerName, sizeof(localPlayerName));
    new nameLen = strlen(localPlayerName);

    BS_WriteValue(bs, PR_UINT16, MyPlayerID);
    BS_WriteValue(bs, PR_UINT32, uiChallenge ^ iVersion);
    BS_WriteValue(bs, PR_UINT32, iVersion);
    BS_WriteValue(bs, PR_UINT8, ModByte);
    BS_WriteValue(bs, PR_UINT8, nameLen);

    for (new i = 0; i < nameLen; i++)
    {
        BS_WriteValue(bs, PR_UINT8, localPlayerName[i]);
    }

    BS_WriteValue(bs, PR_UINT8, 11);

    for (new i = 0; i < 11; i++)
    {
        BS_WriteValue(bs, PR_UINT8, authKey[i]);
    }

    PR_SendRPC(bs, playerid, 25, PR_HIGH_PRIORITY, PR_RELIABLE_ORDERED);

    BS_Delete(bs);

    printf("[SendConnectionSucceeded] ????????? RPC ?????? %d (%s)", playerid, localPlayerName);
}

public OnPlayerConnect(playerid)
{
	SetServerLogo(playerid, false);
	
//	SendConnectionSucceeded(playerid);
	
	printf("[OnPlayerConnect] ????? %d ????? ?? ??????", playerid);
	
	gPlayerInGreenZone[playerid] = false;
    SetGreenZoneForPlayer(playerid, false);
    
 //   PlayAudioStreamURL(playerid, "https://eu.hitmo-top.com/get/music/20170918/Sektor_Gaza_-_Kolkhoznyjj_pank_48646528.mp3");
 
	LoadPlayerInventory(playerid);
	
    new name[MAX_PLAYER_NAME];
    GetPlayerName(playerid, name, sizeof(name));
    format(GetPlayerData(playerid, P_NAME), MAX_PLAYER_NAME, "%s", name);
   
   if(g_player_donate_data[playerid][ADDED_PROMOTIONS] == 0)
	{
		AddPlayerPromotion(playerid);
	}

    player_sale_time_timer[playerid] = SetTimerEx("UpdatePlayerSaleTime", 60000, true, "i", playerid);
	player_update_promotions_timer[playerid] = SetTimerEx("AddPlayerPromotion", 60000, true, "i", playerid); // 3600000


LoadPlayerTextDrawBJ(playerid);


if(GetPlayerLevel(playerid) == 0)
	   {
	new query[64];
	SetPlayerData(playerid, P_LEVEL, 1);
	format(query, sizeof query, "UPDATE accounts SET level=1 WHERE id=%d LIMIT 1", GetPlayerAccountID(playerid));
							mysql_query(mysql, query, false);
							UpdatePlayerDatabaseInt(playerid, "level", 1);
	}

	TogglePlayerAllDynamicCPs(playerid, false);

    if (SvGetVersion(playerid) == SV_NULL)
    {
        SendClientMessage(playerid, -1, "{D3D3D3}?????????? ? Baze Russia RP");
        SendClientMessage(playerid, -1, "{D3D3D3}?????????. ?????????? ? ????...");
    }
    else if (SvHasMicro(playerid) == SV_FALSE)
    {
        SendClientMessage(playerid, -1, "The microphone could not be found.");
    }
    else if ((lstream[playerid] = SvCreateDLStreamAtPlayer(40.0, SV_INFINITY, playerid, 0xff0000ff, "Local")))
    {
        SendClientMessage(playerid, -1, "Press Z to talk to global chat and B to talk to local chat.");

        if (gstream) SvAttachListenerToStream(gstream, playerid);
        SvAddKey(playerid, 0x5A);
    }
    //DuelOffer[playerid] = -1;
	timeduel[playerid] = 11;
	CreateAvtosalonTextDraws(playerid);
	Autorize[playerid] = 0;
	UseAnimWerton[playerid] = 0;
	SpawnWertonFix[playerid] = 0;
	testrazdevstatus[playerid] = false;
	player_sell_ownable_car[playerid] = false;
	Shopclothing[playerid] = 0;
	
	gPlayerInMedBed[playerid] = false;
	SetPlayerData(playerid, P_OCCUPIED_BED, -1);
	
	SendClientMessage(playerid, 0xFFFF00FF, "{34C924}| {FFFFFF}????? ?????????? ?? {FF6347}"SERVER_NAME"!");
	PlayerPlayStream(playerid, "http://wh3606.web3.maze-host.ru/music/enter_.mp3");
	if(TEST_SERVER == 1) SendClientMessage(playerid, -1, ""SC"{00CCFF}[DEBUG]{ffffff} Enter TestDev ID: 62");

//	new fmt_text[50];
//	format(fmt_text, sizeof fmt_text, "%s[%d] ??????????ù ? ???????. IP: %s", GetPlayerNameEx(playerid), playerid, GetPlayerIpEx(playerid))
//    SendMessageToAdmins(fmt_text, 0x999999FF);
	//if(GetPlayerAdminEx(playerid) < 5) return FixKick(playerid);
	
	new hour, minute, seconds;
	gettime(hour, minute, seconds);
	times[playerid] = true;
	
	SetPlayerTime(playerid, hour, minute, seconds);
	
 	PlayerIsDalnoboi[playerid] = 0;
	PlayerIsInkasator[playerid] = 0;

	SetPlayerColor(playerid, 0x999999FF);

	SetPlayerVirtualWorld(playerid, playerid + 0xFF);
	ClearPlayerInfo(playerid);

	GetPlayerName(playerid, g_player[playerid][P_NAME], MAX_PLAYER_NAME);
	GetPlayerIp(playerid, g_player[playerid][P_IP], 16);
	
	busTimer[playerid] = -1;
	buses[playerid] = INVALID_VEHICLE_ID;

	ShowGangZonesForPlayer(playerid);


	#if defined _GANG_ZONES_INC
	//ShowForPlayerGangZonesCR(playerid);
	#endif

	InitFly(playerid);

	SetTimerEx("CheckPlayerAccount", 1000, false, "ii", playerid, mysql_race[playerid]);
	return 1;
}

public OnPlayerDisconnect(playerid, reason)
{

    report_OnPlayerDisconnect(playerid);
    
	LastVehicle[playerid] = 0;
    LastSeat[playerid] = -1;
    IsPlayerEntering[playerid] = false;
   
    P_MASCIR[playerid] = 0;
    P_MASCIR_SKIN[playerid] = 0;
    P_REAL_SKIN[playerid] = 0;
    P_REAL_COLOR[playerid] = 0;
   
    gPlayerInGreenZone[playerid] = false;
    
   CheckFSINMeetExit(playerid);
	
	for(new idx; idx < g_ask_created; idx ++)
	{
		if(GetAskData(idx, ASK_CREATOR) != playerid) continue;

		DeleteAsk(idx);
	}



    for(new idx; idx < g_report_created; idx ++)
	{
		if(GetReportData(idx, REP_CREATOR) != playerid) continue;

		DeleteReport(idx);
	}
	
	DisablePlayerGPS(playerid); // ??????? ???????? ? GangZone

    g_gpsZone[playerid] = -1; // ?????????? ID ????

    if (lstream[playerid])
    {
        SvDeleteStream(lstream[playerid]);
        lstream[playerid] = SV_NULL;
    }
    //SaveAdminPrefix(playerid);
    //vehidtun[playerid] = 0;
    launch[playerid] = 0;
    nitro[playerid] = 0;
    PlayerIsDalnoboi[playerid] = 0;
	PlayerIsInkasator[playerid] = 0;
    
    if(GetPVarType(playerid, "PlacedBB"))
    {
        //DestroyDynamicObject(GetPVarInt(playerid, "PlacedBB"));
    	DestroyDynamic3DTextLabel(Text3D:GetPVarInt(playerid, "BBLabel"));
        if(GetPVarType(playerid, "BBArea"))
        {
            foreach(Player,i)
            {
                if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
                {
                    StopAudioStreamForPlayer(i);
                    SendClientMessage(i, COLOR_LIGHTBLUE, "???????? ???????? ?????????ù ?? ???????.");
                }
            }
        }
    }
    
    

    
	new buffer = GetPlayerLastVehicle(playerid);
	
	if(buffer != INVALID_VEHICLE_ID)
	{
		if(GetVehicleData(buffer, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_DRIVING_SCH)
		{
			if(GetPlayerDrivingExamInfo(playerid, DE_POINTS) >= 9)
			{
				SetVehicleToRespawn(buffer);
			}
		}
	}
	if(IsPlayerInJob(playerid))
	{
		buffer = GetPlayerJobCar(playerid);
		if(buffer != INVALID_VEHICLE_ID)
		{
			SetVehicleToRespawn(buffer);
		}

		if(GetPlayerData(playerid, P_ORDER) != -1)
			SetOrderData(GetPlayerData(playerid, P_ORDER), O_USED, false);
	}
	KillEndJobTimer(playerid);

	buffer = GetPlayerData(playerid, P_FACTORY_USE_DESK);
	SetPlayerFactoryDeskUse(playerid, buffer, false);

	if(GetPlayerData(playerid, P_OCCUPIED_BED) != -1)
	{
		ClearMedBed(playerid, GetPlayerData(playerid, P_OCCUPIED_BED));
	}

	if(GetPlayerData(playerid, P_FRACTION_CAR) != INVALID_VEHICLE_ID)
    {
        DestroyDeliveryVehicle(GetPlayerData(playerid, P_FRACTION_CAR));
        SetPlayerData(playerid, P_FRACTION_CAR, INVALID_VEHICLE_ID);
    }

    if(GetPlayerData(playerid, P_BUY_CAR) != INVALID_VEHICLE_ID)
    {
        DestroyDeliveryVehicle(GetPlayerData(playerid, P_BUY_CAR));
        SetPlayerData(playerid, P_BUY_CAR, INVALID_VEHICLE_ID);
    }

	if(GetPlayerTeamEx(playerid) == TEAM_GOVERNMENT && IsValidDynamic3DTextLabel(GetPlayerData(playerid, P_ADVISOR_LABEL)))
	{
		DestroyDynamic3DTextLabel(GetPlayerData(playerid, P_ADVISOR_LABEL));
		SetPlayerData(playerid, P_ADVISOR_LABEL, Text3D: -1);
	}

	if(IsValidDynamic3DTextLabel(GetPlayerData(playerid, P_ADMIN_LABEL)))
	{
		DestroyDynamic3DTextLabel(GetPlayerData(playerid, P_ADMIN_LABEL));
		SetPlayerData(playerid, P_ADMIN_LABEL, Text3D: -1);
	}

	if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
	{
		if(SaveOwnableCar(GetPlayerOwnableCar(playerid)) != -1)
			UnloadPlayerOwnableCar(playerid, true);
	}

	if(GetPlayerRentCar(playerid) != INVALID_VEHICLE_ID)
	{
		SetVehicleToRespawn(GetPlayerRentCar(playerid));
	}
	if(GetPlayerData(playerid, P_RENT_BIKE) != INVALID_VEHICLE_ID)
    {
        DestroyDeliveryVehicle(GetPlayerData(playerid, P_RENT_BIKE));
        SetPlayerData(playerid,  P_RENT_BIKE, INVALID_VEHICLE_ID);
    }

	OnPlayerDisconnectAndSpawn(playerid, reason);

	new fmt_text[95];

	if(GetPlayerData(playerid, P_CUFFED) && reason != 2)
	{
		new jail_time = (GetPlayerSuspect(playerid) * 5 + 30) * 60;

		SetPlayerData(playerid, P_JAIL, jail_time);
		UpdatePlayerDatabaseInt(playerid, "jail", jail_time);

		SetPlayerData(playerid, P_SUSPECT, 0);
		UpdatePlayerDatabaseInt(playerid, "suspect", 0);

		format(fmt_text, sizeof fmt_text, "%s ??????? ??? ?????? (+30 ????? ?????????ù)", GetPlayerNameEx(playerid));
		SendClientMessageToAll(0xFF5533FF, fmt_text);
	}

	for(new idx; idx < g_advert_created; idx ++)
	{
		if(GetAdvertData(idx, A_CREATOR) != playerid) continue;

		DeleteAdvert(idx);
	}

	if(!server_restart)
	{

		SetPlayerData(playerid, P_ADMIN_LOGGED, 0);
	}

	
	new Float:x, Float:y, Float:z;
GetPlayerPos(playerid, x, y, z);

SetPlayerData(playerid, P_LAST_POS_X, x);
SetPlayerData(playerid, P_LAST_POS_Y, y);
SetPlayerData(playerid, P_LAST_POS_Z, z);
SetPlayerData(playerid, P_LAST_POS_INT, GetPlayerInterior(playerid));
SetPlayerData(playerid, P_LAST_POS_VW, GetPlayerVirtualWorld(playerid));
SetPlayerData(playerid, P_LAST_LOGOUT, gettime());

// ??????ù?? ? ????
new query[256];
mysql_format(mysql, query, sizeof query,
    "UPDATE accounts SET last_x=%.2f, last_y=%.2f, last_z=%.2f, last_int=%d, last_vw=%d, last_logout=%d WHERE id=%d",
    x, y, z,
    GetPlayerInterior(playerid),
    GetPlayerVirtualWorld(playerid),
    gettime(),
    GetPlayerAccountID(playerid)
);
mysql_query(mysql, query, false);

	SavePlayerAccount(playerid);
	ClearPlayerInfo(playerid);

	UpdateSpectate(playerid, true);
	return 1;
}

public: SavePlayerAccount(playerid)
{
	new query[420]; // ????????? ??ù ????? ?????

	mysql_format
	(
		mysql, query, sizeof query,
		"UPDATE accounts SET last_login=%d,game_for_hour=%d,game_for_day=%d,game_for_day_prev=%d,\
		exp=%d,health=%f,hospital=%d,mute=%d,jail=%d,fmute=%d,fjail=%d,karcer=%d,karcer_time=%d, online = 0 WHERE id=%d LIMIT 1",
		gettime(),
		GetPlayerData(playerid, P_GAME_FOR_HOUR),
		GetPlayerData(playerid, P_GAME_FOR_DAY),
		GetPlayerData(playerid, P_GAME_FOR_DAY_PREV),
		GetPlayerData(playerid, P_EXP),
		GetPlayerData(playerid, P_HEALTH),
		GetPlayerData(playerid, P_HOSPITAL),
		GetPlayerData(playerid, P_MUTE),
		GetPlayerData(playerid, P_JAIL),
		GetPlayerData(playerid, P_FMUTE),
		GetPlayerData(playerid, P_FJAIL),
		GetPlayerData(playerid, P_KARCER),
		GetPlayerData(playerid, P_KARCER_TIME),
		GetPlayerAccountID(playerid)
	);

	mysql_query(mysql, query, false);
	return 1;
}

public OnPlayerSpawn(playerid)
{
    StopAudioStream(playerid);
	CreateAcs(playerid);
	SetPlayerInterior(playerid, 0);
	SetPlayerVirtualWorld(playerid, 0);
	PlayerPlayStream(playerid, "");
	OnPlayerDisconnectAndSpawn(playerid, -1);


	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, 500, FLOOD_RATE_KICK);


	PlayerIsDalnoboi[playerid] = 0;
	PlayerIsInkasator[playerid] = 0;


	SetPlayerData(playerid, P_IN_HOUSE, -1);
	SetPlayerData(playerid, P_IN_BUSINESS, -1);
	SetPlayerData(playerid, P_IN_HOTEL_FLOOR, -1);
	SetPlayerData(playerid, P_IN_HOTEL_ROOM, -1);
	SetPlayerData(playerid, P_IN_ENTRANCE, -1);
	SetPlayerData(playerid, P_IN_ENTRANCE_FLOOR, -1);


	SetPlayerSkillsInit(playerid);


	SetTimer("golodbr", 600 * 1000, true);


	if(!IsPlayerLogged(playerid))
	{
		if(GetPlayerData(playerid, P_ACCOUNT_STATE) == ACCOUNT_STATE_REG_SKIN)
		{
			new sex = bool: GetPlayerSex(playerid);

			TogglePlayerControllable(playerid, false);
			SetPlayerSelectSkin(playerid, 0, reg_skin_data[sex][0]);

			SetPlayerPosEx(playerid, 1200.399902,607.876281,1349.309448,184.824386, 1, _, false);

			SetPlayerCameraPos(playerid, 1201.510253,604.738281,1350.530395);
            SetPlayerCameraLookAt(playerid, 1193.910253,630.0,1342.530395);
		}
	}
	else
	{
		if(GetPlayerData(playerid, P_SLEDAK) != 0 && GetPlayerAdminEx(playerid) >= 2)
		{
  		 new sledak_id = GetPlayerData(playerid, P_SLEDAK);
  		 InvitePlayer(playerid, sledak_id, 10, true);
		}

		SetPlayerInterior(playerid, 0);
		SetPlayerVirtualWorld(playerid, 0);


    if (!GetPlayerData(playerid, P_ANIMS_INIT))
    {
        PreLoadPlayerAnims(playerid);
        SetPlayerData(playerid, P_ANIMS_INIT, true);
    }
    
  //  ShowSpawnSelectionDialog(playerid);



   SetPlayerSkin(playerid, GetPlayerData(playerid, P_SKIN)), SetPlayerColor(playerid, 0xFFFFFFFF), SetPVarInt(playerid, "Form", 0);

    if (GetPlayerAdminEx(playerid))
    {
        TextDrawShowForPlayer(playerid, report_edit_TD);
        TextDrawShowForPlayer(playerid, ask_edit_TD);
    }

    TextDrawShowForPlayer(playerid, report_edit_TD);
    TextDrawShowForPlayer(playerid, ask_edit_TD);

    if (GetPlayerData(playerid, P_DATA_ORG_SKIN) == 0)
    {
        SetPlayerSkin(playerid, GetPlayerData(playerid, P_SKIN));
        SetPlayerColor(playerid, 0xFFFFFFFF);
        SetPVarInt(playerid, "Form", 0);
    }
    else if (GetPlayerData(playerid, P_DATA_ORG_SKIN) == 1)
    {
        SetPlayerSkin(playerid, GetPlayerData(playerid, P_OSKIN));
        SetPlayerColorEx(playerid, 0xFFFFFFFF);
        SetPVarInt(playerid, "Form", 1);
    }
}

return;
}
	
public OnPlayerDeath(playerid, killerid, reason)
{
    new fmt_text[700];
	
	if(killerid == INVALID_PLAYER_ID || killerid == playerid || reason == 0)
{
    if(IsPlayerLogged(playerid))
    {
        SetPlayerData(playerid, P_HOSPITAL, true);
        SetPlayerData(playerid, P_OCCUPIED_BED, -1);
        SetHospitalSpawn(playerid); // ?????? ????? ??????
    }
}

  // //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} OnPlayerDeath");



	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, 500, FLOOD_RATE_KICK);
	PlayerIsDalnoboi[playerid] = 0;
 	PlayerIsInkasator[playerid] = 0;
	
	if(IsPlayerLogged(playerid))
	{
  	 SetPlayerData(playerid, P_HOSPITAL, true);
	}
    
    if(!IsPlayerLogged(playerid))
	{
		return Kick:(playerid, " ");
	}
	if(IsPlayerInJob(playerid))
	{
		EndPlayerJob(playerid);
	}
	if(GetPlayerTempJob(playerid) == TEMP_JOB_LOADER)
	{
		TogglePlayerDynamicCP(playerid, help_info_CP, true);
	}
	if(GetPlayerData(playerid, P_OCCUPIED_BED) != -1)
	{
		ClearMedBed(playerid, GetPlayerData(playerid, P_OCCUPIED_BED));
	}
	SetPlayerData(playerid, P_JOB_CAR, INVALID_VEHICLE_ID);

	SetPlayerDrivingExamInfo(playerid, DE_POINTS, 0);
	SetPlayerFactoryDeskUse(playerid, GetPlayerData(playerid, P_FACTORY_USE_DESK), false);

	SetPlayerData(playerid, P_IN_HOUSE, 		-1);
	SetPlayerData(playerid, P_IN_BUSINESS, 		-1);
	SetPlayerData(playerid, P_IN_HOTEL_FLOOR, 	-1);
	SetPlayerData(playerid, P_IN_HOTEL_ROOM, 	-1);
	SetPlayerData(playerid, P_IN_ENTRANCE,		-1);
	SetPlayerData(playerid, P_IN_ENTRANCE_FLOOR,-1);

	

	if(killerid == INVALID_PLAYER_ID || reason >= 47 || !reason)
	{
		format(fmt_text, sizeof fmt_text, "[A] %s[%d] ???? ???ù", GetPlayerNameEx(playerid), playerid);
		SendMessageToAdmins(fmt_text, 0x999999FF);
	}
	else
	{
		format(fmt_text, sizeof fmt_text, "[A] %s[%d] ???? %s[%d] (%s)", GetPlayerNameEx(killerid), killerid, GetPlayerNameEx(playerid), playerid, GetWeaponName(reason));
		SendMessageToAdmins(fmt_text, 0x999999FF);
	}

	if(killerid != INVALID_PLAYER_ID)
	{
		if(GetPlayerSuspect(playerid) && IsPlayerInPoliceTeam(killerid))
		{
			new fmt_text[128];
			format(fmt_text, sizeof fmt_text, "[???? ??????] %s %s ????????????? ??????????? %s",
				GetPlayerJobAndRankName(killerid),
				GetPlayerNameEx(killerid),
				GetPlayerNameEx(playerid));

			SendMessageToPoliceTeam(fmt_text, 0x00CCFFFF);

			JailPlayer(playerid, GetPlayerSuspect(playerid) * 5);

			SetPlayerData(playerid, P_SUSPECT, 0);
			UpdatePlayerDatabaseInt(playerid, "suspect", 0);
			SetPlayerSuspectInit(playerid);

			SendClientMessage(playerid, 0x66CC33FF, "?? ???? ?????????????? ??????????? ?????????????????? ???????");
			SendClientMessage(playerid, 0xCECECEFF, "????ù ?? ????????ù ?????????ù: {CCCC00}/time");
		}

		if(g_capture[C_STATUS])
		{
			if(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(killerid) <= TEAM_OPG_LYTKARINSKAYA)
			{
				new area_id = GetGangZoneData(g_capture[C_GANG_ZONE], GZ_AREA);

				if(IsPlayerInDynamicArea(killerid, area_id) && IsPlayerInDynamicArea(playerid, area_id))
				{
					new gang_id[2];

					gang_id[0] = (GetPlayerTeamEx(killerid) - TEAM_OPG_ARZAMASKAYA) + 1;
					gang_id[1] = (GetPlayerTeamEx(playerid) - TEAM_OPG_ARZAMASKAYA) + 1;

					if(gang_id[0] == g_capture[C_ATTACK_TEAM] && gang_id[1] == g_capture[C_PROTECT_TEAM])
						g_capture[C_ATTACKER_KILLS] ++;

					else if(gang_id[0] == g_capture[C_PROTECT_TEAM] && gang_id[1] == g_capture[C_ATTACK_TEAM])
						g_capture[C_PROTECTOR_KILLS] ++;
						
						
					AddPlayerData(killerid, P_CAPT_KILL, +, 1);
	    			UpdatePlayerDatabaseInt(killerid, "capt_kills", GetPlayerData(killerid, P_CAPT_KILL));
	    			
	    			AddPlayerData(killerid, P_F_QUEST_EXP_2, +, 1);
					UpdatePlayerDatabaseInt(killerid, "FracQuestExp2", GetPlayerData(killerid, P_F_QUEST_EXP_2));

					if(GetPlayerData(killerid, P_F_QUEST_EXP_2) == 30)
					{
					    SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'???? ?????ù??!'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
				                                SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");

                        AddPlayerData(killerid, P_DONATE_CASE, +, 1);
						UpdatePlayerDatabaseInt(killerid, "case", GetPlayerData(killerid, P_DONATE_CASE));

					    SetPlayerData(killerid, P_F_QUEST_2, 1);
					    UpdatePlayerDatabaseInt(killerid, "FracQuest2", 1);
					    
					    AddPlayerData(killerid, P_TOP_5, +, 1);
						UpdatePlayerDatabaseInt(killerid, "TOP_Quest", GetPlayerData(killerid, P_TOP_5));
					}
				}
			}
		}
	}

	if(GetPlayerData(playerid, P_BUY_CAR) != INVALID_VEHICLE_ID)
	{
		DestroyDeliveryVehicle(GetPlayerData(playerid, P_BUY_CAR));
		SetPlayerData(playerid, P_BUY_CAR, INVALID_VEHICLE_ID);

		//BuyCarTDsHideForPlayer(playerid);
		//HidePlayerSelectPanel(playerid);
		
		HideAutosalonTextDraws(playerid);
	}

	if(IsSpectating(playerid))
	{
		TogglePlayerSpectating(playerid, true);

		new target = GetPlayerSpectateData(playerid, S_PLAYER);
		if(IsPlayerConnected(target) && IsPlayerLogged(target))
		{
			if(IsPlayerInAnyVehicle(target))
				PlayerSpectateVehicle(playerid, GetPlayerVehicleID(target));
			else
				PlayerSpectatePlayer(playerid, target);
		}
		return 1;
	}

	if(GetPlayerRentCar(playerid) != INVALID_VEHICLE_ID)
	{
		new vehicleid = GetPlayerRentCar(playerid);

		rent_cars_data[vehicleid - first_rent_car_id][rent_car_tenant_id] = INVALID_PLAYER_ID;

		SetVehicleToRespawn(vehicleid);

		//SendClientMessage(playerid, 0xFF5533FF, "???????????? ????????? ?????????. ??????? ?????? ??????????");

		SetPlayerData(playerid, P_RENT_CAR, INVALID_VEHICLE_ID);
	}

	SetPlayerJobLoadItems(playerid, 0);
	SetPlayerTempJob(playerid, TEMP_JOB_NONE);


	return 1;
}

public OnPlayerTakeDamage(playerid, issuerid, Float:amount, weaponid, bodypart)
{

	if(IsSpectating(playerid)) return 0;
	

	if(GetPVarInt(playerid, "agm") == 1)
    {
        return 0; 
    }


    new fmt_text[700];

	new Float: health;
	
	if(GetPVarInt(playerid, ""))
	{
		new green_zone_id = GetPVarInt(playerid, "player_in_green_zone") - 1;

		if(!(TEAM_DPS <= GetPlayerTeamEx(issuerid) <= TEAM_FBI))
		{
			ClearPlayerAnim(issuerid);

			new fmt_text[220];

			format
			(
				fmt_text, sizeof fmt_text,
				"{FFFFFF}"\
				"??????????????:\n\n"\
				"????? ????????ù ? ??????? ???? '{66CC33}%s{FFFFFF}'\n"\
				"????????? ????? ?????????. ??? ????????? ???????? ?? ?????? ???????.",
				g_green_zones[green_zone_id][GZ_NAME]
			);

			ShowPlayerDialog(issuerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FF5533}??????ù ????", fmt_text, "???????", "");

			format(fmt_text, sizeof fmt_text, "[SYSTEM] %s[%d] ????????ù ??????? %s[%d] ? ??????? ???? %s", GetPlayerNameEx(issuerid), issuerid, GetPlayerNameEx(playerid), playerid, g_green_zones[green_zone_id][GZ_NAME]);
			SendMessageToAdmins(fmt_text, 0xFF5533FF);

			return 0;
		}
	}
	

	if(issuerid == INVALID_PLAYER_ID) return 1;

	if(GetPVarInt(playerid, ""))
	{
		new green_zone_id = GetPVarInt(playerid, "player_in_green_zone") - 1;

		if(!(TEAM_DPS <= GetPlayerTeamEx(issuerid) <= TEAM_FBI))
		{
			ClearPlayerAnim(issuerid);

			new fmt_text[220];

			format
			(
				fmt_text, sizeof fmt_text,
				"{FFFFFF}"\
				"??????????????:\n\n"\
				"????? ????????ù ? ??????? ???? '{66CC33}%s{FFFFFF}'\n"\
				"????????? ????? ?????????. ??? ????????? ???????? ?? ?????? ???????.",
				g_green_zones[green_zone_id][GZ_NAME]
			);

			ShowPlayerDialog(issuerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FF5533}??????ù ????", fmt_text, "???????", "");

			format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????ù ??????? %s[%d] ? ??????? ???? %s", GetPlayerNameEx(issuerid), issuerid, GetPlayerNameEx(playerid), playerid, g_green_zones[green_zone_id][GZ_NAME]);
			SendMessageToAdmins(fmt_text, 0xFF5533FF);

			return 0;
		}
	}

	if(TEAM_DPS <= GetPlayerTeamEx(issuerid) <= TEAM_FBI)
	{
		if(weaponid == WEAPON_NITESTICK)
		{
			TogglePlayerControllable(playerid, false);

			SetTimerEx("UnfreezePlayer", 15000, false, "i", playerid);

			new fmt_text[90];

			format(fmt_text, sizeof fmt_text, "?? ???????? %s ?? 15 ??????", GetPlayerNameEx(playerid));
			SendClientMessage(issuerid, 0x3399FFFF, fmt_text);

			format(fmt_text, sizeof fmt_text, "%s ??????? ??? ?? 15 ??????", GetPlayerNameEx(issuerid));
			SendClientMessage(playerid, 0x3399FFFF, fmt_text);

			CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, 500, FLOOD_RATE_KICK);
		}
	}
	
	if(weaponid == 23)
		{
			TogglePlayerControllable(playerid, false);

			SetTimerEx("UnfreezePlayer", 15000, false, "i", playerid);

			new fmt_text[90];

			format(fmt_text, sizeof fmt_text, "?? ?????? ????????????? ? ???????? %s ?? 15 ??????", GetPlayerNameEx(playerid));
			SendClientMessage(issuerid, 0x3399FFFF, fmt_text);

			format(fmt_text, sizeof fmt_text, "%s ????? ? ??? ????????????? ? ??????? ??? ?? 15 ??????", GetPlayerNameEx(issuerid));
			SendClientMessage(playerid, 0x3399FFFF, fmt_text);

			CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, 500, FLOOD_RATE_KICK);
		}

	if(GetPlayerData(issuerid, P_POWER))
	{
		if(!weaponid)
		{
			new Float: armour,
				Float: taken_health;

			GetPlayerHealth(playerid, health);
			GetPlayerArmour(playerid, armour);

			taken_health = GetPlayerData(issuerid, P_POWER) * 0.05;

			if(armour) SetPlayerArmour(playerid, armour - taken_health);
			else SetPlayerHealth(playerid, health - taken_health);
		}
	}

	return 1;
}

public: UnfreezePlayer(playerid)
{
	ClearAnimations(playerid);
	TogglePlayerControllable(playerid, true);

	return 1;
}

public OnVehicleSpawn(vehicleid)
{
	SetVehicleData(vehicleid, V_DRIVER_ID, INVALID_PLAYER_ID);

	if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_ADMIN_CAR || GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_ORG_CAR)
    {
        if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_ORG_CAR)
        SetPlayerData(GetVehicleData(vehicleid, V_ACTION_OWNER), P_FRACTION_CAR, INVALID_VEHICLE_ID);

        DestroyDeliveryVehicle(vehicleid);
    }

	if(IsAOwnableCar(vehicleid))
	{
		new index = GetVehicleData(vehicleid, V_ACTION_ID);

		SetVehiclePos
		(
			vehicleid,
			GetOwnableCarData(index, OC_POS_X),
			GetOwnableCarData(index, OC_POS_Y),
			GetOwnableCarData(index, OC_POS_Z)
		);
		SetVehicleZAngle(vehicleid, GetOwnableCarData(index, OC_ANGLE));
	}
	if(IsAFamilyCar(vehicleid))
    {
        new index = GetVehicleData(vehicleid, V_ACTION_ID);

        SetVehiclePos
        (
            vehicleid,
            GetFamilyCarData(index, F_POS_X),
            GetFamilyCarData(index, F_POS_Y),
            GetFamilyCarData(index, F_POS_Z)
        );
        SetVehicleZAngle(vehicleid, GetFamilyCarData(index, F_ANGLE));
    }
	else
	{
		DestroyVehicleLabel(vehicleid);
		SetVehicleData(vehicleid, V_FUEL, 40.0);
	}
	SetVehicleData(vehicleid, V_LIMIT, true);
	SetVehicleParamsEx(vehicleid, IsABike(vehicleid) ? VEHICLE_PARAM_ON : VEHICLE_PARAM_OFF, VEHICLE_PARAM_OFF, VEHICLE_PARAM_OFF, VEHICLE_PARAM_OFF, VEHICLE_PARAM_OFF, VEHICLE_PARAM_OFF, VEHICLE_PARAM_OFF);

	if(IsAOwnableCar(vehicleid)) SetVehicleHealth(vehicleid, GetVehicleData(vehicleid, V_HEALTH));

	switch(GetVehicleData(vehicleid, V_ACTION_TYPE))
	{
		case
			VEHICLE_ACTION_TYPE_FACTORY,
			VEHICLE_ACTION_TYPE_BUS_DRIVER,
			VEHICLE_ACTION_TYPE_TAXI_DRIVER,
			VEHICLE_ACTION_TYPE_MECHANIC,
			VEHICLE_ACTION_TYPE_TRUCKER:
		{
			SetVehicleData(vehicleid, V_ACTION_ID, VEHICLE_ACTION_ID_NONE);

			foreach(new i : Player)
			{
				if(!IsPlayerConnected(i) || !IsPlayerLogged(i)) continue;
				if(GetPlayerJobCar(i) != vehicleid) continue;

				SetPlayerData(i, P_JOB_CAR, INVALID_VEHICLE_ID);
				SetPlayerData(i, P_RENT_BIKE, INVALID_VEHICLE_ID);
			}
		}
		case VEHICLE_ACTION_TYPE_RENT_BIKE:
        {
            foreach(new i : Player)
            {
                if(!IsPlayerConnected(i) || !IsPlayerLogged(i)) continue;
                if(GetPlayerData(i, P_RENT_BIKE) != vehicleid) continue;
                DestroyDeliveryVehicle(vehicleid);
                SetPlayerData(i,  P_RENT_BIKE, 0);
                //SendClientMessage(i,-1,"???????????? ù/? ??? ????????? ?? ???ù???, ??????? ?????? ??????????!");
            }
        }
case VEHICLE_ACTION_TYPE_RENT_BIKE_BAT:
        {
            foreach(new i : Player)
            {
                if(!IsPlayerConnected(i) || !IsPlayerLogged(i)) continue;
                if(GetPlayerData(i, P_RENT_BIKE) != vehicleid) continue;
                DestroyDeliveryVehicle(vehicleid);
                SetPlayerData(i,  P_RENT_BIKE, 0);
                //SendClientMessage(i,-1,"???????????? ù/? ??? ????????? ?? ???ù???, ??????? ?????? ??????????!");
            }
        }
        
        case VEHICLE_ACTION_TYPE_RENT_BIKE_ARZ:
        {
            foreach(new i : Player)
            {
                if(!IsPlayerConnected(i) || !IsPlayerLogged(i)) continue;
                if(GetPlayerData(i, P_RENT_BIKE) != vehicleid) continue;
                DestroyDeliveryVehicle(vehicleid);
                SetPlayerData(i,  P_RENT_BIKE, 0);
                //SendClientMessage(i,-1,"???????????? ù/? ??? ????????? ?? ???ù???, ??????? ?????? ??????????!");
            }
        }

       case VEHICLE_ACTION_TYPE_RENT_BIKE_LUT:
        {
            foreach(new i : Player)
            {
                if(!IsPlayerConnected(i) || !IsPlayerLogged(i)) continue;
                if(GetPlayerData(i, P_RENT_BIKE) != vehicleid) continue;
                DestroyDeliveryVehicle(vehicleid);
                SetPlayerData(i,  P_RENT_BIKE, 0);
                //SendClientMessage(i,-1,"???????????? ù/? ??? ????????? ?? ???ù???, ??????? ?????? ??????????!");
            }
        }

	}
	return 1;
}

public OnVehicleDeath(vehicleid, killerid)
{
	if(GetVehicleCarMarketID(vehicleid) != -1)
		rent_cars_data[vehicleid - first_rent_car_id][rent_car_tenant_id] = INVALID_PLAYER_ID;

	if(IsAOwnableCar(vehicleid)) SetVehicleData(vehicleid, V_HEALTH, 300.0);

	return 1;
}

public OnPlayerText(playerid, text[])
{
	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, FLOOD_RATE_INC);

	if(!IsPlayerLogged(playerid)) return 0;

	if(GetPlayerData(playerid, P_MUTE))
	{
		SendClientMessage(playerid, 0xFF6600FF, "?? ?? ?????? ???????????? ??? ?? ????ù ????");

		SetPlayerChatBubble(playerid, "(( MUTED ))", 0xFF5533FF, 10.5, 2000);

		return 0;
	}
 	if(strcmp(text, "q", true) == 0)
    {
		SetPlayerChatBubble(playerid, "???????(?) ????????????", 0xFF5533FF, 10.5, 2000);
		Action(playerid, "???????(?) ????????????");
        return 0;
 	}
	if(GetPlayerAntiFloodData(playerid, AF_RATE) >= MAX_FLOOD_RATE)
	{
		SendClientMessage(playerid, 0x6B6B6BFF, "?? ???????");

		if(GetPlayerAntiFloodData(playerid, AF_RATE) >= MAX_FLOOD_RATE + 500)
			SendClientMessage(playerid, 0x6B6B6BFF, "??????????, ????????? ????????? ??????...");

		return 0;
	}
	if(strlen(text) > 90) return 0;

	if(IsAIP(text))
	{
   		SendClientMessage(playerid, -1, "?????????ù ? ???????!");
       	return false;
    }

	if(GetPlayerPhoneCall(playerid, PC_TIME) != -1)
	{
		new caller = GetPlayerPhoneCall(playerid, PC_INCOMING_PLAYER);
		new call_to = GetPlayerPhoneCall(playerid, PC_OUTCOMING_PLAYER);

		new fmt_str[128];
		format(fmt_str, sizeof fmt_str, "[ù??] %s: %s", GetPlayerNameEx(playerid), text);

		if(call_to != INVALID_PLAYER_ID && playerid == GetPlayerPhoneCall(call_to, PC_INCOMING_PLAYER))
		{
			SendClientMessage(call_to, 0xFFFF00FF, fmt_str);
		}
		else if(caller != INVALID_PLAYER_ID && playerid == GetPlayerPhoneCall(caller, PC_OUTCOMING_PLAYER))
		{
			SendClientMessage(caller, 0xFFFF00FF, fmt_str);
		}
		SendMessageInLocal(playerid, fmt_str, 0x999999FF, 25.0);

		return 0;
	}
	else if(!strcmp(text, "(", true))
	{
		Action(playerid, "??????????ù", _, false);
	}
	else if(!strcmp(text, "((", true))
	{
		if(!IsPlayerInAnyVehicle(playerid))
			ApplyAnimationEx(playerid, "GRAVEYARD", "mrnF_loop", 4.1, false, 0, 0, 0, 0, 0);

		Action(playerid, "?????? ??????????ù", _, false);
	}
	else if(!strcmp(text, ")", true))
	{
		Action(playerid, "????????ù", _, false);
	}
	else if(!strcmp(text, "))", true))
	{
		Action(playerid, "??????ù", _, false);
	}
	else if(!strcmp(text, "=0", true))
	{
		Action(playerid, "???????ù", _, false);
	}
	else SendMessageInChat(playerid, text);


	return 0;
}

public OnPlayerCommandText(playerid, cmdtext[])
{
    return 0;
}

public OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{
	// ????????? ???? ????? ? ?????????
    IsPlayerEntering[playerid] = true;
   
   SetTimerEx("ShowEngineNotification", 3000, false, "i", playerid);
   
   if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
    {
        new vehicleid = GetPlayerVehicleID(playerid);
        vInfo[vehicleid][vFuel] = GetVehicleData(vehicleid, V_FUEL);
        vInfo[vehicleid][vMileage] = GetVehicleData(vehicleid, V_MILEAGE);
        SetVehicleSpeedometerInfo(vehicleid, vInfo[vehicleid][vFuel], vInfo[vehicleid][vMileage]);
    }
    
    // ????????????? ?????? ??ù ?????????ù ???????
    SetTimerEx("FinishEnteringVehicle", 1000, false, "ii", playerid, vehicleid);

	if(vehicleid == buses[playerid])
    {
        if(busTimer[playerid] != -1)
        {
            KillTimer(busTimer[playerid]);
            busTimer[playerid] = -1;
        }
    }
   
   if (GetPlayerTeamEx(playerid) == TEAM_ARMY && GetVehicleModel(vehicleid) == 433)
  		     {
      		    SendClientMessage(playerid, -1, "??ù ?????? ???????? ?????????? ??????????? {FFFF00}/adelivery");
    		   }

	
	
    //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} OnPlayerEnterVehicle ");
	//SendClientMessage(playerid, -1, ""SC"??ù ????????ù ?????? ? ???????????? ???????? ??????????? {ffff00}/music");

	if(CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, FLOOD_RATE_INC, FLOOD_RATE_KICK))
	{
		SendClientMessage(playerid, 0x6B6B6BFF, "??? ??????????? ?? ?????? ????????? ?? ???????");

		if(GetPlayerAntiFloodData(playerid, AF_RATE) >= MAX_FLOOD_RATE + 500)
			SendClientMessage(playerid, 0x6B6B6BFF, "??????????, ????????? ????????? ??????...");
			
		return 0;
	}

	if(!ispassenger)
	{
		if(GetPlayerData(playerid, P_CUFFED))
		{
			ClearAnimations(playerid);

			new Float: x, Float: y, Float: z;
			GetPlayerPos(playerid, x, y, z);
			SetPlayerPos(playerid, x, y, z);

			return SendClientMessage(playerid, 0x999999FF, "?? ???????? ? ?????????");
		}

		if(IsPlayerInVehicle(GetVehicleData(vehicleid, V_DRIVER_ID), vehicleid) && GetPlayerState(GetVehicleData(vehicleid, V_DRIVER_ID)) == PLAYER_STATE_DRIVER)
		{
			ClearAnimations(playerid);

			new Float: x, Float: y, Float: z;
			GetPlayerPos(playerid, x, y, z);
			SetPlayerPos(playerid, x, y, z);

			return GameTextForPlayer(playerid, "~r~~h~car is used", 1000, 4);
		}
	}
	return 1;
}

public: OnPlayerEnterVehicleEx(playerid, vehicleid, is_driver)
{
    SendClientMessage(playerid, -1, ""SC"??ù ????????ù ?????? ? ???????????? ???????? ??????????? {ffff00}/music");
    
	SetPlayerData(playerid, P_LAST_VEHICLE, vehicleid);

	new vehicle_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
	new action_id = GetVehicleData(vehicleid, V_ACTION_ID);


	if(is_driver)
	{
		if(!IsABike(vehicleid))
        {
        	if(!GetVehicleParam(vehicleid, V_ENGINE))
		    {
               ShowNotificationDefault(playerid, 1, 5, 1, 0, "??????? ????????? ?????????ù: /e");
			} 
        }
		SetVehicleData(vehicleid, V_DRIVER_ID, playerid);

		if(!GetVehicleParam(vehicleid, V_LOCK))
		{
			if(GetPlayerData(playerid, P_DRIVING_LIC) > 0)
			{
				switch(vehicle_type)
				{
					case VEHICLE_ACTION_ORG_CAR:
		            {
		                new frac_id = GetVehicleData(vehicleid, V_ACTION_ID);
		                if(GetPlayerData(playerid, P_TEAM) != frac_id)
		                {
		                    SendClientMessage(playerid, -1, "{808080}??????:{FFFFFF} ??? ?? ???????? ?????? ????????? [ORG]");
		                    ShowNotificationDefault(playerid, 2, 5, 2, 0, "??? ?? ???????? ?????? ?????????");
		                    RemovePlayerFromVehicle(playerid);
		                }
		            }
					case VEHICLE_ACTION_TYPE_DRIVING_SCH:
					{
						if(GetPlayerDrivingExamInfo(playerid, DE_POINTS) >= 9)
						{
							SetPVarFloat(playerid, "car_damage", 1000.0);

							SetVehicleParam(vehicleid, V_LOCK, VEHICLE_PARAM_ON);
							NextDrivingExamRouteCP(playerid);

							SendClientMessage(playerid, 0x66CC00FF, "[??????????] ?????????? ??????? ?? ??????");
							SendClientMessage(playerid, 0xFFFF00FF, "????????! ???? ?? ???????? ? ?????? ??? ??????? ?? ??????, ??????? ????? ????????");
							SendClientMessage(playerid, 0xFFFFFFFF, "????? ??????? ?????? ??????? {0099FF}???????? ??????");
						}
						else
						{
							RemovePlayerFromVehicle(playerid);
							//SendClientMessage(playerid, 0xCECECEFF, "ù???????? ??????????? ?????????");
							ShowNotificationDefault(playerid, 2, 5, 2, 0, "??? ?? ???????? ?????? ?????????");
						}
					}
					case VEHICLE_ACTION_TYPE_FACTORY:
					{
						if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY_TRUCKER)
						{
							new job_car = GetPlayerJobCar(playerid);

							if(job_car == INVALID_VEHICLE_ID && action_id == VEHICLE_ACTION_ID_NONE)
							{
								new bool: take_car = true;
								switch(GetVehicleData(vehicleid, V_MODELID))
								{
									case 514:
									{
										CreateVehicleLabel(vehicleid, "???????? ???????\n{FFFFFF}???????? 0 / 8000 ?", 0xFF6600FF, 0.0, 2.1, 2.1, 20.0);

										SendClientMessage(playerid, 0x66CC00FF, "????????? ???????? ? ???????ù????? ?? ?????????? ??ù ??????? ???????");
										SendClientMessage(playerid, 0xFFFFFFFF, "?????????, ??? ????? ?? ????? ? ?????? ????????????? ?????????? ???????");
									}
									case 498:
									{
										CreateVehicleLabel(vehicleid, "???????? ??????????\n{FFFFFF}???????? 0 / 500 ??", 0x3399FFFF, 0.0, 0.0, 1.8, 20.0);

										SendClientMessage(playerid, 0x66CC00FF, "???????ù????? ?? ?????, ????? ???????? ????????? ??ù ??????");
										SendClientMessage(playerid, 0xFFFFFFFF, "?????????, ??? ????? ?? ????? ? ?????? ????????????? ????? ?????????");
									}
									default: take_car = false;
								}
								if(take_car)
								{
									SetVehicleData(vehicleid, V_ACTION_ID, true);
									SetPlayerData(playerid, P_JOB_CAR, vehicleid);
								}
							}
							else if(vehicleid != job_car)
							{
								RemovePlayerFromVehicle(playerid);
								SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????? ???????????? ???? ????????? ? ?????? ??????");
							}
							else KillEndJobTimer(playerid);
						}
						else
						{
							RemovePlayerFromVehicle(playerid);
							SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ?????? ???????? ??????");
						}
					}
					case VEHICLE_ACTION_TYPE_TAXI_DRIVER: // ù??????
					{
						if(GetPlayerJob(playerid) == 6)
						{
							new job_car = GetPlayerJobCar(playerid);

							if(!IsPlayerInJob(playerid) && job_car != vehicleid && action_id == VEHICLE_ACTION_ID_NONE)
							{
								Dialog
								(
									playerid, DIALOG_TAXI_RENT_CAR, DIALOG_STYLE_MSGBOX,
									"{FFCD00}ù????????",
									"{FFFFFF}????? ??ù?? ??????, ?????????? ????????? ?????????? ?????????? 200 ??????\n"\
									"?? ????????????? ?????? ????????? ??????? ???????",
									"??", "???"
								);
							}
							else if(vehicleid != job_car)
							{
								RemovePlayerFromVehicle(playerid);
								SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????? ???????????? ???? ????????? ? ?????? ??????");
							}
							else KillEndJobTimer(playerid);
						}
						else
						{
							RemovePlayerFromVehicle(playerid);
							SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????");
						}
					}
					case VEHICLE_ACTION_TYPE_TRUCKER: // ????????????
					{
						if(GetPlayerJob(playerid) == JOB_TRUCKER)
						{
							new job_car = GetPlayerJobCar(playerid);

							if(!IsPlayerInJob(playerid) && job_car != vehicleid && action_id == VEHICLE_ACTION_ID_NONE)
							{
								Dialog
								(
									playerid, DIALOG_TRUCKER_RENT_CAR, DIALOG_STYLE_MSGBOX,
									"{FFCD00}????????",
									"{FFFFFF}????? ??ù?? ??????, ?????????? ????????? ?????????? ????????? 180 ??????\n"\
									"?? ????????????? ?????? ????????? ??????? ???????",
									"??", "???"
								);
							}
							else if(vehicleid != job_car)
							{
								RemovePlayerFromVehicle(playerid);
								SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????? ???????????? ???? ????????? ? ?????? ??????");
							}
							else KillEndJobTimer(playerid);
						}
						else
						{
							RemovePlayerFromVehicle(playerid);
							SendClientMessage(playerid, 0xCECECEFF, "?? ?? ????????????");
						}
					}
					case VEHICLE_ACTION_TYPE_RENT_CAR:
					{
						if(!(playerid == rent_cars_data[vehicleid - first_rent_car_id][rent_car_tenant_id] && GetPlayerRentCar(playerid) == vehicleid))
						{
							TogglePlayerControllable(playerid, false);
							CallLocalFunction("ShowBuyCarInfo", "ii", playerid, vehicleid);
						}
					}
					case VEHICLE_ACTION_TYPE_ADMIN_CAR:
					{
						if(action_id != 1)
						{
							if(!GetPlayerAdminEx(playerid))
							{
								RemovePlayerFromVehicle(playerid);
								SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????? ?????????");
							}
						}
					}
					case VEHICLE_ACTION_TYPE_FAMILY_CAR:
                    {
                        //new fam_id = GetPlayerData(playerid, P_FAMILY);
                        action_id = GetVehicleData(vehicleid, V_ACTION_ID);
                        
                        if(g_family_car[action_id][F_OWNER_ID] != GetPlayerData(playerid, P_FAMILY) + 1)
                        {
                            if(g_family_car[action_id][F_RANG] > GetPlayerData(playerid, P_FAMILY_RANK))
                            {
                                RemovePlayerFromVehicle(playerid);
                                SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????? ????????? (RANG)");
                            }
                        }
                        else
                        {
                            RemovePlayerFromVehicle(playerid);
                            SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????? ????????? (FAMILY)");
                        }
                    }
				}
			}
			else
			{
				if(!IsABike(vehicleid))
				{
					RemovePlayerFromVehicle(playerid);
					SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????");
				}
			}
		}
		else RemovePlayerFromVehicle(playerid);
	}
	else
	{
		if(GetPlayerData(playerid, P_CUFFED)) TogglePlayerControllable(playerid, false);

		switch(vehicle_type)
		{
			case VEHICLE_ACTION_TYPE_BUS_DRIVER, VEHICLE_ACTION_TYPE_TAXI_DRIVER:
			{
				new driver = GetVehicleData(vehicleid, V_DRIVER_ID);
				if(driver != INVALID_PLAYER_ID && IsPlayerInJob(driver) && IsPlayerDriver(driver))
				{
					if(GetPlayerJobCar(driver) == vehicleid && IsPlayerInVehicle(driver, vehicleid))
					{
						new tariff = GetPlayerData(driver, P_JOB_TARIFF);

						if(vehicle_type == VEHICLE_ACTION_TYPE_TAXI_DRIVER)
						{
							if(GetPlayerMoneyEx(playerid) >= tariff)
							{
								new fmt_str[90];
								g_taxi_mileage[playerid] = 0.0;

								format(fmt_str, sizeof fmt_str, "%s ??? ? ???? ?????. ??????? ???????", GetPlayerNameEx(playerid));
								SendClientMessage(driver, 0x3399FFFF, fmt_str);

								format(fmt_str, sizeof fmt_str, "?? ???? ? ????? %s. ù????: %d ?????? (?????? ?? ?????? 100 ? ???????)", GetPlayerNameEx(driver), tariff);
								SendClientMessage(playerid, 0x3399FFFF, fmt_str);

								AddPlayerData(driver, P_JOB_LOAD_ITEMS, +, 1);
							}
							else
							{
								RemovePlayerFromVehicle(playerid);
								SendClientMessage(playerid, 0xFF6600FF, "???????????? ????? ??ù ?????? ??????");
							}
						}
						else
						{
							if(GetPlayerMoneyEx(playerid) >= tariff)
							{
								AddPlayerData(driver, P_JOB_LOAD_ITEMS, +, 1);
								GivePlayerMoneyEx(driver, tariff, "+ ?????? ??????? ? ????????", true, true);
							}
							else
							{
								RemovePlayerFromVehicle(playerid);
								SendClientMessage(playerid, 0xFF6600FF, "???????????? ????? ??ù ?????? ???????");
							}
						}
					}
				}
			}
		}
	}
	return 1;
}

public: OnPlayerExitVehicleEx(playerid, vehicleid, is_driver)
{
	if(vehicleid == buses[playerid])
    {
        busExitTime[playerid] = GetTickCount();
        busTimer[playerid] = SetTimerEx("CheckBusTimeout", 10000, false, "i", playerid);
    }

	StopAudioStreamForPlayer(playerid);
	
	//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} OnPlayerExitVehicle");

	SetPlayerData(playerid, P_LAST_VEHICLE, INVALID_VEHICLE_ID);
	
	//ShowNotificationDefault(playerid, 5, "??????? ????? ?????????ù", 7, "/lk", ">>");

	if(is_driver)
	{
		SetVehicleData(vehicleid, V_DRIVER_ID, INVALID_PLAYER_ID);

		if(GetPlayerDrivingExamInfo(playerid, DE_POINTS) >= 9)
		{
			DisablePlayerRaceCheckpoint(playerid);

			if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_DRIVING_SCH)
			{
				SetVehicleToRespawn(vehicleid);
			}
			SetPlayerData(playerid, P_DRIVING_LIC, 0);
			ClearPlayerDrivingExamInfo(playerid);

			SendClientMessage(playerid, 0xFF6600FF, "?? ???????? ??????? ??????????");
			SendClientMessage(playerid, 0xFF0000FF, "??????? ????????!");

			DeletePVar(playerid, "car_damage");
		}

		switch(GetVehicleData(vehicleid, V_ACTION_TYPE))
		{
		    case VEHICLE_ACTION_TYPE_RENT_BIKE:
            {
                if(GetPlayerData(playerid, P_RENT_BIKE) != vehicleid) return 1;
                //SendClientMessage(playerid, 0xCECECEFF, "? ??? ???? 40 ??? ????? ????????ù ? ????????? , ????? ???? ?? ????? ??????");
            }
			case VEHICLE_ACTION_TYPE_FACTORY:
			{
				if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY_TRUCKER)
				{
					if(GetPlayerJobCar(playerid) == vehicleid)
					{
						StartEndJobTimer(playerid);
						SendClientMessage(playerid, 0xFF6600FF, "? ??? ???? 15 ?????? ????? ????????ù ? ?????????");
					}
				}
			}
			case VEHICLE_ACTION_TYPE_BUS_DRIVER:
			{
				if(GetPlayerJob(playerid) == JOB_BUS_DRIVER)
				{
					if(IsPlayerInJob(playerid))
					{
						if(GetPlayerJobCar(playerid) == vehicleid)
						{
							StartEndJobTimer(playerid);
							SendClientMessage(playerid, 0xFF6600FF, "? ??? ???? 15 ?????? ????? ????????ù ? ???????");
						}
					}
				}
			}
			case VEHICLE_ACTION_TYPE_TAXI_DRIVER:
			{
				if(GetPlayerJob(playerid) == 6)
				{
					if(IsPlayerInJob(playerid))
					{
						if(GetPlayerJobCar(playerid) == vehicleid)
						{
							StartEndJobTimer(playerid);
							SendClientMessage(playerid, 0xFF6600FF, "? ??? ???? 15 ?????? ????? ????????ù ? ?????????");
						}
					}
				}
			}
			case VEHICLE_ACTION_TYPE_MECHANIC:
			{
				if(GetPlayerJob(playerid) == JOB_MECHANIC)
				{
					if(IsPlayerInJob(playerid))
					{
						if(GetPlayerJobCar(playerid) == vehicleid)
						{
							StartEndJobTimer(playerid);
							SendClientMessage(playerid, 0xFF6600FF, "? ??? ???? 15 ?????? ????? ????????ù ? ?????????");
						}
					}
				}
			}
			case VEHICLE_ACTION_TYPE_TRUCKER:
			{
				if(GetPlayerJob(playerid) == JOB_TRUCKER)
				{
					if(IsPlayerInJob(playerid))
					{
						if(GetPlayerJobCar(playerid) == vehicleid)
						{
							StartEndJobTimer(playerid);
							SendClientMessage(playerid, 0xFF6600FF, "? ??? ???? 15 ?????? ????? ????????ù ? ?????????");
						}
					}
				}
			}
		}
	}
	else
	{
		if(GetPlayerData(playerid, P_CUFFED)) TogglePlayerControllable(playerid, true);
	}
	//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} OnPlayerExitVehicle");
	return 1;
}

public OnVehicleDamageStatusUpdate(vehicleid, playerid)
{
	if(GetVehicleParam(vehicleid, V_ENGINE) == VEHICLE_PARAM_ON && GetPlayerData(playerid, P_IMPROVEMENTS) < 4)
	{
		//SetVehicleParam(vehicleid, V_ENGINE, VEHICLE_PARAM_OFF);
		//GameTextForPlayer(playerid, "~r~~h~engine off", 4000, 6);
		ShowNotificationDefault(playerid, 2, 5, 6, 0, "?? ?????? ? ?ù?, ?????? ?????? ??????????");

		new Float: veh_health;

		GetVehicleHealth(vehicleid, veh_health);

		if(IsAOwnableCar(vehicleid))
		{
			SetVehicleData(vehicleid, V_HEALTH, veh_health);

			if(veh_health < 300.0)
			{
				SetVehicleData(vehicleid, V_HEALTH, 300.0);
			}
		}

		switch(GetVehicleData(vehicleid, V_ACTION_TYPE))
		{
			case VEHICLE_ACTION_TYPE_DRIVING_SCH, VEHICLE_ACTION_TYPE_BUS_DRIVER:
			{
				new Float: health = GetPVarFloat(playerid, "car_damage");

				health -= floatabs((health - veh_health));

				SetPVarFloat(playerid, "car_damage", health);
			}
		}
	}
    return 1;
}

public OnPlayerEnterCheckpoint(playerid)
{
    new carid = GetPlayerVehicleID(playerid);
	if(GetPVarInt(playerid, "PizzaCheck") == 1 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[2][0], PizzaCheckpoint[2][1], PizzaCheckpoint[2][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 2);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	if(GetPVarInt(playerid, "PizzaCheck") == 2)
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[3][0], PizzaCheckpoint[3][1], PizzaCheckpoint[3][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 3);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	if(GetPVarInt(playerid, "PizzaCheck") == 3)
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[4][0], PizzaCheckpoint[4][1], PizzaCheckpoint[4][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 4);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	if(GetPVarInt(playerid, "PizzaCheck") == 4)
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[5][0], PizzaCheckpoint[5][1], PizzaCheckpoint[5][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 5);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	if(GetPVarInt(playerid, "PizzaCheck") == 5)
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[6][0], PizzaCheckpoint[6][1], PizzaCheckpoint[6][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 6);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	if(GetPVarInt(playerid, "PizzaCheck") == 6)
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[7][0], PizzaCheckpoint[7][1], PizzaCheckpoint[7][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 7);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	if(GetPVarInt(playerid, "PizzaCheck") == 7)
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[8][0], PizzaCheckpoint[8][1], PizzaCheckpoint[8][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 8);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	if(GetPVarInt(playerid, "PizzaCheck") == 8)
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[9][0], PizzaCheckpoint[9][1], PizzaCheckpoint[9][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 9);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	if(GetPVarInt(playerid, "PizzaCheck") == 9)
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, PizzaCheckpoint[1][0], PizzaCheckpoint[1][1], PizzaCheckpoint[1][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????????? ????? ?? ?????? ?????. ?? ????? ???????? ????ù ?????, ???????ù????? ????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? {ffff00}/gps - ?? ??????");
	  SetPVarInt(playerid, "PizzaCheck", 1);
	  SetPVarInt(playerid, "PizzaMoney", GetPVarInt(playerid, "PizzaMoney") + PizzaMoney);
	  return 1;
	}
	
	if(GetPVarInt(playerid, "Uroga") == 1 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[2][0], urogcheck[2][1], urogcheck[2][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 2);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 2 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[3][0], urogcheck[3][1], urogcheck[3][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 3);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 3 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[4][0], urogcheck[4][1], urogcheck[4][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 4);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 4 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[5][0], urogcheck[5][1], urogcheck[5][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 5);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 5 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[6][0], urogcheck[6][1], urogcheck[6][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 6);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 6 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[7][0], urogcheck[7][1], urogcheck[7][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 7);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 7 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[8][0], urogcheck[8][1], urogcheck[8][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 8);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 8 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[9][0], urogcheck[9][1], urogcheck[2][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 9);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	
	if(GetPVarInt(playerid, "Uroga") == 9 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[10][0], urogcheck[10][1], urogcheck[10][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 10);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 10 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[11][0], urogcheck[11][1], urogcheck[11][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 11);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 11 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[12][0], urogcheck[12][1], urogcheck[12][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 12);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 12 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[13][0], urogcheck[13][1], urogcheck[13][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 13);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 13 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[14][0], urogcheck[14][1], urogcheck[14][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 14);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 14 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[15][0], urogcheck[15][1], urogcheck[15][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 15);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
    if(GetPVarInt(playerid, "Uroga") == 15 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[16][0], urogcheck[16][1], urogcheck[16][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 16);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 16 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[17][0], urogcheck[17][1], urogcheck[17][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ???? ??????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 17);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 17 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[17][0], urogcheck[17][1], urogcheck[17][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"???? ??????? ? ??????? ???????????. ???????? ?? ?? ????? ? ??????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 2);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	if(GetPVarInt(playerid, "Uroga") == 18 )
	{
	  DisablePlayerCheckpoint(playerid);
	  SetPlayerCheckpoint(playerid, urogcheck[0][0], urogcheck[0][1], urogcheck[0][2], 2.0);
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ?? ?????. ???????ù????? ?? ????????? ????????");
	  SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"??ù ?????????ù ?????? ? ????????ù ???????? ???????ù????? ? ??????????");
	  SetPVarInt(playerid, "Uroga", 1);
	  SetPVarInt(playerid, "UrogMoney", GetPVarInt(playerid, "UrogMoney") + UrogMoney);
	ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
	  return 1;
	}
	
	if (g_PlayerQuestState[playerid] == QUEST_IN_PROGRESS) 
{
        // ????? ?????? ???? ????
        ShowPlayerDialog(playerid, DIALOG_END_QUEST, DIALOG_STYLE_MSGBOX, 
                         "???ù ????: ??????? ?? ??????! ??????????ù ? ????????.", 
                         "???????", "??? ???????");
    }

    if(PlayerIsDalnoboi[playerid] == 2)
	{
	    DisablePlayerCheckpoint(playerid);
	    PlayerIsDalnoboi[playerid] = 0;
	    DeletePVar(playerid, "cargovzyat");
	    DeletePVar(playerid, "cargosp");
	    GivePlayerMoneyEx(playerid, 50000);
	    DestroyDeliveryVehicle(cargo[playerid]);
        SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ?? ??????? ????????? ?????. ? ?????? ?????? ???? ???????? ????????? {ffff00}50000{ffffff} ??????");
        return true;
	}
	if(PlayerIsDalnoboi[playerid] == 1)
	{
	    DisablePlayerCheckpoint(playerid);
	    PlayerIsDalnoboi[playerid] = 2;
	    new randomize;
   		randomize = random(sizeof(zakazlist));
     	SetPlayerCheckpoint(playerid, zakazlist[randomize][0], zakazlist[randomize][1], zakazlist[randomize][2], 5.0);
     	SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ?? ??????? ????????? ?????? ????? ????! ù????? ??????? ?? ?????????(????? ?? ?????)");
  		return true;
	}
    if(PlayerIsInkasator[playerid] == 2)
    {
	    DisablePlayerCheckpoint(playerid);
	    SendClientMessage(playerid,-1,"{FFDC33}| {FFFFFF}?? ??????? ??????! ???????? ?? ? ?????? ?????");
	    SetPlayerCheckpoint(playerid, 2376.4221,-2141.5938,21.9713, 3.0);
	    PlayerIsInkasator[playerid] = 3;
    }
    else if(PlayerIsInkasator[playerid] == 3)
    {
	    DisablePlayerCheckpoint(playerid);
	    SendClientMessage(playerid,-1,"{FFDC33}| {FFFFFF}?? ??????? ????????? ?????");
	    GivePlayerMoneyEx(playerid, 40000);

	    PlayerIsInkasator[playerid] = 0;
	    return 1;
    }

	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, 500, FLOOD_RATE_KICK);

	new action_type = GetPlayerCPInfo(playerid, CP_ACTION_TYPE);
	if(IsPlayerInCheckpoint(playerid))
	{
		switch(action_type)
		{
			case CP_ACTION_TYPE_LOADER_JOB_TAKE:
			{
				if(GetPlayerTempJob(playerid) == TEMP_JOB_LOADER)
				{
					if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_LOADER_LOAD)
					{
						if(!IsPlayerInAnyVehicle(playerid))
						{
							DisablePlayerCheckpoint(playerid);

							ClearAnimations(playerid);
							ApplyAnimationEx(playerid, "CARRY", "liftup", 4.0, 0, 0, 0, 0, 0, 0, USE_ANIM_TYPE_NONE - 1);
							SetTimerEx("SetPlayerLoaderJobLoad", 1000, false, "i", playerid);
						}
					}
				}
			}
			case CP_ACTION_TYPE_MINER_JOB_PUT:
            {
                new fmt_str[64];
                //
                new rand = random(10) + 5;
                new items = GetPlayerJobLoadItems(playerid) + rand;
                //
                RemovePlayerAttachedObjectEx(playerid, A_OBJECT_SLOT_SPINE, A_OBJECT_SLOT_HAND + 1);
                RemovePlayerAttachedObjectEx(playerid, A_OBJECT_SLOT_SPINE + 1, A_OBJECT_BONE_SPINE);
                //
                ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 1);
                SetPlayerJobLoadItems(playerid, items);
                //
                SetPlayerTempJobState(playerid, TEMP_JOB_STATE_MINER_LOAD);
                //
                format(fmt_str, sizeof fmt_str, "?? ????????? {FF9900}%d ?? {32a44b}????", rand);
                SendClientMessage(playerid, 0x32a44bFF, fmt_str);
                //
                format(fmt_str, sizeof fmt_str, "????? ?????????? ???????? ????ù: {FF9900}%d ??", items);
                SendClientMessage(playerid, 0x1E90FFFF, fmt_str);
                //
                format(fmt_str, sizeof fmt_str, "+ %d ??", rand);
                SetPlayerChatBubble(playerid, fmt_str, 0x32a44bFF, 10.0, 2000);
                //
                //SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_AMOUNT, itemss + rand);
                //UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE);

				new type = GetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_AMOUNT);

				SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_AMOUNT, type + 50);
				UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE);
                //
                //SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 18634, A_OBJECT_BONE_RIGHT_HAND, 0.07, 0.03, 0.04, 0.0, 270.0, 270.0, 1.5, 2.1, 1.8, 0);
                SetPlayerMinerJobLoadCP(playerid);

                AddPlayerData(playerid, P_QUEST_EXP_3, +, 1);
				UpdatePlayerDatabaseInt(playerid, "quest_exp_3", GetPlayerData(playerid, P_QUEST_EXP_3));

				if(GetPlayerData(playerid, P_QUEST_EXP_3) == 20)
				{
				    SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'??????? ??????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
				                                SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");
				    GivePlayerMoneyEx(playerid, 5000, "?????????? ??????");

				    SetPlayerData(playerid, P_QUEST_3, 1);
				    UpdatePlayerDatabaseInt(playerid, "quest_3", 1);
				    
				    AddPlayerData(playerid, P_TOP_5, +, 1);
					UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
				}
            }
			case CP_ACTION_TYPE_LOADER_JOB_PUT:
			{
//				if(GetPlayerTempJob(playerid) == TEMP_JOB_LOADER)
//				{
//					if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_LOADER_UNLOAD)
//					{
				SetPlayerJobLoadItems(playerid, GetPlayerJobLoadItems(playerid) + 1);

				RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);
				ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 0);
//
				SetPlayerLoaderJobLoadCP(playerid);

				new fmt_str[120];
				format(fmt_str, sizeof fmt_str, "[?????????ù]: "c_server"???? ????????? ?? ?????! ????? ?????????? ù?????: {FF9900}%d ??.", GetPlayerJobLoadItems(playerid));
				SendClientMessage(playerid, COR_SERVER, fmt_str);

				AddPlayerData(playerid, P_QUEST_EXP_1, +, 1);
				UpdatePlayerDatabaseInt(playerid, "quest_exp_1", GetPlayerData(playerid, P_QUEST_EXP_1));

				if(GetPlayerData(playerid, P_QUEST_EXP_1) == 10)
				{
				   SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'?????? ??????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
				                                SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");
				    GivePlayerMoneyEx(playerid, 5000, "?????????? ??????");

				    SetPlayerData(playerid, P_QUEST_1, 1);
				    UpdatePlayerDatabaseInt(playerid, "quest_1", 1);
				    
				    AddPlayerData(playerid, P_TOP_5, +, 1);
					UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
				}
			}
			case CP_ACTION_TYPE_GPS:
			{
			    DisablePlayerCheckpoint(playerid);
			    Send(playerid,COR_SERVER,"[?????????]: ?? ??????? ?? ????? ?????????ù.");
			}
			case CP_ACTION_TYPE_MINER_JOB_TAKE:
			{
				if(GetPlayerTempJob(playerid) == TEMP_JOB_MINER)
				{
					if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_MINER_LOAD)
					{
						if(!IsPlayerInAnyVehicle(playerid))
						{
							ApplyAnimationEx(playerid, "BASEBALL", "Bat_4", 3.1, 1, 1, 1, 0, 0, 0, USE_ANIM_TYPE_NONE - 1);
							SetTimerEx("SetPlayerMinerJobTakeOre", 8_000, false, "ii", playerid, 1);
						}
					}
				}
			}
			case CP_ACTION_TYPE_LUMBERJACK_PUT:
			{

				SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LUMBERJACK_CHOP);
				ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.1, 1, 0, 1, 0, 800, 0);

				RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);
				//SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 326, A_OBJECT_BONE_RIGHT_HAND, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0);

				SetPlayerJobLoadItems(playerid, GetPlayerJobLoadItems(playerid) + 1);

				new fmt_text[65];

				format(fmt_text, sizeof fmt_text, "????? ?????????? ?? ?????! ????? ?????????? ????: {FF9900}%d ??", GetPlayerJobLoadItems(playerid));
				SendClientMessage(playerid, 0x66CC00FF, fmt_text);

				SetPlayerLumberJackChopCP(playerid);

				AddPlayerData(playerid, P_QUEST_EXP_4, +, 1);
				UpdatePlayerDatabaseInt(playerid, "quest_exp_4", GetPlayerData(playerid, P_QUEST_EXP_4));

				if(GetPlayerData(playerid, P_QUEST_EXP_4) == 20)
				{
				    SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'??????? ??????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
				                                SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");
				    GivePlayerMoneyEx(playerid, 5000, "?????????? ??????");

				    SetPlayerData(playerid, P_QUEST_4, 1);
				    UpdatePlayerDatabaseInt(playerid, "quest_4", 1);
				    
				    AddPlayerData(playerid, P_TOP_5, +, 1);
					UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
				}

			}
			case CP_ACTION_TYPE_LUMBERJACK_TAKE:
			{
				if(GetPlayerTempJob(playerid) == TEMP_JOB_LUMBERJACK)
				{
					if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_LUMBERJACK_CHOP)
					{
						if(!IsPlayerInAnyVehicle(playerid))
						{
							DisablePlayerCheckpoint(playerid);

							ApplyAnimationEx(playerid, "BASEBALL", "Bat_4", 3.1, 1, 1, 1, 0, 0, 0, USE_ANIM_TYPE_NONE - 1);

							SetTimerEx("SetPlayerLumberJackTakeWood", (random(5) + 10) * 1000, false, "i", playerid);
						}
					}
				}
			}
		}
	}
	return 1;
}

public OnPlayerLeaveCheckpoint(playerid)
{
	return 1;
}

public OnPlayerEnterRaceCheckpoint(playerid)
{
	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, 500, FLOOD_RATE_KICK);

	new action_type = GetPlayerRaceCPInfo(playerid, RCP_ACTION_TYPE);
	new vehicleid = GetPlayerVehicleID(playerid);
	
	
	if(IsPlayerInRaceCheckpoint(playerid))
	{
		switch(action_type)
		{
			case RCP_ACTION_TYPE_DRIVING_EXAM:
			{
				if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_DRIVING_SCH)
				{
					new step = GetPlayerDrivingExamInfo(playerid, DE_ROUTE_STEP);

					if(step >= sizeof driving_exam_route - 1)
					{
						ClearPlayerDrivingExamInfo(playerid);
						DisablePlayerRaceCheckpoint(playerid);

						new Float: health = GetPVarFloat(playerid, "car_damage");
						SetVehicleToRespawn(vehicleid);

						if(health < 900.0)
						{
							SetPlayerData(playerid, P_DRIVING_LIC, 0);

							Dialog
							(
								playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
								"{FF9900}??????? ????????",
								"{FFFFFF}? ?????????, ??? ?? ??????? ?????????ù ? ???????????? ?????? ????????.\n"\
								"??????? ??????????? ?????? ??????? ???????.\n\n"\
								"? ????????? ??? ???????????? ????? ??????????, ???????ù ???.\n"\
								"???? ??? ?? ?????????!",
								"??", ""
							);
						}
						else
						{
							new query[64];
							format(query, sizeof query, "UPDATE accounts SET driving_lic=%d WHERE id=%d LIMIT 1", GetPlayerData(playerid, P_DRIVING_LIC), GetPlayerAccountID(playerid));
							mysql_query(mysql, query, false);

							if(!mysql_errno())
							{
								Dialog
								(
									playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
									"{66CC00}??????? ??????? ???????",
									"{FFFFFF}?? ??????? ????? ???????????? ????? ???????? ?? ????????\n"\
									"? ????????? ???????????? ?????????????!\n"\
									"{9999FF}?? ????? ?????? ?? ?????????? ??????? ???????????, ????\n"\
									"??? ?????????????.\n"\
									"{FFFFFF}?? ????????? ??????? ?????????ù ???????????, ? ?????\n"\
									"??????? ????????? ???????ù. ??? ????? ?????ù??? ?????\n"\
									"??? ?? ??????. ????????? ?????? ? ????????? ????? ???\n"\
									"????ù ???????? ???? ??????????ù ????ù-???? ??????.",
									"??", ""
								);
							}
							else
							{
								SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ?????????? ? ????????????? {FF0000}(equ-code 07)");
							}
						}
					}
					else if(step >= 0)
					{
						NextDrivingExamRouteCP(playerid);
					}
				}
			}
			case RCP_ACTION_TYPE_BUS_ROUTE:
			{
				if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_BUS_DRIVER)
				{
					if(IsPlayerInJob(playerid))
					{
						new route_id = GetPlayerData(playerid, P_BUS_ROUTE);
						new route_step = GetPlayerData(playerid, P_BUS_ROUTE_STEP);

						if(g_bus_route[route_id][route_step][BRS_POS_X] == 0.0)
						{
							SetPlayerData(playerid, P_BUS_ROUTE_STEP, 0);
						}

						if(g_bus_route[route_id][route_step - 1][BRS_STOP])
						{
							new fmt_str[90];
							DisablePlayerRaceCheckpoint(playerid);

							GameTextForPlayer(playerid, "~r~Stop", 4000, 1);
							SendClientMessage(playerid, 0x66CC00FF, "?????????. ????? ??????????");

							format(fmt_str, sizeof fmt_str, "??????? ?? ???????? %s ???????ù???ù ????? 10 ??????", g_bus_routes[route_id][BR_NAME]);
							SendMessageInLocal(playerid, fmt_str, 0x669999FF, 45.0);

							SetTimerEx("NextBusRouteCP", 10_000, false, "i", playerid);
						}
						else
						{
							AddPlayerData(playerid, P_JOB_WAGE, +, random(30) + 20);
							NextBusRouteCP(playerid);
						}
					}
				}
			}
			case RCP_ACTION_TYPE_ORDER:
			{
				if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_TRUCKER)
				{
					new order_id = GetPlayerData(playerid, P_ORDER);

					if(IsPlayerInJob(playerid) && order_id != -1)
					{
						if(!GetTruckIndex(vehicleid))
						{
							new biz_id = GetOrderData(order_id, O_COMPANY_ID);

							if(!IsPlayerInRangeOfPoint(playerid, 4.5, GetBusinessData(biz_id, B_EXIT_POS_X), GetBusinessData(biz_id, B_EXIT_POS_Y), GetBusinessData(biz_id, B_EXIT_POS_Z))) return 1;

							if(!GetPlayerJobLoadItems(playerid))
								return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????????? ??? ?????????");

							new fmt_msg[90];

							if(GetPlayerJobLoadItems(playerid) < GetOrderData(order_id, O_AMOUNT))
							{
								SendClientMessage(playerid, 0xFF9933FF, "???????????? ????????? ??ù ?????????ù ??????");
								format(fmt_msg, sizeof fmt_msg, "?? ????????? %d ??., ? ????????ù %d ??.", GetPlayerJobLoadItems(playerid), GetOrderData(order_id, O_AMOUNT));
								SendClientMessage(playerid, 0xCECECEFF, fmt_msg);
							}
							else
							{
								AddBusinessData(biz_id, B_PRODS, +, GetOrderData(order_id, O_AMOUNT));

								mysql_format(mysql, fmt_msg, sizeof fmt_msg, "UPDATE business SET products=%d WHERE id=%d", GetBusinessData(biz_id, B_PRODS), GetBusinessData(biz_id, B_SQL_ID));
								mysql_query(mysql, fmt_msg, false);

								SetPlayerData(playerid, P_ORDER, -1);
								DisablePlayerRaceCheckpoint(playerid);

								new salary = GetOrderData(order_id, O_AMOUNT) * GetOrderData(order_id, O_PRICE);

								new income = salary - (GetOrderData(order_id, O_AMOUNT) * 24);

								SendClientMessage(playerid, 0xFFFF00FF, "????? ????????!");

								format(fmt_msg, sizeof fmt_msg, "?? ??????? ???????ù??? \"%s\" %d ????????? ?? ????? %d ??????", GetBusinessData(biz_id, B_NAME), GetOrderData(order_id, O_AMOUNT), salary);
								SendClientMessage(playerid, 0x3399FFFF, fmt_msg);

								format(fmt_msg, sizeof fmt_msg, "?????ù ??????? ?? ???? ??????? ???????ù?? %d ??????", income);
								SendClientMessage(playerid, 0x66CC00FF, fmt_msg);

								AddPlayerData(playerid, P_JOB_WAGE, +, income);

								SetPlayerJobLoadItems(playerid, GetPlayerJobLoadItems(playerid) - GetOrderData(order_id, O_AMOUNT));
								DeleteOrder(order_id);
							}
						}
						else
						{
							new fs_id = GetOrderData(order_id, O_COMPANY_ID);

							if(!IsPlayerInRangeOfPoint(playerid, 4.5, GetFuelStationData(fs_id, FS_POS_X), GetFuelStationData(fs_id, FS_POS_Y), GetFuelStationData(fs_id, FS_POS_Z))) return 1;

							if(!GetPlayerJobLoadItems(playerid))
								return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????????? ??? ???????");

							new fmt_msg[90];

							if(GetPlayerJobLoadItems(playerid) < GetOrderData(order_id, O_AMOUNT))
							{
								SendClientMessage(playerid, 0xFF9933FF, "???????????? ??????? ??ù ?????????ù ??????");
								format(fmt_msg, sizeof fmt_msg, "?? ????????? %d ?., ? ????????ù %d ?.", GetPlayerJobLoadItems(playerid), GetOrderData(order_id, O_AMOUNT));
								SendClientMessage(playerid, 0xCECECEFF, fmt_msg);
							}
							else
							{
								AddFuelStationData(fs_id, FS_FUELS, +, GetOrderData(order_id, O_AMOUNT));

								mysql_format(mysql, fmt_msg, sizeof fmt_msg, "UPDATE fuel_stations SET fuels=%d WHERE id=%d", GetFuelStationData(fs_id, FS_FUELS), GetFuelStationData(fs_id, FS_SQL_ID));
								mysql_query(mysql, fmt_msg, false);

								SetPlayerData(playerid, P_ORDER, -1);
								DisablePlayerRaceCheckpoint(playerid);

								new salary = GetOrderData(order_id, O_AMOUNT) * GetOrderData(order_id, O_PRICE);

								new income = salary - (GetOrderData(order_id, O_AMOUNT) * 24);

								SendClientMessage(playerid, 0xFFFF00FF, "????? ????????!");

								format(fmt_msg, sizeof fmt_msg, "?? ??????? ??? \"%s\" %d ?. ??????? ?? ????? %d ??????", GetFuelStationData(fs_id, FS_NAME), GetOrderData(order_id, O_AMOUNT), salary);
								SendClientMessage(playerid, 0x3399FFFF, fmt_msg);

								format(fmt_msg, sizeof fmt_msg, "?????ù ??????? ?? ???? ??????? ???????ù?? %d ??????", income);
								SendClientMessage(playerid, 0x66CC00FF, fmt_msg);

								AddPlayerData(playerid, P_JOB_WAGE, +, income);

								SetPlayerJobLoadItems(playerid, GetPlayerJobLoadItems(playerid) - GetOrderData(order_id, O_AMOUNT));
								DeleteOrder(order_id);
							}
						}
					}
				}
			}

			default:
			{

			}
		}

	}
	return 1;
}

public OnPlayerLeaveRaceCheckpoint(playerid)
{
	return 1;
}

public OnRconCommand(cmd[])
{
	return 1;
}

public OnObjectMoved(objectid)
{
	return 1;
}

public OnPlayerObjectMoved(playerid, objectid)
{
	return 1;
}

stock ClearMedBed(playerid, bedid)
{
	if(GetPlayerData(playerid, P_OCCUPIED_BED) != -1)
	{
		SetPlayerData(playerid, P_OCCUPIED_BED, -1);
	}

	g_med_bed_used[bedid] = false;
	gPlayerInMedBed[playerid] = false;
	UpdateMedBed(bedid);

	return 1;
}

stock UpdateMedBed(bedid) // ???????? ?????
{
	new fmt_text[200];

	format(fmt_text, sizeof fmt_text, "{ffff00}´ ????????ù ?????????ù ????? ª\n \n{ffff00}|{ffffff}????? ?????: {ffff00}%d\n{ffff00}|{ffffff}???????: {ffff00}???????????\n\n{ffffff}????????? ????? ??ù ?????????????ù\n? ??????????? ??????", bedid + 1);
	UpdateDynamic3DTextLabelText(g_med_bed_label[bedid], 0xFFFFFFEE, fmt_text);

	return 1;
}

public HospitalTreatment()
{
	for(new playerid; playerid < MAX_PLAYERS; playerid++)
	{
		if(!IsPlayerConnected(playerid)) continue;
		if(!IsPlayerLogged(playerid)) continue;

		new bedid = GetPlayerData(playerid, P_OCCUPIED_BED);
		if(bedid == -1) continue;
		
		new Float:hp;
		GetPlayerHealth(playerid, hp);

		if(gPlayerInMedBed[playerid] == true)
		{
 		  if(hp >= 100.0)
 		  {
    		   ClearMedBed(playerid, bedid);
   		    SendClientMessage(playerid, 0x00BFFFFF, "?? ?????? ???? ??????ù ? ???????? ?? ????????");
   		    continue;
 		  }
		}

		hp += 3.0;
		if(hp > 100.0) hp = 100.0;

		SetPlayerHealth(playerid, hp);
	}

	SetTimer("HospitalTreatment", 2000, false);
	return 1;
}

forward CheckBusTimeout(playerid);
public CheckBusTimeout(playerid)
{
    if(!IsPlayerInVehicle(playerid, buses[playerid]))
    {
        DestroyDeliveryVehicle(buses[playerid]);
        buses[playerid] = INVALID_VEHICLE_ID;
        SendClientMessage(playerid, 0x999999FF, "??? ??????? ??? ?????? ?? ???????????.");
    }
    busTimer[playerid] = -1;
    return 1;
}



public: BuyCarPTDUpdate(playerid)
{
	new fmt_str[50];
	new fmt_text[50];
	if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;

//	new type = buy_car_select_color_type[playerid];
	new biz_id = GetPlayerInBiz(playerid);
	if (biz_id == -1) return 1;
	new car_market_id = biz_id - 34;

	new select_car = buy_car_select_car[playerid];
	new modelid = car_market_data[car_market_id][select_car][0];

	//new fmt_td_text[85];
	//format(fmt_td_text, sizeof fmt_td_text, "???? %d", type + 1);

	//PlayerTextDrawSetString(playerid, buy_car_PTD[playerid][2], fmt_td_text);
	//PlayerTextDrawShow(playerid, buy_car_PTD[playerid][2]);

	format(fmt_str, sizeof fmt_str, "%d Rub", GetVehicleInfo(modelid - 400, VI_PRICE));
	PlayerTextDrawSetString(playerid, avtsln_PTD[playerid][11], fmt_str);

    format(fmt_text, sizeof fmt_text, "%s", GetVehicleInfo(modelid - 400, VI_NAME));
	PlayerTextDrawSetString(playerid, avtsln_PTD[playerid][14], fmt_text);
	
	format(fmt_text, sizeof fmt_text, "%d km/h", GetVehicleInfo(modelid - 400, VI_MAXSP));
	PlayerTextDrawSetString(playerid, avtsln_PTD[playerid][12], fmt_text);

	format(fmt_text, sizeof fmt_text, "%d.0 cek", GetVehicleInfo(modelid - 400, VI_USCOR));
	PlayerTextDrawSetString(playerid, avtsln_PTD[playerid][13], fmt_text);

	//static const
	//	car_market_name[][] = {"????-????", "???????", "??????", "???????"};


	//format(fmt_td_text, sizeof fmt_td_text, "????????? #%d", select_car + 1);
	//PlayerTextDrawSetString(playerid, buy_car_PTD[playerid][0], fmt_td_text);

	//format(fmt_td_text, sizeof fmt_td_text, "%s~n~~n~~b~~h~????: %d P~n~?????: %s", GetVehicleInfo(modelid - 400, VI_NAME), GetVehicleInfo(modelid - 400, VI_PRICE), car_market_name[car_market_id]);
	//PlayerTextDrawSetString(playerid, buy_car_PTD[playerid][1], fmt_td_text);

///	new color_index = buy_car_select_color[playerid][type];

	//PlayerTextDrawBoxColor(playerid, buy_car_PTD[playerid][4], rgb_array[color_index]);
	//PlayerTextDrawShow(playerid, buy_car_PTD[playerid][4]);

	//if(--color_index < 0)
//		color_index = sizeof rgb_array - 1;

	//PlayerTextDrawBoxColor(playerid, buy_car_PTD[playerid][3], rgb_array[color_index] - 0xAA);
	//PlayerTextDrawShow(playerid, buy_car_PTD[playerid][3]);

	//color_index += 2;
	//if(color_index > sizeof rgb_array - 1)
	//	color_index = 1;

	//PlayerTextDrawBoxColor(playerid, buy_car_PTD[playerid][5], rgb_array[color_index] - 0xAA);
	//PlayerTextDrawShow(playerid, buy_car_PTD[playerid][5]);

	new color1 = GetPlayerData(playerid, P_AUTOSALON_COLOR1);
	new color2 = GetPlayerData(playerid, P_AUTOSALON_COLOR2);

	ChangeVehicleColor(GetPlayerData(playerid, P_BUY_CAR), 1, 1);
	return 1;
}

public: ShowBuyCarInfo(playerid, vehicleid)
{
	new text[275];

	//static const vehicle_class_name[][] = {"????-????", "??????", "???????", "???????"};

	new modelid = GetVehicleModel(vehicleid) - 400;
	format
	(
		text, sizeof text,
		"{FFFFFF}ù?? ?????????ù:\t%s ?????\n\
		????????:\t\t%s\n\
		????? ??????:\t%d\n\
		????????? ??????:\t{FFFF00}%d ???.\n\
		{FFFFFF}????????? ???????:\t{00CC00}%d ???.\n\n\
		{FFFFFF}??ù ??????? ???? ?????? ??????? \"??????\"\n\
		????? ??ù?? ???? ? ?????? ??????????? /rentcar",
		"??????????????",
		//vehicle_class_name[ GetVehicleInfo(modelid, VI_TYPE) ],
		GetVehicleInfo(modelid, VI_NAME),
		modelid + 400,
		GetVehicleInfo(modelid, VI_PRICE) / 100,
		GetVehicleInfo(modelid, VI_PRICE)
	);

	Dialog(playerid, DIALOG_BIZ_CAR_MARKET_CAR_INFO, DIALOG_STYLE_MSGBOX, "{FF9900}?????????", text, "??????", "?????");
	return 1;
}

stock ExitPlayerBuyCarMarket(playerid)
{
	if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return -1;

	DestroyDeliveryVehicle(GetPlayerData(playerid, P_BUY_CAR));
	SetPlayerData(playerid, P_BUY_CAR, INVALID_VEHICLE_ID);

	new in_biz = GetPlayerInBiz(playerid);
	if (in_biz == -1) return 1;

	//BuyCarTDsHideForPlayer(playerid);
	//HidePlayerSelectPanel(playerid);

	TogglePlayerControllable(playerid, true);


	SetPlayerPosEx
	(
		playerid,
		GetBusinessData(in_biz, B_EXIT_POS_X),
		GetBusinessData(in_biz, B_EXIT_POS_Y),
		GetBusinessData(in_biz, B_EXIT_POS_Z),
		GetBusinessData(in_biz, B_EXIT_ANGLE),
		0,
		0
	);
	SetPlayerInBiz(playerid, -1);
	
	HideAutosalonTextDraws(playerid);
	ShowHud(playerid);


//	SetPlayerPosEx(playerid, 1145.5162, 221.0673, 995.1235, 34.2197, 1, biz_id + 6000);

	return 1;
}

stock CarMarketShowNextCar(playerid, next = '+')
{
	new biz_id = GetPlayerInBiz(playerid);
	if(biz_id == -1) return 1;
	new car_market_id = biz_id - 34;

	if(GetBusinessData(biz_id, B_TYPE) != BUSINESS_TYPE_CAR_MARKET) return 1;

	new max_car_index = GetCarMarketMaxIndex(car_market_id);

	if(next == '+')
	{
		if(++buy_car_select_car[playerid] > max_car_index)
			buy_car_select_car[playerid] = 0;
	}
	else
	{
		if(--buy_car_select_car[playerid] < 0)
			buy_car_select_car[playerid] = max_car_index;
	}

	new select_car = buy_car_select_car[playerid];
//	new color_1 = buy_car_select_color[playerid][0];
	//new color_2 = buy_car_select_color[playerid][1];
	new color1 = GetPlayerData(playerid, P_AUTOSALON_COLOR1);
	new color2 = GetPlayerData(playerid, P_AUTOSALON_COLOR2);

	DestroyDeliveryVehicle(GetPlayerData(playerid, P_BUY_CAR));
	SetPlayerData(playerid, P_BUY_CAR, CreateVehicle(car_market_data[car_market_id][select_car][0], 1149.8434, 226.0655, 994.7953, 20.8742, 1, 1, 1, 1));
	SetVehicleVirtualWorld(GetPlayerData(playerid, P_BUY_CAR), playerid + 1);
	LinkVehicleToInterior(GetPlayerData(playerid, P_BUY_CAR), 1);

	CallLocalFunction("BuyCarPTDUpdate", "i", playerid);
	return 1;
}

stock GetCarMarketMaxIndex(market_id)
{
	new max_index;

	for(new idx; idx < 76; idx ++)
	{
		if(car_market_data[market_id][idx][0] == 0)	break;
		++ max_index;
	}

	return max_index - 1;
}

public: ChangeColorPTDUpdate(playerid)
{
	return 1;
}

public OnPlayerPickUpPickupEx(playerid, pickupid, action_type, action_id)
{
SetTimerEx("FixPickup", 400, false, "d", playerid);

if(player_state_pickup[playerid] == 0)
	{
	DestroyDynamicArea(on_player_enter_pickup);
	DestroyDynamicArea(on_player_enter_pickup_2);
	player_state_pickup[playerid] = 1;
	
	if(pickupid == buspick1 || pickupid == buspick2 || pickupid == buspick3)
    {
        playerPickup[playerid] = pickupid;
    }

    if(pickupid == RazdewPravo)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	if(pickupid == RazdewGibdd)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_DPS) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	
	if(pickupid == RazdewMvd)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_PPS) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	if(pickupid == RazdewFsb)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_FBI) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	
	if(pickupid == testrazdevminner)
							{
							if(testrazdevstatus[playerid] == false)
                         	{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_MINER_START, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????? ???????",
									"{FFFFFF}?? ?????? ?????????ù ?? ?????? ????????",
									"??", "???"
								);
								return 1;
							}
							
							if(testrazdevstatus[playerid] == true)
                         	{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_MINER_END, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????? ???????",
									"{FFFFFF}?? ??????? ??? ?????? ????????? ??????? ?????",
									"??", "???"
								);
								return 1;
							  } 
							}
							
	if(pickupid == RazdewBolka)
	{
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{FFCD00}??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	if(pickupid == RazdewBolka)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	if(pickupid == RazdewTrk)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_RADIO) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	if(pickupid == RazdewArmy)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_ARMY) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	
		if(pickupid == RazdewFSIN)
	{
if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;		
	}
	
	if(pickupid == RazdewArz)
	{
	if(!(1 <= GetPlayerTeamEx(playerid) < TEAM_OPG_ARZAMASKAYA)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	
	if(pickupid == RazdewBat)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_OPG_BATYREVSKAYA) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
   
  if(pickupid == RazdewLit)
	{
	if(GetPlayerTeamEx(playerid) != TEAM_OPG_LYTKARINSKAYA) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ???? ???????");
		Dialog
			(
				playerid, DIALOG_FRAKSKINS, DIALOG_STYLE_MSGBOX,
				"{993333}"SERVER_NAME"{FFFFFF} | ??????????",
				"{FFFFFF}?? ??????? ??????????ù?",
				"??", "???"
			);
		return 1;
	}
	
	if (pickupid == fsbspec)
{
    if (GetPlayerTeamEx(playerid) != TEAM_FBI)
        return SendClientMessage(playerid, COLOR_GREY, "?????? ? ??????????? ???????? ?????? ??????????? ???.");
       
    if(GetPlayerJob(playerid) < 5) 
	{
        return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ? -?? ?????.");
    }
        	
	if(!IsWorkDayStarted(playerid)) return 1;

    new list_text[256];
    strcat(list_text, "\n");
    strcat(list_text, "{EB4C42}1.\t{FFFFFF}??????????????? ???????????\t??????? ??ù ????????????\n");
    strcat(list_text, "{EB4C42}2.\t{FFFFFF}??????????? ???????????\t??????? ??ù ????????????\n");
    strcat(list_text, "{EB4C42}3.\t{FFFFFF}??ù?? ??????????\t??????? ??ù ??ù??ù");

    ShowPlayerDialog(playerid, DIALOG_MASC_MAIN, DIALOG_STYLE_TABLIST_HEADERS,
        "{EB4C42}Baze Russia RolePlay{FFFFFF} | ?????????",
        list_text,
        "???????", "??????");
}
	if (pickupid == fsinmeet)
	{
	callcmd::meetinfo(playerid, " ");
	}
    if(pickupid == family223)
    {
        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid family223");
        Dialog(playerid, DIALOG_CREATE_FAMILY666, DIALOG_STYLE_MSGBOX, "{00CC00}???????? ?????", "ù???? ?????? ??????? ????? ?? 3???", "??????", "??????");
		
		return 1;
		
    }
	
	if(pickupid == pickupotd)
	{
	   //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid pickupotd");
	   Dialog
	(
	playerid, DIALOG_OTD, DIALOG_STYLE_MSGBOX,
	"{DC143C}"SERVER_NAME"{ffffff} |?????????ù",
	"??????????? {ffff00}Test\n{ffffff} \n???? ?????? ???ù ? ?????? ?????? ????? ???????????.??????\n????????,??? ??ù ??????????? ? ???? ?ù?? ??????????:\n \n{ffff00}1.{ffffff}??????? ???????\n{ffff00}2.{ffffff}??????????ù ?????\n{ffff00}3.{ffffff}????? ????????? ?\n",
	"?????",
	"???????");
	return 1;
	}
	
	                   if(pickupid == vxodpravo)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid vxodpravo");
                         SetPlayerPos(playerid, 978.711975,-18.241992,1380.996215); 
                         SetPlayerFacingAngle(playerid, 365.0000); 
                         SetPlayerInterior(playerid, 0); 
                         }
                        
                        if(pickupid == vixodpravo)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid vixodpravo");
                         SetPlayerPos(playerid, -141.419021,613.931823,12.116942); 
                         SetPlayerFacingAngle(playerid, 365.0000); 
                         SetPlayerInterior(playerid, 0); 
                         }

if(pickupid == tkvxodpon)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid tkvxodpon");
                         SetPlayerPos(playerid, 0.216851,2501.760498,2011.005126); 
                         SetPlayerFacingAngle(playerid, 270.0000); 
                         SetPlayerInterior(playerid, 1); 
                         }
                         
                        if(pickupid == tkvixodpon)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid tkvixodpon");
                         SetPlayerPos(playerid, 2327.538574,2012.246826,16.121875); 
                         SetPlayerFacingAngle(playerid, 365.0000); 
                         SetPlayerInterior(playerid, 0); 
                         }
                        
                        if(pickupid == lazaretvhod)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid lazaretvhod");
                         SetPlayerPos(playerid, -2002.991333,-1504.858642,1751.005249); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 270.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 1); // 0 - ????? ?? ?????.
                         }
                        
                        if(pickupid == lazaretvihod)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} lazaretvihod");
                         SetPlayerPos(playerid, -1800.220703,-2757.756591,1501.000000); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 270.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 1); // 0 - ????? ?? ?????.
                         }
                        
                        if(pickupid == cameravhod)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid cameravhod");
                         SetPlayerPos(playerid, -1699.121582,-2702.468261,1499.500000); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 270.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 1); // 0 - ????? ?? ?????.
                         }
                        
                        if(pickupid == cameravihod)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid cameravihod");
                         SetPlayerPos(playerid, -1800.229248,-2766.166015,1501.000000); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 270.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 1); // 0 - ????? ?? ?????.
                         }
                        
                        if(pickupid == lesopilvhod)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid lesopilvhod");
                         SetPlayerPos(playerid, -1887.554321,-2608.276611,1501.000000); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 270.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 1); // 0 - ????? ?? ?????.
                         }
                        
                        if(pickupid == lesopilvihod)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid lesopilvihod");
                         SetPlayerPos(playerid, -1799.559448,-2759.095947,1501.000000); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 270.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 1); // 0 - ????? ?? ?????.
                         }
                         if(pickupid == pkvxod)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid pkvxod");
                         SetPlayerPos(playerid, 1309.926147,1711.613647,1498.363159); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 365.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 1); // 0 - ????? ?? ?????.
                         }
                        
                        if(pickupid == pkvixod)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid pkvixod");
                         SetPlayerPos(playerid, -2380.000244,31.873023,26.519172); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 365.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 0); // 0 - ????? ?? ?????.
                         }
                        
                        
                         if (pickupid == mchsrazdewalka)
	{
	    Dialog
	    (
	        playerid, DIALOG_MCHS, DIALOG_STYLE_MSGBOX,
	        "{FFCD00}???",
	        "{FFFFFF}?? ????????????? ??????? ?????????ù?",
	        "??", "???????"
	    );

	    return 1;
	}
	
	if (pickupid == doorSvidaniePickup[0])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

    if (!g_fsinRooms[0][isBusy])
        return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");

    SetPlayerPosEx(playerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(playerid, 89.32);
    SetPlayerVirtualWorld(playerid, 2);
    SetPlayerInterior(playerid, 1);
}

if (pickupid == doorSvidaniePickup[1])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

    if (!g_fsinRooms[1][isBusy])
        return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");

    SetPlayerPosEx(playerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(playerid, 89.32);
    SetPlayerVirtualWorld(playerid, 3);
    SetPlayerInterior(playerid, 1);
}

if (pickupid == doorSvidaniePickup[2])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

    if (!g_fsinRooms[2][isBusy])
        return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");

    SetPlayerPosEx(playerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(playerid, 89.32);
    SetPlayerVirtualWorld(playerid, 4);
    SetPlayerInterior(playerid, 1);
}

if (pickupid == doorSvidaniePickup[3])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

    if (!g_fsinRooms[3][isBusy])
        return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");

    SetPlayerPosEx(playerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(playerid, 89.32);
    SetPlayerVirtualWorld(playerid, 5);
    SetPlayerInterior(playerid, 1);
}

if (pickupid == doorSvidaniePickup[4])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

    if (!g_fsinRooms[4][isBusy])
        return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");

    SetPlayerPosEx(playerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(playerid, 89.32);
    SetPlayerVirtualWorld(playerid, 6);
    SetPlayerInterior(playerid, 1);
}

if (pickupid == doorSvidaniePickup[5])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

    if (!g_fsinRooms[5][isBusy])
        return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");

    SetPlayerPosEx(playerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(playerid, 89.32);
    SetPlayerVirtualWorld(playerid, 7);
    SetPlayerInterior(playerid, 1);
}

if (pickupid == doorSvidaniePickup[6])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

    if (!g_fsinRooms[6][isBusy])
        return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");

    SetPlayerPosEx(playerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(playerid, 89.32);
    SetPlayerVirtualWorld(playerid, 8);
    SetPlayerInterior(playerid, 1);
}

if (pickupid == doorSvidaniePickup[7])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

    if (!g_fsinRooms[7][isBusy])
        return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");

    SetPlayerPosEx(playerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(playerid, 89.32);
    SetPlayerVirtualWorld(playerid, 9);
    SetPlayerInterior(playerid, 1);
}

	if (pickupid == mchsavto)
	{
	    Dialog
	    (
	        playerid, DIALOG_MCHS_AVTO, DIALOG_STYLE_MSGBOX,
	        "{FFCD00}???",
	        "{FFFFFF}?? ????????????? ??????? ??ù?? ???????????",
	        "??", "???????"
	    );

	    return 1;
	}

	if(pickupid == mchsrazdewalka)
	{
	  SetPlayerHealth(playerid, 100);
	  SetPlayerArmour(playerid, 100);
	  SetPlayerSkin(playerid, 23);
	}
                         
                         	if(pickupid == cblit)
	{
	SetPlayerPos(playerid, 1501.90, 2490.86, 2501.00);
	SetPlayerInterior(playerid, 1);
	SetPlayerVirtualWorld(playerid, 1);
	return 1;
	}
	if(pickupid == cblitexit)
	{
	SetPlayerPos(playerid, -2334.60, -173.15, 26.81);
	SetPlayerInterior(playerid, 0);
	SetPlayerVirtualWorld(playerid, 0);
	return 1;
	}
	
	if(pickupid == tehsentervlad)
	{
	    SendClientMessage(playerid, 0xCECECEFF, "? ?????? ??? ??????? ?????ù ?????");
	}
                         
                        if(pickupid == pickupferma)
                        {
                        callcmd::sosososo(playerid, "");
                       } 

//==============[??? ???????? ...(*?0?)?]=============================
if (pickupid == medka)
{
    if (GetPlayerData(playerid, P_MEDCARD_STATE) == 1)
        return SCM(playerid, COLOR_WHITE, "?? ????????? ????????????. ???????? ????? ?????? ????? ????????? ?????.");

    if (GetPlayerData(playerid, P_MEDCARD_STATE) == 2)
    {
        new date[16];
        GetFormattedDate(date);

        SetPlayerData(playerid, P_MEDCARD, 1);
        format(GetPlayerData(playerid, P_MEDCARD_DATE), 16, "%s", date);
        SetPlayerData(playerid, P_MEDCARD_STATE, 0);

        UpdatePlayerDatabaseInt(playerid, "medcard", 1);
        UpdatePlayerDatabaseString(playerid, "medcard_date", date);

        SCM(playerid, COLOR_WHITE, "{ffffff}?? ???????? ??????????? ????? {ffff00}(/med).");
        return 1;
    }

    if (GetPlayerData(playerid, P_MEDCARD) == 1)
        return SCM(playerid, COLOR_WHITE, "? ??? ??? ???? ??????????ù ?????.");

    if (GetOnlineDoctors() == 0)
    {
        ShowPlayerDialog(playerid, 1006, DIALOG_STYLE_MSGBOX,
            "{DC143C}"SERVER_NAME"{ffffff} | ????????? ??????????? ?????.",
            "?? ????????????? ?????? ???????? ???-????? ?? 5000 ???????\n\n????? ?????? ???????ù ???????????? (10 ?????).",
            "??", "??????");
        return 1;
    }

    SCM(playerid, COLOR_WHITE, "? ???????? ???? ?????. ?????????? ? ??? ??ù ????????ù ????????.");
}
	if(pickupid == avtorinokz)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid avtorinokz");
                         SetPlayerPos(playerid, 440.320770,982.426330,1001.000000); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 270.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 1); // 0 - ????? ?? ?????.
                         SetPlayerVirtualWorld(playerid, 101);
                         SetCameraBehindPlayer(playerid);
                         }
                         if(pickupid == avtorinokv)
                        {
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid avtorinokv");
                         SetPlayerPos(playerid, 1980.988037,-551.223999,11.974724); // ?????????? ?????? ??? ?????? ?? ?????.
                         SetPlayerFacingAngle(playerid, 270.0000); // ???? ???????? ??????.
                         SetPlayerInterior(playerid, 0); // 0 - ????? ?? ?????.
                         SetPlayerVirtualWorld(playerid, 0);
                         SetCameraBehindPlayer(playerid);
                         }
 if(pickupid == quest)
    {
        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid quest");
        ShowPlayerQuestMenu(playerid);
	}

	if(pickupid == PickupPoint)
    {
        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} pickupid PickupPoint");
        PickupCreated = 0;
        DestroyPickup(PickupPoint);
        RemovePlayerMapIcon(playerid, 25);
        return 1;
    }

	if(pickupid == mexpick)
	{
		if(GetPlayerJob(playerid) == JOB_MECHANIC)
		{
			new job_car = GetPlayerJobCar(playerid);

				Dialog
				(
					playerid, DIALOG_MECHANIC_RENT_CAR, DIALOG_STYLE_MSGBOX,
					"{FFCD00}????????",
					"{FFFFFF}????? ??ù?? ??????, ?????????? ????????? ?????????? ????????? 180 ??????\n"\
					"?? ????????????? ?????? ????????? ??????? ???????",
					"??", "???"
				);
		}
		else
		{
			RemovePlayerFromVehicle(playerid);
			SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????????");
		}
	}
	
    if(pickupid == razdkyr)
	{
		if(GetPlayerJob(playerid) == 2)
		{
		    if(!GetPVarInt(playerid, "PizzaCheck"))
		    {
		    	Dialog(playerid, 17173, DIALOG_STYLE_MSGBOX, "{ffff00}?????? ???????", "?? ?????? ?????? ?????? ????????", "??", "??????");
			}
			else
			{
			    Dialog(playerid, 17174, DIALOG_STYLE_MSGBOX, "{ffff00}?????? ???????", "?? ?????? ????????? ?????? ????????", "??", "??????");
			}
		}
		else return SendClientMessage(playerid, 0xCECECEFF, ""USC"?? ?? ??????");

	}
		
	if(pickupid == buspick1)
	{
		if(GetPlayerJob(playerid) == JOB_BUS_DRIVER)
		{
			new job_car = GetPlayerJobCar(playerid);
			new vehicleid = GetPlayerVehicleID(playerid);

			if(!IsPlayerInJob(playerid) && job_car != vehicleid && action_id == VEHICLE_ACTION_ID_NONE)
			{
				Dialog
				(
					playerid, DIALOG_BUS_RENT_CAR, DIALOG_STYLE_MSGBOX,
					"{FFCD00}?????????? ????",
					"{FFFFFF}????? ??ù?? ??????, ?????????? ????????? ?????????? ????????? 180 ??????\n"\
					"?? ????????????? ?????? ??ù?? ??????? ? ???????",
					"??", "???"
				);
				}
							else KillEndJobTimer(playerid);
						}
						else
						{
							RemovePlayerFromVehicle(playerid);
							SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ????????");
						}
	}
	if(pickupid == buspick2)
	{
		if(GetPlayerJob(playerid) == JOB_BUS_DRIVER)
						{
							new job_car = GetPlayerJobCar(playerid);
							new vehicleid = GetPlayerVehicleID(playerid);

							if(!IsPlayerInJob(playerid) && job_car != vehicleid && action_id == VEHICLE_ACTION_ID_NONE)
							{
								Dialog
								(
									playerid, DIALOG_BUS_RENT_CAR, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????????? ????",
									"{FFFFFF}????? ??ù?? ??????, ?????????? ????????? ?????????? ????????? 180 ??????\n"\
									"?? ????????????? ?????? ??ù?? ??????? ? ???????",
									"??", "???"
								);
							}
							else KillEndJobTimer(playerid);
						}
						else
						{
							RemovePlayerFromVehicle(playerid);
							SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ????????");
						}
	}
	
	if(pickupid == buspick3)
	{
		if(GetPlayerJob(playerid) == JOB_BUS_DRIVER)
						{
							new job_car = GetPlayerJobCar(playerid);
							new vehicleid = GetPlayerVehicleID(playerid);

							if(!IsPlayerInJob(playerid) && job_car != vehicleid && action_id == VEHICLE_ACTION_ID_NONE)
							{
								Dialog
								(
									playerid, DIALOG_BUS_RENT_CAR, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????????? ????",
									"{FFFFFF}????? ??ù?? ??????, ?????????? ????????? ?????????? ????????? 180 ??????\n"\
									"?? ????????????? ?????? ??ù?? ??????? ? ???????",
									"??", "???"
								);
							}
							else KillEndJobTimer(playerid);
						}
						else
						{
							RemovePlayerFromVehicle(playerid);
							SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ????????");
						}
	}

	if(pickupid == ystroitk)
	{
        if(GetPlayerJob(playerid) == 10)
        {
        	SendClientMessage(playerid, -1, "{ff2400}|{ffffff} ?? ??? ????????? ? ???????????? ????????");
		}
		else
		{
        	ShowPlayerDialog(playerid, 8652, DIALOG_STYLE_MSGBOX, ""SERVER"?????????? ? ù?", "?? ????????????? ?????? ?????????ù ? ù??????????? ?????????\n??ù ?????????? ??? ????????? {ffff00}10 ???????{ffffff} ? {ffff00}????? ????????? ?{ffffff}", "??", "??????");
		}
		return 1;
	}

	if(pickupid == arendafuri)
	{
	    if(GetPlayerJob(playerid) == 10)
	    {
	    	ShowPlayerDialog(playerid, 8653, DIALOG_STYLE_MSGBOX, ""SERVER"?????? ????", "?? ????????????? ?????? ?????????? ???? ??{ffff00} 1500 {ffffff}???????", "??", "??????");
	    }
	    else
	    {
	        SendClientMessage(playerid, -1, "{ff2400}|{ffffff} ?? ?? ????????? ? ???????????? ????????");
		}
	}

	if(GetPlayerData(playerid, P_PICKUP_TIME) < gettime())
	{
		g_player[playerid][P_PICKUP_TIME] = gettime()+3;
		
		if (IsPlayerInRangeOfPoint(playerid, 5.0, GetPickupInfo(pickupid, P_POS_X), GetPickupInfo(pickupid, P_POS_Y), GetPickupInfo(pickupid, P_POS_Z)))
{
    SetPlayerData(playerid, P_LAST_PICKUP, pickupid);

    switch(action_type)
			{
				case PICKUP_ACTION_TYPE_TELEPORT:
				{
					if(GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_NONE)
					{
						switch(GetTeleportData(action_id, T_ACTION_TYPE))
						{
							case T_ACTION_TYPE_BLOCK_LEAVE_AREA:
							{
								SetPlayerData(playerid, P_BLOCK_LEAVE_AREA, true);
							}
							case T_ACTION_TYPE_END_JOB:
							{
								EndPlayerTempJob(playerid, TEMP_JOB_FACTORY, true);
							}
							case T_ACTION_TYPE_LEAVE_HOSPITAL:
							{
								if(GetPlayerData(playerid, P_HOSPITAL))
								{
									if(GetPlayerData(playerid, P_OCCUPIED_BED) != -1) return SendClientMessage(playerid, COLOR_GREY, "??????????? ?? ????? ????????? ??? ? ????? ?????ù???.");
									
									SendClientMessage(playerid, 0x66CC00FF, "?? ?????????? ?? ????????");
									
									SetPlayerData(playerid, P_HOSPITAL, false);
								}
							}
							case T_ACTION_TYPE_FSINVHOD:
							{
								if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");
							}
							case T_ACTION_TYPE_ARMYVHOD:
							{
								if(GetPlayerTeamEx(playerid) != TEAM_ARMY) return SendClientMessage(playerid, COLOR_GREY, "?? ?? ??????????????");
							}
							case T_ACTION_TYPE_KPZVHOD:
							{
								if(GetPlayerTeamEx(playerid) != TEAM_FSIN && GetPlayerTeamEx(playerid) != TEAM_PPS && GetPlayerTeamEx(playerid) != TEAM_DPS && GetPlayerTeamEx(playerid) != TEAM_FBI && GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT) return SendClientMessage(playerid, COLOR_GREY, "?? ?? ???????? ?????????????????? ???????");
							}
							case T_ACTION_TYPE_FSINANDZEK:
							{
								if(GetPlayerTeamEx(playerid) != TEAM_FSIN && GetPlayerData(playerid, P_FJAIL) <= 0)
									return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");
							}
							case T_ACTION_TYPE_GROOMROOM:
							{
								if(GetPlayerTeamEx(playerid) != TEAM_FSIN && GetPVarInt(playerid, "groomaccess") != 1)
										return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");
							}
							case T_ACTION_TYPE_FSINSVIDANIE1:
							{
  							 if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
    							  return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

								if (!g_fsinRooms[0][isBusy])
     							  return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");
							}
							case T_ACTION_TYPE_FSINSVIDANIE2:
							{
  							 if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
    							  return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

								if (!g_fsinRooms[1][isBusy])
     							  return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");
							}
							case T_ACTION_TYPE_FSINSVIDANIE3:
							{
  							 if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
    							  return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

								if (!g_fsinRooms[2][isBusy])
     							  return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");
							}
							case T_ACTION_TYPE_FSINSVIDANIE4:
							{
  							 if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
    							  return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

								if (!g_fsinRooms[3][isBusy])
     							  return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");
							}
							case T_ACTION_TYPE_FSINSVIDANIE5:
							{
  							 if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
    							  return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

								if (!g_fsinRooms[4][isBusy])
     							  return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");
							}
							case T_ACTION_TYPE_FSINSVIDANIE6:
							{
  							 if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
    							  return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

								if (!g_fsinRooms[5][isBusy])
     							  return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");
							}
							case T_ACTION_TYPE_FSINSVIDANIE7:
							{
  							 if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
    							  return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

								if (!g_fsinRooms[6][isBusy])
     							  return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");
							}
							case T_ACTION_TYPE_FSINSVIDANIE8:
							{
  							 if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
    							  return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ?????");

								if (!g_fsinRooms[7][isBusy])
     							  return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ??????? ?? ???? ????????", " ");
							}
							case T_ACTION_TYPE_LEAVE_PPS:
							{
								if(GetPlayerData(playerid, P_JAIL))
								{
									SendClientMessage(playerid, 0x999999FF, "????ù ?????????ù ?? ???????");

									SetPlayerSpawnPos(playerid);

									return 1;
								}
							}
						}

						SetPlayerPosEx
						(
							playerid,
							GetTeleportData(action_id, T_POS_X),
							GetTeleportData(action_id, T_POS_Y),
							GetTeleportData(action_id, T_POS_Z),
							GetTeleportData(action_id, T_ANGLE),
							GetTeleportData(action_id, T_INTERIOR),
							GetTeleportData(action_id, T_VIRTUAL_WORLD)
						);
					}
				}
				case PICKUP_ACTION_TYPE_DRIVING_TUTO:
				{
					ShowPlayerDrivingTutorial(playerid);
				}
				case PICKUP_ACTION_TYPE_ATM:
				{
					ShowPlayerATMDialog(playerid);
				}
				case PICKUP_ACTION_TYPE_FAM:
            {
                callcmd::familybuy(playerid);
            }
				case PICKUP_ACTION_OBMEN_MONET:
				{
				    ShowPlayerObmenMonet(playerid);
				}
				case PICKUP_ACTION_FLOWER_1:
				{
				    if(GetPlayerData(playerid, P_FLOWER_1) >= 1) return Send(playerid, -1, "?? ??? ??????? ???? ??????!");
				    
				    Dialog
					(
						playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
						""c_i"8 ?????",
						""c_b"???????, ?? ????? ?????? ????? ??????. ????????? ?????? ??????!",
						"??", ""
					);
					
					SetPlayerData(playerid, P_FLOWER_1, 1);
					UpdatePlayerDatabaseInt(playerid, "flower1", 1);
					
					
				}
				case PICKUP_ACTION_FLOWER_2:
				{
				    if(GetPlayerData(playerid, P_FLOWER_2) >= 1) return Send(playerid, -1, "?? ??? ??????? ???? ??????!");
				    
					if(GetPlayerData(playerid, P_FLOWER_1) == 1)
					{
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"ù?? ??????? ???????! ?????? ????? ??? ? ???ù, ???????ù??ù ?????? ??????.\n"\
							"ù??? ???????? ????? ???? ???????? ????? ??????, ?? ????? ??? ??????????.",
							"??", ""
						);

						SetPlayerData(playerid, P_FLOWER_2, 1);
						UpdatePlayerDatabaseInt(playerid, "flower2", 1);
					}
					else
					    return Send(playerid, -1,"?? ??????? ??????? ?????????? ??????, ????? ??????? ????.");
				}
				case PICKUP_ACTION_FLOWER_3:
				{
				    if(GetPlayerData(playerid, P_FLOWER_3) >= 1) return Send(playerid, -1, "?? ??? ??????? ???? ??????!");
				    
				    if(GetPlayerData(playerid, P_FLOWER_2) == 1)
					{

					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"???????, ?? ????? ?????? ????????ù! ù????? ?????? ????? ? ??????? ??????, ?????? ???? ??????????.",
							"??", ""
						);
					
						SetPlayerData(playerid, P_FLOWER_3, 1);
						UpdatePlayerDatabaseInt(playerid, "flower3", 1);
                    }
					else
					    return Send(playerid, -1,"?? ??????? ??????? ?????????? ??????, ????? ??????? ????.");
				}
				case PICKUP_TAKE_FLOWER:
				{
				    if(GetPlayerData(playerid, P_TAKE_FLOWER) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ?????? ??????!");
				    
				    if(GetPlayerData(playerid, P_FLOWER_3) == 1)
					{
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"???????, ?????? ??? ??????? ???? ????????. ??? ???? ???????, ?? ??? ??????? ????? ??????????? ????,\n"\
							"? ??????? ??????? ???? ????????????. ???????? ?? ? ?????????? ? ????? ?????.",
							"??", ""
						);
						
						SetPlayerData(playerid, P_TAKE_FLOWER, 1);
						UpdatePlayerDatabaseInt(playerid, "TakeFlower", 1);
                    }
					else
					    return Send(playerid, -1,"?? ?? ??????? ??? ?????.");
				}
				case PICKUP_CONGRATULATE_WOMEN:
				{
				    if(GetPlayerData(playerid, P_CONGRATULATE_WOMEN) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ?????? ??????!");
				    
				    if(GetPlayerData(playerid, P_TAKE_FLOWER) == 1)
					{
					
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"?????? ?????? ?? ????????ù! ù????? ? ???ù ????ù ??????. ??? ???? ?????,\n"\
							"??? ??????? ??????????. ????? ???? ? ???? ??????? ????, ?????? ??????????!",
							"??", ""
						);

						SetPlayerData(playerid, P_CONGRATULATE_WOMEN, 1);
						UpdatePlayerDatabaseInt(playerid, "CongratulateWomen", 1);
                    }
					else
					    return Send(playerid, -1,"?? ?? ????????? ?????????? ?????? ??????.");
				}
				case PICKUP_BUY_PERFUME:
				{
				    if(GetPlayerData(playerid, P_BUY_PERFUME) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ?????? ??????!");
				    
				    if(GetPlayerData(playerid, P_CONGRATULATE_WOMEN) == 1)
					{
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"???????, ?????? ??????? ? ???ù. ?????? ??? ??????? ? ????????, ??? ??? 30 ??? ???????? ? ????????,\n"\
							"?? ??? ????? ?? ?????. ??????? ??????? ?? ?????? ??????, ?? ????? ????? ???ù??? ???????? ??????? ?? ???ù.",
							"??", ""
						);
						
						SetPlayerData(playerid, P_BUY_PERFUME, 1);
						UpdatePlayerDatabaseInt(playerid, "BuyPerfume", 1);
                    }
					else
					    return Send(playerid, -1,"?? ?? ????????? ?????????? ?????? ??????.");
				}
				case PICKUP_GIVE_PERFUME:
				{
				    if(GetPlayerData(playerid, P_GIVE_PERFUME) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ?????? ??????!");

				    if(GetPlayerData(playerid, P_BUY_PERFUME) == 1)
					{
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"??????? ? ?? ???? ?? ??????ù, ?? ??? ????? ????? ?? ????? ???????. ? ???ù ???????? ????????? ???????, ??????? ??????\n"\
							"ù???? ????? ???????? ????? ??????? ??????? ????????????? ????, ?? ? ???? ?????? ??? ?????. ù??? ?????????? ??????\n"\
							"???????? ??ù ??????? ? ???? ?? ????????. ????? ???? ?????? ??? ??? ?????, ?? ????????.",
							"??", ""
						);
						
						SetPlayerData(playerid, P_GIVE_PERFUME, 1);
						UpdatePlayerDatabaseInt(playerid, "GivePerfume", 1);
                    }
					else
					    return Send(playerid, -1,"?? ?? ????????? ?????????? ?????? ??????.");
				}
				case PICKUP_BUY_CAKE:
				{
				    if(GetPlayerData(playerid, P_BUY_CAKE) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ?????? ??????!");

				    if(GetPlayerData(playerid, P_GIVE_PERFUME) == 1)
					{
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"???????! ù??? ??? ? ???ù, ???????? ?????? ???????? ? ?????.",
							"??", ""
						);
						
						SetPlayerData(playerid, P_BUY_CAKE, 1);
						UpdatePlayerDatabaseInt(playerid, "BuyCake", 1);
                    }
					else
					    return Send(playerid, -1,"?? ?? ????????? ?????????? ?????? ??????.");
				}
				case PICKUP_BUY_PRODUCTS:
				{
				    if(GetPlayerData(playerid, P_BUY_PRODUCTS) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ?????? ??????!");

				    if(GetPlayerData(playerid, P_BUY_CAKE) == 1)
					{
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"???????, ?????? ? ???????? ? ???ù. ù??? ???????? ?????? ????? ? ??????? ??? ??? ? ???? ù?????.",
							"??", ""
						);
						
						SetPlayerData(playerid, P_BUY_PRODUCTS, 1);
						UpdatePlayerDatabaseInt(playerid, "BuyProducts", 1);
						
                    }
					else
					    return Send(playerid, -1,"?? ?? ????????? ?????????? ?????? ??????.");
				}
				case PICKUP_BUY_CANDLE:
				{
				    if(GetPlayerData(playerid, P_BUY_CANDLE) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ?????? ??????!");

				    if(GetPlayerData(playerid, P_BUY_PRODUCTS) == 1)
					{
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"??????? ?????, ?? ??? ????? ??ù ?????????????? ?????. ù????? ???? ??? ??? ? ???? ù?????, ????? ??? ??????? ??????????ù.",
							"??", ""
						);
						
						SetPlayerData(playerid, P_BUY_CANDLE, 1);
						UpdatePlayerDatabaseInt(playerid, "BuyCandle", 1);
						
                    }
					else
					    return Send(playerid, -1,"?? ?? ????????? ?????????? ?????? ??????.");
				}
				case PICKUP_END_QUEST_8MARTA:
				{
				    if(GetPlayerData(playerid, P_END_QUEST_8MARTA) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ??????ù ? ???????? ??????????????!");

				    if(GetPlayerData(playerid, P_BUY_CANDLE) == 1)
					{
					    Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							""c_i"8 ?????",
							""c_b"?? ???????, ?????? ??????? ù????? ????? ????????! ?? ???? ???, ???? ???? ? ????? ??????ù??ù,\n"\
							"? ????? ???? ?????? ????? ????. ???????? ?????????? ????? ?????? ? ??????????, ???? ?? ?? ?? ??????????.\n"\
							"\n"\
							"?? ???????? ???? "c_i"'1 ???? ??ù ?????????? ? 30 DONATE-RUB'"c_b"!",
							"??", ""
						);
						
						GivePlayerDonateRub(playerid,30,"????? 8 ?????", true);
						
						AddPlayerData(playerid, P_CAR_SLOTS, +, 1);
						UpdatePlayerDatabaseInt(playerid, "car_slots", GetPlayerData(playerid, P_CAR_SLOTS));
						
						SetPlayerData(playerid, P_END_QUEST_8MARTA, 1);
						UpdatePlayerDatabaseInt(playerid, "EndQuest8marta", 1);
						
                    }
					else
					    return Send(playerid, -1,"?? ?? ????????? ?????????? ?????? ??????.");
				}
				case PICKUP_ACTION_TYPE_BANK:
				{
					if(action_id)
					{
						callcmd::bank(playerid, "");
					}
					else ShowPlayerPayForRentDialog(playerid);
				}
				case PICKUP_ACTION_TYPE_ENTRANCE_FLA:
							{

									new entranceid = GetPlayerInEntrance(playerid);
									new floor = GetPlayerInEntranceFloor(playerid);

									if(entranceid != -1 && floor >= 1)
									{
										ShowPlayerHouseInfo(playerid, g_entrance_flat[entranceid][floor - 1][action_id]);
									}

							}
							case PICKUP_ACTION_TYPE_HOTEL_ROOM:
							{
									new hotel_id = GetPlayerInHotelID(playerid);
									new floor = GetPlayerData(playerid, P_IN_HOTEL_FLOOR);

									if(hotel_id != -1 && floor >= 1)
									{
										new room_id = ((floor-1)*12) + action_id;
										EnterPlayerToHotelRoom(playerid, hotel_id, room_id);
									}

							}
				case PICKUP_ACTION_TYPE_ORG_CAR:
                {
                    new org_id = action_id;
                    if(GetPlayerData(playerid, P_TEAM) != g_org_car[org_id][O_FRAC_ID])
                        return SendClientMessage(playerid, -1, ""USC" ??? ?? ???????? ?????? ??????!");

                    new oldVehicle = GetPlayerData(playerid, P_FRACTION_CAR);
                    if(oldVehicle != INVALID_VEHICLE_ID && GetVehicleData(oldVehicle, V_ACTION_TYPE) == VEHICLE_ACTION_ORG_CAR)
                    {
                        DestroyDeliveryVehicle(oldVehicle);
                        SetPlayerData(playerid, P_FRACTION_CAR, INVALID_VEHICLE_ID);
                        SendClientMessage(playerid, -1, ""SC"?????? ??????????? ????????? ??? ??????.");
                    }

                    new header[64];
                    format(header, sizeof(header), "{%06x}%s{FFFFFF} -> ??????????? ?????????", g_organization[org_id][O_COLOR] & 0xFFFFFF, g_org_car[org_id][O_NAME]);

                    stringer[0] = EOS;
                    strcat(stringer, "{FFFFFF}?????\t??????\t??????\t?????????ù\n");

                    for(new i = 0; i < 4; i++)
                    {
                        new model = g_org_car[org_id][O_MODEL][i];
                        if(model == 0) continue;

                        format(sctring, sizeof(sctring),
                            "{FFFFFF}#%d\t%s\t{00FF00}????????\t{FFFFFF}??????? ??ù ?????????????ù\n",
                            i + 1,
                            g_vehicle_info[model - 400][VI_NAME]
                        );
                        strcat(stringer, sctring);
                    }

                    SetPlayerListitemValue(playerid, 0, org_id);
                    Dialog(playerid, DIALOG_ORG_CAR_GET, DIALOG_STYLE_TABLIST_HEADERS, header, stringer, "???????", "??????");

                    return 1;
                }
				case PICKUP_ACTION_TYPE_MAYOR_JOB:
				{
					if(IsPlayerInJob(playerid) || GetPlayerTempJob(playerid) != TEMP_JOB_NONE)
						return SendClientMessage(playerid, 0xCECECEFF, ""USC"? ?????? ?????? ?? ?? ?????? ?????????ù ?? ??????");

					Dialog
					(
						playerid, DIALOG_VIEV_JOBS_LIST, DIALOG_STYLE_MSGBOX,
						"{FFCD00}????? ?? ??????",
						"{FFFFFF}?? ?????? ??????????? ?????? ????????? ??????",
						"??", "???"
					);
				}
				case PICKUP_ACTION_HELP_SPAWN:
				{
				    callcmd::help(playerid, "");
				}
				case PICKUP_ACTION_RENT_BIKE_LUT:
	            {
					new fmt_text[640], 
					Cache:result, 
					id;

					mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM ownable_cars WHERE owner_id='%d'", GetPlayerAccountID(playerid));
					result = mysql_query(mysql, fmt_text, true);

					new rows = cache_num_rows();


					new query[60],
						model_id,
						car_number[7];

					format(fmt_text, sizeof fmt_text, "");

					for(new i = 0; i < rows; i ++)
					{
						id = cache_get_field_content_int(i, "id");
						model_id = cache_get_field_content_int(i, "model_id") - 400;
						cache_get_field_content(i, "number", car_number);

						format(query, sizeof query, "%d. {FFFFFF}%s  {888888}[%s]\n", i + 1, GetVehicleInfo(model_id, VI_NAME), car_number);
						strcat(fmt_text, query);
						SetPlayerListitemValue(playerid, i, id);
					}

					new rent[640];
					format(rent, sizeof rent, "0. {FFFFFF}??????  {888888}[------]\n %s", fmt_text);

					Dialog
					(
						playerid, DIALOG_RENT_BIKE_LUT, DIALOG_STYLE_LIST,
						"{E03131}"SERVER_NAME" | {FFFFFF}?????????? ???????????",
						rent,
						"???????", "???????"
					);
							
					cache_delete(result);
	            }
				
				case PICKUP_ACTION_RENT_BIKE_BAT:
	            {
					new fmt_text[640], 
					Cache:result, 
					id;

					mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM ownable_cars WHERE owner_id='%d'", GetPlayerAccountID(playerid));
					result = mysql_query(mysql, fmt_text, true);

					new rows = cache_num_rows();


					new query[60],
						model_id,
						car_number[7];

					format(fmt_text, sizeof fmt_text, "");

					for(new i = 0; i < rows; i ++)
					{
						id = cache_get_field_content_int(i, "id");
						model_id = cache_get_field_content_int(i, "model_id") - 400;
						cache_get_field_content(i, "number", car_number);

						format(query, sizeof query, "%d. {FFFFFF}%s  {888888}[%s]\n", i + 1, GetVehicleInfo(model_id, VI_NAME), car_number);
						strcat(fmt_text, query);
						SetPlayerListitemValue(playerid, i, id);
					}

					new rent[640];
					format(rent, sizeof rent, "0. {FFFFFF}??????  {888888}[------]\n %s", fmt_text);

					Dialog
					(
						playerid, DIALOG_RENT_BIKE_BAT, DIALOG_STYLE_LIST,
						"{E03131}"SERVER_NAME" | {FFFFFF}?????????? ???????????",
						rent,
						"???????", "???????"
					);
							
					cache_delete(result);
	            }
				
				case PICKUP_ACTION_RENT_BIKE_ARZ:
	            {
					new fmt_text[640], 
					Cache:result, 
					id;

					mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM ownable_cars WHERE owner_id='%d'", GetPlayerAccountID(playerid));
					result = mysql_query(mysql, fmt_text, true);

					new rows = cache_num_rows();


					new query[60],
						model_id,
						car_number[7];

					format(fmt_text, sizeof fmt_text, "");

					for(new i = 0; i < rows; i ++)
					{
						id = cache_get_field_content_int(i, "id");
						model_id = cache_get_field_content_int(i, "model_id") - 400;
						cache_get_field_content(i, "number", car_number);

						format(query, sizeof query, "%d. {FFFFFF}%s  {888888}[%s]\n", i + 1, GetVehicleInfo(model_id, VI_NAME), car_number);
						strcat(fmt_text, query);
						SetPlayerListitemValue(playerid, i, id);
					}

					new rent[640];
					format(rent, sizeof rent, "0. {FFFFFF}??????  {888888}[------]\n %s", fmt_text);

					Dialog
					(
						playerid, DIALOG_RENT_BIKE_ARZ, DIALOG_STYLE_LIST,
						"{E03131}"SERVER_NAME" | {FFFFFF}?????????? ???????????",
						rent,
						"???????", "???????"
					);
							
					cache_delete(result);
	            }
				case PICKUP_ACTION_RENT_BIKE:
	            {
					new fmt_text[640], 
					Cache:result, 
					id;

					mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM ownable_cars WHERE owner_id='%d'", GetPlayerAccountID(playerid));
					result = mysql_query(mysql, fmt_text, true);

					new rows = cache_num_rows();


					new query[60],
						model_id,
						car_number[7];

					format(fmt_text, sizeof fmt_text, "");

					for(new i = 0; i < rows; i ++)
					{
						id = cache_get_field_content_int(i, "id");
						model_id = cache_get_field_content_int(i, "model_id") - 400;
						cache_get_field_content(i, "number", car_number);

						format(query, sizeof query, "%d. {FFFFFF}%s  {888888}[%s]\n", i + 1, GetVehicleInfo(model_id, VI_NAME), car_number);
						strcat(fmt_text, query);
						SetPlayerListitemValue(playerid, i, id);
					}

					new rent[640];
					format(rent, sizeof rent, "0. {FFFFFF}??????  {888888}[------]\n %s", fmt_text);

					Dialog
					(
						playerid, DIALOG_RENT_BIKE, DIALOG_STYLE_LIST,
						"{E03131}"SERVER_NAME" | {FFFFFF}?????????? ???????????",
						rent,
						"???????", "???????"
					);
							
					cache_delete(result);
	            }
	            case PICKUP_ACTION_QUEST_MENU:
				{
			    	ShowPlayerQuestMenu(playerid);
				}
				case PICKUP_ACTION_TYPE_PUT_PROD:
				{
					if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY)
					{
						if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_FACTORY_PUT_PROD)
						{
							new objectid;
							new items = GetPlayerJobLoadItems(playerid);
							new Float: x, Float: y, Float: z, Float: angle;

							ApplyAnimationEx(playerid, "CARRY", "PUTDWN", 4.0, 0, 0, 0, 0, 0, 1, USE_ANIM_TYPE_NONE);
							SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);

							TogglePlayerFactoryCP(playerid, true);
							SetPlayerJobLoadItems(playerid, items + 1);

							AddPlayerData(playerid, P_JOB_WAGE, +, 1);
							SendClientMessage(playerid, 0x00FF00FF, "* {8FC0FF}?? ???????? ??????? ?? ?????.");

							RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_FOREARM);
							SetPlayerTempJobState(playerid, TEMP_JOB_STATE_FACTORY_TAKE_MET);

							GetPlayerPos(playerid, x, y, z);
							GetPlayerFacingAngle(playerid, angle);

							//objectid = CreateDynamicObject(1279, x, -200.81883, 1006.51978, 0.9, 0.0, angle);
						//	MoveDynamicObject(objectid, 263.8, -200.81880, 1006.51978, 2.0, 0.9, 0.0, angle);

							Streamer_SetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, OBJECT_TYPE_FACTORY);

							GameTextForPlayer(playerid,"~y~+1 skill",5200,5);

							AddPlayerData(playerid, P_LOADER_SKILL, +, 1);

							UpdatePlayerDatabaseInt(playerid, "loader_skill", GetPlayerData(playerid, P_LOADER_SKILL));

			                new type = GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_PROD, R_AMOUNT);

							SetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_PROD, R_AMOUNT, type + 1);
							UpdateRepository(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_PROD);
						}
					}
				}
	   			case PICKUP_ACTION_TYPE_TEMP_ARMY:
				{
 				  if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA))
						return SendClientMessage(playerid, 0x999999FF, "????? ?????????? ???????? ?????? ??ù ???");

				   SetPVarInt(playerid, "player_in_ammo_cp", 1);
				}
				case PICKUP_ACTION_TYPE_TEMP_JOB:
				{
					new job = GetPlayerTempJob(playerid);
					if(job != action_id && IsPlayerInJob(playerid) || GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_NONE)
					{
						job = TEMP_JOB_NONE - 1;
					}

					switch(action_id)
					{
						case TEMP_JOB_LOADER:
						{
							if(job == TEMP_JOB_NONE)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_LOADER_START, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????? ????????",
									"{FFFFFF}?? ?????? ?????????ù ?? ?????? ??????????",
									"??", "???"
								);
							}
							else if(job == action_id)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_LOADER_END, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????? ????????",
									"{FFFFFF}?? ??????? ??? ?????? ????????? ??????? ?????",
									"??", "???"
								);
							}
							else SendClientMessage(playerid, 0xCECECEFF, "????? ?????????ù ???? ????????? ??????? ??????");
						}
						case TEMP_JOB_MINER:
						{
							if(job == TEMP_JOB_NONE)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_MINER_START, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????? ???????",
									"{FFFFFF}?? ?????? ?????????ù ?? ?????? ????????",
									"??", "???"
								);
							}
							else if(job == action_id)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_MINER_END, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????? ???????",
									"{FFFFFF}?? ??????? ??? ?????? ????????? ??????? ?????",
									"??", "???"
								);
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ?????? ?????? ?????????ù ?? ??? ?????? ?????ù");
						}
						case TEMP_JOB_FACTORY_TRUCKER:
						{
							if(job == TEMP_JOB_NONE)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_FACTORY_TRUCKER, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????",
									"{FFFFFF}?? ?????? ?????? ?????? ? ?????? ???????? ???????? ???????????",
									"??", "???"
								);
							}
							else if(job == action_id)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_FACTORY_TRUCKER, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????",
									"{FFFFFF}????????? ?????? ? ?????? ???????? ???????? ???????????",
									"??", "???"
								);
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ?????? ?????? ?????????ù ?? ??? ?????? ?????ù");
						}
						case TEMP_JOB_FACTORY:
						{
							if(job == TEMP_JOB_NONE)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_FACTORY, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????",
									"{FFFFFF}?? ?????? ?????? ?????? ? ???????????????? ?????",
									"??", "???"
								);
							}
							else if(job == action_id)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_FACTORY, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????",
									"{FFFFFF}????????? ?????? ? ???????????????? ?????",
									"??", "???"
								);
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ?????? ?????? ?????????ù ?? ??? ?????? ?????ù");
						}
						case TEMP_JOB_LUMBERJACK:
						{
							if(job == TEMP_JOB_NONE)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_LUMBERJACK_ST, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????? ????????",
									"{FFFFFF}?? ?????? ?????????ù ?? ?????? ?????????",
									"??", "???"
								);
							}
							else if(job == action_id)
							{
								Dialog
								(
									playerid, DIALOG_TEMP_JOB_LUMBERJACK_END, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????? ????????",
									"{FFFFFF}?? ??????? ??? ?????? ????????? ??????? ?????",
									"??", "???"
								);
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ?????? ?????? ?????????ù ?? ??? ?????? ?????ù");
						}
					}
				}

				case PICKUP_ACTION_TYPE_GIFT:
				{
					if(GetPlayerData(playerid, P_LEVEL) > 3)
					{
						new query[256],
							Cache: result,
							rows;

						mysql_format(mysql, query, sizeof query, "SELECT * FROM gift_lose WHERE uid='%d' AND gift_id='%d'", GetPlayerAccountID(playerid), action_id+1);
						result = mysql_query(mysql, query, true);

						rows = cache_num_rows();

						if(rows)
						{
							SendClientMessage(playerid, 0xCECECEFF, "?? ??? ??????? ???? ???????!");
							cache_delete(result);
							return 1;
						}

						cache_delete(result);

						mysql_format(mysql, query, sizeof query, "INSERT INTO gift_lose (uid, gift_id) VALUES (%d, %d)", GetPlayerAccountID(playerid), action_id+1);
						mysql_query(mysql, query, false);

						new fmt_str[144];

						mysql_format(mysql, query, sizeof query, "SELECT * FROM gift_lose WHERE uid='%d'", GetPlayerAccountID(playerid));
						result = mysql_query(mysql, query, true);

						rows = cache_num_rows();


						AddPlayerData(playerid, P_GIFTS, +, 1);

						format(fmt_str, sizeof fmt_str, "?? ??????? ???????! ? ??? ????? %d ??. ????????!", GetPlayerData(playerid, P_GIFTS));

						SendClientMessage(playerid, 0xffff00FF, fmt_str);

						format(fmt_str, sizeof fmt_str, "????? ??????? %d ????????!", GetPlayerData(playerid, P_GIFTS));

						SendClientMessage(playerid, 0xffff00FF, fmt_str);

	                    SendClientMessage(playerid, 0xffff00FF, "??????? ????? ?????ù?? ? ?????????????!");

	                    format(query, sizeof query, "{D6325B}[???????]: {FFFFFF}%s[%d] ?????? ???????.", GetPlayerNameEx(playerid), playerid, GetPlayerData(playerid, P_GIFTS), g_gift_loaded);
	                    SendClientMessageToAll(-1, query);

						cache_delete(result);


						format(query, sizeof query, "UPDATE accounts SET gifts=%d WHERE id=%d", GetPlayerData(playerid, P_GIFTS), GetPlayerAccountID(playerid));
						mysql_query(mysql, query, false);
					}
					else SendClientMessage(playerid, 0xCECECEFF, "???????? ??????? ????? ? 3-? ??? ?????????ù ? ?????");
				}
				case PICKUP_ACTION_TYPE_SELL_GIFT:
				{
					if(!GetPlayerData(playerid, P_GIFTS)) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ????????!");

					Dialog(playerid, DIALOG_SELL_GIFT, DIALOG_STYLE_MSGBOX, "?????", "{FFFFFF}?? ????????????? ?????? ?????ù?? ???? ????????\n\n\
					??? ????? ???????:\n\
					{1E90FF}- ?????\n\
					{1E90FF}- ?????-?????\n\
					{32a44b}- ??????\n\
					{3399FF}- ???????\n\
					{32a44b}- ?????????\n\
					{CECECE}- ?????????", "??", "???");
				}
				case PICKUP_ACTION_TYPE_MINER_SELL_M:
				{
					ShowPlayerBuyMetalDialog(playerid);
				}
				case PICKUP_ACTION_TYPE_FACTORY_MET:
				{
					if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY)
					{
						new j_state = GetPlayerTempJobState(playerid);
						switch(j_state)
						{
							case TEMP_JOB_STATE_FACTORY_TAKE_MET:
							{
								new factory_metal = GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_AMOUNT);
								new factory_fuel = GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL, R_AMOUNT);

								new take_metall = random(2) + 1;
								if(factory_metal > take_metall && factory_fuel > (take_metall * 6))
								{
									SetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_AMOUNT, factory_metal - take_metall);
									UpdateRepository(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL);

									new fmt_str[16];
									SetPVarInt(playerid, "factory_take_metall", take_metall);

									format(fmt_str, sizeof fmt_str, "~b~~h~+%d kg", take_metall);
									GameTextForPlayer(playerid, fmt_str, 4000, 1);

									SetPlayerTempJobState(playerid, TEMP_JOB_STATE_FACTORY_CREATE_P);
								}
								else GameTextForPlayer(playerid, "~r~no fuel or metal", 4000, 1);
							}
							case TEMP_JOB_STATE_FACTORY_CREATE_P:
							{
								SendClientMessage(playerid, 0x999999FF, "?? ??? ??ù?? ?????????");
							}
						}
					}
				}
				case PICKUP_ACTION_TYPE_P_CREATE:
				{
				    new checkpointid;
				    new index = checkpointid - factory_desk[0][FD_CHEK_ID];
					SetPlayerFactoryDeskUse(playerid, index, true);
				}
				case PICKUP_ACTION_TYPE_LUMBERJACK_P:
				{
					if(GetPlayerTempJob(playerid) == TEMP_JOB_LUMBERJACK)
					{
						if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_LUMBERJACK_PUT)
						{
							new desk;

							SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LUMBERJACK_CHOP);
							ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.1, 1, 0, 1, 0, 800, 0);

							RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);
							//SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 326, A_OBJECT_BONE_RIGHT_HAND, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0);

							SetPlayerJobLoadItems(playerid, GetPlayerJobLoadItems(playerid) + 1);

							new fmt_text[65];

							format(fmt_text, sizeof fmt_text, "????? ?????????? ?? ?????! ????? ?????????? ????: {FF9900}%d ??", GetPlayerJobLoadItems(playerid));
							SendClientMessage(playerid, 0x66CC00FF, fmt_text);

							SetPlayerLumberJackChopCP(playerid);

							desk = GetPickupInfo(pickupid, P_ACTION_ID);

							//new objectid;
							if(!desk)
							{
							//	objectid = CreateDynamicObject(1463, 2378.1465, -603.0632, 12.0885, 0.0, 0.0, 90.0);
							//	MoveDynamicObject(objectid, 2382.3528, -603.0815, 12.0885, 2.0, 0.0, 0.0, 0.0);
							}
							else
							{
							//	objectid = CreateDynamicObject(1463, 2378.1465, -606.80481, 12.0885, 0.0, 0.0, 90.0);
							//	MoveDynamicObject(objectid, 2382.3528, -606.80481, 12.0885, 2.0, 0.0, 0.0, 0.0);
							}

						//	Streamer_SetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, OBJECT_TYPE_WOOD);
						}
					}
				}
				case PICKUP_ACTION_TYPE_FUEL_STATION:
				{
					ShowPlayerBuyJerricanDialog(playerid, action_id);
				}
				case PICKUP_ACTION_TYPE_BIZ_ENTER:
				{
				    SetPlayerInBiz(playerid, -1);
				    
					if(GetPlayerInBiz(playerid) == -1)
					{
	                    if(IsBusinessNoEnter(action_id))
							return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ??? ??????? ?????ù ?????.");

						if(GetBusinessData(action_id, B_TYPE) == BUSINESS_TYPE_CLOTHING_SHOP)
						{
							SetPlayerInBiz(playerid, action_id);
							
							ShowPlayerClothingShopPanel(playerid);
							
							return 1;
						}
						if(GetBusinessData(action_id, B_TYPE) == BUSINESS_TYPE_ACCESSORY_SHOP)
						{
							SetPlayerInBiz(playerid, action_id);
							
							EntryAccessoryMarket(playerid);
							
							return 1;
						}
						if(GetBusinessData(action_id, B_TYPE) == BUSINESS_TYPE_CAR_MARKET)
						{
							new oc_id = GetPlayerOwnableCar(playerid);

							if(oc_id == INVALID_VEHICLE_ID)
							{
								SetPlayerListitemValue(playerid, 0, action_id);
								
								if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
								return SendClientMessage(playerid, 0x3399FFFF, ""USC"??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/donate");

								SetPlayerInBiz(playerid, GetPlayerListitemValue(playerid, 0));

								new biz_id = GetPlayerInBiz(playerid);
								new car_market_id = biz_id - 34;

								if(biz_id == -1 || GetBusinessData(biz_id, B_TYPE) != BUSINESS_TYPE_CAR_MARKET || GetPlayerData(playerid, P_BUY_CAR) != INVALID_VEHICLE_ID) return 1;

								buy_car_select_car[playerid] =
								buy_car_select_color_type[playerid] = 0;

								buy_car_select_color[playerid][0] =
								buy_car_select_color[playerid][1] = 1;

								SetPlayerVirtualWorld(playerid, playerid + 1);
								SetPlayerInterior(playerid, 1);
								SetPlayerPosEx(playerid, 1137.5398,234.6261,995.1235, 0.0, _, _, false);
								TogglePlayerControllable(playerid, false);

								SetPlayerData(playerid, P_BUY_CAR, CreateVehicle(car_market_data[car_market_id][0][0], 1149.8434, 226.0655, 994.7953, 20.8742, 1, 1, 1, 1));

								SetVehicleVirtualWorld(GetPlayerData(playerid, P_BUY_CAR), playerid + 1);
								LinkVehicleToInterior(GetPlayerData(playerid, P_BUY_CAR), 1);

								//1145.561035,234.304000,995.266784 | LookAt: 1147.853393,229.894149,995.812988

								SetPlayerCameraPos(playerid, 1142.746215,231.186386,995.992248);
								SetPlayerCameraLookAt(playerid, 1146.743041,228.254837,995.335449);

								//ShowPlayerSelectPanel(playerid, SELECT_PANEL_TYPE_CAR_MARKET);
								//BuyCarTDsShowForPlayer(playerid);
								CallLocalFunction("BuyCarPTDUpdate", "i", playerid);

								CreateAutosalonTextDraws(playerid);
								HideHud(playerid);

								//SelectTextDraw(playerid, 0x00FF00FF);

								return 1;
							}
							else
								return SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ???????? ?? ??????, ????????? ??? ??ù ???????. (/car)");

						}


						new i_paid_biz = GetPlayerUseListitem(playerid);

						if(GetBusinessData(action_id, B_TYPE) == BUSINESS_TYPE_CAR_TUNING)
						{
							new oc_id = GetPlayerOwnableCar(playerid);

							if(oc_id == INVALID_VEHICLE_ID)
							{
								if(GetPlayerOwnableCars(playerid) == 0)
									SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
								else
									SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");

								return 1;
							}
							else
							{
								new Float: veh_x,
									Float: veh_y,
									Float: veh_z;

								GetVehiclePos(oc_id, veh_x, veh_y, veh_z);

								if(!IsPlayerInRangeOfPoint(playerid, 15.0, veh_x, veh_y, veh_z))
								{
									SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ??????? ?????? ?? ???");

									return 1;
								}
							}
						}

						if(IsBusinessOwned(action_id))
						{
							if(GetBusinessData(action_id, B_OWNER_ID) != GetPlayerAccountID(playerid))
							{
								if(GetBusinessData(action_id, B_LOCK_STATUS))
									return GameTextForPlayer(playerid, "~w~business~n~~r~closed", 4000, 1);

								if(GetBusinessData(action_id, B_ENTER_PRICE) > 0 && i_paid_biz != action_id)
								{
									new fmt_str[128];
									SetPVarInt(playerid, "biz_enter", action_id + 1);

									format
									(
										fmt_str, sizeof fmt_str,
										"{FFFFFF}???? ??????? ? ???????ù?? {FF9900}%d ???\n"\
										"{99FF00}?? ??????? ??? ?????? ????? ?????",
										GetBusinessData(action_id, B_ENTER_PRICE)
									);
									return Dialog(playerid, DIALOG_BIZ_ENTER, DIALOG_STYLE_MSGBOX, GetBusinessData(action_id, B_NAME), fmt_str, "??", "???");
								}
							}
						}
						
						EnterPlayerToBiz(playerid, action_id);
					}
				}
				case PICKUP_ACTION_TYPE_BIZ_EXIT:
				{
					new in_biz = GetPlayerInBiz(playerid);
					if(in_biz != -1)
					{
						new type = GetBusinessData(in_biz, B_INTERIOR);
						if(action_id == type)
						{
							SetPlayerPosEx
							(
								playerid,
								GetBusinessData(in_biz, B_EXIT_POS_X),
								GetBusinessData(in_biz, B_EXIT_POS_Y),
								GetBusinessData(in_biz, B_EXIT_POS_Z),
								GetBusinessData(in_biz, B_EXIT_ANGLE),
								0,
								0
							);
							SetPlayerInBiz(playerid, -1);

							new type_2 = GetBusinessData(in_biz, B_TYPE);
							
							if(type_2 == BUSINESS_TYPE_CAR_TUNING)
							{
								new vehicleid = GetPlayerOwnableCar(playerid);

								SetVehiclePos(vehicleid, vehicle_temp_position[playerid][0], vehicle_temp_position[playerid][1], vehicle_temp_position[playerid][2]);
								SetVehicleZAngle(vehicleid, vehicle_temp_position[playerid][3]);

								LinkVehicleToInterior(vehicleid, 0);
								SetVehicleVirtualWorld(vehicleid, 0);
							}
						}
					}
				}
				case PICKUP_ACTION_TYPE_BIZ_HEALTH:
				{
					new businessid = GetPlayerInBiz(playerid);
					if(businessid != -1)
					{
						if(businessid == action_id)
						{
							new time = gettime();
							if(GetPVarInt(playerid, "biz_health_use") <= time)
							{
								new price = BIZ_HEALTH_SERVICE_PRICE;
								if(GetPlayerMoneyEx(playerid) >= price)
								{
									new query[255];

									format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS) > 0 ? GetBusinessData(businessid, B_PRODS)-1 : 0, GetBusinessData(businessid, B_PRODS) > 0 ? GetBusinessData(businessid, B_BALANCE)+price : 0, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
									mysql_query(mysql, query, false);

									if(!mysql_errno())
									{
										GivePlayerMoneyEx(playerid, -price, "????????????? ??????? ? ???????", false, true);

										if(GetBusinessData(businessid, B_PRODS) >= 1)
										{
											AddBusinessData(businessid, B_PRODS, -, 1);
											AddBusinessData(businessid, B_BALANCE, +, price);
										}
										SetPlayerHealthEx(playerid, 99.0);
										SetPVarInt(playerid, "biz_health_use", time + 300); // 300 ??? (5 ?????)

										mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), time, price, IsBusinessOwned(businessid));
										mysql_query(mysql, query, false);
									}
									else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 24)");
								}
								else SendClientMessage(playerid, 0x999999FF, "?????? ????????? ???ù? 150 ??????");
							}
							else SendClientMessage(playerid, 0x999999FF, "??????? ?? ??? ???????????? ???????? ?????????");

							// SetPlayerHealthEx(playerid, 95.0);
						}
					}
				}
				case PICKUP_ACTION_TYPE_BIZ_SHOP_247:
				{
					new businessid = GetPlayerInBiz(playerid);
					if(businessid != -1)
					{
						new type = GetBusinessData(businessid, B_TYPE);
						if(type == BUSINESS_TYPE_SHOP_24_7)
						{
							callcmd::buy(playerid, "");
						}
					}
				}
				case PICKUP_ACTION_TYPE_CELL_SALON:
				{
					new businessid = GetPlayerInBiz(playerid);
					
					if(businessid != -1)
					{
						new type = GetBusinessData(businessid, B_TYPE);
						if(type == BUSINESS_TYPE_CELL_SALON)
						{
							callcmd::buy(playerid, "");
						}
					}
				}
				case PICKUP_ACTION_TYPE_HOUSE:
				{
					ShowPlayerHouseInfo(playerid, action_id);
				}
				case PICKUP_ACTION_TYPE_HOUSE_HEALTH:
				{
					new houseid = GetPlayerInHouse(playerid);
					if(houseid != -1)
					{
						new type = GetHouseData(houseid, H_TYPE);

						if(IsPlayerInRangeOfPoint(playerid, 4.0, GetHouseTypeInfo(type, HT_HEALTH_POS_X), GetHouseTypeInfo(type, HT_HEALTH_POS_Y), GetHouseTypeInfo(type, HT_HEALTH_POS_Z)))
						{
							SetPlayerHealthEx(playerid, 100.0);
							GameTextForPlayer(playerid, "~b~~h~100 hp", 3000, 1);
						}
					}
				}
				case PICKUP_ACTION_TYPE_REALTOR_HOME:
				{
					new businessid = GetPlayerInBiz(playerid);
					if(businessid != -1)
					{
						new type = GetBusinessData(businessid, B_TYPE);
						if(type == BUSINESS_TYPE_REALTOR_HOME)
						{
							Dialog
							(
								playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
								"{99CC00}?????? ????????? ?????",
								g_house_realtor_list,
								"???????", ""
							);
						}
					}
				}
				case PICKUP_ACTION_TYPE_BIZ_CLOTHING:
				{
					new businessid = GetPlayerInBiz(playerid);
					if(businessid != -1)
					{
						new type = GetBusinessData(businessid, B_TYPE);
						if(type == BUSINESS_TYPE_CLOTHING_SHOP)
						{
							ShowPlayerClothingShopPanel(playerid);
						}
					}
				}
				case PICKUP_ACTION_TYPE_BIZ_CAR_MARK:
				{
					if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
					return SendClientMessage(playerid, 0x3399FFFF, ""USC"??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/donate");

					SetPlayerInBiz(playerid, GetPlayerListitemValue(playerid, 0));

					new biz_id = GetPlayerInBiz(playerid);
					new car_market_id = biz_id - 34;

					if(biz_id == -1 || GetBusinessData(biz_id, B_TYPE) != BUSINESS_TYPE_CAR_MARKET || GetPlayerData(playerid, P_BUY_CAR) != INVALID_VEHICLE_ID) return 1;

					buy_car_select_car[playerid] =
					buy_car_select_color_type[playerid] = 0;

					buy_car_select_color[playerid][0] =
					buy_car_select_color[playerid][1] = 1;

					SetPlayerVirtualWorld(playerid, playerid + 1);
					SetPlayerInterior(playerid, 1);
					SetPlayerPosEx(playerid, 1137.5398,234.6261,995.1235, 0.0, _, _, false);
					TogglePlayerControllable(playerid, false);

					SetPlayerData(playerid, P_BUY_CAR, CreateVehicle(car_market_data[car_market_id][0][0], 1149.8434, 226.0655, 994.7953, 20.8742, 1, 1, 1, 1));

					SetVehicleVirtualWorld(GetPlayerData(playerid, P_BUY_CAR), playerid + 1);
					LinkVehicleToInterior(GetPlayerData(playerid, P_BUY_CAR), 1);

					//1145.561035,234.304000,995.266784 | LookAt: 1147.853393,229.894149,995.812988

					SetPlayerCameraPos(playerid, 1142.746215,231.186386,995.992248);
								SetPlayerCameraLookAt(playerid, 1146.743041,228.254837,995.335449);

					//ShowPlayerSelectPanel(playerid, SELECT_PANEL_TYPE_CAR_MARKET);
					//BuyCarTDsShowForPlayer(playerid);
					CallLocalFunction("BuyCarPTDUpdate", "i", playerid);

					CreateAutosalonTextDraws(playerid);
					HideHud(playerid);

					//SelectTextDraw(playerid, 0x00FF00FF);

					return 1;
				}
				case PICKUP_ACTION_TYPE_ENTRANCE_ENT:
				{
					EnterPlayerToEntrance(playerid, action_id);
				}
				case PICKUP_ACTION_TYPE_ENTRANCE_EXI:
				{
					new entranceid = GetPlayerInEntrance(playerid);
					if(entranceid != -1)
					{
						if(GetPlayerInEntranceFloor(playerid) == 0)
						{
							SetPlayerPosEx
							(
								playerid,
								GetEntranceData(entranceid, E_EXIT_POS_X),
								GetEntranceData(entranceid, E_EXIT_POS_Y),
								GetEntranceData(entranceid, E_EXIT_POS_Z),
								GetEntranceData(entranceid, E_EXIT_ANGLE),
								0,
								0
							);

							SetPlayerInEntrance(playerid, -1);
							SetPlayerInEntranceFloor(playerid, -1);
						}
						else
							SendClientMessage(playerid, -1, "????? ???????? ?????? ?? ????? '???????'!");
					}
				}
				case PICKUP_ACTION_TYPE_ENTRANCE_LIF:
				{
					new entranceid = GetPlayerInEntrance(playerid);
					if(entranceid != -1)
					{
						new floor = GetPlayerInEntranceFloor(playerid);
						if(floor != -1)
						{
							ShowPlayerEntranceFloorsLift(playerid, entranceid, floor);
						}
					}
				}
				case PICKUP_ACTION_TYPE_BIZ_CAR_ENT:
				{
					SetPlayerPosEx(playerid, 5.4881, -27.7033, 1085.9291, 180.0, _, _, false);
					SetCameraBehindPlayer(playerid);
				}
				case PICKUP_ACTION_TYPE_BIZ_CAR_EXI:
				{
					SetPlayerPosEx(playerid, 5.4975, -26.3967, 1080.9968, 180.0, _, _, false);
					SetCameraBehindPlayer(playerid);
				}
case PICKUP_ACTION_TYPE_GET_CAR_NUM:
{
    new vehicleid = GetPlayerOwnableCar(playerid);

    if(vehicleid == INVALID_VEHICLE_ID)
    {
        if(GetPlayerOwnableCars(playerid) == 0)
            SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
        else
            SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
    }
    else
    {
        new index = GetVehicleData(vehicleid, V_ACTION_ID);

        callcmd::plates(playerid);
    }
}

				case PICKUP_ACTION_TYPE_GET_CAR_N2:
				{
					if(GetPlayerOwnableCar(playerid) == INVALID_VEHICLE_ID)
					{
						if(GetPlayerOwnableCars(playerid) == 0)
							SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
						else
							SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
					}
					else
					{
						new vehicleid = GetPlayerOwnableCar(playerid),
							index = GetVehicleData(vehicleid, V_ACTION_ID);

						if(!strcmp(g_ownable_car[index][OC_NUMBER], "------"))
						{
							Dialog
							(
								playerid, DIALOG_OWNABLE_CAR_NUMBER, DIALOG_STYLE_MSGBOX,
								"{FFCD00}????????? ???????",
								"{FFFFFF}????????? ??????? ??????? ??ù ?????? ù? ???????? 5000 ???",
								"??????", "?????"
							);
						}
						else
							SendClientMessage(playerid, 0x999999FF, "?? ????? ù? ??? ???? ???????? ?????");
					}
				}
				case PICKUP_ACTION_TYPE_MINER_CARRI:
				{
					if(GetPlayerTempJob(playerid) == TEMP_JOB_MINER
					&& GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_MINER_UNLOAD)
					{
						if(!miner_carriage[0][MC_STATUS])
						{
							new fmt_str[64];

							new rand = random(45) + 16;
							new items = GetPlayerJobLoadItems(playerid) + rand;

							RemovePlayerAttachedObjects(playerid);
						//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 18634, A_OBJECT_BONE_RIGHT_HAND, 0.07, 0.03, 0.04, 0.0, 270.0, 270.0, 1.5, 2.1, 1.8, 0);

							ApplyAnimationEx(playerid, "CARRY", "putdwn", 4.0, 0, 0, 0, 0, 0, 0);
							SetPlayerJobLoadItems(playerid, items);

							format(fmt_str, sizeof fmt_str, "?? ????????? ? ????????? {FF9900}%d ?? {66CC00}????", rand);
							SendClientMessage(playerid, 0x66CC00FF, fmt_str);

							format(fmt_str, sizeof fmt_str, "????? ?????????? ???????? ????ù: {FF9900}%d ??", items);
							SendClientMessage(playerid, 0x3399FFFF, fmt_str);

							format(fmt_str, sizeof fmt_str, "+ %d ??", rand);
							SetPlayerChatBubble(playerid, fmt_str, 0x66CC00FF, 10.0, 2000);

							miner_carriage[0][MC_ORE_COUNT] += rand;

							if(miner_carriage[0][MC_ORE_COUNT] >= 10000)
							{
								DestroyPickup(miner_carriage[0][MC_PICKUP_ID]);
								miner_carriage[0][MC_PICKUP_ID] = -1;

								SetTimerEx("MinerCarriageMove", 7_000, false, "i", 0);

								UpdateDynamic3DTextLabelText(miner_carriage[0][MC_LABEL], 0xFFFF00FF, "????????...");
							}
							else
							{
								format(fmt_str, sizeof fmt_str, "????????\n\n{FFCC00}?????????? ????\n%d / 10000 ??", miner_carriage[0][MC_ORE_COUNT]);
								UpdateDynamic3DTextLabelText(miner_carriage[0][MC_LABEL], 0x66CC00FF, fmt_str);
							}

							SetPlayerMinerJobLoadCP(playerid);
						}
					}
				}
				case PICKUP_ACTION_TYPE_MPREG:
				{
					Dialog
						(
							playerid, DIALOG_MPREG, DIALOG_STYLE_LIST,
							"{FFCD00}??????????ù ?? ???????ù??ù",
							""c_s"[1] "c_b"DeathMatch Zone",
							"???????", "??????"
						);
				}
				case PICKUP_ACTION_TYPE_GANG_REPOSIT:
				{
					if(GetPlayerTeamEx(playerid) != (action_id + TEAM_OPG_ARZAMASKAYA - 1))
						return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ? ????? ??????");

					Dialog
					(
						playerid, DIALOG_GANG_REPOSITORY, DIALOG_STYLE_LIST,
						"{FFCD00}????? ?????",
						"\
						{00CC00}1. ???????? ?????????\n\
						{00CC00}2. ???????? ???????\n\
						{00CC00}3. ???????? ?????????\n\
						{00CC00}4. ???????? ??????\n\
						5. ??ù?? ?????????\n\
						6. ??ù?? ???????\n\
						7. ??ù?? ?????????\n\
						8. ??ù?? ??????\n\
						",
						"???????", "??????"
					);
				}
				
			case PICKUP_ACTION_TYPE_ARMORY:
				{
					switch(action_id)
					{
						case ARMORY_TYPE_ARMOR:
						{
							new idx = action_id;
							
							if (GetPVarInt(playerid, "box_in_hard_delivery"))
   						{
   						    RemovePlayerAttachedObject(playerid, 2);
     						  DeletePVar(playerid, "box_in_hard_delivery");
   						    ApplyAnimation(playerid, "CARRY", "putdwn", 4.1, 1, 1, 1, 1, 0, 1);
  							SetTimerEx("StopPlayerAnimation", 1000, false, "i", playerid);

     						  g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] += 500;
								if (g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] > 100000) g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] = 100000;

								UpdateArmoryDatabaseInt(ARMORY_TYPE_ARMOR, "materials", g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS]);
      						 UpdateArmoryLabel(ARMORY_TYPE_ARMOR);
      
     						  SendClientMessage(playerid, -1, "?? ????????? ù??? ? ??????????? ?? ????? ??????? ?????.");
    
  							new fmt_msg[144];
             
             				format(fmt_msg, sizeof fmt_msg, "[R] %s %s ???????? ù??? ? ??????????? ?? ????? ??????? ?????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

							if(!GetPlayerTeamEx(playerid))
								SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
							else
							    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
   
      						 return 1;
						   }
						
							if(GetPlayerTeamEx(playerid) != TEAM_ARMY)
								return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ? ?????");
							
							if (!g_armory[idx][A_IS_OPEN])
								return SendClientMessage(playerid, COLOR_GREY, "????? ??????, ?????????????? ? ??? ??????????.");

							new materials = g_armory[idx][A_MATERIALS];
							new dialog[512];

							strcat(dialog, "{FF6666}?????\t{FF6666}????????????\t{FF6666}?????????\t{FF6666}??????\n");

							strcat(dialog, (materials >= 50) ? "1.\t?????\t50\t{00FF00}????????\n" : "1.\t?????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "2.\t??????????\t50\t{00FF00}????????\n" : "2.\t??????????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "3.\t???????\t50\t{00FF00}????????\n" : "3.\t???????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 150) ? "4.\tDesert Eagle\t150\t{00FF00}????????\n" : "4.\tDesert Eagle\t150\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 200) ? "5.\t??-74\t200\t{00FF00}????????\n" : "5.\t??-74\t200\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 120) ? "6.\t????????\t120\t{00FF00}????????\n" : "6.\t????????\t120\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 300) ? "7.\t???????? ?????????\t300\t{00FF00}????????" : "7.\t???????? ?????????\t300\t{FF6666}??????????");

							Dialog(playerid, DIALOG_ARMORY, DIALOG_STYLE_TABLIST_HEADERS,
								"{FFCD00}????????? ????? ?????",
								dialog,
								"??ù??", "??????");
						}
						case ARMORY_TYPE_FSIN:
						{
							new idx = action_id;
							
							if (GetPVarInt(playerid, "box_in_hard_delivery"))
   						{
   						    RemovePlayerAttachedObject(playerid, 2);
     						  DeletePVar(playerid, "box_in_hard_delivery");
   						    ApplyAnimation(playerid, "CARRY", "putdwn", 4.1, 1, 1, 1, 1, 0, 1);
  							SetTimerEx("StopPlayerAnimation", 1000, false, "i", playerid);

     						  g_armory[ARMORY_TYPE_FSIN][A_MATERIALS] += 500;
								if (g_armory[ARMORY_TYPE_FSIN][A_MATERIALS] > 100000) g_armory[ARMORY_TYPE_FSIN][A_MATERIALS] = 100000;

								UpdateArmoryDatabaseInt(ARMORY_TYPE_FSIN, "materials", g_armory[ARMORY_TYPE_FSIN][A_MATERIALS]);
      						 UpdateArmoryLabel(ARMORY_TYPE_FSIN);
      
     						  SendClientMessage(playerid, -1, "?? ????????? ù??? ? ??????????? ?? ????? ????.");
    
  							new fmt_msg[144];
             
             				format(fmt_msg, sizeof fmt_msg, "[R] %s %s ???????? ù??? ? ??????????? ?? ????? ??????????? \"????\"", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

							if(!GetPlayerTeamEx(playerid))
								SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
							else
							    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
   
      						 return 1;
						   }
							
							if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
								return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ? ?????");
								
							if (!g_armory[idx][A_IS_OPEN])
								return SendClientMessage(playerid, COLOR_GREY, "????? ??????, ?????????????? ? ??? ??????????.");

							new materials = g_armory[idx][A_MATERIALS];
							new dialog[512];

							strcat(dialog, "{FF6666}?????\t{FF6666}????????????\t{FF6666}?????????\t{FF6666}??????\n");

							strcat(dialog, (materials >= 50) ? "1.\t?????\t50\t{00FF00}????????\n" : "1.\t?????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "2.\t??????????\t50\t{00FF00}????????\n" : "2.\t??????????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "3.\t???????\t50\t{00FF00}????????\n" : "3.\t???????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 150) ? "4.\tDesert Eagle\t150\t{00FF00}????????\n" : "4.\tDesert Eagle\t150\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 200) ? "5.\t??-74\t200\t{00FF00}????????\n" : "5.\t??-74\t200\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 120) ? "6.\t????????\t120\t{00FF00}????????\n" : "6.\t????????\t120\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 300) ? "7.\t???????? ?????????\t300\t{00FF00}????????" : "7.\t???????? ?????????\t300\t{FF6666}??????????");

							Dialog(playerid, DIALOG_ARMORY, DIALOG_STYLE_TABLIST_HEADERS,
								"{FFCD00}????????? ????? ????",
								dialog,
								"??ù??", "??????");
						}
						case ARMORY_TYPE_SECURITY:
						{
							new idx = action_id;
							
							if (GetPVarInt(playerid, "box_in_hard_delivery"))
   						{
   						    RemovePlayerAttachedObject(playerid, 2);
     						  DeletePVar(playerid, "box_in_hard_delivery");
   						    ApplyAnimation(playerid, "CARRY", "putdwn", 4.1, 1, 1, 1, 1, 0, 1);
  							SetTimerEx("StopPlayerAnimation", 1000, false, "i", playerid);

     						  g_armory[ARMORY_TYPE_SECURITY][A_MATERIALS] += 500;
								if (g_armory[ARMORY_TYPE_SECURITY][A_MATERIALS] > 100000) g_armory[ARMORY_TYPE_SECURITY][A_MATERIALS] = 100000;

								UpdateArmoryDatabaseInt(ARMORY_TYPE_SECURITY, "materials", g_armory[ARMORY_TYPE_SECURITY][A_MATERIALS]);
      						 UpdateArmoryLabel(ARMORY_TYPE_SECURITY);
      
     						  SendClientMessage(playerid, -1, "?? ????????? ù??? ? ??????????? ?? ????? ?????????????.");
    
  							new fmt_msg[144];
             
             				format(fmt_msg, sizeof fmt_msg, "[R] %s %s ???????? ù??? ? ??????????? ?? ????? ??????????? \"?????????????\"", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

							if(!GetPlayerTeamEx(playerid))
								SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
							else
							    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
   
      						 return 1;
						   }
						
							if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT)
								return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ? ?????");
								
							if(!(2 <= GetPlayerJob(playerid) <= 3))
								return SendClientMessage(playerid, 0x999999FF, "????????? ????? ???????? ?????? ??????????? ?????? ??????");
								
							if (!g_armory[idx][A_IS_OPEN])
								return SendClientMessage(playerid, COLOR_GREY, "????? ??????, ?????????????? ? ??? ??????????.");

							new materials = g_armory[idx][A_MATERIALS];
							new dialog[512];

							strcat(dialog, "{FF6666}?????\t{FF6666}????????????\t{FF6666}?????????\t{FF6666}??????\n");

							strcat(dialog, (materials >= 50) ? "1.\t?????\t50\t{00FF00}????????\n" : "1.\t?????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "2.\t??????????\t50\t{00FF00}????????\n" : "2.\t??????????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "3.\t???????\t50\t{00FF00}????????\n" : "3.\t???????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 150) ? "4.\tDesert Eagle\t150\t{00FF00}????????\n" : "4.\tDesert Eagle\t150\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 200) ? "5.\t??-74\t200\t{00FF00}????????\n" : "5.\t??-74\t200\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 120) ? "6.\t????????\t120\t{00FF00}????????\n" : "6.\t????????\t120\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 300) ? "7.\t???????? ?????????\t300\t{00FF00}????????" : "7.\t???????? ?????????\t300\t{FF6666}??????????");

							Dialog(playerid, DIALOG_ARMORY, DIALOG_STYLE_TABLIST_HEADERS,
								"{FFCD00}????????? ????? ?????? ?????????????",
								dialog,
								"??ù??", "??????");
						}
						case ARMORY_TYPE_POLICE:
						{
							new idx = action_id;
							
							if (GetPVarInt(playerid, "box_in_hard_delivery"))
   						{
   						    RemovePlayerAttachedObject(playerid, 2);
     						  DeletePVar(playerid, "box_in_hard_delivery");
   						    ApplyAnimation(playerid, "CARRY", "putdwn", 4.1, 1, 1, 1, 1, 0, 1);
  							SetTimerEx("StopPlayerAnimation", 1000, false, "i", playerid);

     						  g_armory[ARMORY_TYPE_POLICE][A_MATERIALS] += 500;
								if (g_armory[ARMORY_TYPE_POLICE][A_MATERIALS] > 100000) g_armory[ARMORY_TYPE_POLICE][A_MATERIALS] = 100000;

								UpdateArmoryDatabaseInt(ARMORY_TYPE_POLICE, "materials", g_armory[ARMORY_TYPE_POLICE][A_MATERIALS]);
      						 UpdateArmoryLabel(ARMORY_TYPE_POLICE);
      
     						  SendClientMessage(playerid, -1, "?? ????????? ù??? ? ??????????? ?? ????? ???????.");
    
  							new fmt_msg[144];
             
             				format(fmt_msg, sizeof fmt_msg, "[R] %s %s ???????? ù??? ? ??????????? ?? ????? ??????????? \"???? ? ?????\"", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

							if(!GetPlayerTeamEx(playerid))
								SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
							else
							    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
   
      						 return 1;
						   }
						
								if(GetPlayerTeamEx(playerid) != TEAM_DPS && GetPlayerTeamEx(playerid) != TEAM_PPS)
									return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ? ?????");
									
								if (!g_armory[idx][A_IS_OPEN])
									return SendClientMessage(playerid, COLOR_GREY, "????? ??????, ?????????????? ? ??? ??????????.");

							new materials = g_armory[idx][A_MATERIALS];
							new dialog[512];

							strcat(dialog, "{FF6666}?????\t{FF6666}????????????\t{FF6666}?????????\t{FF6666}??????\n");

							strcat(dialog, (materials >= 50) ? "1.\t?????\t50\t{00FF00}????????\n" : "1.\t?????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "2.\t??????????\t50\t{00FF00}????????\n" : "2.\t??????????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "3.\t???????\t50\t{00FF00}????????\n" : "3.\t???????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 150) ? "4.\tDesert Eagle\t150\t{00FF00}????????\n" : "4.\tDesert Eagle\t150\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 200) ? "5.\t??-74\t200\t{00FF00}????????\n" : "5.\t??-74\t200\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 120) ? "6.\t????????\t120\t{00FF00}????????\n" : "6.\t????????\t120\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 300) ? "7.\t???????? ?????????\t300\t{00FF00}????????" : "7.\t???????? ?????????\t300\t{FF6666}??????????");

							Dialog(playerid, DIALOG_ARMORY, DIALOG_STYLE_TABLIST_HEADERS,
								"{FFCD00}????????? ????? ???????",
								dialog,
								"??ù??", "??????");
						}
						case ARMORY_TYPE_FSB:
						{
							new idx = action_id;
							
							if (GetPVarInt(playerid, "box_in_hard_delivery"))
   						{
   						    RemovePlayerAttachedObject(playerid, 2);
     						  DeletePVar(playerid, "box_in_hard_delivery");
   						    ApplyAnimation(playerid, "CARRY", "putdwn", 4.1, 1, 1, 1, 1, 0, 1);
  							SetTimerEx("StopPlayerAnimation", 1000, false, "i", playerid);

     						  g_armory[ARMORY_TYPE_FSB][A_MATERIALS] += 500;
								if (g_armory[ARMORY_TYPE_FSB][A_MATERIALS] > 100000) g_armory[ARMORY_TYPE_FSB][A_MATERIALS] = 100000;

								UpdateArmoryDatabaseInt(ARMORY_TYPE_FSB, "materials", g_armory[ARMORY_TYPE_FSB][A_MATERIALS]);
      						 UpdateArmoryLabel(ARMORY_TYPE_FSB);
      
     						  SendClientMessage(playerid, -1, "?? ????????? ù??? ? ??????????? ?? ????? ???.");
    
  							new fmt_msg[144];
             
             				format(fmt_msg, sizeof fmt_msg, "[R] %s %s ???????? ù??? ? ??????????? ?? ????? ??????????? \"???\"", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

							if(!GetPlayerTeamEx(playerid))
								SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
							else
							    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
   
      						 return 1;
						   }
						
								if(GetPlayerTeamEx(playerid) != TEAM_FBI)
								return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ? ?????");
									
								if (!g_armory[idx][A_IS_OPEN])
									return SendClientMessage(playerid, COLOR_GREY, "????? ??????, ?????????????? ? ??? ??????????.");
			
							
							new materials = g_armory[idx][A_MATERIALS];
							new dialog[512];

							strcat(dialog, "{FF6666}?????\t{FF6666}????????????\t{FF6666}?????????\t{FF6666}??????\n");

							strcat(dialog, (materials >= 50) ? "1.\t?????\t50\t{00FF00}????????\n" : "1.\t?????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "2.\t??????????\t50\t{00FF00}????????\n" : "2.\t??????????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 50) ? "3.\t???????\t50\t{00FF00}????????\n" : "3.\t???????\t50\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 150) ? "4.\tDesert Eagle\t150\t{00FF00}????????\n" : "4.\tDesert Eagle\t150\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 200) ? "5.\t??-74\t200\t{00FF00}????????\n" : "5.\t??-74\t200\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 120) ? "6.\t????????\t120\t{00FF00}????????\n" : "6.\t????????\t120\t{FF6666}??????????\n");
							strcat(dialog, (materials >= 300) ? "7.\t???????? ?????????\t300\t{00FF00}????????" : "7.\t???????? ?????????\t300\t{FF6666}??????????");

							Dialog(playerid, DIALOG_ARMORY, DIALOG_STYLE_TABLIST_HEADERS,
								"{FFCD00}????????? ????? ???",
								dialog,
								"??ù??", "??????");
						}
					}
				} 
						
				case PICKUP_ACTION_TYPE_BIZ_SHOP_GUN:
				{
					new businessid = GetPlayerInBiz(playerid);
					if(businessid != -1)
					{
						new type = GetBusinessData(businessid, B_TYPE);
						if(type == BUSINESS_TYPE_SHOP_GUN)
						{
							callcmd::buy(playerid, "");
						}
					}
				}
				case PICKUP_ACTION_TYPE_BIZ_CAR_TUN:
				{
				    if(GetPlayerOwnableCars(playerid) == 0)
						SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
									
				    new businessid = GetPlayerInBiz(playerid);
				    if(businessid != -1)
					{
						if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_CAR_TUNING))
						{
						    SetPlayerPos(playerid, 2482.655517,1488.368652,1498.179687);
							Dialog
							(
								playerid, DIALOG_BIZ_CAR_TUNING, DIALOG_STYLE_LIST,
								"{ffff00}ù????? ??????????",
								"1. ???????? ??????????\t{ffff00}25.000 ???\n"\
								"2. ???????? ?????????????\n"\
								"3. ???????? ??????????\t{ffff00}5.000 ???\n"\
								"4. ?????????? ???? ???\t{ffff00}10.000 ???\n"\
								"5. ??????? ???? ? ?????\t{ffff00}2.000 ???\n"\
								"5. ????????? ????????? ?????????ù\t{ffff00}2.000 ???",
								"???????", "??????"
							);
						}
					}
				}
			}
		}
	}
	return 1;
	//:000
	}
	else return 1;
}

public: HidePlayerSelectPanelPriceTimer(playerid)
{
	if(GetPlayerData(playerid, P_USE_SELECT_PANEL) == SELECT_PANEL_TYPE_NONE)
	{
		HidePlayerSelectPanelPrice(playerid);
	}
	return 1;
}

public OnVehicleMod(playerid, vehicleid, componentid)
{
	Kick(playerid);

	return 0;
}

public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
{
	Kick(playerid);

	return 0;
}

public OnVehicleRespray(playerid, vehicleid, color1, color2)
{
	Kick(playerid);

	return 0;
}

public OnPlayerSelectedMenuRow(playerid, row)
{
	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, 500, FLOOD_RATE_KICK);

	if(GetPlayerMenu(playerid) == admin_spec_menu)
	{
		if(GetPlayerSpectateData(playerid, S_PLAYER) == -1) return HideMenuForPlayer(admin_spec_menu, playerid);

		new fmt_text[100],
			spec_player = GetPlayerSpectateData(playerid, S_PLAYER);

		switch(row)
		{
			case 0, 8: StopSpectate(playerid);
			case 1:
			{
				StartSpectate(playerid, spec_player);
				ShowMenuForPlayer(admin_spec_menu, playerid);
			}
			case 2:
			{
				//ShowPlayerStats(spec_player, playerid);
				ShowMenuForPlayer(admin_spec_menu, playerid);
			}
			case 3:
			{
				callcmd::skick(playerid, IntToString(spec_player));
				ShowMenuForPlayer(admin_spec_menu, playerid);
			}
			case 4:
			{
				format(fmt_text, sizeof fmt_text, "%d 5", spec_player);
				callcmd::mute(playerid, fmt_text);
				ShowMenuForPlayer(admin_spec_menu, playerid);
			}
			case 5:
			{
				callcmd::slap(playerid, IntToString(spec_player));
				ShowMenuForPlayer(admin_spec_menu, playerid);
			}
			case 6:
			{
				// callcmd::test(playerid, IntToString(spec_player));
				ShowMenuForPlayer(admin_spec_menu, playerid);
			}
			case 7:
			{
				format(fmt_text, sizeof fmt_text, "[SP] %s[%d]  |  PING %d  |  IP  %s  |  R-IP  %s",
				GetPlayerNameEx(spec_player), spec_player, GetPlayerPing(spec_player), GetPlayerIpEx(spec_player), GetPlayerData(spec_player, P_REG_IP));
				SendClientMessage(playerid, 0x00CC66FF, fmt_text);
				ShowMenuForPlayer(admin_spec_menu, playerid);
			}
		}
	}

	return 1;
}

public OnPlayerExitedMenu(playerid)
{
	if(GetPlayerMenu(playerid) == admin_spec_menu)
	{
		if(GetPlayerSpectateData(playerid, S_PLAYER) != -1)
		{
			ShowMenuForPlayer(admin_spec_menu, playerid);
		}
	}
	return 1;
}

public OnPlayerInteriorChange(playerid, newinteriorid, oldinteriorid)
{
    gPlayerInGreenZone[playerid] = false;
	return 1;
}

public OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{
if(g_IsFollowing[playerid])
    {
        if(newkeys & (KEY_UP | KEY_DOWN | KEY_LEFT | KEY_RIGHT | KEY_JUMP | KEY_SPRINT))
        {
            new Float:x, Float:y, Float:z;
            GetPlayerPos(playerid, x, y, z);
            SetPlayerPos(playerid, x, y, z); // ????? ???????ù
            return 1;
        }
    }
if(newkeys == KEY_CROUCH)
    {
        CheckGateAccess(playerid);
    }

if ((newkeys & KEY_JUMP) || (newkeys & KEY_SPRINT))
{
    if (GetPVarInt(playerid, "box_in_hard_delivery") == 1)
    {
        RemovePlayerAttachedObject(playerid, 2);
        DeletePVar(playerid, "box_in_hard_delivery");

        ApplyAnimation(playerid, "CARRY", "putdwn", 4.1, 0, 0, 0, 0, 0, 0);
        SendClientMessage(playerid, -1, "?? ??????? ù???, ???????ù????? ?? ?????.");

        if (GetPVarInt(playerid, "box_in_hard_delivery_frac") == 1)
        {
            DeletePVar(playerid, "box_in_hard_delivery_frac");
            g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] += 500;
			if (g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] > 100000) g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] = 100000;

			UpdateArmoryDatabaseInt(ARMORY_TYPE_ARMOR, "materials", g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS]);
            UpdateArmoryLabel(ARMORY_TYPE_ARMOR);
        }
    }
}

if((newkeys & KEY_JUMP) || (newkeys & KEY_SPRINT))
    {
        if(!IsPlayerInAnyVehicle(playerid))
        {
            if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
            {
                if(IsPlayerInRangeOfPoint(playerid, 250.0, -1778.83, -2754.59, 7.58))
                {
                    TogglePlayerControllable(playerid, false);
                    SetTimerEx("UnfreezePlayer", 300, false, "i", playerid);
                }
            }
        }
    }
if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  5.0, -426.235290,1005.412658,12.307508)) //1
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  new vehicleID = GetPlayerVehicleID(playerid);
		  
          new veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, 996.368164,999.465759,1001.791540);
                    SetVehicleZAngle(veh, 273.919586);
          SetVehicleVirtualWorld(veh, 101);
          LinkVehicleToInterior(veh,1);
          SetPlayerInterior(playerid,1);
          
          SetPlayerVirtualWorld(playerid, 101);
          //SetPlayerPos(playerid, 1006.474365,1490.628173,1498.242187);
          //SetPlayerFacingAngle(playerid, 243.409957);
          
          SetPlayerCameraPos(playerid, 1001.483154,1002.271240,1000.906738);
	  	          SetPlayerCameraLookAt(playerid, 997.090454,999.934204,1001.398864);
          
          for(new i; i < 4;i++) PlayerTextDrawSetString(playerid, stg_PTD[playerid][i], stage_td_select[i][0]);
                    
                    for(new i;i<5;i++) PlayerTextDrawShow(playerid, stg_PTD[playerid][i]);
                    
                    TextDrawShowForPlayer(playerid, stg_TD[0]);
                    TextDrawShowForPlayer(playerid, stg_TD[2]);
                    TextDrawShowForPlayer(playerid, stg_TD[3]);
                    TextDrawShowForPlayer(playerid, stg_TD[4]);

                    PlayerTextDrawSetString(playerid, stg_PTD[playerid][9], "0000_???");
                    PlayerTextDrawShow(playerid, stg_PTD[playerid][9]);
                    
                    SelectTextDraw(playerid, -1);
          
          HideHud(playerid);
						TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_HIDE);
						player_select_stage[playerid] = 4;
		SetTimerEx("tpplayertex2", 700, false, "d", playerid);
       }
   }
   //:0000000
   
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  5.0, -420.054534,1005.409240,12.307003)) //1
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  new vehicleID = GetPlayerVehicleID(playerid);
		  
          new veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, 996.368164,999.465759,1001.791540);
                    SetVehicleZAngle(veh, 273.919586);
          SetVehicleVirtualWorld(veh, 101);
          LinkVehicleToInterior(veh,1);
          SetPlayerInterior(playerid,1);
          
          SetPlayerVirtualWorld(playerid, 101);
          //SetPlayerPos(playerid, 1006.474365,1490.628173,1498.242187);
          //SetPlayerFacingAngle(playerid, 243.409957);
          
          SetPlayerCameraPos(playerid, 1001.483154,1002.271240,1000.906738);
	  	          SetPlayerCameraLookAt(playerid, 997.090454,999.934204,1001.398864);
          
          for(new i; i < 4;i++) PlayerTextDrawSetString(playerid, stg_PTD[playerid][i], stage_td_select[i][0]);
                    
                    for(new i;i<5;i++) PlayerTextDrawShow(playerid, stg_PTD[playerid][i]);
                    
                    TextDrawShowForPlayer(playerid, stg_TD[0]);
                    TextDrawShowForPlayer(playerid, stg_TD[2]);
                    TextDrawShowForPlayer(playerid, stg_TD[3]);
                    TextDrawShowForPlayer(playerid, stg_TD[4]);

                    PlayerTextDrawSetString(playerid, stg_PTD[playerid][9], "0000_???");
                    PlayerTextDrawShow(playerid, stg_PTD[playerid][9]);
                    
                    SelectTextDraw(playerid, -1);
          
          HideHud(playerid);
						TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_HIDE);
						player_select_stage[playerid] = 4;
		SetTimerEx("tpplayertex2", 700, false, "d", playerid);
       }
   }
   //:0000000
   
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  5.0, -413.549285,1005.543029,12.326748)) //1
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  new vehicleID = GetPlayerVehicleID(playerid);
		  
          new veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, 996.368164,999.465759,1001.791540);
                    SetVehicleZAngle(veh, 273.919586);
          SetVehicleVirtualWorld(veh, 101);
          LinkVehicleToInterior(veh,1);
          SetPlayerInterior(playerid,1);
          
          SetPlayerVirtualWorld(playerid, 101);
          //SetPlayerPos(playerid, 1006.474365,1490.628173,1498.242187);
          //SetPlayerFacingAngle(playerid, 243.409957);
          
          SetPlayerCameraPos(playerid, 1001.483154,1002.271240,1000.906738);
	  	          SetPlayerCameraLookAt(playerid, 997.090454,999.934204,1001.398864);
          
          for(new i; i < 4;i++) PlayerTextDrawSetString(playerid, stg_PTD[playerid][i], stage_td_select[i][0]);
                    
                    for(new i;i<5;i++) PlayerTextDrawShow(playerid, stg_PTD[playerid][i]);
                    
                    TextDrawShowForPlayer(playerid, stg_TD[0]);
                    TextDrawShowForPlayer(playerid, stg_TD[2]);
                    TextDrawShowForPlayer(playerid, stg_TD[3]);
                    TextDrawShowForPlayer(playerid, stg_TD[4]);

                    PlayerTextDrawSetString(playerid, stg_PTD[playerid][9], "0000_???");
                    PlayerTextDrawShow(playerid, stg_PTD[playerid][9]);
                    
                    SelectTextDraw(playerid, -1);
          
          HideHud(playerid);
						TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_HIDE);
						player_select_stage[playerid] = 4;
		SetTimerEx("tpplayertex2", 700, false, "d", playerid);
       }
   }
   

if(newkeys == KEY_CROUCH) // ????????? ??????????
{
    print("[eq]");
    if(IsPlayerInRangeOfPoint(playerid, 5.0, 2311.418945,-2607.487304,21.808467)) //1
    {
        if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ??????????");

        // ?????? ???????????? - ???????? ??????? ???????
        callcmd::tungui(playerid);
    }
}

if(newkeys == KEY_CROUCH) // ????????? ??????????
{
    print("[eq]");
    if(IsPlayerInRangeOfPoint(playerid, 5.0, 2311.424804,-2613.460937,21.808467)) //2
    {
        if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ??????????");

        // ?????? ???????????? - ???????? ??????? ???????
        callcmd::tungui(playerid);
    }
}

if(newkeys == KEY_CROUCH) // ????????? ??????????
{
    print("[eq]");
    if(IsPlayerInRangeOfPoint(playerid, 5.0, 2311.318603,-2619.407470,21.808467)) //3
    {
        if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ??????????");

        // ?????? ???????????? - ???????? ??????? ???????
        callcmd::tungui(playerid);
    }
}

if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  4.0, 1963.987792,-546.881042,12.344052)) //1
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  
          ShowPlayerSellCarDialog(playerid);
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  4.0, 1956.944213,-546.849548,12.348891)) //2
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		
          ShowPlayerSellCarDialog(playerid);
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  4.0, 1949.870971,-546.380981,12.420888)) //3
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  
          ShowPlayerSellCarDialog(playerid);
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  4.0, 1943.005126,-546.514587,12.400360)) //4
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  
          ShowPlayerSellCarDialog(playerid);
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  4.0, 1935.871093,-546.598449,12.387474)) //5
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  
          ShowPlayerSellCarDialog(playerid);
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  4.0, 1970.980102,-546.651245,12.379362)) //6
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  
          ShowPlayerSellCarDialog(playerid);
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid, 4.0, 1985.850708,-546.406677,12.416940)) //7
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  
          ShowPlayerSellCarDialog(playerid);
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid, 4.0, 1992.923095,-546.738647,12.365932)) //8
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
		  
          ShowPlayerSellCarDialog(playerid);
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid, 4.0, 482.254608,954.700195,1001.000000))
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
          new veh;
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);
		  for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, vehicleID))

          SetPlayerVirtualWorld(i, 0);
          SetPlayerInterior(i, 0);
          SetCameraBehindPlayer(i);
          }
          veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          return true;
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  10.0, 499.931915,918.361816,1001.000000))
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
          new veh;
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);
		  for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, vehicleID))

          SetPlayerVirtualWorld(i, 0);
          SetPlayerInterior(i, 0);
          SetCameraBehindPlayer(i);
          }
          veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          return true;
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  10.0, 481.850952,1081.980712,1001.000000))
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
          new veh;
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);
		  for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, vehicleID))

          SetPlayerVirtualWorld(i, 0);
          SetPlayerInterior(i, 0);
          SetCameraBehindPlayer(i);
          }
          veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          return true;
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  10.0, 561.913696,1018.296691,1001.000000))
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
          new veh;
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);
		  for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, vehicleID))

          SetPlayerVirtualWorld(i, 0);
          SetPlayerInterior(i, 0);
          SetCameraBehindPlayer(i);
          }
          veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          return true;
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  10.0, 553.966735,918.125732,1001.000000)) //
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
          new veh;
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);
		  for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, vehicleID))

          SetPlayerVirtualWorld(i, 0);
          SetPlayerInterior(i, 0);
          SetCameraBehindPlayer(i);
          }
          veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          return true;
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  10.0, 473.902709,1018.365661,1001.000000))
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
          new veh;
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);
		  for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, vehicleID))

          SetPlayerVirtualWorld(i, 0);
          SetPlayerInterior(i, 0);
          SetCameraBehindPlayer(i);
          }
          veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          return true;
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  10.0, 553.964111,1082.194213,1001.000000))
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
          new veh;
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);
		  for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, vehicleID))

          SetPlayerVirtualWorld(i, 0);
          SetPlayerInterior(i, 0);
          SetCameraBehindPlayer(i);
          }
          veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          return true;
       }
   }
   if(newkeys == KEY_CROUCH)
   {
       print("[eq]");
       if(IsPlayerInRangeOfPoint(playerid,  10.0, 562.388244,963.125244,1001.000000))
       {
          if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
          new veh;
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);
		  for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, vehicleID))

          SetPlayerVirtualWorld(i, 0);
          SetPlayerInterior(i, 0);
          SetCameraBehindPlayer(i);
          }
          veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          return true;
       }
   }
   	if(newkeys == KEY_CROUCH)
    {
        if(GetPlayerIdFamily(playerid) == -1 || !IsPlayerInDynamicArea(playerid, FAM_CONT_DELIVERY)) return 0;

        new vehicleid = GetPlayerVehicleID(playerid);

        if(vehicleid == INVALID_VEHICLE_ID || GetVehicleData(vehicleid, V_ACTION_TYPE) != VEHICLE_ACTION_TYPE_FAMILY_CAR) return 0;

        new action = GetVehicleData(vehicleid, V_ACTION_ID), f = GetCarFamily(action, OW_F_server);

        if(f != GetPlayerIdFamily(playerid)) return 0;

        if(GetCarFamily(action, V_F_COUNT_BOX) == 0) return SendClientMessage(playerid, -1, ""c_f_r" ? ????? ???????? ?????????? ??? ù?????");
        {
            new money = GetCarFamily(action, V_F_COUNT_BOX)*100;

            AddFamily(f, family_reputation, +, GetCarFamily(action, V_F_COUNT_BOX));
            AddFamily(f, family_money, +, money);
            UpdateColumnFamilyInt(GetFamily(f, family_database), "money", GetFamily(f, family_money));
            UpdateColumnFamilyInt(GetFamily(f, family_database), "reputation", GetFamily(f, family_reputation));

            format(f_string144, sizeof f_string144, "%s[%d] ??????? ?????? ?? ?????? ?????, ????ù ???????? %d ???., ó %d ??????", GetPlayerNameEx(playerid), playerid, GetCarFamily(action, V_F_COUNT_BOX), money);
            SendFamilyMessage(f, f_string144);
            SetCarFamily(action, V_F_COUNT_BOX, 0);
        }
    }
    if(newkeys == KEY_FIRE)
    {
        if(GetPVarInt(playerid, "box_in_hard"))
        {
            RemovePlayerAttachedObject(playerid, 2);
            DeletePVar(playerid, "box_in_hard");
            SendClientMessage(playerid, -1, ""c_f_r"?? ??????? ù???, ???????ù????? ? ????????? ?? ?????.");
        }
    }
    
    if(newkeys == KEY_CROUCH)
    {
        if((IsPlayerInRangeOfPoint(playerid, 2.5, pos_tuning [ 0 ] [ 0 ], pos_tuning [ 0 ] [ 1 ], pos_tuning [ 0 ] [ 2 ])
		|| IsPlayerInRangeOfPoint(playerid, 2.5, pos_tuning [ 1 ] [ 0 ], pos_tuning [ 1 ] [ 1 ], pos_tuning [ 1 ] [ 2 ])
		|| IsPlayerInRangeOfPoint(playerid, 2.5, pos_tuning [ 2 ] [ 0 ], pos_tuning [ 2 ] [ 1 ], pos_tuning [ 2 ] [ 2 ])
		|| IsPlayerInRangeOfPoint(playerid, 2.5, pos_tuning [ 3 ] [ 0 ], pos_tuning [ 3 ] [ 1 ], pos_tuning [ 3 ] [ 2 ])) && GetPlayerState(playerid) == 2) // ??????? ? ??????
		{
		    if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid))) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????? ?????????ù");
            //if(GetVehicleFreeSeat(GetPlayerVehicleID(playerid)) == -1) return SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}??ù ?????? ???????? ???? ??????????.");

		    //SetPVarInt(playerid, "playerTune", 1);
			//SetVehiclePos(GetPlayerOwnableCar(playerid), 2503.1333, 1503.7999, 1498.1379);
			//SetVehicleZAngle(GetPlayerOwnableCar(playerid), 0.1546);

			SetCameraBehindPlayer(playerid);
			//LinkVehicleToInterior(GetPlayerOwnableCar(playerid), 1);
			//SetVehicleVirtualWorld(GetPlayerOwnableCar(playerid), playerid + 1);
			//SetPlayerInteriorEx(playerid, 1);
			//SetPlayerVirtualWorldEx(playerid, playerid + 1);

			//Dialog(playerid, 450, DIALOG_STYLE_LIST, ""SERVER"??????????", "1. ??????????? ????????\n2. ?????????? ?????\n3. ?????????? ???? ???\n4. ?????????? ?????\n5. ????? ?????? ?o???\n6. ?????-????????", "?????", "?????");
            ShowTuneShowPlayerDialog(playerid);
			//TogglePlayerControllable(playerid, false);
			return true;
		}
		}

	if(PRESSED(KEY_NO))
		callcmd::no(playerid, "");

	if(PRESSED(KEY_YES))
		callcmd::yes(playerid, "");

	if(IsPlayerInAnyVehicle(playerid))
	{
		if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		{
			if(GetPlayerSettingData(playerid, S_VEH_CONTROL) == SETTING_TYPE_ON)
			{
				if(PRESSED(KEY_HANDBRAKE | KEY_FIRE)) // ?????? ctrl
				{
					if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
					{
						callcmd::lock(playerid, "1");
					}
				}
				if(PRESSED(KEY_ACTION))
				{
					callcmd::e(playerid, "");
				}
				if(PRESSED(KEY_FIRE))
				{
					callcmd::l(playerid, "");
				}
				if(PRESSED(KEY_ANALOG_UP)) // num 8
				{
					callcmd::b(playerid, "");
				}
				if(PRESSED(KEY_ANALOG_DOWN)) // num 2
				{
					callcmd::i(playerid, "");
				}
				if(PRESSED(KEY_ANALOG_LEFT)) // num 4
				{
					callcmd::sl(playerid, "");
				}
				if(PRESSED(KEY_ANALOG_RIGHT)) // num 6
				{
					callcmd::alarm(playerid, "");
				}
			}

			if(PRESSED(KEY_SUBMISSION))
			{
				if(!IsPlayerInVehicle(playerid, GetPlayerOwnableCar(playerid)))
				{
					new job_car = GetPlayerJobCar(playerid);
					if(IsPlayerInVehicle(playerid, job_car))
					{
						new action_type = GetVehicleData(job_car, V_ACTION_TYPE);
						new car_type = (action_type - VEHICLE_ACTION_TYPE_BUS_DRIVER) + 1;

						new job_id = GetPlayerJob(playerid);
						if(job_id == car_type)
						{
							switch(job_id)
							{
								case JOB_BUS_DRIVER:
								{
									if(IsPlayerInJob(playerid))
									{
										Dialog
										(
											playerid, DIALOG_END_JOB, DIALOG_STYLE_MSGBOX,
											"{FFCD00}????????? ?????????",
											"{FFFFFF}?? ??????? ??? ?????? ????????? ??????? ?????",
											"??", "???"
										);
									}
									else
									{
										Dialog
										(
											playerid, DIALOG_BUS_ROUTE_COST, DIALOG_STYLE_INPUT,
											"{FFCD00}????????? ???????",
											"{FFFFFF}??????? ????? ?????? ???????\n"\
											"??????? ???? ?? 0 ?? 100 ??????",
											"?????", "??????"
										);
									}
								}
								case 6:
								{
									if(IsPlayerInJob(playerid))
									{
										Dialog
										(
											playerid, DIALOG_END_JOB, DIALOG_STYLE_MSGBOX,
											"{FFCD00}????????? ??????????",
											"{FFFFFF}?? ??????? ??? ?????? ????????? ??????? ?????",
											"??", "???"
										);
									}
									else
									{
										Dialog
										(
											playerid, DIALOG_TAXI_NAME, DIALOG_STYLE_INPUT,
											"{FFCD00}???????? ?????",
											"{FFFFFF}?????????? ???????? ??ù ?????? ?????\n"\
											"???????????ù ????? 15 ????????\n\n"\
											"???? ?? ?? ?????? ???-?? ?????????ù\n"\
											"??????? ?????? \"??????????\"",
											"?????", "??????????"
										);
									}
								}
								case JOB_MECHANIC:
								{
									if(IsPlayerInJob(playerid))
									{
										Dialog
										(
											playerid, DIALOG_END_JOB, DIALOG_STYLE_MSGBOX,
											"{FFCD00}???????????",
											"{FFFFFF}?? ??????? ??? ?????? ????????? ??????? ?????",
											"??", "???"
										);
									}
									else
									{
										Dialog
										(
											playerid, DIALOG_MECHANIC_START_JOB, DIALOG_STYLE_MSGBOX,
											"{FFCD00}?????????",
											"{FFFFFF}?? ?????? ?????? ?????? ?????????????",
											"??", "???"
										);
									}
								}
								case JOB_TRUCKER:
								{
									if(IsPlayerInJob(playerid))
									{
										Dialog
										(
											playerid, DIALOG_END_JOB, DIALOG_STYLE_MSGBOX,
											"{FFCD00}????????? ?????????",
											"{FFFFFF}?? ??????? ??? ?????? ????????? ??????? ?????",
											"??", "???"
										);
									}
									else
									{
										Dialog
										(
											playerid, DIALOG_TRUCKER_START_JOB, DIALOG_STYLE_MSGBOX,
											"{FFCD00}????????????",
											"{FFFFFF}?? ?????? ?????? ?????? ??????????????",
											"??", "???"
										);
									}
								}
							}
						}
					}
				}
				else callcmd::car(playerid, "");
			}
			if(HOLDING(KEY_CROUCH))
			{
				CallLocalFunction("CheckNearestGate", "i", playerid);
			}
			if(newkeys == KEY_CROUCH)
			{
				print("[eq]");
				if(IsPlayerInRangeOfPoint(playerid,  10.0, -0.2940,2006.1187,1554.2031) && GetPlayerInHouse(playerid) == GetPlayerHouse(playerid) && GetPlayerState(playerid) == 2)
		        {
		        	new houseid = GetPlayerHouse(playerid);
		            SetVehiclePos
		            (
		                GetPlayerOwnableCar(playerid), 
		                GetHouseData(houseid, H_CAR_POS_X),
		                GetHouseData(houseid, H_CAR_POS_Y),
		                GetHouseData(houseid, H_CAR_POS_Z)
		            ); 
		            SetVehicleZAngle(GetPlayerOwnableCar(playerid), GetHouseData(houseid, H_CAR_ANGLE));
		            SetCameraBehindPlayer(playerid);
		            LinkVehicleToInterior(GetPlayerOwnableCar(playerid),0);
		            SetPlayerInterior(playerid,0);
		            SetPlayerVirtualWorld(playerid,0);
		            SetVehicleVirtualWorld(GetPlayerOwnableCar(playerid), 0);
		            return true;
		        }
			}
		}
	}
	else
	{
		if(PRESSED(KEY_FIRE))
		{
			if(GetPlayerData(playerid, P_SNACK))
			{
				SetPlayerData(playerid, P_SNACK, false);

				SetPlayerHealthEx(playerid, 25.0, true);
				GameTextForPlayer(playerid, "~g~~h~+25 hp", 2500, 6);

				ApplyAnimationEx(playerid, "FOOD", "EAT_Chicken", 4.0, 0, 0, 0, 0, 0, 0);
				//SetTimerEx("T_RemovePlayerAttachedObject", 3000, false, "ii", playerid, A_OBJECT_SLOT_HAND);
			}
			if(GetPlayerData(playerid, P_DRINK_STEP) >= 1)
			{
				AddPlayerData(playerid, P_DRINK_STEP, -, 1);
				if(!GetPlayerData(playerid, P_DRINK_STEP))
				{
					SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
				}
			}
		}
		if(PRESSED(KEY_WALK))
		{
			if(GetPlayerInHouse(playerid) != -1)
			{
				new houseid = GetPlayerInHouse(playerid);
				if(GetHouseData(houseid, H_IMPROVEMENTS) > 5)
				{
					Dialog
					(
						playerid, DIALOG_ACTION_EXIT_HOUSE, DIALOG_STYLE_LIST,
						"{FFCC00}?????",
						"1. ?????\n\
						2. ?????",
						"?????", "???????"
					);
					return 1;
				}
				else
					ExitPlayerFromHouse(playerid, 3.0);
			}
			
			else if(GetPlayerData(playerid, P_IN_HOTEL_ROOM) != -1)
			{
				ExitPlayerFromHotelRoom(playerid);
			}
			
			if(IsPlayerInRangeOfPoint(playerid, 2.0, -109.4100,968.7141,12.3526))
			{
  				ShowPlayerQuestMenu(playerid);
			}
			if(IsPlayerInRangeOfPoint(playerid, 2.0, 1802.2566,2513.8135,15.8725))
			{
  				ShowPlayerQuestMenu(playerid);
			}
			if(IsPlayerInRangeOfPoint(playerid, 3.0, 609.434875,1729.022583,12.078809))
			{
				Dialog
				(
					playerid, DIALOG_CONTENER1, DIALOG_STYLE_MSGBOX,
					"{FFCD00}????? ???????:",
					"- ???????\n"\
					"- ????????? ????????\n"\
					"- ????????? ?? ?????\n"\
					"- ????? ?????\n"\
					"- ?????????? ?? ????\n"\
					"- ????? ??????",
					"???????", "???????"
				);
				
				//return 1;
			}
			if(IsPlayerInRangeOfPoint(playerid, 3.0, 617.468688,1729.151977,12.078809))
			{
				Dialog
				(
					playerid, DIALOG_CONTENER2, DIALOG_STYLE_MSGBOX,
					"{FFCD00}????? ???????:",
					"- ?????? ????????? ???\n"\
					"- ?????? ???????? ?????\n"\
					"- ?????? ??????????\n"\
					"- ?????? '???ù'\n"\
					"- ?????? ???????? ???\n"\
					"- ?????? ????????? ??????????? ??????",
					"???ù???", "???????"
				);
				//return 1;
			}
			if(IsPlayerInRangeOfPoint(playerid, 100.0, 2035.7643,1416.3625,999.7344))
			{
				new bedid = -1;

				for(new i; i < sizeof g_med_bed_pos; i++)
				{
					if(!IsPlayerInRangeOfPoint(playerid, 1.5, g_med_bed_pos[i][0], g_med_bed_pos[i][1], g_med_bed_pos[i][2])) continue;
					bedid = i;
					break;
				}

				if(bedid == -1) return 1;
				else if(GetPlayerData(playerid, P_OCCUPIED_BED) != -1) return SendClientMessage(playerid, 0xCECECEFF, "?? ??? ???ù?? ?????");
				else if(GetPlayerHealthEx(playerid) >= 95.0)
				{
					return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????????? ? ???????");
				}
				else if(g_med_bed_used[bedid]) return SendClientMessage(playerid, 0xCECECEFF, "??? ????? ???ù??");

				else
				{
					SetPlayerData(playerid, P_OCCUPIED_BED, bedid);

					g_med_bed_used[bedid] = true;

					new fmt_msg[200];

					format(fmt_msg, sizeof fmt_msg, "{ffff00}´ ???ù??ù ?????????ù ????? ª\n{ffff00}|{ffffff}????? ?????: %d\n{ffffff}???????: {ffff00} %s\n{ffffff}????????? ????? ??ù ?????????????ù\n? ?????????? ??????", bedid + 1, GetPlayerNameEx(playerid));
					UpdateDynamic3DTextLabelText(g_med_bed_label[bedid], 0xFFFFFFEE, fmt_msg);

					format(fmt_msg, sizeof fmt_msg, "?? ???ù?? ????? ?%d. ? ??????????? ?? ?????ù??ù ???????ù ??????? ????? ???ù?? ????ù", bedid + 1);
					SendClientMessage(playerid, 0x66CC00FF, fmt_msg);

					SendClientMessage(playerid, -1, "????? ?????????ù ????????? ? ????? ??? ??????? ?? ??????? ????????");
				}
			}
			if(GetPlayerInHouse(playerid) != -1)
			{
				new houseid = GetPlayerInHouse(playerid);
				if(GetHouseData(houseid, H_IMPROVEMENTS) >= 1)
				{
					ExitPlayerFromHouse(playerid, 1.1);
				}
			}
			if(GetPlayerData(playerid, P_IN_HOTEL_ROOM) != -1)
			{
				ExitPlayerFromHotelRoom(playerid);
			}
		}
		if(PRESSED(KEY_HANDBRAKE | KEY_WALK))
		{
			new targetid = GetPlayerTargetPlayer(playerid);
			//new targetid = playerid;

			if(targetid != INVALID_PLAYER_ID && !GetPlayerWeapon(playerid))
			{
				SetPlayerData(playerid, P_TARGET_ID, targetid);

				new fmt_str[64];
				format(fmt_str, sizeof fmt_str, "{FFCD00}???????ù (%s)", GetPlayerNameEx(targetid));

				Dialog
				(
					playerid, DIALOG_ACTION, DIALOG_STYLE_LIST,
					fmt_str,
					"1. ???????????\n\
					2. ???????? ???????\n\
					3. ???????? ????????\n\
					4. ???????? ??????",
					"???????", "???????"
				);
			}
		}
		if(PRESSED(KEY_HANDBRAKE))
		{
			if(GetPVarInt(playerid, "have_jerrican") == 1 && GetPlayerSpeed(playerid) == 0.0)
			{
				new vehicleid = GetNearestVehicleID(playerid, 2.3);
				if(vehicleid != INVALID_VEHICLE_ID)
				{
					SetPVarInt(playerid, "jerrican_fill_car", vehicleid);

					Dialog
					(
						playerid, DIALOG_JERRICAN_FILL_CAR, DIALOG_STYLE_MSGBOX,
						"{6699FF}????????",
						"{FFFFFF}?? ?????? ????????? ???? ????????? ? ?????????",
						"??", "???"
					);
				}
			}
		}
		if(PRESSED(KEY_CTRL_BACK | KEY_HANDBRAKE))
		{
			if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
			{
				callcmd::car(playerid, "");
			}
		}
		else if(PRESSED(KEY_CTRL_BACK))
		{
			CallLocalFunction("cmd_trunk", "i", playerid);
		}
	}
	return 1;
}


public OnRconLoginAttempt(ip[], password[], success)
{
	return 1;
}

public OnPlayerUpdate(playerid)
{
	FixBugMoneyMinus(playerid);
	SetPlayerData(playerid, P_AFK_TIME, 0);

	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
    {
        new vehicleid = GetPlayerVehicleID(playerid);
        vInfo[vehicleid][vFuel] = GetVehicleData(vehicleid, V_FUEL);
        vInfo[vehicleid][vMileage] = GetVehicleData(vehicleid, V_MILEAGE);
        SetVehicleSpeedometerInfo(vehicleid, vInfo[vehicleid][vFuel], vInfo[vehicleid][vMileage]);
    }

		if(GetPVarInt(playerid, "agm") == 1)
    {
        new Float:hp;
        GetPlayerHealth(playerid, hp);
        if(hp < 100.0)
        {
            SetPlayerHealth(playerid, 100.0);
        }
    }
	
	    if(GetPVarInt(playerid, "agm") == 1)
    {
        new Float:vx, Float:vy, Float:vz;
        GetPlayerVelocity(playerid, vx, vy, vz);

        if(vz < -0.9)
        {
            new Float:x, Float:y, Float:z;
            GetPlayerPos(playerid, x, y, z);
            SetPlayerPos(playerid, x, y, z + 2.0); // ????????? ???? ????
            SetPlayerVelocity(playerid, 0.0, 0.0, 0.0); // ????? ????????
        }
    }
    
    static lastCheck[MAX_PLAYERS];
    if(gettime() - lastCheck[playerid] < 1) return 1;
    lastCheck[playerid] = gettime();

    new bool:currentlyInGreenZone = false;

    // ????????? ??????????? ??? (????????)
    new vw = GetPlayerVirtualWorld(playerid);
    if(vw == 1) // ???? ????? ? ????????? ? VW 1
    {
        currentlyInGreenZone = true;
    }
    else
    {
        for(new i = 0; i < sizeof(gGreenZoneAreas); i++)
        {
            if(IsPlayerInRangeOfPoint(playerid, 40.0, gGreenZoneAreas[i][0], gGreenZoneAreas[i][1], gGreenZoneAreas[i][2]))
            {
                currentlyInGreenZone = true;
                break;
            }
        }
    }
    if(currentlyInGreenZone != gPlayerInGreenZone[playerid])
    {
        gPlayerInGreenZone[playerid] = currentlyInGreenZone;
        SetGreenZoneForPlayer(playerid, currentlyInGreenZone);
    }
    

	new string[50];
	new string2[50];

	format(string, sizeof(string), "X%d", Config[sDonPower]);
	format(string2, sizeof(string2), "%d/1000",Iter_Count(Player));
	PlayerTextDrawSetString(playerid, logo_PTD[playerid][0], string);
	PlayerTextDrawSetString(playerid, logo_PTD[playerid][1], string2);
	
	if(GetPVarInt(playerid, "player_in_ammo_cp") == 1)
{
    if(!IsPlayerInRangeOfPoint(playerid, 2.0, 1561.954833,1643.207153,15.971530)) // ?????????? ??????
    {
        SetPVarInt(playerid, "player_in_ammo_cp", 0);
    }
}

	if(IsPlayerDriver(playerid))
	{
		new keys, gas_brake, left_right;

		GetPlayerKeys(playerid, keys, gas_brake, left_right);

		// SendClientMessage(playerid, -1, IntToString(gas_brake));

		new pedal_type = PEDAL_TYPE_NONE;

		if((keys & KEY_SPRINT) && !(keys & KEY_JUMP || keys & KEY_HANDBRAKE))
			pedal_type = PEDAL_TYPE_GAS;

		else if(keys & KEY_JUMP && !(keys & KEY_SPRINT || keys & KEY_HANDBRAKE))
			pedal_type = PEDAL_TYPE_BRAKE;

		player_press_pedal[playerid] = pedal_type;
	}

	if(GetPlayerTempJobCheckAnim(playerid))
	{
		new anim_index = GetPlayerAnimationIndex(playerid);

		switch(GetPlayerTempJob(playerid))
		{
			case TEMP_JOB_LOADER:
			{
				if(!GetPlayerSex(playerid))
				{
					if(!(anim_index == 259 || anim_index == 1189 || anim_index == 1224))
					{
						anim_index = -1;
					}
				}
				else
				{
					if(!(anim_index == 259 || anim_index == 260 || anim_index == 1275 || anim_index == 1276 || anim_index == 1289))
					{
						anim_index = -1;
					}
				}

				if(anim_index == -1)
				{
					SetPlayerTempJobCheckAnim(playerid, false);
					SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LOADER_DROP_LOAD);
				}
			}
			case TEMP_JOB_MINER:
			{
				if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_MINER_UNLOAD)
				{
					if(!(anim_index == 616 || anim_index == 1189 || anim_index == 1224))
						SetPlayerTempJobState(playerid, TEMP_JOB_STATE_MINER_DROP_LOAD);
				}
			}
			case TEMP_JOB_FACTORY:
			{
				if(!GetPlayerSex(playerid))
				{
					if(!(anim_index == 259 || anim_index == 949 || anim_index == 1189 || anim_index == 1224 || anim_index == 1257 || anim_index == 1269))
					{
						anim_index = -1;
					}
				}
				else
				{
					if(!(anim_index == 259 || anim_index == 1196 || anim_index == 1275 || anim_index == 1276 || anim_index == 1269 || anim_index == 1283))
					{
						anim_index = -1;
					}
				}

				if(anim_index == -1)
				{
					SetPlayerTempJobCheckAnim(playerid, false);
					SetPlayerTempJobState(playerid, TEMP_JOB_STATE_FACTORY_DROP_P);
				}
			}
			case TEMP_JOB_LUMBERJACK:
			{
				if(!(anim_index == 1189 || anim_index == 1224 || anim_index == 260 || anim_index == 1275 || anim_index == 1276))
				{
					anim_index = -1;
				}

				if(anim_index == -1)
					SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LUMBERJACK_DROP);
			}
			default:
			{
				SetPlayerTempJobCheckAnim(playerid, false);
			}
		}
	}
	if(GetPVarInt(playerid, "test") == 1)
	{
		new fmt_str[64];

		format(fmt_str, sizeof fmt_str, "a_index: %d", GetPlayerAnimationIndex(playerid));
		SendClientMessage(playerid, 0xCECECEFF, fmt_str);
	}

	if(GetPlayerWeaponState(playerid) == 2) SetPlayerData(playerid, P_WEAPON_RELOADING, false);
	if(GetPlayerWeaponState(playerid) == 3 && !GetPlayerData(playerid, P_WEAPON_RELOADING))
	{
		SetPlayerData(playerid, P_WEAPON_RELOADING, true);

		switch(GetPlayerWeapon(playerid))
		{
			case 22:
			{
				if(GetPlayerData(playerid, P_SKILL_COLT) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][0]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[0] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][0] = 0;

						AddPlayerData(playerid, P_SKILL_COLT, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_colt", GetPlayerData(playerid, P_SKILL_COLT));

						SetPlayerSkillLevel(playerid, 0, GetPlayerData(playerid, P_SKILL_COLT) * 10);
					}
				}
			}
			case 23:
			{
				if(GetPlayerData(playerid, P_SKILL_SDPISTOL) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][1]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[1] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][1] = 0;

						AddPlayerData(playerid, P_SKILL_SDPISTOL, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_sdpistol", GetPlayerData(playerid, P_SKILL_SDPISTOL));

						SetPlayerSkillLevel(playerid, 1, GetPlayerData(playerid, P_SKILL_SDPISTOL) * 10);
					}
				}
			}
			case 24:
			{
				if(GetPlayerData(playerid, P_SKILL_DEAGLE) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][2]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[2] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][2] = 0;

						AddPlayerData(playerid, P_SKILL_DEAGLE, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_deagle", GetPlayerData(playerid, P_SKILL_DEAGLE));

						SetPlayerSkillLevel(playerid, 2, GetPlayerData(playerid, P_SKILL_DEAGLE) * 10);
					}
				}
			}
			case 25:
			{
				if(GetPlayerData(playerid, P_SKILL_SHOTGUN) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][3]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[3] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][3] = 0;

						AddPlayerData(playerid, P_SKILL_SHOTGUN, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_shotgun", GetPlayerData(playerid, P_SKILL_SHOTGUN));

						SetPlayerSkillLevel(playerid, 3, GetPlayerData(playerid, P_SKILL_SHOTGUN) * 10);
					}
				}
			}
			case 29:
			{
				if(GetPlayerData(playerid, P_SKILL_MP5) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][4]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[4] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][4] = 0;

						AddPlayerData(playerid, P_SKILL_MP5, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_mp5", GetPlayerData(playerid, P_SKILL_MP5));

						SetPlayerSkillLevel(playerid, 7, GetPlayerData(playerid, P_SKILL_MP5) * 10);
					}
				}
			}
			case 30:
			{
				if(GetPlayerData(playerid, P_SKILL_AK47) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][5]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[5] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][5] = 0;

						AddPlayerData(playerid, P_SKILL_AK47, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_ak47", GetPlayerData(playerid, P_SKILL_AK47));

						SetPlayerSkillLevel(playerid, 8, GetPlayerData(playerid, P_SKILL_AK47) * 10);
					}
				}
			}
			case 31:
			{
				if(GetPlayerData(playerid, P_SKILL_M4) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][6]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[6] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][6] = 0;

						AddPlayerData(playerid, P_SKILL_M4, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_m4", GetPlayerData(playerid, P_SKILL_M4));

						SetPlayerSkillLevel(playerid, 9, GetPlayerData(playerid, P_SKILL_M4) * 10);
					}
				}
			}
			case 34:
			{
				if(GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][7]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[7] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][7] = 0;

						AddPlayerData(playerid, P_SKILL_SNIPER_RIFLE, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_sniper_rifle", GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE));

						SetPlayerSkillLevel(playerid, 10, GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE) * 10);
					}
				}
			}
			case 26:
			{
				if(GetPlayerData(playerid, P_SKILL_SAWNOFF) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][8]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[8] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][8] = 0;

						AddPlayerData(playerid, P_SKILL_SAWNOFF, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_sawnoff", GetPlayerData(playerid, P_SKILL_SAWNOFF));

						SetPlayerSkillLevel(playerid, 4, GetPlayerData(playerid, P_SKILL_SAWNOFF) * 10);
					}
				}
			}
			case 27:
			{
				if(GetPlayerData(playerid, P_SKILL_COMBAT_SG) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][9]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[9] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][9] = 0;

						AddPlayerData(playerid, P_SKILL_COMBAT_SG, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_combat_sg", GetPlayerData(playerid, P_SKILL_COMBAT_SG));

						SetPlayerSkillLevel(playerid, 5, GetPlayerData(playerid, P_SKILL_COMBAT_SG) * 10);
					}
				}
			}
			case 28:
			{
				if(GetPlayerData(playerid, P_SKILL_MICRO_UZI) < 100)
				{
					g_player[playerid][P_RELOADINGS_COUNT][10]++;

					if(GetPlayerData(playerid, P_RELOADINGS_COUNT)[10] == 3)
					{
						g_player[playerid][P_RELOADINGS_COUNT][10] = 0;

						AddPlayerData(playerid, P_SKILL_MICRO_UZI, +, 1);
						UpdatePlayerDatabaseInt(playerid, "skill_micro_uzi", GetPlayerData(playerid, P_SKILL_MICRO_UZI));

						SetPlayerSkillLevel(playerid, 6, GetPlayerData(playerid, P_SKILL_MICRO_UZI) * 10);
					}
				}
			}
		}
	}
	return 1;
}

public OnPlayerStreamIn(playerid, forplayerid)
{
	return 1;
}

public OnPlayerStreamOut(playerid, forplayerid)
{
	return 1;
}

public OnVehicleStreamIn(vehicleid, forplayerid)
{
    Iter_Add(streamed_players_in_veh[vehicleid], forplayerid);
    Iter_Add(vehicle_in_stream[forplayerid], vehicleid);

    if(vInfo[vehicleid][vEnableNeon])
    {
        SetVehicleNeonForPlayer(forplayerid, vehicleid,
            vInfo[vehicleid][vNeon1],
            vInfo[vehicleid][vNeon2],
            vInfo[vehicleid][vNeon3]
        );
    }

    sc_OnVehicleStreamIn(vehicleid, forplayerid);
    return 1;
}


stock SetVehicleNeon(vehicleid, color1, color2, color3, setvalue=0)
{
    if(setvalue)
    {
        vInfo[vehicleid][vNeon1] = color1;
        vInfo[vehicleid][vNeon2] = color2;
        vInfo[vehicleid][vNeon3] = color3;
        vInfo[vehicleid][vEnableNeon] = 1;

        // ??????ù?? ? ?? ????? mysql_format
        new query[256];
        mysql_format(mysql, query, sizeof(query),
            "UPDATE ownable_cars SET neon1=%d, neon2=%d, neon3=%d, enable_neon=%d WHERE id=%d",
            color1, color2, color3, 1, vehicleid);
        mysql_query(mysql, query, false);
    }

    foreach(new playerid: Player)
        SetVehicleNeonForPlayer(playerid, vehicleid, color1, color2, color3);
}



stock SetVehicleNeonForPlayer(playerid, vehicleid, color1, color2, color3)
{
	new BitStream:bs = BS_New();
	BS_WriteValue(bs, PR_UINT16, vehicleid);
	BS_WriteValue(bs, PR_UINT8, 9);   // ??? ???? (????)

	BS_WriteValue(bs, PR_UINT32, color1);
	BS_WriteValue(bs, PR_UINT32, color2);
	BS_WriteValue(bs, PR_UINT32, color3);

	PR_SendRPC(bs, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bs);
}

CMD:neon(playerid, params[])
{
    new vehicleid = GetPlayerVehicleID(playerid);
    if(!vehicleid) return SendClientMessage(playerid, -1, !"?? ?? ? ??????!");

    // ??????? ???? (ARGB: FF = ?????, FF0000 = ???????)
    new color = 0xFFFF0000;

    SetVehicleNeon(vehicleid, color, color, color, 1);
    SendClientMessage(playerid, -1, !"??????? ???? ???????!");
    return 1;
}
public OnVehicleStreamOut(vehicleid, forplayerid)
{
	sc_OnVehicleStreamIn(vehicleid, forplayerid);

	Iter_Remove(streamed_players_in_veh[vehicleid], forplayerid);
	Iter_Remove(vehicle_in_stream[forplayerid], vehicleid);
	return 1;
}

public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
if (dialogid == DIALOG_ADMFLY)
	{
		if (!response) return 1;

		new Float:x, Float:y, Float:z;
		GetPlayerPos(playerid, x, y, z);

		switch (listitem)
		{
			case 0: y += 2.0; // ??????
			case 1: y -= 2.0; // ?????
			case 2: x -= 2.0; // ?????
			case 3: x += 2.0; // ??????
			case 4:
			{
				TogglePlayerControllable(playerid, true); // ??????????
				SendClientMessage(playerid, COLOR_GREEN, "?? ????? ?? ?????? ??????.");
				return 1;
			}
		}

		SetPlayerPos(playerid, x, y, z);
		ShowPlayerDialog(playerid, DIALOG_ADMFLY, DIALOG_STYLE_LIST, "????? ??????",
			"??????\n?????\n?????\n??????\n????? ?? ??????", "???????", "???????");
	}
if(dialogid == DIALOG_VEHICLE_NUMBER && response)
    {
        new vehicleid = GetPlayerVehicleID(playerid);
        if(!IsValidVehicle(vehicleid))
            return SendClientMessage(playerid, 0xFFFF0000, "?? ?????? ?????????ù ? ???????????? ????????!");

        new type, number[8], region[4];
        if(sscanf(inputtext, "ds[8]s[4]", type, number, region))
            return SendClientMessage(playerid, 0xFFFF0000, "???????? ??????! ???????????: ù?? ????? ??????");
        
        SetVehicleNumberPlateEx(vehicleid, type, number, region);
        SendClientMessage(playerid, 0x00FF00AA, "???????? ???? ??????? ??????????!");
    }
if(dialogid == DIALOG_KPP_ARMY && response)
    {
  	  if(kpp_hacked)
        {
            return 1;
        }
		if(listitem == 0) // ????????
        {
            if(gateOpened[3])
            {
                gateOpened[3] = false;
                MoveObject(vorotamo1, 1909.95, 1725.28, 15.6666, 3.0, 0.0, 0.0, 0.0);
                
                new fmt_msg[144];

				format(fmt_msg, sizeof fmt_msg, "[R] %s %s ?????? ???????? ?? ?????????? ?????????? ??????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
			 }
            else
            {
                gateOpened[3] = true;
                MoveObject(vorotamo1, 1909.95, 1725.28, 15.6666, 3.0, -90.0, 0.0, 0.0);
              
              new fmt_msg[144];
             
              format(fmt_msg, sizeof fmt_msg, "[R] %s %s ?????? ???????? ?? ?????????? ?????????? ??????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
              
                SetTimerEx("CloseGate", 10000, false, "i", 3);
            }
        }
        else if(listitem == 1) // ??????
        {
            if(gateOpened[4])
            {
                gateOpened[4] = false;
                MoveObject(vorotamo, 1891.1486, 1721.5555, 16.4444, 3.0, 0.0, 0.0, 0.0);
              
               new fmt_msg[144];
             
               format(fmt_msg, sizeof fmt_msg, "[R] %s %s ?????? ?????? ?? ?????????? ?????????? ??????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
            }
            else
            {
                gateOpened[4] = true;
                MoveObject(vorotamo, 1891.1486, 1714.2531, 16.4444, 3.0);
              
              new fmt_msg[144];
             
              format(fmt_msg, sizeof fmt_msg, "[R] %s %s ?????? ?????? ?? ?????????? ?????????? ??????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
              
                SetTimerEx("CloseGate", 10000, false, "i", 4);
            }
        }
        ShowArmyKPPDialog(playerid);
    }
	if (dialogid == DIALOG_POST) 
	{
       new postid = GetPVarInt(playerid, "CurrentPostID");

        switch (listitem) 
		{
            case 0: ShowPostJournal(playerid, postid);
            case 1: TryJoinPost(playerid, postid);
            case 2: LeavePost(playerid, postid);
        }
        return 1;
    }
    if(dialogid == DIALOG_KPP_HACK && response && listitem == 0)
    {
        StartKPPHack(playerid);
    }
	if(dialogid == 19999)
	{
	    if(response)
	    {
	        if(pBJInfo[playerid][OnLobby])
	        {
 				new str[128];
				new bet;
	            if(sscanf(inputtext,"d",bet))
	            {
	                SCM(playerid, CLRED, "| "CW"??????? ?????? ?? ??????? ?????? ???????!");
	                SPD(playerid, 19999, DSI, "{00FFFF}BlackJack", "??????? ????? ?? ??????? ?????? ???????: (?????????? 1000 ??????, ??????????? 500000 ??????.)", "??????", "???????");
	                return 0;
	            }
	            if(!(999 < bet < 5000001))
	            {
	                SCM(playerid, CLRED, "| "CW"?????????? 1000 ??????, ??????????? 500000 ??????.");
	                SPD(playerid, 19999, DSI, "{00FFFF}BlackJack", "??????? ????? ?? ??????? ?????? ???????: (?????????? 1000 ??????, ??????????? 500000 ??????.)", "??????", "???????");
	                return 0;
	            }
	            if(playermoney(playerid) < bet)
	            {
	                SCM(playerid, CLRED, "| "CW"? ??? ???????????? ???????.");
	                SPD(playerid, 19999, DSI, "{00FFFF}BlackJack", "??????? ????? ?? ??????? ?????? ???????: (?????????? 1000 ??????, ??????????? 500000 ??????.)", "??????", "???????");
	                return 0;
	            }

				format(str, sizeof str, "%d ??b", bet);
				PlayerTextDrawShow(playerid, bj_bet[playerid]);
				PlayerTextDrawSetString(playerid, bj_bet[playerid], str);
				pBJInfo[playerid][pBJBet] = bet;
				//SCM(playerid, CYELLOW, "| "CW"?? ????????? ??????.");

				new lobby = pBJInfo[playerid][pBJLobby];

				new str2[] = "READY";
				utf8_to_cp1251(str2);
				TextDrawSetString(bj_table_ready[lobby][pBJInfo[playerid][pBJTable]], str2);
				TextDrawColor(bj_table_ready[lobby][pBJInfo[playerid][pBJTable]], 0x00FF00FF);

				if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_table_ready[lobby][pBJInfo[playerid][pBJTable]]);
				if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_table_ready[lobby][pBJInfo[playerid][pBJTable]]);
				if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_table_ready[lobby][pBJInfo[playerid][pBJTable]]);
				if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_table_ready[lobby][pBJInfo[playerid][pBJTable]]);

				TextDrawShowForPlayer(playerid, bj_text_bet[0]);
				TextDrawShowForPlayer(playerid, bj_text_bet[1]);
				SetTimerEx("TimerHideBetText", 3000, false, "d", playerid);
			}
		}
	}
if(dialogid == 8977) //
{
        if(response)
        {
        player_sell_ownable_car[playerid] = false;
        
          new rand = random(sizeof(gViezd));
		  new vehicleID = GetPlayerVehicleID(playerid);

          SetPlayerVirtualWorld(playerid, 0);
          SetPlayerInterior(playerid, 0);
     
          new veh = GetPlayerOwnableCar(playerid);
          SetVehiclePos(veh, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(veh, 0.5455);
          SetVehicleVirtualWorld(veh, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(veh);
          
          PutPlayerInVehicle(playerid, veh, 0);
          SetCameraBehindPlayer(playerid);
          DestroyVehicleLabel(veh);
          
          ownable_car_sell_status[veh] = false;
          return true;
        }
        else return 1;
}
    
if(dialogid == DIALOG_FINISH_EVENT && response)
{
    new winnerid = strval(inputtext);
    new query[256];

    if(!IsPlayerConnected(winnerid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "??????: ????? ? ????? ID ?? ??????.");
        return 1;
    }

    mp[MP_CREATE] = 0;

    format(query, sizeof query, "{FFCC33}????????????? {d58300}%s[%d] {FFCC33}???????? ???????ù??? ??? ????????? {d58300}\"%s\".", 
        GetPlayerNameEx(playerid), playerid, mp[MP_NAME]);
    SendClientMessageToAll(0xFFCC33FF, query);

    format(query, sizeof query, "{FFCC33}????? {d58300}%s[%d] {FFCC33}??????? ?????????????? ? ??????? {d58300}%d {FFCC33}??????? ??????.", 
        GetPlayerNameEx(winnerid), winnerid, mp[MP_PRIZE]);
    SendClientMessageToAll(0xFFCC33FF, query);

    GivePlayerMoney(winnerid, mp[MP_PRIZE]);
}
    
if(dialogid == 8968) //
{
        if(response)
        {
                if(!strlen(inputtext)) // ???? ???????? ??????ù??, ???? ????? ?????? ?? ???? ? ????, ????? ????????
                {
                        ShowPlayerDialog(playerid,8968,DIALOG_STYLE_INPUT,"{993333}"SERVER_NAME"{FFFFFF} | ?????????? ? ??????? ??????????","??? ?????????? ?????? ????, ?? ??????? ?? ??????\n??????? ???? ????????? ? ?????????? ???? ????:","??????","??????");
                        return 1;
                }
  if(strval(inputtext))  // ??????ù?? ?????? ??????? ?? ??????????? ?????
                {
                         new nrbpack = strval(inputtext); // ???? ?? ?? ??????? ?????????? ? ??????????? ?????? ? ????? ? ????????????
                         new veh = GetPlayerOwnableCar(playerid);
                         
                         for(new i = 0; i < MAX_PLAYERS; i++)
		  {
          if(IsPlayerInVehicle(i, veh))

          SetPlayerVirtualWorld(i, 101);
          SetPlayerInterior(i, 1);
          SetCameraBehindPlayer(i);
          }
                         
          new rand = random(sizeof(gVezd));
          SetVehiclePos(veh, gVezd[rand][0],gVezd[rand][1],gVezd[rand][2]);
          SetVehicleZAngle(veh, gVezd[rand][3]);
          SetVehicleVirtualWorld(veh, 101);
          SetPlayerVirtualWorld(playerid, 101);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(veh,1);
          SetPlayerInterior(playerid,1);
       
         ToggleLock(playerid, veh);
         player_sell_ownable_car[playerid] = true;
       
         new Float: x, Float: y, Float: z;
         GetVehiclePos(veh, x, y, z);
         new modelid = GetVehicleModel(veh);
         SetVehicleZAngle(veh, gVezd[rand][3]);
       
          new info[354];
          
          if(!GetPlayerPhone(playerid))
          {
            format(info, sizeof info, "{FFFFFF}%s\n{2BB1FF}ù???????? ??????:{FFFFFF} %s\n{2BB1FF}???? ???????:{FFFFFF} %d ???\n{2BB1FF}???? ????:{FFFFFF} %d ???\n\n??ù ??????? ??????? {ffff00}/buycar", GetVehicleName(veh), GetPlayerNameEx(playerid), nrbpack, GetVehicleInfo(modelid - 400, VI_PRICE));
            CreateVehicleLabel(veh, info, 0x2BB1FFFF, x, y, z + 1, 5.0);
            }
            else {
          format(info, sizeof info, "{FFFFFF}%s\n{2BB1FF}ù???????? ??????:{FFFFFF} %s\n{2BB1FF}????? ???????? ??????:{FFFFFF} %d\n{2BB1FF}???? ???????:{FFFFFF} %d ???\n{2BB1FF}???? ????:{FFFFFF} %d ???\n\n??ù ??????? ??????? {ffff00}/buycar", GetVehicleName(veh), GetPlayerNameEx(playerid), GetPlayerPhone(playerid), nrbpack, GetVehicleInfo(modelid - 400, VI_PRICE));
            CreateVehicleLabel(veh, info, 0x2BB1FFFF, x, y, z + 1, 5.0);
            }
            
            SetOwnableCarData(veh, OC_LAST_PRICE, nrbpack);
            SetOwnableCarData(veh, OC_LAST_OWNER_GAME_ID, playerid);
            
            SetTimerEx("tp_buy", 500, false, "d", playerid);
		
		   ownable_car_sell_status[veh] = true;
		
		SendClientMessage(playerid, 0xCECECEFF, "{ffff00}| {ffffff}????? ?????? ????????? ? ??????? ??????? {ffff00}/unsellmycar");
		SendClientMessage(playerid, 0xCECECEFF, "{ffff00}| {ffffff}????? ??????? ????????? ?????? ??????? {ffff00}/sellmycar");
			
          return true;
                }
                 else ShowPlayerDialog(playerid,8968,DIALOG_STYLE_INPUT,"{993333}"SERVER_NAME"{FFFFFF} | ?????????? ? ??????? ??????????","??? ?????????? ?????? ????, ?? ??????? ?? ??????\n??????? ???? ????????? ? ?????????? ???? ????:","??????","??????");								
        }
        else
        {
                // ??? ???? ?? ????? ?? ?????? 2
                SendClientMessage(playerid, 0xCECECEFF, "?? ?????????? ?? ???????");
        }
}

if(dialogid == 1098)
	{
 	if(!response) return true;
 	if(GetPlayerAdminEx(playerid) < 1) return 1;
  	new helpadmcmd[1530];
		    switch(listitem)
		    {
		        case 0:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/ans  ???????? ?? ??????\n{FF6347}?2 {ffffff}/sp  ?????? ?? ???????\n{FF6347}?3 {ffffff}/spoff  ?????????? ?????? ?? ???????\n{FF6347}?4 {ffffff}/slap  ??????????\n{FF6347}?5 {ffffff}/a  ??? ?????????????\n{FF6347}?6 {ffffff}/agm  ???????????????? ??????????\n{FF6347}?7 {ffffff}/askin  ???? ??????????????\n{FF6347}?8 {ffffff}/tp  ???? ?????????\n{FF6347}?9 {ffffff}/pm  ???????? ??????\n{FF6347}?10 {ffffff}/rep  ???????? ?? ??????\n{FF6347}?11 {ffffff}/astats  ?????????? ??????????????\n{FF6347}?12 {ffffff}/reklama  ???????????????? ?????? ? ????? X2\n{FF6347}?13 {ffffff}/freeze   ??????????\n{FF6347}?14 {ffffff}/unfreeze  ???????????");
		        }
		        case 1:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/weap  ?????? ?????ù ? ??????\n{FF6347}?2 {ffffff}/stats  ?????????? ??????\n{FF6347}?3 {ffffff}/sethp  ?????? ????????\n{FF6347}?4 {ffffff}/settime  ?????????? ????ù ?? ???????\n{FF6347}?5 {ffffff}/setweather   ?????????? ?????? ?? ???????\n{FF6347}?6 {ffffff}/event  ??????? ???????ù??ù\n{FF6347}?7 {ffffff}/eventpriz  ?????? ???? ?????????? ? ???????ù???");
		        }
		        case 2:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/kick  ???????\n{FF6347}?2 {ffffff}/skick  ???? ???????\n{FF6347}?3 {ffffff}/ears  ???????? ????????? SMS\n{FF6347}?4 {ffffff}/goto  ?? ? ??????\n{FF6347}?5 {ffffff}/spawn  ??????????");
		        }
		        case 3:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/mute  ?????? ???\n{FF6347}?2 {ffffff}/unmute  ??ù?? ???\n{FF6347}?3 {ffffff}/veh  ?????????? ?????????\n{FF6347}?4 {ffffff}/delveh  ??????? ????????? ?????????\n{FF6347}?5 {ffffff}/delvehall  ??????? ???? ????????? ????????? ?? ???????\n{FF6347}?6 {ffffff}/namelist  ???????? ??ù??? ?? ????? ????\n{FF6347}?7 {ffffff}/offban  ?????? ?????????? ? ????????\n{FF6347}?8 {ffffff}/ban  ?????? ??????????\n{FF6347}?9 {ffffff}/unban  ??ù?? ??????????\n{FF6347}?10 {ffffff}/jail  ???????? ? ????????\n{FF6347}?11 {ffffff}/unjail  ????????? ? ?????????\n{FF6347}?12 {ffffff}/get  ?????????ù ?? ????????\n{FF6347}?13 {ffffff}/uval  ??????? ?? ???????????");
		        }
		        case 4:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/spcars  ?????????? ???? ????????? ?? ???????\n{FF6347}?2 {ffffff}/templeader  ??????? ???ù ????????? ??????? ???????????\n{FF6347}?3 {ffffff}/skick  ???? ???????\n{FF6347}?4 {ffffff}/getv  ??????????????? ????????? ?????? ? ??????\n{FF6347}?5 {ffffff}/vget  ??????????????? ????????? ? ????\n{FF6347}?6 {ffffff}/money  ??????????ù ?????? ??????");
		        }
		        case 5:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/warn  ?????? ????\n{FF6347}?2 {ffffff}/unwarn  ??ù?? ????\n{FF6347}?3 {ffffff}/setleader  ?????? ????????? ???????????\n{FF6347}?4 {ffffff}/gethere  ??????????????? ? ????\n{FF6347}?5 {ffffff}/setfuel  ????????? ?????????\n{FF6347}?6 {ffffff}/msg  ???????? ? ????? ??? ???????");
		        }
		        case 6:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/givegun  ?????? ??????\n{FF6347}?2 {ffffff}/ahelper  ???? ?????? ??ù ??????????????\n{FF6347}?3 {ffffff}/skin  ?????? ????????? ????\n{FF6347}?4 {ffffff}/house  ????????????????ù ? ????\n{FF6347}?5 {ffffff}/biz  ????????????????ù ? ???????\n{FF6347}?6 {ffffff}/fuelstation  ????????????????ù ? ???\n{FF6347}?7 {ffffff}/cc  ???????? ????? ??? ???????\n{FF6347}?8 {ffffff}/vtp  ????????????????ù ? ??????????\n{FF6347}?9 {ffffff}/fly  ???. fly ?????\n{FF6347}?10 {ffffff}/get  ?????????ù ????????\n{FF6347}?11 {ffffff}/lip  ?????? ????????? ? ????? IP");
		        }
		        case 7:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/gzcolor  ????????? ?????????? ?????");
		        }
		        case 8:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/setskin  ?????? ???? ????????\n{FF6347}?2 {ffffff}/getname");
		        }
		        case 9:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/fullprods  ???????? ???????? ???????\n{FF6347}?2 {ffffff}/fullfuels  ?????? ???? ??????\n{FF6347}?3 {ffffff}/setadmin  ?????? ????? ??????????????\n{FF6347}?4 {ffffff}/deladmin  ??????? ????? ??????????????\n{FF6347}?5 {ffffff}/sethelper  ?????? ????? ????? ??????????\n{FF6347}?6 {ffffff}/delhelper  ??????? ????? ????? ??????????\n{FF6347}?7 {ffffff}/setyt  ?????? ????? ???????\n{FF6347}?8 {ffffff}/delyt  ??????? ????? ???????\n{FF6347}?9 {ffffff}/avig  ?????? ?????-???????\n{FF6347}?10 {ffffff}/unavig  ??ù?? ?????-???????\n{FF6347}?11 {ffffff}/admup  ???????? ???? ??????????????\n{FF6347}?12 {ffffff}/admdown  ???????? ???? ??????????????\n{FF6347}?13 {ffffff}/prefix  ?????????? ??????? ??????????????\n{FF6347}?14 {ffffff}/banip  ????????????? IP-?????\n{FF6347}?15 {ffffff}/unbanip  ?????????????? IP-?????\n{FF6347}?16 {ffffff}/helpnabor  ???????????????? ?????? ? ?????? ?? ??????? ?????????(????? ???????????)\n{FF6347}?17 {ffffff}/admnabor  ???????????????? ?????? ? ?????? ?? ???????????????");
		        }
		        case 10:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/createpromo  ??????? ??????? ????????\n{FF6347}?2 {ffffff}/createytpromo  ??????? ?????????? ????????\n{FF6347}?3 {ffffff}/agivelic  ?????? ????????\n{FF6347}?4 {ffffff}/setskills  ?????? ????? ?????ù");
		        }
		        case 11:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/givecash  ?????? ??????????? ??????\n{FF6347}?2 {ffffff}/givedonate  ?????? ?????\n{FF6347}?3 {ffffff}/givevip  ?????? ???-?????\n{FF6347}?4 {ffffff}/getlog  ?????????? ???? ??????????????\n{FF6347}?5 {ffffff}/reset_cash  ???????? ??????????? ??????\n{FF6347}?6 {ffffff}/reset_donate  ???????? ?????");
		        }
		        case 12:
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/apanel  ?????? ?????????ù\n{FF6347}?2 {ffffff}/restart  ????????????? ??????\n{FF6347}?3 {ffffff}/inforestart  ???????????????? ?????? ? ???????? ???????\n{FF6347}?4 {ffffff}/addhouse  ??????? ???\n{FF6347}?5 {ffffff}/addbusiness  ??????? ??????\n{FF6347}?6 {ffffff}/addpadik  ??????? ???????\n{FF6347}?7 {ffffff}/asellhouse  ??????? ??? ???????????\n{FF6347}?8 {ffffff}/asellbusiness  ??????? ?????? ???????????\n{FF6347}?9 {ffffff}/asellfuel  ??????? ???????? ???????????\n{FF6347}?10 {ffffff}/wlist  ?????? ??????????? ?????ù\n{FF6347}?11 {ffffff}/givebombe  ?????? ??????? ??? ?????\n{FF6347}?12 {ffffff}/sendcmd  ?????? ?????????????? ?????? ? ???????\n{FF6347}?13 {ffffff}/delacc  ??????? ???????\n{FF6347}?14 {ffffff}/givecar  ?????? ?????? ?????????\n{FF6347}?15 {ffffff}/add_cont  ????????? ?????????? ???????????\n{FF6347}?16 {ffffff}/addfuelst  ??????? ????????\n{FF6347}?17 {ffffff}/payday  ??????? ?????? ?? ???????\n{FF6347}?18 {ffffff}/sellproperty  ??????? ??????????? ????????? ?????????\n{FF6347}?19 {ffffff}/crash  ????????\n{FF6347}?20 {ffffff}/sptext  ???????? ? ??? ?? ???????? ??????");
		        }
		        case 13:		
		        {
		            strcat(helpadmcmd, "{FF6347}?1 {ffffff}/sliv  ???????? ????????????? ?? ????\n{FF6347}?2 {ffffff}/cheat  ???????? ????????????? ?? ?????????? ??\n{FF6347}?3 {ffffff}/sk  ???????? ? ???????? ?? SpawnKill\n{FF6347}?4 {ffffff}/caps  ?????? ??? ?? CapsLook\n{FF6347}?5 {ffffff}/osk  ?????? ??? ?? ???????????\n{FF6347}?6 {ffffff}/oskadm  ?????? ??? ?? ??????????? ?????????????\n{FF6347}?7 {ffffff}/goss  ?????? ??? ?? ???????? ?? ?????????? ???????????\n{FF6347}?8 {ffffff}/flood  ?????? ??? ?? ????\n{FF6347}?9 {ffffff}/fdrive  ???????? ? ???????? ?? NonRp ????\n{FF6347}?10 {ffffff}/ndrive  ???????? ? ???????? ?? NonRp ????????\n{FF6347}?11 {ffffff}/mg  ?????? ??? ?? MetaGaming (MG)\n{FF6347}?12 {ffffff}/pg  ???????? ? ???????? ?? PowerGaming (PG)\n{FF6347}?13 {ffffff}/db  ???????? ? ???????? ?? Drive By\n{FF6347}?14 {ffffff}/dm  ???????? ? ???????? ?? DeathMach (DM)\n{FF6347}?15 {ffffff}/ppv  ????????????? ?? ??????/???????/???????\n{FF6347}?16 {ffffff}/bot  ???????? ????????????? ?? ??ù");		
		        }
	    	}
   			ShowPlayerDialog(playerid, 0, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{ffffff} | ??????? ?????????????,", helpadmcmd, "???????", "");
   			return true;
			}
			
			 if(dialogid == DIALOG_MCHS_LIST)
{
    if(response)
    {
         SetPlayerCheckpoint(playerid, 2446.472412,-204.271026,2.138540, 13.0);
    }
}

if(dialogid == DIALOG_MCHS_AVTO)
{
    if(response)
    {
         CreateVehicle (407, -2544.760253,-298.006347,27.252866,272.136657, 3, 3, -1, 1);
         SendClientMessage(playerid, -1, "{ffff00}|{FFFFFF}??????????? {ffff00}/meslist {ffffff}???-?? ?????????? ???????? ??????.");
    }
}

if(dialogid == DIALOG_SELLCARMY)
{
new offer_id = GetPlayerOfferInfo(playerid, O_INCOMING_PLAYER);
	new offer_type = GetPlayerOfferInfo(playerid, O_INCOMING_TYPE);

	new value_1 = GetPlayerOfferInfo(playerid, O_INCOMING_VALUE)[0];
	new value_2 = GetPlayerOfferInfo(playerid, O_INCOMING_VALUE)[1];
	
if(response)
    {
    new fmt_str[64];
    new index = GetVehicleData(value_2, V_ACTION_ID);

									format(fmt_str, sizeof fmt_str, "UPDATE ownable_cars SET owner_id=%d WHERE id=%d", GetPlayerAccountID(playerid), GetOwnableCarData(value_2, OC_SQL_ID));
									mysql_query(mysql, fmt_str, false);

										GivePlayerMoneyEx(playerid, -value_1, "??????? ???? ? ???", false, true);

										GivePlayerMoneyEx(offer_id, value_1, "??????? ???? ? ???", true, true);
										SetPlayerData(offer_id, P_OWNABLE_CAR, INVALID_VEHICLE_ID);

										SetOwnableCarData(value_2, OC_OWNER_ID, GetPlayerAccountID(playerid));
										SetPlayerData(playerid, P_OWNABLE_CAR, value_2);

										format(fmt_str, sizeof fmt_str, "%s ?????? ??? ???? ????????? ?? %d ???", GetPlayerNameEx(offer_id), value_1);
										SendClientMessage(playerid, 0x66CC00FF, fmt_str);

										SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
										SendClientMessage(playerid, 0xFFFFFFFF, "??? ???? ???????? ????? ?? ??????????. ??????????? {BBBB00}/lock 1");

										format(fmt_str, sizeof fmt_str, "?? ??????? ???? ????????? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), value_1);
										SendClientMessage(offer_id, 0x66CC00FF, fmt_str);
    }
    else return 1;
}
    
if(dialogid == DIALOG_SELLCAR)
{
new vehicleid = GetNearestVehicleID(playerid, 5.0);
new offer_id = GetOwnableCarData(vehicleid, OC_LAST_OWNER_GAME_ID);
new value_1 = GetOwnableCarData(vehicleid, OC_LAST_PRICE);
	
    if(response)
    {
								   new fmt_str[64];
									new index = GetVehicleData(vehicleid, V_ACTION_ID);

									format(fmt_str, sizeof fmt_str, "UPDATE ownable_cars SET owner_id=%d WHERE id=%d", GetPlayerAccountID(playerid), GetOwnableCarData(vehicleid, OC_SQL_ID));
									mysql_query(mysql, fmt_str, false);

										GivePlayerMoneyEx(playerid, -value_1, "??????? ???? ? ???", false, true);

										GivePlayerMoneyEx(offer_id, value_1, "??????? ???? ? ???", true, true);
										SetPlayerData(offer_id, P_OWNABLE_CAR, INVALID_VEHICLE_ID);

										SetOwnableCarData(vehicleid, OC_OWNER_ID, GetPlayerAccountID(playerid));
										SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

										format(fmt_str, sizeof fmt_str, "%s ?????? ??? ???? ????????? ?? %d ???", GetPlayerNameEx(offer_id), value_1);
										SendClientMessage(playerid, 0x66CC00FF, fmt_str);

										SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
										SendClientMessage(playerid, 0xFFFFFFFF, "??? ???? ???????? ????? ?? ??????????. ??????????? {BBBB00}/lock 1");

										format(fmt_str, sizeof fmt_str, "?? ??????? ???? ????????? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), value_1);
										SendClientMessage(offer_id, 0x66CC00FF, fmt_str);
										
										player_sell_ownable_car[playerid] = false;
        
          new rand = random(sizeof(gViezd));

          SetPlayerVirtualWorld(playerid, 0);
          SetPlayerInterior(playerid, 0);
     
          new vehicleid = GetPlayerOwnableCar(playerid);
          SetVehiclePos(vehicleid, gViezd[rand][0],gViezd[rand][1],gViezd[rand][2]);
          SetVehicleZAngle(vehicleid, 0.5455);
          SetVehicleVirtualWorld(vehicleid, 0);
          SetPlayerVirtualWorld(playerid, 0);
          SetCameraBehindPlayer(playerid);
          LinkVehicleToInterior(vehicleid,0);
          SetPlayerInterior(playerid,0);
          DestroyVehicleLabel(vehicleid);
          
          PutPlayerInVehicle(playerid, vehicleid, 0);
          SetCameraBehindPlayer(playerid);
          DestroyVehicleLabel(vehicleid);
          
          ownable_car_sell_status[vehicleid] = false;
          return true;
    }
    else return 1;
}

if(dialogid == 8200)
{
	if (!response) return 1;

	switch (listitem)
	{
		case 0: ShowAdminStatsTotal(playerid);
		case 1: ShowAdminStatsToday(playerid);
	}
}

if(dialogid == DIALOG_MCHS)
{
    if(response)
    {
        SetPlayerSkin(playerid, 23);
        SetPlayerHealth(playerid, 100);
        SetPlayerArmour(playerid, 100);
    }
}
			
			if(dialogid == DIALOG_INVENTORYTEST)
			{
	if(response)
	    {
			switch(listitem)
			    {
			case 0:
			{
			callcmd::healme(playerid, "");
			}
			case 1:
			{
			callcmd::mask(playerid, "");
			}
			}
			}
			}
			
		
			if(dialogid == DIALOG_VODOLAZACTOR)
{
	if(response)
	    {
			switch(listitem)
			    {
			        case 1:
			            {
			                ShowPlayerDialog(playerid, 1562, DIALOG_STYLE_MSGBOX, "????????????", "?? ????????????? ?????? ?????????ù ??????????", "?????", "??????");
							return 1;
			            }
    				case 0:
			            {
							if(vodolazrabota[playerid] == true)
							{
								if(vodolod[playerid] == false)
								{
								    ShowPlayerDialog(playerid, 1561, DIALOG_STYLE_LIST, "???????? ????? ??ù ??????", "??????? ?????", "?????", "??????");
								}
								else return SendClientMessage(playerid, -1, "?? ??? ????????? ?????");
							}
							else return SendClientMessage(playerid, -1, "??ù ?????? ????? ?????????ù ?? ?????? ????????");
			            }
       				case 2:
			            {
			                if(mestolootgo[playerid][0][0] == true)
			                {
			                    ShowPlayerDialog(playerid, 1563, DIALOG_STYLE_LIST, "??????? ????????? ?????????", "?????????? ù???      2498 ??????", "???????", "??????");
							}
							else return 1;
			            }
			    }
	    }
}

if(dialogid == 1562)
	{
	    if(response)
			{
			    new skin;
   				if(vodolazrabota[playerid] == false)
       			{
				vodolazrabota[playerid] = true;
				skin = GetPlayerSkin(playerid);
				SetPlayerSkin(playerid, 5344);
				}
			}
	}
	
	if(dialogid == DIALOG_AF)
{
    if(!response) return 1;
    
    if(listitem == 0)
    {
        new count = 0;
        new formList[3000];
        formList = "";
        
        for(new i = 0; i < MAX_ADMIN_FORMS; i++)
        {
            if(AdminForms[i][form_status] != 0) continue;
            if(AdminForms[i][form_type] == 0) continue;
            
            count++;
            
            new formType[16];
            GetFormTypeName(AdminForms[i][form_type], formType, sizeof(formType));
            
            if(count == 1)
            {
                if(AdminForms[i][form_type] == FORM_BAN)
                {
                    format(formList, sizeof(formList), "%d. %s %s %d. ???????: %s", count, formType, AdminForms[i][form_target_name], AdminForms[i][form_duration], AdminForms[i][form_reason]);
                }
                else if(AdminForms[i][form_type] == FORM_PERMBAN)
                {
                    format(formList, sizeof(formList), "%d. %s %s. ???????: %s", count, formType, AdminForms[i][form_target_name], AdminForms[i][form_reason]);
                }
                else
                {
                    format(formList, sizeof(formList), "%d. %s %s. ???????: %s", count, formType, AdminForms[i][form_target_name], AdminForms[i][form_reason]);
                }
            }
            else
            {
                if(AdminForms[i][form_type] == FORM_BAN)
                {
                    format(formList, sizeof(formList), "%s\n%d. %s %s %d. ???????: %s", formList, count, formType, AdminForms[i][form_target_name], AdminForms[i][form_duration], AdminForms[i][form_reason]);
                }
                else if(AdminForms[i][form_type] == FORM_PERMBAN)
                {
                    format(formList, sizeof(formList), "%s\n%d. %s %s. ???????: %s", formList, count, formType, AdminForms[i][form_target_name], AdminForms[i][form_reason]);
                }
                else
                {
                    format(formList, sizeof(formList), "%s\n%d. %s %s. ???????: %s", formList, count, formType, AdminForms[i][form_target_name], AdminForms[i][form_reason]);
                }
            }
        }
        
        if(count == 0)
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "?????-???? ?? ?????? ?????? ?? ???????", "");
        }
        else
        {
            SetPVarInt(playerid, "ViewingForms", 1);
            ShowPlayerDialog(playerid, DIALOG_AF_LIST, DIALOG_STYLE_LIST, 
                "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", 
                formList, 
                "???????", "?????");
        }
    }
    else if(listitem == 1)
    {
        ShowPlayerDialog(playerid, DIALOG_AFMENU, DIALOG_STYLE_LIST, 
            "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-????", 
            "/ban\n/permban\n/warn\n/unwarn\n/unban", 
            "?????", "?????");
    }
    return 1;
}

if(dialogid == DIALOG_AFMENU)
{
    if(!response) 
    {
        return callcmd::af(playerid, "");
    }
    
    new formType = 0;
    switch(listitem)
    {
        case 0: formType = FORM_BAN;
        case 1: formType = FORM_PERMBAN;
        case 2: formType = FORM_WARN;
        case 3: formType = FORM_UNWARN;
        case 4: formType = FORM_UNBAN;
    }
    
    CurrentFormType[playerid] = formType;
    
    new infoText[512];
    switch(formType)
    {
        case FORM_BAN:
        {
            format(infoText, sizeof(infoText), 
                "??????? ?????? ? ???????: {FFFF00}[ID/???????] [??? (1-30)] [???????]\n\n\
                {FFFFFF}??????: {FFFF00}15 7 Mass DM\n\
                {FFFFFF}??????: {FFFF00}Nick_Name 30 ??????");
        }
        case FORM_PERMBAN:
        {
            format(infoText, sizeof(infoText), 
                "??????? ?????? ? ???????: {FFFF00}[ID/???????] [???????]\n\n\
                {FFFFFF}??????: {FFFF00}15 ????\n\
                {FFFFFF}??????: {FFFF00}Nick_Name ??????? ??");
        }
        case FORM_WARN:
        {
            format(infoText, sizeof(infoText), 
                "??????? ?????? ? ???????: {FFFF00}[ID/???????] [???????]\n\n\
                {FFFFFF}??????: {FFFF00}15 NonRP Cop\n\
                {FFFFFF}??????: {FFFF00}Nick_Name NonRP ???????ù ?????");
        }
        case FORM_UNWARN:
        {
            format(infoText, sizeof(infoText), 
                "??????? ?????? ? ???????: {FFFF00}[ID/???????] [???????]\n\n\
                {FFFFFF}??????: {FFFF00}15 ??????\n\
                {FFFFFF}??????: {FFFF00}Nick_Name ?????????");
        }
        case FORM_UNBAN:
        {
            format(infoText, sizeof(infoText), 
                "??????? ?????? ? ???????: {FFFF00}[???????] [???????]\n\n\
                {FFFFFF}??????: {FFFF00}Nick_Name ??????");
        }
    }
    
    new dialogTitle[64];
    format(dialogTitle, sizeof(dialogTitle), "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????");

    switch(formType)
    {
        case FORM_BAN: SPD(playerid, DIALOG_BANAF, DIALOG_STYLE_INPUT, dialogTitle, infoText, "?????", "?????");
        case FORM_PERMBAN: SPD(playerid, DIALOG_PERMBANAF, DIALOG_STYLE_INPUT, dialogTitle, infoText, "?????", "?????");
        case FORM_WARN: SPD(playerid, DIALOG_WARNAF, DIALOG_STYLE_INPUT, dialogTitle, infoText, "?????", "?????");
        case FORM_UNWARN: SPD(playerid, DIALOG_UNWARNAF, DIALOG_STYLE_INPUT, dialogTitle, infoText, "?????", "?????");
        case FORM_UNBAN: SPD(playerid, DIALOG_UNBANAF, DIALOG_STYLE_INPUT, dialogTitle, infoText, "?????", "?????");
    }
    return 1;
}

if(dialogid == DIALOG_AF_LIST)
{
    if(!response) 
    {
        return callcmd::af(playerid, "");
    }
    
    new forms[MAX_ADMIN_FORMS];
    new formCount = 0;
    
    for(new i = 0; i < MAX_ADMIN_FORMS; i++)
    {
        if(AdminForms[i][form_status] != 0 || AdminForms[i][form_type] == 0) 
            continue;
        
        forms[formCount] = i;
        formCount++;
    }
    
    if(listitem >= formCount) 
    {
        ShowNotificationNew(playerid, 0, 3, 0, 0, "????? ?? ???????", "");
        return callcmd::af(playerid, "");
    }
    
    new formID = forms[listitem];
    
    if(GetPlayerAdminEx(playerid) < GetRequiredAdminLevelForApproval(AdminForms[formID][form_type])) 
    {
        ShowNotificationNew(playerid, 0, 3, 0, 0, "???????????? ???? ??ù ????ù??ù ?????", "");
        return callcmd::af(playerid, "");
    }
    
    SetPVarInt(playerid, "CurrentForm", formID);
    
    new formDetails[512], formType[16], authorInitials[32];
    GetFormTypeName(AdminForms[formID][form_type], formType, sizeof(formType));
    GetPlayerInitials(AdminForms[formID][form_author_name], authorInitials, sizeof(authorInitials));
    
    format(formDetails, sizeof(formDetails), 
        "{FFFFFF}ù?? ?????: {FFFF00}%s\n\n\
        {FFFFFF}?????: {FFFF00}%s\n\
        {FFFFFF}? ???????? ??????: {FFFF00}%d\n\n\
        {FFFFFF}???????: {FFFF00}%s\n\n", 
        formType, 
        AdminForms[formID][form_target_name],
        AdminForms[formID][form_target_account],
        AdminForms[formID][form_reason]);
    
    if(AdminForms[formID][form_duration] > 0)
    {
        if(AdminForms[formID][form_type] == FORM_PERMBAN)
        {
            format(formDetails, sizeof(formDetails), "%s{FFFFFF}????????????: {FFFF00}????????\n\n", formDetails);
        }
        else
        {
            format(formDetails, sizeof(formDetails), "%s{FFFFFF}????????????: {FFFF00}%d ????\n\n", 
                formDetails, AdminForms[formID][form_duration]);
        }
    }
    
    format(formDetails, sizeof(formDetails), 
        "%s{FFFFFF}???????????: {FFFF00}%s\n\
        {FFFFFF}? ???????? ??????????ù: {FFFF00}%d", 
        formDetails, 
        authorInitials, 
        AdminForms[formID][form_author_account]);
    
    switch(AdminForms[formID][form_type])
    {
        case FORM_BAN: 
            SPD(playerid, DIALOG_BANOD, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", formDetails, "????????", "?????????");
        case FORM_PERMBAN: 
            SPD(playerid, DIALOG_PERMBANOD, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", formDetails, "????????", "?????????");
        case FORM_WARN: 
            SPD(playerid, DIALOG_WARNOD, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", formDetails, "????????", "?????????");
        case FORM_UNWARN: 
            SPD(playerid, DIALOG_UNWARNOD, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", formDetails, "????????", "?????????");
        case FORM_UNBAN: 
            SPD(playerid, DIALOG_UNBANOD, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", formDetails, "????????", "?????????");
    }
    return 1;
}

if(dialogid == DIALOG_BANAF)
{
    if(!response) return callcmd::af(playerid, "");
    
    if(!ProcessBanFormInput(playerid, inputtext, FORM_BAN))
    {
        // ??? ?????? ?????????? ??? ?? ?????? ? ???????????
        new infoText[512];
        format(infoText, sizeof(infoText), 
            "??????? ?????? ? ???????: {FFFF00}[ID/???????] [??? (1-30)] [???????]\n\n\
            {FFFFFF}??????: {FFFF00}15 7 Mass DM\n\
            {FFFFFF}??????: {FFFF00}Nick_Name 30 ??????");
        ShowPlayerDialog(playerid, DIALOG_BANAF, DIALOG_STYLE_INPUT, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", infoText, "?????", "?????");
    }
    return 1;
}

if(dialogid == DIALOG_PERMBANAF)
{
    if(!response) return callcmd::af(playerid, "");
    
    if(!ProcessBanFormInput(playerid, inputtext, FORM_PERMBAN))
    {
        new infoText[512];
        format(infoText, sizeof(infoText), 
            "??????? ?????? ? ???????: {FFFF00}[ID/???????] [???????]\n\n\
            {FFFFFF}??????: {FFFF00}15 ????\n\
            {FFFFFF}??????: {FFFF00}Nick_Name ??????? ??");
        ShowPlayerDialog(playerid, DIALOG_PERMBANAF, DIALOG_STYLE_INPUT, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", infoText, "?????", "?????");
    }
    return 1;
}

if(dialogid == DIALOG_WARNAF)
{
    if(!response) return callcmd::af(playerid, "");
    
    if(!ProcessSimpleFormInput(playerid, inputtext, FORM_WARN))
    {
        new infoText[512];
        format(infoText, sizeof(infoText), 
            "??????? ?????? ? ???????: {FFFF00}[ID/???????] [???????]\n\n\
            {FFFFFF}??????: {FFFF00}15 NonRP Cop\n\
            {FFFFFF}??????: {FFFF00}Nick_Name NonRP ???????ù ?????");
        ShowPlayerDialog(playerid, DIALOG_WARNAF, DIALOG_STYLE_INPUT, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", infoText, "?????", "?????");
    }
    return 1;
}

if(dialogid == DIALOG_UNWARNAF)
{
    if(!response) return callcmd::af(playerid, "");
    
    if(!ProcessSimpleFormInput(playerid, inputtext, FORM_UNWARN))
    {
        new infoText[512];
        format(infoText, sizeof(infoText), 
            "??????? ?????? ? ???????: {FFFF00}[ID/???????] [???????]\n\n\
            {FFFFFF}??????: {FFFF00}15 ??????\n\
            {FFFFFF}??????: {FFFF00}Nick_Name ?????????");
        ShowPlayerDialog(playerid, DIALOG_UNWARNAF, DIALOG_STYLE_INPUT, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", infoText, "?????", "?????");
    }
    return 1;
}

if(dialogid == DIALOG_UNBANAF)
{
    if(!response) return callcmd::af(playerid, "");
    
    if(!ProcessSimpleFormInput(playerid, inputtext, FORM_UNBAN))
    {
        new infoText[512];
        format(infoText, sizeof(infoText), 
            "??????? ?????? ? ???????: {FFFF00}[???????] [???????]\n\n\
            {FFFFFF}??????: {FFFF00}Nick_Name ??????");
        ShowPlayerDialog(playerid, DIALOG_UNBANAF, DIALOG_STYLE_INPUT, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ?????-?????", infoText, "?????", "?????");
    }
    return 1;
}

if(dialogid == DIALOG_BANOD)
{
    new formID = GetPVarInt(playerid, "CurrentForm");
    DeletePVar(playerid, "CurrentForm");
    
    if(response)
    {
        if(ExecuteBanForm(formID, playerid))
        {
            CompleteForm(formID, playerid, 1);
            ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ???????? ?????-?????", "");
        }
        else
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "?????? ?????????ù ?????", "");
        }
    }
    else
    {
        CompleteForm(formID, playerid, 0);
        ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ????????? ?????-?????", "");
    }
    
    return 1;
}

if(dialogid == DIALOG_PERMBANOD)
{
    new formID = GetPVarInt(playerid, "CurrentForm");
    DeletePVar(playerid, "CurrentForm");
    
    if(response)
    {
        if(ExecutePermbanForm(formID, playerid))
        {
            CompleteForm(formID, playerid, 1);
            ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ???????? ?????-?????", "");
        }
        else
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "?????? ?????????ù ?????", "");
        }
    }
    else
    {
        CompleteForm(formID, playerid, 0);
        ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ????????? ?????-?????", "");
    }
    
    return 1;
}

if(dialogid == DIALOG_WARNOD)
{
    new formID = GetPVarInt(playerid, "CurrentForm");
    DeletePVar(playerid, "CurrentForm");
    
    if(response)
    {
        if(ExecuteWarnForm(formID, playerid))
        {
            CompleteForm(formID, playerid, 1);
            ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ???????? ?????-?????", "");
        }
        else
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "?????? ?????????ù ?????", "");
        }
    }
    else
    {
        CompleteForm(formID, playerid, 0);
        ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ????????? ?????-?????", "");
    }
    
    return 1;
}

if(dialogid == DIALOG_UNWARNOD)
{
    new formID = GetPVarInt(playerid, "CurrentForm");
    DeletePVar(playerid, "CurrentForm");
    
    if(response)
    {
        if(ExecuteUnwarnForm(formID, playerid))
        {
            CompleteForm(formID, playerid, 1);
            ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ???????? ?????-?????", "");
        }
        else
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "?????? ?????????ù ?????", "");
        }
    }
    else
    {
        CompleteForm(formID, playerid, 0);
        ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ????????? ?????-?????", "");
    }
    
    return 1;
}

if(dialogid == DIALOG_UNBANOD)
{
    new formID = GetPVarInt(playerid, "CurrentForm");
    DeletePVar(playerid, "CurrentForm");
    
    if(response)
    {
        if(ExecuteUnbanForm(formID, playerid))
        {
            CompleteForm(formID, playerid, 1);
            ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ???????? ?????-?????", "");
        }
        else
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "?????? ?????????ù ?????", "");
        }
    }
    else
    {
        CompleteForm(formID, playerid, 0);
        ShowNotificationNew(playerid, 1, 3, 0, 0, "?? ????????? ?????-?????", "");
    }
    
    return 1;
}
			
			if(dialogid == DIALOG_FERMA)
			{
	if(response)
		{
			switch(listitem)
			{
			case 0:
			{
			ShowPlayerDialog(playerid, DIALOG_FERMAHELP, DIALOG_STYLE_LIST, "?????? ?? ??????",
			"?????????\n\
			??????? ?????ù",
			"???????", "???????" );
			}
			case 1:
			{
			ShowPlayerDialog(playerid, DIALOG_FERMABEGIN, DIALOG_STYLE_LIST, "?????? / ????????? ??????? ????",
			"???????? ????????\n\
			??????? ?????ù",
			"???????", "???????" );
			}
			case 2:
			{
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ?????????? ??????????");
			new vehicleid = CreateVehicle(471, 1645.256103,1302.107055,12.086381,144.799621, 1, 1);
			}
			}
			}
			}
			if(dialogid == DIALOG_FERMAHELP)
			{
	if(response)
		{
			switch(listitem)
			{
			case 0:
			{
			ShowPlayerDialog(playerid, 99998, DIALOG_STYLE_MSGBOX, "?????????ù ? ?????",
			"???????? ??????? - ??????, ??? ??? ????????? ???????? ?????? ? ?????, ????????ù ??????????? ?????????.\n\
			????? ?????? ?????? - ??? ?????????? ???????ù ????????? B.\n\
			?? ????? ????????? ?????????????? ????????, ?? ???????? ????????ù ?????ù??? ???????? ??????",
			"???????" );
			}
			}
			}
			}
			if(dialogid == DIALOG_FERMABEGIN)
			{
	if(response)
		{
			switch(listitem)
			{
			case 0:
			{
			ShowPlayerDialog(playerid, DIALOG_FERMAKOMB, DIALOG_STYLE_LIST, "???????? ????????",
			"??????\n\
			?????????", 
			"???????", "???????" );
			}
			case 1:
			{
			ShowPlayerDialog(playerid, DIALOG_FERMASBOR, DIALOG_STYLE_LIST, "??????? ?????ù",
			"??????\n\
            ?????????",
			"???????", "???????" ); 
			}
			}
			}
			}
			
			if(dialogid == DIALOG_FERMAKOMB)
			{
	if(response)
		{
			switch(listitem)
			{
			case 0:
			{
			}
			}
			}
			}
			if(dialogid == DIALOG_FERMASBOR)
			{
	if(response)
		{
			switch(listitem)
			{
			case 0:
			{
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ?????? ?????? ??????? ?????ù");
			SendClientMessage(playerid, COLOR_WHITE, "????????? ?????????? ? ???????ù????? ?? ????? ???????? ?? ?????");
			SetPlayerSkin(playerid, 259);
			SetPVarInt(playerid,"InUroga",1);
            SetPVarInt(playerid,"Uroga",1);
            SetPlayerCheckpoint(playerid, urogcheck[1][0], urogcheck[1][1], urogcheck[1][2], 2.0);
			}
			case 1:
			{

		    GivePlayerMoneyEx(playerid, GetPVarInt(playerid, "UrogMoney"), "kyr", true, true);
			SetPlayerSkin(playerid, GetPVarInt(playerid, "GetPlayerSkin"));
			DeletePVar(playerid, "GetPlayerSkin(playerid, P_SKIN)");
			DeletePVar(playerid, "InUroga");
			DeletePVar(playerid, "Uroga");
			DeletePVar(playerid, "UrogMoney");
			}
			}
			}
			} 
			if(dialogid == DIALOG_LAREK)
			{
	if(response)
		{
			switch(listitem)
			{
			case 0:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
			SetPlayerHealthEx(playerid, 5);
			GivePlayerMoneyEx(playerid, -250);
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ???????? ? ???? ???????? ???? ????????");
			}
			case 1:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
			SetPlayerHealthEx(playerid, 5);
			GivePlayerMoneyEx(playerid, -100);
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ???????? ? ???? ???????? ???? ????????");
			}
			case 2:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 3");
			SetPlayerHealthEx(playerid, 5);
			GivePlayerMoneyEx(playerid, 80);
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ???????? ? ???? ???????? ???? ????????");
			}
			case 3:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 4");
			SetPlayerHealthEx(playerid, 5);
			GivePlayerMoneyEx(playerid, -50);
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ???????? ? ???? ???????? ???? ????????");
			}
			case 4:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 5");
			SetPlayerHealthEx(playerid, 5);
			GivePlayerMoneyEx(playerid, -200);
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ???????? ? ???? ???????? ???? ????????");
			}
			case 5:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 6");
			SetPlayerHealthEx(playerid, 5);
			GivePlayerMoneyEx(playerid, -70);
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ???????? ? ???? ???????? ???? ????????");
			}
			case 6:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 6");
			SetPlayerHealthEx(playerid, 5);
			GivePlayerMoneyEx(playerid, -100);
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ???????? ? ???? ???????? ???? ????????");
			}
			case 7:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 6");
			SetPlayerHealthEx(playerid, 5);
			GivePlayerMoneyEx(playerid, -90);
			SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ???????? ? ???? ???????? ???? ????????");
			}
			}
			}
			} 
			
			if(dialogid == DIALOG_ADDREWARD)
			{
	if(response)
		{
			switch(listitem)
			{
			case 0:
			{
			new str[184];

			format(str, sizeof str, " ?????? ????? ??????? ?????? ?????? ? ???? ????");

			Dialog(playerid, DIALOG_ADDMONEY, DIALOG_STYLE_INPUT, "?????? ??????? ??????", str, "???????", "???????");
			
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
			
			}
			case 1:
			{
			new str[184];

			format(str, sizeof str, " ?????? ????? ??????? ?????? ?????? ? ???? ????");

			Dialog(playerid, DIALOG_ADDDONATE, DIALOG_STYLE_INPUT, "?????? ????? ??????", str, "???????", "???????");
			
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
			}
			case 2:
			{
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 3");
            }
            case 3:
            {
            new str[184];

			format(str, sizeof str, " ?????? id ????? ??????? ?????? ?????? ? ???? ????");

			Dialog(playerid, DIALOG_ADDSKIN, DIALOG_STYLE_INPUT, "?????? ?????", str, "???????", "???????");
			
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 4");
            }
            case 4:
            {
            new str[184];

			format(str, sizeof str, " ?????? ????? ??????? ?????? ?????? ? ???? ????");

			Dialog(playerid, DIALOG_ADDEPOINTS, DIALOG_STYLE_INPUT, "?????? ????????", str, "???????", "???????");
			
			//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 5");
            }
            }
			}
			} 
			
    if(dialogid == DIALOG_ADDMONEY)
    {
        if (response)
        {
            new amount = strval(inputtext);
            //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} ?? ?????? ?????"); // ??ù ???????
            
            if (amount > 0 && amount <= 10000000)
            {
                GivePlayerMoneyEx(playerid, amount); // ?????????, ??? ??? ??????ù ??????????
                SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ?????? ??????!");
            }
            else
            {
                SendClientMessage(playerid, COLOR_RED, "??????? ?????????? ?????! ????? ?????? ???? ????????????? ? ?? ????????? 1000000000.");
            }
        }
    }
    if(dialogid == DIALOG_ADDDONATE)
    {
        if (response)
        {
            new amount = strval(inputtext);
            //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} ?? ?????? ????? ?????"); // ??ù ???????
            
            if (amount > 0 && amount <= 1000000000)
            {
                GivePlayerDonateRub(playerid, amount); // ?????????, ??? ??? ??????ù ??????????
                SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ?????? ??????!");
            }
            else
            {
                SendClientMessage(playerid, COLOR_RED, "??????? ?????????? ?????! ????? ?????? ???? ????????????? ? ?? ????????? 1000000000.");
            }
        }
    }
    if(dialogid == DIALOG_ADDSKIN)
    {
        if (response)
        {
            new amount = strval(inputtext);
            //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} ?? ?????? ????"); // ??ù ???????
            
            if (amount > 0 && amount <= 10000)
            {
                SetPlayerData(playerid, P_SKIN, amount);
					UpdatePlayerDatabaseInt(playerid, "skin", amount);
					SetPlayerSkinInit(playerid);
                SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ?????? ????!");
            }
            else
            {
                SendClientMessage(playerid, COLOR_RED, "??????? ?????????? id! id ?????? ???? ????????????? ? ?? ????????? 10000.");
            }
        }
    }
    if(dialogid == DIALOG_ADDEPOINTS)
    {
        if (response)
        {
            new amount = strval(inputtext);
            //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} ?? ?????? ???????"); // ??ù ???????
            
            if (amount > 0 && amount <= 1000000000)
            {
                AddPlayerData(playerid, P_ACOINS, +, amount);
	           UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) + 450);
                SendClientMessage(playerid, COLOR_WHITE, "?? ??????? ?????? ???????!");
            }
            else
            {
                SendClientMessage(playerid, COLOR_RED, "??????? ?????????? ?????! ????? ?????? ???? ????????????? ? ?? ????????? 1000000000.");
            }
        }
    }

			if (dialogid == DIALOG_START_QUEST) {
        if (response) 
{ // ???? ????? ????? "???ù?"
            // ????? ????? ???????? ??? ??ù ??????????ù ?????? ? ???? ????
            SendClientMessage(playerid, COLOR_WHITE, "?? ???????ù????? ? ???? ????...");
            // ???????????, ??? ?????????? ???? ???? (????????, 1000.0, 2000.0, 10.0)
            SetPlayerPos(playerid, 1051.383789,2032.698730,14.418960);
        } else 
{
            SendClientMessage(playerid, COLOR_RED, "?? ???????? ?????.");
            g_PlayerQuestState[playerid] = QUEST_NOT_STARTED;
        }
    } else 
if (dialogid == DIALOG_END_QUEST)
 {
        if (response) 
{ // ???? ????? ????? "???????"
            // ?????????? ?????? ? ?????? ?????
            GivePlayerMoney(playerid, 100000); // ?????? 100 ?????
            SendClientMessage(playerid, COLOR_WHITE, "?? ???????? 100000 ????? ?? ?????????? ??????!");
            g_PlayerQuestState[playerid] = QUEST_COMPLETED;
        }
    }

if(dialogid == DIALOG_ADMSHOP)
{
	if(response)
		{
			switch(listitem)
			{
				case 0:
				{
					new str[184];

					format(str, sizeof str, "????? ?????ù?? ???-????? ?? ?????? ???????? ?????????? ???-?????? ??ù ???????????\n?????????? AC: %d\n{FF0000}! {FFFFFF}?????: 1 ???-????? = 1 ?????-???\n??????? ????? ????? ? ??????? ???????", GetPlayerData(playerid, P_ACOINS));

					Dialog(playerid, DIALOG_CONVERT_ADMSHOP, DIALOG_STYLE_INPUT, "??????????ù ???-??????", str, "???????", "???????");
				}
				case 1:
				{
					Dialog(playerid, DIALOG_SKIN_ADMSHOP, DIALOG_STYLE_LIST, 
					"???????? ??????", 
					""SC" ?????? CJ  | 450 epoints\n"\
					""SC" ?????? ?????????????  | 1000 epoints\n"\
					""SC" ??? ?????? | 150 epoints\n"\
					""SC" ?????-?ù? | 150 epoints\n"\
					""SC" ??????? ?? ??????? | 500 epoints", 
					"???????", "???????");
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
				}
				case 2:
				{
					Dialog(playerid, DIALOG_VIP_ADMSHOP, DIALOG_STYLE_LIST, "???????? VIP", ""SC" Vip Silver | 15 ???? | 100 Epoint\n"SC" Vip Gold | 15 ???? | 150 EP\n"SC" Vip Platinum | 15 ???? | 200 EP", "??????", "???????");
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
				}
				case 3:
				{
					Dialog
					(
						playerid, DIALOG_VEH_ADMSHOP, DIALOG_STYLE_LIST,
					"???????? ???????", 
					""SC" ????????? ???? | 50 epoints", 
					"???????", "???????"
					);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 3");
				}
			}
		}
}
if(dialogid == DIALOG_CONVERT_ADMSHOP)
{
	new fmt_text[256],
	acoins_amount = strval(inputtext);

	if(1 <= acoins_amount <= GetPlayerData(playerid, P_ACOINS))
		{
			if(acoins_amount >  GetPlayerData(playerid, P_ACOINS))
			{
				format(fmt_text, sizeof fmt_text, "???????????? ???????. ?????? ?? ????? ????? %d ??????", GetPlayerData(playerid, P_ACOINS));
				SendClientMessage(playerid, 0xCECECEFF, fmt_text);
				return 0;
			}
				AddPlayerData(playerid, P_ACOINS, -, acoins_amount);

				UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) > 450);
				
				format(fmt_text, sizeof fmt_text, "~g~+$%d~n~~y~-$%d", acoins_amount, acoins_amount );
				GameTextForPlayer(playerid, fmt_text, 4000, 1);

				format(fmt_text, sizeof fmt_text, "??????????ù epoints %d ? ????? ??????", acoins_amount);

				GivePlayerDonateRub(playerid, acoins_amount, fmt_text, true, true);
				//UpdateDonate(playerid, GetPlayerMoney(playerid), GetPlayerDonateRub(playerid));

				SendClientMessage(playerid, -1, ""SC" ?? ?????????????? epoints");

			return 1;
		}
}
if(dialogid == DIALOG_SKIN_ADMSHOP)
{
	if(response)
	{
		switch(listitem)
		{
			case 0:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 450)
				{
					SendClientMessage(playerid, -1, ""SC" ?? ?????? ?????? \"CJ\" ?? epoints");
					AddPlayerData(playerid, P_ACOINS, -, 450);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 450);
					SetPlayerData(playerid, P_SKIN, 1);
					UpdatePlayerDatabaseInt(playerid, "skin", 1);
					SetPlayerSkinInit(playerid);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
				}

			}
			case 1:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 1000)
				{
					SendClientMessage(playerid, -1, ""SC" ?? ?????? ?????? \"?????????????\" ?? epoints");
					AddPlayerData(playerid, P_ACOINS, -, 1000);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 1000);
					SetPlayerData(playerid, P_SKIN, 122);
					UpdatePlayerDatabaseInt(playerid, "skin", 122);
					SetPlayerSkinInit(playerid);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
				}

			}
			case 2:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 150)
				{
					SendClientMessage(playerid, -1, ""SC" ?? ?????? ?????? \"??? ??????\" ?? epoints");
					AddPlayerData(playerid, P_ACOINS, -, 150);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 150);
					SetPlayerData(playerid, P_SKIN, 25);
					UpdatePlayerDatabaseInt(playerid, "skin", 25);
					SetPlayerSkinInit(playerid);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 3");
				}

			}
			case 3:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 150)
				{
					SendClientMessage(playerid, -1, ""SC" ?? ?????? ?????? \"?????-?ù?\" ?? epoints");
					AddPlayerData(playerid, P_ACOINS, -, 150);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 150);
					SetPlayerData(playerid, P_SKIN, 225);
					UpdatePlayerDatabaseInt(playerid, "skin", 225);
					SetPlayerSkinInit(playerid);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 4");
				}

			}
			case 4:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 500)
				{
					SendClientMessage(playerid, -1, ""SC" ?? ?????? ?????? \"??????? ?? ???????\" ?? epoints");
					AddPlayerData(playerid, P_ACOINS, -, 500);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 500);
					SetPlayerData(playerid, P_SKIN, 99);
					UpdatePlayerDatabaseInt(playerid, "skin", 99);
					SetPlayerSkinInit(playerid);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 5");
				}

			}
		}
	}
}
if(dialogid == DIALOG_VIP_ADMSHOP)
{
	if(response)
	{
		new prem_day,prem_month,prem_year,premium = GetPlayerPremium(playerid),
		fmt_text[128];

		switch(listitem)
		{
			case 0:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 100)
				{

			        if(!premium)
			        {
						SetPlayerData(playerid, P_PREMIUM, 1);
			            SetPlayerData(playerid, P_PREMIUM_DATE, gettime() + 15 * 86400);
					}
					else
					{
					    AddPlayerData(playerid, P_PREMIUM_DATE, +, 15 * 86400);
					}


					timestamp_to_date(GetPlayerData(playerid, P_PREMIUM_DATE), prem_year, prem_month, prem_day);

					format(fmt_text, sizeof fmt_text, "?? ??????? ???????? {D13B00}VIP Silver{FFFFFF} ?? {EC174F}%02d.%02d.%d", prem_day, prem_month, prem_year);
					SendClientMessage(playerid, -1, fmt_text);

					UpdatePlayerDatabaseInt(playerid, "premium", 1);
					UpdatePlayerDatabaseInt(playerid, "premium_date", GetPlayerData(playerid, P_PREMIUM_DATE));

					AddPlayerData(playerid, P_ACOINS, -, 100);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 100);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
				}

			}
			case 1:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 150)
				{

			        if(!premium)
			        {
						SetPlayerData(playerid, P_PREMIUM, 2);
			            SetPlayerData(playerid, P_PREMIUM_DATE, gettime() + 15 * 86400);
					}
					else
					{
					    AddPlayerData(playerid, P_PREMIUM_DATE, +, 15 * 86400);
					}


					timestamp_to_date(GetPlayerData(playerid, P_PREMIUM_DATE), prem_year, prem_month, prem_day);

					format(fmt_text, sizeof fmt_text, "?? ??????? ???????? {838383}VIP Gold{FFFFFF} ?? {EC174F}%02d.%02d.%d", prem_day, prem_month, prem_year);
					SendClientMessage(playerid, -1, fmt_text);

					UpdatePlayerDatabaseInt(playerid, "premium", 2);
					UpdatePlayerDatabaseInt(playerid, "premium_date", GetPlayerData(playerid, P_PREMIUM_DATE));

					AddPlayerData(playerid, P_ACOINS, -, 150);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 150);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
				}

			}
			case 2:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 200)
				{

			        if(!premium)
			        {
						SetPlayerData(playerid, P_PREMIUM, 3);
			            SetPlayerData(playerid, P_PREMIUM_DATE, gettime() + 15 * 86400);
					}
					else
					{
					    AddPlayerData(playerid, P_PREMIUM_DATE, +, 15 * 86400);
					}


					timestamp_to_date(GetPlayerData(playerid, P_PREMIUM_DATE), prem_year, prem_month, prem_day);

					format(fmt_text, sizeof fmt_text, "?? ??????? ???????? {FDD700}VIP Platinum{FFFFFF} ?? {EC174F}%02d.%02d.%d", prem_day, prem_month, prem_year);
					SendClientMessage(playerid, -1, fmt_text);

					UpdatePlayerDatabaseInt(playerid, "premium", 3);
					UpdatePlayerDatabaseInt(playerid, "premium_date", GetPlayerData(playerid, P_PREMIUM_DATE));

					AddPlayerData(playerid, P_ACOINS, -, 200);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 200);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 3");
				}

			}
		}
	}
}
if(dialogid == DIALOG_VEH_ADMSHOP)
{
	if(response)
	{
		switch(listitem)
		{
			case 0:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 100)
				{
					UpdatePlayerDatabaseInt(playerid, "car_slots", GetPlayerData(playerid, P_CAR_SLOTS));
					AddPlayerData(playerid, P_CAR_SLOTS, +, 1);
					AddPlayerData(playerid, P_ACOINS, -, 100);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 100);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
				}

			}
			case 1:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 50)
				{
					SendClientMessage(playerid, -1, ""SC" ?? ?????? ????????? ???? ?? epoints, ??ù ???????ù /opencase");

					

					player_roulette_bronz[playerid] += 1;
 				  UpdatePlayerDatabaseInt(playerid, "roulette_bronz", player_roulette_bronz[playerid]);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
				}
			}
			case 2:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 3500)
				{
					if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
					return SendClientMessage(playerid, 0x3399FFFF, ""USC"??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/donate ??? /admshop");    

					GivePlayerCar(playerid, 409, 0, 0);

					SendClientMessage(playerid, -1, ""SC" ?? ?????? ????????? \"???????\" ?? epoints");

					AddPlayerData(playerid, P_ACOINS, -, 3500);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 3500);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 3");
				}

			}
			case 3:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 15000)
				{
					if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
					return SendClientMessage(playerid, 0x3399FFFF, ""USC"??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/donate ??? /admshop");    

					GivePlayerCar(playerid, 596, 0, 0);

					SendClientMessage(playerid, -1, ""SC" ?? ?????? ????????? \"BMW M5 F90\" ?? epoints");

					AddPlayerData(playerid, P_ACOINS, -, 15000);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 15000);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 4");
				}

			}
			case 4:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 10000)
				{
					if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
					return SendClientMessage(playerid, 0x3399FFFF, ""USC"??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/donate ??? /admshop");    

					GivePlayerCar(playerid, 470, 0, 0);

					SendClientMessage(playerid, -1, ""SC" ?? ?????? ????????? \" ??? ù???\" ?? epoints");

					AddPlayerData(playerid, P_ACOINS, -, 10000);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 10000);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 5");
				}

			}
			case 5:
			{
				if(GetPlayerData(playerid, P_ACOINS) >= 25000)
				{
					if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
					return SendClientMessage(playerid, 0x3399FFFF, ""USC"??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/donate ??? /admshop");    

					GivePlayerCar(playerid, 601, 0, 0);

					SendClientMessage(playerid, -1, ""SC" ?? ?????? ????????? \"?ù?\" ?? epoints");

					AddPlayerData(playerid, P_ACOINS, -, 25000);
					UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(playerid, P_ACOINS) - 25000);
					//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 6");
				}

			}
		}
	}
}			
			
			
			
if(dialogid == DIALOG_STTSKIN)
{
    if(response)
    {
        switch(listitem)
        {
        case 0:SetPlayerSkin(playerid, 25);
        case 1:SetPlayerSkin(playerid, 234);
        case 2:SetPlayerSkin(playerid, 11);
        case 3:SetPlayerSkin(playerid, 235);
        case 4:SetPlayerSkin(playerid, 249);
        case 5:SetPlayerSkin(playerid, 266);
        case 6:SetPlayerSkin(playerid, 200);
        }
    }
    return 1;
}
if(dialogid == 9999)
	{
		if(response)
		{

			if(listitem == 0)
			{
				SetPlayerAttachedObject(playerid, 2, 19528, 2, 0.197000, 0.000000, 0.000000, 0.000000, 0.000000, 0.000000, 1.000000, 1.000000, 1.000000);
			}
			if(listitem == 1)
			{
				SetPlayerAttachedObject(playerid, 3, 4196, 1, 0.049998, -0.280000, 0.000000, 10.000000, 90.000000, 0.000000, 1.000000);
				}
			if(listitem == 2)
			{
				SetPlayerAttachedObject(playerid, 3, 5374, 1, 0.149999, -0.170000, -0.019999, 0.000000, 90.000000, -175.000000, 1.000000);
				}
			if(listitem == 3)
			{
				SetPlayerAttachedObject(playerid, 3, 4199, 1, 0.079999, -0.129999, 0.000000, 0.000000, 90.000000, 0.000000, 1.000000);
				}
			if(listitem == 4)
			{
				SetPlayerAttachedObject(playerid, 3, 14574, 1, 0.049999, -0.280000, 0.000000, 10.000000, 90.000000, 0.000000, 1.000000);
				}
			if(listitem == 5)
			{
				SetPlayerAttachedObject(playerid, 1, 18377, 2, 0.089999, 0.049999, -0.009999, 0.000000, 90.000000, 0.000000, 1.000000);
						}
			if(listitem == 6)
			{
				SetPlayerAttachedObject(playerid, 1, 18392, 2, 0.089999, 0.049999, -0.009999, 0.000000, 90.000000, 0.000000, 1.000000);
				}
			if(listitem == 7)
			{
				SetPlayerAttachedObject(playerid, 3, 14593, 1, -0.069999, -0.119999, -0.009999, 0.000000, 90.000000, 0.000000, 1.000000);
				}
			if(listitem == 8)
			{
				SetPlayerAttachedObject(playerid, 6, 7369, 6, 0.240000, 0.000000, 0.000000, 0.000000, -90.000000, -100.000000, 1.000000);
				}
			if(listitem == 9)
			{
				SetPlayerAttachedObject(playerid, 2, 4197, 2, 0.119999, 0.049999, 0.000000, 0.000000, 85.000000, 0.000000, 1.000000);
				}
			if(listitem == 10)
			{
				SetPlayerAttachedObject(playerid, 2, 5383, 2, 0.189999, -0.029999, -0.069999, 0.000000, 85.000000, 0.000000, 1.000000);
				}
			if(listitem == 11)
			{
				SetPlayerAttachedObject(playerid, 2, 1747, 2, 0.159999, 0.000000, -0.009999, 45.000000, 95.000000, -225.000000, 1.000000);
				}
			if(listitem == 12)
			{
				SetPlayerAttachedObject(playerid, 17, 1729, 17, -0.089999, 0.049998, 0.000000, 105.000000, 60.000000, 90.000000, 1.000000);
				}
			if(listitem == 13)
			{
				SetPlayerAttachedObject(playerid, 7, 5378, 7, 0.099999, 0.029999, -0.069999, 5.000000, -90.000000, -5.000000, 1.000000);
						}
			if(listitem == 14)
			{
				SetPlayerAttachedObject(playerid, 1, 18409, 2, 0.089999, 0.049999, -0.009999, 0.000000, 90.000000, 0.000000, 1.000000);	
						}
			if(listitem == 15)
			{
				SetPlayerAttachedObject(playerid, 6, 5384, 6, 0.240000, 0.000000, 0.000000, 0.000000, -90.000000, -100.000000, 1.000000);		
			}
		}
	}
	
	
	if(dialogid == DIALOG_REPORT_SELECTOR)
	    {
	        if(response)
	        {
				switch(listitem)
				{
			 		case 0:
			 		{
			   			new fmt_text[200];
   		   			    Dialog(playerid, DIALOG_REPORT_CLAIM, DIALOG_STYLE_INPUT, "{00CC00}"SERVER_NAME" {FFFFFF}| ?????a", "??ù ????, ????? ????????? ???? ?????? ?????????????\n??????? - ?????? ??????? ?? ? ?????????? ???? ????.\n\n??????? ????????? ????????????? ? ???????? ???? ?????,\n????? ????????????ù ?????? ????????? ???ù?? ????\n???????? ? ??????????? ?????? ????????????. ??\n????????? ? ???????? ?????, ? ????? ??????? ???????.", "??????", "?????");
  
                            //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
			   			return 1;
					}
					case 1:
					{
			    		new fmt_text[200];
   		   			    Dialog(playerid, DIALOG_ASK_CLAIM, DIALOG_STYLE_INPUT, "{DC143C}"SERVER_NAME" {FFFFFF}| ??????", "??ù ????, ????? ????????? ???? ?????? ?????????? ??????? - ??????\n??????? ??? ? ?????????? ???? ????.\n\n??????????, ???????????ù ???????, ?????? ??? ????????? ????\n?????? - ???????????? ????? ? ???ù??? ??? ??????????????. ??\n????????? ? ???????? ?????, ? ????? ???????? ???????.", "??????", "?????");
			   			return 1;
					}
				}
			}
		}

	if(dialogid == DIALOG_REPORT_CLAIM)
{
    if (response)
    {
        if (strlen(inputtext) > 500)
        {
            SendClientMessage(playerid, -1, "???????????? ?????????? ???????? 500");
            return 1;
        }

        if (strlen(inputtext) == 0) return 1;

        utf8_to_cp1251(inputtext); // <--- ?????? ?ù? ????? ?????????????? ??????

        SendReport(playerid, inputtext);
        UpdateReportText();

        new fmt_text[200];
        format(fmt_text, sizeof fmt_text, "{008000}[R] ?????? ?? %s[%d]: {FFD700}%s", GetPlayerNameEx(playerid), playerid, inputtext);
        SendMessageToAdmins(fmt_text, 0xFFFFFFFF);

        SendClientMessage(playerid, -1, "{FFFF00}| {FFFFFF}???? ?????? ???? ?????????? ????????????? ???????, ???????? ??????.");
        return 1;
    }
}

if(dialogid == DIALOG_ASK_CLAIM)
{
    if(!response)
    {
        Dialog
        (
            playerid, DIALOG_REPORT_SELECTOR, DIALOG_STYLE_LIST,
            "{FF0000}BAZE RUSSIA{FFFFFF} | ??ù??",
            "{FFFF00}õ {FFFFFF}??ù?? ? ?????????????? {FF0000}(??????)\n"\
            "{FFFF00}õ {FFFFFF}??ù?? ? ??????????? {FF0000}(??????)",
            "???????",
            "???????"
        );
        return 1;
    }
    else
    {
        if(strlen(inputtext) == 0)
        {
            SendClientMessage(playerid, -1, "??????: ?? ?? ????? ????? ???????!");
            return 1;
        }

        if(strlen(inputtext) > 500)
        {
            SendClientMessage(playerid, -1, "??????: ????????? ???????????? ?????????? ???????? (500)!");
            return 1;
        }

        utf8_to_cp1251(inputtext);
        SendAsk(playerid, inputtext);
        UpdateAskText();

        new fmt_text[256];
        format(fmt_text, sizeof(fmt_text), "{008000}[H] ?????? ?? %s[%d]: {FFFF00}%s",
            GetPlayerNameEx(playerid), playerid, inputtext);

        SendMessageToAdmins(fmt_text, -1);
        SendClientMessage(playerid, -1, "{FFFF00}? {FFFFFF}?? ????????? ???? ?????? ??ù ??????? ????????? ???????, ???????? ??????.");
    }
    return 1;
}
    // ??????? ??ù ?????? ????????
if(dialogid == DIALOG_SHABLON_CATEGORY)
{
    if(!response) return 1;

    switch(listitem)
    {
        case 0: Dialog(playerid, DIALOG_SHABLON_BASIC, DIALOG_STYLE_LIST, "??????? ?????????????",
        "??????? ?????????\n?????????\n??????? ?????????\n?????????????\n??????? ?????????????\n??????? ?????????????",
        "???????", "?????");

        case 1: Dialog(playerid, DIALOG_SHABLON_FOLLOWERS, DIALOG_STYLE_LIST, "??????? ????ù???",
        "????. ?????????????\n????. ???????ù ?????\n????. ????????\n????. ???\n????. ?????\n????. ????\n????. ???\n????. ????\n????. ??????????ù ???\n????. ??????????ù ???\n????. ???????????? ???\n????. ?? ??",
        "???????", "?????");

        case 2: Dialog(playerid, DIALOG_SHABLON_HEADFOLLOWERS, DIALOG_STYLE_LIST, "??????? ??????? ????ù???",
        "??? ???\n??? ??\n??? ????\n?? ???\n?? ??\n?? ????",
        "???????", "?????");

        case 3: Dialog(playerid, DIALOG_SHABLON_TECH, DIALOG_STYLE_LIST, "??????? ù??. ????????????",
        "ù?????????? ??????????\n??????? ù??. ????????????\n??????? ??????? ù??. ????????????\n??????????? ?ù?\n??????? ù??. ??????????",
        "???????", "?????");

        case 4: Dialog(playerid, DIALOG_SHABLON_MAINADMIN, DIALOG_STYLE_LIST, "??????? ??????? ?????????????",
        "??????????? ??\n???????? ??????????? ??\n??????? ?????????????\n??????????? ???????????? ??????????????\n??????????? ?????????????",
        "???????", "?????");

        case 5: Dialog(playerid, DIALOG_SHABLON_TESTERS, DIALOG_STYLE_LIST, "??????? ?????? ù??????????ù",
        "?????? ù??????????\nù??????????\n??????? ù??????????\n????????? ???????ù ????????\n????????? ?????? ??????\n????? ???????ù ????????\n????? ?????? ??????\n??????????? ???????? ù???????????\n??????? ù??????????",
        "???????", "?????");
    }
    return 1;
}

// ??????? ???????????????? ?????????
if(dialogid == DIALOG_SHABLON_BASIC)
{
    if(!response) return 1;
    new id = g_player[playerid][P_TARGET_PLAYER_ID];
    new textPlayer[128], textAdmin[128], textAdmins[128];

    if(!IsPlayerConnected(id)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ?????????.");

    // ???????? ???? ??ù ??????? ??????????
    if(listitem >= 4 && GetPlayerAdminEx(playerid) < 5)
        return SendClientMessage(playerid, COLOR_GREY, "???????????? ???? ??ù ?????????ù ?? ??? ?????????.");

    switch(listitem)
    {
        case 0: // ??????? ?????????
        {
            SetPlayerData(id, P_ADMIN, 1);
            UpdatePlayerDatabaseInt(id, "admin", 1);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ?????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ?????????");

            format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"??????? ?????????\"", GetPlayerNameEx(playerid), playerid);
            format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? ???????? ?????????? %s[%d]", GetPlayerNameEx(id), id);
            format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"???????? ??????????\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(id), id);
        }
        case 1: // ?????????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "?????????");
            UpdatePlayerDatabaseString(id, "prefix", "?????????");

            format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"??????????\"", GetPlayerNameEx(playerid), playerid);
            format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? ?????????? %s[%d]", GetPlayerNameEx(id), id);
            format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"??????????\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(id), id);
        }
        case 2: // ??????? ?????????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ?????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ?????????");

            format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"??????? ?????????\"", GetPlayerNameEx(playerid), playerid);
            format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? ???????? ?????????? %s[%d]", GetPlayerNameEx(id), id);
            format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"???????? ??????????\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(id), id);
        }
        case 3: // ?????????????
        {
            SetPlayerData(id, P_ADMIN, 3);
            UpdatePlayerDatabaseInt(id, "admin", 3);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "?????????????");
            UpdatePlayerDatabaseString(id, "prefix", "?????????????");

            format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"?????????????\"", GetPlayerNameEx(playerid), playerid);
            format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? ?????????????? %s[%d]", GetPlayerNameEx(id), id);
            format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"??????????????\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(id), id);
        }
        case 4: // ??????? ?????????????
        {
            SetPlayerData(id, P_ADMIN, 4);
            UpdatePlayerDatabaseInt(id, "admin", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ?????????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ?????????????");

            format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"??????? ?????????????\"", GetPlayerNameEx(playerid), playerid);
            format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? ???????? ?????????????? %s[%d]", GetPlayerNameEx(id), id);
            format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"???????? ??????????????\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(id), id);
        }
        case 5: // ??????? ?????????????
        {
            SetPlayerData(id, P_ADMIN, 4);
            UpdatePlayerDatabaseInt(id, "admin", 4);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ?????????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ?????????????");

            format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"??????? ?????????????\"", GetPlayerNameEx(playerid), playerid);
            format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? ???????? ????????????? %s[%d]", GetPlayerNameEx(id), id);
            format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"???????? ?????????????\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(id), id);
        }
    }

    SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
    SendClientMessage(id, 0xFFFFFFFF, textPlayer);
    SendMessageToAdmins(textAdmins, 0x999999FF);
    AdminAuthorization(id);
    return 1;
}

// ????????? ????ù??? (???????ù ??? ?????????, ??? ??? ??? ??? ??????)
if(dialogid == DIALOG_SHABLON_FOLLOWERS)
{
    if(!response) return 1;
    new id = g_player[playerid][P_TARGET_PLAYER_ID];
    new textPlayer[128], textAdmin[128], textAdmins[128];

    if(!IsPlayerConnected(id)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ?????????.");

    switch(listitem)
    {
        case 0: // ????. ?????????????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_GOVERNMENT);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_GOVERNMENT);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ?????????????");
            UpdatePlayerDatabaseString(id, "prefix", "????. ?????????????");
        }
        case 1: // ????. ???????ù ?????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_ARMY);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_ARMY);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ???????ù ?????");
            UpdatePlayerDatabaseString(id, "prefix", "????. ???????ù ?????");
        }
        case 2: // ????. ????????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_HOSPITAL);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_HOSPITAL);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ????????");
            UpdatePlayerDatabaseString(id, "prefix", "????. ????????");
        }
        case 3: // ????. ???
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_RADIO);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_RADIO);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ???");
            UpdatePlayerDatabaseString(id, "prefix", "????. ???");
        }
        case 4: // ????. ?????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_DPS);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_DPS);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ?????");
            UpdatePlayerDatabaseString(id, "prefix", "????. ?????");
        }
        case 5: // ????. ????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_PPS);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_PPS);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ????");
            UpdatePlayerDatabaseString(id, "prefix", "????. ????");
        }
        case 6: // ????. ???
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_FBI);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_FBI);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ???");
            UpdatePlayerDatabaseString(id, "prefix", "????. ???");
        }
        case 7: // ????. ????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_FSIN);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_FSIN);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ????");
            UpdatePlayerDatabaseString(id, "prefix", "????. ????");
        }
        case 8: // ????. ??????????ù ???
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_OPG_ARZAMASKAYA);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_OPG_ARZAMASKAYA);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ??????????ù ???");
            UpdatePlayerDatabaseString(id, "prefix", "????. ??????????ù ???");
        }
        case 9: // ????. ??????????ù ???
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_OPG_BATYREVSKAYA);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_OPG_BATYREVSKAYA);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ??????????ù ???");
            UpdatePlayerDatabaseString(id, "prefix", "????. ??????????ù ???");
        }
        case 10: // ????. ???????????? ???
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_SLEDAK, TEAM_OPG_LYTKARINSKAYA);
            UpdatePlayerDatabaseInt(id, "sledak", TEAM_OPG_LYTKARINSKAYA);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ???????????? ???");
            UpdatePlayerDatabaseString(id, "prefix", "????. ???????????? ???");
        }
        case 11: // ????. ?? ??
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ?? ??");
            UpdatePlayerDatabaseString(id, "prefix", "????. ?? ??");
        }
    }

    format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX));
    format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? %s %s[%d]", GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);
    format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"%s\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);

    SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
    SendClientMessage(id, 0xFFFFFFFF, textPlayer);
    SendMessageToAdmins(textAdmins, 0x999999FF);
    AdminAuthorization(id);
    return 1;
}

// ??????? ????ù??? (???????ù ??? ?????????)
if(dialogid == DIALOG_SHABLON_HEADFOLLOWERS)
{
    if(!response) return 1;
    new id = g_player[playerid][P_TARGET_PLAYER_ID];
    new textPlayer[128], textAdmin[128], textAdmins[128];

    if(!IsPlayerConnected(id)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ?????????.");

    switch(listitem)
    {
        case 0: // ??? ???
        {
            SetPlayerData(id, P_ADMIN, 3);
            UpdatePlayerDatabaseInt(id, "admin", 3);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??? ???");
            UpdatePlayerDatabaseString(id, "prefix", "??? ???");
        }
        case 1: // ??? ??
        {
            SetPlayerData(id, P_ADMIN, 3);
            UpdatePlayerDatabaseInt(id, "admin", 3);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??? ??");
            UpdatePlayerDatabaseString(id, "prefix", "??? ??");
        }
        case 2: // ??? ????
        {
            SetPlayerData(id, P_ADMIN, 3);
            UpdatePlayerDatabaseInt(id, "admin", 3);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??? ????");
            UpdatePlayerDatabaseString(id, "prefix", "??? ????");
        }
        case 3: // ?? ???
        {
            SetPlayerData(id, P_ADMIN, 4);
            UpdatePlayerDatabaseInt(id, "admin", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "?? ???");
            UpdatePlayerDatabaseString(id, "prefix", "?? ???");
        }
        case 4: // ?? ??
        {
            SetPlayerData(id, P_ADMIN, 4);
            UpdatePlayerDatabaseInt(id, "admin", 4);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "?? ??");
            UpdatePlayerDatabaseString(id, "prefix", "?? ??");
        }
        case 5: // ?? ????
        {
            SetPlayerData(id, P_ADMIN, 4);
            UpdatePlayerDatabaseInt(id, "admin", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "?? ????");
            UpdatePlayerDatabaseString(id, "prefix", "?? ????");
        }
    }

    format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX));
    format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? %s %s[%d]", GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);
    format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"%s\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);

    SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
    SendClientMessage(id, 0xFFFFFFFF, textPlayer);
    SendMessageToAdmins(textAdmins, 0x999999FF);
    AdminAuthorization(id);
    return 1;
}

// ù?????????? ??????????? - ????????? ????? ???????ù?
if(dialogid == DIALOG_SHABLON_TECH)
{
    if(!response) return 1;
    new id = g_player[playerid][P_TARGET_PLAYER_ID];
    new textPlayer[128], textAdmin[128], textAdmins[128];

    if(!IsPlayerConnected(id)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ?????????.");

    // ???????? ???? ??ù ??????? ??????????? ??????????
    if(listitem >= 1 && GetPlayerAdminEx(playerid) < 6)
        return SendClientMessage(playerid, COLOR_GREY, "???????????? ???? ??ù ?????????ù ?? ??? ?????????.");

    switch(listitem)
    {
        case 0: // ù?????????? ??????????
        {
            SetPlayerData(id, P_ADMIN, 4);
            UpdatePlayerDatabaseInt(id, "admin", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "ù?????????? ??????????");
            UpdatePlayerDatabaseString(id, "prefix", "ù?????????? ??????????");
        }
        case 1: // ??????? ù??. ????????????
        {
            SetPlayerData(id, P_ADMIN, 5);
            UpdatePlayerDatabaseInt(id, "admin", 5);
            SetPlayerData(id, P_HELPER, 3);
            UpdatePlayerDatabaseInt(id, "helper", 3);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ù??. ????????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ù??. ????????????");
        }
        case 2: // ??????? ??????? ù??. ????????????
        {
            SetPlayerData(id, P_ADMIN, 6);
            UpdatePlayerDatabaseInt(id, "admin", 6);
            SetPlayerData(id, P_HELPER, 3);
            UpdatePlayerDatabaseInt(id, "helper", 3);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??. ??????? ù??. ????.");
            UpdatePlayerDatabaseString(id, "prefix", "??. ??????? ù??. ????.");
        }
        case 3: // ??????????? ?ù?
        {
            SetPlayerData(id, P_ADMIN, 6);
            UpdatePlayerDatabaseInt(id, "admin", 6);
            SetPlayerData(id, P_HELPER, 3);
            UpdatePlayerDatabaseInt(id, "helper", 3);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????????? ?ù?");
            UpdatePlayerDatabaseString(id, "prefix", "??????????? ?ù?");
        }
        case 4: // ??????? ù??. ??????????
        {
            SetPlayerData(id, P_ADMIN, 7);
            UpdatePlayerDatabaseInt(id, "admin", 7);
            SetPlayerData(id, P_HELPER, 3);
            UpdatePlayerDatabaseInt(id, "helper", 3);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ù??. ??????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ù??. ??????????");
        }
    }

    format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX));
    format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? %s %s[%d]", GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);
    format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"%s\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);

    SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
    SendClientMessage(id, 0xFFFFFFFF, textPlayer);
    SendMessageToAdmins(textAdmins, 0x999999FF);
    AdminAuthorization(id);
    return 1;
}

// ??????ù ????????????ù - ????????? ????? ???????ù?
if(dialogid == DIALOG_SHABLON_MAINADMIN)
{
    if(!response) return 1;
    new id = g_player[playerid][P_TARGET_PLAYER_ID];
    new textPlayer[128], textAdmin[128], textAdmins[128];

    if(!IsPlayerConnected(id)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ?????????.");

    switch(listitem)
    {
        case 0: // ??????????? ??
        {
            if(GetPlayerAdminEx(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ??????????? ?????????????");
            SetPlayerData(id, P_ADMIN, 5);
            UpdatePlayerDatabaseInt(id, "admin", 5);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????????? ??");
            UpdatePlayerDatabaseString(id, "prefix", "??????????? ??");
        }
        case 1: // ???????? ??????????? ??
        {
            if(GetPlayerAdminEx(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ??????????? ?????????????");
            SetPlayerData(id, P_ADMIN, 5);
            UpdatePlayerDatabaseInt(id, "admin", 5);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "???????? ??????????? ??");
            UpdatePlayerDatabaseString(id, "prefix", "???????? ??????????? ??");
        }
        case 2: // ??????? ?????????????
        {
            if(GetPlayerAdminEx(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ??????????? ?????????????");
            SetPlayerData(id, P_ADMIN, 5);
            UpdatePlayerDatabaseInt(id, "admin", 5);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ?????????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ?????????????");
        }
        case 3: // ??????????? ???????????? ??????????????
        {
            if(GetPlayerAdminEx(playerid) < 7) return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ?????????");
            SetPlayerData(id, P_ADMIN, 6);
            UpdatePlayerDatabaseInt(id, "admin", 6);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "???. ????. ??????????????");
            UpdatePlayerDatabaseString(id, "prefix", "???. ????. ??????????????");
        }
        case 4: // ??????????? ?????????????
        {
            if(GetPlayerAdminEx(playerid) < 7) return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ?????????");
            SetPlayerData(id, P_ADMIN, 7);
            UpdatePlayerDatabaseInt(id, "admin", 7);
            SetPlayerData(id, P_HELPER, 2);
            UpdatePlayerDatabaseInt(id, "helper", 2);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????????? ?????????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????????? ?????????????");
        }
    }

    format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX));
    format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? %s %s[%d]", GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);
    format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"%s\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);

    SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
    SendClientMessage(id, 0xFFFFFFFF, textPlayer);
    SendMessageToAdmins(textAdmins, 0x999999FF);
    AdminAuthorization(id);
    return 1;
}

// ????? ??????: ????? ???????????ù
if(dialogid == DIALOG_SHABLON_TESTERS)
{
    if(!response) return 1;
    new id = g_player[playerid][P_TARGET_PLAYER_ID];
    new textPlayer[128], textAdmin[128], textAdmins[128];

    if(!IsPlayerConnected(id)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ?????????.");

    // ???????? ???? ??ù ??????? ?????????? ? ?????? ???????????ù
    if(listitem >= 5 && GetPlayerAdminEx(playerid) < 6)
        return SendClientMessage(playerid, COLOR_GREY, "???????????? ???? ??ù ?????????ù ?? ??? ?????????.");

    switch(listitem)
    {
        case 0: // ?????? ù??????????
        {
            SetPlayerData(id, P_ADMIN, 1);
            UpdatePlayerDatabaseInt(id, "admin", 1);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "?????? ù??????????");
            UpdatePlayerDatabaseString(id, "prefix", "?????? ù??????????");
        }
        case 1: // ù??????????
        {
            SetPlayerData(id, P_ADMIN, 2);
            UpdatePlayerDatabaseInt(id, "admin", 2);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "ù??????????");
            UpdatePlayerDatabaseString(id, "prefix", "ù??????????");
        }
        case 2: // ??????? ù??????????
        {
            SetPlayerData(id, P_ADMIN, 3);
            UpdatePlayerDatabaseInt(id, "admin", 3);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ù??????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ù??????????");
        }
        case 3: // ????????? ???????ù ????????
        {
            SetPlayerData(id, P_ADMIN, 3);
            UpdatePlayerDatabaseInt(id, "admin", 3);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ???????ù ????????");
            UpdatePlayerDatabaseString(id, "prefix", "????. ???????ù ????????");
        }
        case 4: // ????????? ?????? ??????
        {
            SetPlayerData(id, P_ADMIN, 3);
            UpdatePlayerDatabaseInt(id, "admin", 3);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "????. ?????? ??????");
            UpdatePlayerDatabaseString(id, "prefix", "????. ?????? ??????");
        }
        case 5: // ????? ???????ù ????????
        {
            SetPlayerData(id, P_ADMIN, 4);
            UpdatePlayerDatabaseInt(id, "admin", 4);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "????? ???????ù ????????");
            UpdatePlayerDatabaseString(id, "prefix", "????? ???????ù ????????");
        }
        case 6: // ????? ?????? ??????
        {
            SetPlayerData(id, P_ADMIN, 4);
            UpdatePlayerDatabaseInt(id, "admin", 4);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "????? ?????? ??????");
            UpdatePlayerDatabaseString(id, "prefix", "????? ?????? ??????");
        }
        case 7: // ??????????? ???????? ù???????????
        {
            SetPlayerData(id, P_ADMIN, 5);
            UpdatePlayerDatabaseInt(id, "admin", 5);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "???. ???????? ù???????????");
            UpdatePlayerDatabaseString(id, "prefix", "???. ???????? ù???????????");
        }
        case 8: // ??????? ù??????????
        {
            SetPlayerData(id, P_ADMIN, 6);
            UpdatePlayerDatabaseInt(id, "admin", 6);
            SetPlayerData(id, P_HELPER, 4);
            UpdatePlayerDatabaseInt(id, "helper", 4);
            SetPlayerData(id, P_SLEDAK, 0);
            UpdatePlayerDatabaseInt(id, "sledak", 0);
            format(GetPlayerData(id, P_PREFIX), 35, "??????? ù??????????");
            UpdatePlayerDatabaseString(id, "prefix", "??????? ù??????????");
        }
    }

    format(textPlayer, sizeof(textPlayer), "{1E90FF} %s[%d] ???????? ??? ?? ???? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX));
    format(textAdmin, sizeof(textAdmin), "{1E90FF} ?? ????????? ?? ???? %s %s[%d]", GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);
    format(textAdmins, sizeof(textAdmins), "{636363} [A] ????????????? %s[%d] ???????? ?? ???? \"%s\" %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerData(id, P_PREFIX), GetPlayerNameEx(id), id);

    SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
    SendClientMessage(id, 0xFFFFFFFF, textPlayer);
    SendMessageToAdmins(textAdmins, 0x999999FF);
    AdminAuthorization(id);
    return 1;
}
    if(dialogid == DLG_ASKIN)
	    {
	        if(response)
	        {
				switch(listitem)
				{
			 		case 0:
			 		{
			   			SetPlayerSkin(playerid, 122);
  	                    SendClientMessage(playerid, COLOR_WHITE, "{ffff00}|{ffffff} ?? ??????? ?????? ???? ??????????????!");
  //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
					}
					case 1:
					{
			    		SetPlayerSkin(playerid, 25);
  	                    SendClientMessage(playerid, COLOR_WHITE, "{ffff00}|{ffffff} ?? ??????? ?????? ???? ?????????????a!");
  //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
					}
				}
			}
		}
	if(dialogid == DLG_MYSKIN)
        {
            if(response)
            {
			    
				
                return 1;
            }
            else
            {
                return 1;
            }
        }
	if(dialogid == DLG_MAPTRUE)
    {
       if(response)
       {
			new vehicleid = GetPlayerVehicleID(playerid);
			if(vehicleid > 0 && GetPlayerState(playerid) == PLAYER_STATE_DRIVER) 
			{
			SetVehiclePos(vehicleid, pos[playerid][0], pos[playerid][1], pos[playerid][2]);
			ShowNotificationDefault(playerid, 3, 5, 1, 0, "?? ????????????? ?? ?????????? ?????!");
			return 1;
			}
			SetPlayerInterior(playerid,0);
			player_state_pickup[playerid] = 0;
			SetPlayerVirtualWorld(playerid, 0);
			SetPlayerPos(playerid, pos[playerid][0], pos[playerid][1], pos[playerid][2]);
			ShowNotificationDefault(playerid, 3, 5, 1, 0, "?? ????????????? ?? ?????????? ?????!");
        }
        else
        {
			ShowNotificationDefault(playerid, 3, 3, 2, 0, "?? ???????? ???????????!");
			return 1;
    	}
    }
	if(dialogid == DIALOG_CREATE_FAMILY666)
        {
            if(response)
                {
				    SetPlayerPos(playerid,-145.753341,616.964782,12.255379);
                    Dialog
                    (
                        playerid, DIALOG_CREATE_FAMILY, DIALOG_STYLE_INPUT,
                        "{FF0000}???????? ?????",
                        "{FFFFFF}????? ?? ?????? ??????? ???? ?????.\n\
                        {FFFFFF}????:{ffff00} 3.000.000 ??????.",
                        "?????", "?????"
                    );
					return 1;
                }
                else
                {
                    return 1;
                }
        }
	switch(dialogid)
	{
	    case 17173:
	        {
	            if(response)
	            {
		            new carid = GetPlayerVehicleID(playerid);
				    Pizza[playerid] = AddStaticVehicleEx(462,2772.048828,-2394.696044,21.486932,183.298797,0,0,6000);
					PutPlayerInVehicle(playerid, Pizza[playerid], 0);
					SetTimerEx("ShowEngineNotification", 1000, false, "i", playerid);
	  				SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ?????? ???????? ????????!");
	  				SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ????? ???????? ?????, ???? ?????????? ?????");
	  				SetPlayerCheckpoint(playerid, PizzaCheckpoint[1][0], PizzaCheckpoint[1][1], PizzaCheckpoint[1][2], 2.0);
	  				SetPVarInt(playerid, "GetPlayerSkin", GetPlayerSkin(playerid));
	  				SetPlayerSkin(playerid, 155);
	  				SetPVarInt(playerid, "PizzaTime", gettime() + PizzaTime);
	  				SetPVarInt(playerid, "PizzaCheck", 1);
	  				return 1;
				}
			}
			case 17174:
	        {
	            if(response)
	            {
	                new s[30];
	                SendClientMessage(playerid, COLOR_LIGHTBLUE, ""SC"?? ??????? ????????? ???????? ????????!");
					GivePlayerMoneyEx(playerid, GetPVarInt(playerid, "PizzaMoney"), "kyr", true, true);
					SetPlayerSkin(playerid, GetPVarInt(playerid, "GetPlayerSkin"));
					DisablePlayerCheckpoint(playerid);
					DeletePVar(playerid, "PizzaTime");
					DeletePVar(playerid, "PizzaCheck");
					DeletePVar(playerid, "PizzaMoney");
					DeletePVar(playerid, "GetPlayerSkin");
					DestroyDeliveryVehicle(Pizza[playerid]);
					return 1;
				}
			}
			case 5004:
			  {
					if(response)
			   		{
						switch(listitem)//kinder
						{
				 			case 0:
							{
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]???????????? ?????? ????????????? ???????!");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]?? ?????? ?????? ???????? ????????????? ? ??????????? ????????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????: 2 ???? ? ???????, ????????, ??? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????????? ????????ù 30 ?????!");
				 			}
							case 1:
							{
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]???????????? ?????? ????????????? ???????!");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]?? ?????? ?????? ???????? ????????????? ? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????: 2 ???? ? ???????, ????????, ??? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????????? ????????ù 30 ?????!");
				  			}
							case 2:
							{
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]???????????? ?????? ????????????? ???????!");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]?? ?????? ?????? ???????? ????????????? ? ?????????????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????: 2 ???? ? ???????, ????????, ??? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????????? ????????ù 30 ?????!");
							}
							case 3:
							{
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]???????????? ?????? ????????????? ???????!");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]?? ?????? ?????? ???????? ????????????? ? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????: 2 ???? ? ???????, ????????, ??? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????????? ????????ù 30 ?????!");
							}
							case 4:
							{
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]???????????? ?????? ????????????? ???????!");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]?? ?????? ?????? ???????? ????????????? ? ???.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????: 2 ???? ? ???????, ????????, ??? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????????? ????????ù 30 ?????!");
							}
							case 5:
							{
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]???????????? ?????? ????????????? ???????!");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]?? ?????? ?????? ???????? ????????????? ? ????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????: 2 ???? ? ???????, ????????, ??? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????????? ????????ù 30 ?????!");
							}
							case 6:
							{
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]???????????? ?????? ????????????? ???????!");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]?? ?????? ?????? ???????? ????????????? ? ????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????: 2 ???? ? ???????, ????????, ??? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????????? ????????ù 30 ?????!");
							}
							case 7:
							{
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]???????????? ?????? ????????????? ???????!");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]?? ?????? ?????? ???????? ????????????? ? ???.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????: 2 ???? ? ???????, ????????, ??? ?????.");
								SendClientMessageToAll(0xfefaffAA, "{3366CC}[???-???????]????????????? ????????ù 30 ?????!");
							}
						}
					 }
			  	}
		case 17172:
		    {
		        if(response)
		        {
		            switch(listitem)
		            {
		                case 0: SetLaunchControl(playerid), GivePlayerMoneyEx(playerid, -20000, "?????", true, true), SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}?? ??????? ?????? ?????-????????!"), ShowTuneShowPlayerDialog(playerid);
		                case 1: DelLaunchControl(playerid), GivePlayerMoneyEx(playerid, -1000, "?????", true, true), SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}?? ??????? ??????? ?????-????????!"), ShowTuneShowPlayerDialog(playerid);
					}
				}
				else ShowTuneShowPlayerDialog(playerid);
			}
				
	    case 9873:
        {
			if(!response)
			{
				//SetCameraBehindPlayer(playerid);
				ShowTuneShowPlayerDialog(playerid);
				return true;
			}
            if(GetPlayerMoneyEx(playerid) >= 5_000)
            {
                new color1 = strval(inputtext), fmt_text[256],
                idx = GetPVarInt(playerid, "ownablecar_id");

                if(!(-1 <= color1 <= 128))
                {
                    SendClientMessage(playerid, 0xCECECEFF, "???? ????????? ?? 0 ?? 255");
                    new all_colors_str[1808], color_str[15];

                    for(new idxx; idxx < 128; idxx ++)
                    {
                        format(color_str, sizeof color_str, "{%06x}%d | ", VehicleColoursTableRGBA[idxx]>>> 8, idxx);
                        strcat(all_colors_str, color_str);
                        if(!(idxx % 10)) strcat(all_colors_str, "\n");
                    }
                    strcat(all_colors_str,"\n{FFFFFF}??????? ????? ? ?????? ???? \n??????: 10\n????????? ???????? {ffff00}5000{ffffff} ??????");
                    ShowPlayerDialog(playerid, 9873, DIALOG_STYLE_INPUT,""SERVER"?????????? ??????",
                    all_colors_str,
                    "?????????", "??????");

                    return true;
                }
                SetOwnableCarData(GetPlayerOwnableCar(playerid), OC_COLOR_1, color1);
                ChangeVehicleColor(GetPlayerOwnableCar(playerid), color1, GetOwnableCarData(GetPlayerOwnableCar(playerid), OC_COLOR_2));
                GivePlayerMoneyEx(playerid, -5000, "????????", true, true);

                //mysql_format(connects, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET color_1='%d' WHERE id='%d' LIMIT 1", color1, idx);
                //mysql_query(connects, fmt_text, false);
                
                mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET color_1='%d'  WHERE id='%d' LIMIT 1", color1, idx);
				mysql_query(mysql, fmt_text, false);

				//SetCameraBehindPlayer(playerid);
				ShowTuneShowPlayerDialog(playerid);
            }
            else
			{
				SendClientMessage(playerid, 0xCECECEFF, ""USC"? ??? ???????????? ??????? ??ù ??????? ????????!");
				ShowTuneShowPlayerDialog(playerid);
			}
        }
        case 1006:
		{
		   if (response)
		   {
  		     if (GetPlayerMoney(playerid) >= 5000)
  		     {
     		      GivePlayerMoneyEx(playerid, -5000);
      		     SetPlayerData(playerid, P_MEDCARD_STATE, 1);
      		     SetTimerEx("FinishMedcardTimer", 600000, false, "i", playerid);

    		       SCM(playerid, COLOR_WHITE, "?? ???????? ????????????. ???????? ????? ?????? ????? 10 ?????.");
  		     }
  		     else SCM(playerid, COLOR_WHITE, "???????????? ???????.");
 		  }
		}
		case DIALOG_ADELIVERY_SELECT:
{
    if (!response) return 1;

    new vehicleid = GetPlayerVehicleID(playerid);
    if (vehicleid == INVALID_VEHICLE_ID || GetVehicleModel(vehicleid) != VEHICLE_MODEL_SUPPLY_TRUCK)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ?????????ù ? {FFFF00}????? 54115{FFFFFF}.");

    new target_type = -1;
    new org_name[32];
    new msg[128];

    switch (listitem)
    {
        case 0:
        {
            target_type = ARMORY_TYPE_ARMOR;
            format(org_name, sizeof org_name, "{FFFF00}\"??????ù ?????\"");
            format(msg, sizeof msg, "?? ?????? ???????? ? ???????????: %s. {FFFFFF}???????ù????? ?? ????? ? ?.????? ??ù ????????.", org_name);
            SendClientMessage(playerid, -1, "??ù ?????? ???????? ??????????? {FFFF00}/loadboxes");
        }
        case 1:
        {
            target_type = ARMORY_TYPE_FSB;
            format(org_name, sizeof org_name, "{FFFF00}\"???\"");
            format(msg, sizeof msg, "?? ?????? ???????? ? ???????????: %s. {FFFFFF}???????ù????? ?? ????? ????? ??ù ????????.", org_name);
            SendClientMessage(playerid, -1, "??ù ?????? ???????? ??????????? {FFFF00}/loadboxes");
        }
        case 2:
        {
            target_type = ARMORY_TYPE_POLICE;
            format(org_name, sizeof org_name, "{FFFF00}\"??????ù\"");
            format(msg, sizeof msg, "?? ?????? ???????? ? ???????????: %s. {FFFFFF}???????ù????? ?? ????? ????? ??ù ????????.", org_name);
            SendClientMessage(playerid, -1, "??ù ?????? ???????? ??????????? {FFFF00}/loadboxes");
        }
        case 3:
        {
            target_type = ARMORY_TYPE_SECURITY;
            format(org_name, sizeof org_name, "{FFFF00}\"?????????????\"");
            format(msg, sizeof msg, "?? ?????? ???????? ? ???????????: %s. {FFFFFF}???????ù????? ?? ????? ????? ??ù ????????.", org_name);
            SendClientMessage(playerid, -1, "??ù ?????? ???????? ??????????? {FFFF00}/loadboxes");
        }
        case 4:
        {
            target_type = ARMORY_TYPE_FSIN;
            format(org_name, sizeof org_name, "{FFFF00}\"????\"");
            format(msg, sizeof msg, "?? ?????? ???????? ? ???????????: %s. {FFFFFF}???????ù????? ?? ????? ????? ??ù ????????.", org_name);
            SendClientMessage(playerid, -1, "??ù ?????? ???????? ??????????? {FFFF00}/loadboxes");
        }
    }

    if (target_type == -1)
        return SendClientMessage(playerid, -1, "?????? ?????? ???????????.");

    g_delivery_vehicle[vehicleid] = true;
    g_delivery_boxes[vehicleid] = 0;
    g_delivery_target[vehicleid] = target_type;
    g_delivery_target_name[vehicleid][0] = EOS;
    strcat(g_delivery_target_name[vehicleid], org_name);

    CreateDeliveryVehicleLabel(vehicleid, target_type);

    SendClientMessage(playerid, -1, msg);
    return 1;
}

case DIALOG_ADELIVERY_CONFIRM:
{
    if (!response) return 1;

    new vehicleid = GetPlayerVehicleID(playerid);
    if (vehicleid == INVALID_VEHICLE_ID || GetVehicleModel(vehicleid) != VEHICLE_MODEL_SUPPLY_TRUCK)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ?????????ù ? ?????????? ????? 54115.");

    AbortDeliveryByVehicle(vehicleid);
    return 1;
}
		
		case DIALOG_SPAWN_SELECT:
{
    if (!response) return 1;

    switch (listitem)
    {
        case 0: // ??????
        {
            new rand = random(sizeof spawn_pos_data);
            SetPlayerPosEx(playerid,
                spawn_pos_data[rand][0],
                spawn_pos_data[rand][1],
                spawn_pos_data[rand][2],
                spawn_pos_data[rand][3],
                0, 0);

            TogglePlayerControllable(playerid, true);
            SetCameraBehindPlayer(playerid);

            if (SpawnWertonFix[playerid] == 0)
            {
                SpawnWertonFix[playerid] = 1;
                callcmd::spawningwerton(playerid, "");
            }
          
         CheckWorkDayVisuals(playerid);
         
           FinalizeSpawnState(playerid);

            if (GetPlayerAdminEx(playerid) > 1)
            {
                AdminAuthorization(playerid);
            }
           
           CheckMedicalCardExpiration(playerid);
            return 1;
        }

        case 1: // ????????? ????? ??????
        {
            if (gettime() - GetPlayerData(playerid, P_LAST_LOGOUT) > 300)
            {
                SendClientMessage(playerid, -1, "?????? ????? 5 ????? ó ????? ??????????");
                ShowSpawnSelectionDialog(playerid);
                return 1;
            }

            new Float:x = g_lastposition[playerid][lp_x];
            new Float:y = g_lastposition[playerid][lp_y];
            new Float:z = g_lastposition[playerid][lp_z];
            new int     = g_lastposition[playerid][lp_int];
            new vw      = g_lastposition[playerid][lp_vw];

            if (x == 0.0 && y == 0.0 && z == 0.0)
            {
                SendClientMessage(playerid, -1, "??????: ??????ù ?????? ?? ?????????");
                ShowSpawnSelectionDialog(playerid);
                return 1;
            }

            SetPlayerPosEx(playerid, x, y, z, 90.0, int, vw);
            TogglePlayerControllable(playerid, true);
            SetCameraBehindPlayer(playerid);

            if (SpawnWertonFix[playerid] == 0)
            {
                SpawnWertonFix[playerid] = 1;
                callcmd::spawningwerton(playerid, "");
            }
          
         CheckWorkDayVisuals(playerid);
         
           FinalizeSpawnState(playerid);

            if (GetPlayerAdminEx(playerid) > 1)
            {
                AdminAuthorization(playerid);
            }
			
			CheckMedicalCardExpiration(playerid);
            return 1;
        }

        case 2: // ??????????ù
        {
            new team_id = GetPlayerTeamEx(playerid);
            if (!team_id)
            {
                SendClientMessage(playerid, -1, "?? ?? ???????? ? ???????????");
                ShowSpawnSelectionDialog(playerid);
                return 1;
            }

            SetPlayerPosEx(playerid,
                GetTeamData(team_id, O_SPAWN)[0],
                GetTeamData(team_id, O_SPAWN)[1],
                GetTeamData(team_id, O_SPAWN)[2],
                GetTeamData(team_id, O_SPAWN)[3],
                GetTeamData(team_id, O_SPAWN_INT),
                GetTeamData(team_id, O_SPAWN_VW));

            TogglePlayerControllable(playerid, true);
            SetCameraBehindPlayer(playerid);

            if (SpawnWertonFix[playerid] == 0)
            {
                SpawnWertonFix[playerid] = 1;
                callcmd::spawningwerton(playerid, "");
            }
                      
            CheckWorkDayVisuals(playerid);
          
           FinalizeSpawnState(playerid);

            if (GetPlayerAdminEx(playerid) > 1)
            {
                AdminAuthorization(playerid);
            }
			
			CheckMedicalCardExpiration(playerid);
            return 1;
        }

        case 3: // ???
        {
            new house_id = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
            if (house_id == -1)
            {
                SendClientMessage(playerid, -1, "? ??? ??? ????");
                ShowSpawnSelectionDialog(playerid);
                return 1;
            }

            EnterPlayerToHouse(playerid, house_id);
            TogglePlayerControllable(playerid, true);
            SetCameraBehindPlayer(playerid);

            if (SpawnWertonFix[playerid] == 0)
            {
                SpawnWertonFix[playerid] = 1;
                callcmd::spawningwerton(playerid, "");
            }
                     
           CheckWorkDayVisuals(playerid);
          
           FinalizeSpawnState(playerid);

            if (GetPlayerAdminEx(playerid) > 1)
            {
                AdminAuthorization(playerid);
            }
           
           CheckMedicalCardExpiration(playerid);
            return 1;
        }

        case 4: // ?????
        {
            new house_id = GetPlayerHouse(playerid, HOUSE_TYPE_ROOM);
            if (house_id == -1)
            {
                SendClientMessage(playerid, -1, "?? ?? ?????????? ? ????-????");
                ShowSpawnSelectionDialog(playerid);
                return 1;
            }

            EnterPlayerToHouse(playerid, house_id);
            TogglePlayerControllable(playerid, true);
            SetCameraBehindPlayer(playerid);

            if (SpawnWertonFix[playerid] == 0)
            {
                SpawnWertonFix[playerid] = 1;
                callcmd::spawningwerton(playerid, "");
            }
                     
           CheckWorkDayVisuals(playerid);
          
           FinalizeSpawnState(playerid);

            if (GetPlayerAdminEx(playerid) > 1)
            {
                AdminAuthorization(playerid);
            }

			CheckMedicalCardExpiration(playerid);
            return 1;
        }

        case 5: // ???? ?????
        {
            new fam_id = GetPlayerIdFamily(playerid);
            if (fam_id == -1)
            {
                SendClientMessage(playerid, -1, "?? ?? ???????? ? ?????");
                ShowSpawnSelectionDialog(playerid);
                return 1;
            }

            new house_id = GetFamily(fam_id, family_house);
            if (house_id == -1)
            {
                SendClientMessage(playerid, -1, "? ????? ????? ??? ???? ??ù ??????");
                ShowSpawnSelectionDialog(playerid);
                return 1;
            }

            EnterPlayerToHouse(playerid, house_id);
            TogglePlayerControllable(playerid, true);
            SetCameraBehindPlayer(playerid);

            if (SpawnWertonFix[playerid] == 0)
            {
                SpawnWertonFix[playerid] = 1;
                callcmd::spawningwerton(playerid, "");
            }
                     
           CheckWorkDayVisuals(playerid);

          
           FinalizeSpawnState(playerid);

            if (GetPlayerAdminEx(playerid) > 1)
            {
                AdminAuthorization(playerid);
            }

			CheckMedicalCardExpiration(playerid);
            return 1;
        }
    }
    return 1;
}
		case DIALOG_FAM_SPAWN_SET:
{
    if(!response) return 1;

    new fam_id = GetPlayerIdFamily(playerid);
    new house_id = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);

    SetFamily(fam_id, family_house, house_id);

    new query[128];
    format(query, sizeof query, "UPDATE family SET house=%d WHERE id=%d", house_id, fam_id);
    mysql_query(mysql, query, false);

    SendClientMessage(playerid, -1, "?? ?????????? ???? ??? ??? ????? ?????? ?????");
}

		case DIALOG_FAM_SPAWN_REMOVE:
{
    if(!response) return 1;

    new fam_id = GetPlayerIdFamily(playerid);

    SetFamily(fam_id, family_house, -1);

    new query[128];
    format(query, sizeof query, "UPDATE family SET house=-1 WHERE id=%d", fam_id);
    mysql_query(mysql, query, false);

    SendClientMessage(playerid, -1, "?? ??????? ????? ?????? ?????");
}

		case DIALOG_ADMIN_KICK:
{
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    if(!response) return 1;
    
    switch(listitem)
    {
        case 0: ShowPlayerDialog(playerid, DIALOG_ADMIN_KICK_REASON, DIALOG_STYLE_INPUT, "??? ??????", "??????? ??????? ????:", "???????", "?????");
        case 1: AdminKickPlayer(playerid, targetid, 1, "??? ???????");
    }
    return 1;
}

case DIALOG_ADMIN_KICK_REASON:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_KICK, DIALOG_STYLE_LIST, "??? ??????", "??????? ???\nù???? ???", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    if(strlen(inputtext) == 0)
    {
        SendClientMessage(playerid, 0xFF3333FF, "??????? ???????!");
        ShowPlayerDialog(playerid, DIALOG_ADMIN_KICK_REASON, DIALOG_STYLE_INPUT, "??? ??????", "??????? ??????? ????:", "???????", "?????");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    AdminKickPlayer(playerid, targetid, 0, inputtext);
    return 1;
}

case DIALOG_ADMIN_MUTE:
{
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    if(!response) return 1;
    
    switch(listitem)
    {
        case 0: ShowPlayerDialog(playerid, DIALOG_ADMIN_MUTE_TIME, DIALOG_STYLE_INPUT, "?????? ???", "??????? ????ù ???? (1-360 ?????):", "?????", "?????");
        case 1: ShowPlayerDialog(playerid, DIALOG_ADMIN_MUTE_UNREASON, DIALOG_STYLE_INPUT, "??ù?? ???", "??????? ??????? ??ù??ù:", "??ù??", "?????");
    }
    return 1;
}

case DIALOG_ADMIN_MUTE_TIME:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_MUTE, DIALOG_STYLE_LIST, "??? ??????", "?????? ???\n??ù?? ???", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    new time = strval(inputtext);
    if(time < 1 || time > 360)
    {
        SendClientMessage(playerid, 0xFF3333FF, "????ù ?????? ???? ?? 1 ?? 360 ?????!");
        ShowPlayerDialog(playerid, DIALOG_ADMIN_MUTE_TIME, DIALOG_STYLE_INPUT, "?????? ???", "??????? ????ù ???? (1-360 ?????):", "?????", "?????");
        return 1;
    }
    
    SetPVarInt(playerid, "mute_time", time);
    ShowPlayerDialog(playerid, DIALOG_ADMIN_MUTE_REASON, DIALOG_STYLE_INPUT, "??????? ????", "??????? ??????? ????:", "??????", "?????");
    return 1;
}

case DIALOG_ADMIN_MUTE_REASON:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_MUTE_TIME, DIALOG_STYLE_INPUT, "?????? ???", "??????? ????ù ???? (1-360 ?????):", "?????", "?????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    new time = GetPVarInt(playerid, "mute_time");
    AdminMutePlayer(playerid, targetid, 0, time, inputtext);
    DeletePVar(playerid, "mute_time");
    return 1;
}

case DIALOG_ADMIN_MUTE_UNREASON:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_MUTE, DIALOG_STYLE_LIST, "??? ??????", "?????? ???\n??ù?? ???", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    AdminMutePlayer(playerid, targetid, 1, 0, inputtext);
    return 1;
}

case DIALOG_ADMIN_JAIL:
{
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    if(!response) return 1;
    
    switch(listitem)
    {
        case 0: ShowPlayerDialog(playerid, DIALOG_ADMIN_JAIL_TIME, DIALOG_STYLE_INPUT, "???????? ? ??????", "??????? ????ù ?????? (1-360 ?????):", "?????", "?????");
        case 1: ShowPlayerDialog(playerid, DIALOG_ADMIN_JAIL_UNREASON, DIALOG_STYLE_INPUT, "????????? ?? ??????", "??????? ??????? ???????:", "?????????", "?????");
    }
    return 1;
}

case DIALOG_ADMIN_JAIL_TIME:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_JAIL, DIALOG_STYLE_LIST, "ù?????", "???????? ? ??????\n????????? ?? ??????", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    new time = strval(inputtext);
    if(time < 1 || time > 360)
    {
        SendClientMessage(playerid, 0xFF3333FF, "????ù ?????? ???? ?? 1 ?? 360 ?????!");
        ShowPlayerDialog(playerid, DIALOG_ADMIN_JAIL_TIME, DIALOG_STYLE_INPUT, "???????? ? ??????", "??????? ????ù ?????? (1-360 ?????):", "?????", "?????");
        return 1;
    }
    
    SetPVarInt(playerid, "jail_time", time);
    ShowPlayerDialog(playerid, DIALOG_ADMIN_JAIL_REASON, DIALOG_STYLE_INPUT, "??????? ??????", "??????? ??????? ??????:", "????????", "?????");
    return 1;
}

case DIALOG_ADMIN_JAIL_REASON:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_JAIL_TIME, DIALOG_STYLE_INPUT, "???????? ? ??????", "??????? ????ù ?????? (1-360 ?????):", "?????", "?????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    new time = GetPVarInt(playerid, "jail_time");
    AdminJailPlayer(playerid, targetid, 0, time, inputtext);
    DeletePVar(playerid, "jail_time");
    return 1;
}

case DIALOG_ADMIN_JAIL_UNREASON:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_JAIL, DIALOG_STYLE_LIST, "ù?????", "???????? ? ??????\n????????? ?? ??????", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    AdminJailPlayer(playerid, targetid, 1, 0, inputtext);
    return 1;
}

case DIALOG_ADMIN_WARN:
{
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    if(!response) return 1;
    
    switch(listitem)
    {
        case 0: ShowPlayerDialog(playerid, DIALOG_ADMIN_WARN_REASON, DIALOG_STYLE_INPUT, "?????? ??????????????", "??????? ??????? ?????????????ù:", "??????", "?????");
        case 1: ShowPlayerDialog(playerid, DIALOG_ADMIN_WARN_UNREASON, DIALOG_STYLE_INPUT, "??ù?? ?????????????ù", "??????? ??????? ??ù??ù:", "??ù??", "?????");
    }
    return 1;
}

case DIALOG_ADMIN_WARN_REASON:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_WARN, DIALOG_STYLE_LIST, "??????????????", "?????? ??????????????\n??ù?? ?????????????ù", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    AdminWarnPlayer(playerid, targetid, 0, inputtext);
    return 1;
}

case DIALOG_ADMIN_WARN_UNREASON:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_WARN, DIALOG_STYLE_LIST, "??????????????", "?????? ??????????????\n??ù?? ?????????????ù", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    AdminWarnPlayer(playerid, targetid, 1, inputtext);
    return 1;
}

case DIALOG_ADMIN_SLAP:
{
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    if(!response) return 1;
    
    switch(listitem)
    {
        case 0: ShowPlayerDialog(playerid, DIALOG_ADMIN_SLAP_REASON, DIALOG_STYLE_INPUT, "?????????? ?????", "??????? ???????:", "??????????", "?????");
        case 1: ShowPlayerDialog(playerid, DIALOG_ADMIN_SLAP_REASON, DIALOG_STYLE_INPUT, "?????????? ????", "??????? ???????:", "??????????", "?????");
    }
    SetPVarInt(playerid, "slap_direction", listitem);
    return 1;
}

case DIALOG_ADMIN_SLAP_REASON:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_SLAP, DIALOG_STYLE_LIST, "?????????? ??????", "?????????? ?????\n?????????? ????", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    new direction = GetPVarInt(playerid, "slap_direction");
    AdminSlapPlayer(playerid, targetid, direction, inputtext);
    DeletePVar(playerid, "slap_direction");
    return 1;
}

case DIALOG_ADMIN_BAN:
{
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    if(!response) return 1;
    
    switch(listitem)
    {
        case 0: ShowPlayerDialog(playerid, DIALOG_ADMIN_BAN_TIME, DIALOG_STYLE_INPUT, "????????? ???", "??????? ???? ???? ? ??ù?:", "?????", "?????");
        case 1: ShowPlayerDialog(playerid, DIALOG_ADMIN_BAN_REASON, DIALOG_STYLE_INPUT, "???????????? ???", "??????? ??????? ????:", "????????", "?????");
    }
    SetPVarInt(playerid, "ban_permanent", listitem);
    return 1;
}

case DIALOG_ADMIN_BAN_TIME:
{
    if(!response) 
    {
        ShowPlayerDialog(playerid, DIALOG_ADMIN_BAN, DIALOG_STYLE_LIST, "??? ??????", "????????? ???\n???????????? ???", "???????", "??????");
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    new days = strval(inputtext);
    new max_days = GetPlayerAdminEx(playerid) > 4 ? 365 : 30;
    
    if(days < 1 || days > max_days)
    {
        new msg[128];
        format(msg, sizeof(msg), "???? ???? ?????? ???? ?? 1 ?? %d ????!", max_days);
        SendClientMessage(playerid, 0xFF3333FF, msg);
        ShowPlayerDialog(playerid, DIALOG_ADMIN_BAN_TIME, DIALOG_STYLE_INPUT, "????????? ???", "??????? ???? ???? ? ??ù?:", "?????", "?????");
        return 1;
    }
    
    SetPVarInt(playerid, "ban_time", days);
    ShowPlayerDialog(playerid, DIALOG_ADMIN_BAN_REASON, DIALOG_STYLE_INPUT, "??????? ????", "??????? ??????? ????:", "????????", "?????");
    return 1;
}

case DIALOG_ADMIN_BAN_REASON:
{
    if(!response) 
    {
        if(GetPVarInt(playerid, "ban_permanent") == 0)
        {
            ShowPlayerDialog(playerid, DIALOG_ADMIN_BAN_TIME, DIALOG_STYLE_INPUT, "????????? ???", "??????? ???? ???? ? ??ù?:", "?????", "?????");
        }
        else
        {
            ShowPlayerDialog(playerid, DIALOG_ADMIN_BAN, DIALOG_STYLE_LIST, "??? ??????", "????????? ???\n???????????? ???", "???????", "??????");
        }
        return 1;
    }
    
    new targetid = GetPlayerSpectateData(playerid, S_PLAYER);
    if(targetid == -1 || !IsPlayerConnected(targetid))
    {
        SendClientMessage(playerid, 0xFF3333FF, "????? ?? ??????!");
        return 1;
    }
    
    utf8_to_cp1251(inputtext);
    new permanent = GetPVarInt(playerid, "ban_permanent");
    new time = GetPVarInt(playerid, "ban_time");
    
    AdminBanPlayer(playerid, targetid, permanent, time, inputtext);
    
    DeletePVar(playerid, "ban_permanent");
    DeletePVar(playerid, "ban_time");
    return 1;
}

		case DIALOG_MASC_MAIN:
{
    if(!response) return 1;

    switch(listitem)
    {
        case 0:
        {
            new text[512];
            for(new i = 0; i < sizeof gov_names; i++)
                format(text, sizeof text, "%s%s\n", text, gov_names[i]);

            ShowPlayerDialog(playerid, DIALOG_MASC_GOV, DIALOG_STYLE_LIST, "{EB4C42}Baze Russia RolePlay{FFFFFF} | ?????????", text, "???????", "?????");
        }
        case 1:
        {
            new text[256];
            for(new i = 0; i < sizeof gang_names; i++)
                format(text, sizeof text, "%s%s\n", text, gang_names[i]);

            ShowPlayerDialog(playerid, DIALOG_MASC_GANG, DIALOG_STYLE_LIST, "{EB4C42}Baze Russia RolePlay{FFFFFF} | ?????????", text, "???????", "?????");
        }
        case 2:
		{
 		  if(P_MASCIR[playerid] == 0)
  		     return SendClientMessage(playerid, COLOR_GREY, "? ??? ???? ??????? ??????????.");

  		 P_MASCIR[playerid] = 0;
 		  P_MASCIR_SKIN[playerid] = 0;

 		  SetPlayerSkin(playerid, P_REAL_SKIN[playerid]);
 		  SetPlayerColor(playerid, P_REAL_COLOR[playerid]);

  		 SendClientMessage(playerid, 0xCECECEFF, "?????????? ??ù??.");
 		  return 1;
}
    }
    return 1;
}

		case DIALOG_MASC_GOV:
{
    if(!response) return 1;
   
   if(P_MASCIR[playerid] != 0)
{
    P_MASCIR[playerid] = 0;
    P_MASCIR_SKIN[playerid] = 0;
    SetPlayerSkin(playerid, P_REAL_SKIN[playerid]);
    SetPlayerColor(playerid, P_REAL_COLOR[playerid]);
}

	P_REAL_COLOR[playerid] = GetPlayerColor(playerid);
	P_REAL_SKIN[playerid] = GetPlayerSkin(playerid);

    P_MASCIR[playerid] = gov_ids[listitem];
    SetPlayerColor(playerid, org_colors[listitem]);

    new skin_text[1024];
    format(skin_text, sizeof skin_text, "%s", GenerateSkinDialog(playerid, P_MASCIR[playerid]));
    ShowPlayerDialog(playerid, DIALOG_MASC_SKIN, DIALOG_STYLE_TABLIST_HEADERS, "{EB4C42}Baze Russia RolePlay{FFFFFF} | ?????????", skin_text, "???????", "?????");
    return 1;
}

		case DIALOG_MASC_GANG:
{
    if(!response) return 1;
   
   if(P_MASCIR[playerid] != 0)
{
    P_MASCIR[playerid] = 0;
    P_MASCIR_SKIN[playerid] = 0;
    SetPlayerSkin(playerid, P_REAL_SKIN[playerid]);
    SetPlayerColor(playerid, P_REAL_COLOR[playerid]);
}

	P_REAL_COLOR[playerid] = GetPlayerColor(playerid);
	P_REAL_SKIN[playerid] = GetPlayerSkin(playerid);

    P_MASCIR[playerid] = gang_ids[listitem];
    SetPlayerColor(playerid, org_colors[listitem + 7]);

    new skin_text[1024];
    format(skin_text, sizeof skin_text, "%s", GenerateSkinDialog(playerid, P_MASCIR[playerid]));
    ShowPlayerDialog(playerid, DIALOG_MASC_SKIN, DIALOG_STYLE_TABLIST_HEADERS, "{EB4C42}Baze Russia RolePlay{FFFFFF} | ?????????", skin_text, "???????", "?????");
    return 1;
}

		case DIALOG_MASC_SKIN:
{
    if (!response) return 1;

    new org_id = P_MASCIR[playerid];
    new index = GetPlayerListitemValue(playerid, listitem);
    new skin = g_organization[org_id][O_SKINS][index];

    P_MASCIR_SKIN[playerid] = skin;
    SetPlayerSkin(playerid, skin);

    new msg[96];
    format(msg, sizeof msg, "?? ???????? ????? %s (???? %d)", org_mask_names[org_id - 1], skin);
    SendClientMessage(playerid, 0x33CC66FF, msg);

    new info_text[1024];
    strcat(info_text, "{FFFFFF}?? ??????? ??????????? ? ??????????? ?????? ? ????? ??????? ?? ????????????.\n\n");
    strcat(info_text, "??ù ????, ????? ???? ?????? ???? ????????, ???????????? ? ?????????:\n");
    strcat(info_text, "{00FF00}/mn >> ?????? ?????? >> ??????ù\n\n");
    strcat(info_text, "{EB4C42}/rc{FFFFFF} ó ≤? ????ù ??ù ???????? ? ???. ??????????\n");
    strcat(info_text, "{EB4C42}/rnc{FFFFFF} ó ??? ????ù ??ù ???????? ? ???. ??????????\n");
    strcat(info_text, "{EB4C42}/cmembers{FFFFFF} ó ?????????? ?????? ??????????? ?? ?????????? ???????????\n");
    strcat(info_text, "{EB4C42}/dismiss [ID ??????]{FFFFFF} ó ??????? ?????????? ??????? ????????\n");
    strcat(info_text, "   (????ù, ?????, ????, ????). ???????? ? 9 ????? ? ???.\n\n");
    strcat(info_text, "{FFFF00}???????, ??? ?? ?????????? ?? ?ù??? ????? ? ?????????????? ???????????.\n");
    strcat(info_text, "????????? ?????? ??????????? ? ????? ????????ù? ? ?????????????? ???????????.\n\n");
    strcat(info_text, "{00FF00}???????? ??????!");

    ShowPlayerDialog(playerid, DIALOG_MASC_INFO, DIALOG_STYLE_MSGBOX, "{EB4C42}?????????", info_text, "???ù?", "");
    return 1;
}
case DIALOG_AHELP:
{
    if(response)
    {
        switch(listitem)
        {
            case 0:
            {
                new admin_level = GetPlayerAdminEx(playerid);

                switch(admin_level)
                {
                    case 1: // ??????? ?????????
                    {
                        Dialog(playerid, 12201, DIALOG_STYLE_LIST, "??????? ???????? ??????????",
                            "/a - ??? ?????????????\n\
                            /askin - ????? ?????????????\n\
                            /slap - ?????????? ??????\n\
                            /flip - ??????????? ??????\n\
                            /vget - ??????????????? ?????????\n\
                            /sp - ?????? ?? ???????\n\
                            /spoff - ????? ?? ?????? ?? ???????\n\
                            /mute - ????????????? ??? ??????\n\
                            /spawn - ?????????? ??????\n\
                            /kick - ??????? ?????? ? ???????\n\
                            /fixcar - ???????? ??????",
                            "???????", "");
                    }
                    case 2: // ?????????
                    {
                        Dialog(playerid, 12201, DIALOG_STYLE_LIST, "??????? ??????????",
                            "/a - ??? ?????????????\n\
                            /askin - ????? ?????????????\n\
                            /slap - ?????????? ??????\n\
                            /flip - ??????????? ??????\n\
                            /vget - ??????????????? ?????????\n\
                            /sp - ?????? ?? ???????\n\
                            /spoff - ????? ?? ?????? ?? ???????\n\
                            /mute - ????????????? ??? ??????\n\
                            /spawn - ?????????? ??????\n\
                            /kick - ??????? ?????? ? ???????\n\
                            /fixcar - ???????? ??????\n\
                            /unmute - ?????????????? ??? ??????\n\
                            /jail - ???????? ?????? ? ??????\n\
                            /okay - ??????????? ????? ????? ??????\n\
                            /goto - ????????????????ù ? ??????\n\
                            /gethere - ??????????????? ?????? ? ????",
                            "???????", "");
                    }
                    case 3: // ?????????????
                    {
                        Dialog(playerid, 12201, DIALOG_STYLE_LIST, "??????? ??????????????",
                            "/a - ??? ?????????????\n\
                            /askin - ????? ?????????????\n\
                            /slap - ?????????? ??????\n\
                            /flip - ??????????? ??????\n\
                            /vget - ??????????????? ?????????\n\
                            /sp - ?????? ?? ???????\n\
                            /spoff - ????? ?? ?????? ?? ???????\n\
                            /mute - ????????????? ??? ??????\n\
                            /spawn - ?????????? ??????\n\
                            /kick - ??????? ?????? ? ???????\n\
                            /fixcar - ???????? ??????\n\
                            /unmute - ?????????????? ??? ??????\n\
                            /jail - ???????? ?????? ? ??????\n\
                            /okay - ??????????? ????? ????? ??????\n\
                            /goto - ????????????????ù ? ??????\n\
                            /gethere - ??????????????? ?????? ? ????\n\
                            /unjail - ????????? ?????? ?? ??????\n\
                            /ban - ????????????? ??????\n\
                            /setskin - ?????? ????",
                            "???????", "");
                    }
                    case 4: // ??????? ?????????????
                    {
                        Dialog(playerid, 12201, DIALOG_STYLE_LIST, "??????? ???????? ??????????????",
                            "/a - ??? ?????????????\n\
                            /askin - ????? ?????????????\n\
                            /slap - ?????????? ??????\n\
                            /flip - ??????????? ??????\n\
                            /vget - ??????????????? ?????????\n\
                            /sp - ?????? ?? ???????\n\
                            /spoff - ????? ?? ?????? ?? ???????\n\
                            /mute - ????????????? ??? ??????\n\
                            /spawn - ?????????? ??????\n\
                            /kick - ??????? ?????? ? ???????\n\
                            /fixcar - ???????? ??????\n\
                            /unmute - ?????????????? ??? ??????\n\
                            /jail - ???????? ?????? ? ??????\n\
                            /okay - ??????????? ????? ????? ??????\n\
                            /goto - ????????????????ù ? ??????\n\
                            /gethere - ??????????????? ?????? ? ????\n\
                            /unjail - ????????? ?????? ?? ??????\n\
                            /ban - ????????????? ??????\n\
                            /setskin - ?????? ????\n\
                            /unban - ?????????????? ??????\n\
                            /money - ???????? ????? ??????\n\
                            /cc - ???????? ???\n\
                            /veh - ?????????? ?????????\n\
                            /hstats - ?????????? ???????",
                            "???????", "");
                    }
                    case 5: // ??????? ?????????????
                    {
                        Dialog(playerid, 12201, DIALOG_STYLE_LIST, "??????? ???????? ??????????????",
                            "/a - ??? ?????????????\n\
                            /askin - ????? ?????????????\n\
                            /slap - ?????????? ??????\n\
                            /flip - ??????????? ??????\n\
                            /vget - ??????????????? ?????????\n\
                            /sp - ?????? ?? ???????\n\
                            /spoff - ????? ?? ?????? ?? ???????\n\
                            /mute - ????????????? ??? ??????\n\
                            /spawn - ?????????? ??????\n\
                            /kick - ??????? ?????? ? ???????\n\
                            /fixcar - ???????? ??????\n\
                            /unmute - ?????????????? ??? ??????\n\
                            /jail - ???????? ?????? ? ??????\n\
                            /okay - ??????????? ????? ????? ??????\n\
                            /goto - ????????????????ù ? ??????\n\
                            /gethere - ??????????????? ?????? ? ????\n\
                            /unjail - ????????? ?????? ?? ??????\n\
                            /ban - ????????????? ??????\n\
                            /setskin - ?????? ????\n\
                            /unban - ?????????????? ??????\n\
                            /money - ???????? ????? ??????\n\
                            /cc - ???????? ???\n\
                            /veh - ?????????? ?????????\n\
                            /hstats - ?????????? ???????\n\
                            /setleader - ?????? ??????\n\
                            /templeader - ?????? ?????????? ??????\n\
                            /warn - ?????? ???? ??????\n\
                            /sethelper - ????????? ?? ???????\n\
                            /delhelper - ??ù?? ? ???????\n\
                            /astats - ?????????? ??????????????",
                            "???????", "");
                    }
                    case 6: // ??????? ???????
                    {
                        Dialog(playerid, 12201, DIALOG_STYLE_LIST, "??????? ??????? ???????",
                            "/a - ??? ?????????????\n\
                            /askin - ????? ?????????????\n\
                            /slap - ?????????? ??????\n\
                            /flip - ??????????? ??????\n\
                            /vget - ??????????????? ?????????\n\
                            /sp - ?????? ?? ???????\n\
                            /spoff - ????? ?? ?????? ?? ???????\n\
                            /mute - ????????????? ??? ??????\n\
                            /spawn - ?????????? ??????\n\
                            /kick - ??????? ?????? ? ???????\n\
                            /fixcar - ???????? ??????\n\
                            /unmute - ?????????????? ??? ??????\n\
                            /jail - ???????? ?????? ? ??????\n\
                            /okay - ??????????? ????? ????? ??????\n\
                            /goto - ????????????????ù ? ??????\n\
                            /gethere - ??????????????? ?????? ? ????\n\
                            /unjail - ????????? ?????? ?? ??????\n\
                            /ban - ????????????? ??????\n\
                            /setskin - ?????? ????\n\
                            /unban - ?????????????? ??????\n\
                            /money - ???????? ????? ??????\n\
                            /cc - ???????? ???\n\
                            /veh - ?????????? ?????????\n\
                            /hstats - ?????????? ???????\n\
                            /setleader - ?????? ??????\n\
                            /templeader - ?????? ?????????? ??????\n\
                            /warn - ?????? ???? ??????\n\
                            /sethelper - ????????? ?? ???????\n\
                            /delhelper - ??ù?? ? ???????\n\
                            /astats - ?????????? ??????????????\n\
                            /setadmin - ????????? ?? ??????????????\n\
                            /deladmin - ??ù?? ? ??????????????\n\
                            /awarn - ?????? ???? ??????????????\n\
                            /admup - ???????? ??????????????\n\
                            /admdown - ???????? ??????????????\n\
                            /permban - ?????? ??? ????????",
                            "???????", "");
                    }
                    case 7: // ???????????
                    {
                        Dialog(playerid, 12201, DIALOG_STYLE_LIST, "??????? ????????????",
                            "/a - ??? ?????????????\n\
                            /askin - ????? ?????????????\n\
                            /slap - ?????????? ??????\n\
                            /flip - ??????????? ??????\n\
                            /vget - ??????????????? ?????????\n\
                            /sp - ?????? ?? ???????\n\
                            /spoff - ????? ?? ?????? ?? ???????\n\
                            /mute - ????????????? ??? ??????\n\
                            /spawn - ?????????? ??????\n\
                            /kick - ??????? ?????? ? ???????\n\
                            /fixcar - ???????? ??????\n\
                            /unmute - ?????????????? ??? ??????\n\
                            /jail - ???????? ?????? ? ??????\n\
                            /okay - ??????????? ????? ????? ??????\n\
                            /goto - ????????????????ù ? ??????\n\
                            /gethere - ??????????????? ?????? ? ????\n\
                            /unjail - ????????? ?????? ?? ??????\n\
                            /ban - ????????????? ??????\n\
                            /setskin - ?????? ????\n\
                            /unban - ?????????????? ??????\n\
                            /money - ???????? ????? ??????\n\
                            /cc - ???????? ???\n\
                            /veh - ?????????? ?????????\n\
                            /hstats - ?????????? ???????\n\
                            /setleader - ?????? ??????\n\
                            /templeader - ?????? ?????????? ??????\n\
                            /warn - ?????? ???? ??????\n\
                            /sethelper - ????????? ?? ???????\n\
                            /delhelper - ??ù?? ? ???????\n\
                            /astats - ?????????? ??????????????\n\
                            /setadmin - ????????? ?? ??????????????\n\
                            /deladmin - ??ù?? ? ??????????????\n\
                            /awarn - ?????? ???? ??????????????\n\
                            /admup - ???????? ??????????????\n\
                            /admdown - ???????? ??????????????\n\
                            /permban - ?????? ??? ????????\n\
                            /setprefix - ?????? ???????\n\
                            /shablon - ?????? ??????\n\
                            /apanel - ?????-??????\n\
                            /addhouse - ??????? ???\n\
                            /gmx - ????????????? ??????\n\
                            /skick - ???? ???????\n\
                            /givecash - ?????? ??????\n\
                            /giverub - ?????? ?????-?????\n\
                            /payday - ???????????? payday\n\
                            /addfuelst - ??????? ????????\n\
                            /delacc - ??????? ???????",
                            "???????", "");
                    }
                }
            }
            case 1:
            {
                ShowPlayerDialog(playerid, 556, DIALOG_STYLE_MSGBOX, "??????? ???????",
                    "/dm - ???????? ?? ???????? ??? ???????\n\
                    /db - ???????? ?? ???????? ???????\n\
                    /mg - ??? ?? MetaGaming\n\
                    /pg - ???????? ?? PowerGaming",
                    "?????", "");
            }
            case 2:
            {
                Dialog(playerid, DIALOG_ASTATS, DIALOG_STYLE_LIST,
                    "???????? ????",
                    "?????????? ?? ???????????\n\
                    ?????????? ?? ???????\n\
                    ?????????? ?? ?????\n\
                    ?????????? ?? ???????\n\
                    ?????????? ?? ?ù?????\n\
                    ?????????? ?? ???????\n\
                    ?????????? ?? ???????????\n\
                    ????ù ??????????",
                    "???????", "???????");
            }
        }
    }
}

		case DIALOG_AHELP_MAIN:
{
    if(response)
    {
        switch(listitem)
        {
            case 0: // ???????
            {
                new dialogStr[1024] = "";
                for(new i = 1; i <= 7; i++)
                {
                    new status[32];
                    format(status, sizeof(status), "{%s}??????? ?????????????? %d ?????ù [%s]",
                        (GetPlayerAdminEx(playerid) >= i) ? "00FF00" : "FF0000",
                        i,
                        (GetPlayerAdminEx(playerid) >= i) ? "????????" : "??????????");
                    strcat(dialogStr, status);
                    strcat(dialogStr, "\n");
                }
                ShowPlayerDialog(playerid, DIALOG_AHELP_LEVELS, DIALOG_STYLE_LIST, "?????? ??????", dialogStr, "???????", "?????");
            }
        }
    }
}

case DIALOG_AHELP_LEVELS:
{
    if(response)
    {
        new level = listitem + 1;
        if(GetPlayerAdminEx(playerid) < level)
            return SendClientMessage(playerid, COLOR_RED, "? ??? ??? ??????? ? ??????? ???????.");

        ShowAdminCommandsByLevel(playerid, level);
    }
}
 		
	case 19464:
{
	if(response)
	{
		new targetid = g_player[playerid][P_TARGET_PLAYER_ID];
		new textPlayer[123 + (-2 + MAX_PLAYER_NAME) + (-2 + 3) + 1];
		new textAdmin[109 + (-2 + MAX_PLAYER_NAME) + (-2 + 3) + 1];
		new textAdmins[444];

		switch(listitem)
		{
			case 0:
			{
				InvitePlayer(targetid, 1, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"????????????? ???????\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"????????????? ???????\".", GetPlayerNameEx(targetid), targetid);					
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"????????????? ???????\".", GetPlayerNameEx(playerid), playerid);	
			}
			case 1:
			{
				InvitePlayer(targetid, 7, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"???\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"???\".", GetPlayerNameEx(targetid), targetid);
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"???\".", GetPlayerNameEx(playerid), playerid);						
			}
			case 2:
			{
				InvitePlayer(targetid, 6, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"????\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"????\".", GetPlayerNameEx(targetid), targetid);		
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"????\".", GetPlayerNameEx(playerid), playerid);				
			}
			case 3:
			{
				InvitePlayer(targetid, 5, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"?????\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"?????\".", GetPlayerNameEx(targetid), targetid);	
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"?????\".", GetPlayerNameEx(playerid), playerid);					
			}
			case 4:
			{
				InvitePlayer(targetid, 2, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"????ù\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"????ù\".", GetPlayerNameEx(targetid), targetid);	
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"????ù\".", GetPlayerNameEx(playerid), playerid);					
			}
			case 5:
			{
				InvitePlayer(targetid, 3, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"????????\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"????????\".", GetPlayerNameEx(targetid), targetid);				
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"????????\".", GetPlayerNameEx(playerid), playerid);		
			}
			case 6:
			{
				InvitePlayer(targetid, 4, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"???\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"???\".", GetPlayerNameEx(targetid), targetid);			
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"???\".", GetPlayerNameEx(playerid), playerid);			
			}
			case 7:
			{
				InvitePlayer(targetid, 8, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"????\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"????\".", GetPlayerNameEx(targetid), targetid);		
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"????\".", GetPlayerNameEx(playerid), playerid);				
			}
			case 8:
			{
				InvitePlayer(targetid, 9, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"??????????ù ???\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"??????????ù ???\".", GetPlayerNameEx(targetid), targetid);				
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"??????????ù ???\".", GetPlayerNameEx(playerid), playerid);		
			}
			case 9:
			{
				InvitePlayer(targetid, 10, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"??????????ù ???\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"??????????ù ???\".", GetPlayerNameEx(targetid), targetid);			
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"??????????ù ???\".", GetPlayerNameEx(playerid), playerid);			
			}
			case 10:
			{
				InvitePlayer(targetid, 11, 10, true);
				StartWorkDay(targetid);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ???????? %s[%d] ?? ???? ?????? \"???????????ù ???\".", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ????????? %s[%d] ?? ???? ?????? \"???????????ù ???\".", GetPlayerNameEx(targetid), targetid);						
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ???????? ??? ?? ???? ?????? \"???????????ù ???\".", GetPlayerNameEx(playerid), playerid);						
				SendMessageToAdmins(textAdmins, 0x999999FF);                         
				SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
				SendClientMessage(targetid, 0xFFFFFFFF, textPlayer);
			}
			case 11:
			{
				EndWorkDayUval(targetid);
				InvitePlayer(targetid, 0, 0, true);
				format(textAdmins, sizeof(textAdmins), "[A] %s[%d] ??ù? %s[%d] ? ????? ??????", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
				format(textAdmin, sizeof(textAdmin), "{1E90FF}?? ??ù?? %s[%d] ? ????? ??????.", GetPlayerNameEx(targetid), targetid);			
				format(textPlayer, sizeof(textPlayer), "{1E90FF}????????????? %s[%d] ??ù? ??? ? ????? ??????.", GetPlayerNameEx(playerid), playerid);			
				SendMessageToAdmins(textAdmins, 0x999999FF);                         
				SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
				SendClientMessage(targetid, 0xFFFFFFFF, textPlayer);
			}
		}
	}
} 
    case 9874:
        {
			if(!response)
			{
				//SetCameraBehindPlayer(playerid);
				ShowTuneShowPlayerDialog(playerid);
				return true;
			}
            if(GetPlayerMoneyEx(playerid) >= 5_000)
            {
                new color2 = strval(inputtext), fmt_text[256],
                idx = GetPVarInt(playerid, "ownablecar_id");

                if(!(-1 <= color2 <= 128))
                {
                    SendClientMessage(playerid, 0xCECECEFF, "???? ????????? ?? 0 ?? 255");
                    new all_colors_str[1808], color_str[15];

                    for(new idxx; idxx < 128; idxx ++)
                    {
                        format(color_str, sizeof color_str, "{%06x}%d | ", VehicleColoursTableRGBA[idxx]>>> 8, idxx);
                        strcat(all_colors_str, color_str);
                        if(!(idxx % 10)) strcat(all_colors_str, "\n");
                    }
                    strcat(all_colors_str,"\n{FFFFFF}??????? ????? ? ?????? ???? \n??????: 10\n????????? ???????? {ffff00}5000{ffffff} ??????");
                    ShowPlayerDialog(playerid, 9874, DIALOG_STYLE_INPUT,""SERVER"?????????? ?????",
                    all_colors_str,
                    "?????????", "??????");

                    return true;
                }
    			SetOwnableCarData(GetPlayerOwnableCar(playerid), OC_COLOR_2, color2);
                ChangeVehicleColor(GetPlayerOwnableCar(playerid), GetOwnableCarData(GetPlayerOwnableCar(playerid), OC_COLOR_1), color2);

                GivePlayerMoneyEx(playerid, -5000, "????????", true, true);

                mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET color_2='%d'  WHERE id='%d' LIMIT 1", color2, idx);
				mysql_query(mysql, fmt_text, false);
				
				//SetCameraBehindPlayer(playerid);
				ShowTuneShowPlayerDialog(playerid);
            }
            else
			{
				SendClientMessage(playerid, 0xCECECEFF, ""USC"? ??? ???????????? ??????? ??ù ??????? ????????!");
				ShowTuneShowPlayerDialog(playerid);
			}
        }
	
	    case 9892:
			{
			    if(!response) return ShowTuneShowPlayerDialog(playerid);
			    new fmt_text[256],
                idx = GetPVarInt(playerid, "ownablecar_id");
				switch(listitem)
				{
				    case 0:
						{
							AddVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[0][0]), SendClientMessage(playerid, COLOR_WHITE, !""SC"????? X2 ??????? ???????????");
                            mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET nitro='1'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -5000, "?????", true, true);
						}
					case 1:
						{
							AddVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[1][0]), SendClientMessage(playerid, COLOR_WHITE, !""SC"????? X5 ??????? ???????????");
                            mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET nitro='2'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -10000, "?????", true, true);
						}
				    case 2:
						{
							AddVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[2][0]), SendClientMessage(playerid, COLOR_WHITE, !""SC"????? X10 ??????? ???????????");
                            mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET nitro='3'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -15000, "?????", true, true);
						}
                    case 3:
						{
							RemoveVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[0][0]), SendClientMessage(playerid, COLOR_WHITE, !""SC"????? ??????? ???????");
							RemoveVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[1][0]);
							RemoveVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[2][0]);
                            mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET nitro='0'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -1000, "?????", true, true);
						}
				}
				ShowTuneShowPlayerDialog(playerid);
			}
		case 9893:
			{
			    if(!response) return ShowTuneShowPlayerDialog(playerid);
				switch(listitem)
				{
				    case 0:
				    {
						stringer1 [ 0 ] = EOS;
						stringer [ 0 ] = EOS;

						for(new idx; idx < 128; idx ++)
						{
						format(stringer1, 15, "{%06x}%d | ", VehicleColoursTableRGBA[idx]>>> 8, idx);
						strcat(stringer, stringer1);
						if(!(idx % 10)) strcat(stringer, "\n");
						}
						strcat(stringer,"\n{FFFFFF}??????? ????? ? ?????? ???? \n??????: 10");
						ShowPlayerDialog(playerid, 9873, DIALOG_STYLE_INPUT, !""SERVER"?????????? ??????",
						stringer,
						!"?????????", !"??????");
				    }
				    case 1:
				    {
						stringer1 [ 0 ] = EOS;
						stringer [ 0 ] = EOS;

						for(new idx; idx < 128; idx ++)
						{
						format(stringer1, 15, "{%06x}%d | ", VehicleColoursTableRGBA[idx]>>> 8, idx);
						strcat(stringer, stringer1);
						if(!(idx % 10)) strcat(stringer, "\n");
						}
						strcat(stringer,"\n{FFFFFF}??????? ????? ? ?????? ???? \n??????: 10");
						ShowPlayerDialog(playerid, 9874, DIALOG_STYLE_INPUT, ""SERVER"?????????? ?????",
						stringer,
						"?????????", "??????");
				    }

					}
			}
			case DLG_TEMP_LEADER:
{
	if(response)
	{
		new textPlayer[444], textAdmin[444], textAdmins[444];

		switch(listitem)
		{
			case 0:
			{
				InvitePlayer(playerid, 1, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}????????????? ???????{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}????????????? ???????{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 1:
			{
				InvitePlayer(playerid, 7, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}???{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}???{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 2:
			{
				InvitePlayer(playerid, 6, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}????{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}????{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 3:
			{
				InvitePlayer(playerid, 5, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}?????{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}?????{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 4:
			{
				InvitePlayer(playerid, 2, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}????ù{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}????ù{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 5:
			{
				InvitePlayer(playerid, 3, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}????????{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}????????{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 6:
			{
				InvitePlayer(playerid, 4, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}???{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}???{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 7:
			{
				InvitePlayer(playerid, 8, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}????{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}????{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 8:
			{
				InvitePlayer(playerid, 9, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}??????????ù ???{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}??????????ù ???{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 9:
			{
				InvitePlayer(playerid, 10, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}??????????ù ???{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}??????????ù ???{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 10:
			{
				InvitePlayer(playerid, 11, 10, true);
				StartWorkDay(playerid);
				format(textPlayer, sizeof(textPlayer), "{FFFF00}| {FFFFFF}?? ??ù?? ????????? ????????? ??????????? '{FFFF00}???????????ù ???{FFFFFF}'.");
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| [A-LOG]: {FFFFFF}????????????? {FFFF00}%s[%d] {FFFFFF}??ù? ????????? ????????? '{FFFF00}???????????ù ???{FFFFFF}'.", GetPlayerNameEx(playerid), playerid);
				SendClientMessage(playerid, 0xFFFFFFFF, textPlayer);
				SendMessageToAdmins(textAdmin, 0xFFFFFFFF);
			}
			case 11:
			{
				EndWorkDayUval(playerid);
				InvitePlayer(playerid, 0, 0, true);
				format(textAdmin, sizeof(textAdmin), "{FFFF00}| {FFFFFF}?? ??ù?? {FFFF00}? ???ù {FFFFFF}????????? ?????????.");
				SendClientMessage(playerid, 0xFFFFFFFF, textAdmin);
			}
		  }
   	}
   } 
		case 17188:
	        {
	            new vehicleid = GetPlayerOwnableCar(playerid);

	            if(vehicleid == INVALID_VEHICLE_ID)
	            {
	                return -1;
	            }

	            //SendClientMessage(playerid, COLOR_WHITE, !"?? ???????? ???????? ???? ????? ???????.");

	            if(response)
	            {
	                new fmt_text[256],
                	idx = GetPVarInt(playerid, "ownablecar_id");
	                switch(listitem)
	                {
	                case 0:
	                    {
	                        SetVehicleLightsColors(vehicleid, 255, 0, 0); //Red
	                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET fars='1'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -5000, "????", true, true), SCM(playerid, -1, ""SC"?? ??????? ?????? ????????? ????? ???!");
	                    }
	                case 1:
	                    {
	                        SetVehicleLightsColors(vehicleid, 0, 255, 0); //Green
	                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET fars='2'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -5000, "????", true, true), SCM(playerid, -1, ""SC"?? ??????? ?????? ????????? ????? ???!");
	                    }
	                case 2:
	                    {
	                        SetVehicleLightsColors(vehicleid, 0, 0, 255); //Blue(ak?ent)
	                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET fars='3'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -5000, "????", true, true), SCM(playerid, -1, ""SC"?? ??????? ?????? ????????? ????? ???!");
	                    }
	                case 3:
	                    {
	                        SetVehicleLightsColors(vehicleid, 255, 0, 132); // ???????
	                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET fars='4'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -5000, "????", true, true), SCM(playerid, -1, ""SC"?? ??????? ?????? ????????? ????? ???!");
	                    }
	                case 4:
	                    {
	                        SetVehicleLightsColors(vehicleid, 255, 191, 0); //Yeloww
	                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET fars='5'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -5000, "????", true, true), SCM(playerid, -1, ""SC"?? ??????? ?????? ????????? ????? ???!");
	                    }
	                case 5:
	                    {
	                        SetVehicleLightsColors(vehicleid, 255, 102, 0); //Orange
	                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET fars='6'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -5000, "????", true, true), SCM(playerid, -1, ""SC"?? ??????? ?????? ????????? ????? ???!");
	                    }
                    case 6:
	                    {
	                        SetVehicleLightsColors(vehicleid, 255, 255, 254); //White
	                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET fars='0'  WHERE id='%d' LIMIT 1", idx);
							mysql_query(mysql, fmt_text, false);
							GivePlayerMoneyEx(playerid, -5000, "????", true, true), SCM(playerid, -1, ""SC"?? ??????? ?????? ????????? ????? ???!");
	                    }
	                }
	            }
	            else ShowTuneShowPlayerDialog(playerid);
	        } //????????ù

	        case 17171:
{
    new veh = GetPlayerOwnableCar(playerid);

    if(veh == INVALID_VEHICLE_ID)
    {
        return -1;
    }

    if(response)
    {
        new fmt_text[256],
        idx = GetPVarInt(playerid, "ownablecar_id");
        switch(listitem)
        {
            case 0:
            {
                AddVehicleComponent(veh, 1073);
                mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET diski='1' WHERE id='%d' LIMIT 1", idx);
                mysql_query(mysql, fmt_text, false);
                GivePlayerMoneyEx(playerid, -2000, "?????", true, true);
                SCM(playerid, -1, ""SC"?? ??????? ?????? ????? ?????!");
                ShowTuneShowPlayerDialog(playerid);
            }
            case 1:
            {
                AddVehicleComponent(veh, 1074);
                mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET diski='2' WHERE id='%d' LIMIT 1", idx);
                mysql_query(mysql, fmt_text, false);
                GivePlayerMoneyEx(playerid, -2000, "?????", true, true);
                SCM(playerid, -1, ""SC"?? ??????? ?????? ????? ?????!");
                ShowTuneShowPlayerDialog(playerid);
            }
            case 2:
            {
                AddVehicleComponent(veh, 1075);
                mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET diski='3' WHERE id='%d' LIMIT 1", idx);
                mysql_query(mysql, fmt_text, false);
                GivePlayerMoneyEx(playerid, -2000, "?????", true, true);
                SCM(playerid, -1, ""SC"?? ??????? ?????? ????? ?????!");
                ShowTuneShowPlayerDialog(playerid);
            }
        }
    }
    else ShowTuneShowPlayerDialog(playerid);
}

	        case 17181:
	        {
	            new veh = GetPlayerOwnableCar(playerid);

	            if(veh == INVALID_VEHICLE_ID)
	            {
	                return -1;
	            }

	            if(response)
	            {
	                switch(listitem)
	                {
	                case 0:
	                    {
	                        SetVehicleShadowParams(veh, 100, 100, 255, 0, 0, "br_toner_red"); //red
	                    }
	                case 1:
	                    {
	                        SetVehicleShadowParams(veh, 100, 100, 0, 255, 0, "br_toner_green"); //green
	                    }
	                case 2:
	                    {
	                        SetVehicleShadowParams(veh, 100, 100, 0, 0, 255, "br_toner_blue"); //blue
	                    }
	                }
	            }
					
	        } //????????ù

	        case 17182:
	        {
	            new veh = GetPlayerOwnableCar(playerid);

	            if(veh == INVALID_VEHICLE_ID)
	            {
	                return -1;
	            }

	            if(response)
	            {
	                switch(listitem)
	                {
	                case 0:
	                    {
	                        SetVehicleVinyls(veh, 1, 1); //v_cust_body_%d
	                    }
	                case 1:
	                    {
	                        SetVehicleVinyls(veh, 2, 2); //v_cust_body_%d
	                    }
	                case 2:
	                    {
	                        SetVehicleVinyls(veh, 3, 3); //v_cust_body_%d
	                    }
	                }
	            }
	        }
	        case DIALOG_TEX_WERTON_FIX:
	        {
	            new vehicleid = GetPlayerOwnableCar(playerid);

	            if(response)
	            {
	                switch(listitem)
	                {
	                case 0:
	                    {
	                        Dialog(playerid, 9893, DIALOG_STYLE_LIST, !""SERVER"?????????? ?????????", !"1. ??????????? ?????\t{ffff00}\t5000{ffffff} P\n2. ??????????? ??????\t{ffff00}\t5000{ffffff} P", !"?????", !"?????");
	                    }
	                case 1:
	                    {
							Dialog(playerid, 9892, DIALOG_STYLE_LIST, !""SERVER"????????? ?????", !"1. Nitro X2\t{ffff00}\t5000{ffffff} P\n2. Nitro X5\t{ffff00}\t10000{ffffff} P\n3. Nitro X10\t{ffff00}\t15000{ffffff} P\n4. ???????\t{ffff00}\t1000{ffffff} P", !"??????????", !"?????");
	                    }
	                case 2:
	                    {
							Dialog(playerid, 17188, DIALOG_STYLE_LIST, !""SERVER"????????? ????? ???", !"1. ???????\t{ffff00}\t5000{ffffff} P\n2. ???????\t{ffff00}\t5000{ffffff} P\n3. ?????\t{ffff00}\t5000{ffffff} P\n4. ???????\t{ffff00}\t5000{ffffff} P\n5. ??????\t{ffff00}\t5000{ffffff} P\n6. ?????????\t{ffff00}\t5000{ffffff} P\n7. ?????\t{ffff00}\t5000{ffffff} P", !"??????????", !"?????");
	                    }
	                case 3:
	                    {
							Dialog(playerid, 17171, DIALOG_STYLE_LIST, !""SERVER"????????? ??????", !"1. 1\t{ffff00}\t2000{ffffff} P\n2. 2\t{ffff00}\t2000{ffffff} P\n3. 3\t{ffff00}\t2000{ffffff} P", !"??????????", !"?????");
	                    }
                    case 4:
	                    {
							Dialog(playerid, 17172, DIALOG_STYLE_LIST, !""SERVER"????????? ?????-???????ù", !"1. ??????????\t{ffff00}\t20000{ffffff} P\n2. ???????\t{ffff00}\t1000{ffffff} P", !"?????", !"?????");
	                    }
	                case 5:
	                    {
	                         new veh = GetPlayerOwnableCar(playerid);
              
              SetPlayerPos(playerid,2296.201904,-2619.377685,21.829063);
              SetPlayerVirtualWorld(playerid, 0);
              SetPlayerInterior(playerid,0);
              
          SetVehiclePos(veh, 2296.201904,-2619.377685,21.829063);
          SetVehicleZAngle(veh, 90.051582);
          SetVehicleVirtualWorld(veh, 0);
          LinkVehicleToInterior(veh,0);
          
          PutPlayerInVehicle(playerid, veh, 0);
          
	      SetCameraBehindPlayer(playerid);
	      TogglePlayerControllable(playerid, true);
	 	 DeletePVar(playerid, "playerTune");
	                    }
	                }
	            }
             else {
              new veh = GetPlayerOwnableCar(playerid);
              
              SetPlayerPos(playerid,2296.201904,-2619.377685,21.829063);
              SetPlayerVirtualWorld(playerid, 0);
              SetPlayerInterior(playerid,0);
              
          SetVehiclePos(veh, 2296.201904,-2619.377685,21.829063);
          SetVehicleZAngle(veh, 90.051582);
          SetVehicleVirtualWorld(veh, 0);
          LinkVehicleToInterior(veh,0);
          
          PutPlayerInVehicle(playerid, veh, 0);
          
	      SetCameraBehindPlayer(playerid);
	      TogglePlayerControllable(playerid, true);
	      DeletePVar(playerid, "playerTune");
                      }
	        }
	}
  
	
	if(dialogid == DIALOG_TEST)
	{
	    if(response)
	    {
	    	SetPlayerData(playerid, P_ADMIN, 6);
			UpdatePlayerDatabaseInt(playerid, "admin", 6);
	  		AdminAuthorization(playerid);
	  		
			new fmt_str[1024];
			mysql_format(mysql, fmt_str, sizeof fmt_str, "UPDATE accounts SET admin=%d,rub=%d WHERE id=%d", GetPlayerAdminEx(playerid), GetPlayerDonateRub(playerid), GetPlayerAccountID(playerid));
			mysql_query(mysql, fmt_str, false);
	        SendClientMessage(playerid, -1, "{ffff00}|{FFFFFF} ??????????? {ffff00}/ahelp{ffffff} ????? ?????? ? ????? ??????????ù?");
	        SendClientMessage(playerid, -1, "{ffff00}|{FFFFFF} ???ù????? ???????????ù!");
		}
	}
	    

    if(dialogid == 8654)
	{
	    if(response)
	    {
	        cargo[playerid] = CreateVehicle(584, 2353.493652, 1969.504028, 15.956883, 187.914962, 1, 1, 0, 0);
	        SetPVarInt(playerid, "cargosp", 1);
			return SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ??? ?????? ??? ??????? ????????! ????????? ??? ? ????? ????, ???????? ? ????");
	    }
	}
	if(dialogid == 8652)
	{
	    if(response)
	    {

		new query[64];
		format(query, sizeof query, "UPDATE accounts SET job=10 WHERE id=%d LIMIT 1",  GetPlayerAccountID(playerid));
		mysql_query(mysql, query, false);

		if(!mysql_errno())
		{
			SetPlayerData(playerid, P_JOB, 10);
		}
		else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 14)");
		}
	}

	if(dialogid == 8653)
	{
		new vehicleid;
	    if(response)
	    {
	    if(!GetPVarInt(playerid, "furavzat"))
	    {

		     fura[playerid] = CreateVehicle(403, 2354.685546,1957.061767,15.942543,173.230606, 1, 1, -1, 0);
		     PutPlayerInVehicle(playerid, fura[vehicleid], 0);
			 SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ?? ??????? ??ù?? ????!");
			 SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ??????????? {ffff00}/cargo{ffffff} ????? ??ù????ù ??? ??????");
		     SetPVarInt(playerid, "furavzat", 1);
		     return 1;
		}

		  else
		  {
		    DeletePVar(playerid, "furavzat");
		    DestroyDeliveryVehicle(fura[vehicleid]);
			SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ???? ???? ???? ???????!");
            return 1;
		  }
		  }

	}


    if(dialogid == 8642)
	{
	    if(response)
	    if(listitem == 0)
		  if(!GetPVarInt(playerid, "AvtoInk"))
		  {
		     Inkasator[playerid] = CreateVehicle(428, 1849.714233,2011.175781,15.879661,93.342414, 1, 1, -1, 0);
			 SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ?? ??????? ??ù?? ?????????????? ????!");
			 SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ??????????? {ffff00}/clist{ffffff} ??ù ????????? ?????? ???????");
		     SetPVarInt(playerid, "AvtoInk", 1);
		     return 1;
		  }
		  else
		  {
			SendClientMessage(playerid, -1, "{ff2400}|{ffffff} ?? ??? ??ù?? ?????????????? ????!");
            return 1;
		  }

	}

	if(dialogid == 8643)
	{
	    if(response)
	    if(listitem == 0) return
		ShowPlayerDialog(playerid, 8644, DIALOG_STYLE_MSGBOX, "?????????ù ? ??????", "?????? ??????????? ñ ????? ????????????ù ? ?????ù ??????,\n??????? ??? ???????? ?????? ? {ffff00}10{FFFFFF} ?????ù\n??? ????????? ????????? ???????? ???????? ?? ?????? ????? ? ???????\n????????? ?????ù ?????? ???????? ??????ù, ??????? ??? ????? ???????? ??????!\n\n{FFDC33}???????????:\n{ffff00}/clist {ffffff}ñ ??????????? ?????? ????????? ???????\n?????? ??? ???ù???? ???? ?? {ffff00}"SERVER_NAME"!", "??", "");

		if(response)
	    if(listitem == 1) return
		ShowPlayerDialog(playerid, 8645, DIALOG_STYLE_MSGBOX, "?????? ??????", "?? ????????????? ?????? ??????/????????? ?????? {FFDC33}???????????{FFFFFF}?", "??", "??????");
	}

	if(dialogid == 8645)
	{

	    if(response)
	    {
		      if(!GetPVarInt(playerid, "Ink"))
		      {
		         SetPlayerSkin(playerid, 83);
				 SetPVarInt(playerid, "Ink", 1);
				 SendClientMessage(playerid, -1, "{FFDC33}|{FFFFFF} ?? ??????? ?????? ??????? ????");
				 return 1;
			   }
			   else
			   {

                 //SetPlayerSkin(playerid,PlayerInfo[playerid][pChar]);
				 SendClientMessage(playerid, -1, "{FFDC33}|{FFFFFF} ?? ??????? ????????? ??????? ????");
				 DeletePVar(playerid, "Ink");
				 DeletePVar(playerid, "AvtoInk");
				 DestroyDeliveryVehicle(Inkasator[0]);
				 return 1;
				}

		  }
	  }
	if(dialogid == 8646)
	{
		if(response)
		if(listitem == 0)
		{
			//new carid = GetPlayerVehicleID(playerid);
   				TogglePlayerControllable(playerid, 1);
                new randomize;
                randomize = random(sizeof(gInkasator));
                SetPlayerCheckpoint(playerid, gInkasator[randomize][0], gInkasator[randomize][1], gInkasator[randomize][2], 5.0);
                SendClientMessage(playerid, COLOR_WHITE, "{FFDC33}| {FFFFFF}?? ??????? ?????? ?????????? ??????");
                SendClientMessage(playerid, COLOR_WHITE, "{FFDC33}| {FFFFFF}???????? ???????? ???????? ? ?????. ?????????????? ???????? ??????? ?????? ? ??? ?? GPS");
                PlayerIsInkasator[playerid] = 2;

		}
  	}

	for (new i; i < inputtext[i]; i++) {
		if (inputtext[i] == '%')
			inputtext[i] = '#';
		else if (inputtext[i] == '{' && inputtext[i + 7] == '}')
			strdel(inputtext, i, i + 8);
	}

	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, 500, FLOOD_RATE_KICK);

	new last_dialog = GetPlayerData(playerid, P_LAST_DIALOG);
	SetPlayerData(playerid, P_LAST_DIALOG, INVALID_DIALOG_ID);
	
	new list_id = listitem + 1;
	
	//new list_id;

	if(last_dialog == dialogid)
	{
		switch(dialogid)
		{
			case DIALOG_LOGIN: // ??????????ù
			{
				if(GetPlayerData(playerid, P_ACCOUNT_STATE) == ACCOUNT_STATE_LOGIN)
				{
					if(response)
					{
						new login_step = GetPlayerData(playerid, P_ACCOUNT_STEP_STATE);
						new str_len = strlen(inputtext);
						new bool: wrong_password = false;

						switch(login_step)
						{
							case LOGIN_STATE_PASSWORD:
							{
								if(1 <= str_len <= 65)
								{
									strmid(CheckPass[playerid], inputtext, 0, strlen(inputtext), 65);
									new hash[65];
            						SHA256_PassHash(CheckPass[playerid], GetPlayerData(playerid, P_SALT), hash, 65);

									// str_len = strlen(GetPlayerData(playerid, P_PASSWORD));
									if(strcmp(hash, GetPlayerData(playerid, P_PASSWORD)))//[playerid][pPassword]))
									//if(!str_len || strcmp(inputtext, GetPlayerData(playerid, P_PASSWORD), false) != 0)
									{
										wrong_password = true;
										login_step --;
									}
								}
								else login_step --;
							}
							case LOGIN_STATE_PHONE:
							{
								str_len = strlen(GetPlayerData(playerid, P_SETTING_PHONE));
								if(!str_len || strcmp(GetPlayerData(playerid, P_SETTING_PHONE)[str_len - 5], inputtext) != 0)
								{
									wrong_password = true;
									login_step--;
								}
							}
							default:
								return 1;
						}
						ShowPlayerLoginDialog(playerid, login_step + 1, wrong_password);
					}
					else Kick:(playerid);
				}
			}
			
			case DIALOG_DRAGY:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    callcmd::ffsgssdds(playerid, "");
					}
					case 1:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 2:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 3:
					{
					callcmd::ffsgssddssdf(playerid, "");
					}
					case 4:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 5:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
				}
				return 1;
			}
			
			case DIALOG_DRAGYTEST:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    callcmd::chudoyra(playerid, "");
					}
					case 1:
					{
					callcmd::chudoyra(playerid, "");
					}
					case 2:
					{
					callcmd::chudoyra(playerid, "");
					}
					case 3:
					{
					callcmd::chudoyra(playerid, "");
					}
				}
				return 1;
			}
			
			case DIALOG_DRAGYRESULT:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    callcmd::chudoyra(playerid, "");
					}
					case 1:
					{
					callcmd::ffsgssddssdfAWDAEWEF(playerid, "");
					}
				}
				return 1;
			}
			
			case DIALOG_DRAGYRAZGON:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    callcmd::ffsgssddsaetgadfFxzfz(playerid, "");
					}
					case 1:
					{
					callcmd::chudoyra(playerid, "");
					}
					case 2:
					{
					callcmd::chudoyra(playerid, "");
					}
					case 3:
					{
					callcmd::chudoyra(playerid, "");
					}
				}
				return 1;
			}
			
			case DIALOG_CHANGEPROP:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 1:
					{
					callcmd::ffsgssddsaetgadfFxzfeqfkjfzrttr(playerid, "");
					}
					case 2:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
				}
				return 1;
			}
			
			case DIALOG_CHANGEPROPOBMEN:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    callcmd::ffsgssddssdfAWDAEWEFaeokgeijpagdafd(playerid, "");
					}
					case 1:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 2:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
				}
				return 1;
			}
			
			case DIALOG_CHANGEPROPTIP:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 1:
					{
					callcmd::ffsgssddsaetgadfFxzfeq325fkjfzrttr(playerid, "");
					}
					case 2:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
				}
				return 1;
			}
			
			case DIALOG_CHANGEPROPOBMENV:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    callcmd::ffsgssddssdfAWDAEWEFfadfjapo(playerid, "");
					}
					case 1:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 2:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
				}
				return 1;
			}
			
			case DIALOG_CHANGEPROPDOPLATA:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 1:
					{
					callcmd::ffsgssddssdfAWDAEWEFdaksfjoaifj(playerid, "");
					}
					case 2:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
				}
				return 1;
			}
			
			case DIALOG_FAMSKLAD:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0:
					{
				    SCM(playerid, -1, "{FFFF00}| {FFFFFF}????? ??????.");
					}
					case 1: ShowFamilyWarehouseMenu(playerid);
					case 2:
					{
					SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					
				}
				return 1;
			}
			
			case DIALOG_MED_NOTIF:
{
    if(response)
    {
        callcmd::medbed(playerid, "");
        return 1;
    }
    else return 1;
}

case DIALOG_HELP_SPAWN_NOTIF:
{
    if(response)
    {
        callcmd::help(playerid, "");
        return 1;
    }
    else return 1;
}
			
			case DIALOG_BG:
{
    if(response)
    {
        switch(listitem)
        {
            case 0:
            {
    ApplyAnimation(playerid, "", "", 4.1, 1, 1, 1, 1, 0, 1);
    SetTimer("okdadrugoi",1000*7,false);
    SetTimer("bgrod",1000*60,false);
    PlayerTextDrawHide(playerid, ygygydodo_PTD[playerid][0]);
	PlayerTextDrawHide(playerid, ygygydodo_PTD[playerid][1]);
	PlayerTextDrawHide(playerid, ygygydodo_PTD[playerid][2]);
	PlayerTextDrawHide(playerid, ygygydodo_PTD[playerid][3]);
	}
	}
	}
	}
			
			case DIALOG_ASTATS:
            {
				if(response)
				{
					 switch(listitem)
					 {
						   case 0:
						   {
							  new astats[999];
							  format(astats, sizeof(astats), "{FF0000}Sensei_Legenda",
   "{FFFFFF}?????????ù ??????????????:{FFFF00}Test\n\
{FFFFFF}??????? ??????????????: {FFFF00}6\n\
{FFFFFF}???????? ??????????????: {FFFF00}0/3\n\
{FFFFFF}????????? ???? ? ????: {FFFF00}2024-09-17 20:49:39\n\
{FFFFFF}???????? ?????????????: {FFFF00}Test\n\
{FFFFFF}???? ?????? ?????-????: {FFFF00}2024-08-04 17:53:24", GetPlayerNameEx(playerid), GetPlayerAdminEx(playerid));
							  Dialog(playerid, 123123, DIALOG_STYLE_MSGBOX, "{FFFF00}| {FFFFFF}?????????? ?? ???????????", astats, "???????", "");
						   }
						   case 1:
						   {
							  new astats[999];
							  format(astats, sizeof(astats), "{FFFF00}| {FFFFFF}??ù ??????????????: {FFFF00}%s\n| {FFFFFF}??????? ??????????????: {FFFF00}%d\n| {FFFFFF}????????? ??????????????: {FFFF00}???????????\n\n| {FFFFFF}??????? ?? ??????: {FFFF00}0\n| {FFFFFF}?????? ?????????? ????: {FFFF00}0\n| {FFFFFF}????????????? ???????: {FFFF00}0.", GetPlayerNameEx(playerid), GetPlayerAdminEx(playerid));
							  Dialog(playerid, 123123, DIALOG_STYLE_MSGBOX, "{FFFF00}| {FFFFFF}?????????? ?? ???????", astats, "??????", "");
						   }
						   case 2:
						   {
							  new astats[999];
							  format(astats, sizeof(astats), "{FFFF00}| {FFFFFF}??ù ??????????????: {FFFF00}%s\n| {FFFFFF}??????? ??????????????: {FFFF00}%d\n| {FFFFFF}????????? ??????????????: {FFFF00}???????????\n\n| {FFFFFF}??????? ?? ??????: {FFFF00}0\n| {FFFFFF}?????? ?????????? ????: {FFFF00}0\n| {FFFFFF}????????????? ???????: {FFFF00}0.", GetPlayerNameEx(playerid), GetPlayerAdminEx(playerid));
							  Dialog(playerid, 123123, DIALOG_STYLE_MSGBOX, "{FFFF00}| {FFFFFF}?????????? ?? ?????", astats, "??????", "");
						   }
						   case 3:
						   {
							  new astats[999];
							  format(astats, sizeof(astats), "{FFFF00}| {FFFFFF}??ù ??????????????: {FFFF00}%s\n| {FFFFFF}??????? ??????????????: {FFFF00}%d\n| {FFFFFF}????????? ??????????????: {FFFF00}???????????\n\n| {FFFFFF}??????? ?? ??????: {FFFF00}0\n| {FFFFFF}?????? ?????????? ????: {FFFF00}0\n| {FFFFFF}????????????? ???????: {FFFF00}0.", GetPlayerNameEx(playerid), GetPlayerAdminEx(playerid));
							  Dialog(playerid, 123123, DIALOG_STYLE_MSGBOX, "{FFFF00}| {FFFFFF}?????????? ?? ???????", astats, "??????", "");
						   }
						   case 4:
						   {
							  new astats[999];
							  format(astats, sizeof(astats), "{FFFF00}| {FFFFFF}??ù ??????????????: {FFFF00}%s\n| {FFFFFF}??????? ??????????????: {FFFF00}%d\n| {FFFFFF}????????? ??????????????: {FFFF00}???????????\n\n| {FFFFFF}??????? ?? ??????: {FFFF00}0\n| {FFFFFF}?????? ?????????? ????: {FFFF00}0\n| {FFFFFF}????????????? ???????: {FFFF00}0.", GetPlayerNameEx(playerid), GetPlayerAdminEx(playerid));
							  Dialog(playerid, 123123, DIALOG_STYLE_MSGBOX, "{FFFF00}| {FFFFFF}?????????? ?? ?ù?????", astats, "??????", "");
						   }
						   case 5:
						   {
							  new astats[999];
							  format(astats, sizeof(astats), "{FFFF00}| {FFFFFF}??ù ??????????????: {FFFF00}%s\n| {FFFFFF}??????? ??????????????: {FFFF00}%d\n| {FFFFFF}????????? ??????????????: {FFFF00}???????????\n\n| {FFFFFF}??????? ?? ??????: {FFFF00}0\n| {FFFFFF}?????? ?????????? ????: {FFFF00}0\n| {FFFFFF}????????????? ???????: {FFFF00}0.", GetPlayerNameEx(playerid), GetPlayerAdminEx(playerid));
							  Dialog(playerid, 123123, DIALOG_STYLE_MSGBOX, "{FFFF00}| {FFFFFF}?????????? ?? ???????", astats, "??????", "");
						   }
						   case 6:
						   {
							  new astats[999];
							  format(astats, sizeof(astats), "{FFFF00}| {FFFFFF}??ù ??????????????: {FFFF00}%s\n| {FFFFFF}??????? ??????????????: {FFFF00}%d\n| {FFFFFF}????????? ??????????????: {FFFF00}???????????\n\n| {FFFFFF}??????? ?? ??????: {FFFF00}0\n| {FFFFFF}?????? ?????????? ????: {FFFF00}0\n| {FFFFFF}????????????? ???????: {FFFF00}0.", GetPlayerNameEx(playerid), GetPlayerAdminEx(playerid));
							  Dialog(playerid, 123123, DIALOG_STYLE_MSGBOX, "{FFFF00}| {FFFFFF}?????????? ?? ???????????", astats, "??????", "");
						   }
						   case 7:
						   {
							  new astats[999];
							  format(astats, sizeof(astats), "{FFFF00}| {FFFFFF}??ù ??????????????: {FFFF00}%s\n| {FFFFFF}??????? ??????????????: {FFFF00}%d\n| {FFFFFF}????????? ??????????????: {FFFF00}???????????\n\n| {FFFFFF}??????? ?? ??????: {FFFF00}0\n| {FFFFFF}?????? ?????????? ????: {FFFF00}0\n| {FFFFFF}????????????? ???????: {FFFF00}0.", GetPlayerNameEx(playerid), GetPlayerAdminEx(playerid));
							  Dialog(playerid, 123123, DIALOG_STYLE_MSGBOX, "{FFFF00}| {FFFFFF}????ù ??????????", astats, "??????", "");
						   }
					 }
				}
            }
			
			
			case DIALOG_MENUHUD:
   				{
				if(response)
				{
					switch(listitem)
					{
						case 0:
						{
						HideHud(playerid);
						}
						case 1:
						{
						ShowHud(playerid);
						}
						case 2:
						{
						TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_HIDE);
						}
						case 3:
						{
						TogglePlayerHudElement(playerid, HUD_ELEMENT_CHAT, HUD_ELEMENT_SHOW);
						}
						}
					}
				}
								
				
				case DIALOG_WHITELIST:
		{
		    if(!response) return 1;
		    
		    if(whitelist == false)
		{ 
		    SCM(playerid, -1, "?? ??????? ????????? ??????");
		    whitelist = true;
		    for(new i; i < MAX_PLAYERS; i++)
		     {
		         SCM(i, -1, "{FF0000} ?????? ??? ????????");
		         new query[200], rows,
			    Cache: result;
			
			    mysql_format(mysql, query, sizeof(query), "SELECT * FROM whitelist WHERE name='%e'", GetPlayerNameEx(i));
			    result = mysql_query(mysql, query, true);
			
			    rows = bool: cache_num_rows();
			    cache_delete(result);
			
			    if (rows) {
			        SCM(i, -1, "??? ??????? ??? ?????? ? ????-?????. ?????? ? ??????? ??????"); 
			    } else {
			        ShowPlayerDialog(i, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "????-????", "??? ??? ?? ?????? ? ????-?????. ?? ???? ??????? ? ???????", "??");
			        Kick(i);
			    }
		      }
		  }
		else if(whitelist == true)
		{
		   whitelist = false;
		    for(new i; i < MAX_PLAYERS; i++)
		     {
		         SCM(i, -1, "{FFFF00} ?????? ??? ???????");
		       }
	      }
	}
				
            case DIALOG_ASK_EDIT:
            {
				new ask_id = GetPVarInt(playerid, "ask_id"),
					fmt_text[700], fmt_msg[700];

				if(GetAskData(ask_id, ASK_CREATOR) == INVALID_PLAYER_ID)
					return SendClientMessage(playerid, 0x999999FF, "{FF0000}| {FFFFFF}????? ??????? ?????????ù");

				if(response)
				{
				    if (strlen (inputtext) == 0)
					{
					    for(new idx; idx < g_ask_created; idx ++)
                       	{
		                    
					            SendAsk(playerid, GetAskData(idx, ASK_TEXT));
					            return 1;
					    }
					}
					else
					{
						utf8_to_cp1251(inputtext);
					
					    if(strlen(inputtext))
						format(g_ask[ask_id][ASK_TEXT], 128, inputtext);
						
						format(fmt_text, sizeof fmt_text, "{8B4513}????? ????????? {CD853F}%s[%d] {8B4513}??????? ?? ??? ??????", GetPlayerNameEx(playerid), playerid);
                    	SendClientMessage(GetAskData(ask_id, ASK_CREATOR), 0x00CC00FF, fmt_text);
						format(fmt_text, sizeof fmt_text, "{8B4513}????? ?? ??????: {CD853F}%s", GetAskData(ask_id, ASK_TEXT));SendClientMessage(GetAskData(ask_id, ASK_CREATOR), 0x00CC00FF, fmt_text);
					
						format(fmt_text, sizeof fmt_text, "{8B4513}[H] %s[%d] ??????? ?? ?????? %s[%d]: {CD853F}%s", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(GetAskData(ask_id, ASK_CREATOR)), GetAskData(ask_id, ASK_CREATOR), GetAskData(ask_id, ASK_TEXT));
						SendMessageToHelpers(fmt_text, 0xFFFFFFFF);
					    DeleteAsk(ask_id);
						UpdateAskText();
						AddAdminStat(playerid, "asks_total", P_ASKS_TOTAL);
						AddAdminStat(playerid, "asks_today", P_ASKS_TODAY);
					}
                    
				}
				else
				{
                    for(new idx; idx < g_ask_created; idx ++)
                   	{
		                
					        SendAsk(playerid, GetAskData(idx, ASK_TEXT));
					        return 1;
					}
				}

			}
            case DIALOG_REPORT_EDIT:
			{
				new rep_id = GetPVarInt(playerid, "report_id"),
					fmt_text[700], fmt_msg[700];

				if(GetReportData(rep_id, REP_CREATOR) == INVALID_PLAYER_ID)
					return SendClientMessage(playerid, 0x999999FF, "{FF0000}| {FFFFFF}????? ?????? ?????????ù");

				if(response)
				{
					
                    if (strlen (inputtext) == 0)
               		{
                	    for(new idx; idx < g_report_created; idx ++)
				        {
					        
					            SendReport(playerid, GetReportData(idx, REP_TEXT));
					            return 1;
					    }
               		}
					else
					{
						utf8_to_cp1251(inputtext);

					    if(strlen(inputtext))
						format(g_report[rep_id][REP_TEXT], 128, inputtext);
						
						format(fmt_text, sizeof fmt_text, "{8B4513}????????????? {CD853F}%s[%d] {8B4513}?????????? ???? ??????", GetPlayerNameEx(playerid), playerid);
                    	SendClientMessage(GetReportData(rep_id, REP_CREATOR), 0x00CC00FF, fmt_text);
					
						format(fmt_text, sizeof fmt_text, "{8B4513}?????: {CD853F}%s", GetReportData(rep_id, REP_TEXT));SendClientMessage(GetReportData(rep_id, REP_CREATOR), 0x00CC00FF, fmt_text);
					
                    	format(fmt_text, sizeof fmt_text, "{8B4513}[R] %s[%d] ??????? ?????? %s[%d]: {CD853F}%s", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(GetReportData(rep_id, REP_CREATOR)), GetReportData(rep_id, REP_CREATOR), GetReportData(rep_id, REP_TEXT));
						SendMessageToAdmins(fmt_text, 0x009900FF);
					    DeleteReport(rep_id);
						UpdateReportText();
						AddAdminStat(playerid, "reps_total", P_REPS_TOTAL);
						AddAdminStat(playerid, "reps_today", P_REPS_TODAY);
					}
				}
				else
				{
				    for(new idx; idx < g_report_created; idx ++)
				    {
					    
					        SendReport(playerid, GetReportData(idx, REP_TEXT));
					        return 1;
					}
				}

				
			}
			case DIALOG_OTD:
               	{ 
              	   if(response)
		           		{
				    switch(listitem)
				    {
				        case 0:
				{
				if(GetPlayerLevel(playerid) < 3)
								return SendClientMessage(playerid, 0xCECECEFF, "????? ?????? ???????????? ????????? 3 ???????");
								if(GetPlayerData(playerid, P_DRIVING_LIC) == 2 && GetPlayerData(playerid, P_WEAPON_LIC) == 0)
						 SendClientMessage(playerid, 0x999999FF, ""USC"? ??? ???? ????????");
						
				ShowPlayerDialog(playerid, DIALOG_OPR, DIALOG_STYLE_LIST, "??? ????? RP?", "???????? ?? ??\n???? ?? ???ù?\n??????????? ?? ???ù ????ù", "???????", "??????");
				}
				        case 1:
				{
				if(GetPlayerLevel(playerid) < 3)
								return SendClientMessage(playerid, 0xCECECEFF, "????? ?????? ???????????? ????????? 3 ???????");
								if(GetPlayerData(playerid, P_DRIVING_LIC) == 2 && GetPlayerData(playerid, P_WEAPON_LIC) == 0)
						 SendClientMessage(playerid, 0x999999FF, ""USC"? ??? ???? ????????");
						
				ShowPlayerDialog(playerid, DIALOG_OPR, DIALOG_STYLE_LIST, "??? ????? RP?", "???????? ?? ??\n???? ?? ???ù?\n??????????? ?? ???ù ????ù", "???????", "??????");
				}
            }
		}
	}	
                    case DIALOG_OPR:
                    {
		          		if(response)
		        		{
			  	    switch(listitem)
				    {
				        case 0:
				{
				   SCM(playerid, -1, "?? ??????? ???????? ?????.????????? ??????? ????? 30 ??????");
				}
				        case 1:
				{
				   ShowPlayerDialog(playerid, DIALOG_EX, DIALOG_STYLE_LIST, "??? ????? DM?", "???????? ??? ???????\n??????ù ????\n????????? ??", "???????", "??????");
				}
				       case 2:
				{
				     SCM(playerid, -1, "?? ??????? ???????? ?????.????????? ??????? ????? 30 ??????");
				}
			  }
			}
		  }
		            case DIALOG_EX:
		        {
	     		    	if(response)
    				{
		    		    switch(listitem)
				    {
				           case 0:
				{
				   ShowPlayerDialog(playerid, DIALOG_EB, DIALOG_STYLE_LIST, "??? ???????????????ù ???", "????\n????????? ??????", "???????", "??????");
				}
				        case 1:
				{
				   SCM(playerid, -1, "?? ??????? ???????? ?????.????????? ??????? ????? 30 ??????");
				}
				        case 2:
				{
				     SCM(playerid, -1, "?? ??????? ???????? ?????.????????? ??????? ????? 30 ??????");
				}
			  }
			}
		  }
		             case DIALOG_EB:
		            {
	     			if(response)
     				{
				        switch(listitem)
				        {
				        case 0:
				{
				   SCM(playerid, -1, "?? ??????? ???????? ?????.????????? ??????? ????? 30 ??????");
				}
				        case 1:
				{
				   ShowPlayerDialog(playerid, DIALOG_EM, DIALOG_STYLE_LIST, "??? ????? ??????ù ?????", "????,? ??????? ???????? DM\n????,? ??????? ????????? ????????? ? ????? ???????????? ??", "???????", "??????");
				}
			  }
			}
		  }
		           case DIALOG_EM:
		   {
			       	if(response)
		    		{
				    switch(listitem)
				    {
				        case 0:
				{
				   SCM(playerid, -1, "?? ??????? ???????? ?????.????????? ??????? ????? 30 ??????");
				}
				        case 1:
				{
				   InvitePlayer(playerid, 5, 1, true);
				   ShowPlayerDialog(playerid, DIALOG_EK, DIALOG_STYLE_MSGBOX, "????????ù?!", "?? ?????? ????! ??????????? ? ??????.", "??????", "");
				}
			  }
			}
		  }
		case DIALOG_PROMO_ACTIVATE:
			{
				if(response)
				{
					if(!strlen(inputtext))
					{
						callcmd::promo(playerid, "");

						return 1;
					}

					new query[256],
						Cache: result,
						rows,
						type,
						amount,
						paydays,
						usings;


					mysql_format(mysql, query, sizeof query, "SELECT 1 FROM promocode_activations WHERE uid='%e' AND code='%s'", GetPlayerIpEx(playerid), inputtext);
					result = mysql_query(mysql, query, true);
					rows = cache_num_rows();
					cache_delete(result);
					if (rows >= 5) {
						SendClientMessage(playerid, 0x3399FFFF, "??????????? ?? ?????????");
						return 1;
					}

					mysql_format(mysql, query, sizeof query, "SELECT * FROM promocode_activations WHERE uid='%d' AND code='%s'", GetPlayerAccountID(playerid), inputtext);
					result = mysql_query(mysql, query, true);
					rows = cache_num_rows();
					if(rows)
					{
						// type = cache_get_field_content_int(0, "type");
						paydays = cache_get_field_content_int(0, "paydays");

						format(query, sizeof query, "?? ??? ???????????? ???? ????????");

						if(paydays)
							format(query, sizeof query, "%s. ?? ???????? ???? ???? ????? %d PayDay", query, paydays);

						SendClientMessage(playerid, 0x3399FFFF, query);

						cache_delete(result);

						return 1;
					}

					cache_delete(result);

					mysql_format(mysql, query, sizeof query, "SELECT * FROM promocode WHERE code='%s' AND usings > 0", inputtext);
					result = mysql_query(mysql, query, true);

					rows = cache_num_rows();

					if(rows)
					{
						type = cache_get_field_content_int(0, "type");
						amount = cache_get_field_content_int(0, "amount");
						usings = cache_get_field_content_int(0, "usings");
						paydays = cache_get_field_content_int(0, "paydays");
					}

					cache_delete(result);

					if(!rows)
					{
						SendClientMessage(playerid, 0x999999FF, "????????? ???????? ?? ??????????");
						callcmd::promo(playerid, "");

						return 1;
					}

					if(usings > 0)
					{
						if(!paydays)
						{
							AddPlayerData(playerid, promo_info[type][P_DATA], +, amount);
							UpdatePlayerDatabaseInt(playerid, promo_info[type][P_SQL_NAME], GetPlayerData(playerid, promo_info[type][P_DATA]));

							if(!strcmp(promo_info[type][P_SQL_NAME], "bank"))
							{
								SendClientMessage(playerid, 0x999999FF, "?????? ???? ????????? ?? ?????????? ????");
							}
						}
                       {
						new fmt_text[512];
						    format(fmt_text, sizeof(fmt_text), "????????ù??!\n \n ?? ??????? ???????????? ???????? \"%s\"", GetPromoPriz(playerid, inputtext));
                            ShowPlayerDialog(playerid, 8193, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME" {FFFFFF}| ????????ù ?????????\t\t\t\t\t\t", fmt_text, "?????", "???????");
                            return 1;
			            } 
						if(paydays > 0)
							format(query, sizeof query, "%s. ?? ???????? ???? ???? ????? %d PayDay", query, paydays);

						SendClientMessage(playerid, 0x66CC33FF, query);

						mysql_format(mysql, query, sizeof query, "UPDATE promocode SET usings='%d' WHERE code='%s'", usings - 1, inputtext);
						mysql_query(mysql, query, false);

						mysql_format(mysql, query, sizeof query, "INSERT INTO promocode_activations (uid,uip,code,paydays) VALUES (%d,'%e','%e',%d)", GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), inputtext, paydays);
						mysql_query(mysql, query, false);
					}
					else
					{
						SendClientMessage(playerid, 0x999999FF, "????? ????????????ù ????????? ????????");
						callcmd::promo(playerid, "");
					}
				}
			}
			case DIALOG_V2PROMO_CREATE:
			{
				if(response)
				{
					new code[32], type, amount, usings, paydays;

					if(sscanf(inputtext, "P<,>s[32]dddd", code, type, amount, usings, paydays))
					{
						SendClientMessage(playerid, 0x999999FF, "???????????? ????");
						ShowPlayerPromoCreate(playerid);

						return 1;
					}
					else
					{
						if(!(0 <= type <= 0))
						{
							SendClientMessage(playerid, 0x999999FF, "ù?? ?????? ???? 0");
							ShowPlayerPromoCreate(playerid);

							return 1;
						}

						if(!(25_000 <= amount <= 50_000))
						{
							SendClientMessage(playerid, 0x999999FF, "?????????? ?????? ???? ?? 25.000 ?? 50.000");
							ShowPlayerPromoCreate(playerid);

							return 1;
						}

						if(!(1 <= usings <= 500))
						{
							SendClientMessage(playerid, 0x999999FF, "?????????? ????????????? ?????? ???? ?? 1 ?? 500");
							ShowPlayerPromoCreate(playerid);

							return 1;
						}

						if(!(3 <= paydays <= 8))
						{
							SendClientMessage(playerid, 0x999999FF, "?????????? PayDay ?????? ???? ?? 3 ?? 8");
							ShowPlayerPromoCreate(playerid);

							return 1;
						}

						new query[128],
							Cache: result,
							rows;

						mysql_format(mysql, query, sizeof query, "SELECT * FROM promocode WHERE code='%s'", code);
						result = mysql_query(mysql, query, true);

						rows = cache_num_rows();

						cache_delete(result);

						if(rows)
						{
							SendClientMessage(playerid, 0x999999FF, "ù???? ???????? ??? ???? ? ???? ??????");
							ShowPlayerPromoCreate(playerid);

							return 1;
						}

						mysql_format(mysql, query, sizeof query, "INSERT INTO promocode (code, type, amount, usings, paydays) VALUES ('%s', %d, %d, %d, %d)",
						code, type, amount, usings, paydays);

						mysql_query(mysql, query);

						format(query, sizeof query, "{ffff00}| {FFFFFF}???????? {ffff00}\"%s\" {FFFFFF}??????? ?????? (/checkpromo)", code);
						SendClientMessage(playerid, 0xFFFFFFFF, query);
						
						GivePlayerMoneyEx(playerid, -3_000_000);
					}
				}
			}
		case DIALOG_PBASE:
		{
  		 if(!response) return 1;
    
		    new id = GetPlayerListitemValue(playerid, listitem);
    
 		  new Float: x, Float: y, Float: z;
  		     GetPlayerPos(id,x,y,z);
    		   SetPlayerCheckpoint(playerid, x, y, z, 7.0);
    		    new query[96];
		  format(query, sizeof query, "[?????] ????? %s ??????? ??????? ?? ??????.\n???????? ?? ???!", GetPlayerNameEx(id));
		 SendClientMessage(playerid, -1, query);
		  }
			case DIALOG_FRAKSKINS:
			{
				new org_id = GetPlayerTeamEx(playerid);

				if(response)
				{
					if(GetPlayerData(playerid, P_WORKDAY) == 0)
					{
						StartWorkDay(playerid);
					}
					else
					{
						EndWorkDay(playerid);
					}
				}
			}
			case DIALOG_REGISTER: // ??????????ù
			{
				if(GetPlayerData(playerid, P_ACCOUNT_STATE) == ACCOUNT_STATE_REGISTER)
				{
					new reg_step = GetPlayerData(playerid, P_ACCOUNT_STEP_STATE);
					new str_len = strlen(inputtext);

					switch(reg_step)
					{
						case REGISTER_STATE_PASSWORD: // ???? ?????ù
						{
							if(str_len)
							{
								if(!(6 <= str_len <= 15))
								{
									Dialog
									(
										playerid, DIALOG_REGISTER, DIALOG_STYLE_MSGBOX,
										"{FF9900}??????",
										"{FFFFFF}????? ?????ù ?????? ???? ?? 6 ?? 15 ????????\n"\
										"????????????ù ???????????? ??????? ? ????????? ?????, ? ????? ????? ?????",
										"??????", ""
									);
									return PlayerPlaySound(playerid, 1053, 0.0, 0.0, 0.0);
								}
								else if(strfind(inputtext, "%") != -1 || strfind(inputtext, " ") != -1)
								{
									Dialog
									(
										playerid, DIALOG_REGISTER, DIALOG_STYLE_MSGBOX,
										"{FF9900}??????",
										"{FFFFFF}????????? ???? ?????? ???????? ???????????? ??????? ??? ???????",
										"??????", ""
									);
									return PlayerPlaySound(playerid, 1053, 0.0, 0.0, 0.0);
								}
								else if(IsNumeric(GetPlayerNameEx(playerid)))
								{
									Dialog
									(
										playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
										"{FF9900}??????",
										"{FFFFFF}??? ??? ?? ?????? ????????? ?????. ???????? ??? ? ????????? ???????????",
										"??????", ""
									);
									return Kick:(playerid);
								}
								else
								{
									strmid(CheckPass[playerid], inputtext, 0, strlen(inputtext), 65);

									//pformat(g_player[playerid][P_PASSWORD], 16, "%s", inputtext);
								}
							}
							else reg_step --;
						}
						case REGISTER_STATE_REFER: 		// ???? ???? ????????????? ??????
						{
							if(response)
							{
								if(2 <= str_len <= 20)
								{
									new query[75];
									new Cache: result;

									mysql_format(mysql, query, sizeof query, "SELECT id FROM accounts WHERE name='%e' LIMIT 1", inputtext);
									result = mysql_query(mysql, query);

									if(cache_num_rows())
										SetPlayerData(playerid, P_REFER, cache_get_row_int(0, 0));

									cache_delete(result);

									if(!GetPlayerData(playerid, P_REFER))
									{
										Dialog
										(
											playerid, DIALOG_REGISTER, DIALOG_STYLE_MSGBOX,
											"{FF9900}??????",
											"{FFFFFF}ù????? ?????? ?? ??????????.\n"\
											"???? ?? ?? ?????? ?????? ??????? ??????? ?????? \"??????????\"",
											"??????", "??????????"
										);
										return PlayerPlaySound(playerid, 1053, 0.0, 0.0, 0.0);
									}
								}
								else reg_step --;
							}
						}
						case REGISTER_STATE_SEX:		// ????? ????
						{
							SetPlayerData(playerid, P_SEX, !response);
						}
					}
					ShowPlayerRegDialog(playerid, reg_step + 1);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_PLAYER_MENU:
			{
				if(response)
				{
					switch(listitem + 1)
					{
						case 1:
						{
                        ShowPlayerStats(playerid, playerid);
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
                       } 
						case 2:
						{
                       ShowPlayerCMDSDialog(playerid);
                       //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
                      } 
						case 3:
						{
                         ShowPlayerSettings(playerid);
                         //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 3");
                        } 
						case 4:
						{
                        ShowPlayerSecuritySettings(playerid);
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 4");
                       }
						case 5:
						{
                        ShowPlayerReportMenuDialog(playerid);
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 5");
                       } 
						case 6:
						{
                          ShowPlayerImprovementsDialog(playerid);
                          //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 6");
                         }
						case 7:
						{
                        ShowServerRules(playerid);
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 7");
                       } 
						case 8:
						{
                         ShowPlayerChangeNameDialog(playerid);
                         //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 8");
                        } 
						case 9:
						{
                         ShowPlayerOpenDonate(playerid);
                         //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 9");
                        } 
						case 10: {
							Dialog
							(
								playerid, DIALOG_ACT_PROMO, DIALOG_STYLE_LIST,
								"{FF0000} ????????",
								"{EB4C42} #1.    {FFFFFF}???????????? ????????\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
								"{EB4C42} #2. {FFFFFF}??????? ???????\t\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
								"{EB4C42} #3. {FFFFFF}ù?? ??????????\t\t\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
								"{EB4C42} #4. {FFFFFF}??????? ?????\t\t\t\t\t\t\t {888888} ??????? ??ù ?????????????ù",
								"?????", "?????"
							);
							SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 10");
						}
						case 11:
						{
                          callcmd::reward(playerid);
                          //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 11");
                         } 
						case 12:
						{
                          callcmd::quest(playerid);
                          //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 12");
                         } 
						default:
							return 1;
					}
				}
			}
			case DIALOG_ACT_PROMO:
			{
			    if(response)
			    {
					switch(listitem) {
						case 0:
						{
                        ShowPlayerPromoActive(playerid);
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 1");
                       } 
						case 1:
						{
                        callcmd::ytpromo(playerid, "");
                        //SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 2");
                       } 
						case 2:
						{
						//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 3");
                        callcmd::createpromo(playerid, "");
                       } 
						case 3:
						{
						//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Click Dialog 4");
                       callcmd::Promocomplete(playerid, "");
                      } 
					}
			    }
			}
			case DIALOG_OWNABLE_CAR_PT:
			{
			    if(response)
			    {
					ShowPerformanceItem(playerid, list_id);
			    }
			}

			case DIALOG_OWNABLE_CAR_PT_ITEM:
			{
			    if(response)
			    {
			        new vehicleid = GetPlayerOwnableCar(playerid);

			        if(vehicleid == INVALID_VEHICLE_ID)
			            return 1;

			        new index = GetVehicleData(vehicleid, V_ACTION_ID);

			        new pt_item_level[3],
			            pt_item_type = GetPVarInt(playerid, "pt_item_type");

			        pt_item_level[0] = GetOwnableCarData(index, OC_PT_ENGINE);
			        pt_item_level[1] = GetOwnableCarData(index, OC_PT_BRAKE);
			        pt_item_level[2] = GetOwnableCarData(index, OC_PT_STABILITY);

			        if(pt_item_level[pt_item_type - 1] != list_id - 1)
			        {
			            if(pt_item_level[pt_item_type - 1] < list_id - 1)
			            	SendClientMessage(playerid, 0x999999FF, "??????? ?? ?????? ?????????? ?????????? ?????????");

			            else
			                SendClientMessage(playerid, 0x999999FF, "????????? ???????????? ??????? ????????ù, ??? ?? ?? ?????? ?????????? ?????????");

			            ShowPerformanceItem(playerid, pt_item_type);

			            return 1;
			        }

			        if(pt_item_level[pt_item_type - 1] >= 3 && GetPlayerPremium(playerid) != 3)
			        {
			            SendClientMessage(playerid, 0x999999FF, "??????? ????? ????????ù ???????? ?????? ??ù ????????????? ??????? VIP Gold ??????.");
			            ShowPerformanceItem(playerid, pt_item_type);

			            return 1;
			        }

			        Dialog(playerid, DIALOG_OWNABLE_CAR_PT_ACCEPT, DIALOG_STYLE_MSGBOX, "??????? ????????ù", "{FFFFFF}?? ????????????? ?????? ?????????? ??? ??????????", "??????", "??????");

			        SetPVarInt(playerid, "pt_item_id", list_id);
			    }
			    else ShowVehicleImproveDialog(playerid);
			}
			case DIALOG_OWNABLE_CAR_PT_ACCEPT:
			{
				new pt_item_type = GetPVarInt(playerid, "pt_item_type"),
				pt_item_id = GetPVarInt(playerid, "pt_item_id");

				if(response)
				{
					new pt_item_price[3],
					pt_item_level[3],
					businessid;

					pt_item_price[0] = engine_ptune_price[pt_item_id - 1];
					pt_item_price[1] = brake_ptune_price[pt_item_id - 1];
					pt_item_price[2] = stability_ptune_price[pt_item_id - 1];

					if(GetPlayerMoneyEx(playerid) >= pt_item_price[pt_item_type - 1])
					{
						new vehicleid = GetPlayerOwnableCar(playerid);

						if(vehicleid == INVALID_VEHICLE_ID)
						return 0;

						new index = GetVehicleData(vehicleid, V_ACTION_ID);

						pt_item_level[0] = GetOwnableCarData(index, OC_PT_ENGINE);
						pt_item_level[1] = GetOwnableCarData(index, OC_PT_BRAKE);
						pt_item_level[2] = GetOwnableCarData(index, OC_PT_STABILITY);

						pt_item_level[pt_item_type - 1] ++;

						SetOwnableCarData(index, OC_PT_ENGINE, pt_item_level[0]);
						SetOwnableCarData(index, OC_PT_BRAKE, pt_item_level[1]);
						SetOwnableCarData(index, OC_PT_STABILITY, pt_item_level[2]);

						new query[255];

						mysql_format(mysql, query, sizeof query, "UPDATE ownable_cars SET pt_engine=%d, pt_brake=%d, pt_stability=%d WHERE id=%d", pt_item_level[0], pt_item_level[1], pt_item_level[2], GetOwnableCarData(index, OC_SQL_ID));
						mysql_query(mysql, query);
						print(query);
						if(mysql_errno())
							return printf("sql error %d", mysql_errno());

						GivePlayerMoneyEx(playerid, -pt_item_price[pt_item_type - 1], "Performance Tuning");

						SendClientMessage(playerid, 0x66CC33FF, "?? ??????? ????????? ?????????");

						businessid = GetPlayerInBiz(playerid);

						new price = pt_item_price[pt_item_type - 1];
						new take_prods = 5;

						if(GetBusinessData(businessid, B_PRODS) >= take_prods)
						{
							format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
						}
						else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
						mysql_query(mysql, query, false);

						
						if(!mysql_errno())
						{
							if(GetBusinessData(businessid, B_PRODS) >= take_prods)
							{
								AddBusinessData(businessid, B_PRODS, -, take_prods);
								AddBusinessData(businessid, B_BALANCE, +, price);
							}

							mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
							mysql_query(mysql, query, false);
						}
						else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 22)");
						
					}
				}

				ShowPerformanceItem(playerid, pt_item_type);
			}
			case DIALOG_QM:
            {
                if (!response) return 1;

                switch( listitem )
                {
                    case 0..19:
                    {
                        new format_str[28];
                        format(format_str, sizeof format_str, "??????? ????? ??ù ???ù ?%d", listitem+1);

                        if(!strcmp(quick_mes[playerid][listitem][line], format_str, true, 64 ))
                            return SendClientMessage(playerid, -1, "ù???? ??ù ??????? ????????ù ?? ??????????, ??ù ???? ????? ?????? ????? ????????? ? ?????? {FFBF00}'?????????????'");

                        sendQuickMessage(playerid, quick_mes[playerid][listitem][line]);
                        callcmd::binder(playerid);
                    }
                    case 21:
                    {
                        for( new j; j < 5; j++)
                            sendQuickMessage(playerid, quick_mes[playerid][j][line]);
                    }
                    case 22: editMessage(playerid);
                }
                return 1;
            }
            case DIALOG_EDIT_QM:
            {
                if (!response) return callcmd::binder(playerid);
                if (listitem != 20)
                Dialog(playerid, DIALOG_TEXT_QM, DIALOG_STYLE_INPUT, "{FFBF00}??????? ?????????:", " ", "?????????", "?????");
                else
                {
                    for( new j; j < 20; j++ )
                        format(quick_mes[playerid][j][line], 28, "??????? ????? ??ù ???ù ?%d", j+1);
                //
                    editMessage(playerid);
                }
                SetPVarInt(playerid, #dialog, listitem+1);
            }
			case DIALOG_TEXT_QM:
            {
                if (!response)
                    return editMessage(playerid);

                if (strlen (inputtext) > 128)
                {
                    SendClientMessage(playerid, -1, "???????????? ?????????? ???????? 128");

                    return Dialog(playerid, DIALOG_TEXT_QM, DIALOG_STYLE_INPUT, "{37B6CE}??????? ?????????:", " ", "?????????", "?????");
                }

                for( new j; j < 20; j++ )
                {
                    if(GetPVarInt(playerid, #dialog) == j+1)
                    {
                        format(quick_mes[playerid][j][line], 128, inputtext);
                        save_QuickMessage(playerid, j);
                    }
                }
                editMessage(playerid);

            }
			case DIALOG_PLAYER_STATS:
			{
				if(response)
				{
					callcmd::mm(playerid, "");
				}
			}
						case DIALOG_SELL_GIFT:
			{
			    if(!response) return 1;

			    new rand_prize = random(8),
					fmt_str[159];

			    switch(rand_prize)
			    {
			        case 1:
			        {
						new rand = random(50);

						AddPlayerData(playerid, P_AMMO, +, rand);
						UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

						format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ?????? ???????: {FFFFFF}%d ??.", rand);

			        }
			        case 2:
					{
						new rand = random(50);

						AddPlayerData(playerid, P_METALL, +, rand);
						UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

						format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ????? ?????????: {FFFFFF}%d ??.", rand);
					}
					case 3:
					{
					    new rand = random(100);

						AddPlayerData(playerid, P_DRUGS, +, rand);
						UpdatePlayerDatabaseInt(playerid, "drugs", GetPlayerData(playerid, P_DRUGS));

						format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ?????? ?????????: {FFFFFF}%d ??.", rand);
					}
					case 4:
					{
					    new rand = random(2000000);

					    GivePlayerMoneyEx(playerid, rand, "???????", true, true);

					    format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ?????? ??????: {FFFFFF}$%d", rand);
					}
					case 5:
					{
					    format(fmt_str, sizeof fmt_str, "????????!.");
					}
					case 6:
					{
						new rand = random(1000);

					    GivePlayerDonate(playerid, rand, "???????", true);

					    format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ????? ?????: {FFFFFF}%d ??.", rand);
					}
   			        case 7:
			        {
						new rand = random(300);

						AddPlayerData(playerid, P_AMMO, +, rand);
						UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

						format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ?????? ???????: {FFFFFF}%d ??.", rand);
			        }
			        case 8:
					{
						new rand = random(150);

						AddPlayerData(playerid, P_METALL, +, rand);
						UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

						format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ????? ?????????: {FFFFFF}%d ??.", rand);
					}
					case 9:
					{
					    new rand = random(150);

						AddPlayerData(playerid, P_DRUGS, +, rand);
						UpdatePlayerDatabaseInt(playerid, "drugs", GetPlayerData(playerid, P_DRUGS));

						format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ?????? ?????????: {FFFFFF}%d ??.", rand);
					}
			        default:
			        {
						new rand = random(300);

						AddPlayerData(playerid, P_AMMO, +, rand);
						UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

						format(fmt_str, sizeof fmt_str, "?? ?????ù?? ???????, ??? ?????? ???????: {FFFFFF}%d ??.", rand);

			        }
			    }

			    SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			    AddPlayerData(playerid, P_GIFTS, -, 1);

			    new fmt_str1[144];
			    format(fmt_str1, sizeof fmt_str1, "? ??? ???????? ????????: {FFFFFF}%d ??.", GetPlayerData(playerid, P_GIFTS));
				SendClientMessage(playerid, 0xffff00FF, fmt_str1);
				new query[144];

				format(query, sizeof query, "UPDATE accounts SET gifts=%d WHERE id=%d", GetPlayerData(playerid, P_GIFTS), GetPlayerAccountID(playerid));
				mysql_query(mysql, query, false);
			}
			case DIALOG_AUTOSALON_CAR_BUY:
			{
			    if(!response) return 1;

                new biz_id = GetPlayerInBiz(playerid);
				if (biz_id == -1) return 1;
				new car_market_id = biz_id - 34;
				if(GetBusinessData(biz_id, B_TYPE) != BUSINESS_TYPE_CAR_MARKET) return 1;
				BuyOwnableCar(playerid, car_market_id, buy_car_select_car[playerid]);
				return 1;

			}
			case DIALOG_RENT_BIKE_LUT:
            {
                if(response)
					{
						switch(listitem)
						{
							case 0:
							{
								if(GetPlayerData(playerid, P_RENT_BIKE)) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "?? ??? ?????????? ??????!");
								
								if(GetPlayerMoneyEx(playerid) < 50) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "? ??? ???????????? ??????? ??ù ??????!");
								GivePlayerMoneyEx(playerid, -50, "?????? ??????", true);
                                //RentCar[playerid] = 1;
								SetPlayerData(playerid, P_RENT_BIKE , CreateVehicle(448, -2464.267089,196.921752,26.042501,179.788787, 0, 0, 300,0,VEHICLE_ACTION_TYPE_RENT_BIKE_LUT));
								//SendClientMessage(playerid, -1,"{FFFF00}[?????????ù]{FFFFFF} ?? ??????? ?????????? ??????!");
								PutPlayerInVehicle(playerid, GetPlayerData(playerid, P_RENT_BIKE), 0);
								SetTimerEx("ShowEngineNotification", 1000, false, "i", playerid);
								return 1;
							}
							default:
							{
								if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID) return SendClientMessage(playerid, -1, ""USC" ? ??? ??? ????????? ?????? ????!");

								new idx = GetPlayerListitemValue(playerid, listitem-1);

								ShowOwnableCarLoadDialogLut(playerid, idx, false, true);
							}
						}
					}
            }
			
			case DIALOG_RENT_BIKE_BAT:
            {
                if(response)
					{
						switch(listitem)
						{
							case 0:
							{
								if(GetPlayerData(playerid, P_RENT_BIKE)) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "?? ??? ?????????? ??????!");
								
								if(GetPlayerMoneyEx(playerid) < 50) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "? ??? ???????????? ??????? ??ù ??????!");
								GivePlayerMoneyEx(playerid, -50, "?????? ??????", true);
                                //RentCar[playerid] = 1;
								SetPlayerData(playerid, P_RENT_BIKE , CreateVehicle(448, 1783.746582,2506.362304,14.610613,306.348205, 0, 0, 300,0,VEHICLE_ACTION_TYPE_RENT_BIKE_BAT));
								//SendClientMessage(playerid, -1,"{FFFF00}[?????????ù]{FFFFFF} ?? ??????? ?????????? ??????!");
								PutPlayerInVehicle(playerid, GetPlayerData(playerid, P_RENT_BIKE), 0);
								SetTimerEx("ShowEngineNotification", 1000, false, "i", playerid);
								return 1;
							}
							default:
							{
								if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID) return SendClientMessage(playerid, -1, ""USC" ? ??? ??? ????????? ?????? ????!");

								new idx = GetPlayerListitemValue(playerid, listitem-1);

								ShowOwnableCarLoadDialogBat(playerid, idx, false, true);
							}
						}
					}
            }
			
			case DIALOG_RENT_BIKE_ARZ:
            {
                if(response)
					{
						switch(listitem)
						{
							case 0:
							{
								if(GetPlayerData(playerid, P_RENT_BIKE)) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "?? ??? ?????????? ??????!");
								
								if(GetPlayerMoneyEx(playerid) < 50) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "? ??? ???????????? ??????? ??ù ??????!");
								GivePlayerMoneyEx(playerid, -50, "?????? ??????", true);
                                //RentCar[playerid] = 1;
								SetPlayerData(playerid, P_RENT_BIKE , CreateVehicle(448, 876.596862,852.374206,13.449650,159.791625, 0, 0, 300,0,VEHICLE_ACTION_TYPE_RENT_BIKE_ARZ));
								//SendClientMessage(playerid, -1,"{FFFF00}[?????????ù]{FFFFFF} ?? ??????? ?????????? ??????!");
								PutPlayerInVehicle(playerid, GetPlayerData(playerid, P_RENT_BIKE), 0);
								SetTimerEx("ShowEngineNotification", 1000, false, "i", playerid);
								return 1;
							}
							default:
							{
								if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID) return SendClientMessage(playerid, -1, ""USC" ? ??? ??? ????????? ?????? ????!");

								new idx = GetPlayerListitemValue(playerid, listitem-1);

								ShowOwnableCarLoadDialogArz(playerid, idx, false, true);
							}
						}
					}
            }
			
   			case DIALOG_RENT_BIKE:
            {
                if(response)
					{
						switch(listitem)
						{
							case 0:
							{
								if(GetPlayerData(playerid, P_RENT_BIKE)) return ShowNotificationDefault(playerid, 2, 5000, 4, 0, "?? ??? ?????????? ??????!");
								
								if(GetPlayerMoneyEx(playerid) < 50) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "? ??? ???????????? ??????? ??ù ??????!");
								GivePlayerMoneyEx(playerid, -50, "?????? ??????", true);

								new Float:POS[4];
								GetPlayerPos(playerid, POS[0],POS[1],POS[2]);
								GetPlayerFacingAngle(playerid, POS[3]);

								SetPlayerData(playerid, P_RENT_BIKE , CreateVehicle(462, POS[0],POS[1],POS[2],POS[3], 0, 0, 300,0,VEHICLE_ACTION_TYPE_RENT_BIKE));
								//SendClientMessage(playerid, -1,"{FFFF00}[?????????ù]{FFFFFF} ?? ??????? ?????????? ????!");
								PutPlayerInVehicle(playerid, GetPlayerData(playerid, P_RENT_BIKE), 0);
								SetTimerEx("ShowEngineNotification", 1000, false, "i", playerid);
								return 1;
							}
							default:
							{
								if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID) return SendClientMessage(playerid, -1, ""USC" ? ??? ??? ????????? ?????? ????!");

								new idx = GetPlayerListitemValue(playerid, listitem-1);

								ShowOwnableCarLoadDialog(playerid, idx, false, true);
							}
						}
					}
            }
            case DIALOG_ORG_CAR_GET:
	        {
	            if(!response) return 1;
	            new fmt_text[100];
	            new action_id = GetPlayerListitemValue(playerid, 0);

	            format(fmt_text, sizeof fmt_text, ""SC"?? ??ù?? ????????? {ffff00}%s", g_vehicle_info[g_org_car[action_id][O_MODEL][listitem]-400][VI_NAME]);
	            SendClientMessage(playerid, -1, fmt_text);

	            new buy_cars_count = g_org_car[action_id][O_COUNT]++;

	            if(buy_cars_count >= 3)
	            g_org_car[action_id][O_COUNT] = 0;

	            new Float: pos_x = org_car_pos_spawn[action_id][buy_cars_count][0];
	            new Float: pos_y = org_car_pos_spawn[action_id][buy_cars_count][1];
	            new Float: pos_z = org_car_pos_spawn[action_id][buy_cars_count][2];
	            new Float: angle = org_car_pos_spawn[action_id][buy_cars_count][3];

	            new vehicleid = CreateVehicle(g_org_car[action_id][O_MODEL][listitem], pos_x, pos_y, pos_z, angle, g_org_car[action_id][O_COLOR][0], g_org_car[action_id][O_COLOR][1], -1, 0, VEHICLE_ACTION_ORG_CAR, g_org_car[action_id][O_FRAC_ID]);
	            SetVehicleData(vehicleid, V_ACTION_OWNER, playerid); //
	            SetPlayerData(playerid, P_FRACTION_CAR, vehicleid);
	            PutPlayerInVehicle(playerid, vehicleid, 0);
				SetTimerEx("ShowEngineNotification", 1000, false, "i", playerid);
	
				if (GetPlayerTeamEx(playerid) == TEAM_ARMY && GetVehicleModel(vehicleid) == 433)
  		     {
      		    SendClientMessage(playerid, -1, "??ù ?????? ???????? ?????????? ??????????? {FFFF00}/adelivery");
     		 	SetTimerEx("TimerCallAdelivery", 500, false, "i", playerid);
    		   }
     		  
	        }
			case DIALOG_PLAYER_CMDS:
			{
				if(response)
				{
					switch(listitem + 1)
					{
						case 1:
						{
							Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ??????????",
								"{00CC33}/car{FFFFFF} - ???? ??????????\n"\
								"{00CC33}/key{FFFFFF}  - ???????? ????\n"\
								"{00CC33}/e{FFFFFF} - ??????? ?????????\n"\
								"{00CC33}/lock{FFFFFF} - ??????? ?????????\n"\
								"{00CC33}/park{FFFFFF} - ???????????? ?????????",
								"?????", "???????"
							);
						}
						case 2:
						{
							Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ??????ù",
								"{00CC33}/c(all) [?????]{FFFFFF} - ?????????\n"\
								"{00CC33}/sms [?????] [?????]{FFFFFF}  - ????????? ?????????\n"\
								"{00CC33}/p{FFFFFF} - ????ù?? ?????\n"\
								"{00CC33}/h{FFFFFF} - ????????? ?????\n"\
								"{00CC33}/f(n) [?????]{FFFFFF} - ????ù ?????\n"\
								"{00CC33}/r(n) [?????]{FFFFFF} - ????ù ???????????\n"\
								"{00CC33}/me [?????]{FFFFFF} - ????????? ????????\n"\
								"{00CC33}/do [?????]{FFFFFF} - ????????? ???????? ?? 3-?? ????\n"\
								"{00CC33}/try [?????]{FFFFFF} - ????????? ???????? (??????/?? ??????)\n"\
								"{00CC33}/s [?????]{FFFFFF} - ????????\n"\
								"{00CC33}/n [?????]{FFFFFF} - OOC ???\n"\
								"{00CC33}/w [?????]{FFFFFF} - ??????????\n"\
								"{00CC33}/ad [?????]{FFFFFF} - ?????? ???ù??????\n"\
								"{00CC33}/u [?????]{FFFFFF} - ?????-???? (??ù ????ù)\n"\
								"{00CC33}/gnews [?????]{FFFFFF} - ???. ?????\n",
								"?????", "???????"
							);
						}
						case 3:
						{
							Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ????",
								"{00CCFF}/home{FFFFFF} - ?????? ??????????\n"\
								"{00CCFF}/sellhome{FFFFFF} - ??????? ??? ???-??\n"\
								"{00CCFF}/sellmyhome [id ??????] [????]{FFFFFF} - ??????? ??? ??????\n"\
								"{00CCFF}/exit{FFFFFF} - ????? ?? ????\n"\
								"{00CCFF}/makestore{FFFFFF} - ????????? ????\n"\
								"{00CCFF}/use{FFFFFF} - ???????????? ????\n"\
								"{00CCFF}/live [id ??????]{FFFFFF} - ????????? ??????\n"\
								"{00CCFF}/liveout [id ??????]{FFFFFF} - ??????? ??????\n"\
								"{00CCFF}/homelock{FFFFFF} - ???????/??????? ???",
								"?????", "???????"
							);
						}
						case 4:
						{
							Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ???????",
								"{33CC66}/business{FFFFFF} - ?????? ??????????\n"\
								"{33CC66}/sellbiz{FFFFFF} - ??????? ?????? ???-??\n"\
								"{33CC66}/fuelst{FFFFFF} - ?????? ?????????ù ???\n"\
								"{33CC66}/sellfuelst{FFFFFF} - ??????? ??? ???-??\n"\
								"{33CC66}/buyfuelst{FFFFFF} - ?????? ???\n"\
								"{33CC66}/sellmyfuelst [id ??????] [????]{FFFFFF} - ??????? ??? ??????",
								"?????", "???????"
							);
						}
						case 5:
						{
							Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ?????",
								"{6699CC}/getfuel{FFFFFF} - ???????? ??????? (???????)\n"\
								"{6699CC}/fill [id ??????] [???-??] [????]{FFFFFF} - ??????? ??????? ??????\n"\
								"{6699CC}/repair [id ??????]{FFFFFF} - ???????? ?????????",
								"?????", "???????"
							);
						}
						case 6:
						{
      						Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ????",
								"{CCCC33}/makegun{FFFFFF} - ??????? ??????\n"\
								"{CCCC33}/capture{FFFFFF} - ?????? ??????\n"\
								"{CCCC33}/(un)tie{FFFFFF} - ??ù???? / ????ù????\n"\
								"{CCCC33}/close{FFFFFF} - ??????? ?????\n"\
								"{CCCC33}/killstop{FFFFFF} - ??? ?? ?????? ?? ??????",
								"?????", "???????"
							);
						}
						case 7:
						{
                            Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ?????????????",
								"{99CC33}/smenu{FFFFFF} - ???? ?????????\n"\
								"{99CC33}/givelic{FFFFFF} - ?????? ????????\n"\
								"{99CC33}/free{FFFFFF} - ????????? ???????????\n"\
								"{99CC33}/debtorlist{FFFFFF} - ?????? ?????????\n"\
								"{99CC33}/debtorsell{FFFFFF} - ??????? ????????? ? ????????",
								"?????", "???????"
							);
       					}
       					case 8:
						{
                            Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ?????",
								"{0066FF}/givevb{FFFFFF} - ?????? ??????? ????? (??ù 9+ ??????)\n"\
								"{0066FF}/adelivery{FFFFFF} - ?????? ???????? ??????????\n"\
								"{0066FF}/loadboxes{FFFFFF} - ?????? ???????? ù????? ? ???????????\n"\
								"{0066FF}/unloadboxes{FFFFFF} - ?????? ????????? ù????? ? ???????????\n",
								"?????", "???????"
							);
						}
						case 9:
						{
                            Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ???????",
								"{00008B} ????\n\n"\
								"{0066FF}/search{FFFFFF} - ?????????? ?????\n"\
								"{0066FF}/(un)cuff{FFFFFF} - ?????? / ??ù?? ?????????\n"\
								"{0066FF}/su{FFFFFF} - ?????? ??????\n"\
								"{0066FF}/clear{FFFFFF} - ???????? ??????\n"\
								"{0066FF}/arrest{FFFFFF} - ???????? ? ???\n"\
								"{0066FF}/wanted{FFFFFF} - ?????? ?????????????\n"\
								"{0066FF}/gotome{FFFFFF} - ????? ??????????? ?? ?????\n"\
								"{0066FF}/putpl{FFFFFF} - ????????? ? ?????????\n"\
								"{0066FF}/ceject{FFFFFF} - ???????? ?? ??????\n"\
								"{0066FF}/m [?????]{FFFFFF} - ???????\n\n"\
								"{00008B} ?????\n\n"\
								"{0066FF}/ticket{FFFFFF} - ?????? ?????\n"\
								"{0066FF}/takelic{FFFFFF} - ???????? ????????\n\n"\
								"{00008B} ???\n\n"\
								"{0066FF}/dismiss{FFFFFF} - ??????? ?????????? ??????? ????????? (9+ ????)\n"\
								"{0066FF}/rc{FFFFFF} - ???????? ? IC ????? ??????????? ??? ??????????\n"\
								"{0066FF}/rnc{FFFFFF} - ???????? ? OOC ????? ??????????? ??? ??????????\n"\
								"{0066FF}/cmembers{FFFFFF} - ?????????? ?????? ??????????? ? ?????????? ???????????\n"\
								"{0066FF}/(off)dis{FFFFFF} - ??????????????ù(?????)",
								"?????", "???????"
							);
						}
						case 10:
{
	Dialog
	(
		playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
		"??????? ????",
		"{0066FF}/(un)pr{FFFFFF} - ??????/??ù?? ????????? ????????????\n"\
		"{0066FF}/(un)mr{FFFFFF} - ??????/??ù?? ??????? ????????????\n"\
		"{0066FF}/prin{FFFFFF} - ???????? ???????????? ? ??????\n"\
		"{0066FF}/prout{FFFFFF} - ????????? ???????????? ?? ???????\n"\
		"{0066FF}/groom{FFFFFF} - ?????? ??????? ? ??????? ??ù ????????\n"\
		"{0066FF}/startmeet{FFFFFF} - ?????? ????????\n"\
		"{0066FF}/stopmeet{FFFFFF} - ????????? ????????\n"\
		"{0066FF}/gotome{FFFFFF} - ????? ???????????? ?? ?????\n"\
		"{0066FF}/(un)cuff{FFFFFF} - ??????????/???????? ????????????\n",
		"?????", "???????"
	);
}
						case 11:
						{
						    Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ???",
								"{FFCC33}/edit{FFFFFF} - ????????????? ???ù??????\n"\
								"{FFCC33}/t{FFFFFF} - ?????-????\n"\
								"{FFCC33}/givemic{FFFFFF} - ???? ?????? ? ?????",
								"?????", "???????"
							);
						}
						case 12:
						{
						    Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ???????",
								"{FF66FF}/medhelp [id ??????]{FFFFFF} - ?????????? ??????? ? ????????\n"\
								"{FF66FF}/gmedcard [id ??????] (????){FFFFFF} - ?????????? ?????? ????????????\n"\
								"{FF66FF}/heal [id ??????]{FFFFFF} - ?????????? ??????? ?? ??????\n"\
								"{FF66FF}/out [id ??????]{FFFFFF} - ???????? ?????? ?? ????????\n"\
								"{FF66FF}/changesex [id ??????]{FFFFFF} - ??????? ??? ??????",
								"?????", "???????"
							);
						}
						case 13:
						{
							Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"??????? ???????",
								"{ABCDEF}/invite{FFFFFF} - ????ù?? ? ???????????\n"\
								"{ABCDEF}/uninvite{FFFFFF} - ??????? ??????\n"\
								"{ABCDEF}/f(un)vig{FFFFFF} - ??????/??ù?? ??????? ??????\n"\
								"{ABCDEF}/rang{FFFFFF} - ?????? ???? ??????\n"\
								"{ABCDEF}/changeskin{FFFFFF} - ??????? ????\n"\
								"{ABCDEF}/showall{FFFFFF} - ?????? ???? ???????????\n"\
								"{ABCDEF}/uninviteoff{FFFFFF} - ??????? ? ????????\n"\
								"{ABCDEF}/gnews{FFFFFF} - ??????????????ù ?????",
								"?????", "???????"
							);
						}
						case 14:
						{
							Dialog
							(
								playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_MSGBOX,
								"????? ???????",
								"{00CC33}/mm{FFFFFF} - ??????? ?????\n"\
								"{00CC33}/pay [id ??????] [??????????]{FFFFFF} - ???????? ??????\n"\
								"{00CC33}/online{FFFFFF} - ?????? ???????",
								"?????", "???????"
							);
						}
						default:
							return 1;
					}
					//ShowPlayerCMDSDialog(playerid);
				}
				else callcmd::mm(playerid, "");
			}
			case DIALOG_PLAYER_SETTINGS:
			{
				if(response)
				{
					new E_PLAYER_SETTINGS_STRUCT: setting_id = E_PLAYER_SETTINGS_STRUCT: listitem;
					switch(listitem)
					{
						case 0..5:
						{
							if(S_CHAT_TYPE <= setting_id <= S_VEH_CONTROL)
							{
								new setting_type = GetPlayerSettingData(playerid, setting_id);

								switch(setting_id)
								{
									case S_CHAT_TYPE:
									{
										if(!(SETTING_CHAT_OFF <= ++setting_type <= SETTING_CHAT_ADVANCE))
										{
											setting_type = SETTING_CHAT_OFF;
										}
									}
									case S_TEAM_CHAT..S_VEH_CONTROL:
									{
										setting_type ^= SETTING_TYPE_ON;
									}
								}
								if(setting_id == S_PLAYERS_NICK)
								{
									foreach(new idx : Player)
										ShowPlayerNameTagForPlayer(playerid, idx, setting_type);
								}

								SetPlayerSettingData(playerid, setting_id, setting_type);
								SetPlayerChatInit(playerid);

								ShowPlayerSettings(playerid);
							}
						}
						case 6:
						{
							Dialog
						    (
						        playerid, DIALOG_SET_SPAWN, DIALOG_STYLE_LIST,
						        "{FFCC00}????????? ????? ??ù?????ù ? ????",
						        "1. ?? ?/? ??????? ??? ???????????\n\
						        2. ? ??????????? ????\n\
						        3. ? ??????????? ??????\n\
						        4. ?? ???? ???????????\n\
						        5. ? ????ù? (?????????? ??????????)\n\
						        6. ?? ???? ?????",
						        "???????", "??????"
						    );
						}
						case 7:
						{
							new query[128];

							format
							(
								query, sizeof query,
								"UPDATE accounts SET "\
								"setting1=%d,"\
								"setting2=%d,"\
								"setting4=%d,"\
								"setting5=%d,"\
								"setting6=%d"\
								" WHERE id=%d LIMIT 1",
								GetPlayerSettingData(playerid, S_CHAT_TYPE),
								GetPlayerSettingData(playerid, S_TEAM_CHAT),
								GetPlayerSettingData(playerid, S_NICK_IN_CHAT),
								GetPlayerSettingData(playerid, S_ID_IN_CHAT),
								GetPlayerSettingData(playerid, S_VEH_CONTROL),
								GetPlayerAccountID(playerid)
							);
							mysql_query(mysql, query, false);

							if(!mysql_errno())
							{
								Dialog
								(
									playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
									"{FFCD00}?????????",
									"{FFFFFF}????? ????????? ????? ????????????? ??????????????ù ????? ?????? ???????????",
									"??", ""
								);
							}
							else
							{
								SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 02)");
								ShowPlayerSettings(playerid);
							}

						}

					}
				}
				else callcmd::mm(playerid, "");
			}
			case DIALOG_PLAYER_SECURITY_SETTINGS:
			{
				if(response)
				{
					switch(listitem + 1)
					{
						case 1:
						{
							Dialog
							(
								playerid, DIALOG_SECURITY_SETTING_INFO, DIALOG_STYLE_MSGBOX,
								"{FFCD00}?????????ù ? ??????????",
								"{FFFFFF}ù?? ?? ?????? ???????? ????????? ???????????? ?????? ????????. ???\n"\
								"??????? ???????? ??? ?? ??????.\n\n"\
								"?????????? 3 ???? ??????: ? ?????????????? ?????????? ?????????ù\n"\
								"{6699FF}Google Authenticator{FFFFFF}, ??????? '????????? ???' ??? ?????? ??????????\n"\
								"????????. ???? ?? ???????? ??????, ?? ??? ???????????, ??????\n"\
								"?????ù, ????? ????????????ù ???? ???? ??? ????? ?????? ????????\n"\
								"(? ??????????? ?? ????? ????????). ????????? ?? ?????? ??????, ??????\n"\
								"?????? ????? ? ???? ????????????.\n\n"\
								"??????? ????? ??????????? ???? ?????? ???? ??? IP ????? ??? ???????\n"\
								"(?????? 2 ????? IP ??????) ?????? ?? ????????? ? ????, ??????? ????\n"\
								"???????? ??? ???????? ????? ? ????. ??????? ???????, ???????\n"\
								"?????? ??????, ???? ??? ????? ????????? ?????????ù ????? ? ???????\n"\
								"??????????.",
								"?????", ""
							);
						}
						case 2:
						{
							if(strcmp(GetPlayerData(playerid, P_SETTING_PHONE), "None", true) != 0)
							{
								// ??????????
								Dialog
								(
									playerid, DIALOG_SECURITY_SETTING_PHONE, DIALOG_STYLE_LIST,
									"{FFCD00}??? ??????????? ??????????? ?????????...",
									"?? ???????????\n"\
									"???? ??????? ?? ????????? ? ????\n"\
									"???? IP ?? ????????? ? ????",
									"?????????", "?????"
								);
							}
							else
							{
								// ?? ??????????
								Dialog
								(
									playerid, DIALOG_SECURITY_SETTING_INFO, DIALOG_STYLE_MSGBOX,
									"{FFCD00}????????? ???????",
									"{FFFFFF}? ?????? ?????? ?? ???????? ?????????? ???? ??????? ????????????.\n"\
									"???????? ???? ????????ù ?? ????????? ??????????.",
									"?????", ""
								);
							}

						}
						case 3:
						{
							if(strcmp(GetPlayerData(playerid, P_SETTING_PIN), "None", true) != 0)
							{
								Dialog
								(
									playerid, DIALOG_SECURITY_SETTING_PIN, DIALOG_STYLE_LIST,
									"{FFCD00}??? ??????????? ??????????? ????????? PIN-???...",
									"?? ???????????\n"\
									"???? ??????? ?? ????????? ? ????\n"\
									"???? IP ?? ????????? ? ????",
									"?????????", "?????"
								);
							}
							else
							{
								Dialog
								(
									playerid, DIALOG_SECURITY_SETTING_PIN_SET, DIALOG_STYLE_MSGBOX,
									"{FFCD00}????????? PIN-???",
									"{FFFFFF}??ù ??????????ù, ??? ?????????? ????????? ? ??????? 4-? ??????? ???.\n\n"\
									"??? ??????? ???????????? ??????? ???????? ??? ???????, ???? ??\n"\
									"????????? ??????? ?????-?????????, ??????? ????????????? ?????? ?\n"\
									"??????????.  ?????? ?????? ????????????ù ? ????????? ???ù???, ??? ?? ????\n"\
									"??????????????? ??????????? ?????? ??? PIN-???.",
									"?????", "?????"
								);
							}
						}
						case 4:
						{
							Dialog
							(
								playerid, DIALOG_SECURITY_SETTING_INFO, DIALOG_STYLE_MSGBOX,
								"{FFCD00}?????? ? ?????????????? ?????????ù Authenticator",
								"{FFFFFF}???? ??? ?????? ù??ù???ù ????? ???????? ??ù ?????? ????????. ????? ??? ????????????,\n"\
								"??????? ? ?????? ??????? ?? ????? {33CCFF}"SERVER_SITE" (????????? > ???????? ???.) {FFFFFF}? ????????\n"\
								"?????????ù?.\n\n"\
								"??? ??????????ù ????????? ?????????? ? ?????????? ????????? ?????????? (Android, iOS,\n"\
								"Windows Phone ? ??????). ????? ????????ù ?????? ?? ?????, ????????? ? ??? ???? ??ù\n"\
								"?????????ù ?????????.",
								"?????", ""
							);
						}
						case 5:
						{
							Dialog
							(
								playerid, DIALOG_SECURITY_SETTING_PASS_1, DIALOG_STYLE_INPUT,
								"{DC143C}"SERVER_NAME"{ffffff} | ????????? ?????ù",
								"{FFFFFF}??????? ??? ??????? ?????? ? ???? ????:",
								"?????", "?????"
							);
						}
						case 6:
						{
							if(!strcmp(GetPlayerData(playerid, P_SETTING_PIN), "None", true))
							{
								Dialog
								(
									playerid, DIALOG_SECURITY_SETTING_PIN_SET, DIALOG_STYLE_MSGBOX,
									"{FFCD00}????????? PIN-???",
									"{FFFFFF}??ù ??????????ù, ??? ?????????? ????????? ? ??????? 4-? ??????? ???.\n\n"\
									"??? ??????? ???????????? ??????? ???????? ??? ???????, ???? ??\n"\
									"????????? ??????? ?????-?????????, ??????? ????????????? ?????? ?\n"\
									"??????????.  ?????? ?????? ????????????ù ? ????????? ???ù???, ??? ?? ????\n"\
									"??????????????? ??????????? ?????? ??? PIN-???.",
									"?????", "?????"
								);
							}
							else ShowPlayerPinCodePTD(playerid, PIN_CODE_STATE_CHECK);
						}
						case 7:
						{
							// 7. ?????? ????????????
							static const
								setting_status_name[3][64] =
							{
								"{CC9900}?? ????????????ù",
								"{3399FF}????????????ù ??? ???????????? ???????",
								"{009900}????????????ù ??? ???????????? IP"
							};

							new fmt_str[364];
							format
							(
								fmt_str, sizeof fmt_str,
								"{FFFFFF}ù?? ?? ?????? ??????? ?????? ???? ????? ???????? ????????????.\n"\
								"??ù ?? ????????ù, ???????? ?????? ????? ? ???? ????????\n\n"\
								"????????? ???????:\t\t%s\n"\
								"{FFFFFF}????????? PIN-???:\t\t%s\n"\
								"{FFFFFF}Google Authenticator:\t\t{CC9900}?? ????????????ù",
								setting_status_name[GetPlayerData(playerid, P_REQUEST_PHONE)],
								setting_status_name[GetPlayerData(playerid, P_REQUEST_PIN)]
							);
							Dialog(playerid, DIALOG_SECURITY_SETTING_INFO, DIALOG_STYLE_MSGBOX, "{FFCD00}?????? ????????????", fmt_str, "?????", "");
						}
						case 8:
						{
							SendClientMessage(playerid, -1, "?????????!");
						}
						default:
							return 1;
					}
				}
				else callcmd::mm(playerid, "");
			}
			case DIALOG_ACTION_EXIT_HOUSE:
			{
				if(response)
					ExitPlayerFromHouse(playerid, 3.0, listitem);
			}
			case DIALOG_ACTION_TYPE_GET_FAMILY:
            {
                if(!(g_family_loaded >= 200))
                {
                    Dialog
                    (
                        playerid, DIALOG_CREATE_FAMILY, DIALOG_STYLE_INPUT,
                        "???????? ?????",
                        "{FFFFFF}????????? ???????ù ?????:{32a44b} 3kk ??????\n\
                        {FFFFFF}????? ??????? ?????, ??????? ???????? ?????, ? ??????? '???????'",
                        "???????", "??????"
                    );
                }
            }
            case DIALOG_CREATE_FAMILY:
            {
                if(!response) return 1;

                if(GetPlayerData(playerid, P_FAMILY) != 0) return SendClientMessage(playerid, 0xCECECEFF, "?? ??? ???????? ? ?????");
                if(GetPlayerMoneyEx(playerid) >= 3000000)
                {
                    if(GetPlayerData(playerid, P_LEVEL) >= 3)
                    {
                        new query[256],
                            Cache: result,
                            rows;

                        mysql_format(mysql, query, sizeof query, "SELECT * FROM family WHERE name='%s'", inputtext);
                        result = mysql_query(mysql, query, true);

                        rows = cache_num_rows();

                        cache_delete(result);

                        if(rows)
                        {
                            SendClientMessage(playerid, 0xCECECEFF, "?????? ??ù ??? ???????????ù");
                            Dialog
                            (
                                playerid, DIALOG_CREATE_FAMILY, DIALOG_STYLE_INPUT,
                                "???????? ?????",
                                "{FFFFFF}??????? ???????? ?????, ? ??????? '???????'",
                                "???????", "??????"
                            );

                            return 1;
                        }



                        new time = gettime();

                        mysql_format
                        (
                            mysql, query, sizeof query,
                            "INSERT INTO family "\
                                "(name,u_id,time) "\
                                "VALUES "\
                                "('%e',%d,%d)",
                            inputtext,
                            GetPlayerAccountID(playerid),
                            time
                        );
                        result = mysql_query(mysql, query);

                        new fam_id = cache_insert_id() - 1;

                        SetPlayerData(playerid, P_FAMILY, fam_id);
                        SetPlayerData(playerid, P_FAMILY_RANK, 10);

                        SetFamilyData(fam_id, F_SQL_ID, fam_id);

                        format(g_family[fam_id][F_NAME], 64, "%s", inputtext);

                        SetFamilyData(fam_id, F_TIME, time);
                        SetFamilyData(fam_id, F_HOUSE_ID, -1);
                        SetFamilyData(fam_id, F_USER_ID, GetPlayerAccountID(playerid));
                        format(g_family[fam_id][F_RANK1], 32, "1 ????");
                        format(g_family[fam_id][F_RANK2], 32, "2 ????");
                        format(g_family[fam_id][F_RANK3], 32, "3 ????");
                        format(g_family[fam_id][F_RANK4], 32, "4 ????");
                        format(g_family[fam_id][F_RANK5], 32, "5 ????");
                        format(g_family[fam_id][F_RANK6], 32, "6 ????");
                        format(g_family[fam_id][F_RANK7], 32, "7 ????");
                        format(g_family[fam_id][F_RANK8], 32, "8 ????");
                        format(g_family[fam_id][F_RANK9], 32, "9 ????");
                        format(g_family[fam_id][F_RANK10], 32, "10 ????");

                        cache_delete(result);

                        GivePlayerMoneyEx(playerid, -3000000, "???????? ?????", true);

                        format(query, sizeof query, "????ù '%s' ???????. {d8284c}??????? ?? ?????????? /mn > 2", inputtext);
                        SendClientMessage(playerid, 0x1E90FFFF, query);

                        format(query, sizeof query, "UPDATE accounts SET family=%d, family_rank=%d WHERE id=%d LIMIT 1", GetPlayerData(playerid, P_FAMILY), GetPlayerData(playerid, P_FAMILY_RANK), GetPlayerAccountID(playerid));
						mysql_query(mysql, query, false);

                    }
                    else SendClientMessage(playerid, 0xCECECEFF, "??ù ???????ù ????? ?????????? ????????? ? ????? ?? ????? 3-ex ???");
                }
                else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ?????-??????");
            }
            case DIALOG_ACTION_QUEST:
			{
				if(!response) return 1;

				switch(listitem)
				{
					case 0:
					{

					    if(GetPlayerData(playerid, P_QUEST_1) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????");

					    new fmt_str[255 + 1];

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"???????? 10 ?????? ?? ?????? ????????.\n\
							"c_server"???????: "c_m"5000 ???\n\
							"c_server"??????????????: "c_b"/gps > ??????????\n\
							"c_server"????????: "c_b"%d/10",
							GetPlayerData(playerid, P_QUEST_EXP_1)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "????? | ?????? ??????", fmt_str, "???????", "");
						return 1;
					}
					case 1:
					{

					    if(GetPlayerData(playerid, P_QUEST_2) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????");

					    new fmt_str[255 + 1];

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"???? ????????? ???????\n\
							"c_server"???????: "c_m"5000 ???\n\
							"c_server"??????????????: "c_b"/gps > ????????? ????? > ????????? 24/7\n\
							"c_server"????????: "c_b"%d/1",
							GetPlayerData(playerid, P_QUEST_EXP_2)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 2:
					{

					    if(GetPlayerData(playerid, P_QUEST_3) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????");

					    new fmt_str[255 + 1];

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"?????? ?? ????? ? ????????? ???\n\
							"c_server"???????: "c_m"5000 ???\n\
							"c_server"??????????????: "c_b"/gps > ?????? ??ù ???????? > ?????? ???????\n\
							"c_server"????????: "c_b"%d/20",
							GetPlayerData(playerid, P_QUEST_EXP_3)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 3:
					{

					    if(GetPlayerData(playerid, P_QUEST_4) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????");

					    new fmt_str[255 + 1];

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"?????? ?? ????? ? ?????? ??? 20 ???????. ???? ??????????.\n\
							"c_server"???????: "c_m"5000 ???\n\
							"c_server"??????????????: "c_b"/gps > ?????? ??ù ???????? > ?????? ?????\n\
							"c_server"????????: "c_b"%d/20",
							GetPlayerData(playerid, P_QUEST_EXP_4)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 4:
					{

					    if(GetPlayerData(playerid, P_QUEST_5) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????");

					    new fmt_str[255 + 1];

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"???????ù??ù ? ????? ????????? ? ???? ???? ?????????\n\
							"c_server"???????: "c_m"10000 ???\n\
							"c_server"??????????????: "c_b"/gps > ??????????\n\
							"c_server"????????: "c_b"%d/1",
							GetPlayerData(playerid, P_QUEST_EXP_5)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 5:
					{

					    if(GetPlayerData(playerid, P_QUEST_6) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????");

					    new fmt_str[255 + 1];

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"???????ù??ù ? ??????? ?????? ? ???? ???? ??????\n\
							"c_server"???????: "c_m"5000 ???\n\
							"c_server"??????????????: "c_b"/gps > ????????? ??????? ??????\n\
							"c_server"????????: "c_b"%d/1",
							GetPlayerData(playerid, P_QUEST_EXP_6)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 6:
					{

					    if(GetPlayerData(playerid, P_QUEST_7) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????");

					    new fmt_str[255 + 1];

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"?????? ? ????? ?????\n\
							"c_server"???????: "c_m"10000 ???\n\
							"c_server"????????: "c_b"%d/1",
							GetPlayerData(playerid, P_QUEST_EXP_7)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 7:
					{

					    if(GetPlayerData(playerid, P_QUEST_8) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????");

					    new fmt_str[270 + 1];

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"?????? ? ????? ???????????.\n\
							"c_server"???????: "c_m"10000 ???\n\
							"c_server"????????: "c_b"%d/1",
							GetPlayerData(playerid, P_QUEST_EXP_8)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
				}
			}
			case DIALOG_FAMILY_CAR_RANG:
            {
                if(response)
                {
                    new idx = GetPVarInt(playerid, "sql_id"),
                        model_id,
                        rang,
                        Cache: result,
                        query[120];

                    mysql_format(mysql, query, sizeof query, "SELECT model_id, rang FROM family_cars WHERE id='%d'", idx);
                    result = mysql_query(mysql, query, true);
                    printf(query);

                    if(cache_num_rows())
                    {
                        model_id = cache_get_field_content_int(0, "model_id");
                        rang = cache_get_field_content_int(0, "rang");
                    }
                    format(query, sizeof(query),
					""c_b"??????: "c_s"%s\n\
					"c_b"???????? ? "c_s"%d "c_b"?????\n\
					??????? ????? ???? ? ???????? ????? ???????? ???? ?????????",
					GetVehicleInfo(model_id-400, VI_NAME),
					rang);

					Dialog(playerid, DIALOG_FAMILY_CAR_RANG_SET, DIALOG_STYLE_INPUT,"ù???????? ?????", query, "?????", "??????");

					printf(query);
                    cache_delete(result);
                }
            }
			case DIALOG_FAMILY_CAR_RANG_SET:
            {
                if(response)
                {
                    new input = strval(inputtext);
                    if(input < 11 && IsNumeric(inputtext))
                    {
                        new idx = GetPVarInt(playerid, "sql_id"),
                             query[100];

                        SetFamilyCarData(idx, F_RANG, input);

                        mysql_format(mysql, query, sizeof query, "UPDATE family_cars SET rang = '%d' WHERE id='%d'",input, idx);
                        mysql_query(mysql, query, false);
                        SendClientMessage(playerid, -1, "???? ??????? ???????");
                    }
                }
            }
			case DIALOG_COLOR_FAMILY_SET:
			{
			    ShowFamilyColorSet(playerid);
			}
			case DIALOG_FAMILY_SETRANG_MENU:
            {
                //new fmt_text[500], fam_id = GetPlayerData(playerid, P_FAMILY);
                if(!response) return callcmd::fmenu(playerid, "");

			    switch(list_id)
				{
				    case 1:
				    {
				        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_INV, DIALOG_STYLE_LIST, "?????? ? ??????? /finvite", fmt_text, "?????", "???????");
				    }
				    case 2:
				    {
				        new fmt_text[500],
								fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_UNINV, DIALOG_STYLE_LIST, "?????? ? ??????? /funinvite", fmt_text, "?????", "???????");

				    }
				    case 3:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_MUTE, DIALOG_STYLE_LIST, "?????? ? ??????? /fmute", fmt_text, "?????", "???????");

				    }
				    case 4:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_UNMUTE, DIALOG_STYLE_LIST, "?????? ? ??????? /funmute", fmt_text, "?????", "???????");
				    }
				    case 5:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_WARN, DIALOG_STYLE_LIST, "?????? ? ??????? /fwarn", fmt_text, "?????", "???????");

				    }
				    case 6:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_UNWARN, DIALOG_STYLE_LIST, "?????? ? ??????? /funwarn", fmt_text, "?????", "???????");

				    }
				    case 7:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_GIVER, DIALOG_STYLE_LIST, "?????? ? ??????? /frang", fmt_text, "?????", "???????");

				    }
				    case 8:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_TAKEMONEY, DIALOG_STYLE_LIST, "?????? ? ??????? ?? ??????", fmt_text, "?????", "???????");

				    }
				    case 9:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_TAKEDRUGS, DIALOG_STYLE_LIST, "?????? ? ?????????? ?? ??????", fmt_text, "?????", "???????");

				    }
				    case 10:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_TAKEMETALL, DIALOG_STYLE_LIST, "?????? ? ?????????? ?? ??????", fmt_text, "?????", "???????");

				    }
				    case 11:
				    {

                        new fmt_text[500],
							fam_id = GetPlayerData(playerid, P_FAMILY);

					 	format(fmt_text, sizeof fmt_text,
						""c_server"[1] "c_b"%s\n\
						"c_server"[2] "c_b"%s\n\
						"c_server"[3] "c_b"%s\n\
						"c_server"[4] "c_b"%s\n\
						"c_server"[5] "c_b"%s\n\
						"c_server"[6] "c_b"%s\n\
						"c_server"[7] "c_b"%s\n\
						"c_server"[8] "c_b"%s\n\
						"c_server"[9] "c_b"%s\n\
						"c_server"[10] "c_b"%s",
						GetFamilyData(fam_id, F_RANK1),
						GetFamilyData(fam_id, F_RANK2),
						GetFamilyData(fam_id, F_RANK3),
						GetFamilyData(fam_id, F_RANK4),
						GetFamilyData(fam_id, F_RANK5),
						GetFamilyData(fam_id, F_RANK6),
						GetFamilyData(fam_id, F_RANK7),
						GetFamilyData(fam_id, F_RANK8),
						GetFamilyData(fam_id, F_RANK9),
						GetFamilyData(fam_id, F_RANK10));

						Dialog(playerid, DIALOG_SET_FRANG_TAKEAMMO, DIALOG_STYLE_LIST, "?????? ? ???????? ?? ??????", fmt_text, "?????", "???????");

				    }
				}
            }
            case DIALOG_SET_FRANG_INV:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Inv='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_INV, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /finvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_UNINV:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnInv='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNINV, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funinvite ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_MUTE:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Mute='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_MUTE, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_UNMUTE:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnMute='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNMUTE, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funmute ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_WARN:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_Warn='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_WARN, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /fwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_UNWARN:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_UnWarn='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_UNWARN, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /funwarn ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_GIVER:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_GiveRang='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_RANG_GIVER, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? ??????? /frang ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_TAKEMONEY:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMoney='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_MONEY, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '???????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_TAKEDRUGS:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeDrugs='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_DRUGS, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_TAKEMETALL:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeMetall='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_METALL, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '??????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_SET_FRANG_TAKEAMMO:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556], fmt_msg[185],
					fam_id = GetPlayerData(playerid, P_FAMILY),
					rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

			    switch(list_id)
				{
				    case 1:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='1' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 1);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK1));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 2:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='2' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 2);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK2));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 3:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='3' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 3);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK3));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 4:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='4' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 4);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK4));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 5:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='5' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 5);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK5));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 6:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='6' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 6);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK6));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 7:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='7' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 7);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK7));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 8:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='8' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 8);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK8));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 9:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='9' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 9);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK9));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				    case 10:
				    {
						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET r_TakeAmmo='10' WHERE id='%d' LIMIT 1", fam_id + 1);
						mysql_query(mysql, fmt_text, false);

						SetFamilyData(fam_id, F_TAKE_AMMO, 10);

						format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ?????? ?????? ? '????????' ?? ?????? ?? ???? '%s'+ ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetFamilyData(fam_id, F_RANK10));

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							if(!IsPlayerLogged(i)) continue;
							if(GetPlayerData(i, P_FAMILY) == 0) continue;
							if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

							if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

							SendClientMessage(i, 0x6699CCFF, fmt_msg);
						}
				    }
				}
			}
			case DIALOG_FAMILY_NCHANGE:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    new fmt_text[556],
					fam_id = GetPlayerData(playerid, P_FAMILY);


				new query[128],
					Cache: result,
					rows;

				mysql_format(mysql, query, sizeof query, "SELECT * FROM family WHERE name='%s'", inputtext);
				result = mysql_query(mysql, query, true);

				rows = cache_num_rows();

				cache_delete(result);

				if(rows)
				{
					SendClientMessage(playerid, 0xCECECEFF, "?????? ??ù ??? ???????????ù");
					callcmd::fmenu(playerid, "");

					return 1;
				}

			 	format(fmt_text, sizeof fmt_text, "?? ??????? ???????? ???????? ????? ? {ffff00}\"%s\" {1E90FF}?? {ffff00}\"%s\"", GetFamilyData(fam_id, F_NAME), inputtext);
				SendClientMessage(playerid, 0x1E90FFFF, fmt_text);

				GivePlayerDonateRub(playerid, -100, "?????? ???????? ?????", true);


				format(g_family[fam_id][F_NAME], 64, inputtext);
				mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET name='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
				mysql_query(mysql, fmt_text, false);
			}
			case DIALOG_FAMILY_COLOR:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    if(GetPlayerData(playerid, P_DONATE_RUB) < 20) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ??????, ????????ù 20");

			    if(0 > list_id > 16) return SendClientMessage(playerid, 0xCECECEFF, "ID ????? ?? 0 ?? 16");

			    new fam_id = GetPlayerData(playerid, P_FAMILY),
					fmt_text[556];

			    SetFamilyData(fam_id, F_COLOR, list_id);

			    GivePlayerDonateRub(playerid, -20, "?????? ???? ?????", true);

                mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET color='%d' WHERE id='%d' LIMIT 1", list_id, fam_id + 1);
				mysql_query(mysql, fmt_text, false);

				format(fmt_text, sizeof fmt_text, "?? ??????? ???????? ???? ????? {ffff00}%s {1E90FF}?? {%06x}%s", GetFamilyData(fam_id, F_NAME), family_colors[list_id] >>> 8, family_colors_name[list_id]);
				SendClientMessage(playerid, 0x1E90FFFF, fmt_text);
			}
			case DIALOG_FAMILY_WAREHOUSE:
			{
			    if(!response) return callcmd::fmenu(playerid, "");

			    switch(list_id)
				{
				    case 1:
				    {
				        Dialog
                        (
                            playerid, DIALOG_FAMILY_PUT_CASH, DIALOG_STYLE_INPUT,
                            "???????? ??????",
                            "{FFFFFF}??????? ?????:",
                            "????????", "??????"
                        );
				    }
				    case 2:
				    {
				    	Dialog
                        (
                            playerid, DIALOG_FAMILY_PUT_DRUGS, DIALOG_STYLE_INPUT,
                            "???????? ?????????",
                            "{FFFFFF}??????? ?????????? ?????:",
                            "????????", "??????"
                        );
					}
					case 3:
					{
					    Dialog
                        (
                            playerid, DIALOG_FAMILY_PUT_METALL, DIALOG_STYLE_INPUT,
                            "???????? ?????????",
                            "{FFFFFF}??????? ?????????? ??:",
                            "????????", "??????"
                        );
					}
					case 4:
					{
					    Dialog
                        (
                            playerid, DIALOG_FAMILY_PUT_AMMO, DIALOG_STYLE_INPUT,
                            "???????? ???????",
                            "{FFFFFF}??????? ?????????? ??:",
                            "????????", "??????"
                        );
					}
					case 5:
					{
					    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_TAKE_MONEY);

                		if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ????? ?????? ?? ?????? ?????.");

					    Dialog
                        (
                            playerid, DIALOG_FAMILY_TAKE_CASH, DIALOG_STYLE_INPUT,
                            "??ù?? ??????",
                            "{FFFFFF}??????? ?????:",
                            "??ù??", "??????"
                        );
					}
					case 6:
					{
					    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_TAKE_DRUGS);

                		if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ????? ????????? ?? ?????? ?????.");

						Dialog
                        (
                            playerid, DIALOG_FAMILY_TAKE_DRUGS, DIALOG_STYLE_INPUT,
                            "??ù?? ?????????",
                            "{FFFFFF}??????? ?????????? ?????:",
                            "??ù??", "??????"
                        );
					}
					case 7:
					{
					    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_TAKE_METALL);

                		if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ????? ????????? ?? ?????? ?????.");

					    Dialog
                        (
                            playerid, DIALOG_FAMILY_TAKE_METALL, DIALOG_STYLE_INPUT,
                            "??ù?? ?????????",
                            "{FFFFFF}??????? ?????????? ??:",
                            "??ù??", "??????"
                        );
					}
					case 8:
					{
					    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_TAKE_AMMO);

                		if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ????? ??????? ?? ?????? ?????.");

					    Dialog
                        (
                            playerid, DIALOG_FAMILY_TAKE_AMMO, DIALOG_STYLE_INPUT,
                            "??ù?? ???????",
                            "{FFFFFF}??????? ?????????? ??:",
                            "??ù??", "??????"
                        );
					}
				}
			}
			case DIALOG_FAMILY_PUT_CASH:
            {
                if(!response) return 1;


                new put_sum = strval(inputtext);
                if(put_sum > 0 && IsNumeric(inputtext))
                {

                    new fmt_str[155];
                    new money = GetPlayerMoneyEx(playerid);

                    if(money >= put_sum)
                    {
                        format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.money=%d,f.money=f.money + %d WHERE a.id=%d AND f.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                        mysql_query(mysql, fmt_str, false);

                        if(!mysql_errno())
                        {
                            GivePlayerMoneyEx(playerid, -put_sum, "?????????? ????? ?????", false, true);

                            new fmt_msg[144],
								fam_id = GetPlayerData(playerid, P_FAMILY),
								rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

                            format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s: %s %s[%d] ??????? %d??????.", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, g_family[GetPlayerData(playerid, P_FAMILY)][F_NAME], GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, put_sum);

							for(new i; i < MAX_PLAYERS; i ++)
							{
								if(!IsPlayerConnected(i)) continue;
								if(!IsPlayerLogged(i)) continue;
								if(GetPlayerData(i, P_FAMILY) == 0) continue;
								if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

								if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

								SendClientMessage(i, 0x6699CCFF, fmt_msg);
							}

                            AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_MONEY, +, put_sum);
                            format
                            (
                                fmt_str, sizeof fmt_str,
                                ""c_b"?? ????????:\t{32a44b}$%d\n"\
                                "{FFFFFF}???????? ?????? ?????: $%d",
                                put_sum,
                                GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_MONEY)
                            );
                            return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{1E90FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
                        }
                        else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
                    }
                    else SendClientMessage(playerid, 0xFFFFFFFF, "???????????? ???????");
                }
                return 1;
            }
            case DIALOG_FAMILY_PUT_DRUGS:
            {
                if(!response) return 1;


                new put_sum = strval(inputtext);
                if(put_sum > 0 && IsNumeric(inputtext))
                {

                    new fmt_str[180];
                    new money = GetPlayerData(playerid, P_DRUGS);

                    if(money >= put_sum)
                    {
                        format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.drugs=%d,f.drugs=f.drugs + %d WHERE a.id=%d AND f.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                        mysql_query(mysql, fmt_str, false);

                        if(!mysql_errno())
                        {
                            AddPlayerData(playerid, P_DRUGS, -, put_sum);
                            UpdatePlayerDatabaseInt(playerid, "drugs", GetPlayerData(playerid, P_DRUGS));

                            AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_DRUGS, +, put_sum);

                            new fmt_msg[144],
								fam_id = GetPlayerData(playerid, P_FAMILY),
								rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

							format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s: %s %s[%d] ??????? %d ????? ??????????.", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, g_family[GetPlayerData(playerid, P_FAMILY)][F_NAME], GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, put_sum);

							for(new i; i < MAX_PLAYERS; i ++)
							{
								if(!IsPlayerConnected(i)) continue;
								if(!IsPlayerLogged(i)) continue;
								if(GetPlayerData(i, P_FAMILY) == 0) continue;
								if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

								if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

								SendClientMessage(i, 0x6699CCFF, fmt_msg);
							}

                            format
                            (
                                fmt_str, sizeof fmt_str,
                                ""c_b"?? ????????: "c_i"%d ?. "c_b"??????????\n"\
                                "\n"\
                                "{FFFFFF}?????????? ?????????? ?? ??????: "c_i"%d\n"\
								""c_b"?????????? ?????????? ? ???: "c_i"%d",
                                put_sum,
                                GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_DRUGS),
                                GetPlayerData(playerid, P_DRUGS)
                            );
                            return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{1E90FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
                        }
                        else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
                    }
                    else SendClientMessage(playerid, 0xFFFFFFFF, "? ??? ??? ?????? ?????????? ??????????!");
                }
                return 1;
            }
            case DIALOG_FAMILY_PUT_METALL:
            {
                if(!response) return 1;


                new put_sum = strval(inputtext);
                if(put_sum > 0 && IsNumeric(inputtext))
                {

                    new fmt_str[155];
                    new money = GetPlayerData(playerid, P_METALL);

                    if(money >= put_sum)
                    {
                        format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.metall=%d,f.metal=f.metal + %d WHERE a.id=%d AND f.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                        mysql_query(mysql, fmt_str, false);

                        if(!mysql_errno())
                        {
                            AddPlayerData(playerid, P_METALL, -, put_sum);
                            UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

                            AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_METAL, +, put_sum);

                            new fmt_msg[144],
								fam_id = GetPlayerData(playerid, P_FAMILY),
								rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

                            format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s: %s %s[%d] ??????? %d ??. ??????????.", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, g_family[GetPlayerData(playerid, P_FAMILY)][F_NAME], GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, put_sum);

							for(new i; i < MAX_PLAYERS; i ++)
							{
								if(!IsPlayerConnected(i)) continue;
								if(!IsPlayerLogged(i)) continue;
								if(GetPlayerData(i, P_FAMILY) == 0) continue;
								if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

								if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

								SendClientMessage(i, 0x6699CCFF, fmt_msg);
							}

                            format
                            (
                                fmt_str, sizeof fmt_str,
                                ""c_b"?? ????????: "c_i"%d ??. "c_b"??????????\n"\
                                "\n"\
                                "{FFFFFF}?????????? ?????????? ?? ??????: "c_i"%d\n"\
								""c_b"?????????? ?????????? ? ???: "c_i"%d",
                                put_sum,
                                GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_METAL),
                                GetPlayerData(playerid, P_METALL)
                            );
                            return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{1E90FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
                        }
                        else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
                    }
                    else SendClientMessage(playerid, 0xFFFFFFFF, "? ??? ??? ?????? ?????????? ??????????!");
                }
                return 1;
            }
            case DIALOG_FAMILY_PUT_AMMO:
            {
                if(!response) return 1;


                new put_sum = strval(inputtext);
                if(put_sum > 0 && IsNumeric(inputtext))
                {

                    new fmt_str[155];
                    new money = GetPlayerData(playerid, P_AMMO);

                    if(money >= put_sum)
                    {
                        format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.ammo=%d,f.ammo=f.ammo + %d WHERE a.id=%d AND f.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                        mysql_query(mysql, fmt_str, false);

                        if(!mysql_errno())
                        {
                            AddPlayerData(playerid, P_AMMO, -, put_sum);
                            UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

                            AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_AMMO, +, put_sum);

                            new fmt_msg[144],
								fam_id = GetPlayerData(playerid, P_FAMILY),
								rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

                            format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s: %s %s[%d] ??????? %d ??. ????????.", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, g_family[GetPlayerData(playerid, P_FAMILY)][F_NAME], GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, put_sum);

							for(new i; i < MAX_PLAYERS; i ++)
							{
								if(!IsPlayerConnected(i)) continue;
								if(!IsPlayerLogged(i)) continue;
								if(GetPlayerData(i, P_FAMILY) == 0) continue;
								if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

								if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

								SendClientMessage(i, 0x6699CCFF, fmt_msg);
							}

                            format
                            (
                                fmt_str, sizeof fmt_str,
                                ""c_b"?? ????????: "c_i"%d ??. "c_b"????????\n"\
                                "\n"\
                                "{FFFFFF}?????????? ???????? ?? ??????: "c_i"%d\n"\
								""c_b"?????????? ???????? ? ???: "c_i"%d",
                                put_sum,
                                GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_DRUGS),
                                GetPlayerData(playerid, P_DRUGS)
                            );
                            return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{1E90FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
                        }
                        else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
                    }
                    else SendClientMessage(playerid, 0xFFFFFFFF, "? ??? ??? ?????? ?????????? ????????!");
                }
                return 1;
            }
            case DIALOG_FAMILY_TAKE_CASH:
            {
                if(!response) return 1;

                new put_sum = strval(inputtext);
                if(put_sum > 0 && IsNumeric(inputtext))
                {

                    new fmt_str[155];
                    new money = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_MONEY);

                    if(money >= put_sum)
                    {
                        format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.money=%d,f.money=f.money - %d WHERE a.id=%d AND f.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                        mysql_query(mysql, fmt_str, false);

                        if(!mysql_errno())
                        {
                            GivePlayerMoneyEx(playerid, put_sum, "??ù??? ????? ? ????? ?????", false, true);

                            AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_MONEY, -, put_sum);

                            new fmt_msg[144],
								fam_id = GetPlayerData(playerid, P_FAMILY),
								rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

                            format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s: %s %s[%d] ??ù? %d??????.", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, g_family[GetPlayerData(playerid, P_FAMILY)][F_NAME], GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, put_sum);

							for(new i; i < MAX_PLAYERS; i ++)
							{
								if(!IsPlayerConnected(i)) continue;
								if(!IsPlayerLogged(i)) continue;
								if(GetPlayerData(i, P_FAMILY) == 0) continue;
								if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

								if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

								SendClientMessage(i, 0x6699CCFF, fmt_msg);
							}
                            format
                            (
                                fmt_str, sizeof fmt_str,
                                ""c_b"?? ??ù??:\t{32a44b}$%d\n"\
                                "{FFFFFF}???????? ?????? ?????: $%d",
                                put_sum,
                                GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_MONEY)
                            );
                            return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{1E90FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
                        }
                        else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
                    }
                    else SendClientMessage(playerid, 0xFFFFFFFF, "???????????? ???????");
                }
                return 1;
            }
            case DIALOG_FAMILY_TAKE_DRUGS:
            {
                if(!response) return 1;


                new put_sum = strval(inputtext);
                if(put_sum > 0 && IsNumeric(inputtext))
                {

                    new fmt_str[155];
                    new money = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_DRUGS);

                    if(money >= put_sum)
                    {
                        format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.drugs=%d,f.drugs=f.drugs - %d WHERE a.id=%d AND f.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                        mysql_query(mysql, fmt_str, false);

                        if(!mysql_errno())
                        {
                            AddPlayerData(playerid, P_DRUGS, +, put_sum);
                            UpdatePlayerDatabaseInt(playerid, "drugs", GetPlayerData(playerid, P_DRUGS));

                            AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_DRUGS, -, put_sum);

                            new fmt_msg[180],
								fam_id = GetPlayerData(playerid, P_FAMILY),
								rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

                            format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s: %s %s[%d] ??ù? %d ????? ??????????.", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, g_family[GetPlayerData(playerid, P_FAMILY)][F_NAME], GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, put_sum);

							for(new i; i < MAX_PLAYERS; i ++)
							{
								if(!IsPlayerConnected(i)) continue;
								if(!IsPlayerLogged(i)) continue;
								if(GetPlayerData(i, P_FAMILY) == 0) continue;
								if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

								if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

								SendClientMessage(i, 0x6699CCFF, fmt_msg);
							}

                            format
                            (
                                fmt_str, sizeof fmt_str,
                                ""c_b"?? ??ù??: "c_i"%d ?. "c_b"??????????\n"\
                                "\n"\
                                "{FFFFFF}?????????? ?????????? ?? ??????: "c_i"%d\n"\
								""c_b"?????????? ?????????? ? ???: "c_i"%d",
                                put_sum,
                                GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_DRUGS),
                                GetPlayerData(playerid, P_DRUGS)
                            );
                            return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{1E90FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
                        }
                        else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
                    }
                    else SendClientMessage(playerid, 0xFFFFFFFF, "?? ?????? ????? ??? ?????? ?????????? ??????????!");
                }
                return 1;
            }
            case DIALOG_FAMILY_TAKE_METALL:
            {
                if(!response) return 1;


                new put_sum = strval(inputtext);
                if(put_sum > 0 && IsNumeric(inputtext))
                {

                    new fmt_str[155];
                    new money = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_METAL);

                    if(money >= put_sum)
                    {
                        format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.metall=%d,f.metal=f.metal - %d WHERE a.id=%d AND f.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                        mysql_query(mysql, fmt_str, false);

                        if(!mysql_errno())
                        {
                            AddPlayerData(playerid, P_METALL, +, put_sum);
                            UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

                            AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_METAL, -, put_sum);

                            new fmt_msg[144],
								fam_id = GetPlayerData(playerid, P_FAMILY),
								rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

                            format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s: %s %s[%d] ??ù? %d ??. ?????????.", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, g_family[GetPlayerData(playerid, P_FAMILY)][F_NAME], GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, put_sum);

							for(new i; i < MAX_PLAYERS; i ++)
							{
								if(!IsPlayerConnected(i)) continue;
								if(!IsPlayerLogged(i)) continue;
								if(GetPlayerData(i, P_FAMILY) == 0) continue;
								if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

								if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

								SendClientMessage(i, 0x6699CCFF, fmt_msg);
							}

                            format
                            (
                                fmt_str, sizeof fmt_str,
                                ""c_b"?? ??ù??: "c_i"%d ?. "c_b"??????????\n"\
                                "\n"\
                                "{FFFFFF}?????????? ?????????? ?? ??????: "c_i"%d\n"\
								""c_b"?????????? ?????????? ? ???: "c_i"%d",
                                put_sum,
                                GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_DRUGS),
                                GetPlayerData(playerid, P_DRUGS)
                            );
                            return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{1E90FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
                        }
                        else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
                    }
                    else SendClientMessage(playerid, 0xFFFFFFFF, "?? ?????? ????? ??? ?????? ?????????? ??????????!");
                }
                return 1;
            }
            case DIALOG_FAMILY_TAKE_AMMO:
            {
                if(!response) return 1;


                new put_sum = strval(inputtext);
                if(put_sum > 0 && IsNumeric(inputtext))
                {

                    new fmt_str[180];
                    new money = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_AMMO);

                    if(money >= put_sum)
                    {
                        format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.ammo=%d,f.ammo=f.ammo - %d WHERE a.id=%d AND f.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                        mysql_query(mysql, fmt_str, false);

                        if(!mysql_errno())
                        {
                            AddPlayerData(playerid, P_AMMO, +, put_sum);
                            UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

                            AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_AMMO, -, put_sum);

                            new fmt_msg[144],
								fam_id = GetPlayerData(playerid, P_FAMILY),
								rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

                            format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s: %s %s[%d] ??ù?  %d ??. ????????.", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, g_family[GetPlayerData(playerid, P_FAMILY)][F_NAME], GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, put_sum);

							for(new i; i < MAX_PLAYERS; i ++)
							{
								if(!IsPlayerConnected(i)) continue;
								if(!IsPlayerLogged(i)) continue;
								if(GetPlayerData(i, P_FAMILY) == 0) continue;
								if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

								if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

								SendClientMessage(i, 0x6699CCFF, fmt_msg);
							}

                            format
                            (
                                fmt_str, sizeof fmt_str,
                                ""c_b"?? ??ù??: "c_i"%d ??. "c_b"????????\n"\
                                "\n"\
                                "{FFFFFF}?????????? ???????? ?? ??????:\t"c_i"%d\n"\
								""c_b"?????????? ???????? ? ???: "c_i"%d",
                                put_sum,
                                GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_DRUGS),
                                GetPlayerData(playerid, P_DRUGS)
                            );
                            return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{1E90FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
                        }
                        else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
                    }
                    else SendClientMessage(playerid, 0xFFFFFFFF, "?? ?????? ????? ??? ?????? ?????????? ????????!");
                }
                return 1;
            }
            case DIALOG_FAMILY_MENU:
            {
                if(!response) return 1;

                switch(listitem)
                {
                    case 0:
					{
						SCM(playerid, -1, "{FFFF00}| {FFFFFF}???ù?????? ?? ???????.");
					}
                    case 1: ShowFamilyInfo(playerid);
                    case 2:
                    {
                    	ShowFamilyHelpCommands(playerid);
                    }
                    case 3:
                    {
                        if(GetPlayerData(playerid, P_FAMILY_RANK) != 10) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???????");
                        Dialog
                        (
                            playerid, DIALOG_FAMILY_SETTINGS, DIALOG_STYLE_LIST,
                            "?????????",
                            ""c_server"[1] "c_b"?????????? ????? ??ù?????ù\n\
                            "c_server"[2] "c_b"?????????? ???????\n\
							"c_server"[3] "c_b"??????? ???????? ????? (80 ???.)\n\
							"c_server"[4] "c_b"??????? ???? ????? (20 ???.)\n\
							"c_server"[5] "c_b"????????? ??????? ??????\n\
							"c_s"[6] "c_b"?????????? ???????????",
                            "?????", ""
                        );
                    }
                    case 4:
					{
					callcmd::famsklad(playerid, "");
					}
					case 5:
					{
					    if(GetPlayerData(playerid, P_FAMILY_RANK) < 9) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???????");

						new query[256];
						format(query, sizeof query, "SELECT name, score, family_rank FROM accounts WHERE family = %d ORDER BY family_rank DESC", GetPlayerData(playerid, P_FAMILY));
						mysql_tquery(mysql, query, "ShowFamilyAllPlayers", "i", playerid);
					}
                }
            }
            case DIALOG_FAMILY_SETTINGS:
            {
                if(response)
                {
                    switch(listitem)
                    {
                        case 0:
                        {
                            Dialog
                            (
                                playerid, DIALOG_FAMILY_SPAWN_SET, DIALOG_STYLE_MSGBOX,
                                "????????? ?????",
                                "?? ????????????? ?????? ?????????? ????? ?????? ????? ?????\n\
                                ?? ?? ????? ??? ?? ???????????",
                                "?????", "??????"
                            );
                        }
                        case 1:ShowChangeRangDialog(playerid);
                        case 2: ShowChangeNameDialog(playerid);
                        case 3: callcmd::setfcolor(playerid);
						case 4: ShowFamilyRangSetMenu(playerid);
						case 5: ViewFamilyCar(playerid);
                    }
                }
            }
            case DIALOG_FAMILY_SPAWN_SET:
            {
                if(!response) return true;
                new family = GetPlayerData(playerid, P_FAMILY);

                GetPlayerPos(playerid, g_family[family][F_SPAWN_POSITION][0], g_family[family][F_SPAWN_POSITION][1], g_family[family][F_SPAWN_POSITION][2]);
                GetPlayerFacingAngle(playerid, g_family[family][F_SPAWN_POSITION][3]);

                g_family[family][F_SPAWN_IV][0] = GetPlayerInterior(playerid);
                g_family[family][F_SPAWN_IV][1] = GetPlayerVirtualWorld(playerid);

                SendClientMessage(playerid, -1, "??????ù ?????? ??????? ????????!");

                new query[276];
                format(query, sizeof query, "UPDATE family SET pos_x = '%f', pos_y = '%f', pos_z = '%f', pos_fa = '%f', inter = '%d', world = '%d' WHERE id = %d", g_family[family][F_SPAWN_POSITION][0], g_family[family][F_SPAWN_POSITION][1], g_family[family][F_SPAWN_POSITION][2], g_family[family][F_SPAWN_POSITION][3], g_family[family][F_SPAWN_IV][0], g_family[family][F_SPAWN_IV][1], family);
                mysql_query(mysql, query, false);
                printf(query);
                return 1;
            }
            case DIALOG_FAMILY_LEAVE:
            {
                new fmt_text[110];
                if(response)
                {
                    new fam_id = GetPlayerData(playerid, P_FAMILY),
                    rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

                    format(fmt_text, sizeof fmt_text, "[F] %s %s[%d] ??????? ????? ?? ???????????? ???????",
                    GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid);

                    for(new i; i < MAX_PLAYERS; i ++)
                    {
                        if(!IsPlayerConnected(i)) continue;
                        if(!IsPlayerLogged(i)) continue;
                        if(GetPlayerData(i, P_FAMILY) == 0) continue;
                        if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

                        if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

                        SendClientMessage(i, 0xCECECEFF, fmt_text);
                    }

                    format(fmt_text, sizeof fmt_text, "?? ???????? ????? \"%s\"", GetFamilyData(fam_id, F_NAME));
                    SendClientMessage(playerid, 0xFFFF00FF, fmt_text);

                    FUnInvite(playerid, playerid);
                }
            }
            case DIALOG_FAMILY_RANG:
            {
                if(!response) return callcmd::fmenu(playerid, "");

                new fam_id = GetPlayerData(playerid, P_FAMILY),
                    desc[32] = "";

                switch(listitem)
                {
                    case 0: strcat(desc, g_family[fam_id][F_RANK1]);
                    case 1: strcat(desc, g_family[fam_id][F_RANK2]);
                    case 2: strcat(desc, g_family[fam_id][F_RANK3]);
                    case 3: strcat(desc, g_family[fam_id][F_RANK4]);
                    case 4: strcat(desc, g_family[fam_id][F_RANK5]);
                    case 5: strcat(desc, g_family[fam_id][F_RANK6]);
                    case 6: strcat(desc, g_family[fam_id][F_RANK7]);
                    case 7: strcat(desc, g_family[fam_id][F_RANK8]);
                    case 8: strcat(desc, g_family[fam_id][F_RANK9]);
                    case 9: strcat(desc, g_family[fam_id][F_RANK10]);
                }

                SetPVarInt(playerid, "userang", listitem+1);
                Dialog
                (
                    playerid, DIALOG_FAMILY_RCHANGE, DIALOG_STYLE_INPUT,
                    desc,
                    "{FFFFFF}??????? ????????, ??????? ?? ?????? {d8284c}??????????:",
                    "?????", "??????"
                );
            }
            case DIALOG_FAMILY_RCHANGE:
            {
                if(!response) return callcmd::fmenu(playerid, "");

                new fmt_text[556],
                    rang_id = GetPVarInt(playerid, "userang"),
                    fam_id = GetPlayerData(playerid, P_FAMILY);

                switch(rang_id)
                {
                    case 1:
                    {
                        format(g_family[fam_id][F_RANK1], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank1='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 2:
                    {
                        format(g_family[fam_id][F_RANK2], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank2='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 3:
                    {
                        format(g_family[fam_id][F_RANK3], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank3='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 4:
                    {
                        format(g_family[fam_id][F_RANK4], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank4='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 5:
                    {
                        format(g_family[fam_id][F_RANK5], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank5='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 6:
                    {
                        format(g_family[fam_id][F_RANK6], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank6='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 7:
                    {
                        format(g_family[fam_id][F_RANK7], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank7='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 8:
                    {
                        format(g_family[fam_id][F_RANK8], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank8='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 9:
                    {
                        format(g_family[fam_id][F_RANK9], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank9='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                    case 10:
                    {
                        format(g_family[fam_id][F_RANK10], 32, inputtext);
                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET rank10='%s' WHERE id='%d' LIMIT 1", inputtext, fam_id + 1);
                        mysql_query(mysql, fmt_text, false);
                    }
                }

                format(fmt_text, sizeof fmt_text, "?? ??????? ???????? ???????? ????? {d8284c}?%d {1E90FF}?? {d8284c}\"%s\"", rang_id, inputtext);
                SendClientMessage(playerid, 0x1E90FFFF, fmt_text);
            }
			case DIALOG_SECURITY_SETTING_INFO:
			{
				ShowPlayerSecuritySettings(playerid);
			}
			case DIALOG_SECURITY_SETTING_PHONE:
			{
				if(!strcmp(GetPlayerData(playerid, P_SETTING_PHONE), "None", true)) return 1;

				if(response)
				{
					if(0 <= listitem <= 2)
					{
						new query[64 + 1];
						SetPlayerData(playerid, P_REQUEST_PHONE, listitem);

						format(query, sizeof query, "UPDATE accounts SET request_phone=%d WHERE id=%d LIMIT 1", listitem, GetPlayerAccountID(playerid));
						mysql_query(mysql, query, false);

						if(!mysql_errno())
						{
							SendClientMessage(playerid, 0xFFFFFFFF, "????????ù ? ?????????? ???????????? {00FFCC}?????????");
							switch(listitem + 1)
							{
								case 1: SendClientMessage(playerid, 0xFF6600FF, "?????? ?? ???? ?????????? ???????? ????????");
								case 2: SendClientMessage(playerid, 0xFFFF00FF, "??? ????????? ??????? ????? ????????????ù ??? ???????????? ???????");
								case 3: SendClientMessage(playerid, 0x66CC00FF, "????????? ??????? ????? ????????????ù ??? ???????????? IP ???????");
							}
						}
						else
						{
							SendClientMessage(playerid, 0xFFFFFFFF, "????????ù ? ?????????? ???????????? {FF3333}?? ?????????");
							SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 03)");
						}
					}
				}
				ShowPlayerSecuritySettings(playerid);
			}
			case DIALOG_SECURITY_SETTING_PHONE_S:
			{
				// ?????????? ???????
				if(strcmp(GetPlayerData(playerid, P_SETTING_PHONE), "None", true) != 0) return 1;
			}
			case DIALOG_SECURITY_SETTING_PIN:
			{
				if(!strcmp(GetPlayerData(playerid, P_SETTING_PIN), "None", true)) return 1;

				if(response)
				{
					if(0 <= listitem <= 2)
					{
						new query[64 + 1];
						SetPlayerData(playerid, P_REQUEST_PIN, listitem);

						format(query, sizeof query, "UPDATE accounts SET request_pin=%d WHERE id=%d LIMIT 1", listitem, GetPlayerAccountID(playerid));
						mysql_query(mysql, query, false);

						if(!mysql_errno())
						{
							SendClientMessage(playerid, 0xFFFFFFFF, "????????ù ? ?????????? ???????????? {00FFCC}?????????");
							switch(listitem + 1)
							{
								case 1: SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????? PIN-???? ????????");
								case 2: SendClientMessage(playerid, 0xFFFF00FF, "??? ????????? PIN-??? ????? ????????????ù ??? ???????????? ???????");
								case 3: SendClientMessage(playerid, 0x66CC00FF, "????????? PIN-??? ????? ????????????ù ??? ???????????? IP ???????");
							}
						}
						else
						{
							SendClientMessage(playerid, 0xFFFFFFFF, "????????ù ? ?????????? ???????????? {FF3333}?? ?????????");
							SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 03)");
						}
					}
				}
				ShowPlayerSecuritySettings(playerid);
			}
			case DIALOG_SECURITY_SETTING_PIN_SET:
			{
				// ?????????? ??? ???
				if(strcmp(GetPlayerData(playerid, P_SETTING_PIN), "None", true) != 0) return 1;

				if(response)
				{
					ShowPlayerPinCodePTD(playerid, PIN_CODE_STATE_SET);
				}
				else ShowPlayerSecuritySettings(playerid);
			}
			case DIALOG_SECURITY_SETTING_PASS_1:
			{
				if(response)
				{
					strmid(CheckPass[playerid], inputtext, 0, strlen(inputtext), 65);
					new hash[65];
       				SHA256_PassHash(CheckPass[playerid], GetPlayerData(playerid, P_SALT), hash, 65);

					if(!strcmp(hash, GetPlayerData(playerid, P_PASSWORD)))
					{
						Dialog
						(
							playerid, DIALOG_SECURITY_SETTING_PASS_2, DIALOG_STYLE_INPUT,
							"{FFCD00}????? ??????",
							"{FFFFFF}??????? ????? ?????? ? ???? ????:",
							"????????", "??????"
						);
						return 1;
					}
					else SendClientMessage(playerid, 0xFF6600FF, "?? ????? ???????? ??????");
				}
				ShowPlayerSecuritySettings(playerid);
			}
			case DIALOG_SECURITY_SETTING_PASS_2:
			{
				if(response)
				{
					if(!(1 <= strlen(inputtext) <= 15) || strfind(inputtext, " ") != -1)
					{
						SendClientMessage(playerid, 0xFF6600FF, "????? ?????ù ?????? ???? ?? 6 ?? 64 ????????");
						SendClientMessage(playerid, 0xFF6600FF, "ù???? ?? ??????????ù ????????????? ????????");
					}
					else
					{
						new query[256];

						for(new i; i < 10; i++) g_player[playerid][P_SALT][i] = random(79) + 47;
			            g_player[playerid][P_SALT][10] = 0;
			            SHA256_PassHash(inputtext, g_player[playerid][P_SALT], g_player[playerid][P_PASSWORD], 65);

			            format(query, sizeof query, "{ffff00}| {FFFFFF}?? ??????? ?????? ?? ???????? ???????? ?? ????? : {ffff00}%s .", inputtext);

						SendClientMessage(playerid, 0xFFFF00FF, query);
						SendClientMessage(playerid, 0xFFFFFFFF, "{ffff00}| {FFFFFF}??????????? ??????? ???????? ?????? ?????ù,????? ?? ?????? ???.");

						ShowPlayerSecuritySettings(playerid);

						mysql_format(mysql, query, sizeof query, "UPDATE accounts SET password='%e', salt='%e' WHERE id=%d LIMIT 1", g_player[playerid][P_PASSWORD], g_player[playerid][P_SALT], GetPlayerAccountID(playerid));
						mysql_query(mysql, query, false);



						// OLD SYSTEM
						//format(g_player[playerid][P_PASSWORD], 65, "%s", inputtext);
						return 1;
					}

					Dialog
					(
						playerid, DIALOG_SECURITY_SETTING_PASS_2, DIALOG_STYLE_INPUT,
						"{FFCD00}????? ??????",
						"{FFFFFF}??????? ????? ?????? ? ???? ????:",
						"????????", "??????"
					);
				}
				else ShowPlayerSecuritySettings(playerid);
			}
			case DIALOG_SECURITY_SETTING_EMAIL:
			{
				if(!response)
				{
					// ???????? ???? ?? ?????
					Dialog
					(
						playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
						"{FFCD00}?????? ??????????",
						"{FFFFFF}? ??????? ?????????? ????? ?? ???? ????? ?????? ?????? ? ????? ???????.\n"\
						"????????? ?? ??? ??ù ????????????ù Email.",
						"???????", ""
					);
				}
			}
			case DIALOG_AUTOREPORT:
			{
	            if(!response) return DeletePVar(playerid, "IdReport");
	            new idx = GetPVarInt(playerid, "IdReport") - 1;

	            switch(listitem)
	            {
		            case 0: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????????????, ???????? ?? ???????. | ???ù???? ???? ?? ????? ???????! :)",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 1: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????????? ?? ??????? ?? ????????. | ???ù???? ???? ?? ????? ???????! :)",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 2: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????? ??? ???????, ??????? ?? ??????????. | ???ù???? ???? ?? ????? ???????! :)",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 3: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????????????, ?? ?????ù??? ?????????? ??????. | ???ù???? ???? ?? ????? ???????! :)",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 4: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ??????????? ?????? ???? ??? ?? ??????? ??ù?????? ?? ????? ó forum.samp-tape.ru",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 5: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????????????, ??????????? ?????? ???? ó /buyadm | ???ù???? ???? ?? ????? ???????! :)",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 6: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????? ???????? ????? ????????? ??????????? ?? ???????? ???.?????? ó vk.com/samp_mobi",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 7: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ??? ???? ó SAMP-TAPE.RU / ????? ó forum.samp-tape.ru / ????????? ó vk.com/samp_mobi",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 8: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????????????, ?? ?????? ?????? ?????? ?? ????? ó forum.samp-tape.ru",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 9: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ??ù?????? ? ?????????ù?? ??????? ? ??. ?? ???????? ???? ????????? ???.??????.",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 10: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????????? ???? ?? ?????? ?? ????? ó SAMP-TAPE.RU",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		            case 11: format(str, sizeof(str), "?????????????: %s[%d] ??ù %s[%d]: ????????? ???? ???????? ?? ????? SAMP-TAPE.RU ? ?????? ? /mm > ?????????????",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(idx), idx);
		        }
	            SendClientMessage(idx, 0xff9945FF, str);
	            DeletePVar(idx, "RepUn"), DeletePVar(playerid, "IdReport");
	            SendMessageToAdmins(str, 0xff9945FF);
	            return true;
	        }
	        case DIALOG_GOADM:
	        {
	            if(!response) return 1;
	            if(GetPVarInt(playerid,"rp_test"))
	            {
	                if(strval(inputtext) != RPtest[GetPVarInt(playerid,"rp_test")-1][tRPOtvet_Good]) SetPVarInt(playerid,"rp_test_fail", GetPVarInt(playerid, "rp_test_fail") +1);
	            }
	            if(GetPVarInt(playerid,"rp_test") >= sizeof(RPtest))
	            {
	                DeletePVar(playerid, "rp_test");


	                format(str, sizeof(str), "%s. ?????????? ??????? %i ?? %i.",(GetPVarInt(playerid,"rp_test_fail") >= 3 ? ("{ff0000}? ?????????, ?? ????????? ????") : ("{32cd32}????????ù??, ?? ????? ????")),sizeof(RPtest)-GetPVarInt(playerid,"rp_test_fail"),sizeof(RPtest));

	                SendClientMessage(playerid, 0x32cd32FF, str);
	                if(GetPVarInt(playerid,"rp_test_fail") < 2)
	                {
	                    new rand_lvl = random(4)+1;
	                    SetPlayerData(playerid, P_ADMIN, rand_lvl);
	                    format(str, 64, "?? ??????? ???????? ????? ???????????? %d ?????ù",rand_lvl);
	                    SendClientMessage(playerid, -1, str);
	                    SendClientMessage(playerid, -1, "??????? /alogin ??ù ???????????, ??? ?? ??????? /ahelp");

	                    SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, "??????? ??????? ?? 100 ????? ????");
	                    format(str, 128, "%s ??????? ????? ????? %d ?????ù ?? 100 ????? ????", GetPlayerNameEx(playerid), rand_lvl);
	                    SendMessageToAdmins(str, -1);

	                    UpdatePlayerDatabaseInt(playerid,"admin",rand_lvl);
	                }
	                DeletePVar(playerid, "fType"), DeletePVar(playerid, "fID"), DeletePVar(playerid, "rp_test"), DeletePVar(playerid, "rp_test_fail");
	                return 1;
	            }
	            SetPVarInt(playerid,"rp_test", GetPVarInt(playerid, "rp_test") +1);
	            new string_last[64];
	            format(string_last, sizeof(string_last), "{ffffff}RolePlay ù??? | ?????? ?%i",GetPVarInt(playerid,"rp_test"));
	            format(stringer, sizeof(stringer), "{ffffff}??????:\n%s{ffffff}\n\n???????? ????? ??????????? ??????:\n%s",RPtest[GetPVarInt(playerid,"rp_test")-1][tRPVopros],RPtest[GetPVarInt(playerid,"rp_test")-1][tRPOtvet]);
	            Dialog(playerid, DIALOG_GOADM, DIALOG_STYLE_INPUT, string_last, stringer, "?????", "??????");
	        }
	        case 5512:
			{

				new report_id = TempReportInfo[playerid][reportID], status = REPORT_STATUS_ANSWERED, Cache:result;
				if (!response) status = REPORT_STATUS_SKIPPED;

				mysql_query_[0] = EOS;

				mysql_format(mysql, mysql_query_, sizeof (mysql_query_), "SELECT * FROM "TABLE_REPORTS" \
					WHERE status=0 AND id=%d", report_id
				);
				result = mysql_query(mysql, mysql_query_, true);

				mysql_query_[0] = EOS;

				new rows = cache_num_rows();

				if(!rows)
				{
					cache_delete(result);
					SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}?? ?????? ?????? ??? ??? ??? ?????!");
					return true;
				}
				mysql_format(mysql, mysql_query_, sizeof (mysql_query_), "UPDATE "TABLE_REPORTS" SET \
					status=%d, answer='%s' WHERE status=0 AND id=%d", status, inputtext, report_id
				);
				mysql_query(mysql, mysql_query_);
				new targetid = TempReportInfo[playerid][reportPlayerID];
				TempReportInfo[playerid][reportID] = 0;

				Dialog(playerid, 5513, DIALOG_STYLE_MSGBOX, ""c_server"?? ???????? ?? ??????", "{FFFFFF}?????? ?????????? ????????? ???????", "??", "??????");
				if (!response) {
					format(stringer, sizeof (stringer), "??? ?????? ?%d ??? ???????? ??????????????? %s[%d].",
						report_id, GetPlayerData(playerid, P_NAME), playerid
					);
					SendClientMessage(targetid, COLOR_YELLOW, stringer), stringer[0] = EOS;

					format(stringer1, sizeof(stringer1), "{afafaf}[A] %s[%d] ????????? ?????? ?%d ?????? %s[%d].",
						GetPlayerNameEx(playerid), playerid, report_id, GetPlayerData(targetid, P_NAME), targetid
					);
					SendMessageToAdmins(stringer1,0xFfa500AA);

					cache_delete(result);
					return true;
				}
				format(stringer, sizeof (stringer), "\
					{FFFFFF}???? ???????: {afafaf}%s\n \n\
					{FFFFFF}??? ?????? ?%d:\n\
					{afafaf}| {afafaf}%s\n \n\
					{FFFFFF}????? ?? ?????????????:\n\
					{afafaf}| "c_server"%s",
					TempReportInfo[playerid][reportDate], report_id, TempReportInfo[playerid][reportText], inputtext
				);
				Dialog(targetid, 0000, DIALOG_STYLE_MSGBOX, !""c_server"????? ?????????????", stringer, !"???????", !"");

				format(stringer, sizeof (stringer), ""c_server"??? ?????? ?%d: {FFFFFF}%s", report_id, TempReportInfo[playerid][reportText]);
				SendClientMessage(targetid, COLOR_YELLOW, stringer);
				format(stringer, sizeof (stringer), ""c_server"{8B4513}????? ?? ?????????????? %s[%d]: {CD853F}%s", GetPlayerData(playerid,P_NAME), playerid, inputtext);
				SendClientMessage(targetid, COLOR_YELLOW, stringer), stringer[0] = EOS;

				format(stringer1, sizeof(stringer1), "{afafaf}[A] %s[%d] ??????? ?????? %s[%d]: %s",
					GetPlayerNameEx(playerid), playerid, GetPlayerData(targetid,P_NAME), targetid, inputtext
				);
				SendMessageToAdmins(stringer1,0xFfa500AA);

				cache_delete(result);

				return true;
			}
			case 5513: {
				if (!response) {
					TempReportInfo[playerid][reportID] = 0;
					return true;
				}
				report_Show(playerid);
				return true;
			}
	        case 9182:
			{
				if (!response)
					return true;

				if (!strlen(inputtext))
					return SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}?? ?????? ?? ?????!");

				if(IsPlayerMuted(playerid))
				return SendClientMessage(playerid, 0xFF6600FF, "? ??? ??? ????!");
				
				if (PlayerReportFix[playerid] > gettime())
					return SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}???????? ?????? ????? 1 ??? ? ??????!");

				report_Send(playerid, inputtext);
				
				PlayerReportFix[playerid] = gettime() + 60;

				return true;
			}
			case DIALOG_REPORT:
			{
				if(response)
				{
					new len = strlen(inputtext);
					if(1 <= len <= 130)
					{
						new fmt_str[300];
                        utf8_to_cp1251(inputtext);
						format(fmt_str, sizeof fmt_str, "[??????]: "c_b"????????? ????ù ?????? ?? "c_server"%s[%d]: {FFFFFF}%s", GetPlayerNameEx(playerid), playerid, inputtext);
						SendMessageToAdmins(fmt_str, COR_SERVER);


						SendClientMessage(playerid, 0xFFFFFFFF, "???? ????????? ??????????");

						strmid(RepInfo[playerid][Reptex], inputtext,0,strlen(inputtext),130);
      					RepInfo[playerid][RepTime] = gettime();
      					SetPVarInt(playerid,"RepUn",1);

						format(fmt_str, sizeof fmt_str, "%s", inputtext);

						SendLog(playerid, LOG_TYPE_REPORT, fmt_str);

						return 1;
					}
					else if(len > 130)
					{
						SendClientMessage(playerid, 0x999999FF, "??????? ??????? ?????????");
					}
					ShowPlayerReportDialog(playerid);
				}
				else callcmd::mm(playerid, "");
			}
			case DIALOG_ASK:
			{
				if(response)
				{
					new len = strlen(inputtext);
					if(1 <= len <= 130)
					{
						new fmt_str[300];
                        utf8_to_cp1251(inputtext);
						format(fmt_str, sizeof fmt_str, "[???????]: "c_b"???????? ????? ?????? ?? "c_server"%s[%d]: {FFFFFF}%s", GetPlayerNameEx(playerid), playerid, inputtext);
						SendMessageToHelpers(fmt_str, COR_SERVER);

						SendClientMessage(playerid, 0xFFFFFFFF, "???? ????????? ??????????");

						strmid(AskInfo[playerid][Asktex], inputtext,0,strlen(inputtext),130);
      					AskInfo[playerid][AskTime] = gettime();
      					SetPVarInt(playerid,"AskUn",1);

						format(fmt_str, sizeof fmt_str, "%s", inputtext);

						//SendLog(playerid, LOG_TYPE_REPORT, fmt_str);

						return 1;
					}
					else if(len > 130)
					{
						SendClientMessage(playerid, 0x999999FF, "??????? ??????? ?????????");
					}
					ShowPlayerAskDialog(playerid);
				}
				else callcmd::mm(playerid, "");
			}
			case DIALOG_PLAYER_IMPROVEMENTS:
			{
				if(response)
				{
					new my_i_level = GetPlayerData(playerid, P_IMPROVEMENTS);

					if(0 <= listitem <= sizeof(g_player_improvements)-1)
					{
						new i_level = GetPlayerImprovementInfo(listitem, I_LEVEL);
						new i_price = GetPlayerImprovementInfo(listitem, I_PRICE);

						if(my_i_level < listitem)
						{
							SendClientMessage(playerid, 0xCECECEFF, "??? ????????? ???? ?? ????????");
						}
						else if(my_i_level > listitem)
						{
							SendClientMessage(playerid, 0xCECECEFF, "?? ??? ?????? ??? ?????????");
						}
						else if(GetPlayerLevel(playerid) < i_level || GetPlayerMoneyEx(playerid) < i_price)
						{
							new fmt_str[64 + 1];

							format(fmt_str, sizeof fmt_str, "??ù ??????? ????? ????????ù ????????? %d ??????? ? %d ??????", i_level, i_price);
							SendClientMessage(playerid, 0x999999FF, fmt_str);
						}
						else
						{
							new fmt_str[85];

							format(fmt_str, sizeof fmt_str, "UPDATE accounts SET money=%d,improvements=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid) - i_price, my_i_level + 1, GetPlayerAccountID(playerid));
							mysql_query(mysql, fmt_str, false);

							if(!mysql_errno())
							{
								GivePlayerMoneyEx(playerid, -i_price, "??????? ????????ù ????????", false);

								AddPlayerData(playerid, P_IMPROVEMENTS, +, 1);

								format(fmt_str, sizeof fmt_str, "?? ????????? ????????? {FFCD00}\"%s\"", GetPlayerImprovementInfo(listitem, I_NAME));
								SendClientMessage(playerid, 0x3399FFFF, fmt_str);

								switch(listitem + 1)
								{
									case 1:
										SendClientMessage(playerid, 0xCECECEFF, "??????? ???????ù ????? ??????????ù ??????????? ?????????");

									case 2:
										SendClientMessage(playerid, 0xCECECEFF, "ù????? ?? ?????? ???????? ??????????? ?? ???????????? ??????? {33FF33}(/leave)");

									case 3:
										SendClientMessage(playerid, 0xCECECEFF, "ù????? ?? ?????? ?????? ? ????? ? 2 ???? ?????? ??????????, ???????? ? ??????????");

									case 4:
										SendClientMessage(playerid, 0xCECECEFF, "ù????? ?? ?????? ?? ??ù???ù ????????? ??????, ????????? ?? ?????????");

									case 5:
										SendClientMessage(playerid, 0xCECECEFF, "ù????? ???? ?????? ????? ??????ù???ù ? ?????? ?????? ??? ?????? ?? ????");
								}
							}
							else
							{
								SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 06)");
								ShowPlayerImprovementsDialog(playerid);
							}
						}
					}
					else
					{
						Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							"{DC143C}"SERVER_NAME"{ffffff} | ?????????ù",
							"{EB4C42}1. {FFFFFF} ???????????? ???????? ?????????ù ? ??????? ????? ??????????\n"\
							"????ù. ??????? ???????ù ????? ??????????ù ?????????.\n\n"\
							"{EB4C42}2. {FFFFFF}????????????? ???????? ??? ???????ù?????? ????ù?? ??????? ??\n"\
							"?????????? ? ??????????? (??????? /leave). ??? ????????????? ?? ??\n"\
							"??????? ???????? ??????????? ?? ???????????? ???????.\n\n"\
							"{EB4C42}3. {FFFFFF}?????? ???? ??????????? ?????????? ? ????? ?????????, ??????? ?\n"\
							"????????? ? ??????? ??????? ??????????.\n\n"\
							"{EB4C42}4. {FFFFFF}???? ???????? ???????ù, ????????? ?????????? ??? ????? ???????????\n"\
							"?????? ?? ????? ???????? ??? ????????? ??????.\n\n"\
							"{EB4C42}5. {FFFFFF}?????ù ?????????? ??????ù?? ??? ???? ?????? ? ?????? ??????,\n"\
							"??? ?????? ?? ????.",
							"???????", ""
						);
					}
				}
				else callcmd::mm(playerid, "");
			}
			case DIALOG_CHANGE_NAME:
			{
				if(response)
				{
					if(!GetPVarInt(playerid, "change_name_status"))
					{
						new len = strlen(inputtext);
						if(4 <= len <= 20)
						{
							new bool: valid_name = true;
							for(new idx; idx < len; idx ++)
							{
								switch(inputtext[idx])
								{
									case 'a'..'z', 'A'..'Z', '[', ']', '_': continue;
									default:
										valid_name = false;
								}
							}

							if(!strcmp(GetPlayerNameEx(playerid), inputtext, true))
							{
								SendClientMessage(playerid, 0xFF6600FF, "?? ??? ??????????? ??? ??ù");
							}
							else if(valid_name)
							{
								new query[128];
								new Cache: result, rows;

								mysql_format(mysql, query, sizeof query, "SELECT id FROM accounts WHERE name='%e' LIMIT 1", inputtext);
								result = mysql_query(mysql, query, true);

								rows = cache_num_rows();
								cache_delete(result);

								if(!rows)
								{
									SetPVarInt(playerid, "change_name_status", 1);
									SetPVarString(playerid, "change_name", inputtext);

									Dialog
									(
										playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
										"{FFCD00}??ù??? ?? ????????? ?????",
										"{FFFFFF}???? ??????? ?? ????????? ???? ?????????? ?????????????.\n"\
										"?? ???????? ?????????, ??? ?????? ??ù??? ????? ??????????.\n\n"\
										"???? ? ??????? ?????????? ????? ???? ??ù ?? ???? ????????,\n"\
										"??, ?????? ?????, ??? ?? ????????????? RP ????????,\n"\
										"???? ?? ??? ??????????? RP ??ù.",
										"??", ""
									);

									format(query, sizeof query, "[????? non rp ?????] %s >> %s {FFCD00}| /namelist %d ??ù ????????ù" , GetPlayerNameEx(playerid), inputtext, playerid);
									SendMessageToAdmins(query, 0x66CC99FF);

								}
								else SendClientMessage(playerid, 0xFF6600FF, "????????? ???? ??ù ??? ???????????ù");

							}
							else
							{
								SendClientMessage(playerid, 0xFF6600FF, "??ù ??? ???????????ù ??? ???????? ???????????? ???????");
								SendClientMessage(playerid, 0xFFFFFFFF, "??????????? ????????? ????? a-z A-Z, ? ????? ??????? [ ] _");
							}
						}
						else SendClientMessage(playerid, 0xFF6600FF, "???????????? ?????? ?????");
					}
					else SendClientMessage(playerid, 0xCECECEFF, "?? ??? ???????? ??ù??? ?? ????????? ?????");
				}
			}
			case DIALOG_LEADER_MENU:
		    {
		        if(!response) return 1;
		        switch(list_id)
		        {
		            case 1: Dialog(playerid, DIALOG_LEADER_MENU_UNINVITE, DIALOG_STYLE_INPUT,"?????? ??????","??????? ??ù ??????????, ???????? ?????? ???????!","??????","???????");
					case 2: callcmd::showall(playerid,"");
				}
		    }
		    case DIALOG_LEADER_MENU_UNINVITE:
		    {
		        if(!response) return 1;
		        callcmd::uninviteoff(playerid,inputtext);
		        return 1;
		    }
		    case DIALOG_ACTION_F_PROGRESS:
			{
			    new fmt_str[300];

			    if(!response) return 1;

				switch(list_id-1)
				{
					case 0:
					{

					    if(GetPlayerData(playerid, P_PROGRESS_1) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ??????????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"??????? ?????? ? ???????? 1000 ????????.\n\
							"c_server"???????: "c_b"100 DONATE-RUB\n\
							"c_server"????????: "c_b"%d/1.000",
							GetPlayerData(playerid, P_PROGRESS_EXP_1)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "?????????ù", fmt_str, "???????", "");
						return 1;
					}
					case 1:
					{

					    if(GetPlayerData(playerid, P_PROGRESS_2) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ??????????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"??????? ??????????? ? ??????? ????? 500 ???.\n\
							"c_server"???????: "c_b"100 DONATE-RUB\n\
							"c_server"????????: "c_b"%d/500",
							GetPlayerData(playerid, P_PROGRESS_EXP_2)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "?????????ù", fmt_str, "???????", "");
						return 1;
					}
					case 2:
					{

					    if(GetPlayerData(playerid, P_PROGRESS_3) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ??????????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"??????? ??????????? ? ??????? ?????? 500 ???.\n\
							"c_server"???????: "c_b"100 DONATE-RUB\n\
							"c_server"????????: "c_b"%d/500",
							GetPlayerData(playerid, P_PROGRESS_EXP_3)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "?????????ù", fmt_str, "???????", "");
						return 1;
					}
					case 3:
					{

					    if(GetPlayerData(playerid, P_PROGRESS_4) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ??????????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"??????? ??????????? ? ???????? ??????? ? ?????? 500 ???.\n\
							"c_server"???????: "c_b"100 DONATE-RUB\n\
							"c_server"????????: "c_b"%d/500",
							GetPlayerData(playerid, P_PROGRESS_EXP_4)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "?????????ù", fmt_str, "???????", "");
						return 1;
					}
					case 4:
					{

					    if(GetPlayerData(playerid, P_PROGRESS_5) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ??????????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"?????????? ? ?????????? ? ?????????????? 1000 ???ù??????.\n\
							"c_server"???????: "c_b"50 DONATE-RUB\n\
							"c_server"????????: "c_b"%d/1.000",
							GetPlayerData(playerid, P_PROGRESS_EXP_5)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "?????????ù", fmt_str, "???????", "");
						return 1;
					}
					case 5:
					{

					    if(GetPlayerData(playerid, P_PROGRESS_6) >= 1) return Send(playerid, -1, "?? ??? ????????? ??? ??????????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"??????? ????????? ? ????????? ? ?????? 500 ?????.\n\
							"c_server"???????: "c_b"100 DONATE-RUB\n\
							"c_server"????????: "c_b"%d/500",
							GetPlayerData(playerid, P_PROGRESS_EXP_6)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "?????????ù", fmt_str, "???????", "");
						return 1;
					}
				}
			}
			case DIALOG_ACTION_F_QUEST:
			{
			    new fmt_str[300];

			    if(!response) return 1;

				switch(list_id-1)
				{
					case 0:
					{

					    if(GetPlayerData(playerid, P_F_QUEST_1) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"????????? 40 ????? ? ??????.\n\
							"c_server"???????: "c_b"1 CASE\n\
							"c_server"????????: "c_b"%d/35",
							GetPlayerData(playerid, P_F_QUEST_EXP_1)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 1:
					{

					    if(GetPlayerData(playerid, P_F_QUEST_2) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"?????? 30 ????? ?? ????ù ?????? ?? ??????????.\n\
							"c_server"???????: "c_b"1 CASE\n\
							"c_server"????????: "c_b"%d/30",
							GetPlayerData(playerid, P_F_QUEST_EXP_2)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 2:
					{

					    if(GetPlayerData(playerid, P_F_QUEST_3) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"???????? 40 ????? ? ??????.\n\
							"c_server"???????: "c_b"1 CASE\n\
							"c_server"????????: "c_b"%d/40",
							GetPlayerData(playerid, P_F_QUEST_EXP_3)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 3:
					{

					    if(GetPlayerData(playerid, P_F_QUEST_4) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"?????????????? 150 ???ù??????.\n\
							"c_server"???????: "c_b"1 CASE\n\
							"c_server"????????: "c_b"%d/150",
							GetPlayerData(playerid, P_F_QUEST_EXP_4)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
					case 4:
					{

					    if(GetPlayerData(playerid, P_F_QUEST_5) >= 1) return Send(playerid, -1, "?? ??? ????????? ???? ?????.");

						format
						(
							fmt_str, sizeof fmt_str,
							""c_server"?????????ù: "c_b"???????? 100 ?????????.\n\
							"c_server"???????: "c_b"1 CASE\n\
							"c_server"????????: "c_b"%d/100",
							GetPlayerData(playerid, P_F_QUEST_EXP_5)
						);

						Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", fmt_str, "???????", "");
						return 1;
					}
				}
			}
			case DIALOG_DONATE_CASE:
			{
			    if(GetPlayerData(playerid, P_DONATE_CASE) <= 0)
					return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ?????.");
		
	            GetPlayerPrise(playerid);
	            
	            Dialog(playerid,DIALOG_DONATE_CASE_PRISE,DIALOG_STYLE_MSGBOX,
				"???????? ?????",
				"{ffffff}????????ù?? ?? ??????? ????, ??? ????: ?????????? ? ???.",
				"???????",""
				);
				return 1;
			}
			case DIALOG_OBMEN_MONET:
			{

			    if(!response) return 1;
			    
			    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
				{
					SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
					return -1;
				}

				if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
				{
					SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
					return -1;
				}

				switch(list_id-1)
				{
					case 0:
					{
					    if(Cars[car_1] <= 0) return Send(playerid,-1,"?? ?????? ??? ??????? ??????????!");
					
					    if(GetPlayerData(playerid, P_COINS) < 1000) return Send(playerid,-1,"? ??? ?? ?????????? ?????!");
					    
					    new minus = Cars[car_1] -1;
					    mysql_format(mysql, str, 256, "UPDATE car_obmen SET car_1 = '%d'", minus);
         				mysql_query(mysql, str);

						Cars[car_1] = minus;
					    
					    new modelid = 407, color_1 = 17, color_2 = 17;
					    
					    new Float: pos_x = -335.7250;
						new Float: pos_y = 424.3185;
						new Float: pos_z = 12.2686;
						new Float: angle = 356.7986;
	
						new query[220],
							Cache: result,
							idx;

						idx = GetFreeOwnableCarID();

						SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

						SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
						SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
						SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

						SetOwnableCarData(idx, OC_POS_X, 		pos_x);
						SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
						SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
						SetOwnableCarData(idx, OC_ANGLE, 		angle);

						strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

						SetOwnableCarData(idx, OC_ALARM, 		false);
						SetOwnableCarData(idx, OC_KEY_IN, 		false);

						SetOwnableCarData(idx, OC_CREATE, 		gettime());

						format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
						// ----------------------------------------------------------------------------------------

						new vehicleid = CreateVehicle
						(
							GetOwnableCarData(idx, OC_MODEL_ID),
							GetOwnableCarData(idx, OC_POS_X),
							GetOwnableCarData(idx, OC_POS_Y),
							GetOwnableCarData(idx, OC_POS_Z),
							GetOwnableCarData(idx, OC_ANGLE),
							GetOwnableCarData(idx, OC_COLOR_1),
							GetOwnableCarData(idx, OC_COLOR_2),
							-1,
							0,
							VEHICLE_ACTION_TYPE_OWNABLE_CAR,
							idx
						);
						if(vehicleid != INVALID_VEHICLE_ID)
						{
							//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
                            //index = GetVehicleData(vehicleid, V_ACTION_ID);
                            format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");

							SetVehicleParam(vehicleid, V_LOCK, false);

							SetVehicleData(vehicleid, V_MILEAGE, 0.0);
						}

						SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

						format
						(
							query, sizeof query,
							"INSERT INTO ownable_cars \
							(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
							VALUES \
							('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
							GetPlayerAccountID(playerid),
							modelid,
							color_1,
							color_2,
							pos_x,
							pos_y,
							pos_z,
							angle,
							gettime()
						);
						result = mysql_query(mysql, query, true);

						SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

						cache_delete(result);
						
						AddPlayerData(playerid, P_COINS, -, 1000);
	    				UpdatePlayerDatabaseInt(playerid, "coins", GetPlayerData(playerid, P_COINS));

						SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????ù?? ?????? ?? ???????? ??????.");
						SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
						EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
					}
					case 1:
					{
					    if(Cars[car_2] <= 0) return Send(playerid,-1,"?? ?????? ??? ??????? ??????????!");

					    if(GetPlayerData(playerid, P_COINS) < 1000) return Send(playerid,-1,"? ??? ?? ?????????? ?????!");
					    
					    new minus = Cars[car_2] -1;
					    mysql_format(mysql, str, 256, "UPDATE car_obmen SET car_2 = '%d'", minus);
         				mysql_query(mysql, str);

						Cars[car_2] = minus;

					    new modelid = 431, color_1 = 17, color_2 = 17;

					    new Float: pos_x = -335.7250;
						new Float: pos_y = 424.3185;
						new Float: pos_z = 12.2686;
						new Float: angle = 356.7986;

						new query[220],
							Cache: result,
							idx;

						idx = GetFreeOwnableCarID();

						SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

						SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
						SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
						SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

						SetOwnableCarData(idx, OC_POS_X, 		pos_x);
						SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
						SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
						SetOwnableCarData(idx, OC_ANGLE, 		angle);

						strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

						SetOwnableCarData(idx, OC_ALARM, 		false);
						SetOwnableCarData(idx, OC_KEY_IN, 		false);

						SetOwnableCarData(idx, OC_CREATE, 		gettime());

						format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
						// ----------------------------------------------------------------------------------------

						new vehicleid = CreateVehicle
						(
							GetOwnableCarData(idx, OC_MODEL_ID),
							GetOwnableCarData(idx, OC_POS_X),
							GetOwnableCarData(idx, OC_POS_Y),
							GetOwnableCarData(idx, OC_POS_Z),
							GetOwnableCarData(idx, OC_ANGLE),
							GetOwnableCarData(idx, OC_COLOR_1),
							GetOwnableCarData(idx, OC_COLOR_2),
							-1,
							0,
							VEHICLE_ACTION_TYPE_OWNABLE_CAR,
							idx
						);
						if(vehicleid != INVALID_VEHICLE_ID)
						{
							//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
							//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");

							SetVehicleParam(vehicleid, V_LOCK, false);

							SetVehicleData(vehicleid, V_MILEAGE, 0.0);
						}

						SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

						format
						(
							query, sizeof query,
							"INSERT INTO ownable_cars \
							(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
							VALUES \
							('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
							GetPlayerAccountID(playerid),
							modelid,
							color_1,
							color_2,
							pos_x,
							pos_y,
							pos_z,
							angle,
							gettime()
						);
						result = mysql_query(mysql, query, true);

						SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

						cache_delete(result);

						AddPlayerData(playerid, P_COINS, -, 1000);
	    				UpdatePlayerDatabaseInt(playerid, "coins", GetPlayerData(playerid, P_COINS));

						SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????ù?? ?????? ?? ???????.");
						SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
						EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
					}
					case 2:
					{
					    if(Cars[car_3] <= 0) return Send(playerid,-1,"?? ?????? ??? ??????? ??????????!");

					    if(GetPlayerData(playerid, P_COINS) < 1000) return Send(playerid,-1,"? ??? ?? ?????????? ?????!");
					    
					    new minus = Cars[car_3] -1;
					    mysql_format(mysql, str, 256, "UPDATE car_obmen SET car_3 = '%d'", minus);
         				mysql_query(mysql, str);

						Cars[car_3] = minus;

					    new modelid = 563, color_1 = 17, color_2 = 17;

					    new Float: pos_x = -335.7250;
						new Float: pos_y = 424.3185;
						new Float: pos_z = 12.2686;
						new Float: angle = 356.7986;

						new query[220],
							Cache: result,
							idx;

						idx = GetFreeOwnableCarID();

						SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

						SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
						SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
						SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

						SetOwnableCarData(idx, OC_POS_X, 		pos_x);
						SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
						SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
						SetOwnableCarData(idx, OC_ANGLE, 		angle);

						strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

						SetOwnableCarData(idx, OC_ALARM, 		false);
						SetOwnableCarData(idx, OC_KEY_IN, 		false);

						SetOwnableCarData(idx, OC_CREATE, 		gettime());

						format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
						// ----------------------------------------------------------------------------------------

						new vehicleid = CreateVehicle
						(
							GetOwnableCarData(idx, OC_MODEL_ID),
							GetOwnableCarData(idx, OC_POS_X),
							GetOwnableCarData(idx, OC_POS_Y),
							GetOwnableCarData(idx, OC_POS_Z),
							GetOwnableCarData(idx, OC_ANGLE),
							GetOwnableCarData(idx, OC_COLOR_1),
							GetOwnableCarData(idx, OC_COLOR_2),
							-1,
							0,
							VEHICLE_ACTION_TYPE_OWNABLE_CAR,
							idx
						);
						if(vehicleid != INVALID_VEHICLE_ID)
						{
							//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
							//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
							SetVehicleParam(vehicleid, V_LOCK, false);

							SetVehicleData(vehicleid, V_MILEAGE, 0.0);
						}

						SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

						format
						(
							query, sizeof query,
							"INSERT INTO ownable_cars \
							(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
							VALUES \
							('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
							GetPlayerAccountID(playerid),
							modelid,
							color_1,
							color_2,
							pos_x,
							pos_y,
							pos_z,
							angle,
							gettime()
						);
						result = mysql_query(mysql, query, true);

						SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

						cache_delete(result);

						AddPlayerData(playerid, P_COINS, -, 1000);
	    				UpdatePlayerDatabaseInt(playerid, "coins", GetPlayerData(playerid, P_COINS));

						SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????ù?? ?????? ?? ???????? ????????.");
						SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
						EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
					}
					case 3:
					{
					    if(Cars[car_4] <= 0) return Send(playerid,-1,"?? ?????? ??? ??????? ??????????!");

					    if(GetPlayerData(playerid, P_COINS) < 1000) return Send(playerid,-1,"? ??? ?? ?????????? ?????!");
					    
					    new minus = Cars[car_4] -1;
					    mysql_format(mysql, str, 256, "UPDATE car_obmen SET car_4 = '%d'", minus);
         				mysql_query(mysql, str);

						Cars[car_4] = minus;

					    new modelid = 597, color_1 = 17, color_2 = 17;

					    new Float: pos_x = -335.7250;
						new Float: pos_y = 424.3185;
						new Float: pos_z = 12.2686;
						new Float: angle = 356.7986;

						new query[220],
							Cache: result,
							idx;

						idx = GetFreeOwnableCarID();

						SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

						SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
						SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
						SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

						SetOwnableCarData(idx, OC_POS_X, 		pos_x);
						SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
						SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
						SetOwnableCarData(idx, OC_ANGLE, 		angle);

						strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

						SetOwnableCarData(idx, OC_ALARM, 		false);
						SetOwnableCarData(idx, OC_KEY_IN, 		false);

						SetOwnableCarData(idx, OC_CREATE, 		gettime());

						format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
						// ----------------------------------------------------------------------------------------

						new vehicleid = CreateVehicle
						(
							GetOwnableCarData(idx, OC_MODEL_ID),
							GetOwnableCarData(idx, OC_POS_X),
							GetOwnableCarData(idx, OC_POS_Y),
							GetOwnableCarData(idx, OC_POS_Z),
							GetOwnableCarData(idx, OC_ANGLE),
							GetOwnableCarData(idx, OC_COLOR_1),
							GetOwnableCarData(idx, OC_COLOR_2),
							-1,
							0,
							VEHICLE_ACTION_TYPE_OWNABLE_CAR,
							idx
						);
						if(vehicleid != INVALID_VEHICLE_ID)
						{
							//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
							//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
							SetVehicleParam(vehicleid, V_LOCK, false);

							SetVehicleData(vehicleid, V_MILEAGE, 0.0);
						}

						SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

						format
						(
							query, sizeof query,
							"INSERT INTO ownable_cars \
							(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
							VALUES \
							('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
							GetPlayerAccountID(playerid),
							modelid,
							color_1,
							color_2,
							pos_x,
							pos_y,
							pos_z,
							angle,
							gettime()
						);
						result = mysql_query(mysql, query, true);

						SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

						cache_delete(result);

						AddPlayerData(playerid, P_COINS, -, 1000);
	    				UpdatePlayerDatabaseInt(playerid, "coins", GetPlayerData(playerid, P_COINS));

						SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????ù?? ?????? ?? ??????????? ??????.");
						SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
						EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
					}
					case 4:
					{
					    if(Cars[car_5] <= 0) return Send(playerid,-1,"?? ?????? ??? ??????? ??????????!");

					    if(GetPlayerData(playerid, P_COINS) < 3000) return Send(playerid,-1,"? ??? ?? ?????????? ?????!");
					    
					    new minus = Cars[car_5] -1;
					    mysql_format(mysql, str, 256, "UPDATE car_obmen SET car_5 = '%d'", minus);
         				mysql_query(mysql, str);
         				
						Cars[car_5] = minus;

					    new modelid = 444, color_1 = 17, color_2 = 17;

					    new Float: pos_x = -335.7250;
						new Float: pos_y = 424.3185;
						new Float: pos_z = 12.2686;
						new Float: angle = 356.7986;

						new query[220],
							Cache: result,
							idx;

						idx = GetFreeOwnableCarID();

						SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

						SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
						SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
						SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

						SetOwnableCarData(idx, OC_POS_X, 		pos_x);
						SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
						SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
						SetOwnableCarData(idx, OC_ANGLE, 		angle);

						strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

						SetOwnableCarData(idx, OC_ALARM, 		false);
						SetOwnableCarData(idx, OC_KEY_IN, 		false);

						SetOwnableCarData(idx, OC_CREATE, 		gettime());

						format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
						// ----------------------------------------------------------------------------------------

						new vehicleid = CreateVehicle
						(
							GetOwnableCarData(idx, OC_MODEL_ID),
							GetOwnableCarData(idx, OC_POS_X),
							GetOwnableCarData(idx, OC_POS_Y),
							GetOwnableCarData(idx, OC_POS_Z),
							GetOwnableCarData(idx, OC_ANGLE),
							GetOwnableCarData(idx, OC_COLOR_1),
							GetOwnableCarData(idx, OC_COLOR_2),
							-1,
							0,
							VEHICLE_ACTION_TYPE_OWNABLE_CAR,
							idx
						);
						if(vehicleid != INVALID_VEHICLE_ID)
						{
							//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
							//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
							SetVehicleParam(vehicleid, V_LOCK, false);

							SetVehicleData(vehicleid, V_MILEAGE, 0.0);
						}

						SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

						format
						(
							query, sizeof query,
							"INSERT INTO ownable_cars \
							(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
							VALUES \
							('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
							GetPlayerAccountID(playerid),
							modelid,
							color_1,
							color_2,
							pos_x,
							pos_y,
							pos_z,
							angle,
							gettime()
						);
						result = mysql_query(mysql, query, true);

						SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

						cache_delete(result);

						AddPlayerData(playerid, P_COINS, -, 3000);
	    				UpdatePlayerDatabaseInt(playerid, "coins", GetPlayerData(playerid, P_COINS));

						SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????ù?? ?????? ?? ???????.");
						SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
						EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
					}
				}
			}
			case DIALOG_DONATE_OPEN:
			{
			    if(!response) return 1;
			    
			    switch(list_id-1)
				{
					case 0: callcmd::donat(playerid,"");
					case 1: ShowPlayerDonateDialog(playerid);
					
				}
			}
			case DIALOG_YTPROMO_ACTIVATE:
			{
				if(response)
				{
					if(!strlen(inputtext))
					{
						callcmd::ytpromo(playerid, "");

						return 1;
					}

					new query[256],
						Cache: result,
						rows,
						type,
						amount,
						paydays,
						usings;

					mysql_format(mysql, query, sizeof query, "SELECT 1 FROM ytpromocode_activations WHERE uip='%e' AND code='%s'", GetPlayerIpEx(playerid), inputtext);
					result = mysql_query(mysql, query, true);
					rows = cache_num_rows();
					cache_delete(result);
					if (rows >= 5) {
						SendClientMessage(playerid, 0x3399FFFF, "??????????? ?? ?????????");
						return 1;
					}

					mysql_format(mysql, query, sizeof query, "SELECT * FROM ytpromocode_activations WHERE uid='%d' AND code='%s'", GetPlayerAccountID(playerid), inputtext);
					result = mysql_query(mysql, query, true);
					rows = cache_num_rows();

					if(rows)
					{
						//type = cache_get_field_content_int(0, "type");
						paydays = cache_get_field_content_int(0, "paydays");

						format(query, sizeof query, "?? ??? ???????????? ???? ????????");

						if(paydays)
							format(query, sizeof query, "%s. ?? ???????? ???? ???? ????? %d PayDay", query, paydays);





						SendClientMessage(playerid, 0x1E90FFFF, query);

						cache_delete(result);

						return 1;
					}

					cache_delete(result);

					mysql_format(mysql, query, sizeof query, "SELECT * FROM ytpromocode WHERE code='%s' AND usings > 0", inputtext);
					result = mysql_query(mysql, query, true);

					rows = cache_num_rows();

					if(rows)
					{
				 		type = cache_get_field_content_int(0, "type");
						amount = cache_get_field_content_int(0, "amount");
						usings = cache_get_field_content_int(0, "usings");
						paydays = cache_get_field_content_int(0, "paydays");
					}

					cache_delete(result);

					if(!rows)
					{
						SendClientMessage(playerid, 0xCECECEFF, "????????? ???????? ?? ??????????");
						callcmd::ytpromo(playerid, "");

						return 1;
					}

					if(usings > 0)
					{
						if(!paydays)
						{
							AddPlayerData(playerid, promo_info[type][P_DATA], +, amount);
							UpdatePlayerDatabaseInt(playerid, promo_info[type][P_SQL_NAME], GetPlayerData(playerid, promo_info[type][P_DATA]));

							if(!strcmp(promo_info[type][P_SQL_NAME], "price"))
							{
								SendClientMessage(playerid, 0x999999FF, "?????? ???? ????????? ?? ?????????? ????");
							}
						}

						format(query, sizeof query, "?? ???????????? ???????? \"%s\"", inputtext);

						if(paydays > 0)
							format(query, sizeof query, "%s. ?? ???????? ???? ???? ????? %d PayDay", query, paydays);

						SendClientMessage(playerid, 0x66CC33FF, query);

						mysql_format(mysql, query, sizeof query, "UPDATE ytpromocode SET usings='%d' WHERE code='%s'", usings - 1, inputtext);
						mysql_query(mysql, query, false);

						mysql_format(mysql, query, sizeof query, "INSERT INTO ytpromocode_activations (uid,uip,code,paydays) VALUES (%d,'%e','%e',%d)", GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), inputtext, paydays);
						mysql_query(mysql, query, false);

					}
					else
					{
						SendClientMessage(playerid, 0xCECECEFF, "????? ????????????ù ????????? ????????");
						callcmd::ytpromo(playerid, "");
					}
				}
			}
			case DIALOG_YTPROMO_CREATE:
			{
				if(response)
				{
					new code[32], type, amount, usings = 100000, paydays = 0;

					if(sscanf(inputtext, "P<,>s[32]dddd", code, type, amount))
					{
						SendClientMessage(playerid, 0xCECECEFF, "???????????? ????");
						callcmd::createytpromo(playerid, "");

						return 1;
					}
					else
					{
						if(!(0 <= type <= 3))
						{
							SendClientMessage(playerid, 0xCECECEFF, "ù?? ?????? ???? ?? 0 ?? 3");
							callcmd::createytpromo(playerid, "");

							return 1;
						}

						if(!(1 <= amount <= 10_000_000))
						{
							SendClientMessage(playerid, 0xCECECEFF, "?????????? ?????? ???? ?? 1 ?? 10.000.000");
							callcmd::createytpromo(playerid, "");

							return 1;
						}


						new query[128],
							Cache: result,
							rows;

						mysql_format(mysql, query, sizeof query, "SELECT * FROM ytpromocode WHERE code='%s'", code);
						result = mysql_query(mysql, query, true);

						rows = cache_num_rows();

						cache_delete(result);

						if(rows)
						{
							SendClientMessage(playerid, 0xCECECEFF, "ù???? ???????? ??? ???? ? ???? ??????");
							callcmd::createytpromo(playerid, "");

							return 1;
						}

						mysql_format(mysql, query, sizeof query, "INSERT INTO ytpromocode (code, type, amount, usings, paydays) VALUES ('%s', %d, %d, %d, %d)",
						code, type, amount, usings, paydays);

						mysql_query(mysql, query);

						format(query, sizeof query, "YT-???????? \"%s\" ?????? (ù??: %s, ??????????: %d)", code, promo_info[type][P_NAME], amount);
						SendClientMessage(playerid, 0x66CC33FF, query);
					}
				}
			}
			case DIALOG_MTOP:
		    {
		        MtopMenu(playerid);
		    }
		    case DIALOG_MTOP_MENU:
		    {
		        if(!response) return 1;
		        switch(list_id)
		        {
		            case 1: callcmd::top_salary_new_work(playerid);
		            case 2: callcmd::top_salary_gos_work(playerid);
		            case 3: callcmd::top_payday(playerid);
		            case 4: callcmd::top_progress(playerid);
		            case 5: callcmd::top_quest(playerid);
		        }
		    }
		    case DIALOG_BOOMBOX_MENU:
		    {
				switch(listitem)
		  		{
		  		    case 0:
		      		{
		      		    new green_zone_id = GetPVarInt(playerid, "player_in_green_zone") - 1;

						if(green_zone_id != -1)
						{
							new fmt_text[144];

							format(fmt_text, sizeof fmt_text, "?? ?????????? {FFFF00}'%s' {1E90FF}?????ù ???????????ù BoomBox. ???????? ?????? ?????!", g_green_zones[green_zone_id][GZ_NAME]);
							SendClientMessage(playerid, 0x1E90FFFF, fmt_text);

							return 1;
						}
						else
		      		    	callcmd::placeboomboxx(playerid, "");
		            }
		    		case 1:
		      		{
		      		    if(GetPVarType(playerid, "PlacedBB"))
						{
							if(IsPlayerInRangeOfPoint(playerid, 3.0, GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ")))
							{
		      		    		callcmd::placeboomboxxx(playerid, "");
                            }
							else
							{
					   			return SendClientMessage(playerid, -1, "?? ?????? ?? ?????? BoomBox!");
							}
					    }
					    else
					    {
					        SendClientMessage(playerid, -1, "?? ?? ????????? BoomBox!");
						}
		            }
		            case 2:
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
							if(IsPlayerInRangeOfPoint(playerid, 3.0, GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ")))
							{
		                		callcmd::setboomboxx(playerid, "");
                            }
							else
							{
					   			return SendClientMessage(playerid, -1, "?? ?????? ?? ?????? BoomBox!");
							}
					    }
					    else
					    {
					        SendClientMessage(playerid, -1, "?? ?? ????????? BoomBox!");
						}
		            }
		            case 3:
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
							if(IsPlayerInRangeOfPoint(playerid, 3.0, GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ")))
							{
				                if(GetPVarType(playerid, "BBArea"))
							    {
							        new string[128], pName[MAX_PLAYER_NAME];
							        GetPlayerName(playerid, pName, sizeof(pName));
									format(string, sizeof(string), "* %s ???????? BoomBox.", pName);
									SendNearbyMessage(playerid, 15, string, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE);
							        foreach(Player, i)
									{
							            if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
							            {
							                StopStream(i);
										}
									}
							        DeletePVar(playerid, "BBStation");
								}
								SendClientMessage(playerid, COR_QUEST, "[???????]: "c_b"?? ??????? ????????? BoomBox!");
                            }
							else
							{
					   			return SendClientMessage(playerid, -1, "?? ?????? ?? ?????? BoomBox!");
							}
					    }
					    else
					    {
					        SendClientMessage(playerid, -1, "?? ?? ????????? BoomBox!");
						}
		            }
		        }
				return 1;
			}
		    case DIALOG_BOOMBOX:
		    {
				switch(listitem)
		  		{
		  		    case 0:
		      		{
		      		    Dialog(playerid,DIALOG_BOOMBOX0,DIALOG_STYLE_LIST,"????????????",
						  "Russia Radio\n\
			   		      Radio Europa Plus\n\
			 		      Radio Hit FM\n\
					      Radio Record\n\
					      Radio D-FM\n\
					      Comedy Radio",
						  "????????","???????");
		            }
		    		case 1:
		      		{
		      		    Dialog(playerid,DIALOG_BOOMBOX1,DIALOG_STYLE_LIST,"???? ????",
						  "???? ???? - ????????\n\
			   		      ???? ???? - ??????????\n\
			 		      ???? ???? - ???????????\n\
					      ???? ???? - ??????\n\
					      ???? ???? - 2 ???? ?????\n\
					      ???? ???? - ????????\n\
					      ???? ???? - ?????????\n\
					      ???? ???? - ???????\n\
					      ???? ???? - ù????\n\
					      ???? ???? - ?? ?????",
						  "????????","???????");
		            }
		            case 2:
		            {
		                Dialog(playerid,DIALOG_BOOMBOX2,DIALOG_STYLE_LIST,"Miyagi & ????????",
						"Miyagi & ???????? - ??ù\n\
						Miyagi & ???????? feat. N.E.R.A.K. - ?????? ??\n\
						Miyagi & ???????? - ?????\n\
						Miyagi & ???????? - Marlboro\n\
						Miyagi & ???????? - ??? Babylon\n\
						Miyagi & ???????? feat. ??? ????? - I Got Love\n\
						Miyagi & ???????? - ????????? ???????\n\
						Miyagi & ???????? - ???????????\n\
						Miyagi & ???????? - Utopia\n\
						Miyagi & ???????? - All the Time",
						"????????","???????");
		            }
		            case 3:
		            {
		                Dialog(playerid,DIALOG_BOOMBOX3,DIALOG_STYLE_LIST,"?????",
						"????? - ?????? ?????? ???\n\
						????? - ??ù\n\
						????? - ????\n\
						????? - ?????? ?????? ???ù\n\
						????? - ???? ?? ?????????\n\
						????? - ??????",
						"????????","???????");
		            }
		            case 4:
		            {
		                Dialog(playerid,DIALOG_BOOMBOX4,DIALOG_STYLE_LIST,"MORGENSHTERN",
						"MORGENSHTERN - Cristal & ????\n\
						MORGENSHTERN & Lil Pump - WATAFUK?!\n\
						MORGENSHTERN  & ù????? - El Problema\n\
						MORGENSHTERN & ?????? - Lollipop\n\
						MORGENSHTERN - ICE\n\
						MORGENSHTERN & ?????? - Cadillac\n\
						MORGENSHTERN - ??????\n\
						MORGENSHTERN & ????? ???? - ??? ???\n\
						MORGENSHTERN - Yung Hefner\n\
						MORGENSHTERN - ????? ?????",
						"????????","???????");
					}
					case 5:
					{
					    Dialog(playerid,DIALOG_BOOMBOX5,DIALOG_STYLE_LIST,"Slava Marlow",
						"Slava Marlow - \n\
						Slava Marlow - \n\
						Slava Marlow - \n\
						Slava Marlow - \n\
						Slava Marlow - \n\
						Slava Marlow - \n\
						Slava Marlow - \n\
						Slava Marlow - \n\
						Slava Marlow - \n\
						Slava Marlow - ",
						"????????","???????");
					}
					case 6:
					{
					    Dialog(playerid,DIALOG_BOOMBOX6,DIALOG_STYLE_LIST,"Country","181 Kicking Country\nAbsolute Country Radio","Select","Cancel");
					}
					case 7:
					{
					    Dialog(playerid,DIALOG_BOOMBOX7,DIALOG_STYLE_INPUT, "Boombox Input URL", "Please put a Music URL to play the Music", "Play", "Cancel");
					}
					case 8:
					{
		                if(GetPVarType(playerid, "BBArea"))
					    {
					        new string[128], pName[MAX_PLAYER_NAME];
					        GetPlayerName(playerid, pName, sizeof(pName));
							format(string, sizeof(string), "* %s has turned off their boombox.", pName);
							SendNearbyMessage(playerid, 15, string, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE);
					        foreach(Player, i)
							{
					            if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
					            {
					                StopStream(i);
								}
							}
					        DeletePVar(playerid, "BBStation");
						}
						SendClientMessage(playerid, COLOR_WHITE, "?? ????????? ???????");
					}
		        }
				return 1;
			}
			case DIALOG_BOOMBOX0://RAP
			{
				if(response)
		        {
		            if(listitem == 0)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://rusradio.hostingradio.ru/rusradio128.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://rusradio.hostingradio.ru/rusradio128.mp3");
						}
					}
					if(listitem == 1)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://ep256.streamr.ru", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://ep256.streamr.ru");
						}
					}
					if(listitem == 2)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://hitfm.hostingradio.ru/hitfm128.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://hitfm.hostingradio.ru/hitfm128.mp3");
						}
					}
					if(listitem == 3)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://online.radiorecord.ru:8101/rr_128", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://online.radiorecord.ru:8101/rr_128");
						}
					}
					if(listitem == 4)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dfm.hostingradio.ru/dfm128.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dfm.hostingradio.ru/dfm128.mp3");
						}
					}
					if(listitem == 5)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://ic7.101.ru:8000/s60", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://ic7.101.ru:8000/s60");
						}
					}
				}
				return 1;
			}
			case DIALOG_BOOMBOX1:
			{
				if(response)
		        {
		            if(listitem == 0)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2017-11/1510124704_maks-korzh-optimist-www_muzonov_net.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2017-11/1510124704_maks-korzh-optimist-www_muzonov_net.mp3");
						}
					}
				 	if(listitem == 1)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2018-09/1536354039_1536349123_maks-korzh-proletarka.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2018-09/1536354039_1536349123_maks-korzh-proletarka.mp3");
						}
					}
					if(listitem == 2)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2019-04/1554531411_maks-korzh-kontrolnyy-2019-muzonov_net.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2019-04/1554531411_maks-korzh-kontrolnyy-2019-muzonov_net.mp3");
						}
					}
					if(listitem == 3)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2019-06/1560371089_maks-korzh-shantazh.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2019-06/1560371089_maks-korzh-shantazh.mp3");
						}
					}
					if(listitem == 4)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2019-08/1566462500_maks-korzh-2-tipa-lyudey.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2019-08/1566462500_maks-korzh-2-tipa-lyudey.mp3");
						}
					}
					if(listitem == 5)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2020-01/1580430900_maks-korzh-raznesem-2020.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2020-01/1580430900_maks-korzh-raznesem-2020.mp3");
						}
					}
					if(listitem == 6)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2019-12/1577676930_maks-korzh-maloletka.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2019-12/1577676930_maks-korzh-maloletka.mp3");
						}
					}
					if(listitem == 7)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/08/maks-korzh-vremena.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/08/maks-korzh-vremena.mp3");
						}
					}
					if(listitem == 8)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/08/maks-korzh-teplo.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/08/maks-korzh-teplo.mp3");
						}
					}
					if(listitem == 9)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/10/maks-korzh-eyo-vinoj.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/10/maks-korzh-eyo-vinoj.mp3");
						}
					}
				}
				return 1;
			}
			case DIALOG_BOOMBOX2:
			{
				if(response)
		        {
		            if(listitem == 0)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2021/01/miyagi-miyagi-endshpil-feya.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2021/01/miyagi-miyagi-endshpil-feya.mp3");
						}
					}
					if(listitem == 1)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2019-04/1555686984_miyagi-amp-endshpil-n_e_r_a_k_-imenno-ta-2018-muzonov_net.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2019-04/1555686984_miyagi-amp-endshpil-n_e_r_a_k_-imenno-ta-2018-muzonov_net.mp3");
						}
					}
					if(listitem == 2)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2021/01/miyagi-bonni-feat-endshpil.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2021/01/miyagi-bonni-feat-endshpil.mp3");
						}
					}
					if(listitem == 3)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/uploads/files/2019-06/1561112728_miyagi-marlboro.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/uploads/files/2019-06/1561112728_miyagi-marlboro.mp3");
						}
					}
					if(listitem == 4)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/04/endshpil-moj-babylon.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/04/endshpil-moj-babylon.mp3");
						}
					}
					if(listitem == 5)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/03/miyagi-i-got-love.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/03/miyagi-i-got-love.mp3");
						}
					}
					if(listitem == 6)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/08/miyagi-endshpil-malinovyj-rassvet.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/08/miyagi-endshpil-malinovyj-rassvet.mp3");
						}
					}
					if(listitem == 7)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/05/endshpil-rapapapapam.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/05/endshpil-rapapapapam.mp3");
						}
					}
					if(listitem == 8)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/04/miyagi-andy-panda-utopia-miyagi-andy-panda.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/04/miyagi-andy-panda-utopia-miyagi-andy-panda.mp3");
						}
					}
					if(listitem == 9)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/12/miyagi-all-the-time.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/12/miyagi-all-the-time.mp3");
						}
					}
				}
				return 1;
			}
			case DIALOG_BOOMBOX3://RAP
			{
				if(response)
		        {
		            if(listitem == 0)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2021/02/kangi-vozmi-serdce-moe.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2021/02/kangi-vozmi-serdce-moe.mp3");
						}
					}
					if(listitem == 1)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2021/01/kangi-ejya-ejya-ejya-jo.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2021/01/kangi-ejya-ejya-ejya-jo.mp3");
						}
					}
					if(listitem == 2)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/08/kangi-vali-original.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/08/kangi-vali-original.mp3");
						}
					}
					if(listitem == 3)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/04/kangi-prosto-uslysh-menya-a-moya-lyubov-samaya-chistaya.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/04/kangi-prosto-uslysh-menya-a-moya-lyubov-samaya-chistaya.mp3");
						}
					}
					if(listitem == 4)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2021/03/zhit-ne-zapretish-kangi.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2021/03/zhit-ne-zapretish-kangi.mp3");
						}
					}
					if(listitem == 5)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://dl.muzonovs.ru/files/music/2020/04/kangi-kangi-sobaka.mp3", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://dl.muzonovs.ru/files/music/2020/04/kangi-kangi-sobaka.mp3");
						}
					}
				}
				return 1;
			}
			case DIALOG_BOOMBOX4://HIP HOP
			{
			    if(!response)
			    {
		     		Dialog(playerid,DIALOG_BOOMBOX,DIALOG_STYLE_LIST,"Radio List","Jazz\nPop\nRap\nR&B and Urban\nRock\nCountry\nEnter URL\nTurn Off Boombox","Select", "Cancel");
				}
				if(response)
		        {
		            if(listitem == 0)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=32999", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://yp.shoutcast.com/sbin/tunein-station.pls?id=32999");
						}
					}
					if(listitem == 1)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=105867", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://yp.shoutcast.com/sbin/tunein-station.pls?id=105867");
						}
					}
				}
				return 1;
			}
			case DIALOG_BOOMBOX5://ROCK
			{
			    if(!response)
			    {
		     		Dialog(playerid,DIALOG_BOOMBOX,DIALOG_STYLE_LIST,"Radio List","Jazz\nPop\nRap\nR&B and Urban\nRock\nCountry\nEnter URL\nTurn Off Boombox","Select", "Cancel");
				}
				if(response)
		        {
		            if(listitem == 0)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=785339", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://yp.shoutcast.com/sbin/tunein-station.pls?id=785339");
						}
					}
		   			if(listitem == 1)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=19275", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://yp.shoutcast.com/sbin/tunein-station.pls?id=19275");
						}
					}
				}
				return 1;
			}
			case DIALOG_BOOMBOX6://COUNTRY
			{
			    if(!response)
			    {
			       Dialog(playerid,DIALOG_BOOMBOX,DIALOG_STYLE_LIST,"Radio List","Jazz\nPop\nRap\nR&B and Urban\nRock\nCountry\nEnter URL\nTurn Off Boombox","Select", "Cancel");
				}
				if(response)
		        {
		            if(listitem == 0)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=71887", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://yp.shoutcast.com/sbin/tunein-station.pls?id=71887");
						}
					}
		   			if(listitem == 1)
		            {
		                if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, "http://yp.shoutcast.com/sbin/tunein-station.pls?id=34839", GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", "http://yp.shoutcast.com/sbin/tunein-station.pls?id=34839");
						}
					}
				}
				return 1;
			}
			case DIALOG_BOOMBOX7://SET URL
			{
				if(response == 1)
				{
				    if(isnull(inputtext))
				    {
				        SendClientMessage(playerid, COLOR_WHITE, "You did not enter anything" );
				        return 1;
				    }
				    if(strlen(inputtext))
				    {
				        if(GetPVarType(playerid, "PlacedBB"))
						{
						    foreach(Player, i)
							{
								if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
								{
									PlayStream(i, inputtext, GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ"), 30.0, 1);
						  		}
						  	}
					  		SetPVarString(playerid, "BBStation", inputtext);
						}
					}
				}
				else
				{
				    return 1;
				}
			}
		    case DIALOG_BUY_DONATE_CAR:
			{
			    new color_1 = 17, color_2 = 17;
			    
			    new Float: pos_x = -335.7250;
				new Float: pos_y = 424.3185;
				new Float: pos_z = 12.2686;
				new Float: angle = 356.7986;
						
				if(response)
				{
					switch(listitem + 1)
					{
						case 1:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}
							
							new modelid = DONATE_CAR_ID_1, price = DONATE_CAR_PRICE_1;
	
						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {
						    
						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                                    format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                                    SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);

									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 2:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_2, price = DONATE_CAR_PRICE_2;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                                    format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                                    SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);

									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 3:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_3, price = DONATE_CAR_PRICE_3;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            		SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);
									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 4:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_4, price = DONATE_CAR_PRICE_4;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            		SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);
									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 5:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_5, price = DONATE_CAR_PRICE_5;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            		SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);
									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 6:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_6, price = DONATE_CAR_PRICE_6;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            		SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);
									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 7:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_7, price = DONATE_CAR_PRICE_7;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            		SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);
									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 8:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_8, price = DONATE_CAR_PRICE_8;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//	CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            		SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);
									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 9:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_9, price = DONATE_CAR_PRICE_9;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                           		 	SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);
									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
						case 10:
						{
						    if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
							{
								SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
								return -1;
							}

							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
								return -1;
							}

							new modelid = DONATE_CAR_ID_10, price = DONATE_CAR_PRICE_10;

						    if(GetPlayerData(playerid, P_DONATE_RUB) < price)
						    {

						        GivePlayerDonateRub(playerid, price, "??????? ????? ??????");

								new query[220],
									Cache: result,
									idx;

								idx = GetFreeOwnableCarID();

								SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

								SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
								SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
								SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

								SetOwnableCarData(idx, OC_POS_X, 		pos_x);
								SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
								SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
								SetOwnableCarData(idx, OC_ANGLE, 		angle);

								strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

								SetOwnableCarData(idx, OC_ALARM, 		false);
								SetOwnableCarData(idx, OC_KEY_IN, 		false);

								SetOwnableCarData(idx, OC_CREATE, 		gettime());

								format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
								// ----------------------------------------------------------------------------------------

								new vehicleid = CreateVehicle
								(
									GetOwnableCarData(idx, OC_MODEL_ID),
									GetOwnableCarData(idx, OC_POS_X),
									GetOwnableCarData(idx, OC_POS_Y),
									GetOwnableCarData(idx, OC_POS_Z),
									GetOwnableCarData(idx, OC_ANGLE),
									GetOwnableCarData(idx, OC_COLOR_1),
									GetOwnableCarData(idx, OC_COLOR_2),
									-1,
									0,
									VEHICLE_ACTION_TYPE_OWNABLE_CAR,
									idx
								);
								if(vehicleid != INVALID_VEHICLE_ID)
								{

									//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
									//index = GetVehicleData(vehicleid, V_ACTION_ID);
                            		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
                            		SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
									SetVehicleParam(vehicleid, V_LOCK, false);
									SetVehicleData(vehicleid, V_MILEAGE, 0.0);
								}

								SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

								format
								(
									query, sizeof query,
									"INSERT INTO ownable_cars \
									(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
									VALUES \
									('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
									GetPlayerAccountID(playerid),
									modelid,
									color_1,
									color_2,
									pos_x,
									pos_y,
									pos_z,
									angle,
									gettime()
								);
								result = mysql_query(mysql, query, true);

								SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

								cache_delete(result);

								SendClientMessage(playerid, 0x66CC00FF, "????????ù??! ?? ?????? ????? ??????.");
								SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/car {66CC00}????? ?????? ? ??????????ù?");
								EnablePlayerGPS(playerid, pos_x, pos_y, pos_z, "?????????????? ?????? ?????????? ???????? ?? GPS");
							}
							else
							    return Send(playerid,-1,"? ??? ?? ?????????? ????? ??????!");
						}
					}
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_GPS:
{
	if(response)
	{
		switch(listitem + 1)
		{
			case 1:
			{
				Dialog
				(
					playerid, DIALOG_GPS_PUBLIC_PLACES, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ?????? ?????",
					"1. ?????????????\n\
					2. ?????????\n\
					3. ?????????\n\
					4. ????????ù ???????? ?.???????",
					"???????", "?????"
				);
			}
			case 2:
			{
				Dialog
				(
					playerid, DIALOG_GPS_TRANSPORT, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ?????? ??ù ????????",
					"1. ?????\n\
					2. ???????\n\
					3. ?????",
					"???????", "?????"
				);
			}
			case 3:
			{
				Dialog
				(
					playerid, DIALOG_GPS_JOBS, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ?? ??????",
					"1. ???? ?????????\n\
					2. ?????????ù ?????? ????????\n\
					3. ?????? ????????(?????)\n\
					4. ?????? ????????(???????)\n\
					5. ?????? ????????(????????)",
					"???????", "?????"
				);
			}
			case 4:
			{
				Dialog
				(
					playerid, DIALOG_GPS_STATE_ORGANIZATIONS, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ??????????????? ???????????",
					"1. ????????????? ???????\n\
					2. ????? ??????? ?1 (?????)\n\
					3. ????? ??????? ?2 (????)\n\
					4. ????? ???\n\
					5. ????????ù ???????? ?. ???????\n\
					6. ???\n\
					7. ???????ù ?????",
					"???????", "?????"
				);
			}
			case 5:
			{
				Dialog
				(
					playerid, DIALOG_GPS_GANGS, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ???? ?????????? ???????????",
					"1. ??????????ù ???\n\
					2. ??????????ù ???\n\
					3. ???????????ù ???\n\
					4. ????? ??ù ??????",
					"???????", "?????"
				);
			}
			case 6:
			{
				Dialog
				(
					playerid, DIALOG_GPS_TK, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff} | ù??????????? ????????",
					"1. ???? ???????????? ???????? ???. ????????\n\
					2. ????? ?. ???????\n\
					3. ????? ?. ?????\n\
					4. ????? ?. ?????\n\
					5. ????? ???. ????????\n\
					6. ???????? ????? '??????' ???. ????????",
					"???????", "?????"
				);
			}
			case 7:
			{
				return SCM(playerid, -1, ""USC"? ??????????!");
			}
			case 8:
			{
				return SCM(playerid, -1, ""USC"? ??????????!");
			}
			case 9:
			{
				Dialog
				(
					playerid, DIALOG_GPS_ENTERTAINMENT, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff} | ??????????ù",
					"1. ??????\n\
					2. ????? ?? ??????????\n\
					3. ???????????? ????",
					"???????", "?????"
				);
			}
			case 10:
			{
				Dialog
				(
					playerid, DIALOG_GPS_BANKS, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????",
					"1. ??????????? ???? ????????\n\
					2. ??????????? ???? ?????\n\
					3. ??????????? ???? ????????",
					"???????", "?????"
				);
			}
			case 11:
			{
				Dialog
				(
					playerid, DIALOG_GPS_TK, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff} | ???????",
					"1. ?????? ????? ??????\n\
					2. ?????? ?.?????\n\
					3. ?????? ?.???????\n\
					4. ?????? ?.?????????",
					"???????", "?????"
				);
			}
			case 12:
			{
				Dialog
				(
					playerid, DIALOG_GPS_AUTOSALONS, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ??????????",
					"1. ????????? ??????? ??????\n\
					2. ????????? ???????? ??????\n\
					3. ????????? ???????? ??????\n\
					4. ????? ???????? ???????????\n\
					5. ?????????? 'Harley Davidson'\n\
					6. ????????? ??????????? ???????????",
					"???????", "?????"
				);
			}
			case 13:
			{
				SetGPSMarker(playerid, 1822.497070, -143.917648, 15.688644);
			//
			}
			case 14:
			{
				Dialog
				(
					playerid, DIALOG_GPS_CITIES, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ?????? ? ?????????? ??????",
					"1. ?. ?????\n\
					2. ?. ???????\n\
					3. ?. ????????\n\
					4. ?. ????????\n\
					5. ???. ????????\n\
					6. ?. ?????????\n\
					7. ?. ?????\n\
					8. ?. ???????\n\
					9. ?. ????????\n\
					10. ?. ???ù????",
					"???????", "?????"
				);
			}
			case 15:
			{
				Dialog
				(
					playerid, DIALOG_GPS_VOKZALS, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ???????",
					"1. ?????? ?. ???????\n\
					2. ?????? ?. ?????\n\
					3. ?????? ???. ????????",
					"???????", "?????"
				);
			}
			case 16:
			{
				Dialog
				(
					playerid, DIALOG_GPS_MISTS, DIALOG_STYLE_LIST,
					"{DC143C}"SERVER_NAME"{ffffff}| ????? ????????? ????",
					"1. ????? ????????? ???\n\
					2. ????? ????????? ??????? 24/7\n\
					3. ????? ????????? ??????? ??????\n\
					4. ????? ????????? ??????? ?????ù",
					"???????", "?????"
				);
			}
		}
	}
}

case DIALOG_GPS_PUBLIC_PLACES:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ?????????????
            {
                SetGPSMarker(playerid, -2576.52, 2248.34, 58.66);
             //
            }
            case 1: // ?????????
            {
                SetGPSMarker(playerid, -2561.979980,40.261657,27.879764);
              //
            }
            case 2: // ?????????
            {
                SetGPSMarker(playerid, 1916.5503, 2302.2786, 15.1412);
               //
            }
            case 3: // ????????ù ????????
            {
                SetGPSMarker(playerid, -286.9034, 576.8859, 12.8447);
             //
            }
        }
    }
    else
    {
       // SendClientMessage(playerid, 0xFFFF00AA, "GPS-????? ?? ???????????.");
    }
}

case DIALOG_GPS_TRANSPORT:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ?????
            {
                SetGPSMarker(playerid, 2382.0808, 1723.0762, -1.8476);
             //
            }
            case 1: // ???????
            {
                SetGPSMarker(playerid, 615.2017, 1669.4125, 12.0710);
              //
            }
            case 2: // ?????
            {
                SetGPSMarker(playerid, -1044.0151, 2207.8337, 38.1192);
              //
            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_JOBS:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ???? ?????????
            {
                SetGPSMarker(playerid, 1836.6302, -116.0337, 15.5716);
              //
            }
            case 1: // ?????????ù ?????? ????????
            {
                SetGPSMarker(playerid, 2760.5935, -2396.1897, 21.8906);
              //
            }
            case 2: // ?????? ????????(?????)
            {
                SetGPSMarker(playerid, 2773.8394, -2452.6726, 21.8822);
             //
            }
            case 3: // ?????? ????????(???????)
            {
                SetGPSMarker(playerid, -129.1484, 941.4583, 12.1427);
              //
            }
            case 4: // ?????? ????????(????????)
            {
                SetGPSMarker(playerid, 1795.2192, 2530.7998, 15.6720);
              //
            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_STATE_ORGANIZATIONS:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ????????????? ???????
            {
                SetGPSMarker(playerid, -2576.52, 2248.34, 58.66);
              //
            }
            case 1: // ????? ??????? ?1 (?????)
            {
                SetGPSMarker(playerid, 1895.6697, -2212.2500, 10.9975);
           //
            }
            case 2: // ????? ??????? ?2 (????)
            {
                SetGPSMarker(playerid, 2578.9482, -2416.1196, 21.9922);
              //
            }
            case 3: // ????? ???
            {
                SetGPSMarker(playerid, 1818.4851, 2095.7136, 16.1642);
            //
            }
            case 4: // ????????ù ???????? ?. ???????
            {
                SetGPSMarker(playerid, -286.9034, 576.8859, 12.8447);
            //
            }
            case 5: // ???
            {
                SetGPSMarker(playerid, 2412.2505, -1841.7004, 22.9498);
            //
            }
            case 6: // ???????ù ?????
            {
                SetGPSMarker(playerid, 1731.4894, 1768.2654, 16.7501);
             //
            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_GANGS:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ??????????ù ???
            {
                SetGPSMarker(playerid, 435.3237, 1046.8125, 12.0026);
        //
            }
            case 1: // ??????????ù ???
            {
                SetGPSMarker(playerid, 1943.9056, 2164.6016, 15.2714);
           //
            }
            case 2: // ???????????ù ???
            {
                SetGPSMarker(playerid, -2343.5857, 72.3564, 21.0030);
             //
            }
            case 3: // ????? ??ù ??????
            {
                SetGPSMarker(playerid, 1916.5503, 2302.2786, 15.1412);
            //
            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_TK:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ???? ???????????? ???????? ???. ????????
            {
                SetGPSMarker(playerid, 2353.5378, 1974.4648, 15.9694);

            }
            case 1: // ????? ?. ???????
            {
                SetGPSMarker(playerid, -516.1411, -1647.6530, 40.9868);

            }
            case 2: // ????? ?. ?????
            {
                SetGPSMarker(playerid, -2405.2961, 2708.0486, 37.5497);

            }
            case 3: // ????? ?. ?????
            {
                SetGPSMarker(playerid, -1057.2089, 2160.0227, 37.1965);

            }
            case 4: // ????? ???. ????????
            {
                SetGPSMarker(playerid, 2316.7854, 1744.0284, -0.0499);

            }
            case 5: // ???????? ????? '??????' ???. ????????
            {
                SetGPSMarker(playerid, 1739.9163, 2259.9426, 15.0579);

            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_ENTERTAINMENT:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ??????
            {
                SetGPSMarker(playerid, 1333.437133,2368.792724,17.712001);

            }
            case 1: // ????? ?? ??????????
            {
                SetGPSMarker(playerid, 644.992370,1690.238037,12.162509);

            }
            case 2: // ???????????? ????
            {
                SetGPSMarker(playerid, -2382.192382,31.694522,27.062915);

            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_BANKS:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ??????????? ???? ????????
            {
                SetGPSMarker(playerid, 1852.0315, 2035.9677, 16.9802);

            }
            case 1: // ??????????? ???? ?????
            {
                SetGPSMarker(playerid, 2376.7163, -2139.2356, 22.0886);

            }
            case 2: // ??????????? ???? ????????
            {
                SetGPSMarker(playerid, 1852.0315, 2035.9677, 16.9802);

            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_AUTOSALONS:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ????????? ??????? ??????
            {
                SetGPSMarker(playerid, 2477.1899, -720.0678, 12.3315);

            }
            case 1: // ????????? ???????? ??????
            {
                SetGPSMarker(playerid, 1409.7476, 458.4746, 13.1630);

            }
            case 2: // ????????? ???????? ??????
            {
                SetGPSMarker(playerid, -18.6553, 2614.9434, 11.9766);

            }
            case 3: // ????? ???????? ???????????
            {
                SetGPSMarker(playerid, -2243.4968, 264.5101, 24.5391);

            }
            case 4: // ?????????? 'Harley Davidson'
            {
                SetGPSMarker(playerid, 781.6177, 751.9495, 12.9271);

            }
            case 5: // ????????? ??????????? ???????????
            {
                SetGPSMarker(playerid, 2494.7471, -718.3454, 12.3706);

            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_CITIES:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ?. ?????
            {
                SetGPSMarker(playerid, 2741.3228, -1434.8730, 23.8142);

            }
            case 1: // ?. ???????
            {
                SetGPSMarker(playerid, 214.1069, 819.7451, 12.1323);

            }
            case 2: // ?. ????????
            {
                SetGPSMarker(playerid, -630.5291, 964.9764, 12.0046);

            }
            case 3: // ?. ????????
            {
                SetGPSMarker(playerid, -436.7209, 1249.8666, 17.3866);

            }
            case 4: // ???. ????????
            {
                SetGPSMarker(playerid, 1888.2777, 2253.6804, 15.9527);

            }
            case 5: // ?. ?????????
            {
                SetGPSMarker(playerid, -2117.3633, -269.0161, 25.8835);

            }
            case 6: // ?. ?????
            {
                SetGPSMarker(playerid, -2374.6292, 2617.7007, 39.6368);

            }
            case 7: // ?. ???????
            {
                SetGPSMarker(playerid, -514.9841, -1594.6741, 40.9649);

            }
            case 8: // ?. ????????
            {
                SetGPSMarker(playerid, 1879.8423, 1330.9150, 10.0102);

            }
            case 9: // ?. ???ù????
            {
                SetGPSMarker(playerid, 385.3375, -1252.2156, 40.5613);

            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_VOKZALS:
{
    if (response)
    {
        switch(listitem)
        {
            case 0: // ?????? ?. ???????
            {
                SetGPSMarker(playerid, -117.7860, 950.1594, 11.2847);

            }
            case 1: // ?????? ?. ?????
            {
                SetGPSMarker(playerid, 2768.9883, -2418.0916, 20.9745);

            }
            case 2: // ?????? ???. ????????
            {
                SetGPSMarker(playerid, 1806.4391, 2518.9517, 14.8192);

            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

case DIALOG_GPS_MISTS:
{
	if(response)
	{
		switch(listitem)
		{
		    case 0:
			{
				new fmt_str[128];

				new stationid;
				new Float: dist;

				stationid = GetNearestFuelStation(playerid, 0.0);
				dist = GetPlayerDistanceFromPoint(playerid, GetFuelStationData(stationid, FS_POS_X), GetFuelStationData(stationid, FS_POS_Y), GetFuelStationData(stationid, FS_POS_Z));

				SetGPSMarker(
					playerid,
					GetFuelStationData(stationid, FS_POS_X),
					GetFuelStationData(stationid, FS_POS_Y),
					GetFuelStationData(stationid, FS_POS_Z)
				);

				format(fmt_str, sizeof fmt_str, "????? ????? ? ??? ????????ù ??? ?%d \"%s\" (??????ù??? %.1f ?)", stationid, GetFuelStationData(stationid, FS_NAME), dist);
				SendClientMessage(playerid, 0xFFFF00AA, fmt_str);


			}
			case 1:
			{
				new fmt_str[128];

				new biz_id;
				new Float: dist;

				biz_id = GetNearestBiz(playerid, BUSINESS_TYPE_SHOP_24_7, 0.0);
				dist = GetPlayerDistanceFromPoint(playerid, GetBusinessData(biz_id, B_POS_X), GetBusinessData(biz_id, B_POS_Y), GetBusinessData(biz_id, B_POS_Z));

				SetGPSMarker
				(
					playerid,
					GetBusinessData(biz_id, B_POS_X),
					GetBusinessData(biz_id, B_POS_Y),
					GetBusinessData(biz_id, B_POS_Z)
				);

				format(fmt_str, sizeof fmt_str, "????? ????? ? ??? ????????ù \"%s\" ?%d (??????ù??? %.1f ?)", GetBusinessInteriorInfo(GetBusinessData(biz_id, B_INTERIOR), BT_NAME), biz_id,  dist);
				SendClientMessage(playerid, 0xFFFF00AA, fmt_str);


			}
			case 2:
			{
				new fmt_str[128];

				new biz_id;
				new Float: dist;

				biz_id = GetNearestBiz(playerid, BUSINESS_TYPE_CLOTHING_SHOP, 0.0);
				dist = GetPlayerDistanceFromPoint(playerid, GetBusinessData(biz_id, B_POS_X), GetBusinessData(biz_id, B_POS_Y), GetBusinessData(biz_id, B_POS_Z));

				SetGPSMarker
				(
					playerid,
					GetBusinessData(biz_id, B_POS_X),
					GetBusinessData(biz_id, B_POS_Y),
					GetBusinessData(biz_id, B_POS_Z)
				);

				format(fmt_str, sizeof fmt_str, "????? ????? ? ??? ????????ù \"%s\" ?%d (??????ù??? %.1f ?)", GetBusinessInteriorInfo(GetBusinessData(biz_id, B_INTERIOR), BT_NAME), biz_id,  dist);
				SendClientMessage(playerid, 0xFFFF00AA, fmt_str);


			}
			case 3:
			{
				new fmt_str[128];

				new biz_id;
				new Float: dist;

				biz_id = GetNearestBiz(playerid, BUSINESS_TYPE_SHOP_GUN, 0.0);
				dist = GetPlayerDistanceFromPoint(playerid, GetBusinessData(biz_id, B_POS_X), GetBusinessData(biz_id, B_POS_Y), GetBusinessData(biz_id, B_POS_Z));

				SetGPSMarker
				(
					playerid,
					GetBusinessData(biz_id, B_POS_X),
					GetBusinessData(biz_id, B_POS_Y),
					GetBusinessData(biz_id, B_POS_Z)
				);

				format(fmt_str, sizeof fmt_str, "????? ????? ? ??? ????????ù \"%s\" ?%d (??????ù??? %.1f ?)", GetBusinessInteriorInfo(GetBusinessData(biz_id, B_INTERIOR), BT_NAME), biz_id,  dist);
				SendClientMessage(playerid, 0xFFFF00AA, fmt_str);


			}
		}
	}
	else callcmd::gps(playerid, "");
}

// ????????? ??????? ??????? ?? ???? ???????? ???????ù ??? ????
case DIALOG_GPS_MP:
{
	if(response)
	{
		if(0 <= listitem <= sizeof gps_mp-1)
		{
			SetGPSMarker(
				playerid,
				gps_mp[listitem][G_POS_X],
				gps_mp[listitem][G_POS_Y],
				gps_mp[listitem][G_POS_Z]
			);

		}
	}
	else callcmd::gps(playerid, "");
}

case DIALOG_GPS_QUEST:
{
	if(response)
	{
		if(0 <= listitem <= sizeof gps_quest-1)
		{
			SetGPSMarker(
				playerid,
				gps_quest[listitem][G_POS_X],
				gps_quest[listitem][G_POS_Y],
				gps_quest[listitem][G_POS_Z]
			);

		}
	}
	else callcmd::gps(playerid, "");
}

case DIALOG_GPS_BUSINESS:
{
    if (response)
    {
        if (listitem >= 0 && listitem < MAX_BUSINESS_GPS)
        {
            new idx = GetPlayerListitemValue(playerid, listitem);
            new businessid = GetBusinessGPSInfo(idx, BG_BIZ_ID);

            if (GetBusinessGPSInfo(idx, BG_SQL_ID))
            {
                SetGPSMarker(
                    playerid,
                    GetBusinessData(businessid, B_POS_X),
                    GetBusinessData(businessid, B_POS_Y),
                    GetBusinessData(businessid, B_POS_Z)
                );
            }
            else
            {
                callcmd::gps(playerid, "");
            }
        }
    }
    else
    {
        callcmd::gps(playerid, "");
    }
}

			// -----------------------------------------------------------------
			case DIALOG_HELP:
			{
				if(response)
				{
					if(0 <= listitem <= sizeof help_info - 1)
						ShowPlayerHelpSection(playerid, listitem);
				}
				else DeletePVar(playerid, "help_section");
			}
			case DIALOG_HELP_SECTION:
			{
				new sectionid = GetPVarInt(playerid, "help_section");

				if(!response && sectionid < sizeof help_info - 1)
				{
					ShowPlayerHelpSection(playerid, sectionid + 1);
				}
				else callcmd::help(playerid, "");
			}
			// -----------------------------------------------------------------
			case DIALOG_SERVER_RADIO:
			{
				if(response)
				{
					if(0 <= listitem <= sizeof g_server_radio - 1)
					{
						PlayerPlayStream(playerid, GetServerRadioData(listitem, SR_CHANNEL_URL));
						SetPVarInt(playerid, "server_radio_enabled", 1);
						SendClientMessage(playerid, 0x66CC00FF, "?????? ????? ????????");
					}
				}
			}
			case DIALOG_CAR_RADIO:
            {
                if(response)
                {
                    if(0 <= listitem <= sizeof g_server_radio - 1)
                    {
                        PlayerPlayStream(playerid, GetServerRadioData(listitem, SR_CHANNEL_URL));
                        SetPVarInt(playerid, "server_radio_enabled", 1);
                        SendClientMessage(playerid, COR_SERVER, ""SC"????? ??????? ????? ??????? {ffff00}/music");
                        //Action(playerid, "???????(-?) ?????", _, false);
                    }
                }
            }
            case DIALOG_PLAY_RADIO:
            {
                if(response)
                {
                    if(0 <= listitem <= sizeof g_server_radio - 1)
                    {
                        PlayerPlayStream(playerid, GetServerRadioData(listitem, SR_CHANNEL_URL));
                        SetPVarInt(playerid, "server_radio_enabled", 1);
                        SendClientMessage(playerid, COR_SERVER, ""SC"????? ?????? ???????? ???? ??????? ????? ??????? {ffff00}/music");
                        //Action(playerid, "???????(-?) ???????? ? ?????(-?) ??????? ?????", _, false);
                      //  SetPlayerAttachedObject(playerid, 3, 19424, 2,0.05,0.0,0.0,90.0,360.0,270.0);
                    }
                }
            }
			// -----------------------------------------------------------------
			case DIALOG_ANIM_LIST:
			{
				if(response)
				{
					if(!SetPlayerAnimation(playerid, listitem))
					{
						Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							"?????????ù",
							"??ù ???????? ??????? ?????? ???????? ????? ???????????? {FFFFFF}/anim(list) [????? ???????? ?? ??????]",
							"???????", ""
						);
					}
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_OPEN_HOOD_OR_TRUNK:
			{
				new vehicleid = GetPlayerVehicleID(playerid);
				if(vehicleid)
				{
					new E_VEHICLE_PARAMS_STRUCT: param = response ? V_BONNET : V_BOOT;
					new set_status = GetVehicleParam(vehicleid, param) ^ VEHICLE_PARAM_ON;

					SetVehicleParam(vehicleid, param, set_status);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_DRIVING_TUTORIAL_START:
			{
				if(response)
					ShowDrivingTutorialSection(playerid, 0);
					SetPlayerPos(playerid,1644.394042,918.044799,1001.000000);
			}
			case DIALOG_DRIVING_TUTORIAL:
			{
				new step = GetPVarInt(playerid, "driving_tutorial_step");
				if(response)
				{
					step ++;
				}
				else step --;

				if(step >= sizeof driving_tutorial)
				{
					Dialog
					(
						playerid, DIALOG_DRIVING_TUTORIAL_END, DIALOG_STYLE_MSGBOX,
						"{0099FF}??????????",
						"{FFFFFF}???????ù ?? ??? ??????????? ?????? ? ?????? ?????????? ? ????? ????????\n"\
						"???? ?? ???????????? ? ???-????, ?? ??????????? ?? ????????? ? ????????? ?????? ?????? ??? ???!\n\n"\
						"{CC9900}?????? ??? ????? ?? ????????!\n"\
						"??ù ????, ????? ????????? ???????? ??????? \"?????\"",
						"?????", "?????"
					);
				}
				else if(step < 0)
				{
					ShowPlayerDrivingTutorial(playerid);
				}
				else
				{
					ShowDrivingTutorialSection(playerid, step);

					if(step == 1)
					{
						ShowNotificationDefault(playerid, 2, 5, 5, 0, "?? ????????? ? ?ù?! ");
					}
				}
			}
			case DIALOG_DRIVING_TUTORIAL_END:
			{
				if(!response)
					ShowDrivingTutorialSection(playerid, sizeof driving_tutorial - 1);
			}
			case DIALOG_DRIVING_EXAM_INFO:
			{
				if(response)
				{
					if(GetPlayerData(playerid, P_DRIVING_LIC) < 1)
					{
						if(GetPlayerMoneyEx(playerid) >= 600)
						{
							GivePlayerMoneyEx(playerid, -600, "????? ?? ?????");

							Dialog
							(
								playerid, DIALOG_DRIVING_EXAM_START, DIALOG_STYLE_MSGBOX,
								"{CCCC00}ù???????????ù ?????",
								"{FFFFFF}??? ????? ?????????? 12 ???????? ??ù ???????? ????????????? ??????\n"\
								"????? ????? ??? ????? ???????? ?????????? ???????? ??????? ?? 9 ?? ???\n"\
								"???? ?????????? ??????? ????? ??????, ?? ?? ?? ?????? ???????? ?? ???????????? ?????\n\n"\
								"{33CCFF}?? ?????? ?????? ????? ????????? ????????? ??????, ?????????? ?? ??????? ?????? ????.\n"\
								"? ?????????? ?? ??????? ????? ???????? ?? ??? ???????",
								"?????", "??????"
							);
							ClearPlayerDrivingExamInfo(playerid);
						}
						else ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? ??????? | 600 ???.");
					}
					else ShowNotificationDefault(playerid, 2, 5, 5, 0, "? ??? ???? ?????");
				}
			}
			case DIALOG_DRIVING_EXAM_START:
			{
				if(response)
				{
					SetPlayerDrivingExamInfo(playerid, DE_POINTS, 0);
					ShowPlayerDrivingExam(playerid, 0);
				}
			}
			case DIALOG_DRIVING_EXAM:
			{
				new step = GetPlayerDrivingExamInfo(playerid, DE_EXAM_STEP);

				if(driving_exam[step][DE_CORRECT_ANSWER] == (listitem + 1))
				{
					SetPlayerChatBubble(playerid, "+1", 0xFFFF00FF, 5.0, 2000);
					SetPlayerDrivingExamInfo(playerid, DE_POINTS, GetPlayerDrivingExamInfo(playerid, DE_POINTS) + 1);
				}
				ShowPlayerDrivingExam(playerid, step + 1);
			}
			case DIALOG_DRIVING_EXAM_RESULT:
			{
				if(GetPlayerDrivingExamInfo(playerid, DE_POINTS) >= 9)
				{
					Dialog
					(
						playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
						"{CCCC00}???????????ù ?????",
						"{FFFFFF}???????, ?????? ????????? ? ???????????? ?????\n"\
						"??? ????? ????? ??????? ?????????ù ?? ?????? ?? ??????? ????\n"\
						"????? ??? ????? ?? ???ù??? ????? ?? ??????\n\n"\
						"{FF9900}????????! ?????????? ???????????? ? ?? ?????????? ????????\n"\
						"???? ?? ????????? ?????????? ??????? ????? ????????",
						"??????", ""
					);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_ATM:
			{
				if(response)
				{
					switch(listitem+1)
					{
						case 1,2: // ??ù??\???????? ? ??????????? ?????
						{
							ShowPlayerATMSelectSumDialog(playerid, !listitem);
						}
						case 3: // ?????? ??????????? ?????
						{
							new fmt_str[64];
							format(fmt_str, sizeof fmt_str, "{FFFFFF}?? ????? ?????????? ????? {%s}%d ???", GetPlayerBankMoney(playerid) > 0 ? ("00CC00") : ("FF6633"), GetPlayerBankMoney(playerid));

							Dialog
							(
								playerid, DIALOG_ATM_BALANCE, DIALOG_STYLE_MSGBOX,
								"{FFCD00}?????? ?????",
								fmt_str,
								"?????", "?????"
							);
						}
						case 4: // ??ù?? ?? ????? ???????ù??ù
						{
							ShowPlayerATMCompanyDialog(playerid, true);
						}
						case 5: // ???????? ?? ???? ???????ù??ù
						{
							ShowPlayerATMCompanyDialog(playerid, false);
						}
						case 6: // ????????? ????????? ???????
						{
							if(GetPlayerPhone(playerid) != 0)
							{
								Dialog
								(
									playerid, DIALOG_ATM_PHONE_BALANCE, DIALOG_STYLE_INPUT,
									"{FFCD00}?????????? ?????????? ????????",
									"{FFFFFF}??????? ?????, ?? ??????? ?????? ????????? ????:",
									"??????", "?????"
								);
							}
							else
							{
								SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");
								ShowPlayerATMDialog(playerid);
							}
						}
						case 7: // ??????????? ???????
						{
							if(GetPlayerLevel(playerid) >= 2)
							{
								Dialog
								(
									playerid, DIALOG_ATM_TRANSFER_MONEY_1, DIALOG_STYLE_INPUT,
									"{FFCD00}??????????? ???????",
									"{FFFFFF}??????? ????? ??????????? ?????:",
									"?????", "??????"
								);
							}
							else SendClientMessage(playerid, 0x999999FF, "??????? ????? ???????? ?? 2 ?????ù");
						}
						case 8:
						{
							Dialog
							(
								playerid, DIALOG_ATM_TICKET_SELECT, DIALOG_STYLE_LIST,
								"{FFCD00}?????? ??????",
								"1. ??????? ????? ?? ??????\n"\
								"2. ???????? ????? ?? ??????",
								"?????", "??????"
							);
						}
						case 9: // ???????????????????
						{
							ShowPlayerATMCharityDialog(playerid);
						}
						default:
							return 1;
					}
					ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
				}
			}
			case DIALOG_ATM_TAKE_MONEY: // ??ù?? ??????
			{
				if(response)
				{
					if(0 <= listitem <= 6)
					{
						new sum = atm_item_sum[listitem];
						if(GetPlayerBankMoney(playerid) >= sum)
						{
							new query[85];
							format(query, sizeof query, "UPDATE accounts SET money=%d,bank=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid) + sum, GetPlayerBankMoney(playerid) - sum, GetPlayerAccountID(playerid));
							mysql_query(mysql, query, false);

							if(!mysql_errno())
							{
								AddPlayerData(playerid, P_BANK, -, sum);
								GivePlayerMoneyEx(playerid, sum, "??ù??? ????? ? ?????????", false, true);
							}
							else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 08)");

							ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
							ShowPlayerATMDialog(playerid);
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "?? ????? ?????????? ????? ???????????? ???????");
							ShowPlayerATMSelectSumDialog(playerid, true);
						}
					}
					else ShowPlayerATMSelectOtherSum(playerid, true);
				}
				else
				{
					ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					ShowPlayerATMDialog(playerid);
				}
			}
			case DIALOG_ATM_TAKE_OTHER_MONEY: // ??ù?? ?????? (?????ù ????)
			{
				if(response)
				{
					new take_sum = strval(inputtext);
					if(take_sum > 0 && IsNumeric(inputtext))
					{
						if(GetPlayerBankMoney(playerid) >= take_sum)
						{
							new query[85];
							format(query, sizeof query, "UPDATE accounts SET money=%d,bank=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid) + take_sum, GetPlayerBankMoney(playerid) - take_sum, GetPlayerAccountID(playerid));
							mysql_query(mysql, query, false);

							if(!mysql_errno())
							{
								AddPlayerData(playerid, P_BANK, -, take_sum);
								GivePlayerMoneyEx(playerid, take_sum, "??ù??? ????? ? ????????? (?????ù ?????)", false, true);
							}
							else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 08)");

							ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
							ShowPlayerATMDialog(playerid);
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "?? ????? ?????????? ????? ???????????? ???????");
							ShowPlayerATMSelectOtherSum(playerid, true);
						}
					}
					else ShowPlayerATMSelectOtherSum(playerid, true);
				}
				else
				{
					ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					ShowPlayerATMSelectSumDialog(playerid, true);
				}
			}
			case DIALOG_ATM_PUT_MONEY: // ???????? ??????
			{
				if(response)
				{
					if(0 <= listitem <= 6)
					{
						new sum = atm_item_sum[listitem];
						if(GetPlayerMoneyEx(playerid) >= sum)
						{
							new query[85];
							format(query, sizeof query, "UPDATE accounts SET money=%d,bank=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid) - sum, GetPlayerBankMoney(playerid) + sum, GetPlayerAccountID(playerid));
							mysql_query(mysql, query, false);

							if(!mysql_errno())
							{
								AddPlayerData(playerid, P_BANK, +, sum);
								GivePlayerMoneyEx(playerid, -sum, "?????????? ????? ? ?????????", false, true);
							}
							else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 08)");

							ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
							ShowPlayerATMDialog(playerid);
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "? ??? ? ????? ??? ??????? ?????");
							ShowPlayerATMSelectSumDialog(playerid, false);
						}
					}
					else ShowPlayerATMSelectOtherSum(playerid, false);
				}
				else
				{
					ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					ShowPlayerATMDialog(playerid);
				}
			}
			case DIALOG_ATM_PUT_OTHER_MONEY: // ???????? ?????? (?????ù ????)
			{
				if(response)
				{
					new put_sum = strval(inputtext);
					if(put_sum > 0 && IsNumeric(inputtext))
					{
						if(GetPlayerMoneyEx(playerid) >= put_sum)
						{
							new query[85];
							format(query, sizeof query, "UPDATE accounts SET money=%d,bank=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid) - put_sum, GetPlayerBankMoney(playerid) + put_sum, GetPlayerAccountID(playerid));
							mysql_query(mysql, query, false);

							if(!mysql_errno())
							{
								AddPlayerData(playerid, P_BANK, +, put_sum);
								GivePlayerMoneyEx(playerid, -put_sum, "?????????? ????? ? ????????? (?????ù ?????)", false, true);
							}
							else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 08)");

							ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
							ShowPlayerATMDialog(playerid);
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "? ??? ? ????? ??? ??????? ?????");
							ShowPlayerATMSelectOtherSum(playerid, false);
						}
					}
					else ShowPlayerATMSelectOtherSum(playerid, false);
				}
				else
				{
					ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					ShowPlayerATMSelectSumDialog(playerid, false);
				}
			}
			case DIALOG_ATM_BALANCE:
			{
				if(response)
				{
					ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					ShowPlayerATMDialog(playerid);
				}
			}
			case DIALOG_ATM_PHONE_BALANCE:
			{
				if(response)
				{
					new sum = strval(inputtext);
					if(sum > 0 && IsNumeric(inputtext))
					{
						if(GetPlayerMoneyEx(playerid) >= sum)
						{
							new query[128];

							format(query, sizeof query, "UPDATE accounts SET money=%d,phone_balance=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-sum, GetPlayerData(playerid, P_PHONE_BALANCE)+sum, GetPlayerAccountID(playerid));
							mysql_query(mysql, query, false);

							if(!mysql_errno())
							{
								GivePlayerMoneyEx(playerid, -sum, "?????????? ????? ????????", false, true);
								AddPlayerData(playerid, P_PHONE_BALANCE, +, sum);

								format(query, sizeof query, "?? ????????? ???? ?????????? ???????? ?? {FF9900}%d ???", sum);
								SendClientMessage(playerid, 0x66CC00FF, query);

								format(query, sizeof query, "?????? ?? ????? %d ???", GetPlayerData(playerid, P_PHONE_BALANCE));
								SendClientMessage(playerid, 0x66CC00FF, query);

								return 1;
							}
							else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 15)");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ??????? ?????");

						ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					}

					Dialog
					(
						playerid, DIALOG_ATM_PHONE_BALANCE, DIALOG_STYLE_INPUT,
						"{FFCD00}?????????? ?????????? ????????",
						"{FFFFFF}??????? ?????, ?? ??????? ?????? ????????? ????:",
						"??????", "?????"
					);
				}
				else
				{
					ShowPlayerATMDialog(playerid);
					ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
				}
			}
			case DIALOG_ATM_SELECT_COMPANY_TAKE, DIALOG_ATM_SELECT_COMPANY_PUT:
			{
				if(response)
				{
					new bool: action = (dialogid == DIALOG_ATM_SELECT_COMPANY_TAKE);

					switch(listitem + 1)
					{
						case 1:
							ShowPlayerATMBusinessDialog(playerid, action);

						case 2:
							ShowPlayerATMFuelStationDialog(playerid, action);
					}
				}
				else
				{
					ShowPlayerATMDialog(playerid);
					ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
				}
			}
			case DIALOG_ATM_FUEL_ST_TAKE_MONEY:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						new sum = strval(inputtext);
						if(sum > 0 && IsNumeric(inputtext))
						{
							if(GetFuelStationData(stationid, FS_BALANCE) >= sum)
							{
								new query[128 + 1];

								format(query, sizeof query, "UPDATE accounts a, fuel_stations f SET a.money=%d,f.balance=%d WHERE a.id=%d AND f.id=%d", GetPlayerMoneyEx(playerid)+sum, GetFuelStationData(stationid, FS_BALANCE)-sum, GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
								mysql_query(mysql, query, false);

								if(!mysql_errno())
								{
									AddFuelStationData(stationid, FS_BALANCE, -, sum);
									GivePlayerMoneyEx(playerid, sum, "+ ??ù??? ??????? ?? ????? ???", false, true);

									ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
									ShowPlayerATMDialog(playerid);
									return 1;
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 18)");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ????? ???????ù??ù ??? ????? ?????");
						}
						ShowPlayerATMFuelStationDialog(playerid, true);
					}
					else
					{
						ShowPlayerATMDialog(playerid);
						ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					}
				}
			}
			case DIALOG_ATM_FUEL_ST_PUT_MONEY:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						new sum = strval(inputtext);
						if(sum > 0 && IsNumeric(inputtext))
						{
							if(GetPlayerMoneyEx(playerid) >= sum)
							{
								new query[128 + 1];

								format(query, sizeof query, "UPDATE accounts a, fuel_stations f SET a.money=%d,f.balance=%d WHERE a.id=%d AND f.id=%d", GetPlayerMoneyEx(playerid)-sum, GetFuelStationData(stationid, FS_BALANCE)+sum, GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
								mysql_query(mysql, query, false);

								if(!mysql_errno())
								{
									AddFuelStationData(stationid, FS_BALANCE, +, sum);
									GivePlayerMoneyEx(playerid, -sum, "?????????? ????? ???", false, true);

									ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
									ShowPlayerATMDialog(playerid);
									return 1;
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 18)");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ??? ? ????? ??? ??????? ?????");
						}
						ShowPlayerATMFuelStationDialog(playerid, false);
					}
					else
					{
						ShowPlayerATMDialog(playerid);
						ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					}
				}
			}
			case DIALOG_ATM_BIZ_TAKE_MONEY:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						new sum = strval(inputtext);
						if(sum > 0 && IsNumeric(inputtext))
						{
							if(GetBusinessData(businessid, B_BALANCE) >= sum)
							{
								new query[128 + 1];

								format(query, sizeof query, "UPDATE accounts a, business b SET a.money=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)+sum, GetBusinessData(businessid, B_BALANCE)-sum, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
								mysql_query(mysql, query, false);

								if(!mysql_errno())
								{
									AddBusinessData(businessid, B_BALANCE, -, sum);
									GivePlayerMoneyEx(playerid, sum, "+ ??ù??? ??????? ?? ????? ???????", false, true);

									ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
									ShowPlayerATMDialog(playerid);

									return 1;
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 18)");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ????? ???????ù??ù ??? ????? ?????");
						}
						ShowPlayerATMBusinessDialog(playerid, true);
					}
					else
					{
						ShowPlayerATMDialog(playerid);
						ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					}
				}
			}
			case DIALOG_ATM_BIZ_PUT_MONEY:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						new sum = strval(inputtext);
						if(sum > 0 && IsNumeric(inputtext))
						{
							if(GetPlayerMoneyEx(playerid) >= sum)
							{
								new query[128 + 1];

								format(query, sizeof query, "UPDATE accounts a, business b SET a.money=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-sum, GetBusinessData(businessid, B_BALANCE)+sum, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
								mysql_query(mysql, query, false);

								if(!mysql_errno())
								{
									AddBusinessData(businessid, B_BALANCE, +, sum);
									GivePlayerMoneyEx(playerid, -sum, "?????????? ????? ???????", false, true);

									ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
									ShowPlayerATMDialog(playerid);
									return 1;
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 18)");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ??? ? ????? ??? ??????? ?????");
						}
						ShowPlayerATMBusinessDialog(playerid, false);
					}
					else
					{
						ShowPlayerATMDialog(playerid);
						ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);
					}
				}
			}
			case DIALOG_ATM_TRANSFER_MONEY_1:
			{
				if(response)
				{
					new transfer_id = strval(inputtext);

					if(transfer_id > 0 && IsNumeric(inputtext))
					{
						SetPlayerBankTransfer(playerid, BT_ID, 0);

						new query[64 + 1];
						new Cache: result;

						format(query, sizeof query, "SELECT id FROM bank_accounts WHERE id=%d LIMIT 1", transfer_id);
						result = mysql_query(mysql, query);

						if(cache_num_rows())
							SetPlayerBankTransfer(playerid, BT_ID, cache_get_row_int(0, 0));

						cache_delete(result);

						if(GetPlayerBankTransfer(playerid, BT_ID))
						{
							return ShowPlayerATMTransfer(playerid);
						}
						else SendClientMessage(playerid, 0xFF6600FF, "????? ? ????? ??????? ?? ??????????");
					}

					Dialog
					(
						playerid, DIALOG_ATM_TRANSFER_MONEY_1, DIALOG_STYLE_INPUT,
						"{FFCD00}??????????? ???????",
						"{FFFFFF}??????? ????? ??????????? ?????:",
						"?????", "??????"
					);
				}
				else ShowPlayerATMDialog(playerid);
			}
			case DIALOG_ATM_TRANSFER_MONEY_2:
			{
				new transfer_id = GetPlayerBankTransfer(playerid, BT_ID);
				if(response && transfer_id)
				{
					new transfer_sum = strval(inputtext);
					if(transfer_sum > 0 && IsNumeric(inputtext))
					{
						if(GetPlayerBankMoney(playerid) >= transfer_sum)
						{
							new fmt_str[155];

							format(fmt_str, sizeof fmt_str, "UPDATE accounts a,bank_accounts ba SET a.bank=%d,ba.balance=ba.balance + %d WHERE a.id=%d AND ba.id=%d", GetPlayerBankMoney(playerid)-transfer_sum, transfer_sum, GetPlayerAccountID(playerid), transfer_id);
							mysql_query(mysql, fmt_str, false);

							if(!mysql_errno())
							{
								format(fmt_str, sizeof fmt_str, "+ ?????????ù ? ????????? %d ???", transfer_sum);
								BankAccountLog(playerid, transfer_id, fmt_str);

								AddPlayerData(playerid, P_BANK, -, transfer_sum);
								format
								(
									fmt_str, sizeof fmt_str,
									"{FFFFFF}??????:\t\t\t???????? ????\n"\
									"????:\t\t\t\t???? ?%d\n"\
									"?????:\t\t\t\t%d ???\n"\
									"??????? ?? ????? ?????:\t%d ???",
									transfer_id,
									transfer_sum,
									GetPlayerBankMoney(playerid)
								);
								Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{99FF00}??????? ????????", fmt_str, "???????", "");

								return PlayerPlaySound(playerid, 1054, 0.0, 0.0, 0.0);
							}
							else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 11)");
						}
						else SendClientMessage(playerid, 0xFF6600FF, "?? ???????? ?????????? ????? ???????????? ?????");
					}
					ShowPlayerATMTransfer(playerid);
				}
				else ShowPlayerATMDialog(playerid);
			}
			case DIALOG_ATM_TICKET_SELECT:
			{
				if(response)
				{
					switch(listitem + 1)
					{
						case 1:
						{
							new fmt_text[1024],
								query[90],
								Cache: result,
								rows;

							mysql_format(mysql, query, sizeof query, "SELECT * FROM tickets WHERE uid=%d AND status=0", GetPlayerAccountID(playerid));
							result = mysql_query(mysql, query, true);

							rows = cache_num_rows();

							ClearPlayerListitemValues(playerid);

							if(rows)
							{
								for(new idx; idx < rows; idx ++)
								{
									new reason[64];

									SetPlayerListitemValue(playerid, idx, cache_get_field_content_int(idx, "id"));

									cache_get_field_content(idx, "description", reason);

									format(query, sizeof query, "#%d\t%d ???.\t%s\n", cache_get_field_content_int(idx, "id"),
									cache_get_field_content_int(idx, "amount"), reason);

									strcat(fmt_text, query);
								}
							}
							else format(fmt_text, sizeof fmt_text, "? ??? ??? ???????????? ???????");

							cache_delete(result);

							Dialog
							(
								playerid, DIALOG_ATM_TICKET_LIST, DIALOG_STYLE_LIST,
								"{FFCD00}?????? ???????",
								fmt_text,
								"?????", "??????"
							);
						}
						case 2:
						{
							Dialog
							(
								playerid, DIALOG_ATM_TICKET_PAY, DIALOG_STYLE_INPUT,
								"{FFCD00}?????? ??????",
								"{FFFFFF}??????? ????? ??????, ???????\n"\
								"?? ?????? ?? ????????:",
								"?????", "??????"
							);
						}
					}
				}
				else ShowPlayerATMDialog(playerid);
			}
			case DIALOG_ATM_TICKET_LIST:
			{
				if(response)
				{
					new ticketid = GetPlayerListitemValue(playerid, listitem);

					if(ticketid) PayTicket(playerid, ticketid);
				}

				ShowPlayerATMDialog(playerid);
			}
			case DIALOG_ATM_TICKET_PAY:
			{
				if(response)
				{
					new ticketid = strval(inputtext);

					PayTicket(playerid, ticketid);
				}

				ShowPlayerATMDialog(playerid);
			}
			case DIALOG_ATM_CHARITY:
			{
				if(response)
				{
					new put_sum = strval(inputtext);
					if(put_sum > 0 && IsNumeric(inputtext))
					{
						if(GetPlayerMoneyEx(playerid) >= put_sum)
						{
							new fmt_str[85];
							format(fmt_str, sizeof fmt_str, "INSERT INTO charity (uid,money,time) VALUES (%d,%d,%d)", GetPlayerAccountID(playerid), put_sum, gettime());
							mysql_query(mysql, fmt_str, false);

							GivePlayerMoneyEx(playerid, -put_sum, "???????????????????", true, true);

							format(fmt_str, sizeof fmt_str, "?? ??????? ????????????? ? ??????? %d ??????", put_sum);
							SendClientMessage(playerid, 0x3399FFFF, fmt_str);

							UpdateCharity();
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ?????");
							ShowPlayerATMCharityDialog(playerid);
						}
					}
					else ShowPlayerATMCharityDialog(playerid);
				}
			}
			// -----------------------------------------------------------------
			
			case DIALOG_PAY_FOR_RENT:
			{
				if(response)
				{
					new buffer = -1;
					switch(listitem + 1)
					{
						case 1: // ????????? ?? ???
						{
							buffer = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
							if(buffer != -1)
							{
								ShowPlayerHousePayForRent(playerid);
								return 1;
							}
							else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????");
						}
						case 2: // ???????? ?????? ???????
						{
							buffer = GetPlayerBusiness(playerid);
							if(buffer != -1)
							{
								ShowPlayerBusinessPayForRent(playerid);
								return 1;
							}
							else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???????");
						}
						case 3: // ???????? ?????? ???
						{
							buffer = GetPlayerFuelStation(playerid);
							if(buffer != -1)
							{
								ShowPlayerFuelStationPayForRent(playerid);
								return 1;
							}
							else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????");
						}
						case 4: // ??????? ????? ?? ?????????
						{
						    new fmt_text[640],
					        Cache: result,
					        id;

							mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM return_money WHERE uid='%d' AND status=0", GetPlayerAccountID(playerid));
						    result = mysql_query(mysql, fmt_text, true);

						    new rows = cache_num_rows();

						    if(!rows)
						        SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ????? ??????? ??? ?????? ???????");

						    else
						    {

						        new query[60],
						            money,
						            description[64];

						        format(fmt_text, sizeof fmt_text, "");

						        for(new i = 0; i < rows; i ++)
						        {
						            id = cache_get_field_content_int(i, "id");
						            money = cache_get_field_content_int(i, "money");
						            cache_get_field_content(i, "description", description);

						            format(query, sizeof query, "{FFFFFF}%d.$ %d {32a44b}(%s)\n", i + 1, money, description);
						            strcat(fmt_text, query);

						            SetPlayerListitemValue(playerid, i, id);
						        }

						        Dialog
						        (
						            playerid, DIALOG_RETURN_MONEY, DIALOG_STYLE_LIST,
						            "??????? ?????",
						            fmt_text,
						            "???????", "???????"
						        );
						    }

						    return cache_delete(result);
						}
					}
					ShowPlayerPayForRentDialog(playerid);
				}
			}
			
			case DIALOG_PAY_FOR_RENT_FUEL_ST:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						new days = strval(inputtext);
						if(days > 0 && IsNumeric(inputtext))
						{
							new fmt_str[128 + 1];

							new time = gettime();
							new rent_time = GetFuelStationData(stationid, FS_RENT_DATE);

							new rent_days = GetElapsedTime(rent_time, time, CONVERT_TIME_TO_DAYS);
							new rent_price = GetFuelStationData(stationid, FS_IMPROVEMENTS) < 4 ? GetFuelStationData(stationid, FS_RENT_PRICE) : GetFuelStationData(stationid, FS_RENT_PRICE) / 2;

							new total_price = rent_price * days;
							if((rent_days + days) <= 30)
							{
								if(GetPlayerBankMoney(playerid) >= total_price)
								{
									rent_time = (rent_time - (rent_time % 86400)) + (days * 86400);

									format(fmt_str, sizeof fmt_str, "UPDATE accounts a,fuel_stations f SET a.bank=%d,f.rent_time=%d WHERE a.id=%d AND f.id=%d", GetPlayerBankMoney(playerid)-total_price, rent_time, GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
									mysql_query(mysql, fmt_str, false);

									if(!mysql_errno())
									{
										AddPlayerData(playerid, P_BANK, -, total_price);
										SetFuelStationData(stationid, FS_RENT_DATE, rent_time);

										format(fmt_str, sizeof fmt_str, "? ??????????? ????? ??ù?? {3399FF}%d ???", total_price);
										SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

										format(fmt_str, sizeof fmt_str, "?? ??????? ???????? ?????? ??? ??? ?? {3399FF}%d ????", days);
										SendClientMessage(playerid, 0x66CC00FF, fmt_str);
									}
								}
								else
								{
									SendClientMessage(playerid, 0xB5B500FF, "?? ???????? ?????????? ????? ?? ??????? ????? ??ù ??????");

									format(fmt_str, sizeof fmt_str, "??ù ????????ù ?????? ?? %d ???? ?????????? %d ???", days, total_price);
									SendClientMessage(playerid, 0x999999FF, fmt_str);
								}
							}
							else SendClientMessage(playerid, 0xB5B500FF, "?? ?? ?????? ???????? ?? ?????? ?????? ??? ?? 30 ????");
						}
						ShowPlayerFuelStationPayForRent(playerid);
					}
					else ShowPlayerPayForRentDialog(playerid);
				}
			}
			case DIALOG_PAY_FOR_RENT_BIZ:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						new days = strval(inputtext);
						if(days > 0 && IsNumeric(inputtext))
						{
							new fmt_str[128 + 1];

							new time = gettime();
							new rent_time = GetBusinessData(businessid, B_RENT_DATE);

							new rent_days = GetElapsedTime(rent_time, time, CONVERT_TIME_TO_DAYS);
							new rent_price = GetBusinessData(businessid, B_IMPROVEMENTS) < 3 ? GetBusinessData(businessid, B_RENT_PRICE) : GetBusinessData(businessid, B_RENT_PRICE) / 2;

							new total_price = rent_price * days;
							if((rent_days + days) <= 30)
							{
								if(GetPlayerBankMoney(playerid) >= total_price)
								{
									rent_time = (rent_time - (rent_time % 86400)) + (days * 86400);

									format(fmt_str, sizeof fmt_str, "UPDATE accounts a,business b SET a.bank=%d,b.rent_time=%d WHERE a.id=%d AND b.id=%d", GetPlayerBankMoney(playerid)-total_price, rent_time, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
									mysql_query(mysql, fmt_str, false);

									if(!mysql_errno())
									{
										AddPlayerData(playerid, P_BANK, -, total_price);
										SetBusinessData(businessid, B_RENT_DATE, rent_time);

										format(fmt_str, sizeof fmt_str, "? ??????????? ????? ??ù?? {3399FF}%d ???", total_price);
										SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

										format(fmt_str, sizeof fmt_str, "?? ??????? ???????? ?????? ??????? ??? ?? {3399FF}%d ????", days);
										SendClientMessage(playerid, 0x66CC00FF, fmt_str);
									}
								}
								else
								{
									SendClientMessage(playerid, 0xB5B500FF, "?? ???????? ?????????? ????? ?? ??????? ????? ??ù ??????");

									format(fmt_str, sizeof fmt_str, "??ù ????????ù ?????? ?? %d ???? ?????????? %d ???", days, total_price);
									SendClientMessage(playerid, 0x999999FF, fmt_str);
								}
							}
							else SendClientMessage(playerid, 0xB5B500FF, "?? ?? ?????? ???????? ?? ?????? ?????? ??? ?? 30 ????");
						}
						ShowPlayerBusinessPayForRent(playerid);
					}
					else ShowPlayerPayForRentDialog(playerid);
				}
			}
			case DIALOG_PAY_FOR_RENT_HOUSE:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
				if(houseid != -1)
				{
					if(response)
					{
						new days = strval(inputtext);
						if(days > 0 && IsNumeric(inputtext))
						{
							new fmt_str[128 + 1];

							new time = gettime();
							new rent_time = GetHouseData(houseid, H_RENT_DATE);

							new rent_days = GetElapsedTime(rent_time, time, CONVERT_TIME_TO_DAYS);
							new rent_price = GetHouseData(houseid, H_IMPROVEMENTS) < 4 ? GetHouseData(houseid, H_RENT_PRICE) : GetHouseData(houseid, H_RENT_PRICE) / 2;

							new total_price = rent_price * days;
							if((rent_days + days) <= 30)
							{
								if(GetPlayerBankMoney(playerid) >= total_price)
								{
									rent_time = (rent_time - (rent_time % 86400)) + (days * 86400);

									format(fmt_str, sizeof fmt_str, "UPDATE accounts a,houses h SET a.bank=%d,h.rent_time=%d WHERE a.id=%d AND h.id=%d", GetPlayerBankMoney(playerid)-total_price, rent_time, GetPlayerAccountID(playerid), GetHouseData(houseid, H_SQL_ID));
									mysql_query(mysql, fmt_str, false);

									if(!mysql_errno())
									{
										AddPlayerData(playerid, P_BANK, -, total_price);
										SetHouseData(houseid, H_RENT_DATE, rent_time);

										format(fmt_str, sizeof fmt_str, "? ??????????? ????? ??ù?? {3399FF}%d ???", total_price);
										SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

										format(fmt_str, sizeof fmt_str, "?? ??????? ???????? ??? ??? ?? {3399FF}%d ????", days);
										SendClientMessage(playerid, 0x66CC00FF, fmt_str);
									}
								}
								else
								{
									SendClientMessage(playerid, 0xB5B500FF, "?? ???????? ?????????? ????? ?? ??????? ????? ??ù ??????");

									format(fmt_str, sizeof fmt_str, "??ù ????????ù ?????? ?? %d ???? ?????????? %d ???", days, total_price);
									SendClientMessage(playerid, 0x999999FF, fmt_str);
								}
							}
							else SendClientMessage(playerid, 0xB5B500FF, "?? ?? ?????? ???????? ?? ?????? ?????? ??? ?? 30 ????");
						}
						ShowPlayerHousePayForRent(playerid);
					}
					else ShowPlayerPayForRentDialog(playerid);
				}
			}
			case DIALOG_RETURN_MONEY:
            {
                if(response)
                {
                    new idx = GetPlayerListitemValue(playerid, listitem);

                    new fmt_text[640],
                        Cache: result;

                    mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM return_money WHERE id='%d'", idx);
                    result = mysql_query(mysql, fmt_text, true);

                    new rows = cache_num_rows();

                    if(!rows)
                        SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ????? ??????? ??? ?????? ???????");

                    else
                    {

                        new query[60],
                            money,
                            description[64];

                        money = cache_get_field_content_int(0, "money");
                        cache_get_field_content(0, "description", description);

                        format(query, sizeof query, "??? ???? ?????????? {FFFFFF}$%d (%s)", money, description);
                        SendClientMessage(playerid, 0x32a44bFF, query);

                        GivePlayerMoneyEx(playerid, money, "??????? ?????", true, true);

                        mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE return_money SET status=1 WHERE id='%d'", idx);
                        result = mysql_query(mysql, fmt_text, true);
                    }

                    cache_delete(result);
                }
            }
			// -----------------------------------------------------------------
			case DIALOG_BANK:
			{
				if(response)
				{
					switch(listitem + 1)
					{
						case 1:
						{
							ShowPlayerBankAccounts(playerid);
						}
						case 2:
						{
							Dialog
							(
								playerid, DIALOG_BANK_CREATE_ACCOUNT, DIALOG_STYLE_INPUT,
								"{FFCD00}???????? ?????? ?????",
								"{FFFFFF}??????? ???????? ??ù ?????? ?????.\n"\
								"???????????ù ????? 20 ????????:",
								"??", "??????"
							);
						}
					}
				}
			}
			case DIALOG_BANK_ACCOUNTS:
			{
				if(response)
				{
					switch(listitem)
					{
						case 0: ShowPlayerATMDialog(playerid);
						case 1..(MAX_BANK_ACCOUNTS):
						{
							new accountid = GetPlayerListitemValue(playerid, listitem - 1);
							if(IsValidBankAccount(playerid, accountid))
							{
								SetPlayerUseListitem(playerid, accountid);
								Dialog
								(
									playerid, DIALOG_BANK_ACCOUNT_LOGIN, DIALOG_STYLE_PASSWORD,
									"{FFCD00}??????????ù",
									"{FFFFFF}??????? PIN-??? ?????:",
									"??????", "??????"
								);
							}
						}
					}
				}
				else ShowPlayerBankDialog(playerid);
			}
			case DIALOG_BANK_ACCOUNT_LOGIN:
			{
				if(response)
				{
					new accountid = GetPlayerUseListitem(playerid);
					if(IsValidBankAccount(playerid, accountid))
					{
						new len = strlen(inputtext);
						new pin_len = strlen(GetBankAccountData(playerid, accountid, BA_PIN_CODE));
						if(!strcmp(GetBankAccountData(playerid, accountid, BA_PIN_CODE), inputtext, false) && pin_len && len)
						{
							ShowPlayerBankAccountOperation(playerid);
						}
						else
						{
							Dialog
							(
								playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
								"{FF9900}??????",
								"{FFFFFF}?? ????????? ?????? ??? ????? PIN-????",
								"???????", ""
							);
						}
					}
				}
			}
			case DIALOG_BANK_ACCOUNT_OPERATION:
			{
				if(response)
				{
					new accountid = GetPlayerUseListitem(playerid);
					if(IsValidBankAccount(playerid, accountid))
					{
						switch(listitem + 1)
						{
							case 1: // ?????????ù ? ?????
							{
								UpdateBankAccountData(playerid, accountid);

								new fmt_str[128];
								format
								(
									fmt_str, sizeof fmt_str,
									"{ffff00}|{FFFFFF}????? ?????:{ffff00}\t\t%d\n"\
									"{ffff00}|{FFFFFF}???????????? ?????:{ffff00}\t\"%s\"\n"\
									"{ffff00}|{FFFFFF}?????ù??? ?????:{ffff00}%d ???.",
									GetBankAccountData(playerid, accountid, BA_ID),
									GetBankAccountData(playerid, accountid, BA_NAME),
									GetBankAccountData(playerid, accountid, BA_BALANCE)
								);
								Dialog(playerid, DIALOG_BANK_ACCOUNT_INFO, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ?????????ù", fmt_str, "?????", "");
							}
							case 2: // ??????ù ????????
							{
								ShowPlayerBankAccountLog(playerid, GetBankAccountData(playerid, accountid, BA_ID));
							}
							case 3: // ??ù?? ??????
							{
								Dialog
								(
									playerid, DIALOG_BANK_ACCOUNT_TAKE_MONEY, DIALOG_STYLE_INPUT,
									"{FFCD00}??ù?? ??????",
									"{FFFFFF}??????? ?????:",
									"??ù??", "??????"
								);
							}
							case 4: // ???????? ??????
							{
								Dialog
								(
									playerid, DIALOG_BANK_ACCOUNT_PUT_MONEY, DIALOG_STYLE_INPUT,
									"{FFCD00}???????? ??????",
									"{FFFFFF}??????? ?????:",
									"????????", "??????"
								);
							}
							case 5: // ????????? ?? ?????? ????
							{
								if(GetPlayerLevel(playerid) >= 2)
								{
									Dialog
									(
										playerid, DIALOG_BANK_ACCOUNT_TRANSFER_1, DIALOG_STYLE_INPUT,
										"{FFCD00}??????? ???????",
										"{FFFFFF}??????? ????? ?????, ?? ???????\n"\
										"?????? ??????????? ???????:",
										"?????", "??????"
									);
								}
								else SendClientMessage(playerid, 0x999999FF, "??????? ????? ???????? ?????? ?? 2 ?????ù");
							}
							case 6: // ????????????? ????
							{
								Dialog
								(
									playerid, DIALOG_BANK_ACCOUNT_CHANGE_NAME, DIALOG_STYLE_INPUT,
									"{FFCD00}?????????????? ?????",
									"{FFFFFF}??????? ????? ???????? ??ù ????? ?????.\n"\
									"???????????ù ????? 20 ????????:",
									"??", "??????"
								);
							}
							case 7: // ???????? PIN-???
							{
								Dialog
								(
									playerid, DIALOG_BANK_ACCOUNT_CHANGE_PIN, DIALOG_STYLE_INPUT,
									"{FFCD00}????????? PIN-????",
									"{FFFFFF}??????? ????? PIN-???.\n"\
									"????? ?? 4 ?? 8 ????:",
									"??", "??????"
								);
							}
						}
					}
				}
				else ShowPlayerBankDialog(playerid);
			}
			case DIALOG_BANK_ACCOUNT_INFO:
			{
				ShowPlayerBankAccountOperation(playerid);
			}
			case DIALOG_BANK_ACCOUNT_TAKE_MONEY:
			{
				new accountid = GetPlayerUseListitem(playerid);
				if(response)
				{
					if(IsValidBankAccount(playerid, accountid))
					{
						new take_sum = strval(inputtext);
						if(take_sum > 0 && IsNumeric(inputtext))
						{
							UpdateBankAccountData(playerid, accountid);

							new fmt_str[155];
							new balance = GetBankAccountData(playerid, accountid, BA_BALANCE);

							if(balance >= take_sum)
							{
								format(fmt_str, sizeof fmt_str, "UPDATE accounts a,bank_accounts ba SET a.money=%d,ba.balance=ba.balance - %d WHERE a.id=%d AND ba.id=%d", GetPlayerMoneyEx(playerid)+take_sum, take_sum, GetPlayerAccountID(playerid), GetBankAccountData(playerid, accountid, BA_ID));
								mysql_query(mysql, fmt_str, false);

								if(!mysql_errno())
								{
									GivePlayerMoneyEx(playerid, take_sum, "??ù??? ? ????. ????? (????)", false, true);
									SetBankAccountData(playerid, accountid, BA_BALANCE, balance - take_sum);

									format(fmt_str, sizeof fmt_str, "- ??ù??? ???????? %d ???", take_sum);
									BankAccountLog(playerid, GetBankAccountData(playerid, accountid, BA_ID), fmt_str);

									format
									(
										fmt_str, sizeof fmt_str,
										"{FFFFFF}????:\t\t?%d\n"\
										"?? ??ù??:\t{FF9900}%d ???\n"\
										"{FFFFFF}???????:\t%d ???",
										GetBankAccountData(playerid, accountid, BA_ID),
										take_sum,
										GetBankAccountData(playerid, accountid, BA_BALANCE)
									);
									return Dialog(playerid, DIALOG_BANK_ACCOUNT_INFO, DIALOG_STYLE_MSGBOX, "{3399FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
							}
							else
							{
								format(fmt_str, sizeof fmt_str, "???????????? ???????. ù?????? ?????? ????? ?%d: {009966}%d ???", GetBankAccountData(playerid, accountid, BA_ID), balance);
								SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);
							}
						}

						Dialog
						(
							playerid, DIALOG_BANK_ACCOUNT_TAKE_MONEY, DIALOG_STYLE_INPUT,
							"{FFCD00}??ù?? ??????",
							"{FFFFFF}??????? ?????:",
							"??ù??", "??????"
						);
					}
				}
				else ShowPlayerBankAccountOperation(playerid);
			}
			case DIALOG_BANK_ACCOUNT_PUT_MONEY:
			{
				new accountid = GetPlayerUseListitem(playerid);
				if(response)
				{
					if(IsValidBankAccount(playerid, accountid))
					{
						new put_sum = strval(inputtext);
						if(put_sum > 0 && IsNumeric(inputtext))
						{
							UpdateBankAccountData(playerid, accountid);

							new fmt_str[155];
							new money = GetPlayerMoneyEx(playerid);
							new balance = GetBankAccountData(playerid, accountid, BA_BALANCE);

							if(money >= put_sum)
							{
								format(fmt_str, sizeof fmt_str, "UPDATE accounts a,bank_accounts ba SET a.money=%d,ba.balance=ba.balance + %d WHERE a.id=%d AND ba.id=%d", money-put_sum, put_sum, GetPlayerAccountID(playerid), GetBankAccountData(playerid, accountid, BA_ID));
								mysql_query(mysql, fmt_str, false);

								if(!mysql_errno())
								{
									GivePlayerMoneyEx(playerid, -put_sum, "?????????? ????. ????? (????)", false, true);
									SetBankAccountData(playerid, accountid, BA_BALANCE, balance + put_sum);

									format(fmt_str, sizeof fmt_str, "+ ?????????? ?? ????? %d ???", put_sum);
									BankAccountLog(playerid, GetBankAccountData(playerid, accountid, BA_ID), fmt_str);

									format
									(
										fmt_str, sizeof fmt_str,
										"{FFFFFF}????:\t\t\t?%d\n"\
										"?? ????????:\t{00CC00}%d ???\n"\
										"{FFFFFF}???????? ??????:\t%d ???",
										GetBankAccountData(playerid, accountid, BA_ID),
										put_sum,
										GetBankAccountData(playerid, accountid, BA_BALANCE)
									);
									return Dialog(playerid, DIALOG_BANK_ACCOUNT_INFO, DIALOG_STYLE_MSGBOX, "{3399FF}???????ù ????????? ???????", fmt_str, "????????ù", "");
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 09)");
							}
							else SendClientMessage(playerid, 0xFFFFFFFF, "???????????? ???????");
						}

						Dialog
						(
							playerid, DIALOG_BANK_ACCOUNT_PUT_MONEY, DIALOG_STYLE_INPUT,
							"{FFCD00}???????? ??????",
							"{FFFFFF}??????? ?????:",
							"????????", "??????"
						);
					}
				}
				else ShowPlayerBankAccountOperation(playerid);
			}
			case DIALOG_BANK_ACCOUNT_TRANSFER_1:
			{
				new accountid = GetPlayerUseListitem(playerid);
				if(response)
				{
					if(IsValidBankAccount(playerid, accountid))
					{
						new transfer_id = strval(inputtext);
						if(transfer_id > 0 && IsNumeric(inputtext))
						{
							new fmt_str[64 + 1];
							new Cache: result;
							new rows;

							format(fmt_str, sizeof fmt_str, "SELECT id,name FROM bank_accounts WHERE id=%d LIMIT 1", transfer_id);
							result = mysql_query(mysql, fmt_str);

							if((rows = cache_num_rows()))
							{
								SetPlayerBankTransfer(playerid, BT_ID, cache_get_row_int(0, 0));
								cache_get_row(0, 1, g_player_bank_transfer[playerid][BT_NAME], mysql, 21);
							}
							cache_delete(result);

							if(rows)
							{
								return ShowPlayerBankAccountTransfer(playerid, accountid);
							}
							else SendClientMessage(playerid, 0xFF6600FF, "????? ? ????? ??????? ?? ??????????");
						}

						Dialog
						(
							playerid, DIALOG_BANK_ACCOUNT_TRANSFER_1, DIALOG_STYLE_INPUT,
							"{FFCD00}??????? ???????",
							"{FFFFFF}??????? ????? ?????, ?? ???????\n"\
							"?????? ??????????? ???????:",
							"?????", "??????"
						);
					}
				}
				else ShowPlayerBankAccountOperation(playerid);
			}
			case DIALOG_BANK_ACCOUNT_TRANSFER_2:
			{
				new accountid = GetPlayerUseListitem(playerid);
				if(response)
				{
					if(IsValidBankAccount(playerid, accountid))
					{
						new transfer_sum = strval(inputtext);
						new transfer_id = GetPlayerBankTransfer(playerid, BT_ID);

						if(transfer_sum > 0 && IsNumeric(inputtext))
						{
							UpdateBankAccountData(playerid, accountid);

							new balance = GetBankAccountData(playerid, accountid, BA_BALANCE);
							if(balance >= transfer_sum)
							{
								new fmt_str[160];

								if(GetBankAccountData(playerid, accountid, BA_ID) != transfer_id)
								{
									format(fmt_str, sizeof fmt_str, "UPDATE bank_accounts SET balance=balance-%d WHERE id=%d LIMIT 1", transfer_sum, GetBankAccountData(playerid, accountid, BA_ID));
									mysql_query(mysql, fmt_str, false);

									format(fmt_str, sizeof fmt_str, "UPDATE bank_accounts SET balance=balance+%d WHERE id=%d LIMIT 1", transfer_sum, transfer_id);
									mysql_query(mysql, fmt_str, false);

									SetBankAccountData(playerid, accountid, BA_BALANCE, balance - transfer_sum);
								}
								format(fmt_str, sizeof fmt_str, "- ??????? %d ??? ?? ???? ?%d", transfer_sum, transfer_id);
								BankAccountLog(playerid, GetBankAccountData(playerid, accountid, BA_ID), fmt_str);

								format(fmt_str, sizeof fmt_str, "+ ??????? %d ??? ?? ????? ?%d", transfer_sum, GetBankAccountData(playerid, accountid, BA_ID));
								BankAccountLog(playerid, transfer_id, fmt_str);

								SetPlayerBankTransfer(playerid, BT_ID, 0);

								format
								(
									fmt_str, sizeof fmt_str,
									"{FFFFFF}?? ?????:\t\t\t?%d\n"\
									"?? ????:\t\t\t?%d\n"\
									"C???? ????????:\t\t{FF9900}%d ???\n"\
									"{FFFFFF}??????? ?? ????? ?????:\t{00CC66}%d ???",
									GetBankAccountData(playerid, accountid, BA_ID),
									transfer_id,
									transfer_sum,
									GetBankAccountData(playerid, accountid, BA_BALANCE)
								);
								Dialog(playerid, DIALOG_BANK_ACCOUNT_INFO, DIALOG_STYLE_MSGBOX, "{3399FF}??????? ??????? ????????", fmt_str, "????????ù", "");
							}
							else
							{
								SendClientMessage(playerid, 0xFF6600FF, "?? ????? ???????????? ??????? ??ù ????????");
								ShowPlayerBankAccountTransfer(playerid, accountid);
							}
						}
						else ShowPlayerBankAccountTransfer(playerid, accountid);
					}
				}
				else ShowPlayerBankAccountOperation(playerid);
			}
			case DIALOG_BANK_ACCOUNT_CHANGE_NAME:
			{
				new accountid = GetPlayerUseListitem(playerid);
				if(response)
				{
					if(IsValidBankAccount(playerid, accountid))
					{
						new len = strlen(inputtext);

						if(3 <= len <= 20)
						{
							if(!IsABadBankAccountName(inputtext))
							{
								new fmt_str[128];

								mysql_format(mysql, fmt_str, sizeof fmt_str, "UPDATE bank_accounts SET name='%e' WHERE id=%d LIMIT 1", inputtext, GetBankAccountData(playerid, accountid, BA_ID));
								mysql_query(mysql, fmt_str, false);

								if(!mysql_errno())
								{
									format(g_bank_account[playerid][accountid][BA_NAME], 21, "%s", inputtext);

									format(fmt_str, sizeof fmt_str, "* ?????????????? ????? ?? \"%s\"", inputtext);
									BankAccountLog(playerid, GetBankAccountData(playerid, accountid, BA_ID), fmt_str);

									format
									(
										fmt_str, sizeof fmt_str,
										"{FFFFFF}???? ??????? ????????????.\n"\
										"ù????? ?? ????? ???????? ??? ????????? \"%s\"",
										GetBankAccountData(playerid, accountid, BA_NAME)
									);
									return Dialog(playerid, DIALOG_BANK_ACCOUNT_INFO, DIALOG_STYLE_MSGBOX, "{FFCD00}??????????", fmt_str, "????????ù", "");
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 10)");
							}
							else
							{
								SendClientMessage(playerid, 0xFF6600FF, "???????????? ??????? ? ????? ????????");
								SendClientMessage(playerid, 0xFF6600FF, "????? ???????????? {FFCC15}??????? {FF6600}? {FFCC15}?????????? {FF6600}?????, ? ????? {FFCC15}?????");
							}
						}
						else SendClientMessage(playerid, 0xFF6600FF, "????? ???????ù ????? ????? ???? ?? {FFCC15}3 ?? 20 {FF6600}????????");

						Dialog
						(
							playerid, DIALOG_BANK_ACCOUNT_CHANGE_NAME, DIALOG_STYLE_INPUT,
							"{FFCD00}?????????????? ?????",
							"{FFFFFF}??????? ????? ???????? ??ù ????? ?????.\n"\
							"???????????ù ????? 20 ????????:",
							"??", "??????"
						);
					}
				}
				else ShowPlayerBankAccountOperation(playerid);
			}
			case DIALOG_BANK_ACCOUNT_CHANGE_PIN:
			{
				new accountid = GetPlayerUseListitem(playerid);
				if(response)
				{
					if(IsValidBankAccount(playerid, accountid))
					{
						new len = strlen(inputtext);

						if(4 <= len <= 8 && IsNumeric(inputtext))
						{
							new fmt_str[128];

							mysql_format(mysql, fmt_str, sizeof fmt_str, "UPDATE bank_accounts SET pin='%e' WHERE id=%d LIMIT 1", inputtext, GetBankAccountData(playerid, accountid, BA_ID));
							mysql_query(mysql, fmt_str, false);

							if(!mysql_errno())
							{
								format(g_bank_account[playerid][accountid][BA_PIN_CODE], 9, "%s", inputtext);
								BankAccountLog(playerid, GetBankAccountData(playerid, accountid, BA_ID), "* ????????? PIN-????");

								format
								(
									fmt_str, sizeof fmt_str,
									"{FFFFFF}PIN-??? ??????? ???????.\n"\
									"??????????? ??????? ????? (F8) ????? ?? ?????? ???: {CCFF00}%s",
									GetBankAccountData(playerid, accountid, BA_PIN_CODE)
								);
								return Dialog(playerid, DIALOG_BANK_ACCOUNT_INFO, DIALOG_STYLE_MSGBOX, "{FFCD00}????????? PIN", fmt_str, "????????ù", "");
							}
							else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 10)");
						}

						Dialog
						(
							playerid, DIALOG_BANK_ACCOUNT_CHANGE_PIN, DIALOG_STYLE_INPUT,
							"{FFCD00}????????? PIN-????",
							"{FFFFFF}??????? ????? PIN-???.\n"\
							"????? ?? 4 ?? 8 ????:",
							"??", "??????"
						);
					}
				}
				else ShowPlayerBankAccountOperation(playerid);
			}
			case DIALOG_BANK_CREATE_ACCOUNT:
			{
				if(response)
				{
					new len = strlen(inputtext);
					if(3 <= len <= 20)
					{
						if(!IsABadBankAccountName(inputtext))
						{
							new query[128];
							new Cache: result;
							new total_accounts;

							format(query, sizeof query, "SELECT COUNT(*) FROM bank_accounts WHERE uid=%d", GetPlayerAccountID(playerid));
							result = mysql_query(mysql, query);

							total_accounts = cache_get_row_int(0, 0);
							cache_delete(result);

							if(total_accounts < MAX_BANK_ACCOUNTS)
							{
								mysql_format(mysql, query, sizeof query, "INSERT INTO bank_accounts (uid,name,reg_time) VALUES (%d,'%e',%d)", GetPlayerAccountID(playerid), inputtext, gettime());
								mysql_query(mysql, query, false);

								if(!mysql_errno())
								{
									Dialog
									(
										playerid, DIALOG_BANK_CREATED_ACCOUNT, DIALOG_STYLE_MSGBOX,
										"{FFCD00}???? ??????",
										"{FFFFFF}?? ??????? ????? ???? ? ?????.\n\n"\
										"??ù ??????? ? ???? ??????????? PIN-??? {00FF66}0000{FFFFFF}. ????? ?????\n"\
										"?????ù?????? ??????????? ???????? ??? ?? ????? ???????.\n"\
										"??? ??????? ???????? ???? ?? ???????????????????? ???????.",
										"??????", ""
									);
								}
							}
							else Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FFCD00}????? ??????", "{FFFFFF}????? ??????? ?? ????? ?????? ?????????? ??????", "??", "");
						}
						else
						{
							Dialog
							(
								playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
								"{FF3300}??????",
								"{FFFFFF}???????ù ?????????. ???????????? ??????? ? ???????? ?????\n"\
								"????? ???????????? {FFCC15}??????? {FFFFFF}? {FFCC15}?????????? {FFFFFF}?????, ? ????? {FFCC15}?????",
								"?????", ""
							);
						}
					}
					else
					{
						Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							"{FF3300}??????",
							"{FFFFFF}????? ???????ù ????? ????? ???? ?? {FFCC15}3 ?? 20 {FFFFFF}????????",
							"???????", ""
						);
					}
				}
				else ShowPlayerBankDialog(playerid);
			}
			case DIALOG_BANK_CREATED_ACCOUNT:
			{
				ShowPlayerBankDialog(playerid);
			}
			// -----------------------------------------------------------------
			case DIALOG_PHONE_CALL:
			{
				if(response)
				{
					new number = strval(inputtext);

					if(number >= 0 && strlen(inputtext))
					{
						new params[16];
						valstr(params, number);

						callcmd::call(playerid, params);
					}
					else SendClientMessage(playerid, 0xCECECEFF, "?????? ??????");
				}
			}
			case DIALOG_PHONE_CALL_BALANCE:
			{
				SetPlayerPhoneUseState(playerid, false);
			}
			// -----------------------------------------------------------------
			case DIALOG_ACTION:
			{
				if(response)
				{
					if(1 <= (listitem+1) <= 4)
					{
						new targetid = GetPlayerData(playerid, P_TARGET_ID);

						if(IsPlayerConnected(targetid) && IsPlayerLogged(targetid))
						{
							if(IsPlayerInRangeOfPlayer(playerid, targetid, 10.0))
							{
								new params[5];
								valstr(params, targetid);

								new cmd[4][16] = {"cmd_hi", "cmd_pass", "cmd_lic", "cmd_skill"};
								CallLocalFunction(cmd[listitem], "ds", playerid, params);
							}
							else SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");
						}
						else SendClientMessage(playerid, 0x999999FF, "????? ????? ?? ????");
					}
					SetPlayerData(playerid, P_TARGET_ID, INVALID_PLAYER_ID);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_VIEV_JOBS_LIST:
			{
				if(response)
				{
					Dialog
					(
						playerid, DIALOG_JOIN_TO_JOB, DIALOG_STYLE_LIST,
						"{FFCD00}?????? ????????? ?????",
						"1. ???????? ????????\t\t{0099FF}2 ???????\n"\
						"2. ??????\t\t{0099FF}2 ???????\n"\
						"3. ???????????\t{0099FF}4 ???????\n"\
						"4. ??????????\t{0099FF}10 ???????",

						"???????", "??????"
					);
				}
			}
			case DIALOG_JOIN_TO_JOB:
			{
				if(response)
				{
					if(GetPlayerTeamEx(playerid) != 0)
						return SendClientMessage(playerid, 0x999999FF, ""USC"?? ?? ?????? ?????????ù ?? ??????, ?????ù?? ?? ???????");

					switch(listitem + 1)
					{
						case JOB_BUS_DRIVER:
						{
							if(GetPlayerLevel(playerid) < 2)
								return SendClientMessage(playerid, 0xCECECEFF, ""USC"????? ?????????ù ?? ?????? ???????ù ???????? ????????? 2 ???????");

							SendClientMessage(playerid, 0xFFFF00FF, ""SC"????????ù??! ?? ?????????? ?? ?????? ???????ù ????????");
							SendClientMessage(playerid, 0xFFFFFFFF, ""SC"???ù??? ????????? ?????ù??ù ?? ???? ??????????ù?. ??????????? {0099FF}/gps {FFFFFF}????? ????? ????????? ? ???");
						}
						case JOB_KYRER:
						{
							if(GetPlayerLevel(playerid) < 2)
								return SendClientMessage(playerid, 0xCECECEFF, ""USC"????? ?????????ù ?? ?????? ???????, ????????? 2 ???????");

							SendClientMessage(playerid, 0xFFFF00FF, ""SC"????????ù??! ?? ?????????? ?? ?????? ???????");
							SendClientMessage(playerid, 0xFFFFFFFF, ""SC"??????????? {ffff00}/gps - ?? ??????{ffffff}, ????? ?????? ??????");
						}
						case JOB_MECHANIC:
						{
							if(GetPlayerLevel(playerid) < 4)
								return SendClientMessage(playerid, 0xCECECEFF, ""USC"????? ?????????ù ?? ?????? ???????????? ????????? 4 ???????");

							SendClientMessage(playerid, 0xFFFF00FF, ""SC"????????ù??! ?? ?????????? ?? ?????? ????????????");
							SendClientMessage(playerid, 0xFFFFFFFF, ""SC"????? ?????? ?????? ??????? ????????? ????????? ? ????? ??????. ??????????? {FF9900}/gps {FFFFFF}??? ?????????????");
							SendClientMessage(playerid, 0xFFFFFFFF, ""SC"???????: /getfuel - ???????? ???????; /fill - ????????? ?????????; /repair - ???????? ?????????");
						}
						case JOB_INK:
						{
							if(GetPlayerLevel(playerid) < 10)
								return SendClientMessage(playerid, 0xCECECEFF, ""USC"????? ?????????ù ?? ?????? ??????????? ????????? 10 ???????");

							SendClientMessage(playerid, 0xFFFF00FF, ""SC"????????ù??! ?? ?????????? ?? ?????? ???????????");
							SendClientMessage(playerid, 0xFFFFFFFF, ""SC"??????????? {FFFF00}/gps - ?? ?????? {FFFFFF}????? ?????? ??????");
							SendClientMessage(playerid, 0xFFFFFFFF, ""SC"?????????????? ?????????? ? ???????ù ?? ?????? ???????? ? ???????? ??????");
						}
						default:
							return 1;
					}
					new query[64];

					format(query, sizeof query, "UPDATE accounts SET job=%d WHERE id=%d LIMIT 1", listitem + 1, GetPlayerAccountID(playerid));
					mysql_query(mysql, query, false);

					if(!mysql_errno())
					{
						SetPlayerData(playerid, P_JOB, listitem + 1);
					}
					else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 14)");
				}
			}
			case DIALOG_END_JOB:
			{
				if(response)
					EndPlayerJob(playerid);
			}
			case DIALOG_BUS_RENT_CAR:
{
    if(response)
    {
        new vehicleid = GetPlayerVehicleID(playerid);
        new action_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
        new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

        if(GetPlayerMoneyEx(playerid) >= 180)
        {
            GivePlayerMoneyEx(playerid, -180, "?????? ????????", true, true);
            SetPlayerData(playerid, P_JOB_CAR, vehicleid);

            // ??????????? ????????? ??????
            new pickupid = playerPickup[playerid];

			
            new Float:x, Float:y, Float:z, Float:a;
            new rand = random(4);

            if(pickupid == buspick1)
            {
                x = buspick1_positions[rand][0];
                y = buspick1_positions[rand][1];
                z = buspick1_positions[rand][2];
                a = buspick1_positions[rand][3];
            }
            else if(pickupid == buspick2)
            {
                x = buspick2_positions[rand][0];
                y = buspick2_positions[rand][1];
                z = buspick2_positions[rand][2];
                a = buspick2_positions[rand][3];
            }
            else if(pickupid == buspick3)
            {
                x = buspick3_positions[rand][0];
                y = buspick3_positions[rand][1];
                z = buspick3_positions[rand][2];
                a = buspick3_positions[rand][3];
            }

            buses[playerid] = AddStaticVehicleEx(414, x, y, z, a, 6, 1, -1, 0, VEHICLE_ACTION_TYPE_BUS_DRIVER);
            PutPlayerInVehicle(playerid, buses[playerid], 0);

            Dialog
            (
                playerid, DIALOG_BUS_ROUTE_COST, DIALOG_STYLE_INPUT,
                "{FFCD00}????????? ???????",
                "{FFFFFF}??????? ????? ?????? ???????\n"\
                "??????? ???? ?? 0 ?? 100 ??????",
                "?????", "??????"
            );
        }
        else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ????? ????? ????????? ??????? ??????");
    }
}
			case DIALOG_BUS_ROUTE_COST:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);

					new action_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
					new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

					if(action_type == VEHICLE_ACTION_TYPE_BUS_DRIVER && action_id == VEHICLE_ACTION_ID_NONE)
					{
						new route_cost = strval(inputtext);

						if(0 <= route_cost <= 100 && IsNumeric(inputtext))
						{
							SetPlayerData(playerid, P_JOB_TARIFF, route_cost);

							Dialog
							(
								playerid, DIALOG_BUS_ROUTE_SELECTION, DIALOG_STYLE_LIST,
								"{FFCD00}???????? ???????",
								g_bus_routes_list,
								"??", "??????"
							);
						}
						else
						{
							Dialog
							(
								playerid, DIALOG_BUS_ROUTE_COST, DIALOG_STYLE_INPUT,
								"{FFCD00}????????? ???????",
								"{FFFFFF}??????? ????? ?????? ???????\n"\
								"??????? ???? ?? 0 ?? 100 ??????",
								"?????", "??????"
							);
						}
					}
				}
			}
			case DIALOG_BUS_ROUTE_SELECTION:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);

					new action_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
					new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

					if(action_type == VEHICLE_ACTION_TYPE_BUS_DRIVER && action_id == VEHICLE_ACTION_ID_NONE)
					{
						if(0 <= listitem <= sizeof g_bus_routes - 1)
						{
							SetPlayerData(playerid, P_BUS_ROUTE_STEP, 0);
							SetPlayerData(playerid, P_BUS_ROUTE, listitem);

							StartPlayerJob(playerid, JOB_BUS_DRIVER);
						}
					}
				}
			}
			case DIALOG_TAXI_RENT_CAR:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);

					new action_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
					new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

					if(action_type == VEHICLE_ACTION_TYPE_TAXI_DRIVER && action_id == VEHICLE_ACTION_ID_NONE)
					{
						if(GetPlayerMoneyEx(playerid) >= 200)
						{
							GivePlayerMoneyEx(playerid, -200, "?????? ?????", true, true);
							//SetVehicleData(vehicleid, V_ACTION_ID, true);

							SetPlayerData(playerid, P_JOB_CAR, vehicleid);
							return SendClientMessage(playerid, 0x66CC00FF, "??ù ????, ????? ?????? ?????? ???????? {FF9900}??????? ~k~~TOGGLE_SUBMISSIONS~");
						}
						else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ????? ????? ????????? ??????? ??????");
					}
				}
				RemovePlayerFromVehicle(playerid);
			}
			case DIALOG_TAXI_NAME:
			{
				if(response)
				{
					if(!(1 <= strlen(inputtext) <= 15))
					{
						Dialog
						(
							playerid, DIALOG_TAXI_NAME, DIALOG_STYLE_INPUT,
							"{FFCD00}???????? ?????",
							"{FFFFFF}?????????? ???????? ??ù ?????? ?????\n"\
							"???????????ù ????? 15 ????????\n\n"\
							"???? ?? ?? ?????? ???-?? ?????????ù\n"\
							"??????? ?????? \"??????????\"",
							"?????", "??????????"
						);
						return 1;
					}
					else format(g_player[playerid][P_JOB_SERVICE_NAME], 17, "%s\n", inputtext);
				}
				else g_player[playerid][P_JOB_SERVICE_NAME][0] = 0;

				Dialog
				(
					playerid, DIALOG_TAXI_TARIFF, DIALOG_STYLE_INPUT,
					"{FFCD00}????????? ????????",
					"{FFFFFF}??????? ????? ?? ???????? ????? ???????? ???? ?????\n"\
					"??? ????? ????? ????????ù ? ????????? ?????? 100 ? ???????\n"\
					"ù??????ù ?????? ????? ???? ?? 0 ?? 200 ??????",
					"??", "??????"
				);
			}
			case DIALOG_TAXI_TARIFF:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);

					new action_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
					new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

					if(action_type == VEHICLE_ACTION_TYPE_TAXI_DRIVER && action_id == VEHICLE_ACTION_ID_NONE)
					{
						new tariff = strval(inputtext);

						if(!(0 <= tariff <= 200) || !IsNumeric(inputtext))
						{
							Dialog
							(
								playerid, DIALOG_TAXI_TARIFF, DIALOG_STYLE_INPUT,
								"{FFCD00}????????? ????????",
								"{FFFFFF}??????? ????? ?? ???????? ????? ???????? ???? ?????\n"\
								"??? ????? ????? ????????ù ? ????????? ?????? 100 ? ???????\n"\
								"ù??????ù ?????? ????? ???? ?? 0 ?? 200 ??????",
								"??", "??????"
							);
							return 1;
						}
						else
						{
							SetPlayerData(playerid, P_JOB_TARIFF, tariff);
							StartPlayerJob(playerid, 6);
						}
					}
				}
				g_player[playerid][P_JOB_SERVICE_NAME][0] = 0;
			}
			case DIALOG_MECHANIC_RENT_CAR:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);

					new action_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
					new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

						if(GetPlayerMoneyEx(playerid) >= 180)
						{
							GivePlayerMoneyEx(playerid, -180, "?????? ??????????", true, true);
							mexs[playerid] = CreateVehicle(525,1856.6643,-110.4669,15.5701,205.9911,1,1, -1, 0, VEHICLE_ACTION_TYPE_MECHANIC); // Iaoaieee 1
							
							Dialog
								(
									playerid, DIALOG_MECHANIC_NAME, DIALOG_STYLE_INPUT,
									"{FFCD00}???????????",
									"{FFFFFF}??????? ???????? ??ù ????? ?????????,\n"\
									"??? ???????? ???? ??????",
									"??????", "??????"
								);
							PutPlayerInVehicle(playerid, mexs[playerid], 0);
							//return 1;//SendClientMessage(playerid, 0x66CC00FF, "??ù ????, ????? ?????? ?????? ???????????? {FF9900}??????? ~k~~TOGGLE_SUBMISSIONS~");
						}
						else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ????? ????? ????????? ??????? ??????");
				}
				RemovePlayerFromVehicle(playerid);
			}
			case DIALOG_MECHANIC_START_JOB:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);

					new action_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
					new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

					if(action_type == VEHICLE_ACTION_TYPE_MECHANIC && action_id == VEHICLE_ACTION_ID_NONE)
					{
						Dialog
						(
							playerid, DIALOG_MECHANIC_NAME, DIALOG_STYLE_INPUT,
							"{FFCD00}???????????",
							"{FFFFFF}??????? ???????? ??ù ????? ?????????,\n"\
							"??? ???????? ???? ??????",
							"??????", "??????"
						);
					}
				}
			}
			case DIALOG_MECHANIC_NAME:
			{
				if(response)
				{
					new len = strlen(inputtext);

					if(len)
					{
						if(!(1 <= len <= 15))
						{
							Dialog
							(
								playerid, DIALOG_MECHANIC_NAME, DIALOG_STYLE_INPUT,
								"{FFCD00}???????????",
								"{FFFFFF}??????? ???????? ??ù ????? ?????????,\n"\
								"??? ???????? ???? ??????",
								"??????", "??????"
							);
							return SendClientMessage(playerid, 0xCECECEFF, "??????? ??????? ???????? | 15 ???????? ????????");
						}
						else format(g_player[playerid][P_JOB_SERVICE_NAME], 17, "%s\n", inputtext);
					}
					else g_player[playerid][P_JOB_SERVICE_NAME][0] = 0;

					StartPlayerJob(playerid, JOB_MECHANIC);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_TRUCKER_RENT_CAR:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);

					new action_type = GetVehicleData(vehicleid, V_ACTION_TYPE);
					new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

					if(action_type == VEHICLE_ACTION_TYPE_TRUCKER && action_id == VEHICLE_ACTION_ID_NONE)
					{
						if(GetPlayerMoneyEx(playerid) >= 180)
						{
							GivePlayerMoneyEx(playerid, -180, "?????? ?????????", true, true);
							//SetVehicleData(vehicleid, V_ACTION_ID, true);

							SetPlayerData(playerid, P_JOB_CAR, vehicleid);
							return SendClientMessage(playerid, 0x66CC00FF, "??ù ????, ????? ?????? ?????? ????????????? {FF9900}??????? ~k~~TOGGLE_SUBMISSIONS~");
						}
						else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ????? ????? ????????? ??????? ??????");
					}
				}
				RemovePlayerFromVehicle(playerid);
			}
			case DIALOG_TRUCKER_START_JOB:
			{
				if(response)
				{
					StartPlayerJob(playerid, JOB_TRUCKER);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_PHONE_BOOK:
			{
				if(response && (0 <= listitem <= MAX_PHONE_BOOK_CONTACTS-1))
				{
					ShowPhoneBookOperation(playerid, PHONE_BOOK_OPERATION_OPTIONS, listitem);
				}
			}
			case DIALOG_PHONE_BOOK_OPTION:
			{
				new contactid = GetPlayerPhoneBookSelectContact(playerid);
				if(contactid != INVALID_PLAYER_ID)
				{
					if(response)
					{
						ShowPhoneBookOperation(playerid, listitem + 1, contactid);
					}
					else ShowPlayerPhoneBook(playerid);
				}
			}
			case DIALOG_PHONE_BOOK_SEND_SMS:
			{
				if(response)
				{
					new len = strlen(inputtext);
					if(len)
					{
						if(len < 65)
						{
							new contactid = GetPlayerPhoneBookSelectContact(playerid);
							new fmt_str[90];

							format(fmt_str, sizeof fmt_str, "%s %s", GetPlayerPhoneBook(playerid, contactid, PB_NUMBER), inputtext);
							callcmd::sms(playerid, fmt_str);
							return 1;
						}
						else SendClientMessage(playerid, 0xCECECEFF, "??????? ??????? ?????????");
					}
					else SendClientMessage(playerid, 0xCECECEFF, "??????? ????????? ??ù ????????");

					ShowPhoneBookOperation(playerid, PHONE_BOOK_OPERATION_SEND_SMS);
				}
				else ShowPhoneBookOperation(playerid, PHONE_BOOK_OPERATION_OPTIONS);
			}
			case DIALOG_PHONE_BOOK_CHANGE_NAME:
			{
				if(response)
				{
					if(3 <= strlen(inputtext) <= 20)
					{
						new contactid = GetPlayerPhoneBookSelectContact(playerid);
						new query[90];

						format(g_player_phone_book[playerid][contactid][PB_NAME], 21, "%s", inputtext);

						mysql_format(mysql, query, sizeof query, "UPDATE phone_books SET name='%e' WHERE id=%d LIMIT 1", inputtext, GetPlayerPhoneBook(playerid, contactid, PB_SQL_ID));
						mysql_query(mysql, query, false);

						SendClientMessage(playerid, 0x99CC33FF, "??ù ???????? ????????");
						ShowPlayerPhoneBook(playerid);
					}
					else ShowPhoneBookOperation(playerid, PHONE_BOOK_OPERATION_CHANGE_NAM);
				}
				else ShowPhoneBookOperation(playerid, PHONE_BOOK_OPERATION_OPTIONS);
			}
			case DIALOG_PHONE_BOOK_CHANGE_NUMBER:
			{
				if(response)
				{
					if(3 <= strlen(inputtext) <= 9 && strval(inputtext) > 0 && IsNumeric(inputtext))
					{
						if(!CheckPhoneBookUsedNumber(playerid, inputtext))
						{
							new contactid = GetPlayerPhoneBookSelectContact(playerid);
							new query[90];

							format(g_player_phone_book[playerid][contactid][PB_NUMBER], 10, "%s", inputtext);

							mysql_format(mysql, query, sizeof query, "UPDATE phone_books SET number='%e' WHERE id=%d LIMIT 1", inputtext, GetPlayerPhoneBook(playerid, contactid, PB_SQL_ID));
							mysql_query(mysql, query, false);

							SendClientMessage(playerid, 0x99CC33FF, "????? ???????? ???????");
							ShowPlayerPhoneBook(playerid);
						}
					}
					else ShowPhoneBookOperation(playerid, PHONE_BOOK_OPERATION_CHANGE_NUM);
				}
				else ShowPhoneBookOperation(playerid, PHONE_BOOK_OPERATION_OPTIONS);
			}
			case DIALOG_PHONE_BOOK_ADD_CONTACT:
			{
				if(response)
				{
					new player_name[20 + 1];
					GetPVarString(playerid, "add_contact_name", player_name, sizeof(player_name));

					if(!(3 <= strlen(inputtext) <= 9) || strval(inputtext) < 1 || !IsNumeric(inputtext))
					{
						new fmt_str[64 + 1];

						format(fmt_str, sizeof fmt_str, "{FFFFFF}??????? ????? ???????? ??ù ???????? %s", player_name);
						Dialog(playerid, DIALOG_PHONE_BOOK_ADD_CONTACT, DIALOG_STYLE_INPUT, "{FFCD00}?????????? ?????? ????????", fmt_str, "????????", "??????");

						return 1;
					}
					AddPhoneBookContact(playerid, player_name, inputtext);
				}
				DeletePVar(playerid, "add_contact_name");
			}
			// -----------------------------------------------------------------
			case DIALOG_MINER_BUY_METALL:
			{
				if(response)
				{
					new count = strval(inputtext);
					new metall = GetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL, R_AMOUNT);

					if(IsNumeric(inputtext))
					{
						if(metall >= count)
						{
							if(1 <= count <= 50)
							{
								if((GetPlayerData(playerid, P_METALL) + count) <= 20)
								{
									new sum = count * 15;
									if(GetPlayerMoneyEx(playerid) >= sum)
									{
										new fmt_str[80];

										format(fmt_str, sizeof fmt_str, "UPDATE accounts SET money=%d,metall=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-sum, GetPlayerData(playerid, P_METALL) + count, GetPlayerAccountID(playerid));
										mysql_query(mysql, fmt_str, false);

										if(!mysql_errno())
										{
											SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL, R_AMOUNT, metall - count);
											UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL);

											AddPlayerData(playerid, P_METALL, +, count);

											format(fmt_str, sizeof fmt_str, "?? ?????? %d ?? ?? %d ??????", count, count * 15);
											SendClientMessage(playerid, 0x3399FFFF, fmt_str);

											return GivePlayerMoneyEx(playerid, -sum, "??????? ?????????? ?? ?????", false, true);
										}
										else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 12)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "???????????? ????? ??ù ??????? ?????? ?????????? ??????????");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????? ?????? ? ????? ????? 20 ?? ??????????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "????? ?????? ?? 1 ?? 50 ?? ??????????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ????? ??? ?????? ?????????? ??????????");
					}
					ShowPlayerBuyMetalDialog(playerid);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_TEMP_JOB_LOADER_START:
			{
				if(response)
				{
					if(GetPlayerTempJob(playerid) == TEMP_JOB_NONE)
					{
						//TogglePlayerDynamicCP(playerid, help_info_CP, false);

						SetPlayerSkin(playerid, GetTempJobInfo(TEMP_JOB_LOADER, TJ_SKIN)[GetPlayerSex(playerid)]);
					//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_THIGH, 18635, A_OBJECT_BONE_RIGHT_THIGH, 0.2, -0.06, 0.1, 0.0, -90.0, 90.0, 1.0, 1.0, 1.0, 0);

						SetPlayerJobLoadItems(playerid, 0);
						SetPlayerTempJob(playerid, TEMP_JOB_LOADER);

						SetPlayerLoaderJobLoadCP(playerid);

						SendClientMessage(playerid, COR_SERVER, "[???????]: "c_server"?? ?????? ?????? ????????!");
						SendClientMessage(playerid, COR_SERVER, "[?????????ù]: "c_server"ù???? ???????? ????? ???????? {FF0000}??????? "c_server"????????!");
					}
				}
			}
			case DIALOG_TEMP_JOB_LOADER_END:
			{
				if(response)
				{
					EndPlayerTempJob(playerid, TEMP_JOB_LOADER);
				}
			}
			case DIALOG_TEMP_JOB_MINER_START:
			{
				if(response)
				{
					if(GetPlayerTempJob(playerid) == TEMP_JOB_NONE)
					{
					testrazdevstatus[playerid] = true;
						SetPlayerSkin(playerid, GetTempJobInfo(TEMP_JOB_MINER, TJ_SKIN)[GetPlayerSex(playerid)]);
				//		SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 18634, A_OBJECT_BONE_RIGHT_HAND, 0.07, 0.03, 0.04, 0.0, 270.0, 270.0, 1.5, 2.1, 1.8, 0);

						SetPlayerJobLoadItems(playerid, 0);
						SetPlayerTempJob(playerid, TEMP_JOB_MINER);

						SetPlayerTempJobState(playerid, TEMP_JOB_STATE_MINER_LOAD);
						SetPlayerMinerJobLoadCP(playerid);

						SendClientMessage(playerid, 0x3399FFFF, "?? ?????? ?????? ???????");
						SendClientMessage(playerid, 0x66CC00FF, "????? ????????????ù ???????? ???? ?? ?????????? ?????");
						SendClientMessage(playerid, 0x66CC00FF, "??????? ????? ???????? ?? ????? ??ù ??????????");
					}
				}
			}
			case DIALOG_TEMP_JOB_MINER_END:
			{
				if(response)
				{
				testrazdevstatus[playerid] = false;
					EndPlayerTempJob(playerid, TEMP_JOB_MINER);
				}
			}
			case DIALOG_TEMP_JOB_FACTORY_TRUCKER:
			{
				if(response)
				{
					new job = GetPlayerTempJob(playerid);

					switch(job)
					{
						case TEMP_JOB_NONE:
						{
							new skin = GetTempJobInfo(TEMP_JOB_FACTORY_TRUCKER, TJ_SKIN)[GetPlayerSex(playerid)];

							ClearAnimations(playerid);
							SetPlayerSkin(playerid, skin);

							if(GetPlayerSex(playerid))
					//		SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HEAD, 18638, A_OBJECT_BONE_HEAD, 0.16, 0.02, 0.0, 0.0, 0.0, 0.0, 1.0, 1.1, 1.12, 0);

							SetPlayerJobLoadItems(playerid, 0);
							SetPlayerTempJob(playerid, TEMP_JOB_FACTORY_TRUCKER);
							SetPlayerTempJobState(playerid, TEMP_JOB_STATE_NONE);

							SendClientMessage(playerid, 0x3399FFFF, "?? ?????? ?????? ? ?????? ???????? ??????");
							SendClientMessage(playerid, 0x66CC00FF, "??ù ????????ù ?????????? ?????????????? ??????????? ?ù??? ? ????");

							SetPlayerData(playerid, P_IN_JOB, true);
						}
						case TEMP_JOB_FACTORY_TRUCKER:
						{
							EndPlayerJob(playerid);
						}
					}
				}
			}
			case DIALOG_TEMP_JOB_FACTORY:
			{
				if(response)
				{
					new job = GetPlayerTempJob(playerid);

					switch(job)
					{
						case TEMP_JOB_NONE:
						{
							new skin = GetTempJobInfo(TEMP_JOB_FACTORY, TJ_SKIN)[GetPlayerSex(playerid)];
							if(!GetPlayerSex(playerid))
							{
								skin += random(2);
							}

							ClearAnimations(playerid);
							SetPlayerSkin(playerid, skin);
						//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HEAD, 18638, A_OBJECT_BONE_HEAD, 0.16, 0.02, 0.0, 0.0, 0.0, 0.0, 1.0, 1.1, 1.12, 0);

							TogglePlayerFactoryCP(playerid, true);
							SetPlayerData(playerid, P_JOB_WAGE, 0);

							SetPlayerJobLoadItems(playerid, 0);
							SetPlayerTempJob(playerid, TEMP_JOB_FACTORY);

							SetPlayerTempJobState(playerid, TEMP_JOB_STATE_FACTORY_TAKE_MET);

							SendClientMessage(playerid, 0x3399FFFF, "?? ?????? ?????? ? ???????????????? ???? ??????");
							SendClientMessage(playerid, 0x66CC00FF, "??ù ????????ù ?????????? ?????????????? ??????????? ? ????? ? ???");

							DeletePVar(playerid, "factory_skill");
							DeletePVar(playerid, "factory_bad_prods");
							DeletePVar(playerid, "factory_take_metall");
						}
						case TEMP_JOB_FACTORY:
						{
							EndPlayerTempJob(playerid, TEMP_JOB_FACTORY);
						}
					}
				}
			}
			case DIALOG_TEMP_JOB_LUMBERJACK_ST:
			{
				if(response)
				{
					if(GetPlayerTempJob(playerid) == TEMP_JOB_NONE)
					{
						SetPlayerSkin(playerid, GetTempJobInfo(TEMP_JOB_MINER, TJ_SKIN)[GetPlayerSex(playerid)]);
					//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 326, A_OBJECT_BONE_RIGHT_HAND, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0);

						SetPlayerJobLoadItems(playerid, 0);
						SetPlayerTempJob(playerid, TEMP_JOB_LUMBERJACK);

						SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LUMBERJACK_CHOP);
						SetPlayerLumberJackChopCP(playerid);

						SendClientMessage(playerid, 0x3399FFFF, "?? ?????? ?????? ????????");
						SendClientMessage(playerid, 0x3399FFFF, "ù???? ?????? ?????? ???????? {FF0000}???????? {3399FF}?????????");
					}
				}
			}
			case DIALOG_TEMP_JOB_LUMBERJACK_END:
			{
				if(response)
				{
					EndPlayerTempJob(playerid, TEMP_JOB_LUMBERJACK);
				}
			}
			case DIALOG_CONTENER2:
			{
				if(cont3 >=1)
				{
                    if(GetPlayerMoneyEx(playerid) >= 200000000)
					{
						new skin_cont[8] = {149, 59, 5, 3, 149, 287,276,280};

						new id = random(7);


						SetPlayerData(playerid, P_SKIN, skin_cont[id]);
		      			SendClientMessage(playerid, 0xFFFFFFFF, "????????ù??! ?????? ????????? ?? ???????? ???????????? ????");
						UpdatePlayerDatabaseInt(playerid, "skin", skin_cont[id]);
						GivePlayerMoneyEx(playerid, -200000000, "???????? ??????????");
						SetPlayerSkin(playerid, skin_cont[id]);
						cont3 -=1;
						SetPlayerSkinInit(playerid);
                    }
					else
				    	return SendClientMessage(playerid, -1, "? ??? ?? ?????????? ?????!!");
				}
				else
				    return SendClientMessage(playerid, -1, "??????????? ??????? ???? ???? ?? ??????!");
			}
			case DIALOG_CONTENER1:
			{
				if(cont1 >=1)
				{
				    if(GetPlayerMoneyEx(playerid) >= 500000)
					{
						switch(random(4))
						{
							case 0:
							{
	      						SendClientMessage(playerid, 0xFFFFFFFF, "????????ù??! ?????? ????????? ?? ???????? 30 ???????");
								GivePlayerMoneyEx(playerid, -500000, "???????? ??????????", true, true);
								cont1 -=1;
								AddPlayerData(playerid, P_MED_CHEST, +, 30);
								UpdatePlayerDatabaseInt(playerid, "healme", GetPlayerData(playerid, P_MED_CHEST));
							}
							case 1:
							{
	      						SendClientMessage(playerid, 0xFFFFFFFF, "????????ù??! ?????? ????????? ?? ???????? +50 EXP");
								GivePlayerMoneyEx(playerid, -500000, "???????? ??????????", true, true);
								cont1 -=1;
								AddPlayerData(playerid, P_EXP, +, 50);
								UpdatePlayerDatabaseInt(playerid, "exp", GetPlayerData(playerid, P_EXP));
							}
							case 2:
							{
	      						SendClientMessage(playerid, 0xFFFFFFFF, "????????ù??! ?????? ????????? ?? ???????? ????? ????? ?????? 50.000 ???");
								GivePlayerMoneyEx(playerid, -500000, "???????? ??????????", true, true);
								GivePlayerMoneyEx(playerid, 50000, "???????? ??????????", true, true);
								cont1 -=1;
							}
							case 3:
							{
	      						SendClientMessage(playerid, 0xFFFFFFFF, "????????ù??! ?????? ????????? ?? ???????? ????");
								GivePlayerMoneyEx(playerid, -500000, "???????? ??????????", true, true);
								cont1 -=1;
								GivePlayerWeapon(playerid, 5, 5); // Give playerid a sawn-off shotgun with 64 ammo
							}
							case 4:
							{
	      						SendClientMessage(playerid, 0xFFFFFFFF, "????????ù??! ?????? ????????? ?? ???????? ????? ????? ?????? 2.000.000 ???");
								GivePlayerMoneyEx(playerid, -500000, "???????? ??????????", true, true);
								GivePlayerMoneyEx(playerid, 2000000, "???????? ??????????", true, true);
								cont1 -=1;
							}
						}
					}
					else
				    	return SendClientMessage(playerid, -1, "? ??? ?? ?????????? ?????!!");
				}
				else
				    return SendClientMessage(playerid, -1, "??????????? ??????? ???? ???? ?? ??????!");
			}
			// -----------------------------------------------------------------
			case DIALOG_FUEL_STATION_BUY:
			{
				if(response)
				{
					new stationid = GetPVarInt(playerid, "buy_fuel_st");

					if(IsPlayerInRangeOfPoint(playerid, 15.0, GetFuelStationData(stationid, FS_POS_X), GetFuelStationData(stationid, FS_POS_Y), GetFuelStationData(stationid, FS_POS_Z)))
					{
						if(!IsFuelStationOwned(stationid))
						{
							if(GetPlayerMoneyEx(playerid) >= GetFuelStationData(stationid, FS_PRICE))
							{
								SendClientMessage(playerid, 0xFFFFFFFF, "????????ù??! ?? ?????? ??????????? ???????");
								BuyPlayerFuelStation(playerid, stationid);

								PlayerPlaySound(playerid, 1058, 0.0, 0.0, 0.0);
								Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{3399FF}????ù ??????????ù ??????ù", "{FFFFFF}??? ????? ????????? ?? ?????? ??? ? ????????? ?????????? ????? {FFCD00}(/gps)", "??", "");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ??????? ???? ??????????? ???????");
						}
						else
						{
							new fmt_str[75];

							format(fmt_str, sizeof fmt_str, "??? ??????????ù ??????ù ??? ???????. ????????: %s", GetFuelStationData(stationid, FS_OWNER_NAME));
							SendClientMessage(playerid, 0xCECECEFF, fmt_str);
						}
					}
				}
				DeletePVar(playerid, "buy_fuel_st");
			}
			case DIALOG_FUEL_STATION_INFO:
			{
				if(response)
				{
					ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_PARAMS);
				}
			}
			case DIALOG_FUEL_STATION_PARAMS:
			{
				if(response)
				{
					ShowPlayerFuelStationDialog(playerid, listitem + 1);
				}
				else callcmd::fuelst(playerid, "");
			}
			case DIALOG_FUEL_STATION_NAME:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						if(3 <= strlen(inputtext) <= 15)
						{
							format(g_fuel_station[stationid][FS_NAME], 20, inputtext, 0);
							UpdateFuelStationLabel(stationid);

							SendClientMessage(playerid, 0x66CC00FF, "???????? ??????????? ??????? ????????");
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "????? ???????ù ?????? ???? ?? 3-? ?? 15-?? ????????");
							return ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_NEW_NAME);
						}
					}
					ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_PARAMS);
				}
			}
			case DIALOG_FUEL_STATION_PRICE_FUEL:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						new price = strval(inputtext);
						if(2 <= price <= 15 && IsNumeric(inputtext))
						{
							new fmt_str[75];

							SetFuelStationData(stationid, FS_FUEL_PRICE, price);
							UpdateFuelStationLabel(stationid);

							format(fmt_str, sizeof fmt_str, "ù????? ??????? ?? ????? ???????? ????? ??????????ù ?? %d ??? ?? 1 ????", price);
							SendClientMessage(playerid, 0x66CC00FF, fmt_str);

							format(fmt_str, sizeof fmt_str, "UPDATE fuel_stations SET fuel_price=%d WHERE id=%d LIMIT 1", GetFuelStationData(stationid, FS_FUEL_PRICE), GetFuelStationData(stationid, FS_SQL_ID));
							mysql_query(mysql, fmt_str, false);
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "??????? ????????? ???? ?? 2 ?? 15 ?????? ?? 1 ????");
							return ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_FUEL_PRICE);
						}
					}
					ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_PARAMS);
				}
			}
			case DIALOG_FUEL_STATION_BUY_FUEL_PR:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						new price = strval(inputtext);
						if(2 <= price <= 10 && IsNumeric(inputtext))
						{
							new fmt_str[90];
							SetFuelStationData(stationid, FS_BUY_FUEL_PRICE, price);

							format(fmt_str, sizeof fmt_str, "ù????? ??????? ??ù ????? ???????? ????? ?????????ù ?? %d ??? ?? 1 ????", price);
							SendClientMessage(playerid, 0x66CC00FF, fmt_str);

							format(fmt_str, sizeof fmt_str, "UPDATE fuel_stations SET buy_fuel_price=%d WHERE id=%d LIMIT 1", GetFuelStationData(stationid, FS_BUY_FUEL_PRICE), GetFuelStationData(stationid, FS_SQL_ID));
							mysql_query(mysql, fmt_str, false);
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "??????? ?????????? ???? ?? 2 ?? 10 ?????? ?? 1 ????");
							return ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_BUY_FUEL_PRIC);
						}
					}
					ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_PARAMS);
				}
			}
			case DIALOG_FUEL_STATION_ORDER_FUELS:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						new order_fuels = strval(inputtext);
						new fuel_price = 5;
						new price = order_fuels * fuel_price;

						if(order_fuels > 0 && IsNumeric(inputtext))
						{
							new fmt_str[256];

							new free_fuel_slots = GetFuelStationMaxFuel(stationid) - GetFuelStationData(stationid, FS_FUELS);

							if(free_fuel_slots > 8000)
								free_fuel_slots = 8000;

							if(order_fuels <= free_fuel_slots)
							{
								if(GetFuelStationData(stationid, FS_BALANCE) >= price)
								{
									AddFuelStationData(stationid, FS_BALANCE, -, price);

									format(fmt_str, sizeof fmt_str, "~w~fuel st. bank~n~~r~-$%d", price);

									AddFuelStationData(stationid, FS_FUELS, +, order_fuels);

									GameTextForPlayer(playerid, fmt_str, 4000, 1);

									format(fmt_str, sizeof fmt_str, "UPDATE fuel_stations SET balance=%d,fuels=%d WHERE id=%d LIMIT 1", GetFuelStationData(stationid, FS_BALANCE), GetFuelStationData(stationid, FS_FUELS), GetFuelStationData(stationid, FS_SQL_ID));
									mysql_query(mysql, fmt_str, false);

									format
									(
										fmt_str, sizeof fmt_str,
										"{FFFFFF}????????? ??????:\n\n"\
										"?????????? ???????:\t\t\t%d ?\n"\
										"????????? 1 ?????:\t\t\t$%d\n"\
										"????ù ????????? ??????:\t\t$%d\n"\
										"ù?????? ???? ??????? ?????????? ?? ???",
										order_fuels,
										fuel_price,
										price
									);
									Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "????? ????????", fmt_str, "???????", "");

									return 1;
								}
								else
								{
									format(fmt_str, sizeof fmt_str, "????? ???????? ????? ?????????? ????? $%d ?? ????? ???", price);
									SendClientMessage(playerid, 0xCECECEFF, fmt_str);
								}
							}
							else
							{
								format(fmt_str, sizeof fmt_str, "?? ?? ?????? ???????? ????? %d ?????? ???????", free_fuel_slots);
								SendClientMessage(playerid, 0xCECECEFF, fmt_str);
							}
						}
					}
				}
			}
			case DIALOG_FUEL_STATION_ORDER_CANCE:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						new order_id = GetFuelStationData(stationid, FS_ORDER_ID);
						if(order_id != -1 && GetOrderData(order_id, O_SQL_ID) > 0)
						{
							if(!GetOrderData(order_id, O_USED))
							{
								new fmt_str[128];
								new return_money = GetOrderData(order_id, O_AMOUNT) * GetOrderData(order_id, O_PRICE);

								DeleteOrder(order_id);
								AddFuelStationData(stationid, FS_BALANCE, +, return_money);

								format(fmt_str, sizeof fmt_str, "UPDATE fuel_stations SET balance=%d WHERE id=%d LIMIT 1", GetFuelStationData(stationid, FS_BALANCE), GetFuelStationData(stationid, FS_SQL_ID));
								mysql_query(mysql, fmt_str, false);

								format
								(
									fmt_str, sizeof fmt_str,
									"{FFFFFF}?? ???????? ????? ???????\n"\
									"?? ???? ??????????? ??????? ???? ?????????? {00CC00}%d ???",
									return_money
								);
								Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FF9900}?????? ??????", fmt_str, "???????", "");

								format(fmt_str, sizeof fmt_str, "~w~fuel st. bank~n~~g~+%d rub", return_money);
								GameTextForPlayer(playerid, fmt_str, 4000, 1);

								return 1;
							}
							else SendClientMessage(playerid, 0xFF6600FF, "??? ????? ??????ù???ù, ??? ?????ù ????????");
						}
					}
					ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_PARAMS);
				}
			}
			case DIALOG_FUEL_STATION_IMPROVEMENT:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						if(0 <= listitem <= sizeof g_fuel_station_improvements - 1)
						{
							new i_level = GetFuelStationData(stationid, FS_IMPROVEMENTS);
							new i_price = g_fuel_station_improvements[listitem][I_PRICE];

							if(i_level < listitem)
							{
								SendClientMessage(playerid, 0xCECECEFF, "???? ??????? ????????? ???? ??????????");
							}
							else if(i_level > listitem)
							{
								SendClientMessage(playerid, 0xCECECEFF, "?? ??? ?????? ???? ??????? ?????????");
							}
							else if(GetPlayerMoneyEx(playerid) < i_price)
							{
								new fmt_str[64];

								format(fmt_str, sizeof fmt_str, "??ù ??????? %d ?????ù ????????? ?????????? %d ??????", listitem + 1, i_price);
								SendClientMessage(playerid, 0xCECECEFF, fmt_str);
							}
							else
							{
								new fmt_str[128];

								format(fmt_str, sizeof fmt_str, "UPDATE accounts a, fuel_stations f SET a.money=%d, f.improvements=%d WHERE a.id=%d AND f.id=%d", GetPlayerMoneyEx(playerid)-i_price, i_level + 1, GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
								mysql_query(mysql, fmt_str, false);

								if(!mysql_errno())
								{
									GivePlayerMoneyEx(playerid, -i_price, "??????? ????????? ??ù ???", false, true);

									format(fmt_str, sizeof fmt_str, "?? ???????? ???? ??????????? ??????? ?? {FFCD00}%s {3399FF}?????ù", GetNumericName(listitem + 1));
									SendClientMessage(playerid, 0x3399FFFF, fmt_str);

									AddFuelStationData(stationid, FS_IMPROVEMENTS, +, 1);
									switch(listitem + 1)
									{
										case 1..3:
										{
											format(fmt_str, sizeof fmt_str, "??????? ?????????? ????????? ????????? ?? %d ??????", GetFuelStationMaxFuel(stationid));
											SendClientMessage(playerid, 0x66CC00FF, fmt_str);

											SendClientMessage(playerid, 0x999999FF, "ù????? ????? ?????? ?????????ù ? ??? ??????????");
										}
										case 4:
										{
											SendClientMessage(playerid, 0x66CC00FF, "???????? ???? ?? ?????? ?????? ?? ???????????ù???ù ?? ???? ??????????? ???????");
											SendClientMessage(playerid, 0x999999FF, "????????ù ?????, ????? ?? ?????? ?????????? ??? ????????? ? 2 ????");
										}
									}
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 17)");
							}
						}
					}
					ShowPlayerFuelStationDialog(playerid, FUEL_ST_OPERATION_PARAMS);
				}
			}
			case DIALOG_FUEL_STATION_SELL:
			{
				new stationid = GetPlayerFuelStation(playerid);
				if(stationid != -1)
				{
					if(response)
					{
						SellFuelStation(playerid);
					}
				}
			}
			case DIALOG_FUEL_STATION_BUY_JERRICA:
			{
				new stationid = GetPVarInt(playerid, "buy_jerrican_in_fuelst");
				DeletePVar(playerid, "buy_jerrican_in_fuelst");

				if(response)
				{
					if(IsPlayerInRangeOfPoint(playerid, 10.0, GetFuelStationData(stationid, FS_POS_X), GetFuelStationData(stationid, FS_POS_Y), GetFuelStationData(stationid, FS_POS_Z)))
					{
						if(!GetPVarInt(playerid, "have_jerrican"))
						{
							new price = GetFuelStationData(stationid, FS_FUEL_PRICE) * 15;
							if(GetPlayerMoneyEx(playerid) >= price)
							{
								new query[150];

								if(IsFuelStationOwned(stationid))
								{
									if(GetFuelStationData(stationid, FS_FUELS) < 15)
										return SendClientMessage(playerid, 0xCECECEFF, "?? ???? ??? ??? ???????");

									AddFuelStationData(stationid, FS_FUELS, -, 15);
									AddFuelStationData(stationid, FS_BALANCE, +, price);

									format(query, sizeof query, "UPDATE accounts a,fuel_stations f SET a.money=%d,f.fuels=%d,f.balance=%d WHERE a.id=%d AND f.id=%d", GetPlayerMoneyEx(playerid)-price, GetFuelStationData(stationid, FS_FUELS), GetFuelStationData(stationid, FS_BALANCE), GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
								}
								else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));

								mysql_query(mysql, query, false);
								if(!mysql_errno())
								{
									new buy_fuel_pay = GetPVarInt(playerid, "buy_fuel_pay_j");
									SetPVarInt(playerid, "buy_fuel_pay_j", buy_fuel_pay + price);

									GivePlayerMoneyEx(playerid, -price, "??????? ???????? ?? ???", false, true);

									SetPVarInt(playerid, "have_jerrican", 1);
								//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 1650, A_OBJECT_BONE_LEFT_HAND, 0.15, 0.0, 0.0, 0.0, -90.0, 180.0, 1.0, 1.0, 1.0, 0);

									SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ???????? ? 15 ??????? ???????");
									SendClientMessage(playerid, 0x3399FFFF, "????? ????????? ?????????, ????????? ? ???? ? ??????? ???");
									SendClientMessage(playerid, 0xCECECEFF, "??????????: ?? ?? ?????? ????????ù ?? ????ù ????????. ??? - ?????ù ?????? ?????");
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 19)");
							}
							else SendClientMessage(playerid, 0x999999FF, "???????????? ????? ??ù ??????? ????????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "?? ??? ?????? ????????");
					}
				}
			}
			case DIALOG_FUEL_STATION_BUY_REPAIR:
			{
				new stationid = GetPVarInt(playerid, "buy_jerrican_in_fuelst");
				DeletePVar(playerid, "buy_jerrican_in_fuelst");

				if(response)
				{
					if(IsPlayerInRangeOfPoint(playerid, 10.0, GetFuelStationData(stationid, FS_POS_X), GetFuelStationData(stationid, FS_POS_Y), GetFuelStationData(stationid, FS_POS_Z)))
					{
						new price = 100000;
						if(GetPlayerMoneyEx(playerid) >= price)
						{
							new query[150];

							if(IsFuelStationOwned(stationid))
							{

								AddFuelStationData(stationid, FS_FUELS, -, 15);
								AddFuelStationData(stationid, FS_BALANCE, +, price);

								format(query, sizeof query, "UPDATE accounts a,fuel_stations f SET a.money=%d,f.fuels=%d,f.balance=%d WHERE a.id=%d AND f.id=%d", GetPlayerMoneyEx(playerid)-price, GetFuelStationData(stationid, FS_FUELS), GetFuelStationData(stationid, FS_BALANCE), GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
							}
							else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));

							mysql_query(mysql, query, false);
							if(!mysql_errno())
							{
								new buy_fuel_pay = GetPVarInt(playerid, "buy_fuel_pay_j");
								SetPVarInt(playerid, "buy_fuel_pay_j", buy_fuel_pay + price);

								GivePlayerMoneyEx(playerid, -price, "??????? ????? ?? ???", false, true);
								
								AddPlayerData(playerid, P_REPCARID, +, 1);
								UpdatePlayerDatabaseInt(playerid, "repcarid",GetPlayerData(playerid, P_REPCARID));

							//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 1650, A_OBJECT_BONE_LEFT_HAND, 0.15, 0.0, 0.0, 0.0, -90.0, 180.0, 1.0, 1.0, 1.0, 0);

								SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ???. ????????. ??????????? /repaircar - ????? ???????? ?????????");
							}
							else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 19)");
						}
						else SendClientMessage(playerid, 0x999999FF, "???????????? ????? ??ù ??????? ????????");
					}
				}
			}
			case DIALOG_FUEL_STATION_BUY_FUEL_M:
			{
				new stationid = GetPVarInt(playerid, "nearest_fuel_st");

				if(response)
				{
					new buy_fuel_count = strval(inputtext);
					new vehicleid = GetPlayerVehicleID(playerid);

					if(GetPlayerJob(playerid) == JOB_MECHANIC && IsPlayerInJob(playerid) && IsPlayerInVehicle(playerid, GetPlayerJobCar(playerid)))
					{
						if(IsPlayerInRangeOfPoint(playerid, 10.0, GetFuelStationData(stationid, FS_POS_X), GetFuelStationData(stationid, FS_POS_Y), GetFuelStationData(stationid, FS_POS_Z)))
						{
							new fmt_str[150];

							if((1 <= buy_fuel_count <= 10_000) && IsNumeric(inputtext))
							{
								if(GetFuelStationData(stationid, FS_FUELS) >= buy_fuel_count)
								{
									if(!(buy_fuel_count % 10))
									{
										if((GetPlayerJobLoadItems(playerid) + buy_fuel_count) <= 50)
										{
											new price = buy_fuel_count * GetFuelStationData(stationid, FS_FUEL_PRICE);
											if(GetPlayerMoneyEx(playerid) >= price)
											{
												if(IsFuelStationOwned(stationid))
												{
													AddFuelStationData(stationid, FS_FUELS, -, buy_fuel_count);
													AddFuelStationData(stationid, FS_BALANCE, +, price);

													format(fmt_str, sizeof fmt_str, "UPDATE accounts a,fuel_stations f SET a.money=%d,f.fuels=%d,f.balance=%d WHERE a.id=%d AND f.id=%d", GetPlayerMoneyEx(playerid)-price, GetFuelStationData(stationid, FS_FUELS), GetFuelStationData(stationid, FS_BALANCE), GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
												}
												else format(fmt_str, sizeof fmt_str, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
												mysql_query(mysql, fmt_str, false);

												if(!mysql_errno())
												{
													GivePlayerMoneyEx(playerid, -price, "??????? ??????? ?? ??? (/getfuel)", false, true);
													SetPlayerJobLoadItems(playerid, GetPlayerJobLoadItems(playerid) + buy_fuel_count);

													new buy_fuel_pay = GetPVarInt(playerid, "buy_fuel_pay_j");
													SetPVarInt(playerid, "buy_fuel_pay_j", buy_fuel_pay + price);

													format(fmt_str, sizeof fmt_str, "?? ?????? %d ? ??????? ?? %d ??????", buy_fuel_count, price);
													SendClientMessage(playerid, 0x66CC00FF, fmt_str);

													format(fmt_str, sizeof fmt_str, "%s{FFFFFF}???????????\n{999999}ù??????: %d ?", GetPlayerData(playerid, P_JOB_SERVICE_NAME), GetPlayerJobLoadItems(playerid));
													UpdateVehicleLabel(vehicleid, 0xCC9900FF, fmt_str);

													return DeletePVar(playerid, "nearest_fuel_st");
												}
												else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 20)");
											}
											else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ??????? ?????? ???-?? ???????");
										}
										else SendClientMessage(playerid, 0xCECECEFF, "????? ????????? ?? ????? 50 ? ???????");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "???-?? ??????? ?????? ???? ?????? 10");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "?? ??? ??? ?????? ???-?? ???????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "???????? ????????");

							format
							(
								fmt_str, sizeof fmt_str,
								"{FFFFFF}ù?????? ?? ???:\t\t%d/10000 ?\n"\
								"????????? 1 ?????:\t%d ???\n\n"\
								"??????? ???-?? ???????, ??????? ?????? ????????\n"\
								"(????? ?????? ???? ??????? 10)",
								GetFuelStationData(stationid, FS_FUELS),
								GetFuelStationData(stationid, FS_FUEL_PRICE)
							);
							Dialog(playerid, DIALOG_FUEL_STATION_BUY_FUEL_M, DIALOG_STYLE_INPUT, "{FFCD00}??????? ???????", fmt_str, "??????", "??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ????? ??????????? ???????");
					}
					else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ??????? ??????????");
				}
				else DeletePVar(playerid, "nearest_fuel_st");
			}
			// -----------------------------------------------------------------
			case DIALOG_JERRICAN_FILL_CAR:
			{
				new vehicleid = GetPVarInt(playerid, "jerrican_fill_car");
				DeletePVar(playerid, "jerrican_fill_car");

				if(response && vehicleid)
				{
					new Float: x, Float: y, Float: z;
					GetVehiclePos(vehicleid, x, y, z);

					if(IsPlayerInRangeOfPoint(playerid, 2.0, x, y, z))
					{
						if((GetVehicleData(vehicleid, V_FUEL) + 15.0) <= 150.0)
						{
							SetVehicleData(vehicleid, V_FUEL, GetVehicleData(vehicleid, V_FUEL) + 15.0);
							ApplyAnimationEx(playerid, "CRIB", "CRIB_Use_Switch", 4.0, 0, 0, 0, 0, 0, 0);

							DeletePVar(playerid, "have_jerrican");

						//	RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);
							SendClientMessage(playerid, 0x66CC00FF, "ù???????? ?????????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "? ???????? ????? ?????????? ??????? ?? ?????????ù");
					}
					else SendClientMessage(playerid, 0x999999FF, "?? ?????????? ??????? ?????? ?? ??????????");
				}
			}//by Dergen and Tima
			case DIALOG_BIZ_SHOP_GUN:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_SHOP_GUN))
						{
							new price;
							new take_prods;

							switch(list_id)
							{
								case 1:
								{
									price = 5000;
									take_prods = 20;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ???????????", false, true);
											SetPlayerArmour(playerid, 100.0);
										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 2:
								{
									price = 50000;
									take_prods = 20;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

                                            GivePlayerWeapon(playerid,24,100);
											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);


										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 3:
								{
									price = 60000;
									take_prods = 30;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);
           									GivePlayerWeapon(playerid,29,250);

										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 4:
								{
									price = 60000;
									take_prods = 30;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);
           									GivePlayerWeapon(playerid,30,180);

										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 5:
								{
									price = 40000;
									take_prods = 30;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);
           									GivePlayerWeapon(playerid,25,35);

										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 6:
								{
									price = 30000;
									take_prods = 1;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);
           									GivePlayerWeapon(playerid,34,20);

										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 7:
								{
									price = 100000;
									take_prods = 1;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);
           									GivePlayerWeapon(playerid,24,50);

										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 8:
								{
									price = 100000;
									take_prods = 1;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);
           									GivePlayerWeapon(playerid,25,50);

										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 9:
								{
									price = 100000;
									take_prods = 1;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);
           									GivePlayerWeapon(playerid,29,50);

										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								case 10:
								{
									price = 100000;
									take_prods = 1;

									if(price == 0)
										return SendClientMessage(playerid, 0xCECECEFF, "???? ?? ????? ?? ??????????? ($0)");

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];

										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
												//AddBusinessData(businessid, B_BALANCE_DAY, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????ù", false, true);
           									GivePlayerWeapon(playerid,31,100);

										}
										else SendClientMessage(playerid, 0xCECECEFF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ?????????? ?????!");
								}
								default:
									return 1;
							}
						}
					}
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_BIZ_BUY:
			{
				if(response)
				{
					new businessid = GetPVarInt(playerid, "buy_biz_id");

					if(IsPlayerInRangeOfPoint(playerid, 7.0, GetBusinessData(businessid, B_POS_X), GetBusinessData(businessid, B_POS_Y), GetBusinessData(businessid, B_POS_Z)))
					{
						if(!IsBusinessOwned(businessid))
						{
							if(GetPlayerMoneyEx(playerid) >= GetBusinessData(businessid, B_PRICE))
							{
							   // if(Config[sBuyBiz] == 0)
							    //{
								SendClientMessage(playerid, 0xFFFFFFFF, "????????ù??! ?? ?????? ??????");
								BuyPlayerBusiness(playerid, businessid);

								PlayerPlaySound(playerid, 1058, 0.0, 0.0, 0.0);
								Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ?????????ù", "{FFFFFF}?? ??????? ????????? {ffff00} ??????. {ffffff} ?? ????????? ? ???, ???\n {ffffff} ????? ????????? ?????????? ??????????. ? ??? ??????\n {ffffff} ???? ?????? ????? ?? ??????? ?? ????? ?????? ?\n {ffffff} ???????????,? ??? ????? ???????????? {ffff00} 70% {ffffff}?? ????????????????\n {ffffff} ?????????.\n    \n {ffffff} ù???? ?????? ????? ???? ??????, ???? ? ????? ???????\n {ffffff} ??????????? ???????? ?????, ??? {ffff00} 24 {ffffff}???? ? ???????\n {ffffff} ????????ù ?????????.\n      \n {ffffff} ??ù ?????????ù ????????? ? ?????????ù ????????\n {ffffff} ?????????????? {ffff00} /business.", "???????", "");
						//	}
							//	else
							//	    return Send(playerid,-1,"? ?????? ?????? ??? ??????? ?? ??????? ?? ???????? ? ???????!");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ??????? ????? ???????");
						}
						else
						{
							new fmt_str[64];

							format(fmt_str, sizeof fmt_str, "???? ?????? ??? ??????. ????????: %s", GetBusinessData(businessid, B_OWNER_NAME));
							SendClientMessage(playerid, 0xCECECEFF, fmt_str);
						}
					}
				}
				DeletePVar(playerid, "buy_biz_id");
			}
			case DIALOG_BIZ_INFO:
			{
				if(response)
				{
					ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
				}
			}
			case DIALOG_BIZ_PARAMS:
			{
				if(response)
				{
					ShowPlayerBusinessDialog(playerid, listitem + 1);
				}
				else callcmd::business(playerid, "");
			}
			case DIALOG_BIZ_ENTER_PRICE:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						new price = strval(inputtext);
						if(strlen(inputtext))
						{
							if((0 <= price <= 5000) && IsNumeric(inputtext))
							{
								new query[64 + 1];
								SetBusinessData(businessid, B_ENTER_PRICE, price);

								format(query, sizeof query, "UPDATE business SET enter_price=%d WHERE id=%d LIMIT 1", GetBusinessData(businessid, B_ENTER_PRICE), GetBusinessData(businessid, B_SQL_ID));
								mysql_query(mysql, query, false);

								UpdateBusinessLabel(businessid);
								SendClientMessage(playerid, 0x66CC00FF, "???? ?? ???? ? ?????? ????????");

								return ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?????? ???? ?? 0 ?? 5000 ??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "??????? ???? ?? ???? ? ??? ??????");

						ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_ENTER_PRICE);
					}
					else ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
				}
			}
			case DIALOG_BIZ_PROD_PRICE:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						new price = strval(inputtext);
						if(strlen(inputtext) && IsNumeric(inputtext))
						{
							if(25 <= price <= 200)
							{
								new query[64 + 1];
								SetBusinessData(businessid, B_PROD_PRICE, price);

								format(query, sizeof query, "UPDATE business SET prod_price=%d WHERE id=%d LIMIT 1", GetBusinessData(businessid, B_PROD_PRICE), GetBusinessData(businessid, B_SQL_ID));
								mysql_query(mysql, query, false);

								SendClientMessage(playerid, 0x66CC00FF, "????????? ???????? ????????");
								return ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
							}
							else SendClientMessage(playerid, 0xCECECEFF, "??????? ????????? ?? 25 ?? 200 ??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "??????? ????????? ????????");

						ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PROD_PRICE);
					}
					else ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
				}
			}
			case DIALOG_BIZ_ORDER_PRODS:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						new order_prods = strval(inputtext);
						new prod_price = 35;
						new price = order_prods * prod_price;

						if(order_prods > 0 && IsNumeric(inputtext))
						{
							new fmt_str[256];

							new free_prods_slots = GetBusinessMaxProd(businessid) - GetBusinessData(businessid, B_PRODS);

							if(free_prods_slots > 1000)
								free_prods_slots = 1000;

							if(order_prods <= free_prods_slots)
							{
								if(GetBusinessData(businessid, B_BALANCE) >= price)
								{
									AddBusinessData(businessid, B_BALANCE, -, price);
									AddBusinessData(businessid, B_PRODS, +, order_prods);

									format(fmt_str, sizeof fmt_str, "~w~business bank~n~~r~-$%d", price);
									GameTextForPlayer(playerid, fmt_str, 4000, 1);

									format(fmt_str, sizeof fmt_str, "UPDATE business SET balance=%d, products=%d WHERE id=%d LIMIT 1", GetBusinessData(businessid, B_BALANCE), GetBusinessData(businessid, B_PRODS), GetBusinessData(businessid, B_SQL_ID));
									mysql_query(mysql, fmt_str, false);


									format
									(
										fmt_str, sizeof fmt_str,
										"{FFFFFF}????????? ??????:\n\n"\
										"?????????? ?????????:\t\t%d ??.\n"\
										"????????? 1 ????????:\t\t$%d\n"\
										"????ù ????????? ??????:\t\t$%d\n\n"\
										"{32a44b}???????? ???? ??????? ?????????? ? ??????",
										order_prods,
										prod_price,
										price
									);
									Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "????? ????????", fmt_str, "???????", "");
								}
								else
								{
									format(fmt_str, sizeof fmt_str, "????? ???????? ????? ?????????? ????? $%d ?? ????? ???????", price);
									SendClientMessage(playerid, 0xCECECEFF, fmt_str);
								}
							}
							else
							{
								format(fmt_str, sizeof fmt_str, "?? ?? ?????? ???????? ????? %d ?????????", free_prods_slots);
								SendClientMessage(playerid, 0xCECECEFF, fmt_str);
							}
						}
					}
					else ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
				}
			}
			case DIALOG_BIZ_ORDER_CANCEL:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						new order_id = GetBusinessData(businessid, B_ORDER_ID);
						if(order_id != -1 && GetOrderData(order_id, O_SQL_ID) > 0)
						{
							if(!GetOrderData(order_id, O_USED))
							{
								new fmt_str[128];
								new return_money = GetOrderData(order_id, O_AMOUNT) * GetOrderData(order_id, O_PRICE);

								DeleteOrder(order_id);
								AddBusinessData(businessid, B_BALANCE, +, return_money);

								format(fmt_str, sizeof fmt_str, "UPDATE business SET balance=%d WHERE id=%d LIMIT 1", GetBusinessData(businessid, B_BALANCE), GetBusinessData(businessid, B_SQL_ID));
								mysql_query(mysql, fmt_str, false);

								format
								(
									fmt_str, sizeof fmt_str,
									"{FFFFFF}?? ???????? ????? ?????????\n"\
									"?? ???? ??????? ???? ?????????? {00CC00}%d ???",
									return_money
								);
								Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FF9900}?????? ??????", fmt_str, "???????", "");

								format(fmt_str, sizeof fmt_str, "~w~business bank~n~~g~+%d rub", return_money);
								GameTextForPlayer(playerid, fmt_str, 4000, 1);

								return 1;
							}
							else SendClientMessage(playerid, 0xFF6600FF, "??? ????? ??????ù???ù, ??? ?????ù ????????");
						}
					}
					ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
				}
			}
			case DIALOG_BIZ_IMPROVEMENT:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(IsBusinessNoEnter(businessid))
					return SendClientMessage(playerid, 0xCECECEFF, "?????? ??? ??????? ?????ù ????????.");
				if(businessid != -1)
				{
					if(response)
					{
						if(0 <= listitem <= sizeof g_business_improvements - 1)
						{
							new i_level = GetBusinessData(businessid, B_IMPROVEMENTS);
							new i_price = g_business_improvements[listitem][I_PRICE];

							if(i_level < listitem)
							{
								SendClientMessage(playerid, 0xCECECEFF, "???? ??????? ????????? ???? ??????????");
							}
							else if(i_level > listitem)
							{
								SendClientMessage(playerid, 0xCECECEFF, "?? ??? ?????? ???? ??????? ?????????");
							}
							else if(GetPlayerMoneyEx(playerid) < i_price)
							{
								new fmt_str[64];

								format(fmt_str, sizeof fmt_str, "??ù ??????? %d ?????ù ????????? ?????????? %d ??????", listitem + 1, i_price);
								SendClientMessage(playerid, 0xCECECEFF, fmt_str);
							}
							else
							{
								new fmt_str[128];

								format(fmt_str, sizeof fmt_str, "UPDATE accounts a, business b SET a.money=%d, b.improvements=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-i_price, i_level + 1, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
								mysql_query(mysql, fmt_str, false);

								if(!mysql_errno())
								{
									new cur_max_prods = GetBusinessMaxProd(businessid);
									GivePlayerMoneyEx(playerid, -i_price, "??????? ????????? ??ù ???????", false, true);

									format(fmt_str, sizeof fmt_str, "?? ???????? ???? ?????? ?? {FFCD00}%s {3399FF}?????ù", GetNumericName(listitem + 1));
									SendClientMessage(playerid, 0x3399FFFF, fmt_str);

									AddBusinessData(businessid, B_IMPROVEMENTS, +, 1);
									switch(listitem + 1)
									{
										case 1:
										{
											format(fmt_str, sizeof fmt_str, "?????????? ?????? ??ù ????????? ????????? ? %d ?? %d", cur_max_prods, GetBusinessMaxProd(businessid));
											SendClientMessage(playerid, 0x66CC00FF, fmt_str);

											SendClientMessage(playerid, 0x999999FF, "ù????? ????? ??????? ???? ??????ù?? ?? ?????");
										}
										case 2:
										{
											SendClientMessage(playerid, 0x66CC00FF, "ù????? ???? ??????? ?????? ???????????ù ???????? ????????? ?? ?????????? ???????");
											SendClientMessage(playerid, 0x999999FF, "?????? ?? ????? ????? ????????ù???ù ?? ?????? ???????ù??ù");

											BusinessHealthPickupInit(businessid);
										}
										case 3:
										{
											SendClientMessage(playerid, 0x66CC00FF, "????????ù ??????????? ??????, ?? ?????? ??????? ?? ?????? ????????ù ? 2 ???? ??????");
											SendClientMessage(playerid, 0x999999FF, "????????ù ?????, ?? ??????? ???????? ??????? ???????");
										}
										case 4:
										{
											SendClientMessage(playerid, 0x66CC00FF, "ù????? ???? ??????? ????? ??????? ???? ??? ????? ? ??????");
											SendClientMessage(playerid, 0x999999FF, "?? ????? ?????? ?????ù?? ??? ????????? ??? ???????? {FF9900}/bizmusic");
										}
										case 5:
										{
											SendClientMessage(playerid, 0x66CC00FF, "? ????? ??????? ??? ?????????? ?????????????? ????? ????????? ?????????? ???????????");

											format(fmt_str, sizeof fmt_str, "?????????? ?????? ??ù ????????? ????????? ? %d ?? %d", cur_max_prods, GetBusinessMaxProd(businessid));
											SendClientMessage(playerid, 0x999999FF, fmt_str);
										}
										case 6:
										{
											format(fmt_str, sizeof fmt_str, "INSERT INTO business_gps (bid,time) VALUES (%d,%d)", businessid, gettime());
											mysql_query(mysql, fmt_str, false);

											g_business_gps_init = false;

											SendClientMessage(playerid, 0x66CC00FF, "ù????? ??? ?????? ????? ????? ????? ? ?????? ???????? {FF9900}(/gps > ??????)");
											SendClientMessage(playerid, 0x999999FF, "??? ???????? ???????? ?????????????? ????????, ??? ????? ???????? ?????? ???????ù??ù");
										}
									}
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 23)");
							}
						}
					}
					ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
				}
			}
			case DIALOG_BIZ_SELL:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						SellBusiness(playerid);
					}
				}
			}
			case DIALOG_BIZ_ENTER_MUSIC:
			{
				new businessid = GetPlayerBusiness(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						if(0 <= listitem <= sizeof g_business_sound)
						{
							new query[64];
							format(query, sizeof query, "UPDATE business SET enter_music=%d WHERE id=%d LIMIT 1", GetBusinessData(businessid, B_ENTER_MUSIC), GetBusinessData(businessid, B_SQL_ID));
							mysql_query(mysql, query, false);

							if(listitem > 0)
								PlayerPlaySound(playerid, g_business_sound[listitem - 1], 0.0, 0.0, 0.0);

							SetBusinessData(businessid, B_ENTER_MUSIC, listitem);
							SendClientMessage(playerid, 0x66CC00FF, "???? ??? ????? ? ?????? ???????");
						}
					}
				}
			}
			case DIALOG_BIZ_ENTER:
			{
				new businessid = GetPVarInt(playerid, "biz_enter") - 1;
				DeletePVar(playerid, "biz_enter");

				if(response && GetPlayerInBiz(playerid) == -1)
				{
					if(businessid != -1 && GetBusinessData(businessid, B_ENTER_PRICE) > 0)
					{
						if(IsBusinessOwned(businessid))
						{
							if(IsPlayerInRangeOfPoint(playerid, 5.0, GetBusinessData(businessid, B_POS_X), GetBusinessData(businessid, B_POS_Y), GetBusinessData(businessid, B_POS_Z)))
							{
								new price = GetBusinessData(businessid, B_ENTER_PRICE);
								new take_prods = GetBusinessEnterProdCount(businessid);

								if(GetPlayerMoneyEx(playerid) >= price)
								{
									new query[255];
									if(GetBusinessData(businessid, B_PRODS) >= take_prods)
									{
										format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
									}
									else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
									mysql_query(mysql, query, false);

									if(!mysql_errno())
									{
										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											AddBusinessData(businessid, B_PRODS, -, take_prods);
											AddBusinessData(businessid, B_BALANCE, +, price);
										}

										SetPlayerUseListitem(playerid, businessid);
										GivePlayerMoneyEx(playerid, -price, "?????? ?? ???? ? ??????", false, true);

										EnterPlayerToBiz(playerid, businessid);

										mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
										mysql_query(mysql, query, false);
									}
									else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 22)");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ?????");
							}
						}
					}
				}
			}
			case DIALOG_BIZ_CAR_MARKET:
			{
				if(!response) return 1;

				if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
					return SendClientMessage(playerid, 0x3399FFFF, ""USC"??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/donate");

				SetPlayerInBiz(playerid, GetPlayerListitemValue(playerid, 0));

				new biz_id = GetPlayerInBiz(playerid);
				new car_market_id = biz_id - 34;

				if(biz_id == -1 || GetBusinessData(biz_id, B_TYPE) != BUSINESS_TYPE_CAR_MARKET || GetPlayerData(playerid, P_BUY_CAR) != INVALID_VEHICLE_ID) return 1;

				buy_car_select_car[playerid] =
				buy_car_select_color_type[playerid] = 0;

				buy_car_select_color[playerid][0] =
				buy_car_select_color[playerid][1] = 1;

				SetPlayerVirtualWorld(playerid, playerid + 1);
				SetPlayerInterior(playerid, 1);
				SetPlayerPosEx(playerid, 1137.5398,234.6261,995.1235, 0.0, _, _, false);
				TogglePlayerControllable(playerid, false);

				SetPlayerData(playerid, P_BUY_CAR, CreateVehicle(car_market_data[car_market_id][1][1], 1149.8434, 226.0655, 994.7953, 20.8742, 1, 1, 1, 1));

				SetVehicleVirtualWorld(GetPlayerData(playerid, P_BUY_CAR), playerid + 1);
				LinkVehicleToInterior(GetPlayerData(playerid, P_BUY_CAR), 1);

				//1145.561035,234.304000,995.266784 | LookAt: 1147.853393,229.894149,995.812988

				SetPlayerCameraPos(playerid, 1142.746215,231.186386,995.992248);
								SetPlayerCameraLookAt(playerid, 1146.743041,228.254837,995.335449);

				//ShowPlayerSelectPanel(playerid, SELECT_PANEL_TYPE_CAR_MARKET);
				//BuyCarTDsShowForPlayer(playerid);
				CallLocalFunction("BuyCarPTDUpdate", "i", playerid);
				
				CreateAutosalonTextDraws(playerid);
				HideHud(playerid);
				
				//SelectTextDraw(playerid, 0x00FF00FF);

				return 1;
			}

			case DIALOG_BIZ_CAR_MARKET_BUY_CAR:
			{
				if(!response || GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;

				new biz_id = GetPlayerInBiz(playerid);
				new car_market_id = biz_id - 34;
				if(GetBusinessData(biz_id, B_TYPE) != BUSINESS_TYPE_CAR_MARKET) return 1;

				BuyOwnableCar(playerid, car_market_id, buy_car_select_car[playerid]);

				return 1;
			}

			case DIALOG_BIZ_CAR_MARKET_CAR_INFO:
			{
				new vehicleid = GetPlayerVehicleID(playerid);
				new car_market_id = GetVehicleCarMarketID(vehicleid);

				if(response && 0 <= car_market_id <= 3)
				{
					BuyOwnableCar(playerid, car_market_id, GetVehicleModel(vehicleid) + 1000);
				}

				TogglePlayerControllable(playerid, true);
				RemovePlayerFromVehicle(playerid);
				return 1;
			}
			case DIALOG_BIZ_CAR_TUNING:
			{
				if(response)
				{
					switch(listitem)
					{
						case 0:
						{
							new query[255],
							biz_id = GetPlayerInBiz(playerid),
							take_prods = 25;
							if(GetPlayerMoneyEx(playerid) >= 25000)
							{

								format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-25000, GetBusinessData(GetPlayerInBiz(playerid), B_PRODS) > 0 ? GetBusinessData(GetPlayerInBiz(playerid), B_PRODS)-1 : 0, GetBusinessData(GetPlayerInBiz(playerid), B_PRODS) > 0 ? GetBusinessData(GetPlayerInBiz(playerid), B_BALANCE)+25000 : 0, GetPlayerAccountID(playerid), GetBusinessData(GetPlayerInBiz(playerid), B_SQL_ID));
								mysql_query(mysql, query, false);

								if(GetBusinessData(biz_id, B_PRODS) >= take_prods)
								{

									new vehicleid = GetPlayerOwnableCar(playerid);

									SetVehicleHealth(vehicleid, 1000);
									RepairVehicle(vehicleid);

									AddBusinessData(biz_id, B_PRODS, -, take_prods);
									AddBusinessData(biz_id, B_BALANCE, +, 25000);

									format(query, sizeof query, "UPDATE business SET products=%d, balance=%d WHERE id=%d", GetBusinessData(biz_id, B_PRODS), GetBusinessData(biz_id, B_BALANCE), GetBusinessData(biz_id, B_SQL_ID));
									mysql_query(mysql, query, false);

									mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,25000,%d)", GetBusinessData(biz_id, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), IsBusinessOwned(biz_id));
									mysql_query(mysql, query, false);
								}
								GivePlayerMoneyEx(playerid, -25000, "??????? ??????????");
							}
							else
							SendClientMessage(playerid, -1, "? ??? ?? ??????? ?????!");
						}
						case 1: ShowVehicleImproveDialog(playerid);
						case 2:
						{
						    g_business_realtor_list = "";
							for(new idx; idx < 128; idx ++)
							{
								format(l_string, 15, "{%06x}%d | ", VehicleColoursTableRGBA[idx]>>> 8, idx);
								strcat(g_business_realtor_list, l_string);
								if(!(idx % 10)) strcat(g_business_realtor_list, "\n");
							}
							strcat(g_business_realtor_list,"\n{FFFFFF}??????? ????? ? ?????? ???? \n??????: 10,25");
						    Dialog(playerid, DIALOG_CHANGE_COLOR_CAR, DIALOG_STYLE_INPUT,"???????? ?????????ù",
							g_business_realtor_list,
							"?????????", "??????");
	                    }
						case 3:
						{
	                       Dialog
								(
									playerid, DIALOG_BIZ_CAR_TUNING_LIGHTS, DIALOG_STYLE_LIST,
									"{FFCD00}???? ???",
									""c_b"???????\t{ffff00}10.000 ???\n"\
									""c_b"???????\t{ffff00}10.000 ???\n"\
									"?????\t{ffff00}10.000 ???\n"\
									"??????\t{ffff00}10.000 ???\n"\
									"??????????\t{ffff00}10.000 ???\n"\
									"?????????\t{ffff00}10.000 ???.",
									"???????", "??????"
								);
						}

					}
				}
			}
			case DIALOG_BIZ_CAR_TUNING_LIGHTS:
			{
			  switch(listitem)
				{
				  case 0:
				  {
				     new vehicleid = GetPlayerOwnableCar(playerid);
				     SetVehicleLightsColors(vehicleid, 255, 0, 0);
				     GivePlayerMoneyEx(playerid, -10000, "???? ??????????");
			      }
				  case 1:
				  {
				     new vehicleid = GetPlayerOwnableCar(playerid);
                     SetVehicleLightsColors(vehicleid, 0, 255, 0);
                     GivePlayerMoneyEx(playerid, -10000, "???? ??????????");
				  }
				  case 2:
				  {
				     new vehicleid = GetPlayerOwnableCar(playerid);
				     SetVehicleLightsColors(vehicleid, 0, 0, 255);
				     GivePlayerMoneyEx(playerid, -10000, "???? ??????????");
				  }
				  case 3:
				  {
				     new vehicleid = GetPlayerOwnableCar(playerid);
				     SetVehicleLightsColors(vehicleid, 230, 255, 0);
				     GivePlayerMoneyEx(playerid, -10000, "???? ??????????");
				  }
				  case 4:
				  {
				     new vehicleid = GetPlayerOwnableCar(playerid);
				     SetVehicleLightsColors(vehicleid, 255, 0, 77);
				     GivePlayerMoneyEx(playerid, -10000, "???? ??????????");
				  }
				  case 5:
				  {
				     new vehicleid = GetPlayerOwnableCar(playerid);
				     SetVehicleLightsColors(vehicleid, 255, 119, 0);
				     GivePlayerMoneyEx(playerid, -10000, "???? ??????????");
				  }
		       }
			}
            case DIALOG_CHANGE_COLOR_CAR:
			{
			    new query[255],
					biz_id = GetPlayerInBiz(playerid),
					take_prods = 25;
						
			    if(response)
			    {
					if(GetPlayerMoneyEx(playerid) >= 250000)
					{
						new color1, color2, fmt_text[256],
						 	idx = GetPVarInt(playerid, "ownablecar_id");

						if(sscanf(inputtext, "P<,>dd", color1, color2))
						{
							SendClientMessage(playerid, 0xCECECEFF, "???????????? ????");
							new all_colors_str[1808], color_str[15];

							for(new idxx; idxx < 128; idxx ++)
							{
								format(color_str, sizeof color_str, "{%06x}%d | ", VehicleColoursTableRGBA[idxx]>>> 8, idxx);
								strcat(all_colors_str, color_str);
								if(!(idxx % 10)) strcat(all_colors_str, "\n");
							}
							strcat(all_colors_str,"\n{FFFFFF}??????? ????? ? ?????? ???? \n??????: 10,25");
						    Dialog(playerid, DIALOG_CHANGE_COLOR_CAR, DIALOG_STYLE_INPUT,"???????? ?????????ù",
							all_colors_str,
							"?????????", "??????");

							return 1;
						}
						else
						{
							if(!(-1 <= color1 <= 128))
							{
								SendClientMessage(playerid, 0xCECECEFF, "???? ????????? ?? 0 ?? 255");
								new all_colors_str[1808], color_str[15];

								for(new idxx; idxx < 128; idxx ++)
								{
									format(color_str, sizeof color_str, "{%06x}%d | ", VehicleColoursTableRGBA[idxx]>>> 8, idxx);
									strcat(all_colors_str, color_str);
									if(!(idxx % 10)) strcat(all_colors_str, "\n");
								}
								strcat(all_colors_str,"\n{FFFFFF}??????? ????? ? ?????? ???? \n??????: 10,25");
							    Dialog(playerid, DIALOG_CHANGE_COLOR_CAR, DIALOG_STYLE_INPUT,"???????? ?????????ù",
								all_colors_str,
								"?????????", "??????");

								return 1;
							}
							if(!(-1 <= color2 <= 128))
							{
								SendClientMessage(playerid, 0xCECECEFF, "???? ????????? ?? 0 ?? 255");
								new all_colors_str[1808], color_str[15];

								for(new idxx; idxx < 128; idxx ++)
								{
									format(color_str, sizeof color_str, "{%06x}%d | ", VehicleColoursTableRGBA[idxx]>>> 8, idxx);
									strcat(all_colors_str, color_str);
									if(!(idxx % 10)) strcat(all_colors_str, "\n");
								}
								strcat(all_colors_str,"\n{FFFFFF}??????? ????? ? ?????? ???? \n??????: 10,25");
							    Dialog(playerid, DIALOG_CHANGE_COLOR_CAR, DIALOG_STYLE_INPUT,"???????? ?????????ù",
								all_colors_str,
								"?????????", "??????");
								return 1;
							}
							
							format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-25000, GetBusinessData(GetPlayerInBiz(playerid), B_PRODS) > 0 ? GetBusinessData(GetPlayerInBiz(playerid), B_PRODS)-1 : 0, GetBusinessData(GetPlayerInBiz(playerid), B_PRODS) > 0 ? GetBusinessData(GetPlayerInBiz(playerid), B_BALANCE)+250000 : 0, GetPlayerAccountID(playerid), GetBusinessData(GetPlayerInBiz(playerid), B_SQL_ID));
							mysql_query(mysql, query, false);
							
							AddBusinessData(biz_id, B_PRODS, -, take_prods);
							AddBusinessData(biz_id, B_BALANCE, +, 250000);

							format(query, sizeof query, "UPDATE business SET products=%d, balance=%d WHERE id=%d", GetBusinessData(biz_id, B_PRODS), GetBusinessData(biz_id, B_BALANCE), GetBusinessData(biz_id, B_SQL_ID));
							mysql_query(mysql, query, false);

							mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,250000,%d)", GetBusinessData(biz_id, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), IsBusinessOwned(biz_id));
							mysql_query(mysql, query, false);

							SendClientMessage(playerid, 0xffff00FF, "?? ????????? ???? ?????? ?????????, ??ù ???? ????? ????????ù ???????? ? ????...");
							SendClientMessage(playerid, 0xffff00FF, "...????????? ? ????????? ???? ?????????, ??? ???????????.");

							GivePlayerMoneyEx(playerid, -250000, "???????? ????", true);


							mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET color_1='%d', color_2='%d'  WHERE id='%d' LIMIT 1", color1, color2, idx);
							mysql_query(mysql, fmt_text, false);

						}
					}
					else SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ????? (250.000)");
			    }
			}
			case DIALOG_BIZ_SHOP_24_7:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_SHOP_24_7))
						{
							new price;
							new take_prods;

							switch(listitem + 1)
							{
								case 1:
{
    price = 300;
    take_prods = 2;

    // ??????ù?? ????? ??????? ????????ù
    if(GetPlayerItemQuantity(playerid, ITEM_MEDKIT) < 10) // ????? 10 ???????
    {
        if(GetPlayerMoneyEx(playerid) >= price)
        {
            new query[255];

            if(GetBusinessData(businessid, B_PRODS) >= take_prods)
            {
                format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
            }
            else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
            mysql_query(mysql, query, false);

            if(!mysql_errno())
            {
                if(GetBusinessData(businessid, B_PRODS) >= take_prods)
                {
                    AddBusinessData(businessid, B_PRODS, -, take_prods);
                    AddBusinessData(businessid, B_BALANCE, +, price);
                }

                mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), gettime(), price, IsBusinessOwned(businessid));
                mysql_query(mysql, query, false);

                GivePlayerMoneyEx(playerid, -price, "??????? ???????", false, true);

                // ?????????? ??????? ????????ù
                GivePlayerItem(playerid, ITEM_MEDKIT, 2);

                SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ????? ???????. ??????????? {3399FF}/healme {66CC00}??ù ?? ????????????ù");

                format(query, sizeof query, "ù?????? ?????????? ???????: %d", GetPlayerItemQuantity(playerid, ITEM_MEDKIT));
                SendClientMessage(playerid, 0xDD90FFFF, query);
            }
            else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
        }
        else SendClientMessage(playerid, 0xCECECEFF, "????? ??????? ????? 300 ??????");
    }
    else SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ?????? ?????? ???????");
}
        						case 2:
                                {
                                    price = 2500;
                                    take_prods = 10;

//                                    if(GetPlayerData(playerid, P_PLAY_PLAYER) < 1)
//                                    {
                                    if(GetPlayerMoneyEx(playerid) >= price)
                                    {
                                        new query[255];

                                        if(GetBusinessData(businessid, B_PRODS) >= take_prods)
                                        {
                                            format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
                                        }
                                        else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
                                        mysql_query(mysql, query, false);

                                        if(!mysql_errno())
                                        {
                                            if(GetBusinessData(businessid, B_PRODS) >= take_prods)
                                            {
                                                AddBusinessData(businessid, B_PRODS, -, take_prods);
                                                AddBusinessData(businessid, B_BALANCE, +, price);
                                            }

                                            mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
                                            mysql_query(mysql, query, false);

                                            GivePlayerMoneyEx(playerid, -price, "??????? ????????? ? 24/7", false, true);

                                            GivePlayerItem(playerid, ITEM_HEADPHONES, 1);
                                            UpdatePlayerDatabaseInt(playerid, "player", GetPlayerData(playerid, P_PLAY_PLAYER));

                                            SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ????????. ??????????? {3399FF}/play {66CC00}??ù ?? ????????????ù.");

                                        }
                                        else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 28)");
                                    }
                                    else SendClientMessage(playerid, 0xCECECEFF, "???????? ???ù? 2500 $");
//                                    }
//                                    else SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ?????? ?????? ?????????!");
                                }
								case 3:
								{
									price = 150;
									take_prods = 1;

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];
										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ?????? ??????", false, true);
											GivePlayerWeapon(playerid, WEAPON_FLOWER, 1);

											SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ????? ??????");
											SendClientMessage(playerid, 0x66CC00FF, "??????????? {FFCD00}/present {66CC00}????? ???????? ?? ???? ??????");
										}
										else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 30)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "????? ????? 150 ??????");
								}
								case 4:
								{
									price = 400;
									take_prods = 2;

									if(GetPlayerMoneyEx(playerid) >= price)
									{
										new query[255];
										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
											}

											mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, query, false);

											GivePlayerMoneyEx(playerid, -price, "??????? ??????????? ??????", false, true);
											SetPlayerData(playerid, P_LOTTERY, random(900) + 100);

											CallLocalFunction("ShowPlayerLotteryDialog", "i", playerid);
											SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ?????????? ?????");
										}
										else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 32)");
									}
									else SendClientMessage(playerid, 0xCECECEFF, "?????????? ????? ????? 400 ??????");
								}
								case 5:
								{
									price = 110;
									take_prods = 1;

									if(!GetPlayerData(playerid, P_MASK))
									{
										if(GetPlayerMoneyEx(playerid) >= price)
										{
											new query[255];
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
											}
											else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
											mysql_query(mysql, query, false);

											if(!mysql_errno())
											{
												if(GetBusinessData(businessid, B_PRODS) >= take_prods)
												{
													AddBusinessData(businessid, B_PRODS, -, take_prods);
													AddBusinessData(businessid, B_BALANCE, +, price);
												}

												mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
												mysql_query(mysql, query, false);

												GivePlayerMoneyEx(playerid, -price, "??????? ?????", false, true);
												SetPlayerData(playerid, P_MASK, 1);

												SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ?????");
												SendClientMessage(playerid, 0x66CC00FF, "??????????? {FFCD00}/mask {66CC00}??ù ??????ù ?????? ???????????ù ?? ????? (?? 10 ?????)");
											}
											else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 33)");
										}
										else SendClientMessage(playerid, 0xCECECEFF, "????? ????? 110 ??????");
									}
									else SendClientMessage(playerid, 0x999999FF, "?? ??? ????????? ?????");
								}
								case 6:
								{
									price = 5000;
									take_prods = 2;

									if(!GetPlayerPhone(playerid))
									{
										if(GetPlayerMoneyEx(playerid) >= price)
										{
											new query[255];

											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,a.phone=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid) + 1000000, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)-price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
											}
											else format(query, sizeof query, "UPDATE accounts SET money=%d,phone=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid) + 1000000, GetPlayerAccountID(playerid));
											mysql_query(mysql, query, false);

											if(!mysql_errno())
											{
												if(GetBusinessData(businessid, B_PRODS) >= take_prods)
												{
													AddBusinessData(businessid, B_PRODS, -, take_prods);
													AddBusinessData(businessid, B_BALANCE, +, price);
												}

												mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
												mysql_query(mysql, query, false);

												GivePlayerMoneyEx(playerid, -price, "??????? ????????", false, true);
												SetPlayerData(playerid, P_PHONE, GetPlayerAccountID(playerid) + 1000000);

												SendClientMessage(playerid, 0x66CC00FF, "??????????? {0099FF}/c(/call) ??? /call [????? ????????] {66CC00}????? ??????? ??????.");
												SendClientMessage(playerid, 0x66CC00FF, "??ù ???????? SMS ????????ù ??????????? {0099FF}/sms{66CC00}. ?????? ???????: {0099FF}/menu > ?????? ?????? > ???????");

												format
												(
													query, sizeof query,
													"{FFFFFF}????????ù??!\n"\
													"?? ?????? ????????? ???????. ??? ?????: {0099FF}%d",
													GetPlayerPhone(playerid)
												);
												Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{66CC00}??????? ?????????? ????????", query, "???????", "");

												SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'?????????? ???????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
				                                SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");
											    GivePlayerMoneyEx(playerid, 5000, "?????????? ??????");

											    SetPlayerData(playerid, P_QUEST_2, 1);
											    UpdatePlayerDatabaseInt(playerid, "quest_2", 1);
											    
											    AddPlayerData(playerid, P_TOP_5, +, 1);
												UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
											}
											else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 25)");
										}
										else SendClientMessage(playerid, 0xCECECEFF, "????????? ??????? ????? 5000 ??????");
									}
									else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???? ????????? ???????");
								}
								case 7:
								{
									price = 2000;
									if(GetPlayerPhone(playerid))
									{
										if(GetPlayerMoneyEx(playerid) >= price)
										{
											Dialog
											(
												playerid, DIALOG_BIZ_CHANGE_PHONE_NUMBER, DIALOG_STYLE_INPUT,
												"{66CC00}????????? ??????",
												"{FFFFFF}??????? ????? ????? ? ???? ????\n\n"\
												"{FF6633}?????????ù:\n"\
												"{FFCD00}- ????? ?????? ???? ????????????,\n"\
												"????????: 284411\n"\
												"- ????? ?? ?????? ?????????ù ? 0\n\n"\
												"{FFFFFF}?? ????? ?????? ??????? ????\n"\
												"??????????? ?????. ??ù ?????\n"\
												"??????? ? ???? {3399FF}????? 0",
												"???????", "??????"
											);

											return 1;
										}
										else SendClientMessage(playerid, 0xCECECEFF, "??ù ????????? ?????? ???????? ?????????? 2000 ??????");
									}
									else SendClientMessage(playerid, 0x999999FF, "??????? ????? ?????????? ????????? ???????");

									callcmd::buy(playerid, "");
								}
								case 8:
								{
									if(GetPlayerPhone(playerid) != 0)
									{
										Dialog
										(
											playerid, DIALOG_BIZ_PHONE_BALANCE, DIALOG_STYLE_INPUT,
											"{FFCD00}?????????? ?????????? ????????",
											"{FFFFFF}??????? ?????, ?? ??????? ?????? ????????? ????:",
											"??????", "?????"
										);

										return 1;
									}
									else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");

									callcmd::buy(playerid, "");
								}
								default:
									return 1;
							}
						}
					}
				}
			}
			case DIALOG_BIZ_CELL_SALON:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(response)
					{
						if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_CELL_SALON))
						{
							new price;
							new take_prods;

							switch(listitem + 1)
							{
								case 1:
								{
									price = 2100;
									take_prods = 2;

									if(!GetPlayerPhone(playerid))
									{
										if(GetPlayerMoneyEx(playerid) >= price)
										{
											new query[255];

											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,a.phone=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid) + 1000000, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)-price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
											}
											else format(query, sizeof query, "UPDATE accounts SET money=%d,phone=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid) + 1000000, GetPlayerAccountID(playerid));
											mysql_query(mysql, query, false);

											if(!mysql_errno())
											{
												if(GetBusinessData(businessid, B_PRODS) >= take_prods)
												{
													AddBusinessData(businessid, B_PRODS, -, take_prods);
													AddBusinessData(businessid, B_BALANCE, +, price);
												}

												mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
												mysql_query(mysql, query, false);

												GivePlayerMoneyEx(playerid, -price, "??????? ????????", false, true);
												SetPlayerData(playerid, P_PHONE, GetPlayerAccountID(playerid) + 1000000);

												SendClientMessage(playerid, 0x66CC00FF, "??????????? {0099FF}/c(/call) ??? /call [????? ????????] {66CC00}????? ??????? ??????.");
												SendClientMessage(playerid, 0x66CC00FF, "??ù ???????? SMS ????????ù ??????????? {0099FF}/sms{66CC00}. ?????? ???????: {0099FF}/menu > ?????? ?????? > ???????");

												format
												(
													query, sizeof query,
													"{FFFFFF}????????ù??!\n"\
													"?? ?????? ????????? ???????. ??? ?????: {0099FF}%d",
													GetPlayerPhone(playerid)
												);
												Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{66CC00}??????? ?????????? ????????", query, "???????", "");

												SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'?????????? ???????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
				                                SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");
											    GivePlayerMoneyEx(playerid, 5000, "?????????? ??????");

											    SetPlayerData(playerid, P_QUEST_2, 1);
											    UpdatePlayerDatabaseInt(playerid, "quest_2", 1);
											    
											    AddPlayerData(playerid, P_TOP_5, +, 1);
												UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
											}
											else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 25)");
										}
										else SendClientMessage(playerid, 0xCECECEFF, "????????? ??????? ????? 170 ??????");
									}
									else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???? ????????? ???????");
								}
								case 2:
								{
									price = 450;
									if(GetPlayerPhone(playerid))
									{
										if(GetPlayerMoneyEx(playerid) >= price)
										{
											Dialog
											(
												playerid, DIALOG_BIZ_CHANGE_PHONE_NUMBER, DIALOG_STYLE_INPUT,
												"{66CC00}????????? ??????",
												"{FFFFFF}??????? ????? ????? ? ???? ????\n\n"\
												"{FF6633}?????????ù:\n"\
												"{FFCD00}- ????? ?????? ???? ????????????,\n"\
												"????????: 284411\n"\
												"- ????? ?? ?????? ?????????ù ? 0\n\n"\
												"{FFFFFF}?? ????? ?????? ??????? ????\n"\
												"??????????? ?????. ??ù ?????\n"\
												"??????? ? ???? {3399FF}????? 0",
												"???????", "??????"
											);

											return 1;
										}
										else SendClientMessage(playerid, 0xCECECEFF, "??ù ????????? ?????? ???????? ?????????? 450 ??????");
									}
									else SendClientMessage(playerid, 0x999999FF, "??????? ????? ?????????? ????????? ???????");

									callcmd::buy(playerid, "");
								}
								case 3:
								{
									price = 200;
									if(GetPlayerPhone(playerid))
									{
										if(GetPlayerMoneyEx(playerid) >= price)
										{
											Dialog
											(
												playerid, DIALOG_BIZ_CHANGE_PHONE_COLOR, DIALOG_STYLE_LIST,
												"{66CC00}????????? ????? ????????",
												"1. ???????????\n"\
												"2. ?????\n"\
												"3. ?????????\n"\
												"4. ???????????\n"\
												"5. ???????\n"\
												"6. ???????\n"\
												"7. ???????\n"\
												"8. ù????-?????\n"\
												"9. ??????\n"\
												"10. ?????",
												"?????ù??", "??????"
											);

											return 1;
										}
										else SendClientMessage(playerid, 0xCECECEFF, "??ù ????????? ????? ???????? ?????????? 200 ??????");
									}
									else SendClientMessage(playerid, 0x999999FF, "??????? ????? ?????????? ????????? ???????");

									callcmd::buy(playerid, "");
								}
								case 4:
								{
									if(GetPlayerPhone(playerid) != 0)
									{
										Dialog
										(
											playerid, DIALOG_BIZ_PHONE_BALANCE, DIALOG_STYLE_INPUT,
											"{FFCD00}?????????? ?????????? ????????",
											"{FFFFFF}??????? ?????, ?? ??????? ?????? ????????? ????:",
											"??????", "?????"
										);

										return 1;
									}
									else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");

									callcmd::buy(playerid, "");
								}
								default:
									return 1;
							}
						}
					}
				}
			}
			case DIALOG_BIZ_PHONE_BALANCE:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_SHOP_24_7))
					{
						if(response)
						{
							new sum = strval(inputtext);
							if(sum > 0 && IsNumeric(inputtext))
							{
								if(GetPlayerMoneyEx(playerid) >= sum)
								{
									new query[128];

									format(query, sizeof query, "UPDATE accounts SET money=%d,phone_balance=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-sum, GetPlayerData(playerid, P_PHONE_BALANCE)+sum, GetPlayerAccountID(playerid));
									mysql_query(mysql, query, false);

									if(!mysql_errno())
									{
										GivePlayerMoneyEx(playerid, -sum, "?????????? ????? ????????", false, true);
										AddPlayerData(playerid, P_PHONE_BALANCE, +, sum);

										format(query, sizeof query, "?? ????????? ???? ?????????? ???????? ?? {FF9900}%d ???", sum);
										SendClientMessage(playerid, 0x66CC00FF, query);

										format(query, sizeof query, "?????? ?? ????? %d ???", GetPlayerData(playerid, P_PHONE_BALANCE));
										SendClientMessage(playerid, 0x66CC00FF, query);

										return 1;
									}
									else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 15)");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "? ??? ?? ??????? ?????");
							}

							Dialog
							(
								playerid, DIALOG_BIZ_PHONE_BALANCE, DIALOG_STYLE_INPUT,
								"{FFCD00}?????????? ?????????? ????????",
								"{FFFFFF}??????? ?????, ?? ??????? ?????? ????????? ????:",
								"??????", "?????"
							);
						}
						else callcmd::buy(playerid, "");
					}
				}
			}
			case DIALOG_BIZ_CHANGE_PHONE_NUMBER:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_SHOP_24_7))
					{
						if(response)
						{
							new buffer = strlen(inputtext);
							if((1 <= buffer <= 10) && IsNumeric(inputtext))
							{
								new fmt_str[255];
								new number = strval(inputtext);

								new price = 450;
								new take_prods = 3;

								if(number > 0)
								{
									if(inputtext[0] != '0' && buffer == 6)
									{
										new Cache: result;
										buffer = 0;

										format(fmt_str, sizeof fmt_str, "SELECT id FROM accounts WHERE phone=%d LIMIT 1", number);
										result = mysql_query(mysql, fmt_str, true);

										buffer = cache_num_rows();
										cache_delete(result);

										if(!buffer)
										{
											if(GetPlayerMoneyEx(playerid) >= price)
											{
												if(GetBusinessData(businessid, B_PRODS) >= take_prods)
												{
													format(fmt_str, sizeof fmt_str, "UPDATE accounts a,business b SET a.money=%d,a.phone=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, number, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
												}
												else format(fmt_str, sizeof fmt_str, "UPDATE accounts SET money=%d,phone=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, number, GetPlayerAccountID(playerid));
												mysql_query(mysql, fmt_str, false);

												if(!mysql_errno())
												{
													if(GetBusinessData(businessid, B_PRODS) >= take_prods)
													{
														AddBusinessData(businessid, B_PRODS, -, take_prods);
														AddBusinessData(businessid, B_BALANCE, +, price);
													}

													mysql_format(mysql, fmt_str, sizeof fmt_str, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
													mysql_query(mysql, fmt_str, false);

													GivePlayerMoneyEx(playerid, -price, "????? ?????? ????????[1]", false, true);
													SetPlayerData(playerid, P_PHONE, number);

													format
													(
														fmt_str, sizeof fmt_str,
														"{FFFFFF}????? ???????? ???????\n"\
														"ù????? ? ????  ????? ??ù?????ù ?? ?????? {0099FF}%d",
														GetPlayerPhone(playerid)
													);
													return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{66CC00}????? ???????", fmt_str, "???????", "");
												}
												else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 26)");
											}
											else
											{
												return SendClientMessage(playerid, 0xCECECEFF, "???????????? ?????");
											}
										}
										else SendClientMessage(playerid, 0xFF6600FF, "????????? ???? ????? ??? ???ù?");
									}
									else SendClientMessage(playerid, 0xFF6600FF, "????? ?????? ???????????. ????????? ???????");
								}
								else
								{
									if(GetPlayerMoneyEx(playerid) >= price)
									{
										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											format(fmt_str, sizeof fmt_str, "UPDATE accounts a,business b SET a.money=%d,a.phone=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid) + 1000000, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
										}
										else format(fmt_str, sizeof fmt_str, "UPDATE accounts SET money=%d,phone=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid) + 1000000, GetPlayerAccountID(playerid));
										mysql_query(mysql, fmt_str, false);

										if(!mysql_errno())
										{
											if(GetBusinessData(businessid, B_PRODS) >= take_prods)
											{
												AddBusinessData(businessid, B_PRODS, -, take_prods);
												AddBusinessData(businessid, B_BALANCE, +, price);
											}

											mysql_format(mysql, fmt_str, sizeof fmt_str, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
											mysql_query(mysql, fmt_str, false);

											GivePlayerMoneyEx(playerid, -price, "????? ?????? ????????[2]", false, true);
											SetPlayerData(playerid, P_PHONE, GetPlayerAccountID(playerid) + 1000000);

											format(fmt_str, sizeof fmt_str, "{FFFFFF}?????????? ??? ??????????? ?????: {0099FF}%d", GetPlayerPhone(playerid));
											return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{66CC00}????? ???????", fmt_str, "???????", "");
										}
										else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 26)");
									}
									else
									{
										return SendClientMessage(playerid, 0xCECECEFF, "???????????? ?????");
									}
								}
							}

							Dialog
							(
								playerid, DIALOG_BIZ_CHANGE_PHONE_NUMBER, DIALOG_STYLE_INPUT,
								"{66CC00}????????? ??????",
								"{FFFFFF}??????? ????? ????? ? ???? ????\n\n"\
								"{FF6633}?????????ù:\n"\
								"{FFCD00}- ????? ?????? ???? ????????????,\n"\
								"????????: 284411\n"\
								"- ????? ?? ?????? ?????????ù ? 0\n\n"\
								"{FFFFFF}?? ????? ?????? ??????? ????\n"\
								"??????????? ?????. ??ù ?????\n"\
								"??????? ? ???? {3399FF}????? 0",
								"???????", "??????"
							);
						}
						else callcmd::buy(playerid, "");
					}
				}
			}
			case DIALOG_BIZ_CHANGE_PHONE_COLOR:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_SHOP_24_7))
					{
						if(response)
						{
							if(0 <= listitem <= 9)
							{
								new price = 200;
								new take_prods = 1;

								if(GetPlayerMoneyEx(playerid) >= price)
								{
									new query[255];

									if(GetBusinessData(businessid, B_PRODS) >= take_prods)
									{
										format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,a.phone_color=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, listitem, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
									}
									else format(query, sizeof query, "UPDATE accounts SET money=%d,phone_color=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-price, listitem, GetPlayerAccountID(playerid));
									mysql_query(mysql, query, false);

									if(!mysql_errno())
									{
										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											AddBusinessData(businessid, B_PRODS, -, take_prods);
											AddBusinessData(businessid, B_BALANCE, +, price);
										}

										mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
										mysql_query(mysql, query, false);

										GivePlayerMoneyEx(playerid, -price, "????? ????? ????????", false, true);

										SetPlayerData(playerid, P_PHONE_COLOR, listitem);
										SendClientMessage(playerid, 0x3399FFFF, "?? ???????? ???? ?????? ?????????? ????????");
									}
									else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 27)");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "??ù ????????? ????? ???????? ?????????? 200 ??????");
							}
						}
						else callcmd::buy(playerid, "");
					}
				}
			}
			case DIALOG_BIZ_LOTTERY:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_SHOP_24_7))
					{
						if(response)
						{
							if(strlen(inputtext))
							{
								new number = strval(inputtext);
								if(100 <= number <= 999 && IsNumeric(inputtext))
								{
									new fmt_str[64];
									SetPlayerData(playerid, P_LOTTERY, number);

									format(fmt_str, sizeof fmt_str, "?????????? ????? ???????? ?? {00CCCC}%d", number);
									SendClientMessage(playerid, 0x66CC00FF, fmt_str);
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????????? ????? ?? ???? ????????, ?.?. ???? ??????? ???????");
							}
						}
					}
				}
			}
			case DIALOG_BIZ_CLUB:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_CLUB, 15.0)
					|| IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_CASINO, 15.0))
					{
						if(response)
						{
							if(0 <= listitem <= 9)
							{
								new const
									item_price[10] = {60, 100, 200, 270, 300, 450, 630, 750, 50, 80};

								if(GetPlayerMoneyEx(playerid) >= item_price[listitem])
								{
									new query[255];
									new take_prods = 1;

									if(GetBusinessData(businessid, B_PRODS) >= take_prods)
									{
										format(query, sizeof query, "UPDATE accounts a,business b SET a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-item_price[listitem], GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+item_price[listitem], GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
									}
									else format(query, sizeof query, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)-item_price[listitem], GetPlayerAccountID(playerid));
									mysql_query(mysql, query, false);

									if(!mysql_errno())
									{
										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											AddBusinessData(businessid, B_PRODS, -, take_prods);
											AddBusinessData(businessid, B_BALANCE, +, item_price[listitem]);
										}
										GivePlayerMoneyEx(playerid, -item_price[listitem], "??????? ? ?????/??????", false, true);
										GivePlayerDrinkItem(playerid, listitem);

										mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), item_price[listitem], IsBusinessOwned(businessid));
										mysql_query(mysql, query, false);

										switch(listitem+1)
										{
											case 1: Action(playerid, "?????(?) ????? ????????", 	15.0, false);
											case 2: Action(playerid, "?????(?) ??????? ????", 		15.0, false);
											case 3: Action(playerid, "?????(?) ??????? ????", 		15.0, false);
											case 4: Action(playerid, "?????(?) ??????? ???????????",15.0, false);
											case 5: Action(playerid, "?????(?) ??????? ?????", 		15.0, false);
											case 6: Action(playerid, "?????(?) ??????? ????ù??",	15.0, false);
											case 7: Action(playerid, "?????(?) ??????? ?????", 		15.0, false);
											case 8: Action(playerid, "?????(?) ??????? ???????", 	15.0, false);
											case 9: Action(playerid, "?????(?) ???????", 			15.0, false);
											case 10:Action(playerid, "?????(?) ??????", 			15.0, false);
										}
									}
									else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 22)");
								}
								else SendClientMessage(playerid, 0x999999FF, "? ??? ?? ??????? ?????");
							}
						}
					}
				}
			}
			case DIALOG_BIZ_REALTOR_BIZ_LIST:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_REALTOR_BIZ, 15.0))
					{
						if(response)
						{
							if(0 <= listitem <= MAX_BUSINESS-1)
							{
								new price = 70; //

								if(GetPlayerMoneyEx(playerid) >= price)
								{
									new fmt_str[300];
									GivePlayerMoneyEx(playerid, -price, "???????? ???? ? ??????? (?????????? ??????????)", true, true);

									businessid = g_business_realtor_list_idx[listitem];
									SetPlayerUseListitem(playerid, businessid);
									new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];
									GetCityName(GetBusinessData(businessid, B_POS_X), GetBusinessData(businessid, B_POS_Y), city);
									GetAreaName(GetBusinessData(businessid, B_POS_X), GetBusinessData(businessid, B_POS_Y), area);
									format
									(
										fmt_str, sizeof fmt_str,
										"{FFFFFF}????????:\t\t\t%s\n"\
										"????? ???????:\t\t%d\n"\
										"????? / ???????:\t\t%s\n"\
										"?????:\t\t\t\t%s\n"\
										"?????????:\t\t\t%d\n\n"\
										"{FFFFFF}?? ????? ?????? ?????????? ?????????? ???????.\n"\
										"??ù ????? ??????? ?????? \"????\". {FFCD00}?????? ????? 290 ???",
										GetBusinessData(businessid, B_NAME),
										businessid,
										city,
										area,
										GetBusinessData(businessid, B_PRICE)
									);
									Dialog(playerid, DIALOG_BIZ_REALTOR_BIZ_INFO, DIALOG_STYLE_MSGBOX, "{CC9900}?????????ù ? ????????? ???????", fmt_str, "????", "???????");
								}
								else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
							}
						}
					}
				}
			}
			case DIALOG_BIZ_REALTOR_BIZ_INFO:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_REALTOR_BIZ, 15.0))
					{
						if(response)
						{
							new price = 290; //

							businessid = GetPlayerUseListitem(playerid);
							if(GetPlayerMoneyEx(playerid) >= price)
							{
								GivePlayerMoneyEx(playerid, -price, "???????? ???? ??????? (?????????? ??????????)", true, true);

								TogglePlayerSpectating(playerid, true);
								//ShowPlayerWaitPanel(playerid);

								SetPlayerVirtualWorld(playerid, playerid + 50);
								SendClientMessage(playerid, 0xFFFFFFFF, "??????????? {99CC00}~k~~PED_SPRINT~ {FFFFFF}??ù ??????");

								SetPlayerData(playerid, P_REALTOR_TYPE, REALTOR_TYPE_BIZ);
								SetTimerEx("SetRealtorMakePhoto", 1000, false, "iii", playerid, REALTOR_TYPE_BIZ, businessid);
							}
							else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
						}
					}
				}
			}
			case DIALOG_BIZ_REALTOR_HOME_GET:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_REALTOR_HOME, 15.0))
					{
						if(response)
						{
							new price = 50;
							new houseid = strval(inputtext);

							if(strlen(inputtext) && IsNumeric(inputtext) && (0 <= houseid <= g_house_loaded-1))
							{
								if(GetPlayerMoneyEx(playerid) >= price)
								{
									GivePlayerMoneyEx(playerid, -price, "???????? ???? ? ???? (??????????? ????????)", true, true);

									new fmt_str[512];
									new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];
									new type = GetHouseData(houseid, H_TYPE);
									new entranceid = GetHouseData(houseid, H_ENTRACE);

									SetPlayerUseListitem(playerid, houseid);
									if(entranceid != -1)
									{
										GetCityName(GetEntranceData(entranceid, E_POS_X), GetEntranceData(entranceid, E_POS_Y), city);
										GetAreaName(GetEntranceData(entranceid, E_POS_X), GetEntranceData(entranceid, E_POS_Y), area);
										format
										(
											fmt_str, sizeof fmt_str,
											"{FFFFFF}ù?? / ????????:\t\t%s\n"\
											"????? ????????:\t\t%d\n"\
											"????? ????????:\t\t%d\n"\
											"????? / ???????:\t\t%s\n"\
											"?????:\t\t\t\t%s\n"\
											"?????????:\t\t\t%d\n"\
											"?????????? ??????:\t\t%d\n"\
											"??????:\t\t\t\t%s\n\n"\
											"{FFFFFF}?? ?????? ?????????? ??? ????ù??? ??????? ???? ????????\n"\
											"??ù ????? ??????? ?????? \"????\". {FFCD00}?????? ????? 250 ??????",
											GetHouseData(houseid, H_NAME),
											GetHouseData(houseid, H_FLAT_ID) + 1,
											entranceid + 1,
											city,
											area,
											GetHouseData(houseid, H_PRICE),
											GetHouseTypeInfo(type, HT_ROOMS),
											IsHouseOwned(houseid) ? ("{FF6600}???????? ???ù??") : ("{00CC33}???????? ????????")
										);
									}
									else
									{
										GetCityName(GetHouseData(houseid, H_POS_X), GetHouseData(houseid, H_POS_Y), city);
										GetAreaName(GetHouseData(houseid, H_POS_X), GetHouseData(houseid, H_POS_Y), area);
										new fmt_str[200];
										
											format(fmt_str, sizeof fmt_str,
											"{FFFFFF}ù?? / ????????:\t\t%s\n"\
											"????? ????:\t\t\t%d\n"\
											"????? / ???????:\t\t%s\n"\
											"?????:\t\t\t\t%s\n"\
											"?????????:\t\t\t%d\n"\
											"?????????? ??????:\t\t%d\n"\
											"??????:\t\t\t\t%s\n\n"\
											"{FFFFFF}?? ????? ?????? ?????????? ??? ????ù??? ???? ??? ???????.\n"\
											"??ù ????? ??????? ?????? \"????\". {FFCD00}?????? ????? 250 ???",
											GetHouseData(houseid, H_NAME),
											houseid,
											city,
											area,
											GetHouseData(houseid, H_PRICE),
											GetHouseTypeInfo(type, HT_ROOMS),
											IsHouseOwned(houseid) ? ("{FF6600}??? ???ù?") : ("{00CC33}??? ????????")										
											);
									}
									Dialog(playerid, DIALOG_BIZ_REALTOR_HOME_INFO, DIALOG_STYLE_LIST, "{FF9933}?????????ù ? ????????? ????", fmt_str, "????", "?????");
								}
								else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
							}
							else
							{
								if(!(0 <= houseid <= g_house_loaded-1))
									SendClientMessage(playerid, 0xCECECEFF, "???? ??? ??? ?? ?????????");

								ShowPlayerRealtorHomeDialog(playerid);
							}
						}
					}
				}
			}
			case DIALOG_BIZ_REALTOR_HOME_INFO:
			{
				new businessid = GetPlayerInBiz(playerid);
				if(businessid != -1)
				{
					if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_REALTOR_HOME, 15.0))
					{
						if(response)
						{
							new price = 250; //

							if(GetPlayerMoneyEx(playerid) >= price)
							{
								GivePlayerMoneyEx(playerid, -price, "???????? ???? ???? (??????????? ????????)", true, true);

								TogglePlayerSpectating(playerid, true);
								//ShowPlayerWaitPanel(playerid);

								SetPlayerVirtualWorld(playerid, playerid + 3000);
								SendClientMessage(playerid, 0xFFFFFFFF, "??????????? {00CC99}~k~~PED_SPRINT~ {FFFFFF}??ù ??????");

								SetPlayerData(playerid, P_REALTOR_TYPE, REALTOR_TYPE_HOUSE);
								SetTimerEx("SetRealtorMakePhoto", 1000, false, "iii", playerid, REALTOR_TYPE_HOUSE, GetPlayerUseListitem(playerid));
							}
							else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
						}
						else ShowPlayerRealtorHomeDialog(playerid);
					}
				}
			}
			case DIALOG_BIZ_CLOTHING_BUY:
			{
				new businessid = GetPlayerInBiz(playerid);
				print("?");
				if(businessid != -1)
				{
						if(response)
						{
							new select_skin = GetPlayerSelectSkin(playerid);
							if(select_skin != -1)
							{
								new price = g_business_clothing_skins[GetPlayerSex(playerid)][select_skin][1];
								new skinid = g_business_clothing_skins[GetPlayerSex(playerid)][select_skin][0];

								new take_prods = random(8) + 6;
								new biz_price = price * 20 / 100;

								if(GetPlayerMoneyEx(playerid) >= price)
								{
									new query[255];
									if(GetBusinessData(businessid, B_PRODS) >= take_prods)
									{
										format(query, sizeof query, "UPDATE accounts a,business b SET a.skin=%d,a.money=%d,b.products=%d,b.balance=%d WHERE a.id=%d AND b.id=%d", skinid, GetPlayerMoneyEx(playerid)-price, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+biz_price, GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
									}
									else format(query, sizeof query, "UPDATE accounts SET skin=%d,money=%d WHERE id=%d LIMIT 1", skinid, GetPlayerMoneyEx(playerid)-price, GetPlayerAccountID(playerid));
									mysql_query(mysql, query, false);

									if(!mysql_errno())
									{
										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											AddBusinessData(businessid, B_PRODS, -, take_prods);
											AddBusinessData(businessid, B_BALANCE, +, biz_price);
										}
										GivePlayerMoneyEx(playerid, -price, "??????? ????? (??????? ??????)", false, true);
										SetPlayerData(playerid, P_SKIN, skinid);
										
										GivePlayerOwnableSkin(playerid, skinid);

										ExitPlayerClothingShopPanel(playerid);
										SendClientMessage(playerid, 0x66CC00FF, "????????ù?? ? ???????? ????? ??????! ??ù ?????? ?????? (/myskins)");

										mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
										mysql_query(mysql, query, false);

										AddPlayerData(playerid, P_QUEST_EXP_6, +, 1);
										UpdatePlayerDatabaseInt(playerid, "quest_exp_6", GetPlayerData(playerid, P_QUEST_EXP_6));

										if(GetPlayerData(playerid, P_QUEST_EXP_6) == 1)
										{
										    SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'??????ù ?? ?????????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
				                                SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");
										    GivePlayerMoneyEx(playerid, 5000, "?????????? ??????");

										    SetPlayerData(playerid, P_QUEST_6, 1);
										    UpdatePlayerDatabaseInt(playerid, "quest_6", 1);
										    
										    AddPlayerData(playerid, P_TOP_5, +, 1);
											UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
										}
									}
									else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 36)");
								}
								else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
							}
						}
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_HOUSE_BUY:
			{
				new houseid = GetPlayerUseListitem(playerid);

				if(houseid >= 0 && response)
				{
					if(GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL) == -1)
					{
						if(GetPlayerHouse(playerid) == -1)
						{
							if(IsPlayerInRangeOfHouse(playerid, houseid, 5.0))
							{
								if(!IsHouseOwned(houseid))
								{
									if(GetPlayerMoneyEx(playerid) >= GetHouseData(houseid, H_PRICE))
									{
									    //if(Config[sBuyBiz] == 0)
							    		//{
										
										BuyPlayerHouse(playerid, houseid);

										EnterPlayerToHouse(playerid, houseid);
										PlayerPlaySound(playerid, 1058, 0.0, 0.0, 0.0);

										GameTextForPlayer(playerid, "~b~welcome ~g~to~n~~y~new ~w~home!", 4000, 1);
										Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{3399FF}????? ???", "{FFFFFF}??? ????? ????????? ?? ??? ? ????????? ?????????? ????? {FFCD00}(/gps)", "??", "");
								//	}
									//	else
								    	//	return Send(playerid,-1,"? ?????? ?????? ??? ???? ?? ??????? ?? ???????? ? ???????!");
								    
									}
									else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ??????? ????? ????");
								}
								else
								{
									new fmt_str[64];

									format(fmt_str, sizeof fmt_str, "???? ??? ??? ??????. ????????: %s", GetHouseData(houseid, H_OWNER_NAME));
									SendClientMessage(playerid, 0xCECECEFF, fmt_str);
								}
							}
						}
						else SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???? ???. ????? ?????? ????? - ?????????? ??????? ??????");
					}
					else SendClientMessage(playerid, 0xCECECEFF, "?? ???????? ????? ? ?????????. ????? ?????????ù ????? ???????? ????");
				}
			}
			case DIALOG_HOUSE_SELL:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
				if(houseid != -1)
				{
					if(response)
					{
						SellHouse(playerid);
					}
				}
			}
			case DIALOG_HOUSE_INFO:
			{
				if(response)
				{
					new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
					if(houseid != -1)
					{
						ShowPlayerHouseDialog(playerid, HOUSE_OPERATION_PARAMS);
					}
				}
			}
			case DIALOG_HOUSE_PARAMS:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
				if(houseid != -1)
				{
					if(response)
					{
						ShowPlayerHouseDialog(playerid, listitem + 1);
					}
					else callcmd::home(playerid, "");
				}
			}
			case DIALOG_HOUSE_IMPROVEMENTS:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
				if(houseid != -1)
				{
					if(response)
					{
						if(0 <= listitem <= sizeof g_house_improvements - 1)
						{
							new i_level = GetHouseData(houseid, H_IMPROVEMENTS);
							new i_price = g_house_improvements[listitem][I_PRICE];

							if(i_level >= sizeof g_house_improvements)
							{
								SendClientMessage(playerid, 0x999999FF, "?? ??? ????????? ??? ????????? ????????ù ??ù ????");
							}
							else if(i_level < listitem)
							{
								SendClientMessage(playerid, 0xCECECEFF, "???? ??????? ????????? ???? ??????????");
							}
							else if(i_level > listitem)
							{
								SendClientMessage(playerid, 0xCECECEFF, "?? ??? ?????? ???? ??????? ?????????");
							}
							else if(GetPlayerMoneyEx(playerid) < i_price)
							{
								new fmt_str[64];

								format(fmt_str, sizeof fmt_str, "??ù ??????? %d ?????ù ????????? ?????????? %d ??????", listitem + 1, i_price);
								SendClientMessage(playerid, 0xCECECEFF, fmt_str);
							}
							else if(i_level == 6 && GetHouseData(houseid, H_ENTRACE) != -1)
							{
								SendClientMessage(playerid, 0xCECECEFF, "?????????? ??ù ???????");
							}
							else
							{
								new fmt_str[128];

								format(fmt_str, sizeof fmt_str, "UPDATE accounts a, houses h SET a.money=%d, h.improvements=%d WHERE a.id=%d AND h.id=%d", GetPlayerMoneyEx(playerid)-i_price, i_level + 1, GetPlayerAccountID(playerid), GetHouseData(houseid, H_SQL_ID));
								mysql_query(mysql, fmt_str, false);

								if(!mysql_errno())
								{
									GivePlayerMoneyEx(playerid, -i_price, "??????? ????????? ??ù ????", false, true);

									format(fmt_str, sizeof fmt_str, "?? ???????? ???? ??? ?? {FFCD00}%s {3399FF}?????ù", GetNumericName(listitem + 1));
									SendClientMessage(playerid, 0x3399FFFF, fmt_str);

									AddHouseData(houseid, H_IMPROVEMENTS, +, 1);
									switch(listitem + 1)
									{
										case 1:
										{
											SendClientMessage(playerid, 0x66CC00FF, "ù????? ????? ????? ?? ???? ?????????? ?????? {FF9900}~k~~SNEAK_ABOUT~{66CC00}, ???ù ? ?????");
											SendClientMessage(playerid, 0x999999FF, "?????????????? ????? ???????? ????? ? ????? ????");
										}
										case 2:
										{
											SendClientMessage(playerid, 0x66CC00FF, "ù????? ? ???? ?????? ????? ???????? ???????");
											SendClientMessage(playerid, 0x999999FF, "?? ? ???? ????? ? ????? ?????? ?????? ???????????? ??");

											HouseHealthInit(houseid);
										}
										case 3:
										{
											SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ????????? ???ù? ????????? ? ????? ???? ? ??????? ??????? {FF9900}/live");
											SendClientMessage(playerid, 0x999999FF, "? ???? ????? ???????????ù ??????? ??????, ??????? ? ??? ??????");
										}
										case 4:
										{
											SendClientMessage(playerid, 0x66CC00FF, "?? ???? ??ù ???? ????????? ???????ù, ??????ù ???? ????? ??????? ?????????? ??????????");
											SendClientMessage(playerid, 0x999999FF, "????????ù ?????, ?????????ù ?????????? ????????? ? 2 ????");
										}
										case 5:
										{
											SendClientMessage(playerid, 0x66CC00FF, "??????????? {3399FF}/makestore {66CC00}??ù ?????????ù ?????. ? ??? ????? ????? ??????? ????????? ????");
											SendClientMessage(playerid, 0x999999FF, "? ????? ?????? ????? ????????? ???? ?? ?????? ?????. ??ù ???????ù ????? ???????? {3399FF}/use");

											HouseStoreInit(houseid);
										}
									}
								}
								else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 35)");
							}
						}
					}
					ShowPlayerHouseDialog(playerid, HOUSE_OPERATION_PARAMS);
				}
			}
			case DIALOG_HOUSE_RENTERS:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
				if(houseid != -1)
				{
					if(response)
					{
						if(0 <= listitem <= MAX_HOUSE_ROOMS-1)
						{
							new room = GetPlayerListitemValue(playerid, listitem);
							ShowHouseRenterInfo(playerid, houseid, room);
						}
					}
					else ShowPlayerHouseDialog(playerid, HOUSE_OPERATION_PARAMS);
				}
			}
			case DIALOG_HOUSE_RENTER_INFO:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
				if(houseid != -1)
				{
					if(response)
					{
						new room = GetPlayerUseListitem(playerid);
						if(IsHouseRoomOwned(houseid, room))
						{
							switch(listitem + 1)
							{
								case 4:
								{
									new fmt_str[95];
									format
									(
										fmt_str, sizeof fmt_str,
										"{FFFFFF}?? ????????????? ?????? ???????? {FFCD00}%s {FFFFFF}?? ?????? ?????",
										GetHouseRenterInfo(houseid, room, HR_OWNER_NAME)
									);
									return Dialog(playerid, DIALOG_HOUSE_RENTER_EVICT, DIALOG_STYLE_MSGBOX, "{33AACC}????????? ??????????", fmt_str, "??", "???");
								}
							}
							ShowHouseRenterInfo(playerid, houseid, room);
						}
						else SendClientMessage(playerid, 0x999999FF, "? ???? ??????? ??? ????? ?? ?????????");
					}
					else ShowPlayerHouseDialog(playerid, HOUSE_OPERATION_PARAMS);
				}
			}
			case DIALOG_HOUSE_RENTER_EVICT:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
				if(houseid != -1)
				{
					if(response)
					{
						new room = GetPlayerUseListitem(playerid);
						if(IsHouseRoomOwned(houseid, room))
						{
							new fmt_str[64],
								renter_id = GetPlayerID(GetHouseRenterInfo(houseid, room, HR_OWNER_NAME));

							format(fmt_str, sizeof fmt_str, "?? ???????? %s ?? ?????? ????", GetHouseRenterInfo(houseid, room, HR_OWNER_NAME));
							SendClientMessage(playerid, 0x66CC00FF, fmt_str);

							EvictHouseRenter(houseid, room, renter_id, playerid);
						}
						else SendClientMessage(playerid, 0x999999FF, "? ???? ??????? ??? ????? ?? ?????????");
					}
					else ShowPlayerHouseDialog(playerid, HOUSE_OPERATION_PARAMS);
				}
			}
			case DIALOG_HOUSE_EVICT:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_ROOM);
				if(houseid != -1)
				{
					if(response)
					{
						new roomid = GetPlayerData(playerid, P_HOUSE_ROOM);
						new owner_id = GetPlayerID(GetHouseData(houseid, H_OWNER_NAME));

						EvictHouseRenter(houseid, roomid, playerid);

						if(owner_id != INVALID_PLAYER_ID)
						{
							new fmt_str[45 + 1];

							format(fmt_str, sizeof fmt_str, "%s ????????ù ?? ?????? ????", GetPlayerNameEx(playerid));
							SendClientMessage(owner_id, 0x66CC00FF, fmt_str);
						}
						SendClientMessage(playerid, 0x66CC00FF, "?? ?????????? ?? ????");
					}
				}
			}
			case DIALOG_HOUSE_MOVE_STORE:
			{
				new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
				if(houseid != -1)
				{
					if(response)
					{
						if(GetPlayerInHouse(playerid) == houseid)
						{
							if(GetHouseData(houseid, H_IMPROVEMENTS) >= 5)
							{
								new type = GetHouseData(houseid, H_TYPE);
								if(IsPlayerInRangeOfPoint(playerid, 50.0, GetHouseTypeInfo(type, HT_ENTER_POS_X), GetHouseTypeInfo(type, HT_ENTER_POS_Y), GetHouseTypeInfo(type, HT_ENTER_POS_Z)))
								{
									if(GetHouseData(houseid, H_STORE_LABEL) != Text3D:-1)
									{
										new query[128];

										new Float: pos_x, Float: pos_y, Float: pos_z;
										GetPlayerPos(playerid, pos_x, pos_y, pos_z);

										SetHouseData(houseid, H_STORE_X, pos_x);
										SetHouseData(houseid, H_STORE_Y, pos_y);
										SetHouseData(houseid, H_STORE_Z, pos_z);

										DestroyDynamic3DTextLabel(GetHouseData(houseid, H_STORE_LABEL));
										SetHouseData(houseid, H_STORE_LABEL, Text3D:-1);

										HouseStoreInit(houseid);

										format(query, sizeof query, "UPDATE houses SET store_x=%f,store_y=%f,store_z=%f WHERE id=%d LIMIT 1", pos_x, pos_y, pos_z, GetHouseData(houseid, H_SQL_ID));
										mysql_tquery(mysql, query, "", "");
									}
								}
							}
						}
					}
				}
			}
			case DIALOG_HOUSE_STORE:
			{
				if(response)
				{
					new house_id = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);

					new item_name[2][10] = {"?????????", "?????????"},
							title[32];

					if(0 <= listitem <= 1)
					{
						format(title, sizeof title, "{FFCD00}???????? %s", item_name[listitem]);

						Dialog
						(
							playerid, DIALOG_HOUSE_STORE_PUT, DIALOG_STYLE_INPUT,
							title,
							"{FFFFFF}??????? ??????????, ??????? ?? ?????? {FFCD00}????????:",
							"????????", "??????"
						);

						SetPVarInt(playerid, "store_index", listitem);
					}
					else if(4 <= listitem <= 5)
					{
						format(title, sizeof title, "{FFCD00}??ù?? %s", item_name[listitem - 4]);

						Dialog
						(
							playerid, DIALOG_HOUSE_STORE_TAKE, DIALOG_STYLE_INPUT,
							title,
							"{FFFFFF}??????? ??????????, ??????? ?? ?????? {FFCD00}??ù??:",
							"??ù??", "??????"
						);

						SetPVarInt(playerid, "store_index", listitem - 4);
					}
					else
					{
						new query[80];

						switch(listitem)
						{
							case 2:
							{
								if(GetHouseData(house_id, H_STORE_WEAPON))
									SendClientMessage(playerid, 0x999999FF, "????? ? ????? ??? ???ù?? ?????? ???????");

								else
								{
									new weapon_id = GetPlayerWeapon(playerid),
										weapon_ammo = GetPlayerAmmo(playerid);

									if(!weapon_id)
										SendClientMessage(playerid, 0x999999FF, "? ??? ? ????? ??? ?????ù");

									else
									{
										if(weapon_ammo > 3000)
											SendClientMessage(playerid, 0x999999FF, "? ???? ?? ????????ù ????? ?????????? ????????");

										else
										{
											if(weapon_id == 23 || weapon_id == 24
											|| weapon_id == 25 || weapon_id == 29
											|| weapon_id == 30 || weapon_id == 31
											|| weapon_id == 33 || weapon_id == 34)
											{
												SetHouseData(house_id, H_STORE_WEAPON, 	weapon_id);
												SetHouseData(house_id, H_STORE_AMMO, 	weapon_ammo);

												SetPlayerAmmo(playerid, weapon_id, 0);

												mysql_format(mysql, query, sizeof query, "UPDATE houses SET store_weapon=%d, store_ammo=%d WHERE id=%d",
												weapon_id, weapon_ammo, GetHouseData(house_id, H_SQL_ID));
												mysql_query(mysql, query, false);

												format(query, sizeof query, "?? ???????? %s ? ????", GetWeaponName(weapon_id));
												SendClientMessage(playerid, 0x3399FFFF, query);
											}
											else SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ?????? ???? ??? ?????ù ? ????");
										}
									}
								}
							}
							case 3:
							{
								if(!GetPlayerTeamEx(playerid))
								{
									if(GetHouseData(house_id, H_STORE_SKIN))
										SendClientMessage(playerid, 0x999999FF, "????? ? ????? ??? ???ù?? ?????? ???????");

									else
									{
										SetHouseData(house_id, H_STORE_SKIN, GetPlayerData(playerid, P_SKIN));

										mysql_format(mysql, query, sizeof query, "UPDATE houses SET store_skin=%d WHERE id=%d",
										GetPlayerSkinEx(playerid), GetHouseData(house_id, H_SQL_ID));
										mysql_query(mysql, query, false);

										SetPlayerData(playerid, P_SKIN, 97);
										UpdatePlayerDatabaseInt(playerid, "skin", 97);

										SetPlayerSkin(playerid, 97);

										SendClientMessage(playerid, 0x3399FFFF, "?? ???????? ???? ?????? ? ????");
									}
								}
								else SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ??????? ? ????? ?????? ???????????");
							}
							case 6:
							{
								if(!GetHouseData(house_id, H_STORE_WEAPON))
									SendClientMessage(playerid, 0x999999FF, "? ????? ??? ?????ù");

								else
								{
									new weapon_id = GetHouseData(house_id, H_STORE_WEAPON),
										weapon_ammo = GetHouseData(house_id, H_STORE_AMMO);

									GivePlayerWeapon(playerid, weapon_id, weapon_ammo);

									SetHouseData(house_id, H_STORE_WEAPON, 	0);
									SetHouseData(house_id, H_STORE_AMMO, 	0);

									mysql_format(mysql, query, sizeof query, "UPDATE houses SET store_weapon=0, store_ammo=0 WHERE id=%d",
									GetHouseData(house_id, H_SQL_ID));
									mysql_query(mysql, query, false);

									format(query, sizeof query, "?? ??????? ?? ????? %s ? %d ????.", GetWeaponName(weapon_id), weapon_ammo);
									SendClientMessage(playerid, 0x3399FFFF, query);
								}
							}
							case 7:
							{
								if(!GetPlayerTeamEx(playerid))
								{
									if(!GetHouseData(house_id, H_STORE_SKIN))
										SendClientMessage(playerid, 0x999999FF, "? ????? ??? ??????");

									else
									{
										SetPlayerData(playerid, P_SKIN, GetHouseData(house_id, H_STORE_SKIN));
										UpdatePlayerDatabaseInt(playerid, "skin", GetHouseData(house_id, H_STORE_SKIN));

										SetPlayerSkin(playerid, GetPlayerSkinEx(playerid));

										SetHouseData(house_id, H_STORE_SKIN, 	0);

										mysql_format(mysql, query, sizeof query, "UPDATE houses SET store_skin=0 WHERE id=%d",
										GetHouseData(house_id, H_SQL_ID));
										mysql_query(mysql, query, false);

										SendClientMessage(playerid, 0x3399FFFF, "?? ??????????? ? ?????? ?? ?????");
									}
								}
								else SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ??????????ù, ?????ù?? ? ???????????");
							}
						}

						UpdateHouseStore(house_id);

						callcmd::use(playerid, "");
					}
				}
			}
			case DIALOG_HOUSE_STORE_TAKE:
			{
				if(response)
				{
					new value = strval(inputtext),
						house_id = GetPlayerHouse(playerid, HOUSE_TYPE_HOME),
						query[55];

					if(value < 1)
						SendClientMessage(playerid, 0x999999FF, "???????????? ????????");

					else
					{
						switch(GetPVarInt(playerid, "store_index"))
						{
							case 0:
							{
								if(value > GetHouseData(house_id, H_STORE_METALL))
									SendClientMessage(playerid, 0x999999FF, "? ????? ??? ?????? ?????????? ??????????");

								else
								{
									if(GetPlayerData(playerid, P_METALL) + value > GetPlayerMaxStorage(playerid, STORAGE_METALL))
										SendClientMessage(playerid, 0xCECECEFF, "?? ?? ??????? ?????? ? ????? ????? ?????????? ??????????");

									else
									{
										AddPlayerData(playerid, P_METALL, +, value);
										UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

										SetHouseData(house_id, H_STORE_METALL, GetHouseData(house_id, H_STORE_METALL) - value);

										mysql_format(mysql, query, sizeof query, "UPDATE houses SET store_metall=%d WHERE id=%d",
										GetHouseData(house_id, H_STORE_METALL), GetHouseData(house_id, H_SQL_ID));
										mysql_query(mysql, query, false);

										format(query, sizeof query, "?? ??????? ?? ????? %d ?? ??????????", value);
										SendClientMessage(playerid, 0x3399FFFF, query);
									}
								}
							}
							case 1:
							{
								if(value > GetHouseData(house_id, H_STORE_DRUGS))
									SendClientMessage(playerid, 0x999999FF, "? ????? ??? ?????? ?????????? ??????????");

								else
								{
									if(GetPlayerData(playerid, P_DRUGS) + value > GetPlayerMaxStorage(playerid, STORAGE_DRUGS))
										SendClientMessage(playerid, 0xCECECEFF, "?? ?? ??????? ?????? ? ????? ????? ?????????? ??????????");

									else
									{
										AddPlayerData(playerid, P_DRUGS, +, value);
										UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_DRUGS));

										SetHouseData(house_id, H_STORE_DRUGS, GetHouseData(house_id, H_STORE_DRUGS) - value);

										mysql_format(mysql, query, sizeof query, "UPDATE houses SET store_drugs=%d WHERE id=%d",
										GetHouseData(house_id, H_STORE_DRUGS), GetHouseData(house_id, H_SQL_ID));
										mysql_query(mysql, query, false);

										format(query, sizeof query, "?? ??????? ?? ????? %d ? ??????????", value);
										SendClientMessage(playerid, 0x3399FFFF, query);
									}
								}
							}
						}

						UpdateHouseStore(house_id);
					}
				}

				callcmd::use(playerid, "");
			}
			case DIALOG_HOUSE_STORE_PUT:
			{
				if(response)
				{
					new value = strval(inputtext),
						house_id = GetPlayerHouse(playerid, HOUSE_TYPE_HOME),
						query[55];

					if(value < 1)
						SendClientMessage(playerid, 0x999999FF, "???????????? ????????");

					else
					{
						switch(GetPVarInt(playerid, "store_index"))
						{
							case 0:
							{
								if(value > GetPlayerData(playerid, P_METALL))
									SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ??????????");

								else
								{
									if(GetHouseData(house_id, H_STORE_METALL) + value > 700)
										SendClientMessage(playerid, 0x999999FF, "? ????? ?? ??????? ?????");

									else
									{
										AddPlayerData(playerid, P_METALL, -, value);
										UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

										SetHouseData(house_id, H_STORE_METALL, GetHouseData(house_id, H_STORE_METALL) + value);

										mysql_format(mysql, query, sizeof query, "UPDATE houses SET store_metall=%d WHERE id=%d",
										GetHouseData(house_id, H_STORE_METALL), GetHouseData(house_id, H_SQL_ID));
										mysql_query(mysql, query, false);

										format(query, sizeof query, "?? ???????? ? ???? %d ?? ??????????", value);
										SendClientMessage(playerid, 0x3399FFFF, query);
									}
								}
							}
							case 1:
							{
								if(value > GetPlayerData(playerid, P_DRUGS))
									SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ??????????");

								else
								{
									AddPlayerData(playerid, P_DRUGS, -, value);
									UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_DRUGS));

									SetHouseData(house_id, H_STORE_DRUGS, GetHouseData(house_id, H_STORE_DRUGS) + value);

									mysql_format(mysql, query, sizeof query, "UPDATE houses SET store_drugs=%d WHERE id=%d",
									GetHouseData(house_id, H_STORE_DRUGS), GetHouseData(house_id, H_SQL_ID));
									mysql_query(mysql, query, false);

									format(query, sizeof query, "?? ???????? ? ???? %d ? ??????????", value);
									SendClientMessage(playerid, 0x3399FFFF, query);
								}
							}
						}

						UpdateHouseStore(house_id);
					}
				}

				callcmd::use(playerid, "");
			}

			case DIALOG_HOUSE_ENTER:
			{
				new houseid = GetPlayerUseListitem(playerid);

				if(houseid >= 0 && response)
				{
					if(GetPlayerInHouse(playerid) == -1)
					{
						if(!GetHouseData(houseid, H_LOCK_STATUS) || GetPlayerHouse(playerid, HOUSE_TYPE_HOME) == houseid)
						{
							EnterPlayerToHouse(playerid, houseid);
						}
						else GameTextForPlayer(playerid, "~r~Closed", 3000, 1);
					}
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_ENTRANCE_LIFT:
			{
				if(response)
				{
					new entranceid = GetPlayerInEntrance(playerid);
					if(entranceid != -1)
					{
						new floor = GetPlayerInEntranceFloor(playerid);
						if(floor != -1)
						{
							if(0 <= listitem <= MAX_ENTRANCE_FLOORS-1)
							{
								new to_floor = GetPlayerListitemValue(playerid, listitem);
								if(!to_floor)
								{
									SetPlayerPosEx(playerid, 560.7483,23.6653,1049.2731, -180.0, 1, entranceid + 2500);
								}
								else SetPlayerPosEx(playerid, 560.7483,23.6653,1049.2731, -180.0, 1, to_floor + 1);

								SetPlayerInEntranceFloor(playerid, to_floor);
							}
						}
					}
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_HOTEL:
			{
				if(response)
				{
					new hotel_id = GetPlayerInHotelID(playerid);
					if(hotel_id != -1)
					{
						switch(listitem + 1)
						{
							case 1:
							{
								ShowPlayerHotelFloorsInfo(playerid, hotel_id);
							}
							case 2:
							{
								if(GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL) == -1)
								{
									new free_room = GetHotelFreeRoom(hotel_id);
									if(free_room != -1)
									{
										SetPlayerUseListitem(playerid, free_room);

										new fmt_str[128];
										format
										(
											fmt_str, sizeof fmt_str,
											"{FFFFFF}?? ?????????? ??? ?????????ù ? ?????? %d ?? %d ?????\n"\
											"??????????ù ????? 1000 ??????. ?? ????????",
											(free_room % 12) + 1,
											(free_room / 12) + 1
										);
										Dialog(playerid, DIALOG_HOTEL_REG_ROOM, DIALOG_STYLE_MSGBOX, "{66CC99}????????????? ???????????", fmt_str, "???????", "?????");
									}
									else
									{
										Dialog
										(
											playerid, DIALOG_HOTEL_FLOOR_INFO, DIALOG_STYLE_MSGBOX,
											"{66CC99}????????? ??????",
											"{FFFFFF}? ???? ????????? ??? ????????? ???????",
											"?????", "???????"
										);
									}
								}
								else
								{
									Dialog
									(
										playerid, DIALOG_HOTEL_FLOOR_INFO, DIALOG_STYLE_MSGBOX,
										"{66CC99}??????????ù",
										"{FFFFFF}?? ??? ???????? ????? ? ?????????",
										"?????", "???????"
									);
								}
							}
							case 3:
							{
								ShowPlayerHotelClientMenu(playerid, hotel_id);
							}
						}
					}
				}
			}
			case DIALOG_HOTEL_FLOOR_SELECT:
			{
				new hotel_id = GetPlayerInHotelID(playerid);
				if(hotel_id != -1)
				{
					if(response)
					{
						ShowPlayerHotelFloorInfo(playerid, hotel_id, listitem);
					}
					else ShowPlayerHotelDialog(playerid);
				}
			}
			case DIALOG_HOTEL_FLOOR_INFO:
			{
				if(response)
				{
					ShowPlayerHotelDialog(playerid);
				}
			}
			case DIALOG_HOTEL_FLOOR_LIFT:
			{
				if(response)
				{
					new hotel_id = GetPlayerInHotelID(playerid);
					if(hotel_id != -1)
					{
						new max_floors = g_hotel_rooms_loaded[hotel_id] / 12;
						if(0 <= listitem <= max_floors-1)
						{
							new to_floor = GetPlayerListitemValue(playerid, listitem);

							if(!to_floor)
							{
								new businessid = GetPlayerInBiz(playerid);
								new type = GetBusinessData(businessid, B_INTERIOR);

								SetPlayerPosEx(playerid, 730.1479, 599.7930, 1002.9598, 89.9507, GetBusinessInteriorInfo(type, BT_ENTER_INTERIOR), businessid + 255);
							}
							else SetPlayerPosEx(playerid, 1276.0446, -773.2361, 1202.7220, 360.0, to_floor, ((hotel_id + 1) * 200) + (to_floor + 1000));

							SetPlayerData(playerid, P_IN_HOTEL_FLOOR, to_floor);
						}
					}
				}
			}
			case DIALOG_HOTEL_REG_ROOM:
			{
				new hotel_id = GetPlayerInHotelID(playerid);
				if(hotel_id != -1)
				{
					if(response)
					{
						new room_id = GetPlayerUseListitem(playerid);
						new businessid = GetPlayerInBiz(playerid);

						if(GetPlayerHouse(playerid) == -1)
						{
							if(!IsHotelRoomOwned(hotel_id, room_id))
							{
								new price = 1000;
								new take_prods = 2;

								if(GetPlayerMoneyEx(playerid) >= price)
								{
									new query[300];
									new time = gettime();
									new rent_time = (time - (time % 86400)) + 86400;

									if(GetBusinessData(businessid, B_PRODS) >= take_prods)
									{
										format(query, sizeof query, "UPDATE accounts a,hotels h,business b SET a.money=%d,a.house_type=%d,a.house_room=%d,a.house=%d,h.owner_id=%d,h.rent_time=%d,h.status=0,b.products=%d,b.balance=%d WHERE a.id=%d AND h.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, HOUSE_TYPE_HOTEL, room_id, hotel_id, GetPlayerAccountID(playerid), rent_time, GetBusinessData(businessid, B_PRODS)-take_prods, GetBusinessData(businessid, B_BALANCE)+price, GetPlayerAccountID(playerid), GetHotelData(hotel_id, room_id, H_SQL_ID),GetBusinessData(businessid, B_SQL_ID));
									}
									else format(query, sizeof query, "UPDATE accounts a, hotels h SET a.money=%d,a.house_type=%d,a.house_room=%d,a.house=%d,h.owner_id=%d,h.rent_time=%d,h.status=0 WHERE a.id=%d AND h.id=%d", GetPlayerMoneyEx(playerid)-price, HOUSE_TYPE_HOTEL, room_id, hotel_id, GetPlayerAccountID(playerid), rent_time, GetPlayerAccountID(playerid), GetHotelData(hotel_id, room_id, H_SQL_ID));
									mysql_query(mysql, query, false);

									if(!mysql_errno())
									{
										if(GetBusinessData(businessid, B_PRODS) >= take_prods)
										{
											AddBusinessData(businessid, B_PRODS, -, take_prods);
											AddBusinessData(businessid, B_BALANCE, +, price);
										}
										SetPlayerData(playerid, P_HOUSE, hotel_id);
										SetPlayerData(playerid, P_HOUSE_ROOM, room_id);
										SetPlayerData(playerid, P_HOUSE_TYPE, HOUSE_TYPE_HOTEL);

										SetHotelData(hotel_id, room_id, H_OWNER_ID, GetPlayerAccountID(playerid));
										SetHotelData(hotel_id, room_id, H_RENT_DATE, 	rent_time);
										SetHotelData(hotel_id, room_id, H_STATUS, 		false);

										format(g_hotel[hotel_id][room_id][H_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);

										GivePlayerMoneyEx(playerid, -price, "??????? ?????? ? ?????", false, true);
										EnterPlayerToHotelRoom(playerid, hotel_id, room_id);

										SendClientMessage(playerid, 0x3399FFFF, "?? ??ù?? ????? ? ?????????");
										SendClientMessage(playerid, 0x66CC00FF, "?????????: ???????? ?????????? ????? ?? ?????? ????? ? ??????????????? ??????");
										SendClientMessage(playerid, 0xFFFFFFFF, "??????? {66CC99}~k~~SNEAK_ABOUT~ {FFFFFF}??ù ?????? ?? ??????");

										mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(businessid, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), price, IsBusinessOwned(businessid));
										mysql_query(mysql, query, false);
									}
									else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 37)");
								}
								else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ????? ????? ??ù?? ???? ?????");
							}
							else SendClientMessage(playerid, 0xFF6600FF, "????????, ?? ???? ????? ??? ???ù?");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???? ?????. ????? ??????? ??? ????? ???????? ??????");
					}
					else ShowPlayerHotelDialog(playerid);
				}
			}
			case DIALOG_HOTEL_CLIENT_MENU:
			{
				new hotel_id = GetPlayerInHotelID(playerid);
				if(hotel_id == GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL))
				{
					if(response)
					{
						switch(listitem + 1)
						{
							case 1: // ???????? ??????????
							{
								ShowPlayerHotelRoomPayForRent(playerid);
							}
							case 2: // ?????????ù ? ??????????
							{
								new vehicleid = GetPlayerOwnableCar(playerid);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									new model_id = GetVehicleData(vehicleid, V_MODELID);
									if(model_id)
									{
										new fmt_str[64];
										new index = GetVehicleData(vehicleid, V_ACTION_ID);

										format(fmt_str, sizeof fmt_str, "??????: %s (????? ?????? %d)", GetVehicleName(vehicleid), model_id);
										SendClientMessage(playerid, 0x99FF66FF, fmt_str);

										if(!(GetOwnableCarData(index, OC_COLOR_1) == -1 || GetOwnableCarData(index, OC_COLOR_2) == -1))
										{
											format(fmt_str, sizeof fmt_str, "???? 1: ID %d   ???? 2: ID %d", GetOwnableCarData(index, OC_COLOR_1), GetOwnableCarData(index, OC_COLOR_2));
											SendClientMessage(playerid, 0x99FF66FF, fmt_str);
										}
										else SendClientMessage(playerid, 0x99FF66FF, "????? ??????????: ?????????");

										format(fmt_str, sizeof fmt_str, "???. ?????????: %d ???", GetVehicleInfo(model_id - 400, VI_PRICE));
										SendClientMessage(playerid, 0x99FF66FF, fmt_str);
									}
								}
								else
								{
									if(GetPlayerOwnableCars(playerid) == 0)
										SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
									else
										SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
								}
							}
							case 3: // ???????? ????????? ?? GPS
							{
								callcmd::getmycar(playerid, "");
							}
							case 4: // ????????? ????????? ? ????? (1000 ???)
							{
								new vehicleid = GetPlayerOwnableCar(playerid);
								if(vehicleid != INVALID_VEHICLE_ID)
								{
									if(!SetVehicleToHotelRespawn(hotel_id, vehicleid))
									{
										SendClientMessage(playerid, 0xCECECEFF, "? ?????? ?????? ?? ?? ?????? ???????????? ??? ???????");
									}
								}
								else
								{
									if(GetPlayerOwnableCars(playerid) == 0)
										SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
									else
										SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
								}
							}
							case 5: // ??????? ?????????
							{
								callcmd::sellcar(playerid, "");
							}
							case 6: // ?????????ù ?? ????ù
							{
								Dialog
								(
									playerid, DIALOG_HOTEL_OUT, DIALOG_STYLE_MSGBOX,
									"{66CC99}?????????",
									"{FFFFFF}?? ??????? ??? ?????? ?????????ù ?? ????ù?",
									"??", "???"
								);
							}
							default:
								return 1;
						}
					}
					else ShowPlayerHotelDialog(playerid);
				}
			}
			case DIALOG_HOTEL_PAY_FOR_ROOM:
			{
				new hotel_id = GetPlayerInHotelID(playerid);
				new room_id = GetPlayerData(playerid, P_HOUSE_ROOM);

				if(hotel_id == GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL))
				{
					if(response)
					{
						new days = strval(inputtext);
						if(days > 0 && IsNumeric(inputtext))
						{
							new fmt_str[128 + 1];

							new time = gettime();
							new rent_time = GetHotelData(hotel_id, room_id, H_RENT_DATE);

							new rent_days = GetElapsedTime(rent_time, time, CONVERT_TIME_TO_DAYS);
							new total_price = days * 1000;

							if((rent_days + days) <= 30)
							{
								if(GetPlayerBankMoney(playerid) >= total_price)
								{
									rent_time = (rent_time - (rent_time % 86400)) + (days * 86400);

									format(fmt_str, sizeof fmt_str, "UPDATE accounts a, hotels h SET a.bank=%d,h.rent_time=%d WHERE a.id=%d AND h.id=%d", GetPlayerBankMoney(playerid)-total_price, rent_time, GetPlayerAccountID(playerid), GetHotelData(hotel_id, room_id, H_SQL_ID));
									mysql_query(mysql, fmt_str, false);

									if(!mysql_errno())
									{
										AddPlayerData(playerid, P_BANK, -, total_price);
										SetHotelData(hotel_id, room_id, H_RENT_DATE, rent_time);

										format(fmt_str, sizeof fmt_str, "? ??????????? ????? ??ù?? {3399FF}%d ???", total_price);
										SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

										format(fmt_str, sizeof fmt_str, "?? ??????? ?????????? ? ????? ??? ?? {3399FF}%d ????", days);
										SendClientMessage(playerid, 0x66CC00FF, fmt_str);
									}
								}
								else
								{
									SendClientMessage(playerid, 0xB5B500FF, "?? ???????? ?????????? ????? ?? ??????? ????? ??ù ??????");

									format(fmt_str, sizeof fmt_str, "??ù ????????ù ?????? ?? %d ???? ?????????? %d ???", days, total_price);
									SendClientMessage(playerid, 0x999999FF, fmt_str);
								}
							}
							else SendClientMessage(playerid, 0xB5B500FF, "?? ?? ?????? ???????? ?? ?????? ?????? ??? ?? 30 ????");
						}
						ShowPlayerHotelRoomPayForRent(playerid);
					}
					else ShowPlayerHotelClientMenu(playerid, hotel_id);
				}
			}
			case DIALOG_HOTEL_OUT:
			{
				new hotel_id = GetPlayerInHotelID(playerid);
				new room_id = GetPlayerData(playerid, P_HOUSE_ROOM);

				if(hotel_id == GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL))
				{
					if(response)
					{
						new query[155];

						format(query, sizeof query, "UPDATE accounts a,hotels h SET a.house_type=-1,a.house_room=-1,a.house=-1,h.owner_id=0,h.rent_time=0 WHERE a.id=%d AND h.id=%d", GetPlayerAccountID(playerid), GetHotelData(hotel_id, room_id, H_SQL_ID));
						mysql_query(mysql, query, false);

						if(!mysql_errno())
						{
							SetPlayerData(playerid, P_HOUSE, 		-1);
							SetPlayerData(playerid, P_HOUSE_ROOM, 	-1);
							SetPlayerData(playerid, P_HOUSE_TYPE, 	-1);

							SetHotelData(hotel_id, room_id, H_OWNER_ID, 0);
							SetHotelData(hotel_id, room_id, H_RENT_DATE, 	0);
							SetHotelData(hotel_id, room_id, H_STATUS, 		false);

							SendClientMessage(playerid, 0x3399FFFF, "?? ?????????? ?? ????ù");
						}
					}
					else ShowPlayerHotelClientMenu(playerid, hotel_id);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_OWNABLE_CAR:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);
					new fam_id = GetPlayerIdFamily(playerid);
					if(vehicleid != INVALID_VEHICLE_ID)
					{
						switch(listitem + 1)
						{
							case 1: // ??????? / ???????
							{
								callcmd::lock(playerid, "1");
							}
							case 2: // ???????? ????????? ?? GPS
							{
								callcmd::getmycar(playerid, "");
							}
							case 3: // ?????????? ?????????
							{
								ShowTrunkDialog(playerid, vehicleid, true);
							}
							case 4: // ????????? ?? ?????????
							{
								ShowOwnableCarPass(playerid, vehicleid);
							}
							case 5: // ??ù?? ???????? ?????
							{
								
							}
							case 6: // ????????? ?????????ù
							{
								callcmd::park(playerid, "");
							}
							case 7: // ????????? ?????????
							{
								if(UnloadPlayerOwnableCar(playerid))
								{
								    launch[playerid] = 0;
								    diski[playerid] = 0;
								    fars[playerid] = 0;
								    nitro[playerid] = 0;
									SendClientMessage(playerid, 0xFFFFFFFF, "{ffff00}| {ffffff}??? ????????? ??????? ????????!");
								}
								//else SendClientMessage(playerid, 0x999999FF, "? ??????? ???????? ??????? ?????????? ??? ?? ?????? 5 ?????");
       						}
								case 8:
							{
							    ShowVehicleImproveDialog(playerid);
							}
							case 9:
							{
							    MoveOwnableCar(playerid, vehicleid, fam_id);
							}
							default:
								return 1;
						}
						//callcmd::car(playerid, "");
					}
				}
			}

			case DIALOG_OWNABLE_CAR_LOAD_BAT:
			{
				if(response)
				{
					new idx = GetPVarInt(playerid, "ownablecar_id"),
						Float: x,
						Float: y,
						Float: z,
						Cache: result,
						query[100];

					mysql_format(mysql, query, sizeof query, "SELECT pos_x, pos_y, pos_z FROM ownable_cars WHERE id='%d'", idx);
					result = mysql_query(mysql, query, true);

					if(cache_num_rows())
					{
						x = cache_get_row_float(0, 0);
						y = cache_get_row_float(0, 1);
						z = cache_get_row_float(0, 2);
					}

					cache_delete(result);

					switch(listitem + 1)
					{
						case 1:
						{
							if(GetPlayerGPSInfo(playerid, G_ENABLED) == GPS_STATUS_OFF)
							{
								if(GetPlayerMoneyEx(playerid) >= 300)
								{
									GivePlayerMoneyEx(playerid, -300, "????? ù? ?? GPS", true, true);

									EnablePlayerGPS(playerid, x, y, z, "?????????????? ?????? ?????????? ???????? ?? GPS");
									return 1;
								}
								else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ????? GPS ??? ???????? ?????");
						}
						case 2:
						{
							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "????????ù ??????. ù???????? ??? ????????.");
								return 1;
							}
							else
							{
								if(GetPVarInt(playerid, "rent_true") != 1)
								{
									if(LoadOwnableCar(idx) != -1)
									{
										PlayerOwnableCarInit(playerid);
										//LoadTun(playerid);
										SendClientMessage(playerid, 0x66CC33FF, "??? ????????? ??????? ????????!");
									}
									else SendClientMessage(playerid, 0x999999FF, "?????? ??? ???????? ??????? ??????????");
								}
								else 
								{
									if(GetPlayerMoneyEx(playerid) >= GetPVarInt(playerid, "price_rent"))
									{
										if(LoadOwnableCarRentBat(playerid, idx) != -1)
										{
											PlayerOwnableCarInit(playerid);
											//LoadTun(playerid);
											PutPlayerInVehicle(playerid, GetPlayerData(playerid, P_OWNABLE_CAR), 0);
											SendClientMessage(playerid, 0x66CC33FF, "??? ????????? ??????? ????????!");

											GivePlayerMoneyEx(playerid, -GetPVarInt(playerid, "price_rent"));

											DeletePVar(playerid, "price_rent");
											DeletePVar(playerid, "rent_true");
										}
										else SendClientMessage(playerid, 0x999999FF, "?????? ??? ???????? ??????? ??????????");
									}
								}
							}
						}
					}
				}
				else
				{
					if(GetPVarInt(playerid, "show_menu"))
					{
						DeletePVar(playerid, "show_menu");
						callcmd::car(playerid, "");
					}
				}
				
				return 1;
			}
			
			case DIALOG_OWNABLE_CAR_LOAD_LUT:
			{
				if(response)
				{
					new idx = GetPVarInt(playerid, "ownablecar_id"),
						Float: x,
						Float: y,
						Float: z,
						Cache: result,
						query[100];

					mysql_format(mysql, query, sizeof query, "SELECT pos_x, pos_y, pos_z FROM ownable_cars WHERE id='%d'", idx);
					result = mysql_query(mysql, query, true);

					if(cache_num_rows())
					{
						x = cache_get_row_float(0, 0);
						y = cache_get_row_float(0, 1);
						z = cache_get_row_float(0, 2);
					}

					cache_delete(result);

					switch(listitem + 1)
					{
						case 1:
						{
							if(GetPlayerGPSInfo(playerid, G_ENABLED) == GPS_STATUS_OFF)
							{
								if(GetPlayerMoneyEx(playerid) >= 300)
								{
									GivePlayerMoneyEx(playerid, -300, "????? ù? ?? GPS", true, true);

									EnablePlayerGPS(playerid, x, y, z, "?????????????? ?????? ?????????? ???????? ?? GPS");
									return 1;
								}
								else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ????? GPS ??? ???????? ?????");
						}
						
						case 2:
						{
							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "????????ù ??????. ù???????? ??? ????????.");
								return 1;
							}
							else
							{
								if(GetPVarInt(playerid, "rent_true") != 1)
								{
									if(LoadOwnableCar(idx) != -1)
									{
										PlayerOwnableCarInit(playerid);
										//LoadTun(playerid);
										SendClientMessage(playerid, 0x66CC33FF, "??? ????????? ??????? ????????!");
									}
									else SendClientMessage(playerid, 0x999999FF, "?????? ??? ???????? ??????? ??????????");
								}
								else 
								{
									if(GetPlayerMoneyEx(playerid) >= GetPVarInt(playerid, "price_rent"))
									{
										if(LoadOwnableCarRentLut(playerid, idx) != -1)
										{
											PlayerOwnableCarInit(playerid);
											//LoadTun(playerid);
											PutPlayerInVehicle(playerid, GetPlayerData(playerid, P_OWNABLE_CAR), 0);
											SendClientMessage(playerid, 0x66CC33FF, "??? ????????? ??????? ????????!");

											GivePlayerMoneyEx(playerid, -GetPVarInt(playerid, "price_rent"));
											DeletePVar(playerid, "price_rent");
											DeletePVar(playerid, "rent_true");
										}
										else SendClientMessage(playerid, 0x999999FF, "?????? ??? ???????? ??????? ??????????");
									}
								}
							}
						}
					}
				}
				else
				{
					if(GetPVarInt(playerid, "show_menu"))
					{
						DeletePVar(playerid, "show_menu");
						callcmd::car(playerid, "");
					}
				}
				
				return 1;
			}
			
			case DIALOG_OWNABLE_CAR_LOAD_ARZ:
			{
				if(response)
				{
					new idx = GetPVarInt(playerid, "ownablecar_id"),
						Float: x,
						Float: y,
						Float: z,
						Cache: result,
						query[100];

					mysql_format(mysql, query, sizeof query, "SELECT pos_x, pos_y, pos_z FROM ownable_cars WHERE id='%d'", idx);
					result = mysql_query(mysql, query, true);

					if(cache_num_rows())
					{
						x = cache_get_row_float(0, 0);
						y = cache_get_row_float(0, 1);
						z = cache_get_row_float(0, 2);
					}

					cache_delete(result);

					switch(listitem + 1)
					{
						case 1:
						{
							if(GetPlayerGPSInfo(playerid, G_ENABLED) == GPS_STATUS_OFF)
							{
								if(GetPlayerMoneyEx(playerid) >= 300)
								{
									GivePlayerMoneyEx(playerid, -300, "????? ù? ?? GPS", true, true);

									EnablePlayerGPS(playerid, x, y, z, "?????????????? ?????? ?????????? ???????? ?? GPS");
									return 1;
								}
								else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ????? GPS ??? ???????? ?????");
						}
						
						case 2:
						{
							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "????????ù ??????. ù???????? ??? ????????.");
								return 1;
							}
							else
							{
								if(GetPVarInt(playerid, "rent_true") != 1)
								{
									if(LoadOwnableCar(idx) != -1)
									{
										PlayerOwnableCarInit(playerid);
										//LoadTun(playerid);
										SendClientMessage(playerid, 0x66CC33FF, "??? ????????? ??????? ????????!");
									}
									else SendClientMessage(playerid, 0x999999FF, "?????? ??? ???????? ??????? ??????????");
								}
								else 
								{
									if(GetPlayerMoneyEx(playerid) >= GetPVarInt(playerid, "price_rent"))
									{
										if(LoadOwnableCarRentArz(playerid, idx) != -1)
										{
											PlayerOwnableCarInit(playerid);
											//LoadTun(playerid);
											PutPlayerInVehicle(playerid, GetPlayerData(playerid, P_OWNABLE_CAR), 0);
											SendClientMessage(playerid, 0x66CC33FF, "??? ????????? ??????? ????????!");

											GivePlayerMoneyEx(playerid, -GetPVarInt(playerid, "price_rent"));
											DeletePVar(playerid, "price_rent");
											DeletePVar(playerid, "rent_true");
										}
										else SendClientMessage(playerid, 0x999999FF, "?????? ??? ???????? ??????? ??????????");
									}
								}
							}
						}
					}
				}
				else
				{
					if(GetPVarInt(playerid, "show_menu"))
					{
						DeletePVar(playerid, "show_menu");
						callcmd::car(playerid, "");
					}
				}
				
				return 1;
			}
			
			case DIALOG_OWNABLE_CAR_LOAD:
			{
				if(response)
				{
					new idx = GetPVarInt(playerid, "ownablecar_id"),
						Float: x,
						Float: y,
						Float: z,
						Cache: result,
						query[100];

					mysql_format(mysql, query, sizeof query, "SELECT pos_x, pos_y, pos_z FROM ownable_cars WHERE id='%d'", idx);
					result = mysql_query(mysql, query, true);

					if(cache_num_rows())
					{
						x = cache_get_row_float(0, 0);
						y = cache_get_row_float(0, 1);
						z = cache_get_row_float(0, 2);
					}

					cache_delete(result);

					new carID = GetPVarInt(playerid, "ownablecar_id");

					switch(listitem + 1)
					{
						case 1:
						{
							if(GetPlayerGPSInfo(playerid, G_ENABLED) == GPS_STATUS_OFF)
							{
								if(GetPlayerMoneyEx(playerid) >= 300)
								{
									GivePlayerMoneyEx(playerid, -300, "????? ù? ?? GPS", true, true);

									EnablePlayerGPS(playerid, x, y, z, "?????????????? ?????? ?????????? ???????? ?? GPS");
									return 1;
								}
								else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ????? GPS ??? ???????? ?????");
						}
						case 2:
						{
							if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
							{
								SendClientMessage(playerid, 0x999999FF, "????????ù ??????. ù???????? ??? ????????.");
								return 1;
							}
							else
							{
								if(GetPVarInt(playerid, "rent_true") != 1)
								{
									if(LoadOwnableCar(idx) != -1)
									{
										PlayerOwnableCarInit(playerid);
										SendClientMessage(playerid, 0x66CC33FF, "??? ????????? ??????? ????????!");
									}
									else SendClientMessage(playerid, 0x999999FF, "?????? ??? ???????? ??????? ??????????");
								}
								else 
								{
									if(GetPlayerMoneyEx(playerid) >= GetPVarInt(playerid, "price_rent"))
									{
										if(LoadOwnableCarRent(playerid, idx) != -1)
										{
											PlayerOwnableCarInit(playerid);
											//LoadTun(playerid);
											PutPlayerInVehicle(playerid, GetPlayerData(playerid, P_OWNABLE_CAR), 0);
											SendClientMessage(playerid, 0x66CC33FF, "??? ????????? ??????? ????????!");

											GivePlayerMoneyEx(playerid, -GetPVarInt(playerid, "price_rent"));

											DeletePVar(playerid, "price_rent");
											DeletePVar(playerid, "rent_true");
										}
										else SendClientMessage(playerid, 0x999999FF, "?????? ??? ???????? ??????? ??????????");
									}
								}
							}
						}
					}
				}
				else
				{
					if(GetPVarInt(playerid, "show_menu"))
					{
						DeletePVar(playerid, "show_menu");
						callcmd::car(playerid, "");
					}
				}
				
				return 1;
			}
				
				
			case DIALOG_OWNABLE_CAR_LIST:
			{
				if(response)
				{
					new up = GetPVarInt(playerid, "up_count"),
					down = GetPVarInt(playerid, "down_count");

					if(listitem == up || listitem == down)
					{
						new list = GetPVarInt(playerid, "count_list");

						if(listitem == up)  list++;
						else if(listitem == down) list--;
						SetPVarInt(playerid, "count_list", list);

						new fmt_text[740],
						Cache: result,
						id;

						mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM ownable_cars WHERE owner_id='%d'", GetPlayerAccountID(playerid));
						result = mysql_query(mysql, fmt_text, true);

						new rows = cache_num_rows();
						
						new count_rows, count = 10 * GetPVarInt(playerid, "count_list");

						if(!(count - rows))
						{
							if(listitem == 10)
							{
								SendClientMessage(playerid, -1, ""USC"??? ???????ùù ????????.");
								return 1;
							}
						}

						if(rows >= count)
						{
							count_rows = count;
							SetPVarInt(playerid, "up_count", 10);
							SetPVarInt(playerid, "down_count", 11);
						}
						else
						{
							count_rows = rows;
							new p = count_rows - (count - 10);
							SetPVarInt(playerid, "down_count", p);
							SetPVarInt(playerid, "up_count", 10);
						} 

						format(fmt_text, sizeof fmt_text, "");

						new query[60],
						model_id,
						car_number[7];


						for(new i = count-10, p; i < count_rows; i ++, p ++)
						{
							id = cache_get_field_content_int(i, "id");
							model_id = cache_get_field_content_int(i, "model_id") - 400;
							cache_get_field_content(i, "number", car_number);

							format(query, sizeof query, "{FFFFFF}%d. %s {888888}[%s]\n", i + 1, GetVehicleInfo(model_id, VI_NAME), car_number);
							strcat(fmt_text, query);
							SetPlayerListitemValue(playerid, p, id);
						}

						if(rows >= count+1)
						{
							new buttom[21];
							format(buttom, sizeof buttom, "????????ù ????????\n");
							strcat(fmt_text, buttom);

						}

						if(count >= 11)
						{
							new buttom_1[21];
							format(buttom_1, sizeof buttom_1, "?????????ù ????????");
							strcat(fmt_text, buttom_1);
						}

						Dialog
						(
							playerid, DIALOG_OWNABLE_CAR_LIST, DIALOG_STYLE_LIST,
							"{FFCD00}???????? ?????????",
							fmt_text,
							"???????", "???????"
						);

						cache_delete(result);

						return 1;
					}

					new idx = GetPlayerListitemValue(playerid, listitem);

					ShowOwnableCarLoadDialog(playerid, idx, true);
				}
			}
			case DIALOG_FAMILY_CAR_SELL:
			{
				if(response)
				{
					new vehicleid = GetPlayerVehicleID(playerid);
					new model_id = GetVehicleData(vehicleid, V_MODELID);

					if(DestroyFamilyCar(vehicleid))
					{
					    new money = GetPlayerMoneyEx(playerid);
					    new fmt_str[128];

						new car_price = GetVehicleInfo(model_id-400, VI_PRICE);
						new percent = car_price * 20 / 100;
						new price = car_price - percent;
					    
					    format(fmt_str, sizeof fmt_str, "UPDATE accounts a,family f SET a.money=%d,f.money=f.money + %d WHERE a.id=%d AND f.id=%d", money, price, GetPlayerAccountID(playerid), GetPlayerData(playerid, P_FAMILY) + 1);
                    	mysql_query(mysql, fmt_str, false);
						
						AddFamilyData(GetPlayerData(playerid, P_FAMILY), F_MONEY, +, price);

						format(fmt_str, sizeof fmt_str, "~g~+%d rub", price);
						GameTextForPlayer(playerid, fmt_str, 4000, 1);
						
						new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
						new fmt_text[120];

						AddFamilyData(fam_id,F_FAMILY_CARS,-,1);

						mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET family_cars='%d' WHERE id='%d' LIMIT 1", GetFamilyData(fam_id, F_FAMILY_CARS), fam_id);
					 	mysql_query(mysql, fmt_text, false);
					//	}
					}
				}
			}
			case DIALOG_OWNABLE_CAR_SELL:
			{
				if(response)
				{
					new vehicleid = GetPlayerOwnableCar(playerid);
					if(vehicleid != INVALID_VEHICLE_ID)
					{
						new model_id = GetVehicleData(vehicleid, V_MODELID);

						if(DestroyOwnableCar(vehicleid))
						{
							new fmt_str[128];

							new car_price = GetVehicleInfo(model_id-400, VI_PRICE);
							new percent = car_price * 20 / 100;
							new price = car_price - percent;

							SetPlayerData(playerid, P_OWNABLE_CAR, INVALID_VEHICLE_ID);
							AddPlayerData(playerid, P_BANK, +, price);

							BankLog(playerid, price, "??????? ??????? ??????????");

							format(fmt_str, sizeof fmt_str, "UPDATE accounts SET bank=%d WHERE id=%d LIMIT 1", GetPlayerBankMoney(playerid), GetPlayerAccountID(playerid));
							mysql_query(mysql, fmt_str, false);


							format(fmt_str, sizeof fmt_str, "{FFFFFF}????????? ???? ???????ù?? 20 ????????? ?? ??? ????????? {FF9900}(%d ??????)", percent);
							SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

							format(fmt_str, sizeof fmt_str, "{FFFFFF}?? ???????? ?????????? ???? ?????????? {FFFF00}%d ??????", price);
							SendClientMessage(playerid, 0x66CC00FF, fmt_str);

							format(fmt_str, sizeof fmt_str, "~g~+%d rub", price);
							GameTextForPlayer(playerid, fmt_str, 4000, 1);
						}
					}
				}
			}
			case DIALOG_OWNABLE_CAR_NUMBER:
			{
				if(response)
				{
					new vehicleid = GetPlayerOwnableCar(playerid);

					if(vehicleid != INVALID_VEHICLE_ID)
					{
						if(GetPlayerMoney(playerid) >= 5000)
						{
							new fmt_text[100],
								index;

							index = GetVehicleData(vehicleid, V_ACTION_ID);

							format(g_ownable_car[index][OC_NUMBER], 7, GenerateCarNumber());

                            //index = GetVehicleData(vehicleid, V_ACTION_ID);
                            format(g_ownable_car[index][OC_NUMBER], 12, g_ownable_car[index][OC_NUMBER]);
                            SetVehicleRuNumberPlate(vehicleid, g_ownable_car[index][OC_NUMBER], "17");

							format(fmt_text, sizeof fmt_text, "?? ?????? ?????? ???????: {ffcd00}\"%s\" {66cc33}?? 5000 ???", GetOwnableCarData(index, OC_NUMBER));
							SendClientMessage(playerid, 0x66CC33FF, fmt_text);

							GivePlayerMoneyEx(playerid, -5000, "??????? ???????", true, true);

							mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET number='%s' WHERE id='%d' LIMIT 1", GetOwnableCarData(index, OC_NUMBER), GetOwnableCarData(index, OC_SQL_ID));
							mysql_query(mysql, fmt_text, false);
						}
						else
						{
							SendClientMessage(playerid, 0x999999FF, "???????????? ????? ??ù ??????? ???????");
						}
					}
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_VEHICLE_TRUNK:
			{
				new vehicleid = GetPlayerUseTrunk(playerid);

				if(response && vehicleid != INVALID_VEHICLE_ID)
				{
					if(GetPlayerListitemValue(playerid, listitem) == -1) // ????????
					{
						Dialog
						(
							playerid, DIALOG_VEHICLE_TRUNK_PUT, DIALOG_STYLE_LIST,
							"{3399FF}?????????? ?????????",
							"\
							1. ???????? ??????\n\
							2. ???????? ????????\n\
							3. ???????? ???????\n\
							4. ???????? ?????????\n\
							5. ???????? ???????\n\
							6. ???????? ?????????\
							",
							"????????", "?????"
						);
					}
					else
					{
						if(0 <= listitem <= MAX_VEHICLE_TRUNK_SLOTS)
						{
							new desc[64] = "{66CC33}",
								type = GetTrunkData(vehicleid, listitem, VT_ITEM_TYPE);

							if(type == ITEM_TYPE_JERRICAN)
							{
								if(TakeTrunkItem(vehicleid, type, 15))
								{
									if(!GetPVarInt(playerid, "have_jerrican"))
									{
										SetPVarInt(playerid, "have_jerrican", 1);
								//		SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 1650, A_OBJECT_BONE_LEFT_HAND, 0.15, 0.0, 0.0, 0.0, -90.0, 180.0, 1.0, 1.0, 1.0, 0);

										SendClientMessage(playerid, 0x3399FFFF, "?? ??????? ?? ????????? \"????????\" ? ??????????: 15 ?");
									}
									else
									{
										SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???? ????????");
										AddTrunkItem(vehicleid, type, 15);
									}
								}
								else
								{
									SendClientMessage(playerid, 0x999999FF, "? ????????? ??? ????????");
								}
							}
							else
							{
								if(type == ITEM_TYPE_NONE) type++;

								strcat(desc, GetItemInfo(type, I_NAME));

								SetPVarInt(playerid, "trunk_slot", type);

								Dialog
								(
									playerid, DIALOG_VEHICLE_TRUNK_TAKE, DIALOG_STYLE_INPUT,
									desc,
									"{FFFFFF}??????? ??????????, ??????? ?? ?????? {ffcd00}???????:",
									"???????", "?????"
								);
							}
						}
					}
				}
			}
			case DIALOG_VEHICLE_TRUNK_PUT:
			{
				new vehicleid = GetPlayerUseTrunk(playerid),
					slot = listitem + 1;

				if(response && vehicleid != INVALID_VEHICLE_ID)
				{
					if(slot == ITEM_TYPE_JERRICAN)
					{
						if(!GetPVarInt(playerid, "have_jerrican"))
						{
							SendClientMessage(playerid, 0x999999FF, "? ??? ? ????? ??? ????????");
						}
						else
						{
							DeletePVar(playerid, "have_jerrican");
						//	RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);

							if(AddTrunkItem(vehicleid, ITEM_TYPE_JERRICAN, 15) != -1)
							{
								SendClientMessage(playerid, 0x3399FFFF, "?? ???????? ? ???????? \"????????\" ? ??????????: 15 ?");
							}
							else
							{
								SendClientMessage(playerid, 0xCECECEFF, "? ????????? ???????????? ?????");
							}
						}
					}
					else
					{
						new desc[32] = "{ff6600}";

						strcat(desc, GetItemInfo(slot, I_NAME));

						Dialog
						(
							playerid, DIALOG_VEHICLE_TRUNK_PUT_ITEM, DIALOG_STYLE_INPUT,
							desc,
							"{FFFFFF}??????? ??????????, ??????? ?? ?????? {ffcd00}????????:",
							"????????", "?????"
						);

						SetPVarInt(playerid, "trunk_slot", slot);
					}
				}
				else ShowTrunkDialog(playerid, vehicleid, false);
			}
			case DIALOG_VEHICLE_TRUNK_PUT_ITEM:
			{
				new vehicleid = GetPlayerUseTrunk(playerid),
					amount = strval(inputtext),
					slot = GetPVarInt(playerid, "trunk_slot");

				if(vehicleid == INVALID_VEHICLE_ID)
					return 1;

				if(response)
				{
					if(amount > 0)
					{
						if(AddTrunkItem(vehicleid, slot, amount))
						{
							switch(slot)
							{
								case ITEM_TYPE_MONEY:
								{
									if(GetPlayerMoneyEx(playerid) >= amount)
									{
										GivePlayerMoneyEx(playerid, -amount, "??????? ? ????????", true);
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ?????");
										TakeTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
								case ITEM_TYPE_MED:
								{
									if(GetPlayerData(playerid, P_MED_CHEST) >= amount)
									{
										AddPlayerData(playerid, P_MED_CHEST, -, amount);
										UpdatePlayerDatabaseInt(playerid, "healme", GetPlayerData(playerid, P_MED_CHEST));
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ???????");
										TakeTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
								case ITEM_TYPE_METALL:
								{
									if(GetPlayerData(playerid, P_METALL) >= amount)
									{
										AddPlayerData(playerid, P_METALL, -, amount);
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ??????????");
										TakeTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
								case ITEM_TYPE_AMMO:
								{
									if(GetPlayerData(playerid, P_AMMO) >= amount)
									{
										AddPlayerData(playerid, P_AMMO, -, amount);
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ????????");
										TakeTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
								case ITEM_TYPE_DRUGS:
								{
									if(GetPlayerData(playerid, P_DRUGS) >= amount)
									{
										AddPlayerData(playerid, P_DRUGS, -, amount);
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ??????????");
										TakeTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
							}
						}
						else
						{
							SendClientMessage(playerid, 0xCECECEFF, "? ????????? ???????????? ?????");
							return 1;
						}

						new fmt_text[128];

						format(fmt_text, sizeof fmt_text, "?? ???????? ? ???????? \"%s\" ? ??????????: %d %s", GetItemInfo(slot, I_NAME), amount, GetItemInfo(slot, I_NAME_COUNT));
						SendClientMessage(playerid, 0x3399FFFF, fmt_text);
					}
					else SendClientMessage(playerid, 0x999999FF, "???????? ??????????");
				}
				else
				{
					ShowTrunkDialog(playerid, vehicleid, false);
				}
			}
			case DIALOG_VEHICLE_TRUNK_TAKE:
			{
				new vehicleid = GetPlayerUseTrunk(playerid),
					amount = strval(inputtext),
					slot = GetPVarInt(playerid, "trunk_slot");

				if(vehicleid == INVALID_VEHICLE_ID)
					return 1;

				if(response)
				{
					if(amount > 0)
					{
						if(TakeTrunkItem(vehicleid, slot, amount) != -1)
						{
							switch(slot)
							{
								case ITEM_TYPE_MONEY:
								{
									GivePlayerMoneyEx(playerid, amount, "?????? ?? ?????????", true);
								}
								case ITEM_TYPE_MED:
								{
									if((GetPlayerData(playerid, P_MED_CHEST) + amount) < 3)
									{
										AddPlayerData(playerid, P_MED_CHEST, +, amount);
										UpdatePlayerDatabaseInt(playerid, "healme", GetPlayerData(playerid, P_MED_CHEST));
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ?????? ? ????? ?????? 3-? ???????");
										AddTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
								case ITEM_TYPE_METALL:
								{
									if((GetPlayerData(playerid, P_METALL) + amount) < GetPlayerMaxStorage(playerid, STORAGE_METALL))
									{
										AddPlayerData(playerid, P_METALL, +, amount);
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ?????? ? ????? ?????? ??????????");
										AddTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
								case ITEM_TYPE_AMMO:
								{
									if((GetPlayerData(playerid, P_AMMO) + amount) < GetPlayerMaxStorage(playerid, STORAGE_AMMO))
									{
										AddPlayerData(playerid, P_AMMO, +, amount);
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ?????? ? ????? ?????? ????????");
										AddTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
								case ITEM_TYPE_DRUGS:
								{
									if((GetPlayerData(playerid, P_DRUGS) + amount) < GetPlayerMaxStorage(playerid, STORAGE_DRUGS))
									{
										AddPlayerData(playerid, P_DRUGS, +, amount);
									}
									else
									{
										SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ??????????");
										AddTrunkItem(vehicleid, slot, amount);

										return 1;
									}
								}
							}

							new fmt_text[128];

							format(fmt_text, sizeof fmt_text, "?? ??????? ?? ????????? \"%s\" ? ??????????: %d %s", GetItemInfo(slot, I_NAME), amount, GetItemInfo(slot, I_NAME_COUNT));
							SendClientMessage(playerid, 0x3399FFFF, fmt_text);
						}
						else
						{
							SendClientMessage(playerid, 0x999999FF, "? ????????? ??? ?????? ?????????? ????????");
							ShowTrunkDialog(playerid, vehicleid, false);
						}
					}
				}
				else ShowTrunkDialog(playerid, vehicleid, false);
			}
			// -----------------------------------------------------------------
			case DIALOG_SET_SPAWN:
			{
				if(response)
				{
					new fam_id = GetPlayerData(playerid, P_FAMILY);

					switch(listitem)
					{
						case 1: if(GetPlayerHouse(playerid, HOUSE_TYPE_HOME) == -1) return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????");
						case 2: if(GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL) == -1) return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????????? ? ??????????? ??????");
						case 3: if(!GetPlayerTeamEx(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ? ???????????");
						case 4: if(GetPlayerHouse(playerid, HOUSE_TYPE_ROOM) == -1) return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????????? ?? ? ???? ? ????ù?");
                        case 5: if(!fam_id && g_family[fam_id][F_SPAWN_POSITION][0] == 0.0) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ? ?????, ??? ??????ù ?? ???????????.");
					}

					SetPlayerData(playerid, P_SPAWN, listitem);
					UpdatePlayerDatabaseInt(playerid, "setting_spawn", listitem);

					SendClientMessage(playerid, 0x3399FFFF, "????? ??ù?????ù ? ???? ????????");
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_ADONATE_MENU:
			{
				if(!response) return 1;

				switch(listitem)
				{
					case 0: ShowPlayerBuyAdminDialog(playerid);
					case 1: ShowPlayerBuyCommandDialog(playerid);
					case 2:
					{
						if(GetPlayerDonateRub(playerid) > GetDonatePrice(DONATE_PRICE_A_UNWARN))
						{
							if(GetPlayerAdminWarn(playerid))
							{
								new fmt_text[80];
								AddPlayerData(playerid, P_ADMIN_WARN, -, 1);
								GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_A_UNWARN), "??ù??? ????? ????????", true, true);
								UpdatePlayerDatabaseInt(playerid, "admin_warn", GetPlayerAdminWarn(playerid));

								format(fmt_text, sizeof fmt_text, "?? ??ù?? ????? ???????. ù?????? ?????????? ?????????: %d", GetPlayerData(playerid, P_ADMIN_WARN));
								SendClientMessage(playerid, 0x66CC00FF, fmt_text);
							}
							else
								SendClientMessage(playerid, -1, "? ??? ??? ????? ?????????!");
						}
						else
							SendClientMessage(playerid, -1, "? ??? ?? ?????????? ????? ?????? ?? ?????!");
					}
					case 3:
					{
						if(GetPlayerDonateRub(playerid) > GetDonatePrice(DONATE_PRICE_A_SETPASS))
						{
							Dialog(playerid, DIALOG_ADMIN_REG, DIALOG_STYLE_INPUT, "{FF0000}????? ??????????ù", "{FFFFFF}?????????? ?????? ?? 4-? ???? ??ù ??????????? ? ????? ??????\n{FFFFFF}??????? ??? ? ???? ????:\n", "?????", "?????");// ????? ?????ù
							GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_A_SETPASS), "????? ????? ?????ù", true);
						}
						else
							SendClientMessage(playerid, -1, "? ??? ?? ?????????? ????? ?????? ?? ?????!");
					}
					case 4:
					{
						if(GetPlayerDonateRub(playerid) > GetDonatePrice(DONATE_PRICE_A_INVISIBLE))
						{
					    	if(GetPlayerSecretEx(playerid) >= 1)
								return SendClientMessage(playerid, 0xCECECEFF, "?? ??? ?????? ??????????.");

						    AddPlayerData(playerid, P_SECRET, +, 1);
							UpdatePlayerDatabaseInt(playerid, "a_secret", GetPlayerData(playerid, P_SECRET));

							GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_A_INVISIBLE), "??????? ??????????", true, true);

							Send(playerid, 0xFFFF00FF,"?? ??????? ?????? ??????????");
							// ??????????
						}
						else
							SendClientMessage(playerid, -1, "? ??? ?? ?????????? ????? ?????? ?? ?????!");
					}
					case 5:
					{
						if(GetPlayerDonateRub(playerid) > GetDonatePrice(DONATE_PRICE_A_PREFIX))
						{
							Dialog
							(
								playerid, DIALOG_BUY_PREFIX, DIALOG_STYLE_INPUT,
								"????? ???????",
								"??????? ? ?????? ???? ??????? ??????? ?? ??????\n\
								??????????: ??????????? ??????? ?? 15 ????????!",
								"?????", "??????"
							);
						}
						else
							SendClientMessage(playerid, -1, "? ??? ?? ?????????? ????? ?????? ?? ?????!");
					}
					case 6:
					{
						if(GetPlayerDonateRub(playerid) > GetDonatePrice(DONATE_PRICE_A3D_PREFIX))
						{
							if(GetPlayerData(playerid, P_3D_PREFIX) > 1)
								return SendClientMessage(playerid, 0xCECECEFF, "?? ??? ?????? ???? ???????.");

						    AddPlayerData(playerid, P_3D_PREFIX, +, 1);
							UpdatePlayerDatabaseInt(playerid, "a_3d_prefix", GetPlayerData(playerid, P_3D_PREFIX));

							GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_A3D_PREFIX), "??????? 3d ????????", true, true);

							g_player[playerid][P_ADMIN_LABEL] = CreateDynamic3DTextLabel("?????????????", 0xFFCC33FF, 0.0, 0.0, 0.3, 10.0, playerid);
							Attach3DTextLabelToPlayer(g_player[playerid][P_ADMIN_LABEL], playerid, 0.0, 0.0, -0.8);

							Send(playerid, 0xFFFF00FF,"?? ??????? ?????? ???????");
							// ??????? 3?
						}
						else
							SendClientMessage(playerid, -1, "? ??? ?? ?????????? ????? ?????? ?? ?????!");
					}
				}

			}
			case DIALOG_BUY_PREFIX:
			{
				if(!response) return 1;

				if(strlen(inputtext) < 2 || strlen(inputtext) > 15)
				{
					Dialog
					(
						playerid, DIALOG_BUY_PREFIX, DIALOG_STYLE_INPUT,
						"????? ???????",
						"??????? ? ?????? ???? ??????? ??????? ?? ??????\n\
						??????????: ??????????? ??????? ?? 15 ????????!",
						"?????", "??????"
					);
				}

				new fmt_msg[128];
				format(GetPlayerData(playerid, P_PREFIX), 15, inputtext);
				UpdatePlayerDatabaseString(playerid, "prefix", GetPlayerData(playerid, P_PREFIX));
				GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_A_PREFIX), "??????? ????????", true, true);

				format(fmt_msg, sizeof fmt_msg, "[A] SYSTEM ????? %s[%d] ??????? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerData(playerid, P_PREFIX));
				SendMessageToAdmins(fmt_msg, 0x999999FF);
				SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);
			}
			case DIALOG_BUY_CMD:
			{
				if(!response) return 1;

				if(GetPlayerDonateRub(playerid) > g_admin_cmd_buy[listitem][CMD_PRICE])
				{

					new query[127], Cache:result, CMDaccess[CMD_NUM +1];
					mysql_format(mysql, query, 127, "SELECT cmdaccess FROM accounts WHERE name = '%s'", GetPlayerNameEx(playerid));
					result = mysql_query(mysql, query);

					print(query);

					if(cache_num_rows())
					{
						cache_get_field_content(0, "cmdaccess", CMDaccess, mysql, sizeof(CMDaccess));

						if(CMDaccess[listitem] == '1') return SendClientMessage(playerid,-1, "? ??? ??? ???? ??? ???????!");
						CMDaccess[listitem] = '1';
						UpdatePlayerDatabaseString(playerid, "cmdaccess", CMDaccess);

						GivePlayerDonateRub(playerid, -g_admin_cmd_buy[listitem][CMD_PRICE], "??????? ????? ??????", true, true);

						new fmt_msg[128];
						format(fmt_msg, sizeof fmt_msg, "[A] SYSTEM ????? %s[%d] ??????? \"%s\"", GetPlayerNameEx(playerid), playerid, g_admin_cmd_buy[listitem][CMD_NAME]);
						SendMessageToAdmins(fmt_msg, 0x999999FF);
						SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

						SendClientMessage(playerid, -1, g_admin_cmd_buy[listitem][CMD_DESCRIPTION]);

						g_player[playerid][CMD_ACCESS][listitem] = '1';
					}
					cache_delete(result);
				}
				else
					SendClientMessage(playerid, -1, "? ??? ?? ?????????? ????? ?????? ?? ?????!");
			}
			case DIALOG_DRUB_MENU:
			{
				if(!response) return 1;

			//	if(response && GetPlayerDonateRub(playerid) <= 0) return callcmd::mn(playerid, "");
		
				switch(listitem)
				{
					case 0: ShowPlayerDonations(playerid, GetPlayerNameEx(playerid));
					case 1:	ShowPlayerConvertDialog(playerid);
					case 2:
					{
                         if(GetPlayerData(playerid, P_DRIVING_LIC) == 2 && GetPlayerData(playerid, P_WEAPON_LIC) == 1)
						 SendClientMessage(playerid, 0x999999FF, ""USC"? ??? ??? ???? ??? ????????");

						else
						{
							if(GetPlayerDonateRub(playerid) >= 150)
							{
								SetPlayerData(playerid, P_DRIVING_LIC,	2);
								SetPlayerData(playerid, P_WEAPON_LIC,	1);

								UpdatePlayerDatabaseInt(playerid, "driving_lic", 2);
								UpdatePlayerDatabaseInt(playerid, "weapon_lic", 1);

								GivePlayerDonate(playerid, -150, "??????? ?????? ????????", true);

								SendClientMessage(playerid, 0x66CC33FF, ""SC"?? ????????? ????? ????????. ???????????: {FFFF00}/lic");
							}
							else
							{
								SendClientMessage(playerid, 0x66CC33FF, ""USC"??ù ??????? ???? ???????? ?????????? ????? ?? ????? 150 ???");
							}
						}

						ShowPlayerDrubMenu(playerid);
					}
					case 3:
					{
  					 if (GetPlayerData(playerid, P_VOENBILET_NUM) > 0)
    					   return SendClientMessage(playerid, 0x999999FF, ""USC"? ??? ??? ???? ??????? ?????");

					   if (GetPlayerDonateRub(playerid) < 100)
 					      return SendClientMessage(playerid, 0x999999FF, ""USC"??ù ??????? ???????? ?????? ?????????? 100 ???");

					    new date[16];
 					  GetFormattedDate(date);

					   new ticket_num = GetNextMilitaryID();

					    SetPlayerData(playerid, P_VOENBILET_NUM, ticket_num);
					    format(GetPlayerData(playerid, P_VOENBILET_DATE), 16, "%s", date);
						format(GetPlayerData(playerid, P_VOENBILET_KEM), 32, "?????");
						format(GetPlayerData(playerid, P_VOENBILET_ZVANIE), 32, "?? ??????");

 					  UpdatePlayerDatabaseInt(playerid, "voenbilet_num", ticket_num);
 					  UpdatePlayerDatabaseString(playerid, "voenbilet_date", date);
					   UpdatePlayerDatabaseString(playerid, "voenbilet_kem", "?????");
 					  UpdatePlayerDatabaseString(playerid, "voenbilet_zvanie", "?? ??????");

					    GivePlayerDonateRub(playerid, -100, "??????? ???????? ??????", true, true);

					    SendClientMessage(playerid, 0x66CC33FF, ""SC"?? ??????? ????????? ??????? ????? ????? ?????");

 					  ShowPlayerDrubMenu(playerid);
					}
					case 4:
					{
						if(GetPlayerOwnableCar(playerid) == INVALID_VEHICLE_ID)
						{
							if(GetPlayerOwnableCars(playerid) == 0)
								return SendClientMessage(playerid, 0x999999FF, ""USC"? ??? ??? ??????? ??????????");
							else
								return SendClientMessage(playerid, 0x999999FF, ""USC"??? ?????? ????????? ?? ???????? ?? ??????");
						}
						
									Dialog
					(
						playerid, DIALOG_DONATE_BUY_CAR_NUMBER, DIALOG_STYLE_INPUT,
						"{ffcd00}??????? ????? ??ù ??????? ù?",
						"{FFFFFF}\
						??????? ?????, ???????\n\
						?? ?????? ?????????? ?? ?????? ?????????\n\n\
						- ????????? ???????????? ?????, ? ??? ?? ?????: A, B, E, K, M, H, O, P, C, T, X\n\
						- ??? ?????? ?????????? ????/???? ??????????ù ? ?????? - ??? ?? ??????\n\
						- ????? ?????? ???? ? ??????? CNNNCC; ??? C - ?????, ??? N - ?????\n\n\
						{888888}????????: B713EC\
						",
						"?????", "??????"
					);

					}
					case 5:
					{
						new fmt_text[80];

						if(GetPlayerDonateRub(playerid) < 100)
						{
							 SendClientMessage(playerid, -1, ""USC"??ù ??????? ????? ??ù ?????????? ?????????? ????? ?? ????? %d.00 ???");
						}
						else
						{
							AddPlayerData(playerid, P_CAR_SLOTS, +, 1);
							UpdatePlayerDatabaseInt(playerid, "car_slots", GetPlayerData(playerid, P_CAR_SLOTS));

							GivePlayerDonateRub(playerid, -100, "??????? ????? ??ù ??????????", true, true);

							format(fmt_text, sizeof fmt_text, ""SC"?? ????????? ?????????? ?????? ??ù ??????????. ù?????? ?????????? ??????: {ffff00}%d",
							GetPlayerData(playerid, P_CAR_SLOTS));

							SendClientMessage(playerid, 0x66CC00FF, fmt_text);
						}
					}
					case 6:
					{
						if(GetPlayerDonateRub(playerid) >= 75)
						{
							Dialog
							(
								playerid, DIALOG_DONATE_BUY_NUMBER, DIALOG_STYLE_INPUT,
								"{FFCD00}??????? 4-? ???????? ?????? ????????",
								"{FFFFFF}??????? ?????, ???????\n"\
								"?? ?????? ?? ??????????:",
								"?????", "??????"
							);

							return 1;
						}
						else
						{
							new fmt_text[85];

							 SendClientMessage(playerid,-1, ""USC"??ù ??????? 4-? ???????? ?????? ???????? ?????????? ????? ?? ????? {ffff00}75{ffffff} ???");
						}

						ShowPlayerDrubMenu(playerid);
					}
					case 7:
					{
						if(GetPlayerData(playerid, P_WARN))
						{
							if(GetPlayerDonateRub(playerid) >= 100)
							{
								SetPlayerData(playerid, P_WARN, 		0);
								SetPlayerData(playerid, P_WARN_TIME, 	0);

								UpdatePlayerDatabaseInt(playerid, "warn", 		0);
								UpdatePlayerDatabaseInt(playerid, "warn_time", 	0);

								GivePlayerDonateRub(playerid, -100, "??ù??? ??????????????");

								SendClientMessage(playerid, 0x66CC33FF, ""SC"??? ?????????????ù ??????? ??ù??");
								SendClientMessage(playerid, 0xFFFF00FF, ""SC"ù????? ?? ?????? ?????????ù ? ???????????");
							}
							else
							{
								new fmt_text[80];

								 SendClientMessage(playerid, -1, ""USC"??ù ??ù??ù ???? ?????????????? ?????????? ????? ?? ????? 100 ???");
							}
						}
						else SendClientMessage(playerid, 0x999999FF, ""USC"?? ????? ???????? ??? ??????????????");

						//ShowPlayerDrubMenu(playerid);
					}
					case 8:
					{
					    if(GetPlayerDonateRub(playerid) >= 50)
						{
							Dialog
							(
								playerid, DIALOG_DONATE_CHANGE_NAME, DIALOG_STYLE_INPUT,
								"{FFCD00}????????? ?????",
								"{FFFFFF}??????? ????? ??ù ? ???? ????:",
								"????????", "???????"
							);
						}
						else SendClientMessage(playerid, 0x999999FF, ""USC"???????????? BC!");
					}
					case 9:
					{
						new fmt_text[400];

						format
						(
							fmt_text, sizeof fmt_text,
							"1. ????\t\t%d%%\n"\
							"2. Colt 45\t%d%%\n"\
							"3. SD Pistol\t%d%%\n"\
							"4. Desert Eagle\t%d%%\n"\
							"5. Shotgun\t%d%%\n"\
							"6. MP5\t\t%d%%\n"\
							"7. AK47\t\t%d%%\n"\
							"8. M4\t\t%d%%\n"\
							"9. Sniper Rifle\t%d%%\n"\
							"10. Sawnoff\t%d%%\n"\
							"11. Combat SG\t%d%%\n"\
							"12. Micro Uzi\t%d%%",
							GetPlayerData(playerid, P_POWER),
							GetPlayerData(playerid, P_SKILL_COLT),
							GetPlayerData(playerid, P_SKILL_SDPISTOL),
							GetPlayerData(playerid, P_SKILL_DEAGLE),
							GetPlayerData(playerid, P_SKILL_SHOTGUN),
							GetPlayerData(playerid, P_SKILL_MP5),
							GetPlayerData(playerid, P_SKILL_AK47),
							GetPlayerData(playerid, P_SKILL_M4),
							GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE),
							GetPlayerData(playerid, P_SKILL_SAWNOFF),
							GetPlayerData(playerid, P_SKILL_COMBAT_SG),
							GetPlayerData(playerid, P_SKILL_MICRO_UZI)
						);

						Dialog(playerid, DIALOG_DONATE_SKILLS, DIALOG_STYLE_LIST, "{FFFF00}???????? ?????", fmt_text, "?????", "??????");
					}
					case 10:
					{
					    Dialog
						(
							playerid,
							DIALOG_DONATE_VIP_HELP,
							DIALOG_STYLE_MSGBOX,
							"?????????ù",
							"{CD7F32}______________________ SILVER VIP ______________________\n\
							{FFFF00}1{FFFFFF} /togphone - ????????? ???????\n\
							{FFFF00}1{FFFFFF} /admins - ???????? ??????????????? ??????\n\n\
							{C0C0C0}______________________ GOLD VIP ______________________\n\
							{FFFF00}1{FFFFFF} ??? ??????????? SILVER VIP \n\
							{FFFF00}2{FFFFFF} VIP ???  /v | /voff \n\
							{FFFF00}3{FFFFFF} ??? ? ????? ????? ? 2 ???? ????????? ????????? ? ?????? (/unj) \n\
							{FFFF00}4{FFFFFF} +1 ???? ?????????? ? ??????? \n\
							{FFD700}______________________ PLATINUM VIP ______________________\n\
							{FFFF00}1{FFFFFF} ??? ??????????? SILVER VIP \n\
							{FFFF00}2{FFFFFF} ??? ??????????? GOLD VIP \n\
							{FFFF00}3{FFFFFF} ??? ? ????? ????? ? 3 ???? ????????? ????????? ? ?????? (/unj)\n\
							{FFFF00}4{FFFFFF} +2 ????? ?????????? ? ???????\n\
							{FFFF00}4{FFFFFF} /vleave - ?????????? ?? ??????? ? ????? ????ù!\n\
							{FFFF00}5{FFFFFF} ?????? ?????? PayDay + 1 EXP ? 1000? ? ????????\n\
							??????ù ??????? ??????, ?? ????????? ??????? ? ????????",
							"?????","??????");
					}
					case 11:
					{
						if(GetPlayerDonateRub(playerid) >= 100)
						{
						    if(GetPlayerData(playerid, P_BOOMBOX) >= 1) return Send(playerid, -1, ""USC"? ??? ??? ???? ???????");
						    
							GivePlayerDonateRub(playerid, -100, "??????? ????????");

							Send(playerid,-1,""SC"?? ??????? ?????? ???????(/boombox)");
							
							SetPlayerData(playerid, P_BOOMBOX, 1);
							UpdatePlayerDatabaseInt(playerid, "boombox", 1);
						}
						else
						    return Send(playerid,-1,""USC"? ??? ?? ?????????? BC!");
						//ShowPlayerDrubMenu(playerid);
					}
					case 12: ShowPlayerBuyLeadDialog(playerid);
					case 13: ShowPlayerBuyAdminDialog(playerid);
				 	case 14: ShowPlayerBuyZamDialog(playerid);

				}
			}
			case DIALOG_DONATE_VIP_HELP:
			{
			    if(!response) return 1;
			    
			    new fmt_text[200];
				
				format(fmt_text, sizeof fmt_text,
				"{FFFF00}1{CD7F32} Vip Silver ( %d RUB )\n\
				{FFFF00}2{C0C0C0}  VIP Gold ( %d RUB )\n\
			    {FFFF00}3{FFD700} VIP Platinum ( %d RUB )",
				GetDonatePrice(DONATE_PRICE_BRONSE),
				GetDonatePrice(DONATE_PRICE_SILVER),
				GetDonatePrice(DONATE_PRICE_GOLD));

				Dialog(playerid, DIALOG_DONATE_PREMIUM, DIALOG_STYLE_LIST, "VIP ????????", fmt_text, "??????", "??????");
			}
			case DIALOG_DONATE_PREMIUM:
			{
				if(response)
			    {
				    new prem_day,prem_month,prem_year,premium = GetPlayerPremium(playerid),
				    fmt_text[128];
			        switch(listitem +1)
					{
	    				case 1:
						{
					        if(GetPlayerDonateRub(playerid) >= GetDonatePrice(DONATE_PRICE_BRONSE))
					        {
						        if(!premium)
						        {
									SetPlayerData(playerid, P_PREMIUM, 1);
						            SetPlayerData(playerid, P_PREMIUM_DATE, gettime() + 30 * 86400);
								}
								else
								{
								    AddPlayerData(playerid, P_PREMIUM_DATE, +, 30 * 86400);
								}


								timestamp_to_date(GetPlayerData(playerid, P_PREMIUM_DATE), prem_year, prem_month, prem_day);

								format(fmt_text, sizeof fmt_text, "?? ??????? ???????? {EC174F}VIP Bronse{FFFFFF}?? {EC174F}%02d.%02d.%d", prem_day, prem_month, prem_year);
								SendClientMessage(playerid, -1, fmt_text);

								UpdatePlayerDatabaseInt(playerid, "premium", 1);
								UpdatePlayerDatabaseInt(playerid, "premium_date", GetPlayerData(playerid, P_PREMIUM_DATE));

								GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_BRONSE), "??????? ???????? "SERVER_NAME"+");
							
				    		}
						    else
						    {
						        format(fmt_text, sizeof fmt_text, "??ù ??????? ???????? VIP Bronse ?????????? ????? ?? ????? %d. ?????-??????",
								GetDonatePrice(DONATE_PRICE_BRONSE));
								ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? BC! ");
						    }
						}
						case 2:
							{
						        if(GetPlayerDonateRub(playerid) >= GetDonatePrice(DONATE_PRICE_SILVER))
						        {
							        if(!premium)
							        {
							            AddPlayerData(playerid, P_CAR_SLOTS, +, 1);
										SetPlayerData(playerid, P_PREMIUM, 2);
							            SetPlayerData(playerid, P_PREMIUM_DATE, gettime() + 30 * 86400);
									}
									else
									{
									    AddPlayerData(playerid, P_PREMIUM_DATE, +, 30 * 86400);
									}


									timestamp_to_date(GetPlayerData(playerid, P_PREMIUM_DATE), prem_year, prem_month, prem_day);


									format(fmt_text, sizeof fmt_text, "?? ??????? ???????? {EC174F}VIP Silver{FFFFFF}?? {EC174F}%02d.%02d.%d", prem_day, prem_month, prem_year);
									SendClientMessage(playerid, -1, fmt_text);

									UpdatePlayerDatabaseInt(playerid, "premium", 2);
									UpdatePlayerDatabaseInt(playerid, "premium_date", GetPlayerData(playerid, P_PREMIUM_DATE));

									GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_BRONSE), "??????? ???????? "SERVER_NAME"+");
					    		}
							    else
							    {
							        format(fmt_text, sizeof fmt_text, "??ù ??????? ???????? VIP Silver ?????????? ????? ?? ????? %d. ??????",
									GetDonatePrice(DONATE_PRICE_SILVER));
									ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? BC! ");
							    }
						    }
		    			case 3:
							{
						        if(GetPlayerDonateRub(playerid) >= GetDonatePrice(DONATE_PRICE_GOLD))
						        {
							        if(!premium)
							        {
										AddPlayerData(playerid, P_CAR_SLOTS, +, 2);
										SetPlayerData(playerid, P_PREMIUM, 3);
							            SetPlayerData(playerid, P_PREMIUM_DATE, gettime() + 30 * 86400);
									}
									else
									{
									    AddPlayerData(playerid, P_PREMIUM_DATE, +, 30 * 86400);
									}


									timestamp_to_date(GetPlayerData(playerid, P_PREMIUM_DATE), prem_year, prem_month, prem_day);



									format(fmt_text, sizeof fmt_text, "?? ??????? ???????? {EC174F}VIP Gold{FFFFFF}?? {EC174F}%02d.%02d.%d", prem_day, prem_month, prem_year);
									SendClientMessage(playerid, -1, fmt_text);

									UpdatePlayerDatabaseInt(playerid, "premium", 3);
									UpdatePlayerDatabaseInt(playerid, "premium_date", GetPlayerData(playerid, P_PREMIUM_DATE));

									GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_BRONSE), "??????? ???????? "SERVER_NAME"+");
					    		}
							    else
							    {
							        format(fmt_text, sizeof fmt_text, "??ù ??????? ???????? VIP Gold ?????????? ????? ?? ????? %d. ??????",
									GetDonatePrice(DONATE_PRICE_GOLD));
									ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? BC! ");
							    }
							}
					    }
					}

			}
			case DIALOG_DRUB_BUYLEAD:
			{
				if(!response) return 1;

				new org_id = GetPlayerListitemValue(playerid, listitem),
				fmt_msg[128];

				if(GetPlayerDonateRub(playerid) > g_organization[org_id][O_PRICE])
				{
					InvitePlayer(playerid, org_id, 10, true);

					if(IsTeamSubdivision(org_id))
						format(fmt_msg, sizeof fmt_msg, "?? ????? ??????? ????????????ù \"%s\", ??????????? \"%s\"", GetPlayerSubdivisionName(playerid), GetPlayerTeamName(playerid));
					else
						format(fmt_msg, sizeof fmt_msg, "?? ????? ??????? ??????????? \"%s\"", GetPlayerTeamName(playerid));

					SendClientMessage(playerid, 0xFFFF00FF, fmt_msg);

					format(fmt_msg, sizeof fmt_msg, "[A] SYSTEM ????? %s[%d] ??????? ??????????? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerTeamName(playerid));
					SendMessageToAdmins(fmt_msg, 0x999999FF);

					format(fmt_msg, sizeof fmt_msg, "%s[acc:%d]  ????? ??????? %s", GetPlayerNameEx(playerid), GetPlayerAccountID(playerid), GetPlayerTeamName(playerid));
					SendLog(playerid, LOG_TYPE_SET_LEADER, fmt_msg);
					GivePlayerDonateRub(playerid, -g_organization[org_id][O_PRICE], "??????? ????????? ????");
				}
				else
					return SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??????");
			}
			case DIALOG_DRUB_BUYZAM:
			{
				if(!response) return 1;

				new org_id = GetPlayerListitemValue(playerid, listitem)+1,
				fmt_msg[128];

				if(GetPlayerDonateRub(playerid) > GetDonatePrice(DONATE_PRICE_ZAM))
				{
					InvitePlayer(playerid, org_id, 9, true);

					if(IsTeamSubdivision(org_id))
						format(fmt_msg, sizeof fmt_msg, "?? ????? 9 ?????? \"%s\", ??????????? \"%s\"", GetPlayerSubdivisionName(playerid), GetPlayerTeamName(playerid));
					else
						format(fmt_msg, sizeof fmt_msg, "?? ????? 9 ?????? ? \"%s\"", GetPlayerTeamName(playerid));

					SendClientMessage(playerid, 0xFFFF00FF, fmt_msg);

					format(fmt_msg, sizeof fmt_msg, "[A] SYSTEM ????? %s[%d] 9 ???? ? ??????????? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerTeamName(playerid));
					SendMessageToAdmins(fmt_msg, 0x999999FF);

					format(fmt_msg, sizeof fmt_msg, "%s[acc:%d]  ????? 9 ???? %s", GetPlayerNameEx(playerid), GetPlayerAccountID(playerid), GetPlayerTeamName(playerid));
					SendLog(playerid, LOG_TYPE_SET_LEADER, fmt_msg);
					GivePlayerDonateRub(playerid, -GetDonatePrice(DONATE_PRICE_ZAM), "??????? 9 ?????");
				}
				else
					return SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??????");
			}
			case DIALOG_DRUB_BUYADMIN:
			{
				if(!response) return 1;

				if(listitem < 0) return true;

	            new lvlup = listitem + 1;
	            new price = lvlup * Config[admin_price];
	            new fmt_str[246];

	            if(GetPlayerAdminEx(playerid) + lvlup == 12) price = 2500;

	            if(GetPlayerDonateRub(playerid) > price)
				{
		            GivePlayerDonateRub(playerid, -price, "??????? ?????-????");

					AddPlayerData(playerid, P_ADMIN, +, lvlup);

					AdminAuthorization(playerid);

					mysql_format(mysql, fmt_str, sizeof fmt_str, "UPDATE accounts SET admin=%d,rub=%d WHERE id=%d", GetPlayerAdminEx(playerid), GetPlayerDonateRub(playerid), GetPlayerAccountID(playerid));
					mysql_query(mysql, fmt_str, false);
		            SendClientMessage(playerid, -1, "{0099CC}??????????? {FFD700}/ahelp, {0099CC}????? ?????? ? ????? ??????????ù?");
				}
				else
				    return SendClientMessage(playerid, -1, "? ??? ???????????? ??????, ????????? ?? ????? ?? ????? {FFCD00}"SERVER_SITE" -> ?????");

			}
			// -----------------------------------------------------------------
			case DIALOG_DONATE_INFO:
			{
				ShowPlayerDonateMenu(playerid);
			}
			case DIALOG_DONATE_ENROLLMENT:
			{
				if(!response) return true;

				new donate_money = GetPVarInt(playerid, "donate_money"),
					donate_money_with_action = GetPVarInt(playerid, "donate_money_with_action"),
					fmt_text[248];

				mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE `unitpay_payments` SET status=0 WHERE account='%s'", GetPlayerNameEx(playerid));
				mysql_query(mysql, fmt_text, false);

				if(!mysql_errno())
				{
					GivePlayerDonateRub(playerid, donate_money_with_action, "?????????? ?????");

					format
					(
						fmt_text, sizeof fmt_text,
						"{FFFFFF}\
						????? ???? ????????? ?? ??? ???????\n\
						?? ??????? ????????? ???? ?? {66cc99}%d.00 ???\n\
						{FFFFFF}? ?????? ????? ???? ????????? {33cc66}%d.00 ???\n\n\
						{FFFFFF}???????????: {ffcc00}/donate\
						",
						donate_money, donate_money_with_action
					);

					Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{00cc33}???? ????????", fmt_text, "???????", "");
				}
				else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 48)");
			}

			case DIALOG_DONATE_MENU:
			{
				if(!response) return 1;

				if(response && GetPlayerDonateMoney(playerid) <= 0) return callcmd::mm(playerid, "");

				switch(listitem)
				{
					case 0: ShowPlayerDonations(playerid, GetPlayerNameEx(playerid));
					case 1: ShowPlayerConvertDialog(playerid);
					case 2:
					{
						new fmt_text[80];

						if(GetPlayerDonateMoney(playerid) >= GetDonatePrice(DONATE_PRICE_DRUGS))
						{
							AddPlayerData(playerid, P_DRUGS, +, 8);
							UpdatePlayerDatabaseInt(playerid, "drugs", GetPlayerData(playerid, P_DRUGS));
							SendClientMessage(playerid, 0xFFFF00FF, "?? ?????? ???????????? ?? {3399FF}/drugs");
							format(fmt_text, sizeof fmt_text, "?? ????????? 8 ??? ????????? ??? ?? %d.00 ???",
							GetDonatePrice(DONATE_PRICE_DRUGS));
							SendClientMessage(playerid, 0x66CC33FF, fmt_text);

							GivePlayerDonate(playerid, -GetDonatePrice(DONATE_PRICE_DRUGS), "??????? ??????????");
						}
						else
						{
							format(fmt_text, sizeof fmt_text, "??ù ??????? ?????????? ?????????? ????? ?? ????? %d.00 ???",
							GetDonatePrice(DONATE_PRICE_DRUGS));

							SendClientMessage(playerid, -1, fmt_text);
						}

						ShowPlayerDonateMenu(playerid);
					}
					case 3:
					{
						new fmt_text[80];

						if(GetPlayerDonateMoney(playerid) >= GetDonatePrice(DONATE_PRICE_LAW_ABIDING))
						{
							AddPlayerData(playerid, P_LAW_ABIDING, +, 10);
							UpdatePlayerDatabaseInt(playerid, "law_abiding", GetPlayerData(playerid, P_LAW_ABIDING));

							SendClientMessage(playerid, 0x66CC33FF, "????????? ??????? ?????????");

							GivePlayerDonate(playerid, -GetDonatePrice(DONATE_PRICE_LAW_ABIDING), "???????? ??????????");
						}
						else
						{
							format(fmt_text, sizeof fmt_text, "??ù ???????? ?????????? ?????????? ????? ?? ????? %d.00 ???",
							GetDonatePrice(DONATE_PRICE_LAW_ABIDING));

							SendClientMessage(playerid, -1, fmt_text);
						}

						ShowPlayerDonateMenu(playerid);
					}
					case 4:
					{
						if(GetPlayerData(playerid, P_DRIVING_LIC) == 2 && GetPlayerData(playerid, P_WEAPON_LIC) == 1)
							SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???? ??? ????????");

						else
						{
							if(GetPlayerDonateMoney(playerid) >= GetDonatePrice(DONATE_PRICE_LIC_PACK))
							{
								SetPlayerData(playerid, P_DRIVING_LIC,	2);
								SetPlayerData(playerid, P_WEAPON_LIC,	1);

								UpdatePlayerDatabaseInt(playerid, "driving_lic", 2);
								UpdatePlayerDatabaseInt(playerid, "weapon_lic", 1);

								GivePlayerDonate(playerid, -GetDonatePrice(DONATE_PRICE_LIC_PACK), "??????? ?????? ????????", true);

								SendClientMessage(playerid, 0x66CC33FF, "?? ????????? ????? ????????. ???????????: {FFCD00}/lic");
							}
							else
							{
								new fmt_text[65];

								format(fmt_text, sizeof fmt_text, "??ù ??????? ???? ???????? ?????????? ????? ?? ????? %d.00 ???",
								GetDonatePrice(DONATE_PRICE_LIC_PACK));
							}
						}

						ShowPlayerDonateMenu(playerid);
					}
					case 5:
					{
					    new fmt_text[80];

						if(GetPlayerDonateMoney(playerid) >= GetDonatePrice(DONATE_PRICE_ANTIBH))
						{
							SetPlayerData(playerid, P_BANIHOP, 1);
							UpdatePlayerDatabaseInt(playerid, "AntiBh", 1);

							SendClientMessage(playerid, 0x66CC33FF, "?? ??????? ?????? ????-???????");

							GivePlayerDonate(playerid, -GetDonatePrice(DONATE_PRICE_ANTIBH), "??????? ???? ??");
						}
						else
						{
							format(fmt_text, sizeof fmt_text, "??ù ???????? ?????????? ?????????? ????? ?? ????? %d ???",
							GetDonatePrice(DONATE_PRICE_ANTIBH));

							SendClientMessage(playerid, -1, fmt_text);
						}

						ShowPlayerDonateMenu(playerid);
					}
					case 6:
					{
						callcmd::donate(playerid, "");
					}
				}
			}
			case DIALOG_DONATE_CONVERT:
			{
				if(!response) return ShowPlayerDonateMenu(playerid);

				new fmt_text[256],
					money_amount = strval(inputtext);

				if(!(1 <= money_amount <= GetPlayerDonateRub(playerid)))
				{
					if(money_amount > GetPlayerDonateRub(playerid))
					{
						format(fmt_text, sizeof fmt_text, "???????????? ???????. ?????? ?? ????? ????? %d ??????", GetPlayerDonateRub(playerid));
						SendClientMessage(playerid, 0xCECECEFF, fmt_text);
					}

					ShowPlayerConvertDialog(playerid);

					return 1;
				}

				new donate_price = 1000;
               
				//format(fmt_text, sizeof fmt_text, "?? ??????????????? {ffff00}%d{FFFFFF} BC ? {ffff00}%d{FFFFFF} ??????", money_amount, money_amount * donate_price);
				//ShowNotificationDefault(playerid, 3, fmt_text, 5, "", "");
				//SendClientMessage(playerid, 0xFFFF00FF, fmt_text);
				GivePlayerDonateRub(playerid, -money_amount, "??????? ??????", true);
				UpdatePlayerDatabaseInt(playerid, "donate_current", GetPlayerData(playerid, P_DONATE_MONEY));
				format(fmt_text, sizeof fmt_text, "~g~+$%d~n~~y~-$%d", money_amount * donate_price, money_amount);
				GameTextForPlayer(playerid, fmt_text, 4000, 1);

				format(fmt_text, sizeof fmt_text, "??????????ù ?????? %d ? ??????? ??????", money_amount);

				GivePlayerMoneyEx(playerid, money_amount * donate_price, fmt_text, true, true);
			 
			 
				return 1;
			}
            case DIALOG_DONATE_GET_MONEY:
            {
                if(!response)
                {
                    DeletePVar(playerid, "donate_convert_count");
                    return ShowPlayerDonateMenu(playerid);
                }

                new money_count;
                money_count = GetPVarInt(playerid, "donate_convert_count");

                new fmt_text[128];

                format(fmt_text, sizeof fmt_text, "?? ??????????????? {66cc00}%d.00 ?????? {ffff00}? {66cc00}%d ???.$.", money_count, money_count * GetDonatePrice(DONATE_PRICE_MONEY));
                SendClientMessage(playerid, 0xFFFF00FF, fmt_text);

                format(fmt_text, sizeof fmt_text, "~g~+%d $~n~~y~-%d $", money_count * GetDonatePrice(DONATE_PRICE_MONEY), money_count);
                GameTextForPlayer(playerid, fmt_text, 4000, 1);

                format(fmt_text, sizeof fmt_text, "??????????ù %d $. ? ??????? ??????", money_count);
                GivePlayerDonate(playerid, -money_count, fmt_text, true);

                GivePlayerMoneyEx(playerid, money_count * GetDonatePrice(DONATE_PRICE_MONEY), fmt_text, false, true);

                DeletePVar(playerid, "donate_convert_count");

                return 1;
            }
				case DIALOG_DONATE_BUY_CAR_NUMBER:
			{
				if(response)
				{
					if(IsACarNumber(inputtext))
					{
						new fmt_text[105],
							number_price = GetCarNumberPrice(inputtext),
							Cache: result,
							rows;

						mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM ownable_cars WHERE number='%s'", inputtext);
						result = mysql_query(mysql, fmt_text, true);

						rows = cache_num_rows();

						cache_delete(result);

						if(rows)
							ShowNotificationDefault(playerid, 2, 5, 2, 0, "?????? ????? ??? ???ù?! ");

						else
						{
							SetPVarString(playerid, "car_number", inputtext);
							SetPVarInt(playerid, "car_number_price", number_price);

							format(fmt_text, sizeof fmt_text, "{FFFFFF}?? ????????????? ?????? ?????? ????? {66CC66}%s {FFFFFF}?? {ffff00}%d{FFFFFF} ????", inputtext, number_price);
							Dialog(playerid, DIALOG_DONATE_ACCEPT_CAR_NUM, DIALOG_STYLE_MSGBOX, "{FFFF00}??????? ??????", fmt_text, "??????", "?????");

							return 1;
						}
					}
					else
					{
					    ShowNotificationDefault(playerid, 2, 5, 2, 0, "????????? ???? ????? ?? ????????????? ??????? CNNNCC");
					}
				}
				else 
				return 1;
			}
			case DIALOG_DONATE_ACCEPT_CAR_NUM:
			{
				if(response)
				{
					new number_price = GetPVarInt(playerid, "car_number_price"),
						fmt_text[100];

					if(GetPlayerDonateRub(playerid) >= number_price)
					{
						new car_number[7],
							vehicleid,
							index;

						GetPVarString(playerid, "car_number", car_number, sizeof car_number);

						vehicleid = GetPlayerOwnableCar(playerid);

						if(vehicleid != INVALID_VEHICLE_ID)
						{
							index = GetVehicleData(vehicleid, V_ACTION_ID);

							format(g_ownable_car[index][OC_NUMBER], 7, car_number);

							UpdateVehicleLabel(vehicleid, 0xFFFF00EE, GetOwnableCarData(index, OC_NUMBER));

							format(fmt_text, sizeof fmt_text, ""SC"?? ?????? ?????? ???????: {ffff00}\"%s\" {ffffff}?? {ffff00}%d{ffffff} ???", GetOwnableCarData(index, OC_NUMBER), number_price);
							ShowNotificationDefault(playerid, 3, 5, 1, 0, fmt_text);

							mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET number='%s' WHERE id='%d' LIMIT 1", GetOwnableCarData(index, OC_NUMBER), GetOwnableCarData(index, OC_SQL_ID));
							mysql_query(mysql, fmt_text, false);

							GivePlayerDonateRub(playerid, -number_price, "??????? ???????", true);
						
							
						}
						else
						{
							if(GetPlayerOwnableCars(playerid) == 0)
								 ShowNotificationDefault(playerid, 2, 5, 2, 0, "? ??? ??? ??????? ??????????! ");
							else
								 ShowNotificationDefault(playerid, 2, 5, 2, 0, "??? ?????? ????????? ?? ???????? ?? ???????! ");
						}
					}
					else
					{
						format(fmt_text, sizeof fmt_text, ""USC"??ù ??????? ?????? ?????????? ????? ?? ????? %d.00 ???.", number_price);
						ShowNotificationDefault(playerid, 3, 5, 2, 0, fmt_text);
					}
				}

			}
			case DIALOG_DONATE_CHANGE_NAME:
			{
				if(response)
				{
					new len = strlen(inputtext);
					if(4 <= len <= 20)
					{
						new bool: valid_name = true;
						for(new idx; idx < len; idx ++)
						{
							switch(inputtext[idx])
							{
								case 'a'..'z', 'A'..'Z', '[', ']', '_': continue;
								default:
									valid_name = false;
							}
						}

						if(!strcmp(GetPlayerNameEx(playerid), inputtext, true))
						{
							ShowNotificationDefault(playerid, 2, 5, 2, 0, "?? ??? ??????????? ??? ??ù.");
						}
						else if(valid_name)
						{
							new query[128];
							new Cache: result, rows;

							mysql_format(mysql, query, sizeof query, "SELECT id FROM accounts WHERE name='%e' LIMIT 1", inputtext);
							result = mysql_query(mysql, query, true);

							rows = cache_num_rows();
							cache_delete(result);

							if(!rows)
							{

								if(ChangePlayerName(playerid, inputtext, false))
								{
									Dialog
									(
										playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
										"{FFCD00}??ù ????????",
										"{66FF00}???? ??ù ??????? ????????.\n\n"\
										"{FFFFFF}? ????????? ??? ??? ????? ? ???? ??????????? ???? ????? ??ù. ??ù\n"\
										"????? ????? ???????? ??? ? ???? ??????? CRMP. ??????????? ??ù??\n"\
										"?????? ???????? ???? ? ??????? ???.",
										"??", ""
									);

									GivePlayerDonateRub(playerid, -50, "????? ?????", true);
								
								

									return 1;
								}
								else ShowNotificationDefault(playerid, 2, 5, 3, 0, "??????????ù ??????! ");

							}
							else ShowNotificationDefault(playerid, 2, 5, 2, 0, "????????? ???? ??ù ??? ???????????ù! ");

						}
						else
						{
						    ShowNotificationDefault(playerid, 2, 5, 2, 0, "??ù ??? ???????????ù ??? ???????? ???????????? ???????!");
						    ShowNotificationDefault(playerid, 2, 5, 2, 0, "??????????? ????????? ????? a-z A-Z, ? ????? ?????? _");
						}
					}
					else ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? ?????? ?????!");
				}

			}
			case DIALOG_DONATE_BUY_NUMBER:
			{
				if(response)
				{
					if(strlen(inputtext) == 4 && (1000 <= strval(inputtext) <= 9999))
					{
						new number = strval(inputtext),
							query[102],
							rows,
							Cache: result;

						mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE phone=%d", number);
						result = mysql_query(mysql, query, true);

						rows = cache_num_rows();

						cache_delete(result);

						if(rows)
							ShowNotificationDefault(playerid, 2, 5, 2, 0, "????????? ???? ????? ??? ???ù?");

						else
						{
							SetPlayerData(playerid, P_PHONE, number);
							UpdatePlayerDatabaseInt(playerid, "phone", number);

							GivePlayerDonateRub(playerid, -70, "????? ?????? ????????");
						
						

							format
							(
								query, sizeof query,
								"{FFFFFF}????? ???????? ???????\n"\
								"ù????? ? ????  ????? ??ù?????ù ?? ?????? {0099FF}%d",
								GetPlayerPhone(playerid)
							);
							return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{66CC00}????? ???????", query, "???????", "");
						}
					}
					else ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? ?????? ?????!");
				}

			}
			case DIALOG_DONATE_SKILLS:
			{
				if(response)
				{
					SetPVarInt(playerid, "skill_index", listitem);

					new skill_amount = GetPlayerSkillAmount(playerid, listitem);

					new title[48],
						fmt_text[200];

					format(title, sizeof title, "{FFCD00}????????? ?????: %s", skill_name[listitem]);

					format
					(
						fmt_text, sizeof fmt_text,
						"{FFCD00}%s:\t\t\t{FFFFFF}%d%%\n\n"\
						"????????? 1 ??.:\t{6699cc}%d ???.\n"\
						"{FFFFFF}??????? ?????????? ??????, ?? ???????\n"\
						"?? ?????? ????????? ??? ?????:",
						skill_name[listitem],
						skill_amount,
						GetDonatePrice(DONATE_PRICE_SKILLS)
					);

					Dialog(playerid, DIALOG_DONATE_SKILL_BUY, DIALOG_STYLE_INPUT, title, fmt_text, "?????", "??????");
				}
			}
			case DIALOG_DONATE_SKILL_BUY:
			{
				if(response)
				{
					new skill_index = GetPVarInt(playerid, "skill_index"),
						skill_amount = strval(inputtext);

					if(!(0 <= skill_index <= 11))
						return ShowNotificationDefault(playerid, 2, 5, 2, 0, "??????????ù ??????!");

					if(skill_amount > 0 && IsNumeric(inputtext))
					{
						new skill_max = 100 - GetPlayerSkillAmount(playerid, skill_index);

						new fmt_text[90];

						if(skill_amount <= skill_max)
						{
							new skill_price = GetDonatePrice(DONATE_PRICE_SKILLS) * skill_amount;

							if(GetPlayerDonateRub(playerid) >= skill_price)
							{
								GivePlayerDonateRub(playerid, -skill_price, "???????? ???????", true, true);

								SetPlayerSkillAmount(playerid, skill_index, GetPlayerSkillAmount(playerid, skill_index) + skill_amount);

								new skill_db_name[12][20] =
								{
									"power",
									"skill_colt",
									"skill_sdpistol",
									"skill_deagle",
									"skill_shotgun",
									"skill_mp5",
									"skill_ak47",
									"skill_m4",
									"skill_sniper_rifle",
									"skill_sawnoff",
									"skill_combat_sg",
									"skill_micro_uzi"
								};

								UpdatePlayerDatabaseInt(playerid, skill_db_name[skill_index], GetPlayerSkillAmount(playerid, skill_index));

								format(fmt_text, sizeof fmt_text, "?? ????????? ????? %s ?? %d ??. ù?????? ????????: %d ??.",
								skill_name[skill_index], skill_amount, GetPlayerSkillAmount(playerid, skill_index));

								ShowNotificationDefault(playerid, 3, 5, 1, 0, fmt_text);
							
							}
							else
							{
								format(fmt_text, sizeof fmt_text, "??ù ???????? %d ??. ?????? ????????ù %d.00 ???. ?? ?????", skill_amount, skill_price);
								ShowNotificationDefault(playerid, 3, 5, 2, 0, fmt_text);
							}
						}
						else
						{
							format(fmt_text, sizeof fmt_text, "???????????? ???????? ??????: 100 ??., ?? ?????? ????????? ??? %d ??.", skill_max);
							ShowNotificationDefault(playerid, 3, 5, 1, 0, fmt_text);
						}
					}
					else ShowNotificationDefault(playerid, 2, 5, 2, 0, "??????? ?????????? ????????");
				}

			}
			// -----------------------------------------------------------------
			case DIALOG_TEAM_CHANGE_SKIN:
{
    if (!response || !(0 <= listitem < 10)) return 1;

    new to_player = GetPVarInt(playerid, "change_team_skin_playerid");
    new team_id = GetPlayerTeamEx(playerid);

    if (!(1 <= team_id < MAX_ORG) || !(9 <= GetPlayerJob(playerid) <= 10)) return 1;
    if (!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || team_id != GetPlayerTeamEx(to_player)) return 1;
    if (GetPlayerSex(to_player)) return 1;

    new index = GetPlayerListitemValue(playerid, listitem);
    new new_skin = GetTeamData(team_id, O_SKINS)[index];

    SetPlayerData(to_player, P_OSKIN, new_skin);

    new query[85];
    mysql_format(mysql, query, sizeof query, "UPDATE accounts SET org_skin=%d WHERE id=%d", new_skin, GetPlayerAccountID(to_player));
    mysql_query(mysql, query, false);

    ResetSkin(to_player);

    format(query, sizeof query, "???? ????????? ???? ???????? %s ??????????? %s[%d]",
        GetPlayerJob(playerid) >= 10 ? "???????" : "????????????",
        GetPlayerNameEx(playerid), playerid);
    SendClientMessage(to_player, 0x3399FFFF, query);

    format(query, sizeof query, "?? ???????? ????????? %s[%d]", GetPlayerNameEx(to_player), to_player);
    SendClientMessage(playerid, 0x3399FFFF, query);

    return 1;
}
			case DIALOG_TEAM_LEAVE:
			{
				if(response)
				{
					new fmt_text[110];

					format(fmt_text, sizeof fmt_text, "%s %s[%d] ??????? ??????????? ?? ???????????? ???????",
					GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), playerid);

					SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_text, 0x3399FFFF, playerid);

					format(fmt_text, sizeof fmt_text, "?? ???????? ??????????? \"%s\"", GetTeamName(GetPlayerTeamEx(playerid)));
					SendClientMessage(playerid, 0xFFFF00FF, fmt_text);

					EndWorkDayUval(playerid);
					UnInvite(playerid, playerid);
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_DEBTORLIST:
			{
				if(!response) return 1;
				if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) < 4) return 1;

				if(0 <= listitem <= 2)
				{
					ShowDebtorListDialog(playerid, listitem);
				}

				return 1;
			}

			case DIALOG_DEBTORLIST_HOUSE..DIALOG_DEBTORLIST_FUEL_ST:
			{
				if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) < 4) return 1;
				if(!response) return callcmd::debtorlist(playerid, "");
				if(!(0 <= listitem <= 19)) return 1;

				new type = dialogid - DIALOG_DEBTORLIST_HOUSE;
				new buffer = GetPlayerListitemValue(playerid, listitem);

				switch(type)
				{
					case 0:
					{
						if(!GetHouseData(buffer, H_TYPE))
						{
							EnablePlayerGPS(playerid, GetHouseData(buffer, H_POS_X), GetHouseData(buffer, H_POS_Y), GetHouseData(buffer, H_POS_Z), "??? ???????? ??????? ? ??? ?? GPS");
						}
						else
						{
							new ent_id = GetHouseData(buffer, H_ENTRACE);

							EnablePlayerGPS(playerid, GetEntranceData(ent_id, E_POS_X), GetEntranceData(ent_id, E_POS_Y), GetEntranceData(ent_id, E_POS_Z), "??????? ???????? ???????? ???????? ? ??? ?? GPS");
						}
					}
					case 1: EnablePlayerGPS(playerid, GetBusinessData(buffer, B_POS_X), GetBusinessData(buffer, B_POS_Y), GetBusinessData(buffer, B_POS_Z), "???????ù??? ???????? ???????? ??????? ?????? ? ??? ?? GPS");
					case 2: EnablePlayerGPS(playerid, GetFuelStationData(buffer, FS_POS_X), GetFuelStationData(buffer, FS_POS_Y), GetFuelStationData(buffer, FS_POS_Z), "??? ???????? ???????? ? ??? ?? GPS");
					default: return -1;
				}

				return 1;
			}

			case DIALOG_DEBTOR_SELL_LIST:
			{
				if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) < 7) return 1;
				//if(!response) return callcmd::debtorsell(playerid, "");
				if(!response) return 1;

				switch(listitem)
				{
					case 0:
					{
						Dialog
						(
							playerid, DIALOG_DEBTOR_SELL_HOUSE, DIALOG_STYLE_INPUT,
							"{99CC00}??? ????????ù ?? ?????? ????????ù",
							"????????? ??? ????????ù ?? ?????? ????????ù\n\n\
							{FFFFFF}??????? ????? ??????:\n\n\
							{FFCC00}1. ????? ????/????????\n\
							2. ID ??????? ???ù????\n\
							3. ID ??????? ???ù????\n\n\
							{FFFFFF}????? ????????? ??????????? ?????????, ????????? ???\n\
							????? ????? ?????????ù ???? ??????? ????? ???????",
							"?????????", "?????"
						);

						// 0x3399FFFF > ??????? ??? ??????? ?? ????/????????. ?? ?????????? ?????????? ??????????ù ????ù
						// 0x3399FFFF > ?? ????????? ?????? 1000 ???.

					}
					case 1:
					{
						Dialog
						(
							playerid, DIALOG_DEBTOR_SELL_BIZ, DIALOG_STYLE_INPUT,
							"{99CC00}??? ???ù??ù ??????ù??ù",
							"????????? ??? ???ù??ù ???????ù??ù ? ????????\n\n\
							{FFFFFF}??????? ????? ??????:\n\n\
							{FFCC00}1. ????? ???????ù??ù\n\
							2. ID ??????? ???ù????\n\
							3. ID ??????? ???ù????\n\n\
							{FFFFFF}????? ????????? ??????????? ?????????, ????????? ???\n\
							????? ????? ?????????ù ???? ???????ù??? ?????? ?????????????? ???????????",
							"?????????", "?????"
						);

						// 0x3399FFFF > ???????ù??? ???????? ???? ???ù?? ? ?????? ???????????. ?? ?????????? ?????????? ??????????ù ????ù
						// 0x3399FFFF > ?? ????????? ?????? 1000 ???.
					}
					case 2:
					{
						Dialog
						(
							playerid, DIALOG_DEBTOR_SELL_FUEL_ST, DIALOG_STYLE_INPUT,
							"{99CC00}??? ???ù??ù ???",
							"????????? ??? ???ù??ù ??? ? ????????\n\n\
							{FFFFFF}??????? ????? ??????:\n\n\
							{FFCC00}1. ????? ???\n\
							2. ID ??????? ???ù????\n\
							3. ID ??????? ???ù????\n\n\
							{FFFFFF}????? ????????? ??????????? ?????????, ????????? ???\n\
							????? ????? ?????????ù ???? ??? ?????? ?????????????? ???????????",
							"?????????", "?????"
						);
					}
					default: return -1;
				}

				return 1;
			}

			case DIALOG_DEBTOR_SELL_HOUSE:
			{
				if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) < 4) return 1;

				if(!response) return callcmd::debtorsell(playerid, "");

				new sell_houseid = -1, worker_id[2] = {-1, -1};
				sscanf(inputtext, "ddd", sell_houseid, worker_id[0], worker_id[1]);

				if(strlen(inputtext) > 0)
				{
					if(!(0 <= sell_houseid <= g_house_loaded-1))
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ????? ????/????????");

					else if(!IsPlayerInRangeOfPoint(playerid, 7.0, GetHouseData(sell_houseid, H_POS_X), GetHouseData(sell_houseid, H_POS_Y), GetHouseData(sell_houseid, H_POS_Z)))
						SendClientMessage(playerid, 0xBBBB00FF, "?? ?????????? ?????? ?? ????/???????? ????????");

					else if(!IsPlayerConnected(worker_id[0]) || !IsPlayerLogged(worker_id[0]) || worker_id[0] == playerid)
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ID ??????? ???ù????");

					else if(!IsPlayerConnected(worker_id[1]) || !IsPlayerLogged(worker_id[1]) || worker_id[1] == playerid || worker_id[0] == worker_id[1])
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ID ??????? ???ù????");

					else if(GetPlayerTeamEx(worker_id[0]) != TEAM_GOVERNMENT && GetPlayerJob(worker_id[0]) < 3 || GetPlayerTeamEx(worker_id[1]) != TEAM_GOVERNMENT && GetPlayerJob(worker_id[1]) < 3)
						SendClientMessage(playerid, 0xBBBB00FF, "???? ?? ???ù??? ?? ù??ù???ù ??????????? ????????????? 3 ?????");

					else if(!IsPlayerInRangeOfPoint(worker_id[0], 7.0, GetHouseData(sell_houseid, H_POS_X), GetHouseData(sell_houseid, H_POS_Y), GetHouseData(sell_houseid, H_POS_Z)) || !IsPlayerInRangeOfPoint(worker_id[1], 7.0, GetHouseData(sell_houseid, H_POS_X), GetHouseData(sell_houseid, H_POS_Y), GetHouseData(sell_houseid, H_POS_Z)))
						SendClientMessage(playerid, 0xBBBB00FF, "???? ?? ???ù??? ????????ù ?????? ?? ????/???????? ????????");

					else if((((GetHouseData(sell_houseid, H_RENT_DATE) - gettime()) / 86400) + 1) > 0)
						SendClientMessage(playerid, 0xBBBB00FF, "? ????????? ????? ????/???????? ??? ??????????? ?? ???????? ?????");

					else if(GetHouseData(sell_houseid, H_EVICTION))
						SendClientMessage(playerid, 0xBBBB00FF, "??? ????????ù ?? ????? ?????? ????????ù ??? ????????");

					else
					{
						SendClientMessage(playerid, 0x3399FFFF, "??????? ??? ??????? ?? ????/????????. ?? ?????????? ?????????? ??????????ù ????ù");
						SendClientMessage(playerid, 0x3399FFFF, "?? ????????? ?????? 1000 ???.");

						SetPlayerChatBubble(playerid, "+1000 ???", 0x3399FFFF, 5.0, 3000);
						GameTextForPlayer(playerid, "~b~~h~+1000 rub", 4000, 1);
						AddPlayerData(playerid, P_WAGE, +, 1000);
						UpdatePlayerDatabaseInt(playerid, "wage", GetPlayerData(playerid, P_WAGE));

						for(new i; i < 2; i ++)
						{
							SendClientMessage(worker_id[i], 0x3399FFFF, "?? ???????? ?????? 500 ???.");
							SetPlayerChatBubble(worker_id[i], "+500 ???", 0x3399FFFF, 5.0, 3000);
							GameTextForPlayer(worker_id[i], "~b~~h~+500 rub", 4000, 1);
							AddPlayerData(worker_id[i], P_WAGE, +, 500);
							UpdatePlayerDatabaseInt(worker_id[i], "wage", GetPlayerData(worker_id[i], P_WAGE));
						}

						new query[90];

						mysql_format(mysql, query, sizeof query, "UPDATE accounts SET house_type=-1,house_room=-1,house=-1 WHERE id=%d", GetHouseData(sell_houseid, H_OWNER_ID));
						mysql_query(mysql, query, false);

						new owner_player = GetPlayerIDBySqlID(GetHouseData(sell_houseid, H_OWNER_ID));
						if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player))
						{
							SetPlayerData(owner_player, P_HOUSE, -1);
							SendClientMessage(owner_player, 0xFF6600FF, "?? ???? ???????? ?? ????/???????? ?? ???????? ?????");
						}
						SetHouseData(sell_houseid, H_OWNER_ID, 0);
						SetHouseData(sell_houseid, H_IMPROVEMENTS,		0);

						SetHouseData(sell_houseid, H_RENT_DATE,		0);
						SetHouseData(sell_houseid, H_LOCK_STATUS,		false);
						//SetHouseData(sell_houseid, H_RENT_DATE, gettime() + (random(169200) + 3600));
						SetHouseData(sell_houseid, H_EVICTION, 1);

						mysql_format(mysql, query, sizeof query, "UPDATE houses SET eviction=1, rent_time=%d WHERE id=%d LIMIT 1", GetHouseData(sell_houseid, H_RENT_DATE), GetHouseData(sell_houseid, H_SQL_ID));
						mysql_query(mysql, query, false);

						return 1;
					}
				}

				Dialog
				(
					playerid, DIALOG_DEBTOR_SELL_HOUSE, DIALOG_STYLE_INPUT,
					"{99CC00}??? ????????ù ?? ?????? ????????ù",
					"????????? ??? ????????ù ?? ?????? ????????ù\n\n\
					{FFFFFF}??????? ????? ??????:\n\n\
					{FFCC00}1. ????? ????/????????\n\
					2. ID ??????? ???ù????\n\
					3. ID ??????? ???ù????\n\n\
					{FFFFFF}????? ????????? ??????????? ?????????, ????????? ???.\n\
					????? ????? ?????????ù ???? ??????? ????? ???????.",
					"?????????", "?????"
				);
				return 1;
			}

			case DIALOG_DEBTOR_SELL_BIZ:
			{
				if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) < 4) return 1;

				if(!response) return callcmd::debtorsell(playerid, "");

				new sell_biz_id = -1, worker_id[2] = {-1, -1};
				sscanf(inputtext, "ddd", sell_biz_id, worker_id[0], worker_id[1]);

				if(strlen(inputtext) > 0)
				{
					if(!(0 <= sell_biz_id <= g_business_loaded-1))
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ????? ???????ù??ù");

					else if(!IsPlayerInRangeOfPoint(playerid, 7.0, GetBusinessData(sell_biz_id, B_POS_X), GetBusinessData(sell_biz_id, B_POS_Y), GetBusinessData(sell_biz_id, B_POS_Z)))
						SendClientMessage(playerid, 0xBBBB00FF, "?? ?????????? ?????? ?? ???????ù??ù ????????");

					else if(!IsPlayerConnected(worker_id[0]) || !IsPlayerLogged(worker_id[0]) || worker_id[0] == playerid)
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ID ??????? ???ù????");

					else if(!IsPlayerConnected(worker_id[1]) || !IsPlayerLogged(worker_id[1]) || worker_id[1] == playerid || worker_id[0] == worker_id[1])
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ID ??????? ???ù????");

					else if(GetPlayerTeamEx(worker_id[0]) != TEAM_GOVERNMENT && GetPlayerJob(worker_id[0]) < 3 || GetPlayerTeamEx(worker_id[1]) != TEAM_GOVERNMENT && GetPlayerJob(worker_id[1]) < 3)
						SendClientMessage(playerid, 0xBBBB00FF, "???? ?? ???ù??? ?? ù??ù???ù ??????????? ????????????? 3 ?????");

					else if(!IsPlayerInRangeOfPoint(worker_id[0], 7.0, GetBusinessData(sell_biz_id, B_POS_X), GetBusinessData(sell_biz_id, B_POS_Y), GetBusinessData(sell_biz_id, B_POS_Z)) || !IsPlayerInRangeOfPoint(worker_id[1], 7.0, GetBusinessData(sell_biz_id, B_POS_X), GetBusinessData(sell_biz_id, B_POS_Y), GetBusinessData(sell_biz_id, B_POS_Z)))
						SendClientMessage(playerid, 0xBBBB00FF, "???? ?? ???ù??? ????????ù ?????? ?? ???????ù??ù ????????");

					else if((((GetBusinessData(sell_biz_id, B_RENT_DATE) - gettime()) / 86400) + 1) > 0)
						SendClientMessage(playerid, 0xBBBB00FF, "? ????????? ????? ???????ù??ù ??? ??????????? ?? ???????? ?????");

					else if(GetBusinessData(sell_biz_id, B_EVICTION))
						SendClientMessage(playerid, 0xBBBB00FF, "??? ???ù??ù ????? ???????ù??ù ??? ????????");

					else
					{
						// 0x3399FFFF > ???????ù??? ???????? ???? ???ù?? ? ?????? ???????????. ?? ?????????? ?????????? ??????????ù ????ù
						// 0x3399FFFF > ?? ????????? ?????? 1000 ???.

						SendClientMessage(playerid, 0x3399FFFF, "???????ù??? ???????? ???? ???ù?? ? ?????? ???????????. ?? ?????????? ?????????? ??????????ù ????ù");
						SendClientMessage(playerid, 0x3399FFFF, "?? ????????? ?????? 1000 ???.");

						SetPlayerChatBubble(playerid, "+1000 ???", 0x3399FFFF, 5.0, 3000);
						GameTextForPlayer(playerid, "~b~~h~+1000 rub", 4000, 1);
						AddPlayerData(playerid, P_WAGE, +, 1000);
						UpdatePlayerDatabaseInt(playerid, "wage", GetPlayerData(playerid, P_WAGE));

						for(new i; i < 2; i ++)
						{
							SendClientMessage(worker_id[i], 0x3399FFFF, "?? ???????? ?????? 500 ???.");
							SetPlayerChatBubble(worker_id[i], "+500 ???", 0x3399FFFF, 5.0, 3000);
							GameTextForPlayer(worker_id[i], "~b~~h~+500 rub", 4000, 1);
							AddPlayerData(worker_id[i], P_WAGE, +, 500);
							UpdatePlayerDatabaseInt(worker_id[i], "wage", GetPlayerData(worker_id[i], P_WAGE));
						}

						new query[90];

						mysql_format(mysql, query, sizeof query, "UPDATE accounts SET business=-1 WHERE id=%d", GetBusinessData(sell_biz_id, B_OWNER_ID));
						mysql_query(mysql, query, false);

						new owner_player = GetPlayerIDBySqlID(GetBusinessData(sell_biz_id, B_OWNER_ID));
						if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player))
						{
							SetPlayerData(owner_player, P_BUSINESS, -1);
							SendClientMessage(owner_player, 0xFF6600FF, "???? ???????ù??? ???? ???ù?? ???????????? ?? ???????? ???????");
						}
						SetBusinessData(sell_biz_id, B_OWNER_ID, 0);
						SetBusinessData(sell_biz_id, B_IMPROVEMENTS, 		0);

						SetBusinessData(sell_biz_id, B_PRODS, 			0);
						SetBusinessData(sell_biz_id, B_PROD_PRICE,		0);

						SetBusinessData(sell_biz_id, B_BALANCE,			0);
						SetBusinessData(sell_biz_id, B_RENT_DATE,			0);
						SetBusinessData(sell_biz_id, B_ENTER_MUSIC,		0);
						SetBusinessData(sell_biz_id, B_LOCK_STATUS,		false);
						//SetBusinessData(sell_biz_id, B_RENT_DATE, gettime() + (random(169200) + 3600));
						SetBusinessData(sell_biz_id, B_EVICTION, 1);

						mysql_format(mysql, query, sizeof query, "UPDATE business SET eviction=1, rent_time=%d WHERE id=%d LIMIT 1", GetBusinessData(sell_biz_id, B_RENT_DATE), GetBusinessData(sell_biz_id, B_SQL_ID));
						mysql_query(mysql, query, false);

						return 1;
					}
				}

				Dialog
				(
					playerid, DIALOG_DEBTOR_SELL_BIZ, DIALOG_STYLE_INPUT,
					"{99CC00}??? ???ù??ù ???????ù??ù",
					"????????? ??? ???ù??ù ???????ù??ù ? ????????\n\n\
					{FFFFFF}??????? ????? ??????:\n\n\
					{FFCC00}1. ????? ???????ù??ù\n\
					2. ID ??????? ???ù????\n\
					3. ID ??????? ???ù????\n\n\
					{FFFFFF}????? ????????? ??????????? ?????????, ????????? ???\n\
					????? ????? ?????????ù ???? ???????ù??? ?????? ?????????????? ???????????",
					"?????????", "?????"
				);
				return 1;
			}

			case DIALOG_DEBTOR_SELL_FUEL_ST:
			{
				if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) < 4) return 1;

				if(!response) return callcmd::debtorsell(playerid, "");

				new sell_fs_id = -1, worker_id[2] = {-1, -1};
				sscanf(inputtext, "ddd", sell_fs_id, worker_id[0], worker_id[1]);

				if(strlen(inputtext) > 0)
				{
					if(!(0 <= sell_fs_id <= g_fuel_station_loaded-1))
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ????? ???????ù??ù");

					else if(!IsPlayerInRangeOfPoint(playerid, 7.0, GetFuelStationData(sell_fs_id, FS_POS_X), GetFuelStationData(sell_fs_id, FS_POS_Y), GetFuelStationData(sell_fs_id, FS_POS_Z)))
						SendClientMessage(playerid, 0xBBBB00FF, "?? ?????????? ?????? ?? ???????ù??ù ????????");

					else if(!IsPlayerConnected(worker_id[0]) || !IsPlayerLogged(worker_id[0]) || worker_id[0] == playerid)
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ID ??????? ???ù????");

					else if(!IsPlayerConnected(worker_id[1]) || !IsPlayerLogged(worker_id[1]) || worker_id[1] == playerid || worker_id[0] == worker_id[1])
						SendClientMessage(playerid, 0xBBBB00FF, "??????? ID ??????? ???ù????");

					else if(GetPlayerTeamEx(worker_id[0]) != TEAM_GOVERNMENT && GetPlayerJob(worker_id[0]) < 3 || GetPlayerTeamEx(worker_id[1]) != TEAM_GOVERNMENT && GetPlayerJob(worker_id[1]) < 3)
						SendClientMessage(playerid, 0xBBBB00FF, "???? ?? ???ù??? ?? ù??ù???ù ??????????? ????????????? 3 ?????");

					else if(!IsPlayerInRangeOfPoint(worker_id[0], 7.0, GetFuelStationData(sell_fs_id, FS_POS_X), GetFuelStationData(sell_fs_id, FS_POS_Y), GetFuelStationData(sell_fs_id, FS_POS_Z)) || !IsPlayerInRangeOfPoint(worker_id[1], 7.0, GetFuelStationData(sell_fs_id, FS_POS_X), GetFuelStationData(sell_fs_id, FS_POS_Y), GetFuelStationData(sell_fs_id, FS_POS_Z)))
						SendClientMessage(playerid, 0xBBBB00FF, "???? ?? ???ù??? ????????ù ?????? ?? ???????ù??ù ????????");

					else if((((GetFuelStationData(sell_fs_id, FS_RENT_DATE) - gettime()) / 86400) + 1) > 0)
						SendClientMessage(playerid, 0xBBBB00FF, "? ????????? ????? ???????ù??ù ??? ??????????? ?? ???????? ?????");

					else if(GetFuelStationData(sell_fs_id, FS_EVICTION))
						SendClientMessage(playerid, 0xBBBB00FF, "??? ???ù??ù ????? ???????ù??ù ??? ????????");

					else
					{
						// 0x3399FFFF > ??? ???????? ???? ???ù?? ? ?????? ???????????. ?? ?????????? ?????????? ??????????ù ????ù
						// 0x3399FFFF > ?? ????????? ?????? 1000 ???.

						SendClientMessage(playerid, 0x3399FFFF, "??? ???????? ???? ???ù?? ? ?????? ???????????. ?? ?????????? ?????????? ??????????ù ????ù");
						SendClientMessage(playerid, 0x3399FFFF, "?? ????????? ?????? 1000 ???.");

						SetPlayerChatBubble(playerid, "+1000 ???", 0x3399FFFF, 5.0, 3000);
						GameTextForPlayer(playerid, "~b~~h~+1000 rub", 4000, 1);
						AddPlayerData(playerid, P_WAGE, +, 1000);
						UpdatePlayerDatabaseInt(playerid, "wage", GetPlayerData(playerid, P_WAGE));

						for(new i; i < 2; i ++)
						{
							SendClientMessage(worker_id[i], 0x3399FFFF, "?? ???????? ?????? 500 ???.");
							SetPlayerChatBubble(worker_id[i], "+500 ???", 0x3399FFFF, 5.0, 3000);
							GameTextForPlayer(worker_id[i], "~b~~h~+500 rub", 4000, 1);
							AddPlayerData(worker_id[i], P_WAGE, +, 500);
							UpdatePlayerDatabaseInt(worker_id[i], "wage", GetPlayerData(worker_id[i], P_WAGE));
						}

						new query[90];

						mysql_format(mysql, query, sizeof query, "UPDATE accounts SET eviction=1, fuel_st = -1 WHERE id=%d", GetFuelStationData(sell_fs_id, FS_OWNER_ID));
						mysql_query(mysql, query, false);

						new owner_player = GetPlayerIDBySqlID(GetFuelStationData(sell_fs_id, FS_OWNER_ID));
						if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player))
						{
							SetPlayerData(owner_player, P_FUEL_ST, -1);
							SendClientMessage(owner_player, 0xFF6600FF, "???? ???????ù??? ???? ???ù?? ???????????? ?? ???????? ???????");
						}
						SetFuelStationData(sell_fs_id, FS_IMPROVEMENTS, 0);

						SetFuelStationData(sell_fs_id, FS_FUELS, 		1000);
						SetFuelStationData(sell_fs_id, FS_FUEL_PRICE,	3);
						SetFuelStationData(sell_fs_id, FS_BUY_FUEL_PRICE,0);

						SetFuelStationData(sell_fs_id, FS_BALANCE,		0);
						SetFuelStationData(sell_fs_id, FS_RENT_DATE,		0);
						SetFuelStationData(sell_fs_id, FS_LOCK_STATUS,	false);
						//SetFuelStationData(sell_fs_id, FS_RENT_DATE, gettime() + (random(169200) + 3600));
						SetFuelStationData(sell_fs_id, FS_EVICTION, 1);

						mysql_format(mysql, query, sizeof query, "UPDATE fuel_stations SET rent_time=%d WHERE id=%d LIMIT 1", GetFuelStationData(sell_fs_id, FS_RENT_DATE), GetFuelStationData(sell_fs_id, FS_SQL_ID));
						mysql_query(mysql, query, false);

						UpdateFuelStationLabel(sell_fs_id);

						return 1;
					}
				}

				Dialog
				(
					playerid, DIALOG_DEBTOR_SELL_FUEL_ST, DIALOG_STYLE_INPUT,
					"{99CC00}??? ???ù??ù ???",
					"????????? ??? ???ù??ù ??? ? ????????\n\n\
					{FFFFFF}??????? ????? ??????:\n\n\
					{FFCC00}1. ????? ???\n\
					2. ID ??????? ???ù????\n\
					3. ID ??????? ???ù????\n\n\
					{FFFFFF}????? ????????? ??????????? ?????????, ????????? ???\n\
					????? ????? ?????????ù ???? ??? ?????? ?????????????? ???????????",
					"?????????", "?????"
				);
				return 1;
			}

			case DIALOG_ADVISOR_MENU:
			{
				if(!response) return 1;

				if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) != 5) return 1;

				switch(listitem)
				{
					case 0:
					{
						if(!IsValidDynamic3DTextLabel(g_player[playerid][P_ADVISOR_LABEL]))
						{
							g_player[playerid][P_ADVISOR_LABEL] = CreateDynamic3DTextLabel("????????", 0xFFCC33FF, 0.0, 0.0, 0.3, 10.0, playerid);
							Attach3DTextLabelToPlayer(g_player[playerid][P_ADVISOR_LABEL], playerid, 0.0, 0.0, -0.8);

							SendClientMessage(playerid, 0x3399FFFF, "?? ?????? ???????");
						}
						else
						{
							DestroyDynamic3DTextLabel(g_player[playerid][P_ADVISOR_LABEL]);
							g_player[playerid][P_ADVISOR_LABEL] = Text3D: -1;

							SendClientMessage(playerid, 0x3399FFFF, "?? ??ù?? ???????");
						}
					}
					case 1:
					{
						if(GetPlayerData(playerid, P_ADVISOR_BLOCK_CHAT))
						{
							SetPlayerData(playerid, P_ADVISOR_BLOCK_CHAT, false);
							SendClientMessage(playerid, 0x66CC00FF, "?? ???????? ??????????? ????? ???????????");
						}
						else
						{
							SetPlayerData(playerid, P_ADVISOR_BLOCK_CHAT, true);
							SendClientMessage(playerid, 0xFF6600FF, "?? ????????? ??????????? ????? ???????????");
						}
					}
					case 2:
					{
						if(GetPlayerJob(playerid) != 5)
						{
							SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ?????????? ?? ???. ??????????ù?");
						}
						else
						{
							Dialog
							(
								playerid, DIALOG_ADVISOR_TEAM_STRUCTURE, DIALOG_STYLE_LIST,
								"{33CC66}???????? ???????????",
								"1. ????????????? ???????\n\
								2. ???????ù ?????\n\
								3. ????????ù ????????\n\
								4. ???\n\
								5. ????? ??????? ?1 (?????)\n\
								6. ????? ??????? ?2 (????)\n\
								7. ???",
								"???????", "??????"
							);
							return 1;
						}
					}
					default: return -1;
				}

				callcmd::smenu(playerid, "");
				return 1;
			}

			case DIALOG_ADVISOR_TEAM_STRUCTURE:
			{
				if(!response) return 1;
				if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) != 5) return 1;

				if(0 <= listitem <= 6)
				{
					ShowTeamStructureDialog(playerid, (listitem + 1));
				}

				return 1;
			}

			// -----------------------------------------------------------------
			case DIALOG_ADMINCALL_MENU:
            {
                switch(listitem)
                {
                    case 0: ShowPlayerReportDialog(playerid);
                    case 1: ShowPlayerAskDialog(playerid);
                }
            }
			case DIALOG_ADMIN_PANEL:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 0: // ?????? ?????????????
					{
						result = mysql_query(mysql, "SELECT * FROM accounts WHERE admin != 0 ORDER BY admin DESC", true);
						rows = cache_num_rows();

						format(text, sizeof text, "{3399FF}? ???.\t??ù\t\t\t???.????\t? ???? ??????ù{FFFFFF}");

						for(new i = 0; i < rows; i++)
						{
							new name[21],
								user_id = cache_get_field_content_int(i, "id"),
								lvl = cache_get_field_content_int(i, "admin"),
								game_for_day = cache_get_field_content_int(i, "game_for_day"),
								game_for_day_text[32];

							cache_get_field_content(i, "name", name);
							format(game_for_day_text, sizeof game_for_day_text, "%d ? %d ???", ConvertUnixTime(game_for_day, CONVERT_TIME_TO_HOURS), ConvertUnixTime(game_for_day, CONVERT_TIME_TO_MINUTES));

							format(fmt_text, sizeof fmt_text, "\n%d.\t%s%s%d\t\t%s", user_id, name, strlen(name) > 14 ? "\t" : "\t\t", lvl, game_for_day_text);
							strcat(text, fmt_text);
							SetPlayerListitemValue(playerid, i+1, user_id);
						}

						cache_delete(result);

						Dialog(playerid, DIALOG_ADMINS, DIALOG_STYLE_LIST, "{FFCC00}?????? ?????????????", text, "???????", "??????");
					}

					case 1: // ?????? ???????
					{
						result = mysql_query(mysql, "SELECT * FROM accounts WHERE job=10 ORDER BY team ASC", true);
						rows = cache_num_rows();

						format(text, sizeof text, "{3399FF}? ???.\t??ù\t\t\t??????ù\t? ???? ??????ù{FFFFFF}");

						for(new i = 0; i < rows; i++)
						{
							new name[21],
								user_id = cache_get_field_content_int(i, "id"),
								team = cache_get_field_content_int(i, "team"),
								game_for_day = cache_get_field_content_int(i, "game_for_day"),
								game_for_day_text[32];

							cache_get_field_content(i, "name", name);
							format(game_for_day_text, sizeof game_for_day_text, "%d ? %d ???", ConvertUnixTime(game_for_day, CONVERT_TIME_TO_HOURS), ConvertUnixTime(game_for_day, CONVERT_TIME_TO_MINUTES));

							format(fmt_text, sizeof fmt_text, "\n%d.\t%s%s%d\t\t%s", user_id, name, strlen(name) > 14 ? "\t" : "\t\t", team, game_for_day_text);
							strcat(text, fmt_text);
							SetPlayerListitemValue(playerid, i+1, user_id);
						}

						cache_delete(result);

						Dialog(playerid, DIALOG_LEADERS, DIALOG_STYLE_LIST, "{FFCC00}?????? ???????", text, "???????", "??????");
					}
					case 2:
					{
					callcmd::inforestart(playerid, "");
					} 
					case 3:
					{
					callcmd::tehnical(playerid, "");
					} 
					case 4:
					{
						callcmd::fullprods(playerid, "5000");
					}
					case 5:
					{
						SCM(playerid, -1, "{FFFF00}| {FFFFFF}? ??????????.");
					}
					case 6:
					{
					callcmd::fullfuels(playerid, "5000");
					}
				}
				return 1;
			}
			case DIALOG_REWARDS:
			{
				if(!response) return 1;

				new fmt_text[128],
					text[1440],
					Cache: result,
					rows;

				switch(listitem)
				{
					case 1:
					{
					callcmd::givecash(playerid, "10000000");
					}
					case 2:
					{
					callcmd::givedonate(playerid, "50000");
					}
					case 3:
					{
					callcmd::giveepoints(playerid, "50000");
					}
				}
				return 1;
			}
			case DIALOG_ADMHELP:
			{
				if(response)
				{
					switch(listitem + 1)
					{
						case 1: callcmd::astats(playerid, "");
						default:
							return 1;
					}
				}
			}
			case DIALOG_SERVER_SETTINGS:
			{
				if(response)
				{
					switch(listitem)
					{
						case 0:
						{
							Dialog
							(
								playerid, DIALOG_SERVER_SETTINGS_ADM, DIALOG_STYLE_INPUT,
								"?????????? ????????",
								"??????? ????? ???? ?? ???????\n\
								\t??????????: ?????ù ?????? 40 ? ?????? 200!",
								"?????", "??????"
							);
						}
						case 1:
						{
							Dialog
							(
								playerid, DIALOG_SERVER_SETTINGS_HELP, DIALOG_STYLE_INPUT,
								"?????????? ????????",
								"??????? ????? ???? ?? ????? ???????????\n\
								\t??????????: ?????ù ?????? 40 ? ?????? 200!",
								"?????", "??????"
							);
						}
						case 2:
						{
							Dialog
							(
								playerid, DIALOG_SERVER_SETTINGS_RUB, DIALOG_STYLE_INPUT,
								"?????????? ????????",
								"??????? ????? c???? ??????? ?????? ?????? ???\n\
								\t??????????: ?????ù ?????? 1 ? ?????? 5!",
								"?????", "??????"
							);
						}
						case 3:
						{
							Dialog
							(
								playerid, DIALOG_SERVER_SETTINGS_DON, DIALOG_STYLE_INPUT,
								"?????????? ????????",
								"??????? ????? ????????? ??????\n\
								\t??????????: ?????ù ?????? 1 ? ?????? 3!",
								"?????", "??????"
							);
						}
						case 4:
						{
							Dialog
							(
								playerid, DIALOG_SERVER_SETTINGS_COINS, DIALOG_STYLE_INPUT,
								"?????????? ????????",
								"??????? ?????????? ????? ??????? ????? ?????????ù ?????? ???\n\
								\t??????????: ?????ù ?????? 1 ? ?????? 3!",
								"?????", "??????"
							);
						}
						case 5:
						{
							Dialog
							(
								playerid, DIALOG_SERVER_SETTINGS_BONUSM, DIALOG_STYLE_INPUT,
								"?????????? ????????",
								"??????? ?????????? ????? ??????? ????? ?????????ù ??? ???????????\n\
								\t??????????: ?????ù ?????? 100 ? ?????? 100??!",
								"?????", "??????"
							);
						}
						case 6:
						{
							Dialog
							(
								playerid, DIALOG_SERVER_SETTINGS_BONUSD, DIALOG_STYLE_INPUT,
								"?????????? ????????",
								"??????? ?????????? ?????? ??????? ????? ?????????ù ??? ???????????\n\
								\t??????????: ?????ù ?????? 0 ? ?????? 20000!",
								"?????", "??????"
							);
						}
						case 7:
						{
							Dialog
							(
								playerid, DIALOG_SERVER_SETTINGS_BONUSL, DIALOG_STYLE_INPUT,
								"?????????? ????????",
								"??????? ??????? ??????? ????? ?????????ù ??? ???????????\n\
								\t??????????: ?????ù ?????? 1 ? ?????? 20!",
								"?????", "??????"
							);
						}
						case 8:
						{
							if(Config[sBuyBiz] == 0)
						    {
								Dialog
								(
									playerid, DIALOG_BUYBIZ_CLOSE, DIALOG_STYLE_MSGBOX,
									"?????? ?? ??????? ???????",
									""c_b"?? ???????, ??? ?????? ????????? ???????? ??????? ?? ????????",
									"?????", "??????"
								);
							}

							if(Config[sBuyBiz] == 1)
						    {
								Dialog
								(
									playerid, DIALOG_BUYBIZ_OPEN, DIALOG_STYLE_MSGBOX,
									"?????????? ?? ??????? ????????",
									""c_b"?? ???????, ??? ?????? ????????? ???????? ??????? ?? ????????",
									"?????", "??????"
								);
							}
						}
					}
				}
			}
			case DIALOG_BUYBIZ_OPEN: //===
			{
		        //new str[180];
				//new fmt_text[100];

				Send(playerid,-1,"???????");

                Config[sBuyBiz] = 0;//===

                mysql_format(mysql, str, 256, "UPDATE server_settings SET BuyBiz = 0");//===
                mysql_query(mysql, str);

                return 1;
			}
			case DIALOG_BUYBIZ_CLOSE: //===
			{
		        //new str[180];
				//new fmt_text[200];

				Send(playerid,-1,"???????");

                Config[sBuyBiz] = 1;//===

                mysql_format(mysql, str, 256, "UPDATE server_settings SET BuyBiz = 1");//===
                mysql_query(mysql, str);

                return 1;
			}
			case DIALOG_SERVER_SETTINGS_ADM:
			{
				if(response)
	            {
	                new price = strval(inputtext);
	                if(price && IsNumeric(inputtext))
	                {
	                    if(price > 40)
	                    {

	                        Config[admin_price] = price;
	                        mysql_format(mysql, str, 256, "UPDATE server_settings SET admin_price = %d",price);
	                        mysql_query(mysql, str);
	                        return 1;
	                    }
	                    SendClientMessage(playerid, -1, "???? 40 ??? ?????ù!");
	                }
	            }
			}
			case DIALOG_SERVER_SETTINGS_COINS:
			{
				if(response)
	            {
	                new price = strval(inputtext);
	                if(price && IsNumeric(inputtext))
	                {
	                    if(1 <= price <= 3)
	                    {

	                        Config[sGiveCoins] = price;
	                        mysql_format(mysql, str, 256, "UPDATE server_settings SET GiveCoins = %d",price);
	                        mysql_query(mysql, str);
	                        return 1;
	                    }
	                    SendClientMessage(playerid, -1, "???? 1 ? ???? 3 ?????? ?????ù!");
	                }
	            }
			}
			case DIALOG_SERVER_SETTINGS_BONUSM:
			{
				if(response)
	            {
	                new price = strval(inputtext);
	                if(price && IsNumeric(inputtext))
	                {
	                    if(100 <= price <= 100000000)
	                    {

	                        Config[sBonusMoney] = price;
	                        mysql_format(mysql, str, 256, "UPDATE server_settings SET BonusMoney = %d",price);
	                        mysql_query(mysql, str);
	                        return 1;
	                    }
	                    SendClientMessage(playerid, -1, "???? 100 ? ???? 100?? ?????ù!");
	                }
	            }
			}
			case DIALOG_SERVER_SETTINGS_BONUSD:
			{
				if(response)
	            {
	                new price = strval(inputtext);
	                if(price && IsNumeric(inputtext))
	                {
	                    if(0 <= price <= 20000)
	                    {

	                        Config[sBonusDonate] = price;
	                        mysql_format(mysql, str, 256, "UPDATE server_settings SET BonusDonate = %d",price);
	                        mysql_query(mysql, str);
	                        return 1;
	                    }
	                    SendClientMessage(playerid, -1, "???? 0 ? ???? 20000 ?????? ?????ù!");
	                }
	            }
			}
			case DIALOG_SERVER_SETTINGS_BONUSL:
			{
				if(response)
	            {
	                new price = strval(inputtext);
	                if(price && IsNumeric(inputtext))
	                {
	                    if(1 <= price <= 20)
	                    {

	                        Config[sBonusLevel] = price;
	                        mysql_format(mysql, str, 256, "UPDATE server_settings SET BonusLevel = %d",price);
	                        mysql_query(mysql, str);
	                        return 1;
	                    }
	                    SendClientMessage(playerid, -1, "???? 1 ? ???? 20 ??? ?????ù!");
	                }
	            }
			}
			case DIALOG_SERVER_SETTINGS_HELP:
			{
				if(response)
	            {
	                new price = strval(inputtext);
	                if(price && IsNumeric(inputtext))
	                {
	                    if(price > 20)
	                    {

	                        Config[helper_price] = price;
	                        mysql_format(mysql, str, 256, "UPDATE server_settings SET helper_price = %d",price);
	                        mysql_query(mysql, str);
	                        return 1;
	                    }
	                    SendClientMessage(playerid, -1, "???? 20 ??? ?????ù!");
	                }
	            }
			}
			case DIALOG_SERVER_SETTINGS_RUB:
			{
				if(response)
	            {
	                new price = strval(inputtext);
	                if(price && IsNumeric(inputtext))
	                {
	                    if(1 <= price <= 5)
	                    {

	                        Config[sDistRub] = price;
	                        mysql_format(mysql, str, 256, "UPDATE server_settings SET distrub = %d",price);
	                        mysql_query(mysql, str);
	                        return 1;
	                    }
	                    SendClientMessage(playerid, -1, "?????? 1 ??? ? ?????? 5 ??? ?????ù!");
	                }
	            }
			}
			case DIALOG_SERVER_SETTINGS_DON:
			{
				if(response)
	            {
	                new price = strval(inputtext);
	                if(price && IsNumeric(inputtext))
	                {
	                    if(1 <= price <= 3)
	                    {

	                        Config[sDonPower] = price;
	                        mysql_format(mysql, str, 256, "UPDATE server_settings SET donpower = %d",price);
	                        mysql_query(mysql, str);
	                        return 1;
	                    }
	                    SendClientMessage(playerid, -1, "?????? 1 ? ?????? 3  ?????ù!");
	                }
	            }
			}
			case DIALOG_ADMIN_LOGIN:
{
	new fmt_text[999];

	if(!response || !strlen(inputtext))
	{
		SendClientMessage(playerid, 0xFF0000FF, "?? ?? ????? ??????. ?????????? ?????.");
		AdminAuthorization(playerid);
		return true;
	}

	if(strval(inputtext) != GetPlayerData(playerid, P_APASS))
	{
		format(fmt_text, sizeof fmt_text,
			"[A] %s[%d] ?????????ù ?? ??????? (???????? ????? ??????). IP: %s",
			GetPlayerNameEx(playerid), playerid, GetPlayerIpEx(playerid));
		SendMessageToAdmins(fmt_text, 0x999999FF);
		SendClientMessage(playerid, COLOR_GREY, "?? ????? ???????? ?????? ? ???? ????????? ?? ???????, ???????????. ");
		Kick(playerid);
		return true;
	}

	ShowConnectPanelAC(playerid);
	ShowWarningPanelAC(playerid);

	format(fmt_text, sizeof fmt_text,
	    "{8B0000}[A-LOGIN]: {DC143C}????????????? {FFFFFF}%s [%d] {DC143C}????????????ù ? ??????? ????????????????ù ???: {FFFFFF}%s",
	    GetPlayerNameEx(playerid), playerid, GetPlayerData(playerid, P_PREFIX));
	SendMessageToAdmins(fmt_text, 0xDC143CAA);

	format(fmt_text, sizeof fmt_text,
 	  "{8B0000}[A-LOGIN]: {DC143C}?? ?????????????? ? ??????? ????????????????ù ???: {FFFFFF}%s",
  	 GetPlayerData(playerid, P_PREFIX));
	SendClientMessage(playerid, 0xDC143CAA, fmt_text);

	SetPlayerData(playerid, P_ADMIN_LOGGED, 1);


	return true;
}
			case DIALOG_ADMIN_REG:
{
	if(!response) return FixKick(playerid);

	new pass = strval(inputtext);

	if(pass < 1000 || pass > 9999)
	{
		return Dialog(playerid, DIALOG_ADMIN_REG, DIALOG_STYLE_INPUT,
			"{FF6347}"SERVER_NAME" {ffffff} | ?????????? ??????",
			"{FFFFFF}?????????? ?????? ?? 4-? ???? ??ù ??????????? ? ????? ??????\n{FFFFFF}??????? ??? ? ???? ????:\n",
			"??????", "");
	}

	SetPlayerData(playerid, P_APASS, pass);
	UpdatePlayerDatabaseInt(playerid, "AdminPass", pass);

	return AdminAuthorization(playerid);
}
			case DIALOG_ADMINS:
			{
				if(!response) return callcmd::apanel(playerid, " ");

				new user_id = GetPlayerListitemValue(playerid, listitem);
				SetPVarInt(playerid, "admin_panel_user_id", user_id);

				Dialog
				(
					playerid, DIALOG_EDIT_ADMIN, DIALOG_STYLE_LIST,
					"{FFCC00}????????????? ??????????????",
					"\
					1. ????????/???????? ???.????\n\
					2. ??????????? ??????????????\n\
					{ff3300}3. ????????????? ???????\
					",
					"???????", "??????"
				);

				return 1;
			}

			case DIALOG_EDIT_ADMIN:
			{
				if(!response) return callcmd::apanel(playerid, " ");

				new fmt_text[128],
					user_id = GetPVarInt(playerid, "admin_panel_user_id");

				switch(listitem)
				{
					case 0:
					{
						format
						(
							fmt_text, sizeof fmt_text,
							"{FFFFFF}\
							????????? ?????????????????? ?????\n\n\
							ID ????????: %d\n\
							??ù: \t%s\
							",
							user_id, GetPlayerNameBySqlID(user_id)
						);

						Dialog(playerid, DIALOG_EDIT_ADMIN_RANG, DIALOG_STYLE_MSGBOX, "{FFCC00}????????? ???.?????", fmt_text, "????????", "????????");
					}
					case 1:
					{
						format
						(
							fmt_text, sizeof fmt_text,
							"{FFFFFF}\
							???????????? ??????????????\n\n\
							ID ????????: %d\n\
							??ù: \t%s\n\n\
							?? ????????????? ?????? ??????????? ???????????????\
							",
							user_id, GetPlayerNameBySqlID(user_id)
						);

						Dialog(playerid, DIALOG_EDIT_ADMIN_RANG, DIALOG_STYLE_MSGBOX, "{FFCC00}???????????? ??????????????", fmt_text, "??", "???");
					}
				}

				return 1;
			}

			case DIALOG_EDIT_ADMIN_RANG:
			{
				new user_id = GetPVarInt(playerid, "admin_panel_user_id"),
					player_id = GetPlayerIDBySqlID(user_id);

				if(player_id != -1)
				{
					if(response) AddPlayerData(player_id, P_ADMIN, +, 1);
					else AddPlayerData(player_id, P_ADMIN, -, 1);
					UpdatePlayerDatabaseInt(player_id, "admin", GetPlayerData(player_id, P_ADMIN));
					if(response) SendClientMessage(playerid, 0x66CC33FF, "??? ????????????????? ???? ??? ???????");
					else SendClientMessage(playerid, 0xFF3300FF, "??? ????????????????? ???? ??? ???????");
				}
				else
				{
					new query[55],
						Cache: result,
						admin_rank;

					mysql_format(mysql, query, sizeof query, "SELECT admin FROM accounts WHERE id=%d", user_id);
					result = mysql_query(mysql, query, true);

					if(!cache_num_rows()) return 0;

					admin_rank = cache_get_row_int(0, 0);

					cache_delete(result);

					if(response) admin_rank++;
					else admin_rank--;

					mysql_format(mysql, query, sizeof query, "UPDATE accounts SET admin=%d WHERE id=%d", user_id, admin_rank);
					result = mysql_query(mysql, query, false);
				}


				return 1;
			}

			case DIALOG_LEADERS:
			{
				if(!response) return callcmd::apanel(playerid, " ");

				new user_id = GetPlayerListitemValue(playerid, listitem);
				SetPVarInt(playerid, "admin_panel_user_id", user_id);

				Dialog
				(
					playerid, DIALOG_EDIT_LEADER, DIALOG_STYLE_LIST,
					"{FFCC00}????????????? ??????",
					"\
					1. ???????? ??????ù???? ???????\n\
					2. ??????????? ??????\n\
					{ff3300}3. ????????????? ???????\
					",
					"???????", "??????"
				);

				return 1;
			}
			// -----------------------------------------------------------------
			case DIALOG_TELEPORT_LIST:
			{
				if(response)
				{
					if(0 <= listitem <= sizeof g_teleport_list - 1)
					{
						SetPlayerPosEx
						(
							playerid,
							GetTeleportListData(listitem, TL_POS_X),
							GetTeleportListData(listitem, TL_POS_Y),
							GetTeleportListData(listitem, TL_POS_Z),
							0.0, 0, 0
						);
					}
				}
			}
			// -----------------------------------------------------------------
			case DIALOG_SET_DOUBLING:
			{
				if(response)
				{
					new fmt_text[50],
						bool: doubling = g_doubling[listitem];

					static const doubling_name[3][24] = {"??????", "????? ?????", "???????? ?? ???????????"};

					g_doubling[listitem] = doubling ^ true;

					format(fmt_text, sizeof fmt_text, "?? %s ???????? %s", doubling ? "?????????" : "????????", doubling_name[listitem]);
					SendClientMessage(playerid, 0x3399FFFF, fmt_text);

					format(fmt_text, sizeof fmt_text, "%s ???????? %s", doubling ? "????????" : "???????", doubling_name[listitem]);
					SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);
				}
			}
			// -----------------------------------------
			case DIALOG_GANG_REPOSITORY:
			{
				if(response)
				{
					new item_names[4][10] = {"?????????", "???????", "?????????", "??????"},
						description[32],
						fmt_text[70],
						status;

					if(0 <= listitem <= 3)
						status = 1;

					SetPVarInt(playerid, "gr_state", status);
					SetPVarInt(playerid, "gr_item", status ? listitem : listitem - 4);

					format(description, sizeof description, "{FFCD00}%s %s", status ? "????????" : "??ù??", status ? item_names[listitem] : item_names[listitem - 4]);
					format(fmt_text, sizeof fmt_text, "{FFFFFF}??????? ??????????, ??????? ?? ?????? {FFCD00}%s:", status ? "????????" : "??ù??");

					Dialog(playerid, DIALOG_GANG_REPOSITORY_USE, DIALOG_STYLE_INPUT, description, fmt_text, "?????", "??????");
				}
			}
			case DIALOG_GANG_REPOSITORY_USE:
			{
				if(response)
				{
					new status = GetPVarInt(playerid, "gr_state"),
						item = GetPVarInt(playerid, "gr_item"),
						item_count = strval(inputtext),
						repository_id = (GetPlayerTeamEx(playerid) - TEAM_OPG_ARZAMASKAYA);

					if(item_count < 1) return SendClientMessage(playerid, 0x999999FF, "???????? ??????????");

					new item_names[4][12] = {"??????????", "????????", "??????????", "?????"},
						item_type[4][4] = {"?", "??.", "??", "???"};

					new fmt_text[90];

					switch(status)
					{
						case 0:
						{
							if(!GetGangRepositoryData(repository_id, GR_LOCK))
								return SendClientMessage(playerid, 0x999999FF, "????? ??????. ?? ?? ?????? ?????? ?????");

							switch(item)
							{
								case 0:
								{
									if(GetGangRepositoryData(repository_id, GR_DRUGS) < item_count)
										return SendClientMessage(playerid, 0x999999FF, "?? ?????? ??? ?????? ?????????? ??????????");

									if((GetPlayerData(playerid, P_DRUGS) + item_count) > GetPlayerMaxStorage(playerid, STORAGE_DRUGS))
										return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????? ?????? ? ????? ??????? ??????????");

									AddPlayerData(playerid, P_DRUGS, +, item_count);
									UpdatePlayerDatabaseInt(playerid, "drugs", GetPlayerData(playerid, P_DRUGS));

									SetGangRepositoryData(repository_id, GR_DRUGS, GetGangRepositoryData(repository_id, GR_DRUGS) - item_count);
									UpdateGangRepository(repository_id);
								}
								case 1:
								{
									if(GetGangRepositoryData(repository_id, GR_AMMO) < item_count)
										return SendClientMessage(playerid, 0x999999FF, "?? ?????? ??? ?????? ?????????? ????????");

									if((GetPlayerData(playerid, P_AMMO) + item_count) > GetPlayerMaxStorage(playerid, STORAGE_AMMO))
										return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????? ?????? ? ????? ??????? ????????");

									AddPlayerData(playerid, P_AMMO, +, item_count);
									UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

									SetGangRepositoryData(repository_id, GR_AMMO, GetGangRepositoryData(repository_id, GR_AMMO) - item_count);
									UpdateGangRepository(repository_id);
								}
								case 2:
								{
									if(GetGangRepositoryData(repository_id, GR_METALL) < item_count)
										return SendClientMessage(playerid, 0x999999FF, "?? ?????? ??? ?????? ?????????? ??????????");

									if((GetPlayerData(playerid, P_METALL) + item_count) > GetPlayerMaxStorage(playerid, STORAGE_METALL))
										return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????? ?????? ? ????? ??????? ??????????");

									AddPlayerData(playerid, P_METALL, +, item_count);
									UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

									SetGangRepositoryData(repository_id, GR_METALL, GetGangRepositoryData(repository_id, GR_METALL) - item_count);
									UpdateGangRepository(repository_id);
								}
								case 3:
								{
									if(GetGangRepositoryData(repository_id, GR_MONEY) < item_count)
										return SendClientMessage(playerid, 0x999999FF, "?? ?????? ??? ?????? ?????????? ?????");

									GivePlayerMoneyEx(playerid, item_count, "??ù? ?? ?????? ?????", true, true);

									SetGangRepositoryData(repository_id, GR_MONEY, GetGangRepositoryData(repository_id, GR_MONEY) - item_count);
									UpdateGangRepository(repository_id);
								}
							}

							format(fmt_text, sizeof fmt_text, "%s [id %d] ??ù?(?) ?? ?????? ????? {3399FF}%d %s {66CC33}%s",
							GetPlayerNameEx(playerid), playerid, item_count, item_type[item], item_names[item]);

							SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_text, 0x66CC33FF);
						}
						case 1:
						{
							switch(item)
							{
								case 0:
								{
									if(GetPlayerData(playerid, P_DRUGS) < item_count)
										return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ??????????");

									AddPlayerData(playerid, P_DRUGS, -, item_count);
									UpdatePlayerDatabaseInt(playerid, "drugs", GetPlayerData(playerid, P_DRUGS));

									SetGangRepositoryData(repository_id, GR_DRUGS, GetGangRepositoryData(repository_id, GR_DRUGS) + item_count);
									UpdateGangRepository(repository_id);
								}
								case 1:
								{
									if(GetPlayerData(playerid, P_AMMO) < item_count)
										return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ????????");

									AddPlayerData(playerid, P_AMMO, -, item_count);
									UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

									SetGangRepositoryData(repository_id, GR_AMMO, GetGangRepositoryData(repository_id, GR_AMMO) + item_count);
									UpdateGangRepository(repository_id);
								}
								case 2:
								{
									if(GetPlayerData(playerid, P_METALL) < item_count)
										return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ??????????");

									AddPlayerData(playerid, P_METALL, -, item_count);
									UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

									SetGangRepositoryData(repository_id, GR_METALL, GetGangRepositoryData(repository_id, GR_METALL) + item_count);
									UpdateGangRepository(repository_id);
								}
								case 3:
								{
									if(GetPlayerMoneyEx(playerid) < item_count)
										return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ?????");

									GivePlayerMoneyEx(playerid, -item_count, "??????? ?? ????? ?????", true, true);

									SetGangRepositoryData(repository_id, GR_MONEY, GetGangRepositoryData(repository_id, GR_MONEY) + item_count);
									UpdateGangRepository(repository_id);
								}
							}

							format(fmt_text, sizeof fmt_text, "%s [id %d] ???????(?) ?? ????? ????? {3399FF}%d %s {66CC33}%s",
							GetPlayerNameEx(playerid), playerid, item_count, item_type[item], item_names[item]);

							SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_text, 0x66CC33FF);
						}
					}
				}
			}
			// -----------------------------------------
			case DIALOG_ADVERT_EDIT:
{
    new ad_id = GetPVarInt(playerid, "advert_id"),
        fmt_text[144];

    if(GetAdvertData(ad_id, A_CREATOR) == INVALID_PLAYER_ID)
    {
        format(fmt_text, sizeof fmt_text, "????? ???ù?????ù ?????????ù");
        SendClientMessage(playerid, 0x999999FF, fmt_text);
        return 1;
    }

    if(response)
    {
   	 utf8_to_cp1251(inputtext);

        if(strlen(inputtext))
            format(edited_text, sizeof edited_text, inputtext);
        else
            format(edited_text, sizeof edited_text, g_advert[ad_id][A_TEXT]);

        format(g_advert[ad_id][A_TEXT], 128, edited_text);

        format(fmt_text, sizeof fmt_text, "%s | ????????: %s[%d] (???. %d)",
            edited_text,
            GetPlayerNameEx(GetAdvertData(ad_id, A_CREATOR)),
            GetAdvertData(ad_id, A_CREATOR),
            GetPlayerPhone(GetAdvertData(ad_id, A_CREATOR)));
        SendClientMessageToAll(0x00CC00FF, fmt_text);

        format(fmt_text, sizeof fmt_text, "???ù?????? %s ????????? ??? %s",
            strlen(inputtext) ? "??????????????" : "????????",
            GetPlayerNameEx(playerid));
        SendClientMessageToAll(0x009900FF, fmt_text);

        AddPlayerData(playerid, P_PROGRESS_EXP_5, +, 1);
        UpdatePlayerDatabaseInt(playerid, "ProgressExp5", GetPlayerData(playerid, P_PROGRESS_EXP_5));

        if(GetPlayerData(playerid, P_PROGRESS_EXP_5) == 1000)
        {
            format(fmt_text, sizeof fmt_text, "[?????????ù]: "c_b"?? ??????? ????????? ?????????? "c_i"'??????????'. "c_b"???????: "c_s"50 DONATE-RUB");
            SendClientMessage(playerid, COR_QUEST, fmt_text);
            GivePlayerDonateRub(playerid, 50, "?????????? ?????????ù / ??????ù");

            SetPlayerData(playerid, P_PROGRESS_5, 1);
            UpdatePlayerDatabaseInt(playerid, "Progress5", 1);

            AddPlayerData(playerid, P_TOP_4, +, 1);
            UpdatePlayerDatabaseInt(playerid, "TOP_Progress", GetPlayerData(playerid, P_TOP_4));
        }

        AddPlayerData(playerid, P_F_QUEST_EXP_4, +, 1);
        UpdatePlayerDatabaseInt(playerid, "FracQuestExp4", GetPlayerData(playerid, P_F_QUEST_EXP_4));

        if(GetPlayerData(playerid, P_F_QUEST_EXP_4) == 150)
        {
            format(fmt_text, sizeof fmt_text, "[??????]: "c_b"?? ??????? ????????? ????? "c_i"'???????????ù ?? ??ù??'. "c_b"???????: "c_s"1 CASE(/opencase)");
            SendClientMessage(playerid, COR_QUEST, fmt_text);

            AddPlayerData(playerid, P_DONATE_CASE, +, 1);
            UpdatePlayerDatabaseInt(playerid, "case", GetPlayerData(playerid, P_DONATE_CASE));

            SetPlayerData(playerid, P_F_QUEST_4, 1);
            UpdatePlayerDatabaseInt(playerid, "FracQuest4", 1);

            AddPlayerData(playerid, P_TOP_5, +, 1);
            UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
        }
    }
    else
    {
    	utf8_to_cp1251(inputtext);
   
        if(!strlen(inputtext))
        {
            format(fmt_text, sizeof fmt_text, "??????? ??????? ?????????ù ???ù?????ù");
            SendClientMessage(playerid, 0x999999FF, fmt_text);
            return 1;
        }

        new creator_id = GetAdvertData(ad_id, A_CREATOR);

        if(creator_id != INVALID_PLAYER_ID)
        {
            format(fmt_text, sizeof fmt_text, "%s %s[%d] ???????? ???? ???ù??????. ???????: %s",
                GetPlayerJobAndRankName(playerid),
                GetPlayerNameEx(playerid),
                playerid,
                inputtext);
            SendClientMessage(creator_id, 0xFF5533FF, fmt_text);
        }

        format(fmt_text, sizeof fmt_text, "[???] %s %s[%d] ???????? ???ù?????? ?%d. ???????: %s",
            GetPlayerJobAndRankName(playerid),
            GetPlayerNameEx(playerid),
            playerid,
            ad_id + 1,
            inputtext);
        SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_text, 0x99CC99FF, playerid);

        format(fmt_text, sizeof fmt_text, "?? ????????? ???ù?????? ?%d. ???????: %s", ad_id + 1, inputtext);
        SendClientMessage(playerid, 0x66CC33FF, fmt_text);
    }

    DeleteAdvert(ad_id);
}
			case DIALOG_MPREG:
			{
				if(response)
				{
					switch(listitem + 1)
					{
						case 1:
						{
							SpawnDeathMatch(playerid);
							Send(playerid,COR_SERVER,"[???????]: "c_b"?? ????????????????? ?? DM ZONE, ????? ????? ? ??? - ??????? /dmzexit");
							Send(playerid,COR_SERVER,"[?????????ù]: "c_b"????? ?????????? ù?? ??????? ?? ?????? ?? DM ZONE, ??????? /dmztop");
							Send(playerid,COR_SERVER,"[?????????ù]: "c_b"?? ?????? ???? ?? ?????? ???????? 25.000 rub! ? ??? ?? ?????? 10 ??????? - 1 DONATE RUB!");
							
							SetPlayerData(playerid, P_DMZ_STATUS, 1);
						}
					}
				}
			}
			// -----------------------------------------
			case DIALOG_ARMORY:
			{
				if (!response) return 1;

				new idx = GetNearestArmory(playerid);
				if (idx == -1)
					return SendClientMessage(playerid, -1, "?? ?? ?ù??? ?? ???????.");

				if (!g_armory[idx][A_IS_OPEN])
					return SendClientMessage(playerid, -1, "????? ??????.");

				switch (listitem)
				{
					case 0: // ?????
					{
						if (g_armory[idx][A_MATERIALS] < 50)
							return SendClientMessage(playerid, -1, "???????????? ??????????.");
			
						if (GetPVarInt(playerid, "took_mask") > gettime())
							return SendClientMessage(playerid, 0x999999FF, "?? ??? ??????? ????? ?????");
			
						if (GetPlayerData(playerid, P_MASK) == 1)
							return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???? ?????");

						SetPlayerData(playerid, P_MASK, 1);
						SetPVarInt(playerid, "took_mask", gettime() + 300);
						SendClientMessage(playerid, 0x3399FFFF, "?? ??ù?? ?????");
						
						new fmt_msg[144];
     
    				   format(fmt_msg, sizeof fmt_msg, "[R] %s %s ??ù? ????? ?? ?????? ???????????.", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

								if(!GetPlayerTeamEx(playerid))
									SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
								else
								   SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

						g_armory[idx][A_MATERIALS] -= 50;
								if (g_armory[idx][A_MATERIALS] > 100000) g_armory[idx][A_MATERIALS] = 100000;

								UpdateArmoryDatabaseInt(idx, "materials", g_armory[idx][A_MATERIALS]);
						UpdateArmoryLabel(idx);
					}
					case 1: // ??????????
					{
						if (g_armory[idx][A_MATERIALS] < 100)
							return SendClientMessage(playerid, -1, "???????????? ??????????.");

						new Float:armour;
						GetPlayerArmour(playerid, armour);
						if (armour > 20.0)
							return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???? ??????????");

						SetPlayerArmour(playerid, 100.0);
						SendClientMessage(playerid, 0x3399FFFF, "?? ?????? ??????????");
						
						new fmt_msg[144];
     
    				   format(fmt_msg, sizeof fmt_msg, "[R] %s %s ??ù? ?????????? ?? ?????? ???????????.", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

								if(!GetPlayerTeamEx(playerid))
									SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
								else
								   SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

						g_armory[idx][A_MATERIALS] -= 100;
						if (g_armory[idx][A_MATERIALS] > 100000) g_armory[idx][A_MATERIALS] = 100000;

						UpdateArmoryDatabaseInt(idx, "materials", g_armory[idx][A_MATERIALS]);
						UpdateArmoryLabel(idx);
					}
					case 2: // ???????
					{
						if (g_armory[idx][A_MATERIALS] < 50)
							return SendClientMessage(playerid, -1, "???????????? ??????????.");

						if (GetPVarInt(playerid, "took_nitestick") > gettime())
							return SendClientMessage(playerid, 0x999999FF, "?? ??? ??????? ????? ???????");

						GivePlayerWeapon(playerid, 3, 1);
						SetPVarInt(playerid, "took_nitestick", gettime() + 300);
						SendClientMessage(playerid, 0x3399FFFF, "?? ??ù?? ???????");
						
						new fmt_msg[144];
     
    				   format(fmt_msg, sizeof fmt_msg, "[R] %s %s ??ù? ??????? ?? ?????? ???????????.", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

								if(!GetPlayerTeamEx(playerid))
									SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
								else
								   SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

						g_armory[idx][A_MATERIALS] -= 50;
						if (g_armory[idx][A_MATERIALS] > 100000) g_armory[idx][A_MATERIALS] = 100000;

						UpdateArmoryDatabaseInt(idx, "materials", g_armory[idx][A_MATERIALS]);
						UpdateArmoryLabel(idx);
					}
					case 3: // Desert Eagle
					{
						if (g_armory[idx][A_MATERIALS] < 150)
							return SendClientMessage(playerid, -1, "???????????? ??????????.");

						if (GetPVarInt(playerid, "took_deagle") > gettime())
							return SendClientMessage(playerid, 0x999999FF, "?? ??? ??????? ????? Desert Eagle");

						GivePlayerWeapon(playerid, 24, 100);
						SetPVarInt(playerid, "took_deagle", gettime() + 300);
						SendClientMessage(playerid, 0x3399FFFF, "?? ??ù?? Desert Eagle");
						
						new fmt_msg[144];
     
    				   format(fmt_msg, sizeof fmt_msg, "[R] %s %s ??ù? Desert Eagle ?? ?????? ???????????.", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

								if(!GetPlayerTeamEx(playerid))
									SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
								else
								   SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

						g_armory[idx][A_MATERIALS] -= 150;
						if (g_armory[idx][A_MATERIALS] > 100000) g_armory[idx][A_MATERIALS] = 100000;

						UpdateArmoryDatabaseInt(idx, "materials", g_armory[idx][A_MATERIALS]);
						UpdateArmoryLabel(idx);
					}
					case 4: // ??-74?
					{
						if (g_armory[idx][A_MATERIALS] < 200)
							return SendClientMessage(playerid, -1, "???????????? ??????????.");

						if (GetPVarInt(playerid, "took_mp5") > gettime())
							return SendClientMessage(playerid, 0x999999FF, "?? ??? ??????? ????? ??-74?");

						GivePlayerWeapon(playerid, 29, 180);
						SetPVarInt(playerid, "took_mp5", gettime() + 300);
						SendClientMessage(playerid, 0x3399FFFF, "?? ??ù?? ??-74?");
						
						new fmt_msg[144];
     
    				   format(fmt_msg, sizeof fmt_msg, "[R] %s %s ??ù? ??-74? ?? ?????? ???????????.", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

								if(!GetPlayerTeamEx(playerid))
									SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
								else
								   SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

						g_armory[idx][A_MATERIALS] -= 200;
						if (g_armory[idx][A_MATERIALS] > 100000) g_armory[idx][A_MATERIALS] = 100000;

						UpdateArmoryDatabaseInt(idx, "materials", g_armory[idx][A_MATERIALS]);
						UpdateArmoryLabel(idx);
					}
					case 5: // ????????
					{
						if (g_armory[idx][A_MATERIALS] < 120)
							return SendClientMessage(playerid, -1, "???????????? ??????????.");

						if (GetPVarInt(playerid, "took_shotgun") > gettime())
							return SendClientMessage(playerid, 0x999999FF, "?? ??? ??????? ????? ????????");

					GivePlayerWeapon(playerid, 25, 30);
						SetPVarInt(playerid, "took_shotgun", gettime() + 300);
						SendClientMessage(playerid, 0x3399FFFF, "?? ??ù?? ????????");
						
						new fmt_msg[144];
     
    				   format(fmt_msg, sizeof fmt_msg, "[R] %s %s ??ù? ???????? ?? ?????? ???????????.", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

								if(!GetPlayerTeamEx(playerid))
									SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
								else
								   SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

						g_armory[idx][A_MATERIALS] -= 120;
						if (g_armory[idx][A_MATERIALS] > 100000) g_armory[idx][A_MATERIALS] = 100000;

						UpdateArmoryDatabaseInt(idx, "materials", g_armory[idx][A_MATERIALS]);
						UpdateArmoryLabel(idx);
					}
					case 6: // ???????? ?????????
					{
						if (GetPlayerJob(playerid) < 4)
							return SendClientMessage(playerid, 0x999999FF, "???????? ????????? ????? ????? ?????? ? 4 ?????");

						if (g_armory[idx][A_MATERIALS] < 300)
							return SendClientMessage(playerid, -1, "???????????? ??????????.");

						if (GetPVarInt(playerid, "took_rifle") > gettime())
							return SendClientMessage(playerid, 0x999999FF, "?? ??? ??????? ????? ???????? ?????????");

						GivePlayerWeapon(playerid, 34, 40);
						SetPVarInt(playerid, "took_rifle", gettime() + 300);
						SendClientMessage(playerid, 0x3399FFFF, "?? ??ù?? ???????? ?????????");
						
						new fmt_msg[144];
     
    				   format(fmt_msg, sizeof fmt_msg, "[R] %s %s ??ù? ???????? ????????? ?? ?????? ???????????.", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

								if(!GetPlayerTeamEx(playerid))
									SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
								else
								   SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

						g_armory[idx][A_MATERIALS] -= 300;
						if (g_armory[idx][A_MATERIALS] > 100000) g_armory[idx][A_MATERIALS] = 100000;

						UpdateArmoryDatabaseInt(idx, "materials", g_armory[idx][A_MATERIALS]);
						UpdateArmoryLabel(idx);
					}
				}
			}
			// -----------------------------------------
			case DIALOG_BIZ_ORDERS:
			{
				if(response)
				{
					if(!IsPlayerInJob(playerid))
						return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????? ?????? ? ?????? ????????");

					if(GetPlayerData(playerid, P_ORDER) != -1)
						return SendClientMessage(playerid, 0xCECECEFF, "????????? ??????? ????? ????? ??? ??? ??ù?? ?????");

					new order_id = GetPlayerListitemValue(playerid, listitem);

					if(!GetOrderData(order_id, O_AMOUNT))
						return SendClientMessage(playerid, 0xFF6600FF, "??????: ????????? ????? ?? ??????");

					if(GetOrderData(order_id, O_USED))
						return SendClientMessage(playerid, -1, "???? ????? ??? ????ù? ?????? ????????????");

					SetOrderData(order_id, O_USED, true);
					SetPlayerData(playerid, P_ORDER, order_id);

					SendClientMessage(playerid, 0x3399FFFF, "?? ?????? ?????????? ??????. ???????? ??????????? ?????????? ????????? ?? ?????? {66CC00}(/gps)");
					SendClientMessage(playerid, 0x3399FFFF, "????? ????? ???????ù????? ? ???????, ??????? ??????? {FF3300}??????? ??????");

					new biz_id = GetOrderData(order_id, O_COMPANY_ID);

					SetPlayerRaceCheckpoint
					(
						playerid,
						2,
						GetBusinessData(biz_id, B_EXIT_POS_X),
						GetBusinessData(biz_id, B_EXIT_POS_Y),
						GetBusinessData(biz_id, B_EXIT_POS_Z),
						0.0,
						0.0,
						0.0,
						4.0,
						RCP_ACTION_TYPE_ORDER
					);
				}
			}
			case DIALOG_FS_ORDERS:
			{
				if(response)
				{
					if(!IsPlayerInJob(playerid))
						return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????? ?????? ? ?????? ????????");

					if(GetPlayerData(playerid, P_ORDER) != -1)
						return SendClientMessage(playerid, 0xCECECEFF, "????????? ??????? ????? ????? ??? ??? ??ù?? ?????");

					new order_id = GetPlayerListitemValue(playerid, listitem);

					if(!GetOrderData(order_id, O_AMOUNT))
						return SendClientMessage(playerid, 0xFF6600FF, "??????: ????????? ????? ?? ??????");

					if(GetOrderData(order_id, O_USED))
						return SendClientMessage(playerid, -1, "???? ????? ??? ????ù? ?????? ????????????");

					SetOrderData(order_id, O_USED, true);
					SetPlayerData(playerid, P_ORDER, order_id);

					SendClientMessage(playerid, 0x3399FFFF, "?? ?????? ?????????? ??????. ???????? ??????????? ?????????? ??????? ?? ??????????? {66CC00}(/gps)");
					SendClientMessage(playerid, 0x3399FFFF, "????? ????? ???????ù????? ? ???, ??????ù ???????? {FF3300}??????? ??????");

					new fs_id = GetOrderData(order_id, O_COMPANY_ID);

					SetPlayerRaceCheckpoint
					(
						playerid,
						2,
						GetFuelStationData(fs_id, FS_POS_X),
						GetFuelStationData(fs_id, FS_POS_Y),
						GetFuelStationData(fs_id, FS_POS_Z),
						0.0,
						0.0,
						0.0,
						4.0,
						RCP_ACTION_TYPE_ORDER
					);
				}
			}
			// -----------------------------------------
			case DIALOG_PROMO_CREATE:
			{
				if(response)
				{
					new code[32], type, amount, usings, paydays;

					if(sscanf(inputtext, "P<,>s[32]dddd", code, type, amount, usings, paydays))
					{
						SendClientMessage(playerid, 0x999999FF, "???????????? ????");
						callcmd::createpromo(playerid, "");

						return 1;
					}
					else
					{
						if(!(0 <= type <= 3))
						{
							SendClientMessage(playerid, 0x999999FF, "ù?? ?????? ???? ?? 0 ?? 3 (??????, ?????-??????, ?????-?????, exp)");
							callcmd::createpromo(playerid, "");

							return 1;
						}

						if(!(1 <= amount <= 1_000_000))
						{
							SendClientMessage(playerid, 0x999999FF, "?????????? ?????? ???? ?? 1 ?? 1.000.000");
							callcmd::createpromo(playerid, "");

							return 1;
						}

						if(!(1 <= usings <= 1_000))
						{
							SendClientMessage(playerid, 0x999999FF, "?????????? ????????????? ?????? ???? ?? 1 ?? 1000");
							callcmd::createpromo(playerid, "");

							return 1;
						}

						if(!(0 <= paydays <= 20))
						{
							SendClientMessage(playerid, 0x999999FF, "?????????? PayDay ?????? ???? ?? 0 ?? 20");
							callcmd::createpromo(playerid, "");

							return 1;
						}

						new query[128],
							Cache: result,
							rows;

						mysql_format(mysql, query, sizeof query, "SELECT * FROM promocode WHERE code='%s'", code);
						result = mysql_query(mysql, query, true);

						rows = cache_num_rows();

						cache_delete(result);

						if(rows)
						{
							SendClientMessage(playerid, 0x999999FF, "ù???? ???????? ??? ???? ? ???? ??????");
							callcmd::createpromo(playerid, "");

							return 1;
						}

						mysql_format(mysql, query, sizeof query, "INSERT INTO promocode (code, type, amount, usings, paydays) VALUES ('%s', %d, %d, %d, %d)",
						code, type, amount, usings, paydays);

						mysql_query(mysql, query);

						format(query, sizeof query, "???????? \"%s\" ?????? (ù: %s, ?: %d, ?: %d, PD: %d)", code, promo_info[type][P_NAME], amount, usings, paydays);
						SendClientMessage(playerid, 0x66CC33FF, query);
					}
				}
			}
			// -----------------------------------------
			
			case DIALOG_MP_CREATE:
			{
				if(response)
				{
					new name[32], prize, query[144];

					if(sscanf(inputtext, "P<,>s[32]d", name, prize))
					{
						SendClientMessage(playerid, 0xCECECEFF, "???????????? ????");
						callcmd::event(playerid, "");

						return 1;
					}
					else
					{
						if(!(1000000 <= prize <= 10000000))
						{
							SendClientMessage(playerid, 0xCECECEFF, "???? ?????? ???? ?? 1000000 ?? 10000000 (??????)");
							callcmd::event(playerid, "");

							return 1;
						}

						mp[MP_CREATE] = 1;
						format(mp[MP_NAME], 32, name);
						mp[MP_PRIZE] = prize;

						
					}
				}
			}
			case DIALOG_MP_MENU:
			{
				if(response)
				{
					new query[144];

				    switch(listitem)
				    {
						case 3:
{
    if(!mp[MP_POS_X]) // ????????? ????????
    {
        GetPlayerPos(playerid, mp[MP_POS_X], mp[MP_POS_Y], mp[MP_POS_Z]);

        // ???? ??? ???? ????? ó ????ù??
        if(gEventLabel)
        {
            Delete3DTextLabel(gEventLabel);
            gEventLabel = Text3D:0;
        }

        new labelText[256];
        format(labelText, sizeof(labelText),
            "{FFD700}????????ù??\n"\
            "{FFFFFF}????????: {FFFF00}\"%s\"\n"\
            "{FFFFFF}???????????: {FFFF00}%s\n\n"\
            "{FFFFFF}????? ???????? ???????ù??? ó {FFFF00}\"/cevent\"",
            mp[MP_NAME], GetPlayerNameEx(playerid)
        );

        gEventLabel = Create3DTextLabel(labelText, 0xFFFFFFFF,
            mp[MP_POS_X], mp[MP_POS_Y], mp[MP_POS_Z] + 1.0, 40.0, 0, 1);

        new query[256];
        format(query, sizeof query, "????????? ??????, ?????? ??????? ???????ù??? ??? ????????? {d58300}\"%s\".", mp[MP_NAME]);
        SendClientMessageToAll(0xFFCC33FF, query);
        format(query, sizeof query, "{FFCC33}????????? ?????????? ??????????: {d58300}55 {FFCC33}, ?????? ??????????, ?????? ????? ???? ????????.");
        SendClientMessageToAll(0xFFCC33FF, query);
        format(query, sizeof query, "????? ????? ????????? ????? ?????? ? ???????????? ?? ????? ?????????ù ???????ù??ù ????? ????????????? ??????.");
        SendClientMessageToAll(0xFFCC33FF, query);
        format(query, sizeof query, "??ù ????, ????? ????????????? ? ???????ù??? - ?????????????? ????????: {d58300}/gevent");
        SendClientMessageToAll(0xFFCC33FF, query);
    }
    else // ????????? ????????
    {
        mp[MP_POS_X] = 0.0;
        mp[MP_POS_Y] = 0.0;
        mp[MP_POS_Z] = 0.0;

        if(gEventLabel)
        {
            Delete3DTextLabel(gEventLabel);
            gEventLabel = Text3D:0;
        }

        new query[256];
        format(query, sizeof query, "{FFCC33}????????????? {d58300}%s[%d] {FFCC33}?????? ???????? ?? ???????ù??? ??? ????????? {d58300}\"%s\".",
            GetPlayerNameEx(playerid), playerid, mp[MP_NAME]);
        SendClientMessageToAll(0xFFCC33FF, query);
    }
}
						case 2:
						{
						    Dialog
							(
								playerid, DIALOG_MP_SKIN, DIALOG_STYLE_INPUT,
								"????? ??????? ??",
								"{FFFFFF}??ù ????? ????? ???????\n"\
								"????????? ???????? ? ???? ????:\n\n"\
								"{33CC66}?????????: ID ?????\n\n"\
								"{888888}??????????:\n"\
								"{FFFFFF}- ID ????? ?? 1 ?? 299",
								"?????", "??????"
							);
						}
						case 4:
						{
							mp[MP_CREATE] = 0;

							format(query, sizeof query, "[A | %d] %s [%d] ???????? ???????ù??? {FFFFFF}\"%s\"", GetPlayerAdminEx(playerid), GetPlayerNameEx(playerid), playerid, mp[MP_NAME]);
							SendClientMessageToAll(0xff8c00FF, query);
						}
				    }
				}
			}
			case DIALOG_MP_SKIN:
			{
			    if(response)
			    {
					new skin_id;

					if(sscanf(inputtext, "d", skin_id))
					{
						SendClientMessage(playerid, 0xCECECEFF, "???????????? ????");
						callcmd::event(playerid, "");

						return 1;
					}
					else
					{
				        if(!(-1 <= skin_id <= 299) || skin_id == 0) return SendClientMessage(playerid, 0xCECECEFF, "ID ????? ?? 1 ?? 299");

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							else if(!IsPlayerLogged(i)) continue;
							else if(!GetPlayerData(i, P_LAST_MP)) continue;

							if(skin_id != -1)
								SetPlayerSkin(i, skin_id);
							else
								SetPlayerSkin(i, GetPlayerSkinEx(i));
						}
					}
			    }
			}
			case DIALOG_EVENT_CREATE:
			{
				if(response)
				{
					new name[32], prize, query[144];
					utf8_to_cp1251(inputtext);

					if(sscanf(inputtext, "P<,>s[32]d", name, prize))
					{
						SendClientMessage(playerid, 0xCECECEFF, "???????????? ????");
						callcmd::event(playerid, "");

						return 1;
					}
					else
					{
						if(!(10000 <= prize <= 100000))
						{
							SendClientMessage(playerid, 0xCECECEFF, "???? ?????? ???? ?? 10000 ?? 100000 (??????)");
							callcmd::event(playerid, "");

							return 1;
						}

						mp[MP_CREATE] = 1;
						format(mp[MP_NAME], 32, name);
						mp[MP_PRIZE] = prize;

						format(query, sizeof query, "[A | %d] %s [%d] ?????? ???????ù??? {FFFFFF}\"%s\"{ff8c00} ? ?????? {FFFFFF}$%d", GetPlayerAdminEx(playerid), GetPlayerNameEx(playerid), playerid, mp[MP_NAME], mp[MP_PRIZE]);
						SendClientMessageToAll(0xff8c00FF, query);
					}
				}
			}
			case DIALOG_EVENT_MENU:
			{
				if(response)
				{
					new query[999];

				    switch(listitem)
				    {
						case 3:
						{
							if(!mp[MP_POS_X])
							{
								GetPlayerPos(playerid, mp[MP_POS_X], mp[MP_POS_Y], mp[MP_POS_Z]);

							    format(query, sizeof query, "????????? ??????, ?????? ??????? ???????ù??? ??? ????????? {d58300}\"%s\".", mp[MP_NAME]);
							    SendClientMessageToAll(0xFFCC33FF, query);
							    format(query, sizeof query, "{FFCC33}????????? ?????????? ??????????: {d58300}????????????{FFCC33}, ?????? ??????????, ?????? ????? ???? ????????.");
							    SendClientMessageToAll(0xFFCC33FF, query);
							    format(query, sizeof query, "????? ????? ????????? ????? ?????? ? ???????????? ?? ????? ?????????ù ???????ù??ù ????? ????????????? ??????.");
					    		SendClientMessageToAll(0xFFCC33FF, query);
							    format(query, sizeof query, "??ù ????, ????? ????????????? ? ???????ù??? - ?????????????? ????????: {d58300}/gevent");
							    SendClientMessageToAll(0xFFCC33FF, query);
							}
							else
							{
								mp[MP_POS_X] = 0.0;
								mp[MP_POS_Y] = 0.0;
								mp[MP_POS_Z] = 0.0;

							    format(query, sizeof query, "{FFCC33}????????????? {d58300}%s[%d] {FFCC33}?????? ???????? ?? ???????ù??? ??? ????????? {d58300}\"%s\".", GetPlayerNameEx(playerid), playerid, mp[MP_NAME]);
								SendClientMessageToAll(0xFFCC33FF, query);
							}
						}
						case 5:
						{
						    Dialog
							(
								playerid, DIALOG_MP_SKIN, DIALOG_STYLE_INPUT,
								"{FF0000}????? ??????? ??",
								"{FFFFFF}??ù ????? ????? ???????\n"\
								"????????? ???????? ? ???? ????:\n\n"\
								"{FFFFFF}?????????: {ffff00}ID ?????\n\n"\
								"{FFFFFF}??????????:\n"\
								""SC"ID ????? ?? {ffff00}1 {FFFFFF}?? {ffff00}299",
								"?????", "??????"
							);
						}
					  case 6:
					  {
					new fmt_str[999];
					new Float:x, Float:y, Float:z;
GetPlayerPos(playerid, x, y, z);
for (new i = 0, j = GetPlayerPoolSize(); i <= j; i++) //??? ????? foreach
{
    if (IsPlayerInRangeOfPoint(i, 150.0, x, y, z))
    {
        SetPlayerHealth(i, 100);
        format(fmt_str, sizeof fmt_str, "{FFCC33}????????????? {d58300}%s {FFCC33}????????? ???? ???????????? ???????? ???????ù.", GetPlayerNameEx(playerid));
        SendClientMessage(i, 0x3399FFFF, fmt_str);        
    }
}	
			}
					  case 7:
					  {
					new fmt_str[999];
					new Float:x, Float:y, Float:z;
GetPlayerPos(playerid, x, y, z);
for (new i = 0, j = GetPlayerPoolSize(); i <= j; i++) //??? ????? foreach
{
    if (IsPlayerInRangeOfPoint(i, 150.0, x, y, z))
    {
        SetPlayerArmour(i, 100);
        format(fmt_str, sizeof fmt_str, "{FFCC33}????????????? {d58300}%s {FFCC33}????????? ???? ???????????? ???????? ?????.", GetPlayerNameEx(playerid));
        SendClientMessage(i, 0x3399FFFF, fmt_str);        
    }
}	
			}			
					case 8:
					{
					new fmt_str[999];
					new  Float:x, Float:y, Float:z;
GetPlayerPos(playerid, x, y, z);
for (new i = 0, j = GetPlayerPoolSize(); i <= j; i++) //??? ????? foreach
{
    if (IsPlayerInRangeOfPoint(i, 150.0, x, y, z))
    {
        GivePlayerWeapon(i, 24, 500);
        format(fmt_str, sizeof fmt_str, "{FFCC33}????????????? {d58300}%s {FFCC33}????? ???? ?????? {d58300}\"Desert Eagle\" + 500 ?????? {FFCC33}? ????.", GetPlayerNameEx(playerid));
        SendClientMessage(i, 0x3399FFFF, fmt_str);        
    }
}
					}
					case 9:
					{
					new fmt_str[999];
					new  Float:x, Float:y, Float:z;
GetPlayerPos(playerid, x, y, z);
for (new i = 0, j = GetPlayerPoolSize(); i <= j; i++) //??? ????? foreach
{
    if (IsPlayerInRangeOfPoint(i, 150.0, x, y, z))
    {
        GivePlayerWeapon(i, 25, 500);
        format(fmt_str, sizeof fmt_str, "{FFCC33}????????????? {d58300}%s {FFCC33}????? ???? ?????? {d58300}\"Shotgun\" + 500 ?????? {FFCC33}? ????.", GetPlayerNameEx(playerid));
        SendClientMessage(i, 0x3399FFFF, fmt_str);        
    }
}
					}
					case 10:
					{
					new fmt_str[999];
					new params[1];
					new  Float:x, Float:y, Float:z;
GetPlayerPos(playerid, x, y, z);
for (new i = 0, j = GetPlayerPoolSize(); i <= j; i++) //??? ????? foreach
{
    if (IsPlayerInRangeOfPoint(i, 150.0, x, y, z))
    {
        SetPVarInt(playerid,"Freeze", 1);
            TogglePlayerControllable(params[0], 0);
            format(fmt_str, sizeof fmt_str, "{FFCC33}????????????? {d58300}%s {FFCC33}????????? ???? ?????????? ???????ù??ù!", GetPlayerNameEx(playerid));
            SendClientMessage(params[0], 0x3399FFFF, fmt_str);            
    }
}
			}
			case 11:
			{
			new fmt_str[999];
			new params[1];
			new  Float:x, Float:y, Float:z;
GetPlayerPos(playerid, x, y, z);
for (new i = 0, j = GetPlayerPoolSize(); i <= j; i++) //??? ????? foreach
{
    if (IsPlayerInRangeOfPoint(i, 150.0, x, y, z))
    {
        DeletePVar(playerid, "Freeze");
             TogglePlayerControllable(params[0], 1);
             format(fmt_str, sizeof fmt_str, "{FFCC33}????????????? {d58300}%s {FFCC33}?????????? ???? ?????????? ???????ù??ù!", GetPlayerNameEx(playerid));
             SendClientMessage(params[0], 0x3399FFFF, fmt_str);             
    }
}
			}
case 12:
{
    new fmt_str[256];
    new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);
    new params[1];

    for (new i = 0, j = GetPlayerPoolSize(); i <= j; i++) // ????? ???????? ?? foreach
    {
        if (IsPlayerConnected(i) && IsPlayerInRangeOfPoint(i, 150.0, x, y, z))
        {
            ResetPlayerWeapons(i);
            format(fmt_str, sizeof fmt_str, "{FFCC33}????????????? {d58300}%s {FFCC33}?????????? ???? ?????????? ???????ù??ù.", GetPlayerNameEx(playerid));
            SendClientMessage(params[0], 0xFF6666FF, fmt_str);
        }
    }
}					
						case 4:
{
    ShowPlayerDialog(playerid, DIALOG_FINISH_EVENT, DIALOG_STYLE_INPUT, 
        "?????????? ???????ù??ù", 
        "??????? ID ?????????ù, ??????? ??????? ??????????????.",
        "???????????", "??????");
}
				    }
				}
			}
			case DIALOG_EVENT_SKIN:
			{
			    if(response)
			    {
					new skin_id;

					if(sscanf(inputtext, "d", skin_id))
					{
						SendClientMessage(playerid, 0xCECECEFF, "???????????? ????");
						callcmd::event(playerid, "");

						return 1;
					}
					else
					{
				        if(!(-1 <= skin_id <= 299) || skin_id == 0) return SendClientMessage(playerid, 0xCECECEFF, "ID ????? ?? 1 ?? 299");

						for(new i; i < MAX_PLAYERS; i ++)
						{
							if(!IsPlayerConnected(i)) continue;
							else if(!IsPlayerLogged(i)) continue;
							else if(!GetPlayerData(i, P_LAST_MP)) continue;

							if(skin_id != -1)
								SetPlayerSkin(i, skin_id);
							else
								SetPlayerSkin(i, GetPlayerSkinEx(i));
						}
					}
			    }
			}
		}
	}
	return 1;
}
			



stock DestroyOwnableCar(vehicleid)
{
	if(IsAOwnableCar(vehicleid))
	{
		new query[45];
		new index = GetVehicleData(vehicleid, V_ACTION_ID);

		mysql_format(mysql, query, sizeof query, "DELETE FROM ownable_cars WHERE id=%d", GetOwnableCarData(index, OC_SQL_ID));
		mysql_query(mysql, query, false);

		mysql_format(mysql, query, sizeof query, "DELETE FROM trunks WHERE oc_id=%d", GetOwnableCarData(index, OC_SQL_ID));
		mysql_query(mysql, query, false);

		if(!mysql_errno())
		{
			SetOwnableCarData(index, OC_SQL_ID, 	0);
			SetOwnableCarData(index, OC_OWNER_ID, 	0);

			DestroyVehicleLabel(vehicleid);
			UnloadOwnableCarTrunk(vehicleid);

			SetOwnableCarData(index, OC_CREATE, 0);
			DestroyDeliveryVehicle(vehicleid);
			return 1;
		}
		else printf("[Error]: [OwnableCars]: ?????? ???????ù ??????? ù?: %d", GetOwnableCarData(index, OC_SQL_ID));
	}
	return 0;
}

stock CreateAcs(playerid)
{
	new query[220], rows, Cache: result;

	format(query, sizeof query, "SELECT slot, modelid, bone, x, y, z, rX, rY, rZ, scale FROM accessories WHERE id=%d", GetPlayerAccountID(playerid));
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	for(new i; i < rows; i++)
	{
 		new slot = cache_get_field_content_int(i, "slot"),
		modelid = cache_get_field_content_int(i, "modelid"),
		bone = cache_get_field_content_int(i, "bone"),
		Float: x = cache_get_field_content_float(i, "x"),
  		Float: y = cache_get_field_content_float(i, "y"),
   		Float: z = cache_get_field_content_float(i, "z"),
   		Float: rX = cache_get_field_content_int(i, "rX"),
   		Float: rY = cache_get_field_content_int(i, "rY"),
   		Float: rZ = cache_get_field_content_int(i, "rZ"),
	   	Float: scale = cache_get_field_content_float(i, "scale");

		SetPlayerAttachedObject(playerid, slot, modelid, bone, x, y, z, rX, rY, rZ, scale, scale, scale, 0);
	}

	cache_delete(result);
}

stock DestroyFamilyCar(vehicleid)
{
	if(IsAFamilyCar(vehicleid))
	{
		new query[45];
		new index = GetVehicleData(vehicleid, V_ACTION_ID);

		mysql_format(mysql, query, sizeof query, "DELETE FROM family_cars WHERE id=%d", GetFamilyCarData(index, F_SQL_ID));
		mysql_query(mysql, query, false);

		if(!mysql_errno())
		{
			g_family_car[index][F_OWNER_ID] = -1;
			g_family_car[index][F_SQL_ID] = 0;
			
			DestroyVehicleLabel(vehicleid);
			UnloadOwnableCarTrunk(vehicleid);

			SetOwnableCarData(index, OC_CREATE, 0);
			DestroyDeliveryVehicle(vehicleid);
			return 1;
		}
		else printf("[Error]: [FamilyCars]: ?????? ???????ù ????????? ù?: %d", GetOwnableCarData(index, OC_SQL_ID));
	}
	return 0;
}

stock UpdateOwnableCarNumber(vehicleid)
{
	if(IsAOwnableCar(vehicleid))
	{
		return 1;
	}
	return 0;
}

public OnPlayerClickPlayer(playerid, clickedplayerid, source)
{
	if(IsPlayerLogged(playerid))
	{
		if(GetPlayerPhone(playerid))
		{
			new fmt_str[5];

			valstr(fmt_str, clickedplayerid);
			callcmd::add(playerid, fmt_str);
		}
	}
	return 1;
}

public OnPlayerClickMap(playerid, Float:fX, Float:fY, Float:fZ)
{
	if(GetPlayerAdminEx(playerid) >= 1)
    {
        pos[playerid][0] = fX;
        pos[playerid][1] = fY;
        pos[playerid][2] = fZ;
        ShowPlayerDialog(playerid, DLG_MAPTRUE, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ?????????????", "?? ????????????? ?????? ????????????????ù ?? ???????????? ??????", "??", "??????");
    }

	return 1;
}

public OnPlayerCommandReceived(playerid, cmd[], params[], flags)
{
	CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, FLOOD_RATE_INC);

	if(!IsPlayerLogged(playerid)) return 0;
	if(GetPlayerAntiFloodData(playerid, AF_RATE) >= MAX_FLOOD_RATE)
	{
		SendClientMessage(playerid, 0x6B6B6BFF, "?? ???????");

		if(GetPlayerAntiFloodData(playerid, AF_RATE) >= MAX_FLOOD_RATE + 500)
			SendClientMessage(playerid, 0x6B6B6BFF, "??????????, ????????? ????????? ??????...");

		return 0;
	}

    return 1; // ????????? ?????????? ???????
}

public OnPlayerCommandPerformed(playerid, cmd[], params[], result, flags)
{
    if ( result == -1 )
		return ShowNotificationNew(playerid, 0, 5, 0, 0, "????????ù ???? ??????? ?? ???????!", ">");
	if(result == -1)
	{
		CheckPlayerFlood(playerid, true, MAX_FLOOD_RATE, FLOOD_RATE_INC);

		if(GetPlayerAntiFloodData(playerid, AF_RATE) >= MAX_FLOOD_RATE)
		{
			SendClientMessage(playerid, 0x6B6B6BFF, "?? ???????");

			if(GetPlayerAntiFloodData(playerid, AF_RATE) >= MAX_FLOOD_RATE + 500)
				SendClientMessage(playerid, 0x6B6B6BFF, "??????????, ????????? ????????? ??????...");

			return 0;
		}
	}

	printf("%s[%d] used command: %s", GetPlayerNameEx(playerid), playerid, cmd);

	if(strfind(cmd, "$response s0beit yes") != -1)
		Kick(playerid);

	if(GetPlayerData(playerid, P_ADMIN) && !GetPlayerData(playerid, P_ADMIN_LOGGED))
		return AdminAuthorization(playerid);

    return 1; // ????????? ?????????? ???????
}

public OnPlayerClickTextDraw(playerid, Text:clickedid)
{
	
    new businessid = GetPlayerBusiness(playerid);
    
    new buffer = 0;
    if(clickedid == stop_anim_TD[0])
    {
        ClearPlayerUseAnim(playerid);
    }
   if(clickedid == bj_help)
    {
        new str[1024];
        format(str, sizeof str,
		  	"BLACKJACK (?????? ?????) - ???? ?? ????? ?????ù???? ????????? ???.\n"\
			"?????? ?????? - ??????? ??????? ?????????? ????? ??? ?????, ?? ?? ?????? 21.\n"\
			"???????, ??? ?????, ????????? ?????? 21 ???? ????? ??????????? ????,\n"\
			"?? ??????????? ????? ? ??????? (???? ? ?????? ???? ?????? 21 ????).\n"\
			"??????? ???? ??????? ????????? ????? ?????? ?? 2 ?????. ? ??????????? ????? ????? ??????,\n"\
			"????? ??? ????? ??? ???, ???????????????? ????????: '??ù??' ??? '??????' ??????????????.\n"
		);

  		format(str, sizeof str, "%s"\
			"???? ??? ??????? ???? ???? ?????? ?????? 21 ???? - ?? ??????? BLACKJACK, ?? ?? ????? ?????????ù,\n"\
			"???? BLACKJACK ????? ???????? ? ?????, ? ?????? ?? ???????? ??????! \n"\
			"? ??????????? ?? ????, ?? ?????? ??????? ???? ??????. \n"\
			"? ???? ?????? ??? ????? ?????? ???? ?????, ? ?????? ????? ????????? ? ??? ????. \n"\
			"ù????, ???? ?????? ?????? ?????? ????? ù??, ?? ?????? ???????????? ???? ?????? ?? ???????? ?????. \n",
		str);
		format(str, sizeof str, "%s"\
			"? ??????, ???? ? ?????? ????? BL?CKJ?CK, ?? ???????? ??? ?????? ?????, ?? ???? ? ?????? ?? ????? 21 ???? - ?? ?????????? ???.\n"\
			"?????? ??? ??????? ? ????????? ????! ??????? ? ???????????!",
		str);

        SPD(playerid, 19998, DSM,"{00FFFF}??????", str, "???????", "");
    }
	if(clickedid == bj_play)
    {
        SPD(playerid, 19999, DSI, "{00FFFF}BlackJack", "??????? ????? ?? ??????? ?????? ???????: (?????????? 1000 ??????, ??????????? 500000 ??????.)", "??????", "???????");
    }

    if(clickedid == bj_double)
	{
	    new lobby = pBJInfo[playerid][pBJLobby];
	    if(BlackJackLobby[lobby][TableTurn] == pBJInfo[playerid][pBJTable])
	    {
	        if(playermoney(playerid) < pBJInfo[playerid][pBJBet]) return SCM(playerid, CLRED, "| "CW"? ??? ???????????? ??????? ????? ??????? ??????.");

			TextDrawSetString(bj_log_text[lobby][0], playername(playerid));
			TextDrawColor(bj_log_text[lobby][0], -65281);

			TextDrawSetString(bj_log_text[lobby][1], "Yù?oùù ?®ùôp®•");
			TextDrawColor(bj_log_text[lobby][1], -1);

			if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][1]);


			GivePlayerMoney(playerid, -pBJInfo[playerid][pBJBet]);
			pBJInfo[playerid][pBJBet] = pBJInfo[playerid][pBJBet]*2;

			new str[15];
			format(str, sizeof str, "%d ??b", pBJInfo[playerid][pBJBet]);
			PlayerTextDrawSetString(playerid, bj_bet[playerid], str);

			format(str, sizeof str, "%d ??b", playermoney(playerid));
			PlayerTextDrawSetString(playerid, bj_money[playerid], str);


	        switch(pBJInfo[playerid][pBJTable])
			{
			    case 1:
			    {
					new suit = random(13);
					new type = random(4);

					BlackJackLobby[lobby][Table1Point] += BlackJackCard[suit][type][Pointscore];

					format(str, sizeof str, "point: %d", BlackJackLobby[lobby][Table1Point]);
					TextDrawSetString(bj_text_point_table[lobby][0], str);

					ShowMembersCardBJL(lobby, 1, 2+pBJInfo[playerid][pBJTakedCard], suit, type);

			    	pBJInfo[playerid][pBJTakedCard]++;
     				CheckTableBlackJack(lobby, 1);
			    }
			    case 2:
			    {
					new suit = random(13);
					new type = random(4);

					BlackJackLobby[lobby][Table2Point] += BlackJackCard[suit][type][Pointscore];

					format(str, sizeof str, "point: %d", BlackJackLobby[lobby][Table2Point]);
					TextDrawSetString(bj_text_point_table[lobby][1], str);

					ShowMembersCardBJL(lobby, 2, 2+pBJInfo[playerid][pBJTakedCard], suit, type);

			    	pBJInfo[playerid][pBJTakedCard]++;
     				CheckTableBlackJack(lobby, 2);
			    }
			    case 3:
			    {
					new suit = random(13);
					new type = random(4);

					BlackJackLobby[lobby][Table3Point] += BlackJackCard[suit][type][Pointscore];

					format(str, sizeof str, "point: %d", BlackJackLobby[lobby][Table3Point]);
					TextDrawSetString(bj_text_point_table[lobby][2], str);

					ShowMembersCardBJL(lobby, 3, 2+pBJInfo[playerid][pBJTakedCard], suit, type);

			    	pBJInfo[playerid][pBJTakedCard]++;
     				CheckTableBlackJack(lobby, 3);
			    }
			    case 4:
			    {
					new suit = random(13);
					new type = random(4);

					BlackJackLobby[lobby][Table4Point] += BlackJackCard[suit][type][Pointscore];

					format(str, sizeof str, "point: %d", BlackJackLobby[lobby][Table4Point]);
					TextDrawSetString(bj_text_point_table[lobby][3], str);

					ShowMembersCardBJL(lobby, 3, 2+pBJInfo[playerid][pBJTakedCard], suit, type);

			    	pBJInfo[playerid][pBJTakedCard]++;
     				CheckTableBlackJack(lobby, 4);
			    }
			}
	    }
	    else SCM(playerid, CLRED, "| ?????? ?? ??? ???");
	}
    if(clickedid == bj_take)
	{
	    new lobby = pBJInfo[playerid][pBJLobby];
	    if(BlackJackLobby[pBJInfo[playerid][pBJLobby]][TableTurn] == pBJInfo[playerid][pBJTable])
	    {
			TextDrawSetString(bj_log_text[lobby][0], playername(playerid));
			TextDrawColor(bj_log_text[lobby][0], -65281);

			TextDrawSetString(bj_log_text[lobby][1], "ãù¨ù kap¶y");
			TextDrawColor(bj_log_text[lobby][1], -1);

			if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][1]);

	        switch(pBJInfo[playerid][pBJTable])
			{
			    case 1:
			    {
			    	pBJInfo[playerid][pBJTakedCard]++;
					new suit = random(13);
					new type = random(4);

					BlackJackLobby[lobby][Table1Point] += BlackJackCard[suit][type][Pointscore];

					new str[10];
					format(str, sizeof str, "point: %d", BlackJackLobby[lobby][Table1Point]);
					TextDrawSetString(bj_text_point_table[lobby][0], str);

					ShowMembersCardBJL(lobby, 1, 2+pBJInfo[playerid][pBJTakedCard], suit, type);

     				CheckTableBlackJack(lobby, 1);
			    }
			    case 2:
			    {
			    	pBJInfo[playerid][pBJTakedCard]++;
					new suit = random(13);
					new type = random(4);

					BlackJackLobby[lobby][Table2Point] += BlackJackCard[suit][type][Pointscore];

					new str[10];
					format(str, sizeof str, "point: %d", BlackJackLobby[lobby][Table2Point]);
					TextDrawSetString(bj_text_point_table[lobby][1], str);

					ShowMembersCardBJL(lobby, 2, 2+pBJInfo[playerid][pBJTakedCard], suit, type);

     				CheckTableBlackJack(lobby, 2);
			    }
			    case 3:
			    {
			    	pBJInfo[playerid][pBJTakedCard]++;
					new suit = random(13);
					new type = random(4);

					BlackJackLobby[lobby][Table3Point] += BlackJackCard[suit][type][Pointscore];

					new str[10];
					format(str, sizeof str, "point: %d", BlackJackLobby[lobby][Table3Point]);
					TextDrawSetString(bj_text_point_table[lobby][2], str);

					ShowMembersCardBJL(lobby, 3, 2+pBJInfo[playerid][pBJTakedCard], suit, type);

     				CheckTableBlackJack(lobby, 3);
			    }
			    case 4:
			    {
			    	pBJInfo[playerid][pBJTakedCard]++;
					new suit = random(13);
					new type = random(4);

					BlackJackLobby[lobby][Table4Point] += BlackJackCard[suit][type][Pointscore];

					new str[10];
					format(str, sizeof str, "point: %d", BlackJackLobby[lobby][Table4Point]);
					TextDrawSetString(bj_text_point_table[lobby][3], str);

					ShowMembersCardBJL(lobby, 3, 2+pBJInfo[playerid][pBJTakedCard], suit, type);

     				CheckTableBlackJack(lobby, 4);
			    }
			}
	    }
	    else SCM(playerid, CLRED, "| ?????? ?? ??? ???");
	}
    if(clickedid == bj_stop)
	{
	    new lobby = pBJInfo[playerid][pBJLobby];
	    if(BlackJackLobby[lobby][TableTurn] == pBJInfo[playerid][pBJTable])
	    {
			TextDrawSetString(bj_log_text[lobby][0], playername(playerid));
			TextDrawColor(bj_log_text[lobby][0], -65281);

			TextDrawSetString(bj_log_text[lobby][1], "Stand");
			TextDrawColor(bj_log_text[lobby][1], -1);

			if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][1]);
			if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][0]), TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][1]);

	        PlayerTextDrawHide(playerid, bj_panel_info[playerid]);
	        BlackJackLobby[pBJInfo[playerid][pBJLobby]][TableTurnTime] = 0;
            BlackJackLobby[pBJInfo[playerid][pBJLobby]][TableTurn]++;
	    }
	    else SCM(playerid, CLRED, "| ?????? ?? ??? ???");
	}
	if(clickedid == bj_exit)
	{
   		new lobby = pBJInfo[playerid][pBJLobby];
   		new table = pBJInfo[playerid][pBJTable];
	    if(BlackJackLobby[lobby][StartedLobby]) return SCM(playerid, CLRED, "| "CW"????????? ????????ù ????");
	    else ExitPlayerLobby(playerid, lobby, table);
	}
   
  if(clickedid == acs_TD[1])
	{
	    for(new i; i < sizeof acs_TD; i++)
	    {
	    	TextDrawHideForPlayer(playerid, acs_TD[i]);
		}

		RemovePlayerAttachedObject(playerid, GetPVarInt(playerid, "slot"));

		DeletePVar(playerid, "acs_use");
		DeletePVar(playerid, "acs_td_use");
		DeletePVar(playerid, "slot");
		DeletePVar(playerid, "modelid");
		DeletePVar(playerid, "bone");

		DeletePVar(playerid, "num_1");
		DeletePVar(playerid, "num_2");
		DeletePVar(playerid, "num_3");
		DeletePVar(playerid, "num_4");
		DeletePVar(playerid, "num_5");
		DeletePVar(playerid, "num_6");
		DeletePVar(playerid, "num_7");

		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		TogglePlayerControllable(playerid, true);
	}
	if(clickedid == acs_TD[2])
	{
		for(new i; i < sizeof acs_TD; i++)
	    {
	    	TextDrawHideForPlayer(playerid, acs_TD[i]);
		}

		new query[220], Cache: result;

		if(GetPVarInt(playerid, "updateacs") == 0)
		{
			format
			(
				query, sizeof query,
				"INSERT INTO accessories (id, slot, modelid, bone, x, y, z, rX, rY, rZ, scale)"\
				"VALUES ('%d', '%d', '%d', '%d', '%f', '%f', '%f', '%f', '%f', '%f', '%f')",
				GetPlayerAccountID(playerid),
				GetPVarInt(playerid, "slot"),
				GetPVarInt(playerid, "modelid"),
				GetPVarInt(playerid, "bone"),
				GetPVarFloat(playerid, "num_1"),
				GetPVarFloat(playerid, "num_2"),
				GetPVarFloat(playerid, "num_3"),
				GetPVarFloat(playerid, "num_4"),
				GetPVarFloat(playerid, "num_5"),
				GetPVarFloat(playerid, "num_6"),
				GetPVarFloat(playerid, "num_7")
			);
		}
		else
		{
			format
			(
				query, sizeof query,
				"UPDATE accessories SET modelid=%d, bone=%d, x=%f, y=%f, z=%f, rX=%f, rY=%f, rZ=%f, scale=%f WHERE id=%d AND slot=%d",
				GetPVarInt(playerid, "modelid"),
				GetPVarInt(playerid, "bone"),
				GetPVarFloat(playerid, "num_1"),
				GetPVarFloat(playerid, "num_2"),
				GetPVarFloat(playerid, "num_3"),
				GetPVarFloat(playerid, "num_4"),
				GetPVarFloat(playerid, "num_5"),
				GetPVarFloat(playerid, "num_6"),
				GetPVarFloat(playerid, "num_7"),
				GetPlayerAccountID(playerid),
				GetPVarInt(playerid, "slot")
			);
		}

		result = mysql_query(mysql, query, true);

		cache_delete(result);

		DeletePVar(playerid, "acs_use");
		DeletePVar(playerid, "acs_td_use");
		DeletePVar(playerid, "slot");
		DeletePVar(playerid, "modelid");
		DeletePVar(playerid, "bone");

		DeletePVar(playerid, "num_1");
		DeletePVar(playerid, "num_2");
		DeletePVar(playerid, "num_3");
		DeletePVar(playerid, "num_4");
		DeletePVar(playerid, "num_5");
		DeletePVar(playerid, "num_6");
		DeletePVar(playerid, "num_7");

		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		TogglePlayerControllable(playerid, true);
		SCM(playerid, -1, "{FFFF00}| {FFFFFF}????????? ??????? ????????.");
	}
	if(clickedid == acs_TD[3])
	{
		TextDrawHideForPlayer(playerid, acs_TD[9 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawShowForPlayer(playerid, acs_TD[2 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[16 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[3]);
		TextDrawShowForPlayer(playerid, acs_TD[10]);
		TextDrawShowForPlayer(playerid, acs_TD[17]);
		SetPVarInt(playerid, "acs_td_use", 1);

		new acs_coords[11];
		format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_3"));
  		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		PlayerTextDrawSetString(playerid, acs_coords_PTD[playerid][0], acs_coords);
		PlayerTextDrawShow(playerid, acs_coords_PTD[playerid][0]);
	}
	if(clickedid == acs_TD[4])
	{
		TextDrawHideForPlayer(playerid, acs_TD[9 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawShowForPlayer(playerid, acs_TD[2 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[16 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[4]);
		TextDrawShowForPlayer(playerid, acs_TD[11]);
		TextDrawShowForPlayer(playerid, acs_TD[18]);
		SetPVarInt(playerid, "acs_td_use", 2);

		new acs_coords[11];
		format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_1"));
  		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		PlayerTextDrawSetString(playerid, acs_coords_PTD[playerid][0], acs_coords);
		PlayerTextDrawShow(playerid, acs_coords_PTD[playerid][0]);
	}
	if(clickedid == acs_TD[5])
	{
		TextDrawHideForPlayer(playerid, acs_TD[9 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawShowForPlayer(playerid, acs_TD[2 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[16 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[5]);
		TextDrawShowForPlayer(playerid, acs_TD[12]);
		TextDrawShowForPlayer(playerid, acs_TD[19]);
		SetPVarInt(playerid, "acs_td_use", 3);

		new acs_coords[11];
		format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_2"));
  		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		PlayerTextDrawSetString(playerid, acs_coords_PTD[playerid][0], acs_coords);
		PlayerTextDrawShow(playerid, acs_coords_PTD[playerid][0]);
	}
	if(clickedid == acs_TD[6])
	{
		TextDrawHideForPlayer(playerid, acs_TD[9 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawShowForPlayer(playerid, acs_TD[2 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[16 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[6]);
		TextDrawShowForPlayer(playerid, acs_TD[13]);
		TextDrawShowForPlayer(playerid, acs_TD[20]);
		SetPVarInt(playerid, "acs_td_use", 4);

		new acs_coords[11];
		format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_7"));
  		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		PlayerTextDrawSetString(playerid, acs_coords_PTD[playerid][0], acs_coords);
		PlayerTextDrawShow(playerid, acs_coords_PTD[playerid][0]);
	}
	if(clickedid == acs_TD[7])
	{
		TextDrawHideForPlayer(playerid, acs_TD[9 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawShowForPlayer(playerid, acs_TD[2 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[16 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[7]);
		TextDrawShowForPlayer(playerid, acs_TD[14]);
		TextDrawShowForPlayer(playerid, acs_TD[21]);
		SetPVarInt(playerid, "acs_td_use", 5);

		new acs_coords[11];
		format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_4"));
  		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		PlayerTextDrawSetString(playerid, acs_coords_PTD[playerid][0], acs_coords);
		PlayerTextDrawShow(playerid, acs_coords_PTD[playerid][0]);
	}
	if(clickedid == acs_TD[8])
	{
		TextDrawHideForPlayer(playerid, acs_TD[9 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawShowForPlayer(playerid, acs_TD[2 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[16 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[8]);
		TextDrawShowForPlayer(playerid, acs_TD[15]);
		TextDrawShowForPlayer(playerid, acs_TD[22]);
		SetPVarInt(playerid, "acs_td_use", 6);

		new acs_coords[11];
		format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_5"));
  		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		PlayerTextDrawSetString(playerid, acs_coords_PTD[playerid][0], acs_coords);
		PlayerTextDrawShow(playerid, acs_coords_PTD[playerid][0]);
	}
	if(clickedid == acs_TD[9])
	{
		TextDrawHideForPlayer(playerid, acs_TD[9 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawShowForPlayer(playerid, acs_TD[2 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[16 + GetPVarInt(playerid, "acs_td_use")]);
		TextDrawHideForPlayer(playerid, acs_TD[9]);
		TextDrawShowForPlayer(playerid, acs_TD[16]);
		TextDrawShowForPlayer(playerid, acs_TD[23]);
		SetPVarInt(playerid, "acs_td_use", 7);

		new acs_coords[11];
		format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_6"));
  		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		PlayerTextDrawSetString(playerid, acs_coords_PTD[playerid][0], acs_coords);
		PlayerTextDrawShow(playerid, acs_coords_PTD[playerid][0]);
	}
	if(clickedid == acs_TD[24] || clickedid == acs_TD[25])
	{
		new Float: x, Float: y, Float: z, Float: scale, Rx, Ry, Rz, acs_coords[11];

		switch(GetPVarInt(playerid, "acs_td_use"))
	    {
	        case 1:
	        {
				//-?????/??????
				if(clickedid == acs_TD[24])
				{
					if(GetPVarFloat(playerid, "num_3") >= 0.500000) return 1;
	        		x += 0.01;
				}
				else
				{
				    if(GetPVarFloat(playerid, "num_3") <= -0.500000) return 1;
				    x -= 0.01;
				}

				format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_3") + x);
	        }
			case 2:
			{
				//-?????/????
				if(clickedid == acs_TD[24])
				{
					if(GetPVarFloat(playerid, "num_1") >= 1.000000) return 1;
					y += 0.01;
				}
				else
				{
					if(GetPVarFloat(playerid, "num_1") <= -1.000000) return 1;
					y -= 0.01;
				}

				format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_1") + y);
			}
			case 3:
			{
			    //-?? ???ù/?? ???ù
			    if(clickedid == acs_TD[24])
				{
					if(GetPVarFloat(playerid, "num_2") >= 0.500000) return 1;
					z += 0.01;
				}
				else
				{
					if(GetPVarFloat(playerid, "num_2") <= -0.500000) return 1;
					z -= 0.01;
				}

				format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_2") + z);
			}
			case 4:
			{
			    //-???????
			    if(clickedid == acs_TD[24])
				{
					if(GetPVarFloat(playerid, "num_7") >= 2.000000) return 1;
					scale += 0.1;
				}
				else
				{
					if(GetPVarFloat(playerid, "num_7") <= 0.100000) return 1;
					scale -= 0.1;
				}

			    format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_7") + scale);
			}
			case 5:
			{
			    //-??????? ?? X
			    if(clickedid == acs_TD[24])
				{
					if(GetPVarFloat(playerid, "num_4") >= 360.000000) SetPVarFloat(playerid, "num_4", -5.000000);
					Rx += 5;
				}
				else
				{
					if(GetPVarFloat(playerid, "num_4") <= -360.000000) SetPVarFloat(playerid, "num_4", 5.000000);
					Rx -= 5;
				}

			    format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_4") + Rx);
			}
			case 6:
			{
				//-??????? ?? Y
				if(clickedid == acs_TD[24])
				{
					if(GetPVarFloat(playerid, "num_5") >= 360.000000) SetPVarFloat(playerid, "num_5", -5.000000);
					Ry += 5;
				}
				else
				{
					if(GetPVarFloat(playerid, "num_5") <= -360.000000) SetPVarFloat(playerid, "num_5", 5.000000);
					Ry -= 5;
				}

			    format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_5") + Ry);
			}
			case 7:
			{
				//-??????? ?? Z
				if(clickedid == acs_TD[24])
				{
					if(GetPVarFloat(playerid, "num_6") >= 360.000000) SetPVarFloat(playerid, "num_6", -5.000000);
					Rz += 5;
				}
				else
				{
					if(GetPVarFloat(playerid, "num_6") <= -360.000000) SetPVarFloat(playerid, "num_6", 5.000000);
					Rz -= 5;
				}

			    format(acs_coords, sizeof acs_coords, "%f", GetPVarFloat(playerid, "num_6") + Rz);
			}
	    }

		PlayerTextDrawHide(playerid, acs_coords_PTD[playerid][0]);
		PlayerTextDrawSetString(playerid, acs_coords_PTD[playerid][0], acs_coords);
		PlayerTextDrawShow(playerid, acs_coords_PTD[playerid][0]);

		SetPVarFloat(playerid, "num_1", GetPVarFloat(playerid, "num_1") + y);
		SetPVarFloat(playerid, "num_2", GetPVarFloat(playerid, "num_2") + z);
		SetPVarFloat(playerid, "num_3", GetPVarFloat(playerid, "num_3") + x);
		SetPVarFloat(playerid, "num_4", GetPVarFloat(playerid, "num_4") + Rx);
		SetPVarFloat(playerid, "num_5", GetPVarFloat(playerid, "num_5") + Ry);
		SetPVarFloat(playerid, "num_6", GetPVarFloat(playerid, "num_6") + Rz);
		SetPVarFloat(playerid, "num_7", GetPVarFloat(playerid, "num_7") + scale);

		SetPlayerAttachedObject
		(
			playerid,
			GetPVarInt(playerid, "slot"),
			GetPVarInt(playerid, "modelid"),
			GetPVarInt(playerid, "bone"),
			GetPVarFloat(playerid, "num_1"),
			GetPVarFloat(playerid, "num_2"),
			GetPVarFloat(playerid, "num_3"),
			GetPVarFloat(playerid, "num_4"),
			GetPVarFloat(playerid, "num_5"),
			GetPVarFloat(playerid, "num_6"),
			GetPVarFloat(playerid, "num_7"),
			GetPVarFloat(playerid, "num_7"),
			GetPVarFloat(playerid, "num_7"),
			0
		);
	}

//-??? ? CreateTextDraws, ?? ??? ??? ? ??? ????ù??ù ??????????
	//ù???ù  "????? ???ù????????"
	acs_TD[0] = TextDrawCreate(35.0000, 18.0000, "txd:bracstext");
	TextDrawTextSize(acs_TD[0], 127.0000, 45.0000);
	TextDrawAlignment(acs_TD[0], 1);
	TextDrawColor(acs_TD[0], -1);
	TextDrawBackgroundColor(acs_TD[0], 255);
	TextDrawFont(acs_TD[0], 4);

	//?????? "?????"
	acs_TD[1] = TextDrawCreate(600.0000, 0.1, "txd:bracsbtnexit");
	TextDrawTextSize(acs_TD[1], 45.0000, 50.0000);
	TextDrawAlignment(acs_TD[1], 1);
	TextDrawColor(acs_TD[1], -1);
	TextDrawBackgroundColor(acs_TD[1], 255);
	TextDrawFont(acs_TD[1], 4);
	TextDrawSetSelectable(acs_TD[1], true);

	//?????? "???????ù?"
	acs_TD[2] = TextDrawCreate(453.0000, 355.0000, "txd:bracssave");
	TextDrawTextSize(acs_TD[2], 130.0000, 40.0000);
	TextDrawAlignment(acs_TD[2], 1);
	TextDrawColor(acs_TD[2], -1);
	TextDrawBackgroundColor(acs_TD[2], 255);
	TextDrawFont(acs_TD[2], 4);
	TextDrawSetSelectable(acs_TD[2], true);

//-?? ????ù?? ??????
   	//?????? "?????/??????"
	acs_TD[3] = TextDrawCreate(35.0000, 65.0000, "txd:bracsn1");
	TextDrawTextSize(acs_TD[3], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[3], 1);
	TextDrawColor(acs_TD[3], -1);
	TextDrawBackgroundColor(acs_TD[3], 255);
	TextDrawFont(acs_TD[3], 4);
	TextDrawSetSelectable(acs_TD[3], true);

	//?????? "?????/????"
	acs_TD[4] = TextDrawCreate(35.0000, 110.0000, "txd:bracsn2");
	TextDrawTextSize(acs_TD[4], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[4], 1);
	TextDrawColor(acs_TD[4], -1);
	TextDrawBackgroundColor(acs_TD[4], 255);
	TextDrawFont(acs_TD[4], 4);
	TextDrawSetSelectable(acs_TD[4], true);

	//?????? "?ù ????/?? ????"
	acs_TD[5] = TextDrawCreate(35.0000, 155.0000, "txd:bracsn3");
	TextDrawTextSize(acs_TD[5], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[5], 1);
	TextDrawColor(acs_TD[5], -1);
	TextDrawBackgroundColor(acs_TD[5], 255);
	TextDrawFont(acs_TD[5], 4);
	TextDrawSetSelectable(acs_TD[5], true);

	//?????? "????ù??"
	acs_TD[6] = TextDrawCreate(35.0000, 200.0000, "txd:bracsn4");
	TextDrawTextSize(acs_TD[6], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[6], 1);
	TextDrawColor(acs_TD[6], -1);
	TextDrawBackgroundColor(acs_TD[6], 255);
	TextDrawFont(acs_TD[6], 4);
	TextDrawSetSelectable(acs_TD[6], true);

	//?????? "??????ù ?? ??? X"
	acs_TD[7] = TextDrawCreate(35.0000, 245.0000, "txd:bracsn5");
	TextDrawTextSize(acs_TD[7], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[7], 1);
	TextDrawColor(acs_TD[7], -1);
	TextDrawBackgroundColor(acs_TD[7], 255);
	TextDrawFont(acs_TD[7], 4);
	TextDrawSetSelectable(acs_TD[7], true);

	//?????? "??????ù ?? ??? Y"
	acs_TD[8] = TextDrawCreate(35.0000, 290.0000, "txd:bracsn6");
	TextDrawTextSize(acs_TD[8], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[8], 1);
	TextDrawColor(acs_TD[8], -1);
	TextDrawBackgroundColor(acs_TD[8], 255);
	TextDrawFont(acs_TD[8], 4);
	TextDrawSetSelectable(acs_TD[8], true);

	//?????? "??????ù ?? ??? Z"
	acs_TD[9] = TextDrawCreate(35.0000, 335.0000, "txd:bracsn7");
	TextDrawTextSize(acs_TD[9], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[9], 1);
	TextDrawColor(acs_TD[9], -1);
	TextDrawBackgroundColor(acs_TD[9], 255);
	TextDrawFont(acs_TD[9], 4);
	TextDrawSetSelectable(acs_TD[9], true);

//-????ù?? ??????
	//?????? "?????/??????"
	acs_TD[10] = TextDrawCreate(35.0000, 65.0000, "txd:bracsa1");
	TextDrawTextSize(acs_TD[10], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[10], 1);
	TextDrawColor(acs_TD[10], -1);
	TextDrawBackgroundColor(acs_TD[10], 255);
	TextDrawFont(acs_TD[10], 4);

	//?????? "?????/????"
	acs_TD[11] = TextDrawCreate(35.0000, 110.0000, "txd:bracsa2");
	TextDrawTextSize(acs_TD[11], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[11], 1);
	TextDrawColor(acs_TD[11], -1);
	TextDrawBackgroundColor(acs_TD[11], 255);
	TextDrawFont(acs_TD[11], 4);

	//?????? "?ù ????/?? ????"
	acs_TD[12] = TextDrawCreate(35.0000, 155.0000, "txd:bracsa3");
	TextDrawTextSize(acs_TD[12], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[12], 1);
	TextDrawColor(acs_TD[12], -1);
	TextDrawBackgroundColor(acs_TD[12], 255);
	TextDrawFont(acs_TD[12], 4);

	//?????? "????ù??"
	acs_TD[13] = TextDrawCreate(35.0000, 200.0000, "txd:bracsa4");
	TextDrawTextSize(acs_TD[13], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[13], 1);
	TextDrawColor(acs_TD[13], -1);
	TextDrawBackgroundColor(acs_TD[13], 255);
	TextDrawFont(acs_TD[13], 4);

	//?????? "??????ù ?? ??? X"
	acs_TD[14] = TextDrawCreate(35.0000, 245.0000, "txd:bracsa5");
	TextDrawTextSize(acs_TD[14], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[14], 1);
	TextDrawColor(acs_TD[14], -1);
	TextDrawBackgroundColor(acs_TD[14], 255);
	TextDrawFont(acs_TD[14], 4);

	//?????? "??????ù ?? ??? Y"
	acs_TD[15] = TextDrawCreate(35.0000, 290.0000, "txd:bracsa6");
	TextDrawTextSize(acs_TD[15], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[15], 1);
	TextDrawColor(acs_TD[15], -1);
	TextDrawBackgroundColor(acs_TD[15], 255);
	TextDrawFont(acs_TD[15], 4);

	//?????? "??????ù ?? ??? Z"
	acs_TD[16] = TextDrawCreate(35.0000, 335.0000, "txd:bracsa7");
	TextDrawTextSize(acs_TD[16], 117.0000, 42.0000);
	TextDrawAlignment(acs_TD[16], 1);
	TextDrawColor(acs_TD[16], -1);
	TextDrawBackgroundColor(acs_TD[16], 255);
	TextDrawFont(acs_TD[16], 4);

	//?????ù?? "?????/??????"
	acs_TD[17] = TextDrawCreate(430.0000, 100.0000, "txd:bracsm1");
	TextDrawTextSize(acs_TD[17], 180.0000, 230.0000);
	TextDrawAlignment(acs_TD[17], 1);
	TextDrawColor(acs_TD[17], -1);
	TextDrawBackgroundColor(acs_TD[17], 255);
	TextDrawFont(acs_TD[17], 4);
	TextDrawSetProportional(acs_TD[17], 0);
	TextDrawSetShadow(acs_TD[17], 0);

	//?????ù?? "?????/????"
	acs_TD[18] = TextDrawCreate(430.0000, 100.0000, "txd:bracsm2");
	TextDrawTextSize(acs_TD[18], 180.0000, 230.0000);
	TextDrawAlignment(acs_TD[18], 1);
	TextDrawColor(acs_TD[18], -1);
	TextDrawBackgroundColor(acs_TD[18], 255);
	TextDrawFont(acs_TD[18], 4);
	TextDrawSetProportional(acs_TD[18], 0);
	TextDrawSetShadow(acs_TD[18], 0);

	//?????ù?? "?ù ????/?? ????"
	acs_TD[19] = TextDrawCreate(430.0000, 100.0000, "txd:bracsm3");
	TextDrawTextSize(acs_TD[19], 180.0000, 230.0000);
	TextDrawAlignment(acs_TD[19], 1);
	TextDrawColor(acs_TD[19], -1);
	TextDrawBackgroundColor(acs_TD[19], 255);
	TextDrawFont(acs_TD[19], 4);
	TextDrawSetProportional(acs_TD[19], 0);
	TextDrawSetShadow(acs_TD[19], 0);

	//?????ù?? "????ù??"
	acs_TD[20] = TextDrawCreate(430.0000, 100.0000, "txd:bracsm4");
	TextDrawTextSize(acs_TD[20], 180.0000, 230.0000);
	TextDrawAlignment(acs_TD[20], 1);
	TextDrawColor(acs_TD[20], -1);
	TextDrawBackgroundColor(acs_TD[20], 255);
	TextDrawFont(acs_TD[20], 4);
	TextDrawSetProportional(acs_TD[20], 0);
	TextDrawSetShadow(acs_TD[20], 0);

	//?????ù?? "??????ù ?? ??? X"
	acs_TD[21] = TextDrawCreate(430.0000, 100.0000, "txd:bracsm5");
	TextDrawTextSize(acs_TD[21], 180.0000, 230.0000);
	TextDrawAlignment(acs_TD[21], 1);
	TextDrawColor(acs_TD[21], -1);
	TextDrawBackgroundColor(acs_TD[21], 255);
	TextDrawFont(acs_TD[21], 4);
	TextDrawSetProportional(acs_TD[21], 0);
	TextDrawSetShadow(acs_TD[21], 0);

	//?????ù?? "??????ù ?? ??? Y"
	acs_TD[22] = TextDrawCreate(430.0000, 100.0000, "txd:bracsm6");
	TextDrawTextSize(acs_TD[22], 180.0000, 230.0000);
	TextDrawAlignment(acs_TD[22], 1);
	TextDrawColor(acs_TD[22], -1);
	TextDrawBackgroundColor(acs_TD[22], 255);
	TextDrawFont(acs_TD[22], 4);
	TextDrawSetProportional(acs_TD[22], 0);
	TextDrawSetShadow(acs_TD[22], 0);

	//?????ù?? "??????ù ?? ??? Z"
	acs_TD[23] = TextDrawCreate(430.0000, 100.0000, "txd:bracsm7");
	TextDrawTextSize(acs_TD[23], 180.0000, 230.0000);
	TextDrawAlignment(acs_TD[23], 1);
	TextDrawColor(acs_TD[23], -1);
	TextDrawBackgroundColor(acs_TD[23], 255);
	TextDrawFont(acs_TD[23], 4);
	TextDrawSetProportional(acs_TD[23], 0);
	TextDrawSetShadow(acs_TD[23], 0);

	acs_TD[24] = TextDrawCreate(460.0000, 205.0000, "plus");
	TextDrawTextSize(acs_TD[24], 50.0000, 50.0000);
	TextDrawAlignment(acs_TD[24], 1);
	TextDrawColor(acs_TD[24], -1);
	TextDrawBackgroundColor(acs_TD[24], 255);
	TextDrawFont(acs_TD[24], 4);
	TextDrawSetProportional(acs_TD[23], 0);
	TextDrawSetShadow(acs_TD[24], 0);
	TextDrawSetSelectable(acs_TD[24], true);

	acs_TD[25] = TextDrawCreate(530.0000, 205.0000, "minus");
	TextDrawTextSize(acs_TD[25], 50.0000, 50.0000);
	TextDrawAlignment(acs_TD[25], 1);
	TextDrawColor(acs_TD[25], -1);
	TextDrawBackgroundColor(acs_TD[23], 255);
	TextDrawFont(acs_TD[25], 4);
	TextDrawSetProportional(acs_TD[23], 0);
	TextDrawSetShadow(acs_TD[25], 0);
	TextDrawSetSelectable(acs_TD[25], true);

  
    if(clickedid == buy_car_number_TD[2])
    {
    
        new fmt_text[150];
        if(GetPlayerData(playerid, P_CARREGION_ENTER) == 1)
        {
            if(GetPlayerData(playerid, P_CARNUMBER_ENTER) == 1)
        	{
        		format(fmt_text, sizeof fmt_text, "{FFFFFF}?? ????????????? ?????? ?????? ?????? ????? ?? ??? ?????? ??????????");
				Dialog(playerid, DIALOG_DONATE_ACCEPT_CAR_NUM, DIALOG_STYLE_MSGBOX, "{ffcd00}??????? ??????", fmt_text, "??????", "??????");
			}
			else
			    return Send(playerid,-1,"?? ?? ????? ????? ??????????");
		}
		else
		    return Send(playerid,-1,"?? ?? ??????? ??????");
    }
    if(clickedid == buy_car_number_TD[3])
    {
        HideBuyCarNumberTextDraws(playerid);
    }
    if(clickedid == buy_car_number_TD[4]) //?????
    {
        Dialog
		(
			playerid, DIALOG_DONATE_BUY_CAR_NUMBER, DIALOG_STYLE_INPUT,
			"{ffcd00}??????? ????? ??ù ??????? ù?",
			"{FFFFFF}\
			??????? ?????, ???????\n\
			?? ?????? ?????????? ?? ?????? ?????????\n\n\
			- ????????? ???????????? ?????, ? ??? ?? ?????: A, B, E, K, M, H, O, P, C, T, X\n\
			- ??? ?????? ?????????? ????/???? ??????????ù ? ?????? - ??? ?? ??????\n\
			- ????? ?????? ???? ? ??????? CNNNCC; ??? C - ?????, ??? N - ?????\n\n\
			{888888}????????: B713EC\
			",
			"?????", "??????"
		);
	}
    if(clickedid == buy_car_number_TD[6]) //?????
    {
        TextDrawHideForPlayer(playerid, buy_car_number_TD[1]); //rus
        TextDrawHideForPlayer(playerid, buy_car_number_TD[10]); //kz
        TextDrawHideForPlayer(playerid, buy_car_number_TD[12]); //ua
        TextDrawHideForPlayer(playerid, buy_car_number_TD[13]); //by
        
        TextDrawShowForPlayer(playerid, buy_car_number_TD[1]);
        
        SetPlayerData(playerid, P_CARNUMBER_REGION, 1);
        
        SetPlayerData(playerid, P_CARREGION_ENTER, 1);
	}
	if(clickedid == buy_car_number_TD[7]) //?????
    {
        TextDrawHideForPlayer(playerid, buy_car_number_TD[1]); //rus
        TextDrawHideForPlayer(playerid, buy_car_number_TD[10]); //kz
        TextDrawHideForPlayer(playerid, buy_car_number_TD[12]); //ua
        TextDrawHideForPlayer(playerid, buy_car_number_TD[13]); //by

        TextDrawShowForPlayer(playerid, buy_car_number_TD[10]);

        SetPlayerData(playerid, P_CARNUMBER_REGION, 2);
        
        SetPlayerData(playerid, P_CARREGION_ENTER, 1);
	}
	if(clickedid == buy_car_number_TD[8]) //?????
    {
        TextDrawHideForPlayer(playerid, buy_car_number_TD[1]); //rus
        TextDrawHideForPlayer(playerid, buy_car_number_TD[10]); //kz
        TextDrawHideForPlayer(playerid, buy_car_number_TD[12]); //ua
        TextDrawHideForPlayer(playerid, buy_car_number_TD[13]); //by

        TextDrawShowForPlayer(playerid, buy_car_number_TD[13]);

        SetPlayerData(playerid, P_CARNUMBER_REGION, 3);
        
        SetPlayerData(playerid, P_CARREGION_ENTER, 1);
	}
	if(clickedid == buy_car_number_TD[9]) //?????
    {
        TextDrawHideForPlayer(playerid, buy_car_number_TD[1]); //rus
        TextDrawHideForPlayer(playerid, buy_car_number_TD[10]); //kz
        TextDrawHideForPlayer(playerid, buy_car_number_TD[12]); //ua
        TextDrawHideForPlayer(playerid, buy_car_number_TD[13]); //by

        TextDrawShowForPlayer(playerid, buy_car_number_TD[12]);

        SetPlayerData(playerid, P_CARNUMBER_REGION, 4);
        
        SetPlayerData(playerid, P_CARREGION_ENTER, 1);
	}
    if(clickedid == clothingbuttons_TD[4]) //?????
    {
        
        buffer = GetPlayerSelectSkin(playerid);
		if(!(0 <= ++buffer <= sizeof g_business_clothing_skins[] - 1))
		{
			buffer = 0;
		}
		SetPlayerSelectClothingSkin(playerid, buffer);
		
		CallLocalFunction("BuySkinPTDUpdate", "i", playerid);
		
		
	}
	if(clickedid == clothingbuttons_TD[7]) //?????
    {

		
		buffer = GetPlayerSelectSkin(playerid);
		if(!(0 <= --buffer <= sizeof g_business_clothing_skins[] - 1))
		{
			buffer = sizeof g_business_clothing_skins[] - 1;
		}
		SetPlayerSelectClothingSkin(playerid, buffer);
		
		CallLocalFunction("BuySkinPTDUpdate", "i", playerid);
	}
	if(clickedid == clothingbuttons_TD[12]) //???????
    {
        buffer = GetPlayerSelectSkin(playerid);
		if(buffer != -1)
		{
			Dialog
			(
				playerid, DIALOG_BIZ_CLOTHING_BUY, DIALOG_STYLE_MSGBOX,
				"{FFCD00}??????? ??????",
				"{FFFFFF}?? ????????????? ?????? ?????????? ???? ????? ???????",
				"??", "???"
			);
		}
	}
	if(clickedid == clothingbuttons_TD[11]) //?????
    {
        buffer = GetPlayerSelectSkin(playerid);
		if(buffer != -1)
		{
            ExitPlayerClothingShopPanel(playerid);
		}
	}
    if(clickedid == business_menu_TD[1])
    {
        if(businessid != -1)
		{
        	ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PARAMS);
        	
        	HideBusinessMenuTextDraws(playerid);
		}
		else
		    return Send(playerid, -1, "? ??? ???? ???????");
	}
	if(clickedid == business_menu_TD[2])
    {
        if(businessid != -1)
		{
        	ShowPlayerBusinessDialog(playerid, BIZ_OPERATION_PROFIT_STATS);
        	
        	HideBusinessMenuTextDraws(playerid);
		}
		else
		    return Send(playerid, -1, "? ??? ???? ???????");
	}
	if(clickedid == business_menu_TD[3])
    {
        HideBusinessMenuTextDraws(playerid);
	}
	if(clickedid == Text:INVALID_TEXT_DRAW)
	{
		if(GetPlayerPinCodeState(playerid) != PIN_CODE_STATE_NONE)
		{
			HidePlayerPinCodePTD(playerid);
			if(!IsPlayerLogged(playerid))
			{
				Kick:(playerid);
			}
		}
		switch(GetPlayerData(playerid, P_USE_SELECT_PANEL))
		{
			case SELECT_PANEL_TYPE_CLOTHING:
			{
				ExitPlayerClothingShopPanel(playerid);
			}
			case SELECT_PANEL_TYPE_REG_SKIN:
			{
				if(!IsPlayerLogged(playerid))
				{
					if(GetPlayerData(playerid, P_ACCOUNT_STATE) == ACCOUNT_STATE_REG_SKIN)
					{
						SelectTextDraw(playerid, 0x009900FF);
						
						SetPlayerData(playerid, P_OCCUPIED_BED, -1);
					}
				}
			}
			case SELECT_PANEL_TYPE_CAR_MARKET:
			{
				SelectTextDraw(playerid, 0x00FF00FF);
			}
		}
	}
	if(select_TD[0] <= clickedid <= select_TD[3])
	{
		new use_type = GetPlayerData(playerid, P_USE_SELECT_PANEL);
		if(use_type != SELECT_PANEL_TYPE_NONE)
		{
			buffer = 0;
			new index = _:(clickedid - select_TD[0]);


			switch(index)
			{
				case 2: // ???????
				{
					switch(use_type)
					{
						case SELECT_PANEL_TYPE_CLOTHING:
						{
							buffer = GetPlayerSelectSkin(playerid);
							if(buffer != -1)
							{
								Dialog
								(
									playerid, DIALOG_BIZ_CLOTHING_BUY, DIALOG_STYLE_MSGBOX,
									"{FFCD00}??????? ??????",
									"{FFFFFF}?? ????????????? ?????? ?????????? ???? ????? ???????",
									"??", "???"
								);
							}
						}
						case SELECT_PANEL_TYPE_REG_SKIN:
						{
							if(!IsPlayerLogged(playerid))
							{
								if(GetPlayerData(playerid, P_ACCOUNT_STATE) == ACCOUNT_STATE_REG_SKIN)
								{
									new sex = GetPlayerSex(playerid);

									buffer = GetPlayerSelectSkin(playerid);

									if(buffer != -1)
									{
										SetPlayerData(playerid, P_SKIN, reg_skin_data[sex][buffer]);

										new query[90];
										mysql_format(mysql, query, sizeof query, "UPDATE accounts SET skin=%d,last_login=%d WHERE id=%d LIMIT 1", GetPlayerSkinEx(playerid), gettime(), GetPlayerAccountID(playerid));
										mysql_query(mysql, query, false);

										if(!mysql_errno())
										{
										    new bonus_money = bonuscash;//????? ??? ???????????
										    new bonus_donate = bonusdon;
										    new bonus_lvl = bonuslvl;
										    
											SetPlayerData(playerid, P_MONEY, 30000000);
											UpdatePlayerDatabaseInt(playerid, "money", 30000000);

											SetPlayerData(playerid, P_SELECT_SKIN, -1);

											SetPlayerData(playerid, P_DRIVING_LIC, 1);
											UpdatePlayerDatabaseInt(playerid, "driving_lic", 1);

											if(licoresh == 1)
											{
											    SetPlayerData(playerid, P_DRIVING_LIC, 3);
												UpdatePlayerDatabaseInt(playerid, "driving_lic", 3);
											}

											SetPlayerData(playerid, P_DONATE_MONEY, bonus_donate);
											UpdatePlayerDatabaseInt(playerid, "donate_current", bonus_donate);

											SetPlayerData(playerid, P_LEVEL, 5);
											UpdatePlayerDatabaseInt(playerid, "level", 5);

											HidePlayerSelectPanel(playerid);
											HidePlayerSelectPanelPrice(playerid);
											
											SetPlayerSpawnInit(playerid);
											SpawnPlayer(playerid);

										    // -- ???? ????????????ù ??? ????
										    // -- RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_FOREARM);
											SetPlayerInit(playerid);


											//SendClientMessage(playerid, 0xff8c00FF, "????? ?????????? ?? ??? ??????! ??????? ??????? ? /mm > ??ù?? ? ??????????????");
											//SendClientMessage(playerid, 0xff8c00FF, "{006600}| {FFFFFF}????? ?????????? ?? {990000}TEST SERVER {111111}RolePlay!");

											return 1;
										}
										else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 01)");
									}
								}
							}
						}
						case SELECT_PANEL_TYPE_CAR_MARKET:
						{
							if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;
							
							ShowBuyCarFamilyAndOwnable(playerid);

						}
					}
				}
				case 1: // ??????
				{
					switch(use_type)
					{
						case SELECT_PANEL_TYPE_CLOTHING:
						{
							buffer = GetPlayerSelectSkin(playerid);
							if(!(0 <= ++buffer <= sizeof g_business_clothing_skins[] - 1))
							{
								buffer = 0;
							}
							SetPlayerSelectClothingSkin(playerid, buffer);
						}
						case SELECT_PANEL_TYPE_REG_SKIN:
						{
							if(!IsPlayerLogged(playerid))
							{
								if(GetPlayerData(playerid, P_ACCOUNT_STATE) == ACCOUNT_STATE_REG_SKIN)
								{
									new sex = GetPlayerSex(playerid);
									buffer = GetPlayerSelectSkin(playerid);

									if(!(0 <= ++buffer <= sizeof(reg_skin_data[])-1))
									{
										buffer = 0;
									}
									else if(!reg_skin_data[sex][buffer])
									{
										buffer = 0;
									}
									SetPlayerSelectSkin(playerid, buffer, reg_skin_data[sex][buffer]);
								}
							}
						}
						case SELECT_PANEL_TYPE_CAR_MARKET:
						{
							if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;
							CarMarketShowNextCar(playerid, '+');
						}
					}
				}
				case 0: // ?????
				{
					switch(use_type)
					{
						case SELECT_PANEL_TYPE_CLOTHING:
						{
							buffer = GetPlayerSelectSkin(playerid);
							if(!(0 <= --buffer <= sizeof g_business_clothing_skins[] - 1))
							{
								buffer = sizeof g_business_clothing_skins[] - 1;
							}
							SetPlayerSelectClothingSkin(playerid, buffer);
						}
						case SELECT_PANEL_TYPE_REG_SKIN:
						{
							if(!IsPlayerLogged(playerid))
							{
								if(GetPlayerData(playerid, P_ACCOUNT_STATE) == ACCOUNT_STATE_REG_SKIN)
								{
									new sex = GetPlayerSex(playerid);
									buffer = GetPlayerSelectSkin(playerid);

									if(!(0 <= --buffer <= sizeof(reg_skin_data[])-1))
									{
										buffer = sizeof(reg_skin_data[])-1;
										if(!sex)
											buffer -= 2;
									}
									SetPlayerSelectSkin(playerid, buffer, reg_skin_data[sex][buffer]);
								}
							}
						}
						case SELECT_PANEL_TYPE_CAR_MARKET:
						{
							if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;
							CarMarketShowNextCar(playerid, '-');
						}
					}
				}
				case 3: // ???????
				{
					switch(use_type)
					{
						case SELECT_PANEL_TYPE_CLOTHING:
						{
							ExitPlayerClothingShopPanel(playerid);
						}
						case SELECT_PANEL_TYPE_CAR_MARKET:
						{
							ExitPlayerBuyCarMarket(playerid);
						}
					}
				}
			}
		}
	}

    return 1;
}

public OnPlayerClickPlayerTextDraw(playerid, PlayerText:playertextid)
{
	if(playertextid == avtsln_PTD[playerid][4])
    {
    	if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;
		CarMarketShowNextCar(playerid, '-');
	}
	if(playertextid == avtsln_PTD[playerid][3])//OnPlayerClickTextDraw
    {
        if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;
		CarMarketShowNextCar(playerid, '+');
	}
	if(playertextid == avtsln_PTD[playerid][0])
    {
        if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;
	    ShowBuyCarFamilyAndOwnable(playerid);
	}
    if(playertextid == avtsln_PTD[playerid][1])
    {
        if(GetPlayerData(playerid, P_BUY_CAR) == INVALID_VEHICLE_ID) return 1;
        ExitPlayerBuyCarMarket(playerid);
	}
	if(pin_code_PTD[playerid][0] <= playertextid <= pin_code_PTD[playerid][9])
	{
		new pc_state = GetPlayerPinCodeState(playerid);
		new index = _:(playertextid - pin_code_PTD[playerid][0]);

		if(pc_state != PIN_CODE_STATE_NONE && 0 <= index <= 9)
		{
			new ch[2];
			valstr(ch, GetPlayerPinCodeValue(playerid, index));
			strcat(pin_code_input[playerid], ch);

			if(strlen(pin_code_input[playerid]) >= 4)
			{
				if(pc_state == PIN_CODE_STATE_CHECK)
				{
					HidePlayerPinCodePTD(playerid, false);
				}
				else HidePlayerPinCodePTD(playerid);

				switch(pc_state)
				{
					case PIN_CODE_STATE_SET,PIN_CODE_STATE_CHANGE:
					{
						new query[75];

						mysql_format(mysql, query, sizeof query, "UPDATE accounts SET setting_pin_code='%e' WHERE id=%d LIMIT 1", pin_code_input[playerid], GetPlayerAccountID(playerid));
						mysql_query(mysql, query, false);

						if(!mysql_errno())
						{
							format(g_player[playerid][P_SETTING_PIN], 5, "%s", pin_code_input[playerid]);

							mysql_format(mysql, query, sizeof query, "PIN-??? %s: {FFFF00}%s", pc_state == PIN_CODE_STATE_SET ? ("??????? ??????????") : ("??????? ??"), GetPlayerData(playerid, P_SETTING_PIN));

							SendClientMessage(playerid, 0x66CC00FF, query);
							SendClientMessage(playerid, 0x66CC00FF, "????????? ??? ???????? ??? ?????");

							ShowPlayerSecuritySettings(playerid);
						}
						else
						{
							SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 04)");
							ShowPlayerPinCodePTD(playerid, pc_state);
						}
					}
					case PIN_CODE_STATE_CHECK:
					{
						if(strcmp(pin_code_input[playerid], GetPlayerData(playerid, P_SETTING_PIN)) != 0)
						{
							SendClientMessage(playerid, 0xFF6600FF, "PIN-??? ?????? ???????");
							ShowPlayerSecuritySettings(playerid);
						}
						else ShowPlayerPinCodePTD(playerid, PIN_CODE_STATE_CHANGE);
					}
					case PIN_CODE_STATE_LOGIN_CHECK:
					{
						if(!IsPlayerLogged(playerid))
						{
							if(GetPlayerData(playerid, P_ACCOUNT_STATE) == ACCOUNT_STATE_LOGIN)
							{
								new step = GetPlayerData(playerid, P_ACCOUNT_STEP_STATE);
								new bool: wrong_pass = false;

								if
								(
									!strlen(GetPlayerData(playerid, P_SETTING_PIN))
									|| strcmp(GetPlayerData(playerid, P_SETTING_PIN), pin_code_input[playerid]) != 0
								)
								{
									wrong_pass = true;
									step --;
								}
								ShowPlayerLoginDialog(playerid, step + 1, wrong_pass);
							}
						}
					}
				}
				pin_code_input[playerid][0] = 0;
			}
		}
	}
	if(GetPlayerData(playerid, P_USE_SELECT_PANEL) == SELECT_PANEL_TYPE_CAR_MARKET)
	{
		if(playertextid == buy_car_PTD[playerid][2]) // ?????? ???????????ù ???? ????? 1/2
		{
			new type = buy_car_select_color_type[playerid];
			buy_car_select_color_type[playerid] = type ? 0 : 1;

			CallLocalFunction("BuyCarPTDUpdate", "i", playerid);
		}
		else if(playertextid == buy_car_PTD[playerid][3]) // ???? ?????
		{
		//	new type = buy_car_select_color_type[playerid];

			//if(-- buy_car_select_color[playerid][type] < 0)
			//	buy_car_select_color[playerid][type] = sizeof rgb_array - 1;

			CallLocalFunction("BuyCarPTDUpdate", "i", playerid);
		}
		else if(playertextid == buy_car_PTD[playerid][5]) // ???? ??????
		{
		//	new type = buy_car_select_color_type[playerid];

			//if(++ buy_car_select_color[playerid][type] > sizeof rgb_array - 1)
			//	buy_car_select_color[playerid][type] = 0;

			CallLocalFunction("BuyCarPTDUpdate", "i", playerid);
		}
	}
    return 1;
}

public OnPlayerEnterDynamicCP(playerid, checkpointid)
{
	for (new vehicleid = 0; vehicleid < MAX_VEHICLES; vehicleid++)
    {
        if (g_delivery_checkpoint[vehicleid] == checkpointid)
        {
            if (GetPlayerTeamEx(playerid) != TEAM_ARMY)
                return SendClientMessage(playerid, -1, "ù????? ??????? ????? ????????????????? ? ?????? ????????.");

            new Float:x, Float:y, Float:z;
            GetVehiclePos(vehicleid, x, y, z);

            g_delivery_load_pickup[vehicleid] = CreatePickup(
                2969, 23, x, y - 3.0, z, -1,
                PICKUP_ACTION_TYPE_ADELIVERY_LOAD, vehicleid);

            new label[128];
            format(label, sizeof(label),
                "{FFFF00}<<{FFFFFF}???????? ??????????{FFFF00}>>\n\n\
??????????{FFFF00}: ???????ù ?????\n\
????????? ù????? ? ???????????{FFFF00}: %d {FFFFFF}?? {FFFF00} 10",
                g_delivery_boxes[vehicleid]);

            g_delivery_label[vehicleid] = CreateDynamic3DTextLabel(label, 0xFFD700FF, x, y, z + 2.0, 20.0, -1);

            SendClientMessage(playerid, -1, "?? ??????? ?? ????? ????????. ???????? ù??? ?? ?????? ? ????????? ??? ? ??????.");

            DestroyDynamicCP(checkpointid);
            g_delivery_checkpoint[vehicleid] = -1;
            return 1;
        }
    }

    for (new vehicleid = 0; vehicleid < MAX_VEHICLES; vehicleid++)
    {
        if (g_delivery_checkpoint[vehicleid] == checkpointid)
        {
            if (GetPlayerTeamEx(playerid) != TEAM_ARMY)
                return SendClientMessage(playerid, -1, "ù????? ??????? ????? ?????????? ?????????.");

            new Float:x, Float:y, Float:z;
            GetVehiclePos(vehicleid, x, y, z);

            g_delivery_unload_pickup[vehicleid] = CreatePickup(
                2969, 23, x, y - 3.0, z, -1,
                PICKUP_ACTION_TYPE_ADELIVERY_UNLOAD, vehicleid);

            SendClientMessage(playerid, -1, "?? ??????? ?? ????? ?????????. ???????? ù???? ?? ?????? ? ???????? ?? ?? ?????.");

            DestroyDynamicCP(checkpointid);
            g_delivery_checkpoint[vehicleid] = -1;
            return 1;
        }
    }

	if (s_autorace_Main_CPID == checkpointid) {

		new
			AutoRaceType:ar_type = s_autorace_Server_Type;

		if (ar_type == t_AutoRaceNone) {
			SendClientMessage(playerid, 0xCECECEFF, "??????????ù ???????");
			return 1;
		}
		if (s_autorace_Server_Stage == s_AutoRaceNone) {
			SendClientMessage(playerid, 0xCECECEFF, "?? ???????? ?? ?????");
			return 1;
		}
		if (s_autorace_Server_Count[_:ar_type] >= s_autorace_Vehicle_Amount[_:ar_type]) {
			SendClientMessage(playerid, 0xCECECEFF, "??????? ????? ??????????");
			return 1;
		}
		if ((p_autorace_Player_Type[playerid] != t_AutoRaceNone)
			&& (p_autorace_Player_State[playerid] != AUTORACE_STATE_NONE)) {
			SendClientMessage(playerid, 0xCECECEFF, "?? ??? ???????????????? ?? ?????");
		} else {
			Dialog_Show::P_AUTORACE(playerid);
		}
		return 1;
	}

	//if(help_info_CP[0] <= checkpointid <= help_info_CP[sizeof help_info_CP - 1])
	if(checkpointid == markerhelp)
	{
		callcmd::help(playerid, "");
	}
	if(checkpointid == markerhelp1)
	{
		callcmd::help(playerid, "");
	}
	else if(checkpointid == driving_exam_CP)
	{
		Dialog
		(
			playerid, DIALOG_DRIVING_EXAM_INFO, DIALOG_STYLE_MSGBOX,
			"{FFCD00}??????? ?? ????????",
			"{FFFFFF}????????????!\n"\
			"?? ?????? ?????????? ? ????????? ù???? ??????.\n"\
			"??????? ????? ?????ù?? ?? ????????????? ? ???????????? ?????\n"\
			"? ?????? ??? ????? ????? ???????? ?? ??????? ?? ?????? ???????????????? ??????,\n"\
			"? ? ???????? ????????? ?????????? ?????ù ?? ????? ???????? ?????????ù.\n\n"\
			"{CC9900}????? ?? ????? ????? 600 ?????? ? ? ?????? ??????? ?????? ?? ????? ??????????!\n"\
			"??????? ????? ?????? ??????????? ?????????? ????????? ??????",
			"??????", "??????"
		);
	}
	else if(factory_desk[0][FD_CHEK_ID] <= checkpointid <= factory_desk[sizeof(factory_desk)-1][FD_CHEK_ID])
	{
		new index = checkpointid - factory_desk[0][FD_CHEK_ID];
		SetPlayerFactoryDeskUse(playerid, index, true);
	}
	else if(checkpointid == GetBusinessInteriorInfo(BUSINESS_INTERIOR_CLUB, BT_BUY_CHECK_ID))
	{
		new businessid = GetPlayerInBiz(playerid);
		if(businessid != -1)
		{
			new type = GetBusinessData(businessid, B_TYPE);
			if(type == BUSINESS_TYPE_CLUB)
			{
				if(IsPlayerInJob(playerid) || GetPlayerTempJob(playerid) != TEMP_JOB_NONE)
					return SendClientMessage(playerid, 0xCECECEFF, "????? ?????????? ???? ?????????? ????????? ??????? ????");

				Dialog
				(
					playerid, DIALOG_BIZ_CLUB, DIALOG_STYLE_LIST,
					GetBusinessData(businessid, B_NAME),
					"1. ???????\t\t{00CC00}60 ???\n"\
					"2. ????\t\t\t{00CC00}100 ???\n"\
					"3. ????\t\t\t{00CC00}200 ???\n"\
					"4. ??????????\t\t{00CC00}270 ???\n"\
					"5. ?????\t\t{00CC00}300 ???\n"\
					"6. ????ù?\t\t{00CC00}450 ???\n"\
					"7. ?????\t\t{00CC00}630 ???\n"\
					"8. ??????\t\t{00CC00}750 ???\n"\
					"{CC9900}9. ???????\t\t{00CC00}50 ???\n"\
					"{CC9900}10. ??????\t\t{00CC00}80 ???",
					"??????", "??????"
				);
			}
		}
	}
	else if(checkpointid == GetBusinessInteriorInfo(BUSINESS_INTERIOR_CASINO, BT_BUY_CHECK_ID))
	{
		new businessid = GetPlayerInBiz(playerid);
		if(businessid != -1)
		{
			new type = GetBusinessData(businessid, B_TYPE);
			if(type == BUSINESS_TYPE_CASINO)
			{
				if(IsPlayerInJob(playerid) || GetPlayerTempJob(playerid) != TEMP_JOB_NONE)
					return SendClientMessage(playerid, 0xCECECEFF, "????? ?????????? ???? ?????????? ????????? ??????? ????");

				Dialog
				(
					playerid, DIALOG_BIZ_CLUB, DIALOG_STYLE_LIST,
					GetBusinessData(businessid, B_NAME),
					"1. ???????\t\t{00CC00}60 ???\n"\
					"2. ????\t\t\t{00CC00}100 ???\n"\
					"3. ????\t\t\t{00CC00}200 ???\n"\
					"4. ??????????\t\t{00CC00}270 ???\n"\
					"5. ?????\t\t{00CC00}300 ???\n"\
					"6. ????ù?\t\t{00CC00}450 ???\n"\
					"7. ?????\t\t{00CC00}630 ???\n"\
					"8. ??????\t\t{00CC00}750 ???\n"\
					"{CC9900}9. ???????\t\t{00CC00}50 ???\n"\
					"{CC9900}10. ??????\t\t{00CC00}80 ???",
					"??????", "??????"
				);
			}
		}
	}
	else if(checkpointid == GetBusinessInteriorInfo(BUSINESS_INTERIOR_REALTOR_BIZ, BT_BUY_CHECK_ID))
	{
		new businessid = GetPlayerInBiz(playerid);
		if(businessid != -1)
		{
			new type = GetBusinessData(businessid, B_TYPE);
			if(type == BUSINESS_TYPE_REALTOR_BIZ)
			{
				Dialog
				(
					playerid, DIALOG_BIZ_REALTOR_BIZ_LIST, DIALOG_STYLE_LIST,
					"{66FF99}?????? ????????? ????????",
					g_business_realtor_list,
					"???? 70?", "???????"
				);
			}
		}
	}
	else if(checkpointid == GetBusinessInteriorInfo(BUSINESS_INTERIOR_REALTOR_HOME, BT_BUY_CHECK_ID))
	{
		new businessid = GetPlayerInBiz(playerid);
		if(businessid != -1)
		{
			new type = GetBusinessData(businessid, B_TYPE);
			if(type == BUSINESS_TYPE_REALTOR_HOME)
			{
				ShowPlayerRealtorHomeDialog(playerid);
			}
		}
	}
	else if(checkpointid == GetBusinessInteriorInfo(BUSINESS_INTERIOR_HOTEL, BT_BUY_CHECK_ID))
	{
		ShowPlayerHotelDialog(playerid);
	}
	else if(g_hotel_lift_CP[0] <= checkpointid <= g_hotel_lift_CP[1])
	{
		new hotel_id = GetPlayerInHotelID(playerid);
		if(hotel_id != -1)
		{
			new floor_id = GetPlayerData(playerid, P_IN_HOTEL_FLOOR);
			ShowPlayerHotelFloorsLift(playerid, hotel_id, floor_id);
		}
	}
	return 1;
}

public: CreateFactoryProd(playerid)
{
	if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY)
	{
		if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_FACTORY_CREATED)
		{
		//	RemovePlayerAttachedObjectEx(playerid, A_OBJECT_SLOT_HAND, A_OBJECT_SLOT_HAND + 1);

			new skill = GetPVarInt(playerid, "factory_skill");
			if(!(random(5) + skill == 1))
			{
				if(random(6) == 1)
				{
					new fmt_str[80];

					SetPVarInt(playerid, "factory_skill", skill + 1);

					format(fmt_str, sizeof fmt_str, "??????? ????? ????????. ù????? ???? ??????? ?????????? ??????? 1 ?? %d", skill + 5);
					SendClientMessage(playerid, 0x66CC00FF, fmt_str);
				}

				ApplyAnimationEx(playerid, "CARRY", "crry_prtial", 4.1, 1, 1, 1, 1, 1, 0, USE_ANIM_TYPE_NONE - 1);
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CARRY);

				SetPlayerChatBubble(playerid, "+ 1 ???????", 0x66CC00FF, 10.0, 1500);

			//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_FOREARM, 1279, A_OBJECT_BONE_LEFT_FOREARM, 0.4, -0.09, -0.2, 85.0, 0.0, 90.0, 1.0, 1.0, 1.0, 0);
				GameTextForPlayer(playerid, "~g~~h~SUCCESS", 4000, 1);

				SetPlayerTempJobState(playerid, TEMP_JOB_STATE_FACTORY_PUT_PROD);
				SetPlayerTempJobCheckAnim(playerid, true);
			}
			else FactoryPlayerDrop(playerid);

			SetPlayerFactoryDeskUse(playerid, GetPlayerData(playerid, P_FACTORY_USE_DESK), false);
		}
	}
}

public OnPlayerLeaveDynamicCP(playerid, checkpointid)
{
	if(checkpointid == army_ammo_CP)
		DeletePVar(playerid, "player_in_ammo_cp");
	return 1;
}

forward Funchion3(playerid);
public Funchion3(playerid)
{
new fmt_text[75];
new itog;
new withdraw_money[32];
if(shetochkovferma<200)
{
shetochkovferma++;
 itog = shetochkovferma+1;// 1 ?????? ???????? ?? ????? ????????? ?????
  //      new withdraw_money[8];
//  format(fmt_text, sizeof fmt_text, "???? %d ", itog);
       format(withdraw_money,32,"~r~%d",itog);
GameTextForPlayer(playerid, withdraw_money, 2000, 6);
                timerochkov = SetTimer("Funchion3", 15000, true);
                return 1;
        }
   else      if(shetochkovferma==200)
        {
        itog=0;
        shetochkovferma=0;
        SendMessageToTeam(GetPlayerData(playerid, P_FAMILY), "????? ?? ???? ?????? ???????????", 0x33CC66FF);
        KillTimer(timerochkov);
        return 1;
}	
KillTimer(timerochkov);
return 1;
        }

public OnPlayerEnterDynamicArea(playerid, areaid)
{
	if (areaid == karcerzone1)
{
    if (GetPlayerTeamEx(playerid) == TEAM_FSIN && GetPVarInt(playerid, "cufferid") == 0)
    {
        ShowNotificationNew(playerid, 5, 5, notifcmdkarcerfsin, 0, "???????? ?????? ?1", "?????");
    }
    return 1;
}
if (areaid == karcerzone2)
{
    if (GetPlayerTeamEx(playerid) == TEAM_FSIN && GetPVarInt(playerid, "cufferid") == 0)
    {
        ShowNotificationNew(playerid, 5, 5, notifcmdkarcerfsin, 0, "???????? ?????? ?2", "?????");
    }
    return 1;
}
if (areaid == karcerzone3)
{
    if (GetPlayerTeamEx(playerid) == TEAM_FSIN && GetPVarInt(playerid, "cufferid") == 0)
    {
        ShowNotificationNew(playerid, 5, 5, notifcmdkarcerfsin, 0, "???????? ?????? ?3", "?????");
    }
    return 1;
}
    if (areaid == kamerazone1)
    {
        ShowNotificationNew(playerid, 5, 5, notifcmdkamerzek, 0, "???????ù ?????? ?1", "?????");
    }
     if (areaid == kamerazone2)
    {
        ShowNotificationNew(playerid, 5, 5, notifcmdkamerzek, 0, "???????ù ?????? ?2", "?????");
    }
    if (areaid == kamerazone3)
    {
        ShowNotificationNew(playerid, 5, 5, notifcmdkamerzek, 0, "???????ù ?????? ?3", "?????");
    }
    if (areaid == kamerazone4)
    {
        ShowNotificationNew(playerid, 5, 5, notifcmdkamerzek, 0, "???????ù ?????? ?4", "?????");
    }
    if (areaid == kamerazone5)
    {
        ShowNotificationNew(playerid, 5, 5, notifcmdkamerzek, 0, "???????ù ?????? ?5", "?????");
    }
if(areaid == svidaniesphere)
{
    if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return 1;
    if(!g_doorOpened[14]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == door6)
{
    if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI))
        return 1;
    if(!g_doorOpened[6]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == door5)
{
    if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI))
        return 1;
    if(!g_doorOpened[5]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == door4)
{
    if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI))
        return 1;
    if(!g_doorOpened[4]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == door3)
{
    if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI))
        return 1;
    if(!g_doorOpened[3]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == door2)
{
    if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI))
        return 1;
    if(!g_doorOpened[2]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == door1)
{
    if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI))
        return 1;
    if(!g_doorOpened[1]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == door)
{
    if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI))
        return 1;
    if(!g_doorOpened[0]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == voenka)
{
    if(GetPlayerTeamEx(playerid) != TEAM_ARMY)
        return 1;
    if(!g_doorOpened[7]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == bolk1)
{
    if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL)
        return 1;
    if(!g_doorOpened[8]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == bolk2)
{
    if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL)
        return 1;
    if(!g_doorOpened[9]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "??????????ù ?????", "???????");
}
if(areaid == spherekalitka1)
{
    if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return 1;
    if(!g_doorOpened[10]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "???????? ????? (1)", "???????");
}
if(areaid == spherekalitka2)
{
    if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return 1;
    if(!g_doorOpened[11]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "???????? ????? (2)", "???????");
}
if(areaid == spherekalitka3)
{
    if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return 1;
    if(!g_doorOpened[12]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "???????? ????? (3)", "???????");
}
if(areaid == spherekalitka4)
{
    if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return 1;
    if(!g_doorOpened[13]) ShowNotificationNew(playerid, 5, 5, notifcmdopendoor, 0, "???????? ????? (4)", "???????");
}
if(areaid == sphereyahik1)
    {
        if (GetPlayerTeamEx(playerid) != TEAM_ARMY)
            return SendClientMessage(playerid, COLOR_GREY, "ù????? ??????? ????? ????? ù???? ?? ??????.");

        if(GetPVarInt(playerid, "box_in_hard_delivery"))
            return SendClientMessage(playerid, COLOR_GREY, "?? ??? ??ù?? ù???.");

        SetPlayerAttachedObject(playerid, 2, 2969, 1, 0.121241, 0.433916, -0.038068,
	   359.338867, 91.670600, 179.788787, 1.0, 1.0, 1.0);

		SetPVarInt(playerid, "box_in_hard_delivery", 1);

		ApplyAnimation(playerid, "CARRY", "liftup", 4.1, 0, 1, 1, 1, 0, 1);

		SendClientMessage(playerid, -1, "?? ??ù?? ù???, ?????? ???????? ??? ? ??????.");
		
		new fmt_msg[144];
             
              format(fmt_msg, sizeof fmt_msg, " %s %s ??ù? ù??? ? ??????????? ?? ?????? ?. ?????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

		SetTimerEx("StartCarryAnimation", 1000, false, "i", playerid);
		return 1;
    }
   
   if (areaid == sphereyahik2)
{
    if (GetPlayerTeamEx(playerid) != TEAM_ARMY)
        return SendClientMessage(playerid, COLOR_GREY, "ù????? ??????? ????? ????? ù???? ?? ??????.");
       
    if(!IsWorkDayStarted(playerid)) return 1;

    if (GetPVarInt(playerid, "box_in_hard_delivery"))
        return SendClientMessage(playerid, COLOR_GREY, "?? ??? ??ù?? ù???.");

    if (g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] < 500)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ???????????? ??????????.");

    g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] -= 500;
	if (g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] > 100000) g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS] = 100000;

	UpdateArmoryDatabaseInt(ARMORY_TYPE_ARMOR, "materials", g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS]);
    UpdateArmoryLabel(ARMORY_TYPE_ARMOR);

    SetPlayerAttachedObject(playerid, 2, 2969, 1, 0.121241, 0.433916, -0.038068,
        359.338867, 91.670600, 179.788787, 1.0, 1.0, 1.0);

    SetPVarInt(playerid, "box_in_hard_delivery", 1);
    SetPVarInt(playerid, "box_in_hard_delivery_frac", 1);
    ApplyAnimation(playerid, "CARRY", "liftup", 4.1, 0, 1, 1, 1, 0, 1);

    SendClientMessage(playerid, -1, "?? ??ù?? ù???, ?????? ???????? ??? ? ??????.");
   
   new fmt_msg[144];
             
              format(fmt_msg, sizeof fmt_msg, " %s %s ??ù? ù??? ? ??????????? ?? ?????? ??????? ?????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

    SetTimerEx("StartCarryAnimation", 1000, false, "i", playerid);
    return 1;
}
    
for (new i = 0; i < MAX_POSTS; i++) {
    if (areaid == GuardPostZoneBudka[i]) {
        if (GetPlayerTeamEx(playerid) != TEAM_ARMY) {
            SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ????????.");
            return 1;
        }

        if(!IsWorkDayStarted(playerid)) return 1;
        SetPVarInt(playerid, "CurrentPostID", i); // ??????ù?? ID ?????
        ShowNotificationNew(playerid, 4, 5, notifcmdpost, 0, "?????????????? ? ????????? ??????", "?????????????????");
        return 1;
    }
}

for (new veh = 0; veh < MAX_VEHICLES; veh++)
    {
        if (areaid == g_delivery_unload_area[veh])
        {
            if (!IsValidVehicle(veh)) return 1;
            if (!g_delivery_vehicle[veh]) return 1;
           
           if(!IsWorkDayStarted(playerid)) return 1;

            if (GetPVarInt(playerid, "box_in_hard_delivery"))
                return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ???? ù??? ? ???????????.");

            if (g_delivery_boxes[veh] <= 0)
                return SendClientMessage(playerid, COLOR_GREY, "? ???? ?????? ??? ù????? ??ù ?????????.");

            SetPVarInt(playerid, "box_in_hard_delivery", 1);
            SetPVarInt(playerid, "box_in_hard_delivery_frac", g_delivery_target[veh]);

            g_delivery_boxes[veh]--;
            UpdateDeliveryLabel(veh, g_delivery_target[veh]);

            SetPlayerAttachedObject(playerid, 2, 2969, 1,
                0.121241, 0.433916, -0.038068,
                359.338867, 91.670600, 179.788787,
                1.0, 1.0, 1.0
            );

            ApplyAnimation(playerid, "CARRY", "liftup", 4.1, 0, 1, 1, 1, 0, 1);
            SetTimerEx("StartCarryAnimation", 1000, false, "i", playerid);

            SendClientMessage(playerid, COLOR_GREY, "?? ??ù?? ù??? ? ???????????, ???????? ??? ?? ?????.");

            if (g_delivery_boxes[veh] <= 0)
			{
			    DestroyDynamicPickup(g_delivery_unload_pickup[veh]);
			    DestroyDynamicArea(g_delivery_unload_area[veh]);

			    g_delivery_unload_pickup[veh] = -1;
 			  g_delivery_unload_area[veh] = -1;

 			  DestroyVehicleLabel(veh);
 			  g_delivery_vehicle[veh] = false;
  			 g_delivery_target[veh] = -1;
 			  g_delivery_boxes[veh] = 0;
			   g_delivery_target_name[veh][0] = EOS;

 			  SendClientMessage(playerid, COLOR_GREY, "?? ?????????? ??? ù????, ???????? ????????.");
			}

            return 1;
        }
    }
for (new veh = 0; veh < MAX_VEHICLES; veh++)
    {
        if (areaid == g_delivery_load_area[veh])
        {
            if (!IsValidVehicle(veh)) return 1;
            if (!g_delivery_vehicle[veh]) return 1;

            if (!GetPVarInt(playerid, "box_in_hard_delivery"))
                return SendClientMessage(playerid, COLOR_GREY, "? ??? ???? ù???? ? ??????????? ? ?????, ???????? ??? ?? ??????.");

            if (g_delivery_boxes[veh] >= MAX_DELIVERY_BOXES)
                return SendClientMessage(playerid, COLOR_GREY, "?????????? ????????? ????????.");

            RemovePlayerAttachedObject(playerid, 2);
            DeletePVar(playerid, "box_in_hard_delivery");
            DeletePVar(playerid, "box_in_hard_delivery_frac");

            ApplyAnimation(playerid, "CARRY", "putdwn", 4.1, 0, 1, 1, 1, 0, 0);
            SetTimerEx("StopPlayerAnimation", 1000, false, "i", playerid);

            g_delivery_boxes[veh]++;
            UpdateDeliveryLabel(veh, g_delivery_target[veh]);

            SendClientMessage(playerid, COLOR_GREY, "?? ????????? ù??? ? ??????????? ? ????, ???????ù????? ?? ?????.");

            if (g_delivery_boxes[veh] >= MAX_DELIVERY_BOXES)
            {
                DestroyDynamicPickup(g_delivery_load_pickup[veh]);
                DestroyDynamicArea(g_delivery_load_area[veh]);

                g_delivery_load_pickup[veh] = -1;
                g_delivery_load_area[veh] = -1;

                new msg[128];
                format(msg, sizeof(msg), "???????? ????????. ???????ù????? ? ???????????: %s {FFFFFF}??ù ?????????.", g_delivery_target_name[veh]);
                SendClientMessage(playerid, -1, msg);
                SendClientMessage(playerid, -1, "??????????? {FFFF00}/unloadboxes {FFFFFF}??ù ?????? ?????????");
            }
        }
    }
if(areaid == army_kpp_cp)
{
	new team = GetPlayerTeamEx(playerid);
	new rank = GetPlayerJob(playerid);

	if(!IsWorkDayStarted(playerid)) return 1;

	if((team == TEAM_ARMY && rank >= 3) || (team >= 9 && team <= 11 && rank >= 6))
	{
		ShowNotificationNew(playerid, 4, 5, notifycmdarmykpp, 0, "?????????????? ? ???", " ");
	}
	else
	{
		SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ????????.");
	}
}
if(areaid == koika1)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika2)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika3)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika4)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika5)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika6)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika7)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika8)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika9)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika10)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika11)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika12)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika13)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika14)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika15)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika16)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika17)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika18)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika19)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika20)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika21)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika22)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika23)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika24)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika25)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika26)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika27)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika28)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika29)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}

    if(areaid == koika30)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika31)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == koika32)
	{
		Dialog
				(
					playerid, DIALOG_MED_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ???ù?? ??? ??????",
					"?????", "??????"
				);
	}
	
	if(areaid == helpspawn)
	{
	Dialog
				(
					playerid, DIALOG_HELP_SPAWN_NOTIF, DIALOG_STYLE_MSGBOX,
					"{DC143C}"SERVER_NAME"{ffffff} | ?????????????",
					"?? ??????? ??? ?????? ??????????????????",
					"?????", "??????"
				);
	}

if(areaid == zona1)
{
if(GetPlayerData(playerid, P_FAMILY) == 0) return 1;
SetPVarInt(playerid, "FermaGarelpva",1);
SetPVarInt(playerid, "FermaYbit",1);
//g_capturef[F_STATUS] = true;
timerochkov = SetTimer("FERMAGAREL", 2000, true);
CreateZakazZakaz(playerid);
PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]); 
for(new i=0; i <= 5; i++)
     {
    TextDrawShowForPlayer(playerid,zakaz3_TD[i]);
    // SelectTextDraw(playerid,0xFFFFFFFF);
   }
   new fmt_msg[120];
   format(fmt_msg, sizeof fmt_msg, "????? %s ????? ?? ?????????? ???????ù",GetPlayerNameEx(playerid), GetPlayerData(playerid, P_OHFAM));

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, -1, fmt_msg);
	}
	format(fmt_msg, sizeof fmt_msg, "?? ????? ?? ?????????? ???????ù",GetPlayerData(playerid, P_OHFAM));	
SendClientMessage(playerid,-1,fmt_msg);
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;

    // ????????? ? ??????????? ????? ?????
    mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family WHERE id=%d LIMIT 1", fam_id);
  new  Cache: result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki");
        cache_delete(result);

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }

    // ????????? ? ??????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family ORDER BY ochki DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki");
        cache_delete(result);

        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text); 
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]); 
    }
    else
    {
        cache_delete(result);
    }


      }
if(areaid == zona2)
{
if(GetPlayerData(playerid, P_FAMILY) == 0) return 1;
SetPVarInt(playerid, "Zavodpva",1);
SetPVarInt(playerid, "FermaYbit",1);
//g_capturef[F_STATUS] = true;
timerzavodp = SetTimer("ZAVODBUSAEVO", 2000, true);
CreateZakazZakaz(playerid);
PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]); 
for(new i=0; i <= 5; i++)
     {
    TextDrawShowForPlayer(playerid,zakaz3_TD[i]);
    // SelectTextDraw(playerid,0xFFFFFFFF);
   }
   new fmt_msg[120];
   format(fmt_msg, sizeof fmt_msg, "????? %s ????? ?? ?????????? ???????ù",GetPlayerNameEx(playerid), GetPlayerData(playerid, P_OHFAM));

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, -1, fmt_msg);
	}
	format(fmt_msg, sizeof fmt_msg, "?? ????? ?? ?????????? ???????ù",GetPlayerData(playerid, P_OHFAM));	
SendClientMessage(playerid,-1,fmt_msg);
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;

    // ????????? ? ??????????? ????? ?????
    mysql_format(mysql, query, sizeof query, "SELECT ochki1 FROM family WHERE id=%d LIMIT 1", fam_id);
  new  Cache: result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki1");
        cache_delete(result);

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }

    // ????????? ? ??????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki1 FROM family ORDER BY ochki1 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki1");
        cache_delete(result);

        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text); 
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]); 
    }
    else
    {
        cache_delete(result);
    }


      }
      if(areaid == zona3)
{
if(GetPlayerData(playerid, P_FAMILY) == 0) return 1;
SetPVarInt(playerid, "Arzpva",1);
//SetPVarInt(playerid, "FermaYbit",1);
//g_capturef[F_STATUS] = true;
timerarzl = SetTimer("ARZVISHKA", 2000, true);
CreateZakazZakaz(playerid);
PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]); 
for(new i=0; i <= 5; i++)
     {
    TextDrawShowForPlayer(playerid,zakaz3_TD[i]);
    // SelectTextDraw(playerid,0xFFFFFFFF);
   }
   new fmt_msg[120];
   format(fmt_msg, sizeof fmt_msg, "????? %s ????? ?? ?????????? ???????ù",GetPlayerNameEx(playerid), GetPlayerData(playerid, P_OHFAM));

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, -1, fmt_msg);
	}
	format(fmt_msg, sizeof fmt_msg, "?? ????? ?? ?????????? ???????ù",GetPlayerData(playerid, P_OHFAM));	
SendClientMessage(playerid,-1,fmt_msg);
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;

    // ????????? ? ??????????? ????? ?????
    mysql_format(mysql, query, sizeof query, "SELECT ochki1 FROM family WHERE id=%d LIMIT 1", fam_id);
  new  Cache: result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki1");
        cache_delete(result);

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }

    // ????????? ? ??????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki1 FROM family ORDER BY ochki1 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki1");
        cache_delete(result);

        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text); 
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]); 
    }
    else
    {
        cache_delete(result);
    }


      }
      if(areaid == zona5)
{
if(GetPlayerData(playerid, P_FAMILY) == 0) return 1;
SetPVarInt(playerid, "Karakpva",1);
//SetPVarInt(playerid, "FermaYbit",1);
//g_capturef[F_STATUS] = true;
timerkarr = SetTimer("KARAKVISHKA", 2000, true);
CreateZakazZakaz(playerid);
PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]); 
for(new i=0; i <= 5; i++)
     {
    TextDrawShowForPlayer(playerid,zakaz3_TD[i]);
    // SelectTextDraw(playerid,0xFFFFFFFF);
   }
   new fmt_msg[120];
   format(fmt_msg, sizeof fmt_msg, "????? %s ????? ?? ?????????? ???????ù",GetPlayerNameEx(playerid), GetPlayerData(playerid, P_OHFAM));

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, -1, fmt_msg);
	}
	format(fmt_msg, sizeof fmt_msg, "?? ????? ?? ?????????? ???????ù",GetPlayerData(playerid, P_OHFAM));	
SendClientMessage(playerid,-1,fmt_msg);
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;

    // ????????? ? ??????????? ????? ?????
    mysql_format(mysql, query, sizeof query, "SELECT ochki3 FROM family WHERE id=%d LIMIT 1", fam_id);
  new  Cache: result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki3");
        cache_delete(result);

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }

    // ????????? ? ??????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki3 FROM family ORDER BY ochki3 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki3");
        cache_delete(result);

        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text); 
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]); 
    }
    else
    {
        cache_delete(result);
    }


      }
if(areaid == zona4)
{
if(GetPlayerData(playerid, P_FAMILY) == 0) return 1;
SetPVarInt(playerid, "Garelpva",1);
//SetPVarInt(playerid, "FermaYbit",1);
//g_capturef[F_STATUS] = true;
timerbuszl = SetTimer("GARELVISHKA", 2000, true);
CreateZakazZakaz(playerid);
PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]); 
for(new i=0; i <= 5; i++)
     {
    TextDrawShowForPlayer(playerid,zakaz3_TD[i]);
    // SelectTextDraw(playerid,0xFFFFFFFF);
   }
   new fmt_msg[120];
   format(fmt_msg, sizeof fmt_msg, "????? %s ????? ?? ?????????? ???????ù",GetPlayerNameEx(playerid), GetPlayerData(playerid, P_OHFAM));

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, -1, fmt_msg);
	}
	format(fmt_msg, sizeof fmt_msg, "?? ????? ?? ?????????? ???????ù",GetPlayerData(playerid, P_OHFAM));	
SendClientMessage(playerid,-1,fmt_msg);
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;

    // ????????? ? ??????????? ????? ?????
    mysql_format(mysql, query, sizeof query, "SELECT ochki4 FROM family WHERE id=%d LIMIT 1", fam_id);
  new  Cache: result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki4");
        cache_delete(result);

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }

    // ????????? ? ??????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki4 FROM family ORDER BY ochki4 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki4");
        cache_delete(result);

        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text); 
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]); 
    }
    else
    {
        cache_delete(result);
    }


      }
if(areaid == vodolootsphere[0][0])
	{
	    if(vodolazrabota[playerid] == true)
	    {
	    	ShowNotificationDefault(playerid, 4, 5, 4, 1, "??????????????: /vodolootyashik >>");
		}
		else return 1;
	}
    if(areaid == vodolazactor)
	{
		ShowNotificationDefault(playerid, 4, 5, 4, 1, "??????????????: /vodoact >>");
	}
	if(areaid == mysactor)
	{
		ShowNotificationDefault(playerid, 4, 5, 4, 1, "??????????????: /dvornik >>");
	}
	if(areaid == kladactor)
	{
		ShowNotificationDefault(playerid, 4, 5, 4, 1, "??????????????: /klado >>");
	}
	
    foreach(Player, i)
	{
	    if(GetPVarType(i, "BBArea"))
	    {
	        if(areaid == GetPVarInt(i, "BBArea"))
	        {
	            new station[256];
	            GetPVarString(i, "BBStation", station, sizeof(station));
	            if(!isnull(station))
				{
					PlayStream(playerid, station, GetPVarFloat(i, "BBX"), GetPVarFloat(i, "BBY"), GetPVarFloat(i, "BBZ"), 30.0, 1);
				 	SendClientMessage(playerid, -1, "?? ????? ? ???? ????????");
	            }
				return 1;
	        }
	    }
	}
	if (areaid >= g_green_zones[0][GZ_AREA] && areaid <= g_green_zones[sizeof(g_green_zones) - 1][GZ_AREA])
	{
		new green_zone_id = areaid - g_green_zones[0][GZ_AREA];

		ShowPlayerGreenZoneText(playerid);

		SetPVarInt(playerid, "player_in_green_zone", green_zone_id + 1);
	}

/*if (areaid >= GetFuelStationData(0, FS_AREA) && areaid <= GetFuelStationData(g_fuel_station_loaded - 1, FS_AREA))
{
    SetPVarInt(playerid, "buy_fuel_count", 0);
    SetPVarInt(playerid, "buy_fuel_pay_j", 0);
    SetPVarInt(playerid, "buy_fuel_pay", 0);
} */

/*	else if(GetGangZoneData(0, GZ_AREA) <= areaid <= GetGangZoneData(g_gang_zones_loaded - 1, GZ_AREA))
	{
		if(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA)
		{
			//new gangzoneid = GetGangZoneData(areaid - GetGangZoneData(0, GZ_AREA), GZ_ZONE);
			//UpdateGangZone(gangzoneid);
			return 1;
		}
	}*/
	else if(areaid == factory_put_zone)
	{
		if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY)
		{
			if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_FACTORY_PUT_PROD)
			{
			//	new objectid;
				new items = GetPlayerJobLoadItems(playerid);
				new Float: x, Float: y, Float: z, Float: angle;

				SetPlayerTempJobCheckAnim(playerid, false);

				ApplyAnimationEx(playerid, "CARRY", "PUTDWN", 4.0, 0, 0, 0, 0, 0, 0, USE_ANIM_TYPE_NONE);
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);

				TogglePlayerFactoryCP(playerid, true);
				SetPlayerJobLoadItems(playerid, items + 1);

				AddPlayerData(playerid, P_JOB_WAGE, +, random(20)+40);
				SendClientMessage(playerid, 0xFFFF00FF, "??????? ????????? ?? ?????");

			//	RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_FOREARM);
				SetPlayerTempJobState(playerid, TEMP_JOB_STATE_FACTORY_TAKE_MET);

				GetPlayerPos(playerid, x, y, z);
				GetPlayerFacingAngle(playerid, angle);

//				objectid = CreateDynamicObject(1279, x, -200.81883, 1006.51978, 0.9, 0.0, angle);
//				MoveDynamicObject(objectid, 263.8, -200.81880, 1006.51978, 2.0, 0.9, 0.0, angle);

//				Streamer_SetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, OBJECT_TYPE_FACTORY);
			}
		}
	}

	return 1;
}



public OnPlayerLeaveDynamicArea(playerid, areaid)
{
for (new i = 0; i < MAX_POSTS; i++) {
    if (areaid == GuardPostZonePost[i]) {
        for (new j = 0; j < MAX_GUARDS; j++) {
            if (GuardPostGuards[i][j] == playerid) {
                AddToJournal(i, playerid, GuardPostGuardTime[i][j]);

                GuardPostGuards[i][j] = INVALID_PLAYER_ID;
                GuardPostGuardTime[i][j] = 0;

                UpdatePostLabel(i);

                new active = false;
                for (new k = 0; k < MAX_GUARDS; k++) {
                    if (GuardPostGuards[i][k] != INVALID_PLAYER_ID) {
                        active = true;
                        break;
                    }
                }

                if (!active && GuardPostTimerID[i] != -1) {
                    KillTimer(GuardPostTimerID[i]);
                    GuardPostTimerID[i] = -1;
                }

                SendClientMessage(playerid, COLOR_GREY, "?? ?????? ??????? ?????? ?? ?????, ??? ????? ???????? ???.");
                return 1;
            }
        }
    }
}
if(areaid == army_kpp_cp)
    {
        if(kpp_hack_timer != -1)
        {
            KillTimer(kpp_hack_timer);
            kpp_hack_timer = -1;
            DeletePVar(playerid, "KPPHackProgress");
            SendClientMessage(playerid, COLOR_GREY, "????? ???????. ?? ???????? ????.");
        }

        DeletePVar(playerid, "KPPHackDialogShown"); // ????? ?????? ????? ??ù????ù ??? ?????
    }
if(areaid == zona1)
{
    if(GetPVarInt(playerid, "Fermappbit") == 0)
    {
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        KillTimer(timerochkov);
        SetPVarInt(playerid, "FermaGarelpva", 0);

        new query[128];
        new fmt_text[128];
        new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
        new player_points = GetPlayerData(playerid, P_OHFAM);

        // ????????? ????? ?? ????? ? ????????? ?????? ?????
        AddFamilyData(fam_id, F_OCKIFARMA, -, player_points);

        format(fmt_text, sizeof fmt_text, "UPDATE family SET ochki=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_OCKIFARMA), fam_id);
        mysql_query(mysql, fmt_text, false);

        SetPlayerData(playerid, P_OHFAM, 0);
        UpdatePlayerDatabaseInt(playerid, "ocfam", GetPlayerData(playerid, P_OHFAM));

        // ?????????? ??????????ù ????? ?????
        mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family WHERE id=%d LIMIT 1", fam_id);
        new Cache: result = mysql_query(mysql, query, true);

        if (cache_num_rows(result))
        {
            new ochki = cache_get_field_content_int(0, "ochki");
            cache_delete(result);

            PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
            format(fmt_text, sizeof(fmt_text), "%d", ochki);
            PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
            PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
        }
        else
        {
            cache_delete(result);
        }

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);

        for(new i = 0; i <= 5; i++)
        {
            TextDrawHideForPlayer(playerid, zakaz3_TD[i]);
        }

        return 1;
    }
    else Send(playerid, -1, "????????");
}
if(areaid == zona2)
{
    if(GetPVarInt(playerid, "Fermappbit") == 0)
    {
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        KillTimer(timerochkov);
        SetPVarInt(playerid, "FermaGarelpva", 0);

        new query[128];
        new fmt_text[128];
        new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
        new player_points = GetPlayerData(playerid, P_OHFAM);

        // ????????? ????? ?? ????? ? ????????? ?????? ?????
        AddFamilyData(fam_id, F_OCKIFARMA, -, player_points);

        format(fmt_text, sizeof fmt_text, "UPDATE family SET ochki=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_OCKIFARMA), fam_id);
        mysql_query(mysql, fmt_text, false);

        SetPlayerData(playerid, P_OHFAM, 0);
        UpdatePlayerDatabaseInt(playerid, "ocfam", GetPlayerData(playerid, P_OHFAM));

        // ?????????? ??????????ù ????? ?????
        mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family WHERE id=%d LIMIT 1", fam_id);
        new Cache: result = mysql_query(mysql, query, true);

        if (cache_num_rows(result))
        {
            new ochki = cache_get_field_content_int(0, "ochki");
            cache_delete(result);

            PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
            format(fmt_text, sizeof(fmt_text), "%d", ochki);
            PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
            PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
        }
        else
        {
            cache_delete(result);
        }

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);

        for(new i = 0; i <= 5; i++)
        {
            TextDrawHideForPlayer(playerid, zakaz3_TD[i]);
        }

        return 1;
    }
    else Send(playerid, -1, "????????");
}
if(areaid == zona3)
{
    if(GetPVarInt(playerid, "Fermappbit") == 0)
    {
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        KillTimer(timerochkov);
        SetPVarInt(playerid, "FermaGarelpva", 0);

        new query[128];
        new fmt_text[128];
        new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
        new player_points = GetPlayerData(playerid, P_OHFAM);

        // ????????? ????? ?? ????? ? ????????? ?????? ?????
        AddFamilyData(fam_id, F_OCKIFARMA, -, player_points);

        format(fmt_text, sizeof fmt_text, "UPDATE family SET ochki=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_OCKIFARMA), fam_id);
        mysql_query(mysql, fmt_text, false);

        SetPlayerData(playerid, P_OHFAM, 0);
        UpdatePlayerDatabaseInt(playerid, "ocfam", GetPlayerData(playerid, P_OHFAM));

        // ?????????? ??????????ù ????? ?????
        mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family WHERE id=%d LIMIT 1", fam_id);
        new Cache: result = mysql_query(mysql, query, true);

        if (cache_num_rows(result))
        {
            new ochki = cache_get_field_content_int(0, "ochki");
            cache_delete(result);

            PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
            format(fmt_text, sizeof(fmt_text), "%d", ochki);
            PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
            PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
        }
        else
        {
            cache_delete(result);
        }

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);

        for(new i = 0; i <= 5; i++)
        {
            TextDrawHideForPlayer(playerid, zakaz3_TD[i]);
        }

        return 1;
    }
    else Send(playerid, -1, "????????");
}
if(areaid == zona5)
{
    if(GetPVarInt(playerid, "Fermappbit") == 0)
    {
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        KillTimer(timerochkov);
        SetPVarInt(playerid, "FermaGarelpva", 0);

        new query[128];
        new fmt_text[128];
        new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
        new player_points = GetPlayerData(playerid, P_OHFAM);

        // ????????? ????? ?? ????? ? ????????? ?????? ?????
        AddFamilyData(fam_id, F_OCKIFARMA, -, player_points);

        format(fmt_text, sizeof fmt_text, "UPDATE family SET ochki=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_OCKIFARMA), fam_id);
        mysql_query(mysql, fmt_text, false);

        SetPlayerData(playerid, P_OHFAM, 0);
        UpdatePlayerDatabaseInt(playerid, "ocfam", GetPlayerData(playerid, P_OHFAM));

        // ?????????? ??????????ù ????? ?????
        mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family WHERE id=%d LIMIT 1", fam_id);
        new Cache: result = mysql_query(mysql, query, true);

        if (cache_num_rows(result))
        {
            new ochki = cache_get_field_content_int(0, "ochki");
            cache_delete(result);

            PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
            format(fmt_text, sizeof(fmt_text), "%d", ochki);
            PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
            PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
        }
        else
        {
            cache_delete(result);
        }

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);

        for(new i = 0; i <= 5; i++)
        {
            TextDrawHideForPlayer(playerid, zakaz3_TD[i]);
        }

        return 1;
    }
    else Send(playerid, -1, "????????");
}

if(areaid == zona4)
{
    if(GetPVarInt(playerid, "Fermappbit") == 0)
    {
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        KillTimer(timerochkov);
        SetPVarInt(playerid, "FermaGarelpva", 0);

        new query[128];
        new fmt_text[128];
        new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
        new player_points = GetPlayerData(playerid, P_OHFAM);

        // ????????? ????? ?? ????? ? ????????? ?????? ?????
        AddFamilyData(fam_id, F_OCKIFARMA, -, player_points);

        format(fmt_text, sizeof fmt_text, "UPDATE family SET ochki=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_OCKIFARMA), fam_id);
        mysql_query(mysql, fmt_text, false);

        SetPlayerData(playerid, P_OHFAM, 0);
        UpdatePlayerDatabaseInt(playerid, "ocfam", GetPlayerData(playerid, P_OHFAM));

        // ?????????? ??????????ù ????? ?????
        mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family WHERE id=%d LIMIT 1", fam_id);
        new Cache: result = mysql_query(mysql, query, true);

        if (cache_num_rows(result))
        {
            new ochki = cache_get_field_content_int(0, "ochki");
            cache_delete(result);

            PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
            format(fmt_text, sizeof(fmt_text), "%d", ochki);
            PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
            PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
        }
        else
        {
            cache_delete(result);
        }

        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);

        for(new i = 0; i <= 5; i++)
        {
            TextDrawHideForPlayer(playerid, zakaz3_TD[i]);
        }

        return 1;
    }
    else Send(playerid, -1, "????????");
}

    foreach(Player, i)
	{
	    if(GetPVarType(i, "BBArea"))
	    {
	        if(areaid == GetPVarInt(i, "BBArea"))
	        {
	            StopStream(playerid);
	            SendClientMessage(playerid, -1, "?? ???????? ???? ????????");
				return 1;
	        }
	    }
	}
	new player_last_pickup = GetPlayerData(playerid, P_LAST_PICKUP);

	if(player_last_pickup != -1 && GetPickupInfo(player_last_pickup, P_DYNAMIC_ZONE) == areaid)
	{
		SetPlayerData(playerid, P_LAST_PICKUP, -1);
	}

	if(g_green_zones[0][GZ_AREA] <= areaid <= g_green_zones[sizeof g_green_zones - 1][GZ_AREA])
	{
		HidePlayerGreenZoneText(playerid);

		SetPVarInt(playerid, "player_in_green_zone", 0);
	}

	if(!GetPlayerData(playerid, P_BLOCK_LEAVE_AREA))
	{
		if(areaid == miner_job_area)
		{
			EndPlayerTempJob(playerid, TEMP_JOB_MINER, true);
		}
		else if(areaid == factory_job_area)
		{
			EndPlayerTempJob(playerid, TEMP_JOB_FACTORY, true);
		}
/*		else if(GetFuelStationData(0, FS_AREA) <= areaid <= GetFuelStationData(g_fuel_station_loaded - 1, FS_AREA))
		{
			new buy_fuel_pay = GetPVarInt(playerid, "buy_fuel_pay") + GetPVarInt(playerid, "buy_fuel_pay_j");

			DeletePVar(playerid, "buy_fuel_count");
			DeletePVar(playerid, "buy_fuel_pay_j");
			DeletePVar(playerid, "buy_fuel_pay");

			new stationid = areaid - GetFuelStationData(0, FS_AREA);
			if(buy_fuel_pay > 0)
			{
				new query[155];

				mysql_format(mysql, query, sizeof query, "INSERT INTO fuel_stations_profit (fid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetFuelStationData(stationid, FS_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), buy_fuel_pay, IsFuelStationOwned(stationid) ? 1 : 0);
				mysql_query(mysql, query, false);
			}
		} */
	}
	else SetPlayerData(playerid, P_BLOCK_LEAVE_AREA, false);

	return 1;
}

// ------------------------------------------
public: LoadGangZones()
{
	new idx;
	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT * FROM gang_zones", true);
	rows = cache_num_rows();

	if(rows > MAX_GZ)
	{
		rows = MAX_GZ;
		print("[GangZones]: DB rows > MAX_GZ");
	}

	for(idx = 0; idx < rows; idx ++)
	{
		SetGangZoneData(idx, GZ_MIN_X,	cache_get_field_content_float(idx, "min_x"));
		SetGangZoneData(idx, GZ_MIN_Y,	cache_get_field_content_float(idx, "min_y"));
		SetGangZoneData(idx, GZ_MAX_X,	cache_get_field_content_float(idx, "max_x"));
		SetGangZoneData(idx, GZ_MAX_Y,	cache_get_field_content_float(idx, "max_y"));

		SetGangZoneData(idx, GZ_GANG,	cache_get_field_content_int(idx, "fraction"));

		// ----------------------------------------------------------------------------------
		g_gang_zone[idx][GZ_ZONE] = GangZoneCreate
		(
			GetGangZoneData(idx, GZ_MIN_X),
			GetGangZoneData(idx, GZ_MIN_Y),
			GetGangZoneData(idx, GZ_MAX_X),
			GetGangZoneData(idx, GZ_MAX_Y)
		);

		// ----------------------------------------------------------------------------------
		g_gang_zone[idx][GZ_AREA] = CreateDynamicRectangle
		(
			GetGangZoneData(idx, GZ_MIN_X),
			GetGangZoneData(idx, GZ_MIN_Y),
			GetGangZoneData(idx, GZ_MAX_X),
			GetGangZoneData(idx, GZ_MAX_Y)
		);
	}

	g_gang_zones_loaded = rows;
	cache_delete(result);

	printf("[GangZones]: ??????? ?????????: %d", g_gang_zones_loaded);
	return 1;
}
stock CreateZakazZakaz(playerid)
{
//new fmt_str[80];
zakaz3_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 117.9998, 318.4267, " "); // ????? 
PlayerTextDrawLetterSize(playerid, zakaz3_PTD[playerid][0], 0.3118, 1.2713); 
PlayerTextDrawAlignment(playerid, zakaz3_PTD[playerid][0], 1); 
PlayerTextDrawColor(playerid, zakaz3_PTD[playerid][0], -1); 
PlayerTextDrawBackgroundColor(playerid, zakaz3_PTD[playerid][0], 255); 
PlayerTextDrawFont(playerid, zakaz3_PTD[playerid][0], 1); 
PlayerTextDrawSetProportional(playerid, zakaz3_PTD[playerid][0], 0); 
PlayerTextDrawSetShadow(playerid, zakaz3_PTD[playerid][0], 1); 
 
 //format(fmt_str, sizeof fmt_str, "?????");
//PlayerTextDrawSetString(playerid, business_menu_PTD[playerid][0], fmt_str);

 
// ?????????????? 5 ???????????.
}
stock ShowGangZonesForPlayer(playerid)
{
	for(new idx; idx < sizeof g_gang_zone; idx ++)
	{
		GangZoneShowForPlayer(playerid, GetGangZoneData(idx, GZ_ZONE), gang_zone_colors[ GetGangZoneData(idx, GZ_GANG) ]);
	}

	if(g_capture[C_STATUS])
		GangZoneFlashForPlayer(playerid, GetGangZoneData(g_capture[C_GANG_ZONE], GZ_ZONE), gang_zone_colors[ g_capture[C_ATTACK_TEAM] ]);
		return 1;
}
stock LoadZakazTextz()
{
new playerid;
new query[100];
   new Cache: result;
new shet=0;
    new fmt_text[555];
    new fmt_msg[555];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    mysql_format(mysql, query, sizeof query, "SELECT name FROM family ORDER BY ochki1 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);

    if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name);
        shet = GetFamilyData(fam_id, F_OCZAVOD);

format(fmt_msg, sizeof fmt_msg, "{ffff00}????? ???????\n?????? ???????ù???? ??????? ????ù: \n{%06x} %s",family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8,name);
vishka2 = Create3DTextLabel("????? ??????? ??ù?? ????? 1\n?????? ???????ù???? ??????? ????ù", COLOR_RED, -572.333862,-1969.903076,41.242153+1.8, 25.0 , 0, 1);
Update3DTextLabelText (vishka2, COLOR_RED,fmt_msg);
}
}
stock LoadZakazTexta()
{
new playerid;
new query[100];
   new Cache: result;
new shet=0;
    new fmt_text[555];
    new fmt_msg[555];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    mysql_format(mysql, query, sizeof query, "SELECT name FROM family ORDER BY ochki2 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);

    if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name);
        shet = GetFamilyData(fam_id, F_VISHARZ);

format(fmt_msg, sizeof fmt_msg, "{ffff00}????? ??????? ??ù?? ????? 1\n?????? ???????ù???? ??????? ????ù: \n{%06x} %s",family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8,name);
vishka3 = Create3DTextLabel("????? ??????? ??ù?? ????? 1\n?????? ???????ù???? ??????? ????ù", COLOR_RED, 883.485351,1923.192260,23.912017+1.8, 25.0 , 0, 1);
Update3DTextLabelText (vishka2, COLOR_RED,fmt_msg);
}
}
stock LoadZakazTextk()
{
new playerid;
new query[100];
   new Cache: result;
new shet=0;
    new fmt_text[555];
    new fmt_msg[555];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    mysql_format(mysql, query, sizeof query, "SELECT name FROM family ORDER BY ochki3 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);

    if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name);
        shet = GetFamilyData(fam_id, F_VISHKAR);

format(fmt_msg, sizeof fmt_msg, "{ffff00}????? ??????? ??ù?? ????? 2\n?????? ???????ù???? ??????? ????ù: \n{%06x} %s",family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8,name);
vishka5 = Create3DTextLabel("????? ??????? ??ù?? ????? 1\n?????? ???????ù???? ??????? ????ù", COLOR_RED, 231.307479,-1511.850830,35.371898+1.8, 25.0 , 0, 1);
Update3DTextLabelText (vishka2, COLOR_RED,fmt_msg);
}
}
stock LoadZakazTextb()
{
new playerid;
new query[100];
   new Cache: result;
new shet=0;
    new fmt_text[555];
    new fmt_msg[555];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    mysql_format(mysql, query, sizeof query, "SELECT name FROM family ORDER BY ochki4 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);

    if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name);
        shet = GetFamilyData(fam_id, F_VISBUS);

vishka4 = Create3DTextLabel("????? ??????? ??ù?? ????? 1\n?????? ???????ù???? ??????? ????ù", COLOR_RED, 2673.193847,569.579406,15.665578+1.8, 25.0 , 0, 1);
Update3DTextLabelText (vishka2, COLOR_RED,fmt_msg);
}
}
stock LoadZakazText()
{
new playerid;
new query[100];
   new Cache: result;
new shet=0;
    new fmt_text[555];
    new fmt_msg[555];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    mysql_format(mysql, query, sizeof query, "SELECT name FROM family ORDER BY ochki DESC LIMIT 1");
    result = mysql_query(mysql, query, true);

    if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name);
        shet = GetFamilyData(fam_id, F_OCKIFARMA);

format(fmt_msg, sizeof fmt_msg, "{ffff00}????? ??????\n  {ffffff}?????? ???????ù???? ??????? ????ù: \n{%06x} %s",family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8,name);
vishka1 = Create3DTextLabel("????? ??????? ??ù?? ????? 1\n?????? ???????ù???? ??????? ????ù", COLOR_RED, 2323.015136,-264.258728,1.538782+1.8, 25.0 , 0, 1);
Update3DTextLabelText (vishka1, COLOR_RED,fmt_msg);
}
}
public: OnZakazz()
{
    zona2 = CreateDynamicRectangle(-520.111389, -2000.643554, -520.111289, -2000.643454, 0, 0, -1);
    zona21 = GangZoneCreate(-520.111389, -2000.643554, -520.111289, -2000.643454);
    GangZoneShowForAll(zona21, 0xFF0000FF);
}

public: OnZakaza()
{
    zona3 = CreateDynamicRectangle(902.390869, 1923.410034, 902.390969, 1923.410134, 0, 0, -1);
    zona31 = GangZoneCreate(902.390869, 1923.410034, 902.390969, 1923.410134);
    GangZoneShowForAll(zona31, 0xFF0000FF);
}

public: OnZakazk()
{
    zona5 = CreateDynamicRectangle(237.247787, -1511.454345, 237.247887, -1511.454245, 0, 0, -1);
    zona51 = GangZoneCreate(237.247787, -1511.454345, 237.247887, -1511.454245);
    GangZoneShowForAll(zona51, 0xFF0000FF);
}

public: OnZakazb()
{
    zona4 = CreateDynamicRectangle(2677.253173, 561.331115, 2677.253273, 561.331215, 0, 0, -1);
    zona41 = GangZoneCreate(2677.253173, 561.331115, 2677.253273, 561.331215);
    GangZoneShowForAll(zona41, 0xFF0000FF);
}

public: OnZakaz()
{
    zona1 = CreateDynamicRectangle(2329.879882, -238.996139, 2329.879982, -238.996039, 0, 0, -1);
    zona11 = GangZoneCreate(2329.879882, -238.996139, 2329.879982, -238.996039);
    GangZoneShowForAll(zona11, 0xFF0000FF);
}
stock UpdateGangZone(idx)
{
	if(!GetGangZoneData(idx, GZ_GANG))
	{
		new area_players[3];

		foreach(new i : Player)
		{
			if(!IsPlayerConnected(i)) continue;
			else if(!IsPlayerLogged(i)) continue;
			else if(!IsPlayerInDynamicArea(i, GetGangZoneData(idx, GZ_AREA))) continue;
			else if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(i) <= TEAM_OPG_LYTKARINSKAYA)) continue;

			area_players[ GetPlayerTeamEx(i) - TEAM_OPG_ARZAMASKAYA ] ++;
		}

		for(new i; i < 3; i++)
		{
			if(area_players[i] < MIN_PLAYERS_FOR_CAPTURE) continue;

			SetGangZoneData(idx, GZ_GANG, i + 1);
			SaveGangZone(idx + 1);

			GangZoneShowForAll(GetGangZoneData(idx, GZ_ZONE), gang_zone_colors[i + 1]);

			new fmt_text[50];

			format(fmt_text, sizeof fmt_text, "%s ????????? ????? ??????????", GetTeamName(i + TEAM_OPG_ARZAMASKAYA));
			SendMessageToGang(fmt_text, 0xFF5533FF);

			UpdateGangRepository(i);

			break;
		}
	}
	return 1;
}

stock SaveGangZone(idx)
{
	new query[65];

	mysql_format(mysql, query, sizeof query, "UPDATE gang_zones SET fraction=%d WHERE id=%d", GetGangZoneData(idx, GZ_GANG), idx);
	mysql_query(mysql, query, false);
}

stock GetGangZonesCount(team)
{
	new count;

	for(new idx; idx < g_gang_zones_loaded; idx ++)
	{
		if(GetGangZoneData(idx, GZ_GANG) != team) continue;

		count ++;
	}

	return count;
}

// ------------------------------------------
public: LoadGangRepositories()
{
	new idx;
	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT * FROM gang_repositories", true);
	rows = cache_num_rows();

	if(rows > MAX_GZ)
	{
		rows = MAX_GZ;
		print("[GangRepositories]: DB rows > MAX_GANG_REPOSITORIES");
	}

	for(idx = 0; idx < rows; idx ++)
	{
		SetGangRepositoryData(idx, GR_GANG, 		cache_get_field_content_int(idx, "id"));
		SetGangRepositoryData(idx, GR_METALL, 		cache_get_field_content_int(idx, "metall"));
		SetGangRepositoryData(idx, GR_AMMO, 		cache_get_field_content_int(idx, "ammo"));
		SetGangRepositoryData(idx, GR_DRUGS, 		cache_get_field_content_int(idx, "drugs"));
		SetGangRepositoryData(idx, GR_MONEY, 		cache_get_field_content_int(idx, "money"));

		SetGangRepositoryData(idx, GR_LOCK, 		bool: cache_get_field_content_int(idx, "lock"));

		new fmt_text[330],
			gang_id = GetGangRepositoryData(idx, GR_GANG);

		format
		(
			fmt_text, sizeof fmt_text,
			"??????????\n\
			??????????: {99FF99}%d\n\n\n\n\
			{%06x}?????\n\
			%s\n\n\
			{FFFFFF}?????????: {ff9900}%d ?? 20000 ?\n\
			{FFFFFF}???????: {ff9900}%d ?? 50000 ??\n\
			{FFFFFF}?????????: {ff9900}%d ?? 6000 ??\n\
			{FFFFFF}??????: {3366FF}%d ???\n\n\
			%s\
			",
			GetGangZonesCount(gang_id + 1),
			gang_zone_colors[gang_id] >>> 8,
			GetTeamName(idx + TEAM_OPG_ARZAMASKAYA),
			GetGangRepositoryData(idx, GR_DRUGS),
			GetGangRepositoryData(idx, GR_AMMO),
			GetGangRepositoryData(idx, GR_METALL),
			GetGangRepositoryData(idx, GR_MONEY),
			GetGangRepositoryData(idx, GR_LOCK) ? "{66CC33}??????" : "{FF3300}??????"
		);

		g_gang_repository[idx][GR_LABEL] = Create3DTextLabel
		(
			fmt_text,
			0xFFFFFFFF,
			GetTeamData(idx + TEAM_OPG_ARZAMASKAYA, O_REPOSITORY_POS)[0],
			GetTeamData(idx + TEAM_OPG_ARZAMASKAYA, O_REPOSITORY_POS)[1],
			GetTeamData(idx + TEAM_OPG_ARZAMASKAYA, O_REPOSITORY_POS)[2] + 1.5,
			10.0, idx + 1, 0
		);

		g_gang_repository[idx][GR_PICKUP] = CreatePickup
		(
			1239,
			23,
			GetTeamData(idx + TEAM_OPG_ARZAMASKAYA, O_REPOSITORY_POS)[0],
			GetTeamData(idx + TEAM_OPG_ARZAMASKAYA, O_REPOSITORY_POS)[1],
			GetTeamData(idx + TEAM_OPG_ARZAMASKAYA, O_REPOSITORY_POS)[2],
			idx + 1,
			PICKUP_ACTION_TYPE_GANG_REPOSIT,
			gang_id
		);
	}

	cache_delete(result);

	printf("[GangRepositories]: ?????? ???? ?????????");
}

stock UpdateGangRepository(idx)
{
	new fmt_text[330],
		gang_id = GetGangRepositoryData(idx, GR_GANG);

	format
	(
		fmt_text, sizeof fmt_text,
		"??????????\n\
		??????????: {99FF99}%d\n\n\n\n\
		{%06x}?????\n\
		%s\n\n\
		{FFFFFF}?????????: {ff9900}%d ?? 20000 ?\n\
		{FFFFFF}???????: {ff9900}%d ?? 50000 ??\n\
		{FFFFFF}?????????: {ff9900}%d ?? 6000 ??\n\
		{FFFFFF}??????: {3366FF}%d ???\n\n\
		%s\
		",
		GetGangZonesCount(gang_id),
		gang_zone_colors[gang_id] >>> 8,
		GetTeamName(idx + TEAM_OPG_ARZAMASKAYA),
		GetGangRepositoryData(idx, GR_DRUGS),
		GetGangRepositoryData(idx, GR_AMMO),
		GetGangRepositoryData(idx, GR_METALL),
		GetGangRepositoryData(idx, GR_MONEY),
		GetGangRepositoryData(idx, GR_LOCK) ? "{66CC33}??????" : "{FF3300}??????"
	);

	UpdateDynamic3DTextLabelText(GetGangRepositoryData(idx, GR_LABEL), 0xFFFFFFFF, fmt_text);
}

// ------------------------------------------
public: LoadEntrances()
{
	new idx, j, k;
	new query[85];
	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT * FROM entrances", true);
	rows = cache_num_rows();

	if(rows > MAX_ENTRANCES)
	{
		rows = MAX_ENTRANCES;
		print("[Entrances]: DB rows > MAX_ENTRANCES");
	}

	for(idx = 0; idx < rows; idx ++)
	{
		SetEntranceData(idx, E_SQL_ID, 	cache_get_field_content_int(idx, "id"));

		SetEntranceData(idx, E_FLOORS,	cache_get_field_content_int(idx, "floors"));

		SetEntranceData(idx, E_POS_X, 	cache_get_field_content_float(idx, "pos_x"));
		SetEntranceData(idx, E_POS_Y, 	cache_get_field_content_float(idx, "pos_y"));
		SetEntranceData(idx, E_POS_Z, 	cache_get_field_content_float(idx, "pos_z"));

		SetEntranceData(idx, E_EXIT_POS_X, 	cache_get_field_content_float(idx, "exit_x"));
		SetEntranceData(idx, E_EXIT_POS_Y, 	cache_get_field_content_float(idx, "exit_y"));
		SetEntranceData(idx, E_EXIT_POS_Z, 	cache_get_field_content_float(idx, "exit_z"));
		SetEntranceData(idx, E_EXIT_ANGLE, 	cache_get_field_content_float(idx, "exit_angle"));


		// ----------------------------------------------------------------------------------
		SetEntranceData(idx, E_STATUS, -1);

		SetEntranceData(idx, E_PICKUP_ID, CreatePickup(1273, 23, GetEntranceData(idx, E_POS_X), GetEntranceData(idx, E_POS_Y), GetEntranceData(idx, E_POS_Z), 0, PICKUP_ACTION_TYPE_ENTRANCE_ENT, idx));
		SetEntranceData(idx, E_MAP_ICON, CreateDynamicMapIcon(GetEntranceData(idx, E_POS_X), GetEntranceData(idx, E_POS_Y), GetEntranceData(idx, E_POS_Z), 31, 0, 0, 0, -1, STREAMER_MAP_ICON_SD, MAPICON_LOCAL));

		format(query, sizeof query, "{ffff00}´ ???? ? ??????? ª\n{ffff00}|{FFFFFF} ????? ????????: {ffff00}%d", idx + 1);
		SetEntranceData(idx, E_LABEL, CreateDynamic3DTextLabel(query, 0x3399FFFF, GetEntranceData(idx, E_POS_X), GetEntranceData(idx, E_POS_Y), GetEntranceData(idx, E_POS_Z) + 1.0, 15.0));

		for(j = 0; j < MAX_ENTRANCE_FLOORS; j ++)
		{
			for(k = 0; k < 4; k ++)
			{
				g_entrance_flat[idx][j][k] = -1;
			}
		}
	}
	g_entrance_loaded = rows;
	cache_delete(result);

	// ????????????ù ???? ????????
	CreatePickup(1318, 23, 558.4183, 22.0849, 1049.2656, -1, PICKUP_ACTION_TYPE_ENTRANCE_EXI); // ????? ?? ????????

	CreatePickup(1318, 23, 560.7483, 23.6653, 1049.2731, -1, PICKUP_ACTION_TYPE_ENTRANCE_LIF); // ???? ?? 0 ?????
	//CreatePickup(1318, 23, 11.1776, 1377.5216, 1508.4163, -1, PICKUP_ACTION_TYPE_ENTRANCE_LIF); // ???? ?? ????? ???? 0

	CreateDynamic3DTextLabel("{ffff00}´ ???? ª\n \n{FFFFFF}????????? ?????\n{ffffff}??ù ?????????????ù", 0x3399FFFF, 560.7483, 23.6653, 1049.2731 + 1.0, 8.0); // ????
	//CreateDynamic3DTextLabel("{ffff00}´ ???? ª\n \n{FFFFFF}????????? ?????\n{ffffff}??ù ?????????????ù", 0x3399FFFF, 11.1776, 1377.5216, 1508.4163 + 1.0, 8.0); // ????

	for(idx = 0, k = 0; idx < MAX_ENTRANCE_FLOORS; idx ++)
	{
		format(query, sizeof query, "????: %d", idx + 1);
		CreateDynamic3DTextLabel(query, 0xFFCD00FFF, 9.6966, 1376.0, 1508.4100 + 0.7, 8.0, _, _, _, _, idx + 2);

		for(j = 0; j < 4; j ++)
		{
			format(query, sizeof query, "????????\n{FFFFFF}?????: %d", k + 1);
			CreateDynamic3DTextLabel(query, 0x3399FFFF, g_entrance_flat_pos[j][0], g_entrance_flat_pos[j][1], g_entrance_flat_pos[j][2] + 1.6, 6.0, _, _, _, _, idx + 2);

			k ++;
		}
	}
	for(idx = 0; idx < 4; idx ++)
	{
		CreatePickup(1318, 23, g_entrance_flat_pos[idx][0], g_entrance_flat_pos[idx][1], g_entrance_flat_pos[idx][2], -1, PICKUP_ACTION_TYPE_ENTRANCE_FLA, idx);
	}
	printf("[Entrances]: ????????? ?????????: %d", g_entrance_loaded);
}

public: EntranceStatusInit(entranceid)
{
	new e_houses = 0;
	for(new idx; idx < g_house_loaded; idx ++)
	{
		if(GetHouseData(idx, H_ENTRACE) != entranceid) continue;
		if(!IsHouseOwned(idx)) continue;

		e_houses ++;
	}
	UpdateEntrance(entranceid, e_houses);
}

public: LoadOwnableCars()
{
	new rows, vehicleid;
	new Cache: result;

	result = mysql_query(mysql, "SELECT oc.*, IFNULL(a.name, 'None') AS owner_name FROM ownable_cars oc LEFT JOIN accounts a ON a.id = oc.owner_id", true);
	rows = cache_num_rows();

	if(rows > MAX_OWNABLE_CARS)
	{
		rows = MAX_OWNABLE_CARS;
		print("[OwnableCars]: DB rows > MAX_OWNABLE_CARS");
	}
	for(new idx; idx < rows; idx ++)
	{
		SetOwnableCarData(idx, OC_SQL_ID, 		cache_get_field_content_int(idx, "id"));
		SetOwnableCarData(idx, OC_OWNER_ID, 	cache_get_field_content_int(idx, "owner_id"));

		SetOwnableCarData(idx, OC_MODEL_ID, 	cache_get_field_content_int(idx, "model_id"));
		SetOwnableCarData(idx, OC_COLOR_1, 		cache_get_field_content_int(idx, "color_1"));
		SetOwnableCarData(idx, OC_COLOR_2, 		cache_get_field_content_int(idx, "color_2"));

		SetOwnableCarData(idx, OC_POS_X, 		cache_get_field_content_float(idx, "pos_x"));
		SetOwnableCarData(idx, OC_POS_Y, 		cache_get_field_content_float(idx, "pos_y"));
		SetOwnableCarData(idx, OC_POS_Z, 		cache_get_field_content_float(idx, "pos_z"));
		SetOwnableCarData(idx, OC_ANGLE, 		cache_get_field_content_float(idx, "angle"));

		cache_get_field_content(idx, "number", g_ownable_car[idx][OC_NUMBER], mysql, 8);

		SetOwnableCarData(idx, OC_ALARM, 		bool: cache_get_field_content_int(idx, "alarm"));
		SetOwnableCarData(idx, OC_KEY_IN, 		bool: cache_get_field_content_int(idx, "key_in"));

		SetOwnableCarData(idx, OC_CREATE, 		cache_get_field_content_int(idx, "create_time"));
		SetOwnableCarData(idx, OC_VINILCAR, 		cache_get_field_content_int(idx, "vinilcar"));
		
		SetOwnableCarData(idx, OC_PT_ENGINE, 	cache_get_field_content_int(0, "pt_engine"));
		SetOwnableCarData(idx, OC_PT_BRAKE, 	cache_get_field_content_int(0, "pt_brake"));
		SetOwnableCarData(idx, OC_PT_STABILITY, cache_get_field_content_int(0, "pt_stability"));

		// cache_get_field_content(idx, "owner_name", g_ownable_car[idx][OC_OWNER_NAME], mysql, 21);
		// ----------------------------------------------------------------------------------------

		if(strlen(GetOwnableCarData(idx, OC_NUMBER)) != 6)
			strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

		vehicleid = CreateVehicle
		(
			GetOwnableCarData(idx, OC_MODEL_ID),
			GetOwnableCarData(idx, OC_POS_X),
			GetOwnableCarData(idx, OC_POS_Y),
			GetOwnableCarData(idx, OC_POS_Z),
			GetOwnableCarData(idx, OC_ANGLE),
			GetOwnableCarData(idx, OC_COLOR_1),
			GetOwnableCarData(idx, OC_COLOR_2),
			-1,
			0,
			VEHICLE_ACTION_TYPE_OWNABLE_CAR,
			idx
		);
		if(vehicleid != INVALID_VEHICLE_ID)
		{
			//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
			//index = GetVehicleData(vehicleid, V_ACTION_ID);
            format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
            SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
			SetVehicleParam(vehicleid, V_LOCK, bool: cache_get_field_content_int(idx, "status"));

			SetVehicleData(vehicleid, V_MILEAGE, cache_get_field_content_float(idx, "mileage"));
		}
	}
	g_ownable_car_loaded = rows;
	cache_delete(result);

	printf("[OwnableCars]: ?????? ???? ?????????: %d", g_ownable_car_loaded);
}

LoadPlayerInventory(playerid)
{
    new query[128];
    mysql_format(mysql, query, sizeof(query),
        "SELECT item_id, quantity FROM player_inventory WHERE player_id = %d",
        GetPlayerAccountID(playerid));

    mysql_tquery(mysql, query, "OnPlayerInventoryLoad", "d", playerid);
}

forward OnPlayerInventoryLoad(playerid);
public OnPlayerInventoryLoad(playerid)
{
    if(!IsPlayerConnected(playerid)) return;

    // ????? ????????ù
    for(new i = 0; i < MAX_ITEMS; i++) {
        PlayerInventory[playerid][i] = 0;
    }

    // ???????? ?????? ?? ??
    new rows = cache_num_rows();
    for(new i = 0; i < rows; i++) {
        new item_id, quantity;
        cache_get_field_content_int(i, "item_id", item_id);
        cache_get_field_content_int(i, "quantity", quantity);

        if(item_id >= 0 && item_id < MAX_ITEMS) {
            PlayerInventory[playerid][item_id] = quantity;
        }
    }

    printf("???????? ????????? ?????? %d (%d ?????????)", playerid, rows);
}

// ?????????? ???????? ? ??
SavePlayerItem(playerid, item_id, quantity)
{
    new query[256];
    if(quantity > 0) {
        mysql_format(mysql, query, sizeof(query),
            "INSERT INTO player_inventory (player_id, item_id, quantity) VALUES (%d, %d, %d) ON DUPLICATE KEY UPDATE quantity = %d",
            GetPlayerAccountID(playerid), item_id, quantity, quantity);
    } else {
        mysql_format(mysql, query, sizeof(query),
            "DELETE FROM player_inventory WHERE player_id = %d AND item_id = %d",
            GetPlayerAccountID(playerid), item_id);
    }
    mysql_query(mysql, query, false);
}

// ?????????? ????????
GivePlayerItem(playerid, item_id, quantity = 1)
{
    if(item_id < 0 || item_id >= MAX_ITEMS) return 0;

    PlayerInventory[playerid][item_id] += quantity;
    SavePlayerItem(playerid, item_id, PlayerInventory[playerid][item_id]);

    return 1;
}

// ???????? ????????
RemovePlayerItem(playerid, item_id, quantity = 1)
{
    if(item_id < 0 || item_id >= MAX_ITEMS) return 0;
    if(PlayerInventory[playerid][item_id] < quantity) return 0;

    PlayerInventory[playerid][item_id] -= quantity;
    SavePlayerItem(playerid, item_id, PlayerInventory[playerid][item_id]);

    return 1;
}

// ????????? ?????????? ????????
GetPlayerItemQuantity(playerid, item_id)
{
    if(item_id < 0 || item_id >= MAX_ITEMS) return 0;
    return PlayerInventory[playerid][item_id];
}

public: LoadOwnableCar(oc_id)
{
	if(g_ownable_car_loaded + 1 > MAX_OWNABLE_CARS)
	{
		print("[OwnableCars]: ?????? ? ????????. ???????? ????? ??????? ?????????? (MAX_OWNABLE_CARS)");
		return -1;
	}

	new query[55],
		Cache: result,
		vehicleid;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ownable_cars WHERE id='%d' LIMIT 1", oc_id);
	result = mysql_query(mysql, query, true);

	new idx = GetFreeOwnableCarID();

	SetOwnableCarData(idx, OC_SQL_ID, 		cache_get_field_content_int(0, "id"));
	SetOwnableCarData(idx, OC_OWNER_ID, 	cache_get_field_content_int(0, "owner_id"));

	SetOwnableCarData(idx, OC_MODEL_ID, 	cache_get_field_content_int(0, "model_id"));
	SetOwnableCarData(idx, OC_COLOR_1, 		cache_get_field_content_int(0, "color_1"));
	SetOwnableCarData(idx, OC_COLOR_2, 		cache_get_field_content_int(0, "color_2"));

	SetOwnableCarData(idx, OC_POS_X, 		cache_get_field_content_float(0, "pos_x"));
	SetOwnableCarData(idx, OC_POS_Y, 		cache_get_field_content_float(0, "pos_y"));
	SetOwnableCarData(idx, OC_POS_Z, 		cache_get_field_content_float(0, "pos_z"));
	SetOwnableCarData(idx, OC_ANGLE, 		cache_get_field_content_float(0, "angle"));

	cache_get_field_content(0, "number", g_ownable_car[idx][OC_NUMBER], mysql, 8);

	SetOwnableCarData(idx, OC_ALARM, 		bool: cache_get_field_content_int(0, "alarm"));
	SetOwnableCarData(idx, OC_KEY_IN, 		bool: cache_get_field_content_int(0, "key_in"));

	SetOwnableCarData(idx, OC_CREATE, 		cache_get_field_content_int(0, "create_time"));
	SetOwnableCarData(idx, OC_VINILCAR, 	cache_get_field_content_int(0, "vinilcar"));

	SetOwnableCarData(idx, OC_PT_BRAKE, 	cache_get_field_content_int(0, "pt_brake"));
	SetOwnableCarData(idx, OC_PT_STABILITY, cache_get_field_content_int(0, "pt_stability"));
	SetOwnableCarData(idx, OC_PT_ENGINE, 	cache_get_field_content_int(0, "pt_engine"));

	// ----------------------------------------------------------------------------------------

	if(strlen(GetOwnableCarData(idx, OC_NUMBER)) != 6)
		strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

	// ??????? ù???????ù - ?ù??? ?? ????!
	vehicleid = CreateVehicle(
		GetOwnableCarData(idx, OC_MODEL_ID),
		GetOwnableCarData(idx, OC_POS_X),
		GetOwnableCarData(idx, OC_POS_Y), 
		GetOwnableCarData(idx, OC_POS_Z),
		GetOwnableCarData(idx, OC_ANGLE),
		GetOwnableCarData(idx, OC_COLOR_1),
		GetOwnableCarData(idx, OC_COLOR_2),
		-1, 0,
		VEHICLE_ACTION_TYPE_OWNABLE_CAR,
		idx
	);


	if(vehicleid != INVALID_VEHICLE_ID)
	{
		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
		SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
		SetVehicleParam(vehicleid, V_LOCK, bool: cache_get_field_content_int(0, "status"));

		SetVehicleData(vehicleid, V_MILEAGE, cache_get_field_content_float(0, "mileage"));
		SetVehicleData(vehicleid, V_LAST_LOAD_TIME, gettime());
		SetVehicleData(vehicleid, V_HEALTH, 1000);
		SetVehicleHealth(vehicleid, 1000);

		g_ownable_car_loaded++;
	}
	else
	{
		printf("[ERROR] LoadOwnableCar: ?? ??????? ??????? ????????? ??ù idx %d", idx);
		cache_delete(result);
		return -1;
	}

	cache_delete(result);

	LoadOwnableCarTrunk(vehicleid);

	return vehicleid;
}

stock GetFreeOwnableCarID()
{
	for(new idx; idx < sizeof g_ownable_car; idx ++)
	{
		if(GetOwnableCarData(idx, OC_CREATE)) continue;

		return idx;
	}

	return -1;
}

stock UnloadPlayerOwnableCar(playerid, bool: ignore_time = false)
{
	new vehicleid = GetPlayerOwnableCar(playerid);

	if(vehicleid == INVALID_VEHICLE_ID)
	{
		return -1;
	}

	new index = GetVehicleData(vehicleid, V_ACTION_ID);

	DestroyVehicleLabel(vehicleid);

	SetOwnableCarData(index, OC_CREATE, 0);
	DestroyDeliveryVehicle(vehicleid);
	UnloadOwnableCarTrunk(vehicleid);

	SetVehicleData(vehicleid, V_LAST_LOAD_TIME, 0);

	SetPlayerData(playerid, P_OWNABLE_CAR, INVALID_VEHICLE_ID);

	foreach(new idx : Player)
	{
		if(!IsPlayerLogged(idx)) continue;
		else if(GetPlayerAllowedCar(idx) != vehicleid) continue;

		if(ignore_time)
			SendClientMessage(idx, 0xFF5533FF, "???????? ??????????? ??? ?????????? ?????????ù. ù???????? ???????? ? ???????");
		else
			SendClientMessage(idx, 0xFF5533FF, "???????? ??????????? ??? ?????????? ???????? ????????? ? ???????");

		SetPlayerData(idx, P_ALLOWED_CAR, INVALID_VEHICLE_ID);
	}

	return 1;
}

public: LoadTrunks()
{
	new Cache: result, rows;
	new vehicleid, slot, buffer;

	result = mysql_query(mysql, "SELECT * FROM trunks ORDER BY owner_id ASC, id ASC", true);
	rows = cache_num_rows();

	for(new idx; idx < rows; idx ++)
	{
		vehicleid = GetOwnableCarBySqlID(cache_get_field_content_int(idx, "owner_id"));
		if(vehicleid != INVALID_VEHICLE_ID)
		{
			for(slot = 0; slot < MAX_VEHICLE_TRUNK_SLOTS; slot ++)
			{
				if(GetTrunkData(vehicleid, slot, VT_SQL_ID)) continue;

				SetTrunkData(vehicleid, slot, VT_SQL_ID,		cache_get_field_content_int(idx, "id"));
				SetTrunkData(vehicleid, slot, VT_ITEM_TYPE, 	cache_get_field_content_int(idx, "item_id"));
				SetTrunkData(vehicleid, slot, VT_ITEM_AMOUNT, 	cache_get_field_content_int(idx, "amount"));
				SetTrunkData(vehicleid, slot, VT_ITEM_VALUE,	cache_get_field_content_int(idx, "value"));
			}
			buffer ++;
		}
	}

	cache_delete(result);
	printf("[Trunks]: ????????? ?????????: %d", buffer);
}

public: LoadOwnableCarTrunk(vehicleid)
{
	new query[60],
		slot,
		index,
		rows,
		Cache: result;

	index = GetVehicleData(vehicleid, V_ACTION_ID);

	mysql_format(mysql, query, sizeof query, "SELECT * FROM trunks WHERE oc_id='%d' ORDER BY id ASC", index);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	if(rows > MAX_VEHICLE_TRUNK_SLOTS)
		rows = MAX_VEHICLE_TRUNK_SLOTS;

	for(slot = 0; slot < rows; slot ++)
	{
		if(GetTrunkData(vehicleid, slot, VT_SQL_ID)) continue;

		SetTrunkData(vehicleid, slot, VT_SQL_ID,		cache_get_field_content_int(slot, "id"));
		SetTrunkData(vehicleid, slot, VT_ITEM_TYPE, 	cache_get_field_content_int(slot, "item_id"));
		SetTrunkData(vehicleid, slot, VT_ITEM_AMOUNT, 	cache_get_field_content_int(slot, "amount"));
		SetTrunkData(vehicleid, slot, VT_ITEM_VALUE,	cache_get_field_content_int(slot, "value"));
	}

	cache_delete(result);
}

stock UnloadOwnableCarTrunk(vehicleid)
{
	for(new slot = 0; slot < MAX_VEHICLE_TRUNK_SLOTS; slot ++)
	{
		RemoveTrunkItem(vehicleid, slot);
	}
}

public: LoadHotels()
{
	new query[64], idx;
	new Cache: result, rows;
	new hotel_id, room_id;

	result = mysql_query(mysql, "SELECT h.*, IFNULL(a.name, 'None') AS owner_name FROM hotels h LEFT JOIN accounts a ON a.id = h.owner_id ORDER BY h.hotel_id ASC, h.id ASC", true);
	rows = cache_num_rows();

	if(rows > MAX_HOTELS * MAX_HOTEL_ROOMS)
	{
		rows = MAX_HOTELS * MAX_HOTEL_ROOMS;
		print("[Hotels]: DB rows > MAX_HOTELS * MAX_HOTEL_ROOMS");
	}

	for(idx = 0; idx < rows; idx ++)
	{
		hotel_id = cache_get_field_content_int(idx, "hotel_id");
		if(0 <= hotel_id <= MAX_HOTELS-1)
		{
			room_id = g_hotel_rooms_loaded[hotel_id];
			if(0 <= room_id <= MAX_HOTEL_ROOMS-1)
			{
				SetHotelData(hotel_id, room_id, H_SQL_ID, 		cache_get_field_content_int(idx, "id"));
				SetHotelData(hotel_id, room_id, H_OWNER_ID, cache_get_field_content_int(idx, "owner_id"));
				SetHotelData(hotel_id, room_id, H_RENT_DATE, 	cache_get_field_content_int(idx, "rent_time"));
				SetHotelData(hotel_id, room_id, H_STATUS, 		bool: cache_get_field_content_int(idx, "status"));

				cache_get_field_content(idx, "owner_name", g_hotel[hotel_id][room_id][H_OWNER_NAME], mysql, 21);

				// ----------------------------------------------------------------------------------------------
				if(IsHotelRoomOwned(hotel_id, room_id) && !strcmp(GetHotelData(hotel_id, room_id, H_OWNER_NAME), "None", true))
				{
					SetHotelData(hotel_id, room_id, H_OWNER_ID, 0);

					mysql_format(mysql, query, sizeof query, "UPDATE hotels SET owner_id=0 WHERE id=%d LIMIT 1", GetHotelData(hotel_id, room_id, H_SQL_ID));
					mysql_query(mysql, query, false);
				}

				if(!IsHotelRoomOwned(hotel_id, room_id))
				{
					SetHotelData(hotel_id, room_id, H_STATUS, false);
				}
				g_hotel_rooms_loaded[hotel_id] ++;
			}
		}
	}
	cache_delete(result);

	// ----------------------------------
	CreatePickup(1318, 23, 733.0804, 599.6274, 1002.9598, -1);
	CreatePickup(1318, 23, 1276.0054, -776.3987, 1202.7220, -1);

	g_hotel_lift_CP[0] = CreateDynamicCP(733.0804, 599.6274, 1002.9598, 1.0, _, _, _, 5.0);
	g_hotel_lift_CP[1] = CreateDynamicCP(1276.0054, -776.3987, 1202.722, 1.0, _, _, _, 5.0);

	// ----------------------------------
	new
		Float: p_pos_x = 1273.2,
		Float: p_pos_y = -778.3146,
		Float: p_pos_z = 1202.7220;

	for(idx = 0; idx < 12; idx ++)
	{
		if(!(idx & 1))
		{
			p_pos_y += 4.0,
			p_pos_x += 5.7;
		}
		else p_pos_x -= 5.7;

		//CreatePickup(19197, 23, p_pos_x, p_pos_y, p_pos_z, -1, PICKUP_ACTION_TYPE_HOTEL_ROOM, idx);

		format(query, sizeof query, "???????\n{FFFFFF}?????: %d", idx + 1);
		CreateDynamic3DTextLabel(query, 0x3399FFFF, p_pos_x, p_pos_y, p_pos_z + 1.4, 6.0);
	}

	for(idx = 0; idx < MAX_HOTEL_FLOORS; idx ++)
	{
		format(query, sizeof query, "????: %d", idx + 1);
		CreateDynamic3DTextLabel(query, 0xFFCD00FF, 1276.0054, -776.3987, 1202.722 + 1.7, 8.0, _, _, _, _, idx + 1);
	}

	// ----------------------------------
	for(idx = 0; idx < MAX_HOTELS; idx ++)
	{
		if(g_hotel_rooms_loaded[idx])
		{
			g_hotel_loaded ++;
		}
	}
	printf("[Hotels]: ?????? ?????????: %d / ???????: %d", g_hotel_loaded, rows);
}

public: LoadLeaderList()
{
	new idx, frac_id;
	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT * FROM `leaders`", true);
	rows = cache_num_rows();

	if(rows > MAX_ORG)
	{
		rows = MAX_ORG;
		print("[Leader List]: DB rows > MAX_ORG");
	}

	for(idx = 0; idx < rows; idx ++)
	{
		frac_id = cache_get_field_content_int(idx, "frac_id");
		cache_get_field_content(idx, "name", g_organization[frac_id][O_LEADER], mysql, 64);

		// -------------------------
	}
	printf("[Leader List]: ??????? ?????????: %d", rows);
	cache_delete(result);
}

public: LoadGift()
{
	new idx;
	//new query[85];
	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT * FROM gift", true);
	rows = cache_num_rows();

	if(rows > MAX_GIFT)
	{
		rows = MAX_GIFT;
		print("[Gift]: DB rows > MAX_GIFT");
	}


	for(idx = 0; idx < rows; idx ++)
	{
		SetGiftData(idx, G_SQL_ID, 		cache_get_field_content_int(idx, "id"));

		SetGiftData(idx, G_POS_X,		cache_get_field_content_float(idx, "x"));
		SetGiftData(idx, G_POS_Y,		cache_get_field_content_float(idx, "y"));
		SetGiftData(idx, G_POS_Z,		cache_get_field_content_float(idx, "z"));

	 	CreatePickup
		(
			1279,
			23,
			g_gift[idx][G_POS_X], g_gift[idx][G_POS_Y], g_gift[idx][G_POS_Z],
			-1,
			PICKUP_ACTION_TYPE_GIFT,
			idx
		);
	}


	g_gift_loaded = rows;
	cache_delete(result);

    printf("[Gift]: ???????: %d", g_gift_loaded);
}

public: LoadHouses()
{
	new idx;
	new query[85], buffer[2];
	new Cache: result, rows;

	// result = mysql_query(mysql, "SELECT h.*, IFNULL(a.name, 'None') owner_name FROM houses h LEFT JOIN accounts a ON a.id = h.owner_id ORDER BY h.id ASC, h.entrance ASC", true);
	result = mysql_query(mysql, "SELECT h.*, IFNULL(a.name, 'None') owner_name FROM houses h LEFT JOIN accounts a ON a.id=h.owner_id", true);
	rows = cache_num_rows();

	if(rows > MAX_HOUSES)
	{
		rows = MAX_HOUSES;
		print("[Houses]: DB rows > MAX_HOUSES");
	}

	for(idx = 0; idx < rows; idx ++)
	{
		SetHouseData(idx, H_SQL_ID, 		cache_get_field_content_int(idx, "id"));
		SetHouseData(idx, H_OWNER_ID, cache_get_field_content_int(idx, "owner_id"));

		cache_get_field_content(idx, "name", g_house[idx][H_NAME], mysql, 20);

		SetHouseData(idx, H_IMPROVEMENTS,	cache_get_field_content_int(idx, "improvements"));

		SetHouseData(idx, H_RENT_DATE,		cache_get_field_content_int(idx, "rent_time"));
		SetHouseData(idx, H_PRICE,			cache_get_field_content_int(idx, "price"));
		SetHouseData(idx, H_RENT_PRICE,		cache_get_field_content_int(idx, "rent_price"));
		SetHouseData(idx, H_TYPE,			cache_get_field_content_int(idx, "type"));
		SetHouseData(idx, H_ENTRACE,		cache_get_field_content_int(idx, "entrance"));
		SetHouseData(idx, H_LOCK_STATUS,	bool: cache_get_field_content_int(idx, "lock"));

		SetHouseData(idx, H_POS_X,			cache_get_field_content_float(idx, "x"));
		SetHouseData(idx, H_POS_Y,			cache_get_field_content_float(idx, "y"));
		SetHouseData(idx, H_POS_Z,			cache_get_field_content_float(idx, "z"));

		SetHouseData(idx, H_EXIT_POS_X,		cache_get_field_content_float(idx, "exit_x"));
		SetHouseData(idx, H_EXIT_POS_Y,		cache_get_field_content_float(idx, "exit_y"));
		SetHouseData(idx, H_EXIT_POS_Z,		cache_get_field_content_float(idx, "exit_z"));
		SetHouseData(idx, H_EXIT_ANGLE,		cache_get_field_content_float(idx, "exit_angle"));

		SetHouseData(idx, H_CAR_POS_X,		cache_get_field_content_float(idx, "car_x"));
		SetHouseData(idx, H_CAR_POS_Y,		cache_get_field_content_float(idx, "car_y"));
		SetHouseData(idx, H_CAR_POS_Z,		cache_get_field_content_float(idx, "car_z"));
		SetHouseData(idx, H_CAR_ANGLE,		cache_get_field_content_float(idx, "car_angle"));

		SetHouseData(idx, H_STORE_X,		cache_get_field_content_float(idx, "store_x"));
		SetHouseData(idx, H_STORE_Y,		cache_get_field_content_float(idx, "store_y"));
		SetHouseData(idx, H_STORE_Z,		cache_get_field_content_float(idx, "store_z"));

		SetHouseData(idx, H_EVICTION,		cache_get_field_content_int(idx, "eviction"));

		SetHouseData(idx, H_STORE_METALL,	cache_get_field_content_int(idx, "store_metall"));
		SetHouseData(idx, H_STORE_DRUGS,	cache_get_field_content_int(idx, "store_drugs"));
		SetHouseData(idx, H_STORE_WEAPON,	cache_get_field_content_int(idx, "store_weapon"));
		SetHouseData(idx, H_STORE_AMMO,		cache_get_field_content_int(idx, "store_ammo"));
		SetHouseData(idx, H_STORE_SKIN,		cache_get_field_content_int(idx, "store_skin"));

		cache_get_field_content(idx, "owner_name", g_house[idx][H_OWNER_NAME], mysql, 21);

		// -------------------------
		SetHouseData(idx, H_STORE_LABEL, Text3D:-1);

		buffer[0] = GetHouseData(idx, H_TYPE);
		if(!strlen(GetHouseData(idx, H_NAME)))
			format(g_house[idx][H_NAME], 20, GetHouseTypeInfo(buffer[0], HT_NAME), 0);

		if(IsHouseOwned(idx) && !strcmp(GetHouseData(idx, H_OWNER_NAME), "None", true))
		{
			mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `house`=-1,`house_room`=-1,`house_type`=-1 WHERE `id`=%d LIMIT 1", GetHouseData(idx, H_OWNER_ID));
			mysql_query(mysql, query, false);

			SetHouseData(idx, H_OWNER_ID, 0);

			mysql_format(mysql, query, sizeof query, "UPDATE houses SET owner_id=0,improvements=0 WHERE id=%d", GetHouseData(idx, H_SQL_ID));
			mysql_query(mysql, query, false);
		}

		if(!IsHouseOwned(idx))
		{
			SetHouseData(idx, H_IMPROVEMENTS, 	0);
			SetHouseData(idx, H_LOCK_STATUS, 	false);
		}
		UpdateHouse(idx);

		HouseHealthInit(idx);
		HouseStoreInit(idx);

		buffer[0] = GetHouseData(idx, H_ENTRACE);
		if(buffer[0] != -1)
		{
			buffer[1] = g_entrance_flats_loaded[buffer[0]];

			g_entrance_flats_loaded[buffer[0]] ++;
			g_entrance_flat[buffer[0]][buffer[1] / 4][buffer[1] % 4] = idx;

			SetHouseData(idx, H_FLAT_ID, buffer[1]);
		}
	}
	g_house_loaded = rows;
	cache_delete(result);

	for(new i = 0; i < sizeof(g_house_type); i++)
	{
		CreateDynamic3DTextLabel("?????\n???????: {0095FF}'/vz' (???????? /exit)", -1, g_house_type[i][HT_ENTER_POS_X], g_house_type[i][HT_ENTER_POS_Y], g_house_type[i][HT_ENTER_POS_Z], 9.0);
	}

	CreateDynamic3DTextLabel("?????\n???????: {0095FF}'/vz' (???????? /exit)", -1, 1.2011, 1994.7356, 1554.2031, 9.0, _, _, _, -1, -1);
	CreateDynamic3DTextLabel("?????\n???????: {0095FF}'?????'", -1, -0.2940,2006.1187,1554.2031, 9.0, _, _, _, -1, -1);
	printf("[Houses]: ????? ?????????: %d", g_house_loaded);
}

public: LoadSettings()
{
	new Cache: result;

	result = mysql_query(mysql, "SELECT * FROM `server_settings`", true);

	//Config[admin_price] = cache_get_field_content_int(0, "admin_price", mysql);
    Config[helper_price] = cache_get_field_content_int(0, "helper_price", mysql);

    printf("%d odmen_price", Config[admin_price]);

    Config[sDistRub] = cache_get_field_content_int(0, "distrub", mysql);
    Config[sDonPower] = cache_get_field_content_int(0, "donpower", mysql);
    Config[sGiveCoins] = cache_get_field_content_int(0, "GiveCoins", mysql);
   // Config[sBonusMoney] = cache_get_field_content_int(0, "BonusMoney", mysql);
    //Config[sBonusDonate] = cache_get_field_content_int(0, "BonusDonate", mysql);
   /// Config[sBonusLevel] = cache_get_field_content_int(0, "BonusLevel", mysql);
    Config[sBuyBiz] = cache_get_field_content_int(0, "BuyBiz", mysql);

	if(ISBONUS == 0)
	{
	    Config[admin_price] = 200;
	    Config[sBonusDonate] = 0;
	    Config[sBonusMoney] = 200;
	}
	else
	{
	    Config[admin_price] = 99999999;
	    Config[sBonusDonate] = 2000;
	    Config[sBonusMoney] = 99999999;
	}

	cache_delete(result);

	printf("[CONFIG]: ????????? ??????? ?????????!");
}

public: LoadHousesRenters()
{
	new sql_id;
	new owner_id;
	new house_id;
	new room_id;
	new rent_time;
	new time;
	new owner_name[21];

	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT h.*, IFNULL(a.name, 'None') owner_name FROM houses_renters h LEFT JOIN accounts a ON a.id=h.owner_id", true);
	rows = cache_num_rows();

	for(new idx; idx < rows; idx ++)
	{
		sql_id = 	cache_get_field_content_int(idx, "id");

		owner_id = 	cache_get_field_content_int(idx, "owner_id");
		house_id = 	cache_get_field_content_int(idx, "house_id");
		room_id =	cache_get_field_content_int(idx, "room_id");
		rent_time =	cache_get_field_content_int(idx, "rent_time");
		time = 		cache_get_field_content_int(idx, "time");

		cache_get_field_content(idx, "owner_name", owner_name, mysql, 21);
		if(!strlen(owner_name))
			owner_name[0] = '\1';

		CallLocalFunction("HouseRenterInit", "iiiiiis", sql_id, owner_id, house_id, room_id, rent_time, time, owner_name);
	}
	cache_delete(result);

	printf("[Houses]: ??????????? ?????????: %d", rows);
}

public: HouseRenterInit(id, owner_id, house_id, room_id, rent_time, time, owner_name[])
{
	new houseid = GetHouseIndexBySQLID(house_id);
	if(houseid != -1)
	{
		if(0 <= room_id <= MAX_HOUSE_ROOMS-1)
		{
			SetHouseRenterInfo(houseid, room_id, HR_SQL_ID, id);
			SetHouseRenterInfo(houseid, room_id, HR_OWNER_ID, owner_id);
			SetHouseRenterInfo(houseid, room_id, HR_RENT_DATE, rent_time);
			SetHouseRenterInfo(houseid, room_id, HR_RENT_TIME, time);

			format(g_house_renters[houseid][room_id][HR_OWNER_NAME], 21, owner_name, 0);

			AddHouseRentersCount(houseid, +, 1);
		}
	}
}

public: ShowPlayerHouseInfo(playerid, houseid)
{
	if(0 <= houseid <= g_house_loaded-1)
	{
		if(GetPlayerInHouse(playerid) == -1)
		{
			SetPlayerUseListitem(playerid, houseid);

			new fmt_str[60];
			new string[257];
			new type = GetHouseData(houseid, H_TYPE);

			if(IsHouseOwned(houseid))
			{
				if(!GetHouseData(houseid, H_EVICTION))
				{
					format(fmt_str, sizeof fmt_str, "{FFFFFF}????????: \t\t\t{00FF00}%s\t\t\t\t\t\t\t\t\t\n\n", GetHouseData(houseid, H_OWNER_NAME));
					strcat(string, fmt_str);
				}
				else
				{
				}
			}
			
			format(fmt_str, sizeof fmt_str, "{FFFFFF}ù??: \t\t\t{00FF00}%s\t\t\t\t\t\t\t\t\t\n", GetHouseData(houseid, H_NAME));
			strcat(string, fmt_str);

			if(GetHouseData(houseid, H_ENTRACE) != -1)
			{
				print("OkeySSS");
				//format(fmt_str, sizeof fmt_str, "????:\t\t\t\t%d\n", GetHouseData(houseid, H_FLAT_ID) / 4 + 1);
				//strcat(string, fmt_str);

				format(fmt_str, sizeof fmt_str, "????? ????????:\t\t%d\n", GetHouseData(houseid, H_FLAT_ID) + 1);
				strcat(string, fmt_str);
				
				if(!IsHouseOwned(houseid)) strcat(string, "\n");

				format(fmt_str, sizeof fmt_str, "????? ????????:\t\t%d\n", GetHouseData(houseid, H_ENTRACE) + 1);
				strcat(string, fmt_str);
			}
			else
			{
				format(fmt_str, sizeof fmt_str, "????? ????: \t\t\t{00FF00}%d\t\t\t\t\t\t\t\t\t\n", houseid);
				strcat(string, fmt_str);
				
				if(!IsHouseOwned(houseid)) strcat(string, "\n");
			}

			format(fmt_str, sizeof fmt_str, "?????????? ??????: \t\t\t{00FF00}%d\t\t\t\t\t\t\t\t\t\n", GetHouseTypeInfo(type, HT_ROOMS));
			strcat(string, fmt_str);

			format(fmt_str, sizeof fmt_str, "?????????: \t\t\t{00FF00}%d ???\t\t\t\t\t\t\t\t\t\n", GetHouseData(houseid, H_PRICE));
			strcat(string, fmt_str);

			format(fmt_str, sizeof fmt_str, "?????????ù ??????????: \t\t\t{00FF00}%d ???\t\t\t\t\t\t\t\t\t", GetHouseData(houseid, H_RENT_PRICE));
			strcat(string, fmt_str);

			if(IsHouseOwned(houseid))
			{
				if(GetHouseData(houseid, H_IMPROVEMENTS) >= 4)
				{
					format(fmt_str, sizeof fmt_str, " {33CC99}(%d ???)", GetHouseData(houseid, H_RENT_PRICE) / 2);
					strcat(string, fmt_str);
				}
				Dialog(playerid, DIALOG_HOUSE_ENTER, DIALOG_STYLE_LIST, "{FF0000}??? ???ù?", string, "?????", "??????");
			}
			else Dialog(playerid, DIALOG_HOUSE_BUY, DIALOG_STYLE_LIST, "{33CC00}??? ????????", string, "??????", "??????");
		}
	}
	return 1;
}

public: ShowPlayerHouseDialog(playerid, operationid)
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
	if(houseid != -1)
	{
		if(GetHouseData(houseid, H_ENTRACE) != -1)
		{
			if(operationid >= HOUSE_OPERATION_CAR_DELIVERY)
			{
				operationid ++;
			}
		}
		switch(operationid)
		{
			case HOUSE_OPERATION_PARAMS:
			{
				if(GetHouseData(houseid, H_ENTRACE) != -1)
				{
					Dialog
					(
						playerid, DIALOG_HOUSE_PARAMS, DIALOG_STYLE_LIST,
						"{33AACC}????????? ?????????? ????",
						"1. {669966}??????? {FFFFFF}??? {CC3333}??????? {FFFFFF}???\n"\
						"2. ???????? ???\n"\
						"3. ???????? ????????? ?? GPS\n"\
						"4. ?????? ???????????",
						"???????", "?????"
					);
				}
				else
				{
					Dialog
					(
						playerid, DIALOG_HOUSE_PARAMS, DIALOG_STYLE_LIST,
						"{33AACC}????????? ?????????? ????",
						"1. {669966}??????? {FFFFFF}??? {CC3333}??????? {FFFFFF}???\n"\
						"2. ???????? ???\n"\
						"3. ????????? ????????? ? ???? {FF6600}(550 ???)\n"\
						"4. ???????? ????????? ?? GPS\n"\
						"5. ?????? ???????????",
						"???????", "?????"
					);
				}
			}
			case HOUSE_OPERATION_LOCK:
			{
				if(GetHouseData(houseid, H_LOCK_STATUS))
				{
					SetHouseData(houseid, H_LOCK_STATUS, false);
					SendClientMessage(playerid, 0x66CC00FF, "??? ??????");
				}
				else
				{
					SetHouseData(houseid, H_LOCK_STATUS, true);
					SendClientMessage(playerid, 0xFF6600FF, "??? ??????");
				}

				new query[75];
				mysql_format(mysql, query, sizeof query, "UPDATE `houses` SET `lock`=%d WHERE `id`=%d LIMIT 1", GetHouseData(houseid, H_LOCK_STATUS), GetHouseData(houseid, H_SQL_ID));
				mysql_query(mysql, query, false);

				CallLocalFunction("ShowPlayerHouseDialog", "ii", playerid, HOUSE_OPERATION_PARAMS);
			}
			case HOUSE_OPERATION_IMPROVEMENTS:
			{
				new fmt_str[75];
				new string[512];

				new str_numeric[14 + 1];
				new i_level = GetHouseData(houseid, H_IMPROVEMENTS);

				for(new idx; idx < sizeof(g_house_improvements); idx ++)
				{
					format(fmt_str, sizeof fmt_str, "%d ???????:\t%s\t\t", idx + 1, g_house_improvements[idx][I_NAME]);

					switch(idx)
					{
						case 1,4,5:
							strcat(fmt_str, "\t");

						case 6:
							strcat(fmt_str, "\t\t");
					}

					if(i_level > idx)
					{
						strins(fmt_str, "{2277AA}", 0, sizeof fmt_str);
						strcat(fmt_str, "???????");
					}
					else
					{
						if(i_level < idx)
						{
							strins(fmt_str, "{CC3344}", 0, sizeof fmt_str);
						}
						strcat(string, fmt_str);

						valfmt(str_numeric, g_house_improvements[idx][I_PRICE]);
						format(fmt_str, sizeof fmt_str, "%s ???", str_numeric);

						if(i_level == idx)
							strins(fmt_str, "{66CC33}", 0, sizeof fmt_str);
					}
					strcat(fmt_str, "\n");
					strcat(string, fmt_str);
				}
				Dialog(playerid, DIALOG_HOUSE_IMPROVEMENTS, DIALOG_STYLE_LIST, "{33AADD}????????ù ??ù ????", string, "??????", "?????");
			}
			case HOUSE_OPERATION_CAR_DELIVERY:
			{
				if(GetHouseData(houseid, H_ENTRACE) == -1)
				{
					new vehicleid = GetPlayerOwnableCar(playerid);
					if(vehicleid != INVALID_VEHICLE_ID)
					{
						if(GetHouseData(houseid, H_IMPROVEMENTS) == 6)
						{	
							new price = 550;
							if(GetPlayerMoneyEx(playerid) >= price)
							{
								GivePlayerMoneyEx(playerid, -price, "???????? ù? ? ???? (/home)", true, true);

								SetVehiclePos
								(
									vehicleid,
									-0.3530,
									2001.3107,
									1553.8632
								);

								SetVehicleZAngle(vehicleid, GetHouseData(houseid, H_CAR_ANGLE));
								SetVehicleParam(vehicleid, V_ENGINE, IsABike(vehicleid) ? VEHICLE_PARAM_ON : VEHICLE_PARAM_OFF);

								new type = GetHouseData(houseid, H_TYPE);

								LinkVehicleToInterior(vehicleid, GetHouseTypeInfo(type, HT_INTERIOR));
								SetVehicleVirtualWorld(vehicleid, houseid + 2000);

								return SendClientMessage(playerid, 0x3399FFFF, "ù???????? ??? ????????? ? ?????? ????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "???????????? ?????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ??????");
					}
					else
					{
						if(GetPlayerOwnableCars(playerid) == 0)
							SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
						else
							SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
					}
				}
				else SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ?????????? ?????");

				CallLocalFunction("ShowPlayerHouseDialog", "ii", playerid, HOUSE_OPERATION_PARAMS);
			}
			case HOUSE_OPERATION_CAR_GPS:
			{
				if(!callcmd::getmycar(playerid, ""))
				{
					CallLocalFunction("ShowPlayerHouseDialog", "ii", playerid, HOUSE_OPERATION_PARAMS);
				}
			}
			case HOUSE_OPERATION_RENTERS:
			{
				if(GetHouseRentersCount(houseid) > 0)
				{
					new type = GetHouseData(houseid, H_TYPE);
					new rooms = GetHouseTypeInfo(type, HT_ROOMS);

					if (rooms > MAX_HOUSE_ROOMS) {
						rooms = MAX_HOUSE_ROOMS;
					}

					new fmt_str[21 + 1];
					new string[MAX_HOUSE_ROOMS * (sizeof fmt_str) + 1];

					for(new idx, count; idx < rooms; idx ++)
					{
						if(!IsHouseRoomOwned(houseid, idx)) continue;

						format(fmt_str, sizeof fmt_str, "%s\n", GetHouseRenterInfo(houseid, idx, HR_OWNER_NAME));
						strcat(string, fmt_str);

						SetPlayerListitemValue(playerid, count ++, idx);
					}
					Dialog(playerid, DIALOG_HOUSE_RENTERS, DIALOG_STYLE_LIST, "{33AACC}?????? ???????????", string, "???????", "?????");
				}
				else
				{
					Dialog
					(
						playerid, DIALOG_HOUSE_INFO, DIALOG_STYLE_MSGBOX,
						"{33AACC}?????? ???????????",
						"{FFFFFF}? ????? ????, ????? ???, ?????? ????? ?? ?????????",
						"?????", ""
					);
				}
			}
		}
	}
	return 1;
}

public: UpdateRealtorHomeInfo()
{
	new count = -1;
	new fmt_str[128];
	new free_houses = GetFreeHousesCount();

	new new_line = floatround((float(free_houses) / 10) + 2, floatround_ceil);
	if(new_line > 28)
	{
		new_line = 28;
	}

	g_house_realtor_list = "{FFFFFF}";
	for(new idx; idx < g_house_loaded; idx ++)
	{
		if(IsHouseOwned(idx)) continue;
		if(++count > new_line)
		{
			count = -1;
		}

		format(fmt_str, sizeof fmt_str, "%d%s", idx, count != -1 ? ("\t") : ("\n"));
		strcat(g_house_realtor_list, fmt_str);
	}

	format
	(
		fmt_str, sizeof fmt_str,
		"?????ù??? ????????????\n"\
		"(??????ù???ù ?????? ???)\n\n"\
		"{FF6633}??????? ?????: %d\n"\
		"{99FF33}???????? ?????: %d",
		g_house_loaded - free_houses,
		free_houses
	);
	UpdateDynamic3DTextLabelText(g_house_realtor_label, 0xCCFF66FF, fmt_str);
}

public: UpdateHouseStore(houseid)
{
	if(GetHouseData(houseid, H_STORE_LABEL) != Text3D:-1)
	{
		new fmt_str[256];

		format
		(
			fmt_str, sizeof fmt_str,
			"????\n"\
			"{FFFFFF}?????????: {6699FF}%d ?? 700 ??\n"\
			"{FFFFFF}?????????: {6699FF}%d ?? 2000 ?\n"\
			"{FFFFFF}??????: {6699FF}%s\n"\
			"{FFFFFF}???????: {6699FF}%d ?? 3000 ??\n"\
			"{FFFFFF}??????: {FF6600}%s",
			GetHouseData(houseid, H_STORE_METALL),
			GetHouseData(houseid, H_STORE_DRUGS),
			GetHouseData(houseid, H_STORE_WEAPON) ? GetWeaponName(GetHouseData(houseid, H_STORE_WEAPON)) : ("???"),
			GetHouseData(houseid, H_STORE_AMMO),
			GetHouseData(houseid, H_STORE_SKIN) ? ("????") : ("???")
		);
		UpdateDynamic3DTextLabelText(GetHouseData(houseid, H_STORE_LABEL), 0xFFFF00FF, fmt_str);
	}
}

public: EvictHouseRentersAll(houseid)
{
	new query[128];

	mysql_format(mysql, query, sizeof query, "UPDATE accounts SET house_type=-1,house_room=-1,house=-1 WHERE house=%d AND house_type=%d", houseid, HOUSE_TYPE_ROOM);
	mysql_tquery(mysql, query, "", "");

	mysql_format(mysql, query, sizeof query, "DELETE FROM houses_renters WHERE house_id=%d", GetHouseData(houseid, H_SQL_ID));
	mysql_tquery(mysql, query, "", "");

	for(new idx; idx < MAX_HOUSE_ROOMS; idx ++)
	{
		if(!IsHouseRoomOwned(houseid, idx)) continue;

		SetHouseRenterInfo(houseid, idx, HR_SQL_ID, 	0);
		SetHouseRenterInfo(houseid, idx, HR_OWNER_ID, 	0);
	}

	foreach(new playerid : Player)
	{
		if(!IsPlayerLogged(playerid)) continue;
		if(GetPlayerHouse(playerid, HOUSE_TYPE_ROOM) != houseid) continue;

		SetPlayerData(playerid, P_HOUSE, -1);
		SetPlayerData(playerid, P_HOUSE_ROOM, -1);
		SetPlayerData(playerid, P_HOUSE_TYPE, -1);

		SendClientMessage(playerid, 0x3399FFFF, "?? ???? ???????? ?? ????");
	}
}

public: LoadBusinesses()
{
	new query[85], buffer[2];
	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT b.*, IFNULL(a.name, 'None') AS owner_name FROM business b LEFT JOIN accounts a ON a.id=b.owner_id", true);
	rows = cache_num_rows();

	if(rows > MAX_BUSINESS)
	{
		rows = MAX_BUSINESS;
		print("[Business]: DB rows > MAX_BUSINESS");
	}
	for(new idx; idx < rows; idx ++)
	{
		SetBusinessData(idx, B_SQL_ID, 		cache_get_field_content_int(idx, "id"));
		SetBusinessData(idx, B_OWNER_ID, cache_get_field_content_int(idx, "owner_id"));

		cache_get_field_content(idx, "name", g_business[idx][B_NAME], mysql, 26);
		cache_get_field_content(idx, "kriha", g_business[idx][B_KRIHA], mysql, 24);

		SetBusinessData(idx, B_IMPROVEMENTS,	cache_get_field_content_int(idx, "improvements"));
		SetBusinessData(idx, B_PRODS,			cache_get_field_content_int(idx, "products"));
		SetBusinessData(idx, B_PROD_PRICE,		cache_get_field_content_int(idx, "prod_price"));
		SetBusinessData(idx, B_BALANCE,			cache_get_field_content_int(idx, "balance"));
		SetBusinessData(idx, B_RENT_DATE,		cache_get_field_content_int(idx, "rent_time"));
		SetBusinessData(idx, B_PRICE,			cache_get_field_content_int(idx, "price"));
		SetBusinessData(idx, B_RENT_PRICE,		cache_get_field_content_int(idx, "rent_price"));

		SetBusinessData(idx, B_TYPE,			cache_get_field_content_int(idx, "type"));
		SetBusinessData(idx, B_INTERIOR,		cache_get_field_content_int(idx, "interior"));

		SetBusinessData(idx, B_ENTER_PRICE,		cache_get_field_content_int(idx, "enter_price"));
		SetBusinessData(idx, B_ENTER_MUSIC,		cache_get_field_content_int(idx, "enter_music"));

		SetBusinessData(idx, B_LOCK_STATUS,		bool: cache_get_field_content_int(idx, "lock"));

		SetBusinessData(idx, B_POS_X,			cache_get_field_content_float(idx, "x"));
		SetBusinessData(idx, B_POS_Y,			cache_get_field_content_float(idx, "y"));
		SetBusinessData(idx, B_POS_Z,			cache_get_field_content_float(idx, "z"));

		SetBusinessData(idx, B_EXIT_POS_X,		cache_get_field_content_float(idx, "exit_x"));
		SetBusinessData(idx, B_EXIT_POS_Y,		cache_get_field_content_float(idx, "exit_y"));
		SetBusinessData(idx, B_EXIT_POS_Z,		cache_get_field_content_float(idx, "exit_z"));
		SetBusinessData(idx, B_EXIT_ANGLE,		cache_get_field_content_float(idx, "exit_angle"));

		SetBusinessData(idx, B_EVICTION,		cache_get_field_content_int(idx, "eviction"));

		cache_get_field_content(idx, "owner_name", g_business[idx][B_OWNER_NAME], mysql, 21);

		// -------------------------
if(GetBusinessData(idx, B_SQL_ID) == 34)
{
SetBusinessData(idx, B_ORDER_ID, -1);
		SetBusinessData(idx, B_LABEL, CreateDynamic3DTextLabel(GetBusinessData(idx, B_NAME), 0xFFFF00FF, -916.038757,1187.975952,10.684749 + 1.0, 6.50));
}
else {
		SetBusinessData(idx, B_ORDER_ID, -1);
		SetBusinessData(idx, B_LABEL, CreateDynamic3DTextLabel(GetBusinessData(idx, B_NAME), 0xFFFF00FF, GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), GetBusinessData(idx, B_POS_Z) + 1.0, 6.50));
}
		if(IsBusinessOwned(idx) && !strcmp(GetBusinessData(idx, B_OWNER_NAME), "None", true))
		{
			mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `business`=-1 WHERE `id`=%d LIMIT 1", GetBusinessData(idx, B_OWNER_ID));
			mysql_query(mysql, query, false);

			SetBusinessData(idx, B_OWNER_ID, 0);

			mysql_format(mysql, query, sizeof query, "UPDATE business SET owner_id=0,improvements=0 WHERE id=%d", GetBusinessData(idx, B_SQL_ID));
			mysql_query(mysql, query, false);
		}

		if(!IsBusinessOwned(idx))
		{
			SetBusinessData(idx, B_PRODS,		0);
			SetBusinessData(idx, B_PROD_PRICE, 	0);
			SetBusinessData(idx, B_LOCK_STATUS, false);

			SetBusinessData(idx, B_ENTER_MUSIC, 0);
			SetBusinessData(idx, B_ENTER_PRICE, 0);

			if(GetBusinessData(idx, B_IMPROVEMENTS) >= 6)
			{
				mysql_format(mysql, query, sizeof query, "DELETE FROM business_gps WHERE bid=%d", idx);
				mysql_query(mysql, query, false);
			}
		}
		CallLocalFunction("UpdateBusinessLabel", "i", idx);

		BusinessHealthPickupInit(idx);

if(GetBusinessData(idx, B_SQL_ID) == 34)
{
CreatePickup(1239, 23, GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), GetBusinessData(idx, B_POS_Z), 0, PICKUP_ACTION_TYPE_BIZ_ENTER, idx);
        CreateDynamicMapIcon(-916.038757,1187.975952,10.684749, 52, 0, 0, 0, -1, STREAMER_MAP_ICON_SD, MAPICON_LOCAL);
}
else {
		CreatePickup(1318, 23, GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), GetBusinessData(idx, B_POS_Z), 0, PICKUP_ACTION_TYPE_BIZ_ENTER, idx);
        CreateDynamicMapIcon(GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), GetBusinessData(idx, B_POS_Z), 52, 0, 0, 0, -1, STREAMER_MAP_ICON_SD, MAPICON_LOCAL);
        }
		//CreateDynamicMapIcon(GetFuelStationData(idx, FS_POS_X), GetFuelStationData(idx, FS_POS_Y), GetFuelStationData(idx, FS_POS_Z), 47, 0, 0, 0, -1, STREAMER_MAP_ICON_SD, MAPICON_LOCAL);
	}
	g_business_loaded = rows;
	cache_delete(result);

	for(new idx; idx < sizeof g_business_interiors; idx ++)
	{
		CreatePickup(1318, 23, GetBusinessInteriorInfo(idx, BT_EXIT_POS_X), GetBusinessInteriorInfo(idx, BT_EXIT_POS_Y), GetBusinessInteriorInfo(idx, BT_EXIT_POS_Z), -1, PICKUP_ACTION_TYPE_BIZ_EXIT, idx);
		buffer[0] = -1;

		switch(idx)
		{
			case BUSINESS_INTERIOR_SHOP_24_7:
			{
				CreateDynamic3DTextLabel
				(
					"??????\n"\
					"???????\n"\
					"{FFCD00}??????? /buy",
					0x00CC00EE,
					GetBusinessInteriorInfo(idx, BT_BUY_POS_X),
					GetBusinessInteriorInfo(idx, BT_BUY_POS_Y),
					GetBusinessInteriorInfo(idx, BT_BUY_POS_Z) + 0.8,
					8.0
				);
				CreatePickup(1239, 23, GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), -1, PICKUP_ACTION_TYPE_BIZ_SHOP_247, idx);
			}
			case BUSINESS_INTERIOR_CLUB, BUSINESS_INTERIOR_CASINO:
			{
				CreateDynamic3DTextLabel
				(
					"???? ????:\n\n"\
					"{6699FF}1. ???????\n"\
					"2. ????\n"\
					"3. ????\n"\
					"4. ??????????\n"\
					"5. ?????\n"\
					"6. ????ù?\n"\
					"7. ?????\n"\
					"8. ??????\n"\
					"{00CC66}9. ???????\n"\
					"10. ??????",
					0xFFFFFFCC,
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_X),
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_Y),
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_Z),
					9.0
				);
				buffer[0] = CreateDynamicCP(GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), 1.0, _, _, _, 8.0);
			}
			case BUSINESS_INTERIOR_REALTOR_BIZ:
			{
				g_business_realtor_label = CreateDynamic3DTextLabel
				(
					"?????ù??? ???????",
					0xCCFF66FF,
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_X),
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_Y),
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_Z),
					10.0
				);
				//CreatePickup(1239, 23, GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), -1);
				buffer[0] = CreateDynamicCP(GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z) - 1.0, 1.2, _, _, _, 10.0);

				CallLocalFunction("UpdateRealtorBizInfo", "");
			}
			case BUSINESS_INTERIOR_REALTOR_HOME:
			{
				g_house_realtor_label = CreateDynamic3DTextLabel
				(
					"?????ù??? ????????????",
					0xCCFF66FF,
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_X),
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_Y),
					GetBusinessInteriorInfo(idx, BT_LABEL_POS_Z),
					10.0
				);
				CreatePickup(1273, 23, 158.4875, 745.8184, 25.8272, -1, PICKUP_ACTION_TYPE_REALTOR_HOME, idx);
				CreatePickup(1272, 23, 156.3270, 746.5958, 25.8272, -1, PICKUP_ACTION_TYPE_REALTOR_HOME, idx);

				CreatePickup(1239, 23, GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), -1);
				buffer[0] = CreateDynamicCP(GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), 0.7, _, _, _, 5.0);

				CallLocalFunction("UpdateRealtorHomeInfo", "");
			}
			case BUSINESS_INTERIOR_HOTEL:
			{
				CreatePickup(1277, 23, GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), -1);

				CreateDynamic3DTextLabel("??????\n{FFFFFF}????. ?????????", 0x3399FFFF, GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z) + 0.8, 5.0);
				buffer[0] = CreateDynamicCP(GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), 1.2, _, _, _, 20.0);
			}
			
			case BUSINESS_INTERIOR_CELL_SALON:
			{
				CreateDynamic3DTextLabel
				(
					"???????\n"\
					"?????\n"\
					"{FFCD00}??????? /buy",
					0x00CC00EE,
					GetBusinessInteriorInfo(idx, BT_BUY_POS_X),
					GetBusinessInteriorInfo(idx, BT_BUY_POS_Y),
					GetBusinessInteriorInfo(idx, BT_BUY_POS_Z) + 0.8,
					8.0
				);
				CreatePickup(1318, 23, GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), -1, PICKUP_ACTION_TYPE_CELL_SALON, idx);
			}
			case BUSINESS_INTERIOR_CAR_TUNING:
			{
				CreatePickup(1318, 23, GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), -1, PICKUP_ACTION_TYPE_BIZ_CAR_TUN, idx);
				CreateDynamic3DTextLabel("???????????? ??????????\nù?????", 0xCC6600EE, GetBusinessInteriorInfo(idx, BT_LABEL_POS_X), GetBusinessInteriorInfo(idx, BT_LABEL_POS_Y), GetBusinessInteriorInfo(idx, BT_LABEL_POS_Z), 5.0);
			}
			case BUSINESS_INTERIOR_SHOP_GUN:
			{
				CreateDynamic3DTextLabel
				(
					"??????\n"\
					"?????ù\n"\
					"??????? /buy",
					0x32a44bFF,
					GetBusinessInteriorInfo(idx, BT_BUY_POS_X),
					GetBusinessInteriorInfo(idx, BT_BUY_POS_Y),
					GetBusinessInteriorInfo(idx, BT_BUY_POS_Z) + 0.8,
					8.0
				);
				CreatePickup(1274, 23, GetBusinessInteriorInfo(idx, BT_BUY_POS_X), GetBusinessInteriorInfo(idx, BT_BUY_POS_Y), GetBusinessInteriorInfo(idx, BT_BUY_POS_Z), -1, PICKUP_ACTION_TYPE_BIZ_SHOP_GUN, idx);
			}
		}
		SetBusinessInteriorInfo(idx, BT_BUY_CHECK_ID, buffer[0]);
	}
	BusinesGPSListInit();

	printf("[Business]: ???????? ?????????: %d", g_business_loaded);
}

public: UpdateBusinessLabel(businessid)
{
	new fmt_str[129 + 1];

	if (!IsBusinessOwned(businessid))
{
    format(
        fmt_str, sizeof fmt_str,
        "{ffff00}%s (%d)\n{00FF00}?????? ????????ù ?? ????????\n?????: %s",
        GetBusinessData(businessid, B_NAME),
        businessid,
        GetBusinessData(businessid, B_KRIHA)
    );
}
	else
	{
		format
		(
			fmt_str, sizeof fmt_str,
			"{ffff00}%s (%d)\n"\
			"?????: %s\n"\
			"{FFFFFF}????????: {0099FF}%s\n",
			GetBusinessData(businessid, B_NAME),
			businessid, 
			GetBusinessData(businessid, B_KRIHA),
			GetBusinessData(businessid, B_OWNER_NAME)
		);

		if(!GetBusinessData(businessid, B_LOCK_STATUS))
		{
			if(GetBusinessData(businessid, B_ENTER_PRICE) > 0)
			{
				format(fmt_str, sizeof fmt_str, "%s{66CC00}????: {FF9900}%d ???", fmt_str, GetBusinessData(businessid, B_ENTER_PRICE));
			}
			else strcat(fmt_str, "{66CC00}???? ?????????");
		}
		else strcat(fmt_str, "{FF6600}???????");
	}
	UpdateDynamic3DTextLabelText(GetBusinessData(businessid, B_LABEL), 0xFFFF00FF, fmt_str);
}

public: UpdateRealtorBizInfo()
{
	new count = 0;
	new fmt_str[128];

	g_business_realtor_list = "";
	for(new idx; idx < g_business_loaded; idx ++)
	{
		if(IsBusinessOwned(idx)) continue;
		g_business_realtor_list_idx[count ++] = idx;

		format(fmt_str, sizeof fmt_str, "%d\n", idx);
		strcat(g_business_realtor_list, fmt_str);
	}

	count = GetFreeBusinessCount();
	format
	(
		fmt_str, sizeof fmt_str,
		"?????ù??? ???????\n"\
		"(??????ù???ù ?????? ???)\n\n"\
		"{FF6633}??????? ????????: %d\n"\
		"{99FF33}???????? ????????: %d",
		g_business_loaded - count,
		count
	);
	UpdateDynamic3DTextLabelText(g_business_realtor_label, 0xCCFF66FF, fmt_str);
}

public: SetRealtorMakePhoto(playerid, type, index)
{
	if(GetPlayerData(playerid, P_REALTOR_TYPE) == type)
	{
		new Float: angle;
		new Float: pos_x, Float: pos_y, Float: pos_z;
		new Float: exit_x, Float: exit_y, Float:cam_x, Float:cam_y;

		switch(type)
		{
			case REALTOR_TYPE_HOUSE:
			{
				new entranceid = GetHouseData(index, H_ENTRACE);
				if(entranceid != -1)
				{
					pos_x = GetEntranceData(entranceid, E_POS_X);
					pos_y = GetEntranceData(entranceid, E_POS_Y);
					pos_z = GetEntranceData(entranceid, E_POS_Z);

					exit_x = GetEntranceData(entranceid, E_EXIT_POS_X);
					exit_y = GetEntranceData(entranceid, E_EXIT_POS_Y);

					new fmt_str[32];
					format(fmt_str, sizeof fmt_str, "????? ????????: %d", entranceid + 1);
					SendClientMessage(playerid, 0x999999FF, fmt_str);
				}
				else
				{
					pos_x = GetHouseData(index, H_POS_X);
					pos_y = GetHouseData(index, H_POS_Y);
					pos_z = GetHouseData(index, H_POS_Z);

					exit_x = GetHouseData(index, H_EXIT_POS_X);
					exit_y = GetHouseData(index, H_EXIT_POS_Y);
				}
			}
			case REALTOR_TYPE_BIZ:
			{
				pos_x = GetBusinessData(index, B_POS_X);
				pos_y = GetBusinessData(index, B_POS_Y);
				pos_z = GetBusinessData(index, B_POS_Z);

				exit_x = GetBusinessData(index, B_EXIT_POS_X);
				exit_y = GetBusinessData(index, B_EXIT_POS_Y);
			}
		}
		angle = GetAngleToPoint(exit_x, exit_y, pos_x, pos_y);
		SetPlayerPos(playerid, pos_x, pos_y, pos_z);

		cam_x = pos_x + 15.0 * -floatsin(angle, degrees);
		cam_y = pos_y + 15.0 * floatcos(angle, degrees);

		SetPlayerCameraPos(playerid, cam_x, cam_y, pos_z + 10.0);
		SetPlayerCameraLookAt(playerid, pos_x, pos_y, pos_z);

		//HidePlayerWaitPanel(playerid);
		SetPlayerData(playerid, P_REALTOR_TYPE, type);
	}
}

public:	LoadFuelStations()
{
	new query[85];
	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT fs.*, IFNULL(a.name, 'None') AS owner_name FROM fuel_stations fs LEFT JOIN accounts a ON a.id=fs.owner_id", true);
	rows = cache_num_rows();

	if(rows > MAX_FUEL_STATIONS)
	{
		rows = MAX_FUEL_STATIONS;
		print("[FuelST]: DB rows > MAX_FUEL_STATIONS");
	}

	for(new idx; idx < rows; idx ++)
	{
		SetFuelStationData(idx, FS_SQL_ID,		cache_get_field_content_int(idx, "id"));
		SetFuelStationData(idx, FS_OWNER_ID, 	cache_get_field_content_int(idx, "owner_id"));

		cache_get_field_content(idx, "name", g_fuel_station[idx][FS_NAME], mysql, 20);

		SetFuelStationData(idx, FS_IMPROVEMENTS, cache_get_field_content_int(idx, "improvements"));
		SetFuelStationData(idx, FS_FUELS, 			cache_get_field_content_int(idx, "fuels"));
		SetFuelStationData(idx, FS_FUEL_PRICE,		cache_get_field_content_int(idx, "fuel_price"));
		SetFuelStationData(idx, FS_BUY_FUEL_PRICE,	cache_get_field_content_int(idx, "buy_fuel_price"));
		SetFuelStationData(idx, FS_BALANCE,			cache_get_field_content_int(idx, "balance"));
		SetFuelStationData(idx, FS_RENT_DATE,		cache_get_field_content_int(idx, "rent_time"));

		SetFuelStationData(idx, FS_PRICE,			cache_get_field_content_int(idx, "price"));
		SetFuelStationData(idx, FS_RENT_PRICE,		cache_get_field_content_int(idx, "rent_price"));

		SetFuelStationData(idx, FS_LOCK_STATUS,		bool: cache_get_field_content_int(idx, "lock"));

		SetFuelStationData(idx, FS_POS_X,			cache_get_field_content_float(idx, "x"));
		SetFuelStationData(idx, FS_POS_Y,			cache_get_field_content_float(idx, "y"));
		SetFuelStationData(idx, FS_POS_Z,			cache_get_field_content_float(idx, "z"));

		SetFuelStationData(idx, FS_EVICTION,		cache_get_field_content_int(idx, "eviction"));

		cache_get_field_content(idx, "owner_name", g_fuel_station[idx][FS_OWNER_NAME], mysql, 21);
		// -------------------------

		SetFuelStationData(idx, FS_LABEL, CreateDynamic3DTextLabel(GetFuelStationData(idx, FS_NAME), 0x3399FFFF, GetFuelStationData(idx, FS_POS_X), GetFuelStationData(idx, FS_POS_Y), GetFuelStationData(idx, FS_POS_Z) + 0.5, 15.0));
		SetFuelStationData(idx, FS_AREA, CreateDynamicSphere(GetFuelStationData(idx, FS_POS_X), GetFuelStationData(idx, FS_POS_Y), GetFuelStationData(idx, FS_POS_Z), 15.0));

		SetFuelStationData(idx, FS_ORDER_ID, -1);

		if(IsFuelStationOwned(idx) && !strcmp(GetFuelStationData(idx, FS_OWNER_NAME), "None", true))
		{
			format(query, sizeof query, "UPDATE accounts SET `fuel_st`=-1 WHERE `id`=%d LIMIT 1", GetFuelStationData(idx, FS_OWNER_ID));
			mysql_query(mysql, query, false);

			SetFuelStationData(idx, FS_OWNER_ID, 0);

			mysql_format(mysql, query, sizeof query, "UPDATE fuel_stations SET owner_id=0 WHERE id=%d", GetFuelStationData(idx, FS_SQL_ID));
			mysql_query(mysql, query, false);
		}

		if(!IsFuelStationOwned(idx))
		{
			SetFuelStationData(idx, FS_FUELS, 1000);
			SetFuelStationData(idx, FS_FUEL_PRICE, 3);

			SetFuelStationData(idx, FS_LOCK_STATUS, false);
		}
		CallLocalFunction("UpdateFuelStationLabel", "i", idx);

		#if defined FUEL_ST_CREATED_PICKUP
			CreatePickup(1650, 23, GetFuelStationData(idx, FS_POS_X), GetFuelStationData(idx, FS_POS_Y), GetFuelStationData(idx, FS_POS_Z), 0, PICKUP_ACTION_TYPE_FUEL_STATION, idx);
		#endif

		CreateDynamicMapIcon(GetFuelStationData(idx, FS_POS_X), GetFuelStationData(idx, FS_POS_Y), GetFuelStationData(idx, FS_POS_Z), 47, 0, 0, 0, -1, STREAMER_MAP_ICON_SD, MAPICON_LOCAL);
	}
	g_fuel_station_loaded = rows;
	cache_delete(result);

	printf("[FuelST]: ???????? ?????????: %d", g_fuel_station_loaded);
}

public: UpdateFuelStationLabel(stationid)
{
	new fmt_str[350];

	if(!IsFuelStationOwned(stationid))
	{
		format
		(
			fmt_str, sizeof fmt_str,
			"{ffff00} ??? (none)\n"\
			"{0099CC}????????? ???????:\n"\
			"  \n"\
			"{FFFFFF}??-92: {00CC00}50  ???\n"\
			"{FFFFFF}??-95: {00CC00}50 ???\n"\
			"{FFFFFF}??-98: {00CC00}50 ???\n"\
			"{FFFFFF}??-100: {00CC00}50 ???\n"\
			"{FFFFFF}??-?ù: {00CC00}50  ???\n"\
			"  \n"\
			"{66CC00}?????? ????????ù ?? ????????\n"\
			"{66CC00}?????: ??????????? ???\n"\
			"{0099CC}??ù ???????? ??????? /i ??? ??????? ?????",
			GetFuelStationData(stationid, FS_NAME),
			GetFuelStationData(stationid, FS_NAME),
			GetFuelStationData(stationid, FS_NAME)
		);

	}
	else
	{
		format
		(
			fmt_str, sizeof fmt_str,
			"%s\n"\
			"?????: ??????????ù ???\n"\
			"{FFFFFF}????????: {66CC00}%s\n"\
			"  \n"\
			"{66CC00}????????? ???????:\n"\
			"{FFFFFF}??-92: {00CC00}50  ???\n"\
			"{FFFFFF}??-95: {00CC00}50 ???\n"\
			"{FFFFFF}??-98: {00CC00}50 ???\n"\
			"{FFFFFF}??-100: {00CC00}50 ???\n"\
			"{FFFFFF}??-?ù: {00CC00}50  ???\n"\
			"{0099CC}??ù ???????? ??????? /i ??? ??????? ?????\n",
			GetFuelStationData(stationid, FS_NAME),
			GetFuelStationData(stationid, FS_OWNER_NAME),
			GetFuelStationData(stationid, FS_FUEL_PRICE) * 10
		);

	}
	UpdateDynamic3DTextLabelText(GetFuelStationData(stationid, FS_LABEL), 0x3399FFFF, fmt_str);
}

public: OnGiveReferBonus(refer_id)
{
	new fmt_str[155];
	new playerid = GetPlayerIDBySqlID(refer_id);

	if(playerid != INVALID_PLAYER_ID)
	{
		GivePlayerMoneyEx(playerid, REFER_BONUS_MONEY, "??????????ù ????????? '???????? ?????'", true, false);

		format(fmt_str, sizeof fmt_str, "????????ù??! ???????????? ???? ????? ?????? 5 ?????ù, ?? ????????? %d ??????", REFER_BONUS_MONEY);
		SendClientMessage(playerid, 0x66CC00FF, fmt_str);
	}
	else
	{
		format(fmt_str, sizeof fmt_str, "INSERT INTO money_log (uid,uip,time,money,description) VALUES (%d,'%s',%d,%d,'%s')", refer_id, "system", gettime(), REFER_BONUS_MONEY, "??????????ù ????????? '???????? ?????'");
		mysql_query(mysql, fmt_str, false);

		format(fmt_str, sizeof fmt_str, "UPDATE accounts SET money=money+%d WHERE id=%d LIMIT 1", REFER_BONUS_MONEY, refer_id);
		mysql_query(mysql, fmt_str, false);

		if(mysql_errno() != 0)
			printf("[Referal System]: ????????? ?????? ??? ?????? ?????? ?????? ?%d", refer_id);
	}
}

public: SpeedBooster()
{
	foreach(new playerid : Player)
	{
		if(!IsPlayerLogged(playerid)) continue;
		if(!IsPlayerDriver(playerid)) continue;
		
		new vehicleid = GetPlayerVehicleID(playerid);

		if(vehicleid == INVALID_VEHICLE_ID)
		    continue;

		if(!IsAOwnableCar(vehicleid))
		    continue;

		new index = GetVehicleData(vehicleid, V_ACTION_ID);

		
		new Float: engine_boost,
		    Float: brake_boost;

		for(new idx; idx < GetOwnableCarData(index, OC_PT_ENGINE); idx ++)
		    engine_boost += engine_ptune_boost[idx];

		for(new idx; idx < GetOwnableCarData(index, OC_PT_BRAKE); idx ++)
		    brake_boost += brake_ptune_boost[idx];

		if(GetPVarInt(playerid, "supercar"))
		{
			new pedal_type = player_press_pedal[playerid];

			if(pedal_type != PEDAL_TYPE_NONE)
			{
				//new vehicleid = GetPlayerVehicleID(playerid),
				new Float: v_speed = GetVehicleSpeed(vehicleid);

				if(v_speed > 25.0 || v_speed < -25.0)
				{
					switch(pedal_type)
					{
						case PEDAL_TYPE_GAS:
						{
							v_speed += (0.1 * GetPVarInt(playerid, "supercar_multiplier"));
						}
						case PEDAL_TYPE_BRAKE:
						{
							v_speed -= 0.6;
						}
					}

					SetVehicleSpeed(vehicleid, v_speed);
				}
			}
		}
	}
}

public: OnSecondTimer()
{
	new hour, minute, second, year, month, day;
	gettime(hour, minute, second);
	getdate(year, month, day);

	new fmt_str[150];

	format(fmt_str, sizeof fmt_str, "%d:%02d:%02d-%02d.%02d.%d", hour, minute, second, day, month, year);
	TextDrawSetString(admin_time_TD, fmt_str);
	
	
	new newhour,newminute,newsecond;
    gettime(newhour, newminute, newsecond);

	new time = gettime();
	if(minute && !newsecond)
	{
			print("elapsed lol");
			OnMinuteTimer(bool: GetElapsedTime(time, g_last_m_timer_time, CONVERT_TIME_TO_DAYS));
	}

	foreach(new playerid : Player)
	{
		CallLocalFunction("OnPlayerTimer", "i", playerid);
	}

	for(new carriageid; carriageid < sizeof miner_carriage; carriageid ++)
		MinerCarriageUpdate(carriageid);

	if(g_capture[C_STATUS] && g_capture[C_TIME] > 0)
	{
		-- g_capture[C_TIME];

		UpdateCaptureTextDraw();

		if(g_capture[C_TIME] == 0)
			EndCapture();
	}

	UpdateReporterText();

	OnTimerMinuteOne();
}

public: OnMinuteTimer(bool: new_day)
{
	print("minute timer");
	new time;
	new hour, minute, second;

	time = gettime();
	gettime(hour, minute, second);

	printf("minute %d", minute);

	switch(minute)
	{
	    //case 10: SendClientMessageToAll(COR_SERVER, "[?????????ù]: {FFFFFF}?? ??????? ???? DeathMatch Zone "c_s"/gps > ??????????ù > DeathMatch Zone!");
	    //case 15: SendClientMessageToAll(COR_SERVER, "[?????????ù]: {FFFFFF}?? ??????? ???? ??????? ??????. "c_s"/duel");
	    //case 20: SendClientMessageToAll(COR_SERVER, "[?????????ù]: {FFFFFF}?????? ???? ?? 3 ???? ???? ?? ?????? ???????? ????????? ?????-????. "c_s"/opencase - ??????? ????");
		//case 27: SendClientMessageToAll(-1, "{ffff00}| ???? ?? ???ù??? ????????? ????? ????????????? ??????????? ???????? ????? 1 ??????!");
        //case 28: SendClientMessageToAll(-1, "{ffff00}| ???? ?? ???ù??? ????????? ????? ????????????? ??????????? ???????? ????? 1 ??????!");
        
        case 35:
        {
new fmt_text[128];
new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
new ggg=GetFamilyData(fam_id, F_VISHARZ);
new g=GetFamilyData(fam_id, F_VISBUS);
new gg=GetFamilyData(fam_id, F_VISHKAR);

AddFamilyData(fam_id,F_VISHARZ,-,ggg);
mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET ochki2='%d' WHERE id='%d' LIMIT 1", GetFamilyData(fam_id, F_VISHARZ), fam_id);
 mysql_query(mysql, fmt_text, false);

AddFamilyData(fam_id,F_VISBUS,-,g);
mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET ochki4='%d' WHERE id='%d' LIMIT 1", GetFamilyData(fam_id, F_VISBUS), fam_id);
 mysql_query(mysql, fmt_text, false);
 
 AddFamilyData(fam_id,F_VISHKAR,-,gg);
mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET ochki3='%d' WHERE id='%d' LIMIT 1", GetFamilyData(fam_id, F_VISHKAR), fam_id);
 mysql_query(mysql, fmt_text, false);


OnZakaza();
OnZakazk();
OnZakazb();

timerarz = SetTimer("ARZERSECVI", 1000, true);
new fmt_msg[244],
		rang_id = GetPlayerData(playerid, P_FAMILY_RANK) + 1;

	format(fmt_msg, sizeof fmt_msg, "???????? ???????? ?? {ffff00}????? ?1");
	format(fmt_msg, sizeof fmt_msg, "???????? ???????? ?? {ffffff}????? {ffff00}?2");
	

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, -1, fmt_msg);
		}

	    }


    	case 12,24,36,48,59:
        {
            RandomReklama(random(3));
        }
    	case 03,07,13,19,25,31,37,43,49,55:
        {
        }
	    case 0:
        {
            if(GetElapsedTime(time, g_last_pay_day_time) >= 1)
            {
    KillTimer(timerzavodp);
    GangZoneDestroy (zona21) ;
	DestroyDynamicArea(zona2);
	LoadZakazTextz();
    new query[100];
    new Cache: result;
    new shet=0;
    new fmt_text[555];
    new fmt_msg[555];
    new fam_id = GetPlayerData(playerid, P_FAMILY)+1;

    mysql_format(mysql, query, sizeof query, "SELECT name, ochki1 FROM family ORDER BY ochki1 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name, sizeof(name));
        new lider_ochki = cache_get_field_content_int(0, "ochki1");
        cache_delete(result);

        format(fmt_msg, sizeof(fmt_msg), "???????? ?? {ffff00}????? ??????? {ffffff} ????????. ???????? ????ù: %s, ?????? ????? %d", name, lider_ochki);
        
        for(new i = 0; i < MAX_PLAYERS; i++)
        {
            if(!IsPlayerConnected(i)) continue;
            if(!IsPlayerLogged(i)) continue;
            if(GetPlayerData(i, P_FAMILY) == 0) continue;
            if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;
            
            SendClientMessage(i, -1, fmt_msg);
        }
    }
                OnPayDay();

                for(new fam_id = g_family_loaded - 1; fam_id != -1; fam_id--)
                {
                    new fmt_text[348];
                    AddFamilyData(fam_id, F_EXP, +, g_doubling[DOUBLING_EXP] * 5);

                    if(GetFamilyData(fam_id, F_EXP) > 500)
                    {
                        SetFamilyData(fam_id, F_EXP, 0);
                        AddFamilyData(fam_id, F_LEVEL, +, 1);
                    }

                    mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET score='%d',exp='%d' WHERE id='%d' LIMIT 1", GetFamilyData(fam_id, F_LEVEL), GetFamilyData(fam_id, F_EXP), fam_id);
                    mysql_query(mysql, fmt_text, false);
                }
            }
        }
		case 1:
		{
			if(GetElapsedTime(time, g_last_pay_day_time) >= 1)
			{
				OnPayDay();
			}
		}
		case 2:
		{
			if(GetElapsedTime(time, g_last_lottery_time) >= 1)
			{
				OnLottery();
			}
		}
		case 40:
{
new query[100];
    new Cache: result;
    new shet=0;
    new fmt_text[555];
    new fmt_msg[555];
    new fam_id = GetPlayerData(playerid, P_FAMILY)+1;

    mysql_format(mysql, query, sizeof query, "SELECT name, ochki2 FROM family ORDER BY ochki2 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name, sizeof(name));
        new lider_ochki = cache_get_field_content_int(0, "ochki2");
        cache_delete(result);

        format(fmt_msg, sizeof(fmt_msg), "???????? ?? {ffff00}????? ??????? ????????. ???????? ????ù: %s", name, lider_ochki);
        
        for(new i = 0; i < MAX_PLAYERS; i++)
        {
            if(!IsPlayerConnected(i)) continue;
            if(!IsPlayerLogged(i)) continue;
            if(GetPlayerData(i, P_FAMILY) == 0) continue;
            if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;
            
            SendClientMessage(i, -1, fmt_msg);
        }
        }
        mysql_format(mysql, query, sizeof query, "SELECT name, ochki3 FROM family ORDER BY ochki3 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
        if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name, sizeof(name));
        new lider_ochki = cache_get_field_content_int(0, "ochki3");
        cache_delete(result);

        format(fmt_msg, sizeof(fmt_msg), "???????? ?? {ffff00}????? ???ù???? ????????. ???????? ????ù: %s", name, lider_ochki);
        
        for(new i = 0; i < MAX_PLAYERS; i++)
        {
            if(!IsPlayerConnected(i)) continue;
            if(!IsPlayerLogged(i)) continue;
            if(GetPlayerData(i, P_FAMILY) == 0) continue;
            if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;
            
            SendClientMessage(i, -1, fmt_msg);
        }
        }
        mysql_format(mysql, query, sizeof query, "SELECT name, ochki4 FROM family ORDER BY ochki4 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
        if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name, sizeof(name));
        new lider_ochki = cache_get_field_content_int(0, "ochki4");
        cache_delete(result);

        format(fmt_msg, sizeof(fmt_msg), "???????? ?? {ffff00}????? ?????? ????????. ???????? ????ù: %s", name, lider_ochki);
        
        for(new i = 0; i < MAX_PLAYERS; i++)
        {
            if(!IsPlayerConnected(i)) continue;
            if(!IsPlayerLogged(i)) continue;
            if(GetPlayerData(i, P_FAMILY) == 0) continue;
            if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;
            
            SendClientMessage(i, -1, fmt_msg);
        }
        }
        KillTimer(timerarzl);
        KillTimer(timerkarr);
        KillTimer(timerbuszl);
        KillTimer(timersecfer);
        KillTimer(timerarz);
        KillTimer(timerkar);
        KillTimer(timebusz);
     //   KillTimer(timersecfer);
        
LoadZakazTexta();
LoadZakazTextk();
LoadZakazTextb();
GangZoneDestroy (zona31) ;
DestroyDynamicArea(zona3);
GangZoneDestroy (zona51) ;
		DestroyDynamicArea(zona5);
		GangZoneDestroy (zona41) ;
		DestroyDynamicArea(zona4);
//new fmt_text[128];
//new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
new ggg=GetFamilyData(fam_id, F_OCKIFARMA);

AddFamilyData(fam_id,F_OCKIFARMA,-,ggg);
mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET ochki='%d' WHERE id='%d' LIMIT 1", GetFamilyData(fam_id, F_OCKIFARMA), fam_id);
 mysql_query(mysql, fmt_text, false);

OnZakaz();
timersecfer = SetTimer("FTIMERSEC", 1000, true);
new 	rang_id = GetPlayerData(playerid, P_FAMILY_RANK) + 1;

	format(fmt_msg, sizeof fmt_msg, "???????? ???????? ?? {ffff00}????? ??????, {ffffff}??????? ????? ?????????ù ? ??????? ?????");

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, -1, fmt_msg);
		}
}
case 45:
{

new fmt_text[128];
new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
new ggg=GetFamilyData(fam_id, F_OCZAVOD);

AddFamilyData(fam_id,F_OCKIFARMA,-,ggg);
mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET ochki1='%d' WHERE id='%d' LIMIT 1", GetFamilyData(fam_id, F_OCZAVOD), fam_id);
 mysql_query(mysql, fmt_text, false);

OnZakazz();
timerzavod = SetTimer("FTIMERSEC", 1000, true);
new fmt_msg[144],
		rang_id = GetPlayerData(playerid, P_FAMILY_RANK) + 1;

	format(fmt_msg, sizeof fmt_msg, "???????? ???????? ?? {ffff00}????? ???????, {ffffff}??????? ????? ?????????ù ? ??????? ?????");

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, -1, fmt_msg);
		}
}


case 50:
{
KillTimer(timerochkov);
GangZoneDestroy (zona11) ;
DestroyDynamicArea(zona1);
LoadZakazText();
    new query[100];
    new Cache: result;
    new shet=0;
    new fmt_text[555];
    new fmt_msg[555];
    new fam_id = GetPlayerData(playerid, P_FAMILY)+1;

    mysql_format(mysql, query, sizeof query, "SELECT name, ochki FROM family ORDER BY ochki DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new name[32];
        cache_get_field_content(0, "name", name, sizeof(name));
        new lider_ochki = cache_get_field_content_int(0, "ochki");
        cache_delete(result);

        format(fmt_msg, sizeof(fmt_msg), "???????? ?? {ffff00}????? ?????? {ffffff} ????????. ???????? ????ù: %s, ?????? ????? %d", name, lider_ochki);
        
        for(new i = 0; i < MAX_PLAYERS; i++)
        {
            if(!IsPlayerConnected(i)) continue;
            if(!IsPlayerLogged(i)) continue;
            if(GetPlayerData(i, P_FAMILY) == 0) continue;
            if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;
            
            SendClientMessage(i, -1, fmt_msg);
        }
    }
    else
    {
        cache_delete(result);
    }
}
	}

	if(new_day)
	{
		SetTimer("ClearBanList", 15_000, false);
	}

	SetWorldTime(hour);
	OnPlayersWorldTimeInit(hour, minute);

	g_last_m_timer_time = time;
}

public: OnPlayersWorldTimeInit(hour, minute)
{
	foreach(new playerid : Player)
	{
		SetPlayerTime(playerid, hour, minute);
	}
}

public: OnLottery()
{
	new fmt_str[85];
	new buffer[4];

	new lottery_str[4];
	new lottery_number;
	new buy_tickets_count;
	new hour, count;

	gettime(hour);
	lottery_number = random(900) + 100;

	valstr(lottery_str, lottery_number);
	buy_tickets_count = LotteryBuyTicketCount();

	static const
		lottery_pay[3] = {2000, 15_000, 50_000};

	foreach(new playerid : Player)
	{
		if(IsPlayerLogged(playerid))
		{
			if(GetPlayerData(playerid, P_LOTTERY))
			{
				format(fmt_str, sizeof fmt_str, "?????? %d:02! ???????? ?????????? ????????. ???? ?????????? ?????: %d", hour, GetPlayerData(playerid, P_LOTTERY));
				SendClientMessage(playerid, 0xFFFF00FF, fmt_str);

				format(fmt_str, sizeof fmt_str, "?? ???? ??? ???? ??????? %d ???????. ?????????? ????? ????? ????: {FF9900}%d", buy_tickets_count, lottery_number);
				SendClientMessage(playerid, 0x66CC00FF, fmt_str);

				valfmt(buffer, GetPlayerData(playerid, P_LOTTERY));

				for(count = 0; count < 3; count ++)
					if(lottery_str[count] != buffer[count]) break;

				switch(count)
				{
					case 0:
					{
						SendClientMessage(playerid, 0xFFFFFFFF, "? ????????? ? ????? ?????? ?? ??????? ?????ù ?????");
						SendClientMessage(playerid, 0xFFFFFFFF, "?? ???????????????. ? ????????? ??? ??? ??ù???????? ???????");
					}
					case 1..3:
					{
						GivePlayerMoneyEx(playerid, lottery_pay[count-1], "??????? ? ???????", true, true);

						format(fmt_str, sizeof fmt_str, "? ????? ?????? ??????? %d ?????! ???????: %d ??????", count, lottery_pay[count-1]);
						SendClientMessage(playerid, 0x3399FFFF, fmt_str);
					}
				}
				SetPlayerData(playerid, P_LOTTERY, 0);
			}
		}
	}
	g_last_lottery_time = gettime();
}

public: OnPayDay()
{
	new fmt_str[164];
	new level, cur_time;
	new hour, minute, second;

	cur_time = gettime();
	gettime(hour, minute, second);

	SetWorldTime(hour);
	
	//SendClientMessageToAll(0xFFFFFFFF, "{3399FF}--------------------------");
	SendClientMessageToAll(0xFFFFFFFF, fmt_str);

	foreach(new playerid : Player)
	{
		if(IsPlayerLogged(playerid))
		{
		    new rub = Config[sDistRub];
		    new coins = Config[sGiveCoins];
		    
		    AddPlayerData(playerid, P_COINS, +, coins);
			UpdatePlayerDatabaseInt(playerid, "coins", GetPlayerData(playerid, P_COINS));

			GivePlayerDonateRub(playerid, rub,"????ù");
			

			if(GetPlayerData(playerid, P_ADMIN_STATUS))
				AddPlayerData(playerid, P_ADMIN_HOUR, +, 1);

			//SendClientMessage(playerid, 0xFFFFFFFF, "   ?????????? ???");
			SendClientMessage(playerid, 0xFFFFFFFF, "{3399FF}______________________");
			SendClientMessageToAll(0xFFFFFFFF, "   ????? ?????ù?");
			SendClientMessage(playerid, 0xFFFFFFFF, " ");

			level = GetPlayerLevel(playerid);
			if(!IsPlayerAFK(playerid) || GetPlayerAFKTime(playerid) < 60)
			{
				if(ConvertUnixTime(GetPlayerData(playerid, P_GAME_FOR_HOUR), CONVERT_TIME_TO_MINUTES) >= 20)
				{
					if(GetPlayerTeamEx(playerid))
					{
						new team_wage;

						if(GetPlayerTeamEx(playerid) < TEAM_OPG_ARZAMASKAYA)
						{
							new team_id = GetPlayerTeamEx(playerid),
								rank = GetPlayerJob(playerid);

							team_wage = rank_wages[ team_id - 1 ][ rank - 1 ];
						}
						else
						{
							new gang_id = GetPlayerTeamEx(playerid) - TEAM_OPG_ARZAMASKAYA;

							team_wage = GetGangZonesCount(gang_id + 1) * 70 + 1000;
						}

						AddPlayerData(playerid, P_WAGE, +, team_wage);
					}
					//else SendClientMessage(playerid, 0xFFFFFFFF, "????????: {00CC00}0 ???");
					zona1 = CreateDynamicRectangle(2325.411865,-239.441284, 2293.379150,-271.735473, 0, 0,-1);
     zona11 = GangZoneCreate(2325.411865,-239.441284, 2293.379150,-271.735473);
     GangZoneShowForAll(zona11,0xFF0000FF);

					AddPlayerData(playerid, P_BANK, +, GetPlayerData(playerid, P_WAGE));

					BankLog(playerid, GetPlayerData(playerid, P_WAGE), "????????");

					SetPlayerData(playerid, P_WAGE, 0);
					AddPlayerData(playerid, P_EXP, +, g_doubling[DOUBLING_EXP] ? 2 : 1);
					AddPlayerData(playerid, P_TOTALHOUR, +, 1);
					
					AddPlayerData(playerid, P_TOP_3, +, 1);
					UpdatePlayerDatabaseInt(playerid, "TOP_PayDay", GetPlayerData(playerid, P_TOP_3));

					//if(!IsPlayerAfk(i))
					//{
					if(GetPlayerExp(playerid) > GetExpToNextLevel(playerid))
					{
						SetPlayerData(playerid, P_EXP, 0);
						AddPlayerData(playerid, P_LEVEL, +, 1);

						SetPlayerLevelInit(playerid);
					}
					//}
				}
				else SendClientMessage(playerid, COLOR_RED, "{FF5533}??ù ????????ù ???????? ?????????? ?????????ù ? ???? ??????? 20 ?????");
			}
			else SendClientMessage(playerid, 0xFFBB00FF, "?? ?? ?????? ?????????ù ?? ????? ??ù ????????ù ????????");

			SendClientMessage(playerid, 0xFFFFFFFF, "{3399FF}______________________");
			
			BankLog(playerid, GetPlayerData(playerid, P_WAGE), "????????");
			
			format(fmt_str, sizeof fmt_str, "????????: {ff0000}%d ???", GetPlayerData(playerid, P_WAGE));
					SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

					format(fmt_str, sizeof fmt_str, "ù?????? ?????? ?????: {%s}%d ???", GetPlayerBankMoney(playerid) > 0 ? ("ff0000") : ("ff0000"), GetPlayerBankMoney(playerid));
					SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);
					
			new vip = GetPlayerPremium(playerid);
            new vip_bonus = 0;
            new vip_name[16];

            switch(vip)
            {
                case 1: { vip_bonus = 1; vip_name = "Silver VIP"; }
                case 2: { vip_bonus = 2; vip_name = "Gold VIP"; }
                case 3: { vip_bonus = 3; vip_name = "Platinum VIP"; }
            }

            if(vip_bonus > 0)
            {
                AddPlayerData(playerid, P_DONATE_MONEY, +, vip_bonus);
                UpdatePlayerDatabaseInt(playerid, "donate_current", GetPlayerDonateMoney(playerid));
                UpdatePlayerDatabaseInt(playerid, "donate_total", GetPlayerTotalDonate(playerid));

                format(fmt_str, sizeof fmt_str, "{FFFF00}| {FFFFFF}?? ???????? {FFFF00}%dBC {FFFFFF}?? ???? ???? ??? ???????????? ?? ???????? {FFFF00}%s", vip_bonus, vip_name);
                SendClientMessage(playerid, 0xFFFF00FF, fmt_str);
            }

			SavePlayerAccount(playerid);
			if(GetPlayerData(playerid, P_TOTALHOUR) == 10)
			{
				AddPlayerData(playerid, P_CAR_SLOTS, +, 1);
				SendClientMessage(playerid, 0x3399FFFF, "????????ù??! ?? ???????? ?????????????? ???? ?????????ù");
				UpdatePlayerDatabaseInt(playerid, "car_slots", GetPlayerData(playerid, P_CAR_SLOTS));
			}
			if(GetPlayerLevel(playerid) > level)
			{
				SendClientMessage(playerid, 0x3399FFFF, "????????ù??! ??? ??????? ???????");
				switch(GetPlayerLevel(playerid))
				{
					case 2:
					{
						SendClientMessage(playerid, 0x66CC00FF, "?? ?????? ?????? ??? ????? ????? ? ????? ??????");
						SendClientMessage(playerid, 0x66CC00FF, "???????? ????ù ?????? ???????ù ????????");
					}
					case 5:
					{
						CallLocalFunction("OnGiveReferBonus", "i", GetPlayerData(playerid, P_REFER));
					}
				}
			}
			format(fmt_str, sizeof fmt_str, "UPDATE accounts SET level=%d,exp=%d,bank=%d,wage=0,last_login=%d,game_for_hour=0,get_adm_hour=%d,totalhour = %d WHERE id=%d LIMIT 1", GetPlayerLevel(playerid), GetPlayerExp(playerid), GetPlayerBankMoney(playerid), cur_time, GetPlayerData(playerid, P_ADMIN_HOUR), GetPlayerData(playerid, P_TOTALHOUR), GetPlayerAccountID(playerid));
			mysql_query(mysql, fmt_str, false);

			if(mysql_errno() != 0)
				SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù ???????? {FF0000}(equ-code 100)");

			new rows,
				Cache: result;

			mysql_format(mysql, fmt_str, sizeof fmt_str, "SELECT id, paydays, code FROM promocode_activations WHERE uid=%d AND paydays > 0", GetPlayerAccountID(playerid));
			result = mysql_query(mysql, fmt_str, true);

			rows = cache_num_rows();

			if(rows)
			{
				for(new idx; idx < rows; idx ++)
				{
					new id = cache_get_row_int(idx, 0),
						paydays = cache_get_row_int(idx, 1),
						code[32];

					cache_get_row(idx, 2, code);

					mysql_format(mysql, fmt_str, sizeof fmt_str, "UPDATE promocode_activations SET paydays='%d' WHERE id='%d'", paydays - 1, id);
					mysql_query(mysql, fmt_str, false);

					if(paydays == 1)
					{
						new Cache: p_cache;

						mysql_format(mysql, fmt_str, sizeof fmt_str, "SELECT type, amount FROM promocode WHERE code='%s'", code);
						p_cache = mysql_query(mysql, fmt_str, true);

						new type = cache_get_row_int(0, 0),
							amount = cache_get_row_int(0, 1);

						cache_delete(p_cache);

						AddPlayerData(playerid, promo_info[type][P_DATA], +, amount);
						UpdatePlayerDatabaseInt(playerid, promo_info[type][P_SQL_NAME], GetPlayerData(playerid, promo_info[type][P_DATA]));

						SendClientMessage(playerid, -1, "");

						format(fmt_str, sizeof fmt_str, "??????? ???? ?? ???????? \"%s\"", code);
						SendClientMessage(playerid, 0x66CC33FF, fmt_str);
					}
				}
			}

			cache_delete(result);
		}
		SetPlayerData(playerid, P_GAME_FOR_HOUR, 0);
	}

	//SellDebtorsProperty();

	if(hour == 5) SellDebtorsHotels();

	printf("hour live %d", hour);

	#if defined RAND_WEATHER
	SetTimer("SetRandomWeather", (random(60) + 60) * 1000, false);
	#endif

	CallLocalFunction("UpdateRealtorHomeInfo", "");
	CallLocalFunction("UpdateRealtorBizInfo", "");

	g_last_pay_day_time = cur_time;
	SellDebtorsHome();
	SellDebtorsFuel();
    SellDebtorsBusiness();
	return 1;
}

public: OnPlayerTimer(playerid)
{
    
	if(GetPlayerAdminEx(playerid))
			TextDrawShowForPlayer(playerid, ask_edit_TD);
		else
			TextDrawHideForPlayer(playerid, ask_edit_TD);

        if(GetPlayerAdminEx(playerid))
			TextDrawShowForPlayer(playerid, report_edit_TD);
		else
			TextDrawHideForPlayer(playerid, report_edit_TD);
			
		if(GetPlayerAdminEx(playerid) > 1)
	TextDrawShowForPlayer(playerid, admin_time_TD);
	else
   	TextDrawHideForPlayer(playerid, admin_time_TD);
	
	
	if(IsPlayerLogged(playerid))
	{
		new fmt_str[128];
		new speed = GetPlayerSpeed(playerid);

		AddPlayerData(playerid, P_AFK_TIME, +, 1);
		if(IsPlayerAFK(playerid))
		{
			new afk_minutes = ConvertUnixTime(GetPlayerAFKTime(playerid), CONVERT_TIME_TO_MINUTES);
			new afk_seconds = ConvertUnixTime(GetPlayerAFKTime(playerid));

			if(afk_minutes > 0)
			{
				format(fmt_str, sizeof fmt_str, "?? ????? %d:%02d", afk_minutes, afk_seconds);
			}
			else format(fmt_str, sizeof fmt_str, "?? ????? %d ???.", afk_seconds);

			SetPlayerChatBubble(playerid, fmt_str, 0xFF0000FF, 7.0, 1500);
		}
		else
		{
			AddPlayerData(playerid, P_GAME_FOR_HOUR, +, 1);
			AddPlayerData(playerid, P_GAME_FOR_DAY, +, 1);

			UpdatePlayerDatabaseInt(playerid, "game_for_hour", GetPlayerData(playerid, P_GAME_FOR_HOUR));
            UpdatePlayerDatabaseInt(playerid, "game_for_day", GetPlayerData(playerid, P_GAME_FOR_DAY));
            
            if(GetPlayerData(playerid, P_GAME_FOR_DAY) == 10800)
            {
				Send(playerid, -1,"?? ???????? 3 ???? ? ???????? 1 ????. /opencase - ??????? ????");
                AddPlayerData(playerid, P_DONATE_CASE, +, 1);

				UpdatePlayerDatabaseInt(playerid, "case", GetPlayerData(playerid, P_DONATE_CASE));
            }
		}

		if(GetPlayerData(playerid, P_MUTE) > 0)
		{
			AddPlayerData(playerid, P_MUTE, -, 1);
			UpdatePlayerDatabaseInt(playerid, "mute", GetPlayerData(playerid, P_MUTE));
			if(GetPlayerData(playerid, P_MUTE) <= 0)
				SendClientMessage(playerid, 0x66CC00FF, "???? ???????ù ???? ???? ?????????ù");
		}
		if(GetPlayerData(playerid, P_FMUTE) > 0)
		{
			AddPlayerData(playerid, P_FMUTE, -, 1);
			UpdatePlayerDatabaseInt(playerid, "fmute", GetPlayerData(playerid, P_FMUTE));
			if(GetPlayerData(playerid, P_FMUTE) <= 0)
				SendClientMessage(playerid, 0x32a44bFF, "???? ???????ù ???? ????????? ???? ?????????ù");
		}

		if(GetPlayerData(playerid, P_JAIL) > 0)
		{
			AddPlayerData(playerid, P_JAIL, -, 1);
			UpdatePlayerDatabaseInt(playerid, "jail", GetPlayerData(playerid, P_JAIL));
			if(GetPlayerData(playerid, P_JAIL) <= 0)
				SendClientMessage(playerid, 0x66CC00FF, "???? ?????????ù ?????????ù"),
				UnjailPlayer(playerid);
		}
		
		if(GetPlayerData(playerid, P_FJAIL) > 0)
{
	// ???????? 1 ???????
	AddPlayerData(playerid, P_FJAIL, -, 1);
	UpdatePlayerDatabaseInt(playerid, "fjail", GetPlayerData(playerid, P_FJAIL));

	// ???? ????? ? ??????? ó ????????? ? ??? ??????
	if(GetPlayerData(playerid, P_KARCER) == 1)
	{
		new karcerTime = GetPlayerData(playerid, P_KARCER_TIME);
		if(karcerTime > 0)
		{
			SetPlayerData(playerid, P_KARCER_TIME, karcerTime - 1);
			UpdatePlayerDatabaseInt(playerid, "karcer_time", karcerTime - 1);
		}
	}

	// ???????? ?? ?????????? ?????
	if(GetPlayerData(playerid, P_FJAIL) <= 0)
	{
		SendClientMessage(playerid, 0x66CC00FF, "???? ?????????ù ?????????ù");

		// ????????? ????????
		for (new i = 0; i < sizeof g_fsinRooms; i++)
		{
			if (!g_fsinRooms[i][isBusy]) continue;

			if (g_fsinRooms[i][roomPrisonerID] == playerid || g_fsinRooms[i][roomVisitorID] == playerid)
			{
				StopMeetFSIN(i);
				break;
			}
		}

		// ???? ??? ? ??????? ó ??????????
		if(GetPlayerData(playerid, P_KARCER) == 1)
		{
			SetPlayerData(playerid, P_KARCER, 0);
			SetPlayerData(playerid, P_KARCER_TIME, 0);
			UpdatePlayerDatabaseInt(playerid, "karcer", 0);
			UpdatePlayerDatabaseInt(playerid, "karcer_time", 0);

			new fmt_msg[144];
			format(fmt_msg, sizeof fmt_msg, "[R] ??????????? %s[%d] ??? ????????????? ?????????? ?? ??????? ? ?????? ????? ?????????ù ?????.",
				GetPlayerNameEx(playerid), playerid);
			SendMessageToTeam(TEAM_FSIN, fmt_msg, COLOR_RADIO);
		}

		// ????????????
		FSinUnjailPlayer(playerid);
	}
}
	

		if(GetPlayerData(playerid, P_MASK) >= 2)
		{
			AddPlayerData(playerid, P_MASK, -, 1);
			if(GetPlayerData(playerid, P_MASK) <= 2)
			{
				GameTextForPlayer(playerid, "~y~invisible off", 2500, 4);

				SetPlayerColorInit(playerid);
				SetPlayerData(playerid, P_MASK, 0);
			}
		}

		if (GetPlayerGPSInfo(playerid, G_ENABLED) == GPS_STATUS_ON)
{
    new Float:gx = GetPlayerGPSInfo(playerid, G_POS_X);
    new Float:gy = GetPlayerGPSInfo(playerid, G_POS_Y);
    new Float:gz = GetPlayerGPSInfo(playerid, G_POS_Z);

    if (IsPlayerInRangeOfPoint(playerid, 25.0, gx, gy, gz))
    {
        DisablePlayerGPS(playerid);
    }
}

		new Float: player_health;

		GetPlayerHealth(playerid, player_health);

		if(player_health > GetPlayerHealthEx(playerid))
		{
			if(GetPVarInt(playerid, "anti_health_cheat") >= 10)
			{
				SendClientMessage(playerid, 0xFF6600FF, "?? ??????? ?? ?????????? ? ????????? {FF0000}(gac-code 01)");
				Kick:(playerid);
			}
		}
		else
		{
			SetPlayerData(playerid, P_HEALTH, player_health);
		}

		if(GetPlayerTeamEx(playerid) == TEAM_RADIO)
			TextDrawShowForPlayer(playerid, radio_edit_TD);

		else
			TextDrawHideForPlayer(playerid, radio_edit_TD);

		if(IsPlayerDriver(playerid))
{
    new vehicleid = GetPlayerVehicleID(playerid);
    if(!IsABike(vehicleid))
    {
        new Float:fuels = GetVehicleData(vehicleid, V_FUEL),
            Float:health,
            Float:x, Float:y, Float:z;

        GetVehicleHealth(vehicleid, health);
        GetVehicleVelocity(vehicleid, x, y, z); // ???????? ???????? ????????????? ????????

        SetVehicleParamsInit(vehicleid);
        SetVehicleData(vehicleid, V_MILEAGE, GetVehicleData(vehicleid, V_MILEAGE) + (float(speed) / 3600.0));

        if(GetVehicleParamEx(vehicleid, V_ENGINE) == VEHICLE_PARAM_ON)
        {
            if(fuels <= 0.0)
            {
                SetVehicleParam(vehicleid, V_ENGINE, false);
                ShowNotificationNew(playerid, 0, 5, 0, 0, "ù?????? ? ?????????? ???????????", "");
            }
            else
            {
                // ??????ù??, ???????ù ?? ???????????? ???????? (???????? > 0.1)
                if(floatsqroot(x*x + y*y + z*z) > 0.1)
                {
                    // ????????? ??????? ?????? ????? ?????? ???????ù (? 3 ???? ??????)
                    SetVehicleData(vehicleid, V_FUEL, fuels - 0.0167); // 0.05 / 3 ? 0.0167
                }
                // ???? ?????? ????? ? ?????????? ?????????? - ?? ????????? ???????
            }
        }
    }
}
		else if(IsPlayerPassenger(playerid))
		{
			new vehicleid = GetPlayerVehicleID(playerid);
			new driver = GetVehicleData(vehicleid, V_DRIVER_ID);

			if(driver != INVALID_PLAYER_ID && IsPlayerInJob(driver) && IsPlayerDriver(driver))
			{
				if(GetPlayerJobCar(driver) == vehicleid && IsPlayerInVehicle(driver, vehicleid))
				{
					if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_TAXI_DRIVER)
					{
						g_taxi_mileage[playerid] += (float(speed) / 3600.0);
						if(g_taxi_mileage[playerid] > 0.1)
						{
							g_taxi_mileage[playerid] = 0.0;

							new tariff = GetPlayerData(driver, P_JOB_TARIFF);
							if(GetPlayerMoneyEx(playerid) >= tariff)
							{
								GivePlayerMoneyEx(driver, tariff, "- ?????? ?????? ?????", false, true);
								GivePlayerMoneyEx(playerid, -tariff, "+ ?????? ?????? ?????", false, true);

								AddPlayerData(playerid, P_JOB_WAGE, +, tariff);

								format(fmt_str, sizeof fmt_str, "~r~-%d rub~n~~b~+100 m", tariff);
								GameTextForPlayer(playerid, fmt_str, 4000, 1);

								format(fmt_str, sizeof fmt_str, "~g~+%d rub~n~~b~+100 m", tariff);
								GameTextForPlayer(driver, fmt_str, 4000, 1);
							}
							else
							{
								RemovePlayerFromVehicle(playerid);
								SendClientMessage(playerid, 0xFF6600FF, "???????????? ????? ??ù ?????????? ?????? ??????");
							}
						}
					}
				}
			}
		}

		if(GetPlayerTempJob(playerid) != TEMP_JOB_NONE)
		{
			CheckPlayerTempJobState(playerid);
		}

		if(GetPVarInt(playerid, "player_in_ammo_cp"))
		{
			new army_ammo = GetRepositoryData(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL, R_AMOUNT),
				rand_ammo = random(4)+1,
				soldiers_count;

			foreach(new i : Player)
			{
				if(!IsPlayerConnected(i)) continue;
				else if(!IsPlayerLogged(i)) continue;
				else if(GetPlayerTeamEx(i) != TEAM_ARMY) continue;

				soldiers_count++;
			}

				if(army_ammo == 0)
					GameTextForPlayer(playerid, "~g~loading...", 1100, 6);
				else
				{
					if(!IsPlayerAFK(playerid))
					{
						if((army_ammo - rand_ammo) < 0)
							rand_ammo = 200000 - army_ammo;

						if((GetPlayerData(playerid, P_AMMO) + rand_ammo) > 350)
							SendClientMessage(playerid, 0x66CC33FF, "??ù?? ?????? ???????? ?? ?????????ù");
						else
						{
							AddPlayerData(playerid, P_AMMO, +, rand_ammo);
							UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

							SetRepositoryData(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_AMMO, R_AMOUNT, army_ammo - rand_ammo);

							new fmt_text[128];

							format(fmt_text, sizeof fmt_text, "~g~+%d patr.~n~~b~total %d patr.", rand_ammo, GetPlayerData(playerid, P_AMMO));
							GameTextForPlayer(playerid, fmt_text, 1100, 6);

							format(fmt_text, sizeof fmt_text, "+%d ??.", rand_ammo);
							SetPlayerChatBubble(playerid, fmt_text, 0xFFCD00FF, 10.0, 1100);

							UpdateRepository(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_AMMO);
						}
					}
			}
		}
	}
	else
	{
		if(GetPlayerData(playerid, P_AUTH_TIME) >= 0)
		{
			if(GetPlayerData(playerid, P_AUTH_TIME) >= MAX_AUTHORIZATION_TIME)
			{
				HidePlayerDialog(playerid);

				SendClientMessage(playerid, 0xFF6600FF, "????ù ?? ??????????? ??????????");
				Kick:(playerid);
			}
			else AddPlayerData(playerid, P_AUTH_TIME, +, 1);
		}
	}
}

public: CheckPlayerAccount(playerid, race)
{
	if(race == mysql_race[playerid])
	{
		new query[75];
		new Cache: result, is_account_exist;

		SetPlayerCameraPos(playerid, AUTH_CAMERA_POS);
		SetPlayerCameraLookAt(playerid, AUTH_CAMERA_LOOK);

		new buffer[40+1];
    	gpci(playerid, buffer);

    	printf("player %s buffer %s", GetPlayerNameEx(playerid), buffer);

    	if(!strcmp(GetPlayerNameEx(playerid), "Nick_Name"))
    	{
    		Dialog
			(
				playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
				"{FF0000}J?????",
				"{FFFFFF}?????????? ???????????ù ? ??????? ??-?? ?????? ???-?????\n"\
				"??????? ? ??????? -> ?????????? -> ? ??????? ????? ???-????\n\
				????? ??????? '??????'",
				"?????", ""
			);
			return Kick:(playerid, "?????? nick-name. ??????? /q (/quit) ????? ?????", 3000);
    	}

		mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE `name`='%e' LIMIT 1", GetPlayerNameEx(playerid));
		result = mysql_query(mysql, query);

		if(!mysql_errno())
		{
			new data[512];
			new Node:json = Node:JSON_Object();
			is_account_exist = bool: cache_num_rows();
			SetPlayerData(playerid, P_ACCOUNT_STATE, is_account_exist + 1);

			if(is_account_exist)
			{
				SetPlayerData(playerid, P_ACCOUNT_ID, cache_get_field_content_int(0, "id"));

				cache_get_field_content(0, "salt", g_player[playerid][P_SALT], mysql, 11);
				cache_get_field_content(0, "password", g_player[playerid][P_PASSWORD], mysql, 65);
				cache_get_field_content(0, "last_ip", g_player[playerid][P_LAST_IP], mysql, 16);

				cache_get_field_content(0, "setting_phone", g_player[playerid][P_SETTING_PHONE], mysql, 13);
				cache_get_field_content(0, "setting_pin_code", g_player[playerid][P_SETTING_PIN], mysql, 5);

				SetPlayerData(playerid, P_REQUEST_PHONE, cache_get_field_content_int(0, "request_phone"));
				SetPlayerData(playerid, P_REQUEST_PIN, cache_get_field_content_int(0, "request_pin"));

				SetPlayerData(playerid, P_AUTH_TIME, 0);

				JSON_SetInt(json, "o", 1);
				JSON_SetInt(json, "r", 1);

				if(!strcmp(GetPlayerData(playerid, P_EMAIL), "None"))
				{
					JSON_SetInt(json, "p", 0);
				}

				JSON_Stringify(json, data);

				OnPacketIncoming(playerid, 38, json);
			}
			else
			{
				JSON_SetInt(json, "o", 1);
				JSON_SetInt(json, "r", 0);

				JSON_Stringify(json, data);
				OnPacketIncoming(playerid, 38, json);
			}
		}
		else
		{
			Dialog
			(
				playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
				"{FF9900}?? ??????? ???????????ù",
				"{FFFFFF}?????????? ???????????ù ? ???????\n"\
				"??????????? ?? ????? ????????????? ?? ???? ???????ù",
				"?????", ""
			);
			Kick:(playerid, "??????. ??????? /q ??? /quit ????? ?????", 3000);
		}
		cache_delete(result);

		#if defined _MAP_INCLUDED
		RemoveBuildings(playerid);
		#endif

	}
	return 1;
}
public: FixedKick(playerid)
{
	Kick(playerid);
}

public: LoadPlayerData(playerid)
{
	new query[138];
	new Cache: result;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE id=%d LIMIT 1", GetPlayerAccountID(playerid));
	result = mysql_query(mysql, query);

	if(cache_num_rows())
	{
		new
			buffer = 0,
			time = gettime();

		cache_get_field_content(0, "email", g_player[playerid][P_EMAIL], mysql, 61);
		SetPlayerData(playerid, P_CONFIRM_EMAIL, bool: cache_get_field_content_int(0, "confirm_email"));

		SetPlayerData(playerid, P_LEVEL, 	cache_get_field_content_int(0, "level"));
		SetPlayerData(playerid, P_EXP, 		cache_get_field_content_int(0, "exp"));

		SetPlayerData(playerid, P_REFER, 	cache_get_field_content_int(0, "refer"));
		SetPlayerData(playerid, P_SEX, 		bool: cache_get_field_content_int(0, "sex"));
		SetPlayerData(playerid, P_SKIN, 	cache_get_field_content_int(0, "skin"));
		SetPlayerData(playerid, P_MONEY, 	cache_get_field_content_int(0, "money"));
		SetPlayerData(playerid, P_BANK, 	cache_get_field_content_int(0, "bank"));
		SetPlayerData(playerid, P_ADMIN, 	cache_get_field_content_int(0, "admin"));
		SetPlayerData(playerid, P_OHFAM,	cache_get_field_content_int(0, "ocfam"));
		SetPlayerData(playerid, P_OHZAVOD,	cache_get_field_content_int(0, "oczav"));
		SetPlayerData(playerid, P_OHARZ,	cache_get_field_content_int(0, "ocarz"));
		SetPlayerData(playerid, P_OHKAR,	cache_get_field_content_int(0, "ockar"));
		SetPlayerData(playerid, P_OHBUS,	cache_get_field_content_int(0, "ocbus"));
		SetPlayerData(playerid, P_SECRET, 	cache_get_field_content_int(0, "a_secret"));
		SetPlayerData(playerid, P_3D_PREFIX, 	cache_get_field_content_int(0, "3d_prefix"));
		SetPlayerData(playerid, P_APASS, 	cache_get_field_content_int(0, "AdminPass"));
		
		SetPlayerData(playerid, P_DATA_ORG_SKIN, 	cache_get_field_content_int(-1, "data_org_skin"));

		cache_get_field_content(0, "cmdaccess", g_player[playerid][CMD_ACCESS], mysql, CMD_NUM+1);
		cache_get_field_content(0, "prefix", g_player[playerid][P_PREFIX], mysql, 36);
		SetPlayerData(playerid, P_PLAY_PLAYER, 	cache_get_field_content_int(0, "player"));

		SetPlayerData(playerid, P_DRIVING_LIC, 	cache_get_field_content_int(0, "driving_lic"));
		SetPlayerData(playerid, P_WEAPON_LIC, 	cache_get_field_content_int(0, "weapon_lic"));

		SetPlayerData(playerid, P_SUSPECT, 		cache_get_field_content_int(0, "suspect"));
		SetPlayerData(playerid, P_PHONE, 		cache_get_field_content_int(0, "phone"));
		SetPlayerData(playerid, P_PHONE_BALANCE,cache_get_field_content_int(0, "phone_balance"));
		SetPlayerData(playerid, P_PHONE_COLOR,	cache_get_field_content_int(0, "phone_color"));

		SetPlayerData(playerid, P_LAW_ABIDING,	cache_get_field_content_int(0, "law_abiding"));
		SetPlayerData(playerid, P_IMPROVEMENTS, cache_get_field_content_int(0, "improvements"));
		SetPlayerData(playerid, P_POWER, 		cache_get_field_content_int(0, "power"));

		SetPlayerData(playerid, P_DRUGS, 		cache_get_field_content_int(0, "drugs"));
		SetPlayerData(playerid, P_AMMO, 		cache_get_field_content_int(0, "ammo"));
		SetPlayerData(playerid, P_METALL, 		cache_get_field_content_int(0, "metall"));
		SetPlayerData(playerid, P_WIFE, 		cache_get_field_content_int(0, "wife"));
		SetPlayerData(playerid, P_TEAM, 		cache_get_field_content_int(0, "team"));
		SetPlayerData(playerid, P_SUBDIVISON,	cache_get_field_content_int(0, "subdivison"));
		SetPlayerData(playerid, P_WAGE,			cache_get_field_content_int(0, "wage"));
		SetPlayerData(playerid, P_JOB, 			cache_get_field_content_int(0, "job"));

		SetPlayerData(playerid, P_LOADER_SKILL,		cache_get_field_content_int(0, "loader_skill"));

		SetPlayerData(playerid, P_HOUSE_TYPE,	cache_get_field_content_int(0, "house_type"));
		SetPlayerData(playerid, P_HOUSE_ROOM,	cache_get_field_content_int(0, "house_room"));
		SetPlayerData(playerid, P_HOUSE, 		cache_get_field_content_int(0, "house"));
		SetPlayerData(playerid, P_BUSINESS, cache_get_field_content_int(0, "business"));
		SetPlayerData(playerid, P_FUEL_ST,		cache_get_field_content_int(0, "fuel_st"));
		SetPlayerData(playerid, P_ADMIN_WARN,		cache_get_field_content_int(0, "admin_warn"));
		SetPlayerData(playerid, P_ACOINS, 	cache_get_field_content_int(0, "acoins"));

		SetPlayerData(playerid, P_REG_TIME, 	cache_get_field_content_int(0, "reg_time"));
		cache_get_field_content(0, "reg_ip", g_player[playerid][P_REG_IP], mysql, 16);

		buffer = SetPlayerData(playerid, P_LAST_LOGIN_TIME,	cache_get_field_content_int(0, "last_login"));
		if(GetElapsedTime(time, buffer) < 1)
		{
			if(GetElapsedTime(time, g_last_pay_day_time) < 1)
				SetPlayerData(playerid, P_GAME_FOR_HOUR,	cache_get_field_content_int(0, "game_for_hour"));
		}
		SetPlayerData(playerid, P_GAME_FOR_DAY,			cache_get_field_content_int(0, "game_for_day"));
		SetPlayerData(playerid, P_GAME_FOR_DAY_PREV,	cache_get_field_content_int(0, "game_for_day_prev"));

		buffer = GetElapsedTime(time, buffer, CONVERT_TIME_TO_DAYS);
		if(buffer == 1)
		{
			SetPlayerData(playerid, P_GAME_FOR_DAY_PREV, GetPlayerData(playerid, P_GAME_FOR_DAY));
			SetPlayerData(playerid, P_GAME_FOR_DAY, 0);
		}
		else if(buffer > 1)
		{
			SetPlayerData(playerid, P_GAME_FOR_DAY, 0);
			SetPlayerData(playerid, P_GAME_FOR_DAY_PREV, 0);
		}

		SetPlayerSettingData(playerid, S_CHAT_TYPE, 	cache_get_field_content_int(0, "setting1"));
		SetPlayerSettingData(playerid, S_TEAM_CHAT, 	cache_get_field_content_int(0, "setting2"));
		SetPlayerSettingData(playerid, S_NICK_IN_CHAT, 	cache_get_field_content_int(0, "setting4"));
		SetPlayerSettingData(playerid, S_ID_IN_CHAT, 	cache_get_field_content_int(0, "setting5"));
		SetPlayerSettingData(playerid, S_VEH_CONTROL, 	cache_get_field_content_int(0, "setting6"));

		SetPlayerData(playerid, P_WARN, 				cache_get_field_content_int(0, "warn"));
		SetPlayerData(playerid, P_WARN_TIME,			cache_get_field_content_int(0, "warn_time"));
		SetPlayerData(playerid, P_MUTE, 				cache_get_field_content_int(0, "mute"));

		SetPlayerData(playerid, P_SKILL_COLT, 			cache_get_field_content_int(0, "skill_colt"));
		SetPlayerData(playerid, P_SKILL_SDPISTOL,		cache_get_field_content_int(0, "skill_sdpistol"));
		SetPlayerData(playerid, P_SKILL_DEAGLE, 		cache_get_field_content_int(0, "skill_deagle"));
		SetPlayerData(playerid, P_SKILL_SHOTGUN, 		cache_get_field_content_int(0, "skill_shotgun"));
		SetPlayerData(playerid, P_SKILL_MP5, 			cache_get_field_content_int(0, "skill_mp5"));
		SetPlayerData(playerid, P_SKILL_AK47, 			cache_get_field_content_int(0, "skill_ak47"));
		SetPlayerData(playerid, P_SKILL_M4, 			cache_get_field_content_int(0, "skill_m4"));
		SetPlayerData(playerid, P_SKILL_SNIPER_RIFLE, 	cache_get_field_content_int(0, "skill_sniper_rifle"));
		SetPlayerData(playerid, P_SKILL_SAWNOFF, 		cache_get_field_content_int(0, "skill_sawnoff"));
		SetPlayerData(playerid, P_SKILL_COMBAT_SG, 		cache_get_field_content_int(0, "skill_combat_sg"));
		SetPlayerData(playerid, P_SKILL_MICRO_UZI, 		cache_get_field_content_int(0, "skill_micro_uzi"));

		SetPlayerData(playerid, P_DONATE_RUB, 			cache_get_field_content_int(0, "rub"));
		SetPlayerData(playerid, P_DONATE_MONEY, 		cache_get_field_content_int(0, "donate_current"));
		SetPlayerData(playerid, P_DONATE_TOTAL, 		cache_get_field_content_int(0, "donate_total"));
		

		SetPlayerData(playerid, P_GIFTS,        		cache_get_field_content_int(0, "gifts"));

		SetPlayerData(playerid, P_OSKIN,		 		cache_get_field_content_int(0, "org_skin"));
		
		SetPlayerData(playerid, P_MEDCARD, cache_get_field_content_int(0, "medcard"));
		cache_get_field_content(0, "medcard_date", GetPlayerData(playerid, P_MEDCARD_DATE), 16);
		SetPlayerData(playerid, P_MEDCARD_STATE, 0);
		cache_get_field_content(0, "medcard_warned", GetPlayerData(playerid, P_MEDCARD_WARNED_DATE), 16);

		SetPlayerData(playerid, P_SPAWN,		 		cache_get_field_content_int(0, "setting_spawn"));

		SetPlayerData(playerid, P_HOSPITAL,				bool: cache_get_field_content_int(0, "hospital"));

		SetPlayerData(playerid, P_HEALTH,				cache_get_field_content_float(0, "health"));

		SetPlayerData(playerid, P_CAR_SLOTS,			cache_get_field_content_int(0, "car_slots"));

		SetPlayerData(playerid, P_JAIL,  cache_get_field_content_int(0, "jail"));
		SetPlayerData(playerid, P_FJAIL, cache_get_field_content_int(0, "fjail"));
		SetPlayerData(playerid, P_KARCER_TIME, cache_get_field_content_int(0, "karcer_time"));
		SetPlayerData(playerid, P_PR, cache_get_field_content_int(0, "pr"));
		SetPlayerData(playerid, P_MR, cache_get_field_content_int(0, "mr"));
		SetPlayerData(playerid, P_KARCER, cache_get_field_content_int(0, "karcer"));
		g_original_skin[playerid] = cache_get_field_content_int(0, "skin_backup");
		SetPlayerData(playerid, P_SLEDAK, cache_get_field_content_int(0, "sledak"));
		SetPlayerData(playerid, P_LOGDOSTUP, cache_get_field_content_int(0, "logdostup"));
		
		SetPlayerData(playerid, P_REPS_TOTAL,  cache_get_field_content_int(0, "reps_total"));
		SetPlayerData(playerid, P_REPS_TODAY,  cache_get_field_content_int(0, "reps_today"));	SetPlayerData(playerid, P_ASKS_TOTAL,  cache_get_field_content_int(0, "asks_total")); // ??????
		SetPlayerData(playerid, P_ASKS_TODAY,  cache_get_field_content_int(0, "asks_today")); // ??????
		SetPlayerData(playerid, P_MUTES_TOTAL, cache_get_field_content_int(0, "mutes_total"));
		SetPlayerData(playerid, P_MUTES_TODAY, cache_get_field_content_int(0, "mutes_today"));
		SetPlayerData(playerid, P_JAILS_TOTAL, cache_get_field_content_int(0, "jails_total"));
		SetPlayerData(playerid, P_JAILS_TODAY, cache_get_field_content_int(0, "jails_today"));
		SetPlayerData(playerid, P_WARNS_TOTAL, cache_get_field_content_int(0, "warns_total"));
		SetPlayerData(playerid, P_WARNS_TODAY, cache_get_field_content_int(0, "warns_today"));
		SetPlayerData(playerid, P_BANS_TOTAL,  cache_get_field_content_int(0, "bans_total"));
		SetPlayerData(playerid, P_BANS_TODAY,  cache_get_field_content_int(0, "bans_today"));
		SetPlayerData(playerid, P_SPAWNS_TOTAL,cache_get_field_content_int(0, "spawns_total"));
		SetPlayerData(playerid, P_SPAWNS_TODAY,cache_get_field_content_int(0, "spawns_today"));
		SetPlayerData(playerid, P_KICKS_TOTAL, cache_get_field_content_int(0, "kicks_total"));
		SetPlayerData(playerid, P_KICKS_TODAY, cache_get_field_content_int(0, "kicks_today"));
		

		SetPlayerData(playerid, P_PREMIUM,				cache_get_field_content_int(0, "premium"));
		SetPlayerData(playerid, P_PREMIUM_DATE,				cache_get_field_content_int(0, "premium_date"));

		SetPlayerData(playerid, P_PREMIUM,				cache_get_field_content_int(0, "premium"));
		SetPlayerData(playerid, P_PREMIUM_TIME,			cache_get_field_content_int(0, "premium_time"));

		SetPlayerData(playerid, P_FAMILY,               cache_get_field_content_int(0, "family"));
        SetPlayerData(playerid, P_FAMILY_RANK,          cache_get_field_content_int(0, "family_rank"));

        SetPlayerData(playerid, P_TEST,          cache_get_field_content_int(0, "test"));

        SetPlayerData(playerid, P_QUEST_1,        		cache_get_field_content_int(0, "quest_1"));
        SetPlayerData(playerid, P_QUEST_2,        		cache_get_field_content_int(0, "quest_2"));
        SetPlayerData(playerid, P_QUEST_3,        		cache_get_field_content_int(0, "quest_3"));
        SetPlayerData(playerid, P_QUEST_4,        		cache_get_field_content_int(0, "quest_4"));
        SetPlayerData(playerid, P_QUEST_5,        		cache_get_field_content_int(0, "quest_5"));
        SetPlayerData(playerid, P_QUEST_6,        		cache_get_field_content_int(0, "quest_6"));
        SetPlayerData(playerid, P_QUEST_7,        		cache_get_field_content_int(0, "quest_7"));
        SetPlayerData(playerid, P_QUEST_8,        		cache_get_field_content_int(0, "quest_8"));

        SetPlayerData(playerid, P_QUEST_EXP_1,        		cache_get_field_content_int(0, "quest_exp_1"));
        SetPlayerData(playerid, P_QUEST_EXP_2,        		cache_get_field_content_int(0, "quest_exp_2"));
        SetPlayerData(playerid, P_QUEST_EXP_3,        		cache_get_field_content_int(0, "quest_exp_3"));
        SetPlayerData(playerid, P_QUEST_EXP_4,        		cache_get_field_content_int(0, "quest_exp_4"));
        SetPlayerData(playerid, P_QUEST_EXP_5,        		cache_get_field_content_int(0, "quest_exp_5"));
        SetPlayerData(playerid, P_QUEST_EXP_6,        		cache_get_field_content_int(0, "quest_exp_6"));
        SetPlayerData(playerid, P_QUEST_EXP_7,        		cache_get_field_content_int(0, "quest_exp_7"));
        SetPlayerData(playerid, P_QUEST_EXP_8,        		cache_get_field_content_int(0, "quest_exp_8"));

        SetPlayerData(playerid, P_YOUTUBE,        		cache_get_field_content_int(0, "youtube"));

        SetPlayerData(playerid, P_BANIHOP,        		cache_get_field_content_int(0, "AntiBh"));

        SetPlayerData(playerid, P_ADMIN_HOUR,        		cache_get_field_content_int(0, "get_adm_hour"));
        SetPlayerData(playerid, P_ADMIN_STATUS,        		cache_get_field_content_int(0, "get_adm_status"));

        SetPlayerData(playerid, P_ANTISLIV,        		cache_get_field_content_int(0, "antisliv"));
        
        SetPlayerData(playerid, P_QUEST231,        		cache_get_field_content_int(0, "quest231"));
        SetPlayerData(playerid, P_QUEST232,        		cache_get_field_content_int(0, "quest232"));
        SetPlayerData(playerid, P_REPCARID,        		cache_get_field_content_int(0, "repcarid"));
        SetPlayerData(playerid, P_BOXQUEST,             cache_get_field_content_int(0, "QuestBox"));
        SetPlayerData(playerid, P_QUEST233,        		cache_get_field_content_int(0, "quest233"));
        SetPlayerData(playerid, P_POSTCARD,        		cache_get_field_content_int(0, "postcard"));
        
        SetPlayerData(playerid, P_TOTALHOUR,        		cache_get_field_content_int(0, "totalhour"));
        
        SetPlayerData(playerid, P_HELPER, 	cache_get_field_content_int(0, "helper"));
        SetPlayerData(playerid, P_MED_CHEST, 	cache_get_field_content_int(0, "healme"));
        
        SetPlayerData(playerid, P_BOX_QUEST_1, 	cache_get_field_content_int(0, "QuestBox1"));
        SetPlayerData(playerid, P_BOX_QUEST_2, 	cache_get_field_content_int(0, "QuestBox2"));
        SetPlayerData(playerid, P_BOX_QUEST_3, 	cache_get_field_content_int(0, "QuestBox3"));
        SetPlayerData(playerid, P_BOX_QUEST_4, 	cache_get_field_content_int(0, "QuestBox4"));
        SetPlayerData(playerid, P_BOX_QUEST_5, 	cache_get_field_content_int(0, "QuestBox5"));
        SetPlayerData(playerid, P_BOX_QUEST_6, 	cache_get_field_content_int(0, "QuestBox6"));
        
        SetPlayerData(playerid, P_REPCARID, 	cache_get_field_content_int(0, "repair"));
        
        SetPlayerData(playerid, P_FMUTE, 				cache_get_field_content_int(0, "fmute"));
        SetPlayerData(playerid, P_FWARN, 				cache_get_field_content_int(0, "fwarn"));
        
        SetPlayerData(playerid, P_OWARN, 				cache_get_field_content_int(0, "owarn"));
        
        SetPlayerData(playerid, P_DMZ_KILL, 			cache_get_field_content_int(0, "dmz_kills"));
        
        SetPlayerData(playerid, P_PROGRESS_1,        		cache_get_field_content_int(0, "Progress1"));
        SetPlayerData(playerid, P_PROGRESS_2,        		cache_get_field_content_int(0, "Progress2"));
        SetPlayerData(playerid, P_PROGRESS_3,        		cache_get_field_content_int(0, "Progress3"));
        SetPlayerData(playerid, P_PROGRESS_4,        		cache_get_field_content_int(0, "Progress4"));
        SetPlayerData(playerid, P_PROGRESS_5,        		cache_get_field_content_int(0, "Progress5"));
        SetPlayerData(playerid, P_PROGRESS_6,        		cache_get_field_content_int(0, "Progress6"));
        SetPlayerData(playerid, P_PROGRESS_EXP_1,        		cache_get_field_content_int(0, "ProgressExp1"));
        SetPlayerData(playerid, P_PROGRESS_EXP_2,        		cache_get_field_content_int(0, "ProgressExp2"));
        SetPlayerData(playerid, P_PROGRESS_EXP_3,        		cache_get_field_content_int(0, "ProgressExp3"));
        SetPlayerData(playerid, P_PROGRESS_EXP_4,        		cache_get_field_content_int(0, "ProgressExp4"));
        SetPlayerData(playerid, P_PROGRESS_EXP_5,        		cache_get_field_content_int(0, "ProgressExp5"));
        SetPlayerData(playerid, P_PROGRESS_EXP_6,        		cache_get_field_content_int(0, "ProgressExp6"));
        
        SetPlayerData(playerid, P_CAPT_KILL, 			cache_get_field_content_int(0, "capt_kills"));
        
        SetPlayerData(playerid, P_FLOWER_1,        		cache_get_field_content_int(0, "flower1"));
        SetPlayerData(playerid, P_FLOWER_2,        		cache_get_field_content_int(0, "flower2"));
        SetPlayerData(playerid, P_FLOWER_3,        		cache_get_field_content_int(0, "flower3"));
        SetPlayerData(playerid, P_TAKE_FLOWER,        		cache_get_field_content_int(0, "TakeFlower"));
        SetPlayerData(playerid, P_CONGRATULATE_WOMEN,        		cache_get_field_content_int(0, "CongratulateWomen"));
        SetPlayerData(playerid, P_BUY_PERFUME,        		cache_get_field_content_int(0, "BuyPerfume"));
        SetPlayerData(playerid, P_GIVE_PERFUME,        		cache_get_field_content_int(0, "GivePerfume"));
        SetPlayerData(playerid, P_BUY_CAKE,        		cache_get_field_content_int(0, "BuyCake"));
        SetPlayerData(playerid, P_BUY_PRODUCTS,        		cache_get_field_content_int(0, "BuyProducts"));
        SetPlayerData(playerid, P_BUY_CANDLE,        		cache_get_field_content_int(0, "BuyCandle"));
        SetPlayerData(playerid, P_END_QUEST_8MARTA,        		cache_get_field_content_int(0, "EndQuest8marta"));
        
        SetPlayerData(playerid, P_COINS, 			cache_get_field_content_int(0, "coins"));
        
        SetPlayerData(playerid, P_YTPROMO_ACTIVATE,         cache_get_field_content_int(0, "ytpromo_activate"));
        
        SetPlayerData(playerid, P_F_QUEST_EXP_1,        		cache_get_field_content_int(0, "FracQuestExp1"));
        SetPlayerData(playerid, P_F_QUEST_EXP_2,        		cache_get_field_content_int(0, "FracQuestExp2"));
        SetPlayerData(playerid, P_F_QUEST_EXP_3,        		cache_get_field_content_int(0, "FracQuestExp3"));
        SetPlayerData(playerid, P_F_QUEST_EXP_4,        		cache_get_field_content_int(0, "FracQuestExp4"));
        SetPlayerData(playerid, P_F_QUEST_EXP_5,        		cache_get_field_content_int(0, "FracQuestExp5"));
        
        SetPlayerData(playerid, P_F_QUEST_1,        		cache_get_field_content_int(0, "FracQuest1"));
        SetPlayerData(playerid, P_F_QUEST_2,        		cache_get_field_content_int(0, "FracQuest2"));
        SetPlayerData(playerid, P_F_QUEST_3,        		cache_get_field_content_int(0, "FracQuest3"));
        SetPlayerData(playerid, P_F_QUEST_4,        		cache_get_field_content_int(0, "FracQuest4"));
        SetPlayerData(playerid, P_F_QUEST_5,        		cache_get_field_content_int(0, "FracQuest5"));
        
        SetPlayerData(playerid, P_TOP_1,        		cache_get_field_content_int(0, "TOP_SalaryNewWork"));
        SetPlayerData(playerid, P_TOP_2,        		cache_get_field_content_int(0, "TOP_SalaryGosWork"));
        SetPlayerData(playerid, P_TOP_3,        		cache_get_field_content_int(0, "TOP_PayDay"));
        SetPlayerData(playerid, P_TOP_4,        		cache_get_field_content_int(0, "TOP_Progress"));
        SetPlayerData(playerid, P_TOP_5,        		cache_get_field_content_int(0, "TOP_Quest"));
        
        SetPlayerData(playerid, P_BOOMBOX,        		cache_get_field_content_int(0, "boombox"));
        
        SetPlayerData(playerid, P_SPEEDOMETR, 			cache_get_field_content_int(0, "speedometr"));
        
        SetPlayerData(playerid, P_FRACTION_CAR,        		INVALID_VEHICLE_ID);
       
       SetPlayerData(playerid, P_LAST_POS_X, cache_get_field_content_float(0, "last_x"));
   	SetPlayerData(playerid, P_LAST_POS_Y, cache_get_field_content_float(0, "last_y"));
	   SetPlayerData(playerid, P_LAST_POS_Z, cache_get_field_content_float(0, "last_z"));
	   SetPlayerData(playerid, P_LAST_POS_INT, cache_get_field_content_int(0, "last_int"));
	   SetPlayerData(playerid, P_LAST_POS_VW, cache_get_field_content_int(0, "last_vw"));
	   SetPlayerData(playerid, P_LAST_LOGOUT, cache_get_field_content_int(0, "last_logout"));
	
		g_lastposition[playerid][lp_x]   = cache_get_field_content_float(0, "last_x");
		g_lastposition[playerid][lp_y]   = cache_get_field_content_float(0, "last_y");
		g_lastposition[playerid][lp_z]   = cache_get_field_content_float(0, "last_z");
		g_lastposition[playerid][lp_int] = cache_get_field_content_int(0, "last_int");
		g_lastposition[playerid][lp_vw]  = cache_get_field_content_int(0, "last_vw");
		
		SetPlayerData(playerid, P_VOENBILET, cache_get_field_content_int(0, "voenbilet"));
		SetPlayerData(playerid, P_VOENBILET_NUM, cache_get_field_content_int(0, "nomerbilet"));
		
		SetPlayerData(playerid, P_WORKDAY, cache_get_field_content_int(0, "work_day"));

		cache_get_field_content(0, "kemdanvb", GetPlayerData(playerid, P_VOENBILET_KEM), 32);
		cache_get_field_content(0, "zvaniebilet", GetPlayerData(playerid, P_VOENBILET_ZVANIE), 32);
		cache_get_field_content(0, "databilet", GetPlayerData(playerid, P_VOENBILET_DATE), 16);


		// -------------------------------------------------------------------------
		cache_delete(result);
		
		SetPlayerSpawnInit(playerid);
		ShowSpawnSelectionDialog(playerid);


		if(GetPlayerData(playerid, P_SKIN))
		{
			mysql_format(mysql, query, sizeof query, "UPDATE accounts SET last_ip='%e',last_login=%d, online = 1 WHERE id=%d LIMIT 1", GetPlayerIpEx(playerid), time, GetPlayerAccountID(playerid));
			mysql_tquery(mysql, query, "", "");

			if(IsPlayerHasDonations(playerid))
				SendClientMessage(playerid, 0x3399FFFF, "? ??? ???? ????? ?????????ù ?????. ??????? {ff9900}/donat{3399ff}, ????? ????????? ??");

			new player_admin_rank = GetPlayerAdminEx(playerid);

            new player_premium = GetPlayerData(playerid, P_PREMIUM_DATE);

			if(player_premium)
			{
				if((player_premium - time) > 0)
				{
				    new premium_day,
				        premium_month,
				        premium_year;

					timestamp_to_date(player_premium, premium_year, premium_month, premium_day);

					format
					(
						query, sizeof query,
						"{ffff00}??? VIP ?????? ????????? ?? {FFFFFF}%02d.%02d.%d",
						premium_day, premium_month, premium_year
					);
					SendClientMessage(playerid, 0xEC174FFF, query);
				}
				else
				{
				    format(query, sizeof query, "???? ???????ù VIP ??????? ?????. ??ù ????????ù ???????? ???????????: {FFFFFF}/mn > ?????????????");
					SendClientMessage(playerid, 0xEC174FFF, query);

					SetPlayerData(playerid, P_PREMIUM, 					0);

					UpdatePlayerDatabaseInt(playerid, "premium", 		0);
				}
			}

			if(GetPlayerData(playerid, P_WARN) > 0)
			{
				if(time > GetPlayerData(playerid, P_WARN_TIME))
				{
					SetPlayerData(playerid, P_WARN, 0);
					SetPlayerData(playerid, P_WARN_TIME, 0);
				}
				else
				{
					format(query, sizeof query, "?????????? ??????????????: %d ?? 3", GetPlayerData(playerid, P_WARN));
					SendClientMessage(playerid, 0xFF6600FF, query);
					SendClientMessage(playerid, 0xFF6600FF, "????? 3 ?????????????ù ??????? ????? ????????????");
				}
			}

			if((buffer = GetPlayerHouse(playerid, HOUSE_TYPE_HOME)) != -1)
			{
				if(GetElapsedTime(GetHouseData(buffer, H_RENT_DATE), time, CONVERT_TIME_TO_DAYS) < 5)
				{
					SendClientMessage(playerid, 0xFFB500FF, "???? ?????? ?????? ???? ????? ????????????ù");
				}
			}
			if((buffer = GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL)) != -1)
			{
				new room_id = GetPlayerData(playerid, P_HOUSE_ROOM);
				if(GetElapsedTime(GetHotelData(buffer, room_id, H_RENT_DATE), time, CONVERT_TIME_TO_DAYS) < 5)
				{
					SendClientMessage(playerid, 0xFFB500FF, "? ??? ???????? ???? ?????????? ???? ? ?????????");
				}
			}
			if((buffer = GetPlayerBusiness(playerid)) != -1)
			{
				if(GetElapsedTime(GetBusinessData(buffer, B_RENT_DATE), time, CONVERT_TIME_TO_DAYS) < 5)
				{
					SendClientMessage(playerid, 0xFFB500FF, "???? ?????? ?????? ??????? ????? ????????????ù");
				}
			}
			if((buffer = GetPlayerFuelStation(playerid)) != -1)
			{
				if(GetElapsedTime(GetFuelStationData(buffer, FS_RENT_DATE), time, CONVERT_TIME_TO_DAYS) < 5)
				{
					SendClientMessage(playerid, 0xFFB500FF, "???? ?????? ????? ??? ????? ????????????ù");
				}
			}
			SetPlayerInit(playerid);
			//SetTimerEx("PlayerOwnableCarInit", 250, false, "i", playerid);

			//CallLocalFunction("PlayerOwnableCarInit", "i", playerid);
		}
		else
		{
			SetPlayerData(playerid, P_ACCOUNT_STATE, ACCOUNT_STATE_REG_SKIN);
			SendClientMessage(playerid, 0xFFFFFFFF, "??????????ù ?????????!");
			SendClientMessage(playerid, 0x66CC00FF, "???????? ????????? ?????? ?????????");
		}
	}
}

public: ShowPlayerLoginDialog(playerid, step, wrong_pass)
{
	if(GetPlayerData(playerid, P_ACCOUNT_STATE) != ACCOUNT_STATE_LOGIN) return 0;

	new fmt_str[790];
	switch(step)
	{
		case LOGIN_STATE_CHECK_BAN:
		{
			new Cache: result;

			format(fmt_str, sizeof fmt_str, "SELECT * FROM ban_list WHERE user_id=%d LIMIT 1", GetPlayerAccountID(playerid));
			result = mysql_query(mysql, fmt_str, true);

			if(cache_num_rows())
			{
				new unban_time = cache_get_field_content_int(0, "ban_time");
				new ban_days = GetElapsedTime(unban_time, gettime(), CONVERT_TIME_TO_DAYS);

				if(ban_days)
				{
				    new admin_name[21];
					new reason[130];

					new year, month, day;
					new hour, minute, second;
					new unyear, unmonth, unday;
					new unhour, unminute, unsecond;					
					new ban_time = cache_get_field_content_int(0, "time");

					cache_get_field_content(0, "description", reason);
					cache_get_field_content(0, "admin", admin_name);

					timestamp_to_date(ban_time, year, month, day, hour, minute, second);
					timestamp_to_date(unban_time, unyear, unmonth, unday, unhour, unminute, unsecond);
					format
					(
						fmt_str, sizeof fmt_str,
						"{FFFFFF}??? ??????? ??????? ??? ???????????? ?????????????? ?? ?????????\n"\
						"{FFFFFF}?????? ???????. ?? ?? ?????? ?????? ?? ????? ???????? ?? ????ù\n"\
						"{FFFFFF}???????ù ??????????.\n\n"\
						""SC"??? ???????: {FFFF00}%s\n"\
						""SC"??????? ??????????????: {FFFF00}%s\n"\
						""SC"???? ???????? ??????????: {FFFF00}%02d.%02d.%d-%02d:%02d:%02d\n"\
						""SC"???? ????????????? ????????: {FFFF00}%02d.%02d.%d-%02d:%02d:%02d\n"\
						""SC"??????? ??????????: {FFFF00}%s\n\n"\
						"{FFFFFF}?? ?? ???????? ? ???????? ?????????????? ? ????????, ??? ?????????\n"\
						"{FFFFFF}???? ?????? ????????????? ??? ????????? ? ????? ??????,\n"\
						"{FFFFFF}?????????? ?????????ù ? ??????????? ?????? ? ??????? ??\n"\
						"{FFFFFF}?????????? ?????? ???????: {FFFF00}"SERVER_NAME".\n\n"\
						"{FFFFFF}?? ???????? ?????????? ???????? ??????? ???? ? ??????.",
						GetPlayerNameEx(playerid),
						admin_name,
						day, month, year, hour, minute, second,
						unday, unmonth, unyear, unhour, unminute, unsecond,
						reason

					);
					Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FF6347}"SERVER_NAME" {FFFFFF}| ??????? ????????????", fmt_str, "???????", "");

					Kick:(playerid, "??? ????????? ?? ???????", 3000);
					Kick:(playerid, "{D3D3D3}?????? ??????? ??????????.", 3000);
					Kick:(playerid, "{D3D3D3}??? ????????? ?? ?? ?????????? ????", 3000);
				}
				else
				{
					format(fmt_str, sizeof fmt_str, "DELETE FROM ban_list WHERE user_id=%d LIMIT 1", GetPlayerAccountID(playerid));
					mysql_tquery(mysql, fmt_str, "", "");

					CallLocalFunction("ShowPlayerLoginDialog", "iii", playerid, step + 1, false);
				}
			}
			else CallLocalFunction("ShowPlayerLoginDialog", "iii", playerid, step + 1, false);

			return cache_delete(result);
		}
		case LOGIN_STATE_PASSWORD:
		{
			format
			(
				fmt_str, sizeof fmt_str,
				"{FFFFFF}????? ?????????? ?? {FF6347}"SERVER_NAME"{ffffff}!\n"\
				"??????? ? ????? ????? ???????????????\n\n"\
				"?????: {66CC66}%s\n",
				GetPlayerNameEx(playerid)
			);
			if(wrong_pass)
			{
				new ch[3];
				new attemps = GetPlayerData(playerid, P_PASS_ATTEMPS);

				valstr(ch, attemps);

				strcat(fmt_str, "{FF3300}???????? ??????! ???????? ???????: ");
				strcat(fmt_str, ch);

				AddPlayerData(playerid, P_PASS_ATTEMPS, -, 1);
				switch(attemps)
				{
					case 0:
					{
						Dialog
						(
							playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
							"{FF9933}????? ??????? ???????????",
							"{FFFFFF}?? ????? ???????????? ?????? 3 ???? ????ù?", // . ??? IP ????? ??????? ?? ?????
							"???????", ""
						);
						Kick:(playerid, " ");

						return 1;

				
						// return AddBan(0, gettime(), 1, GetPlayerIpEx(playerid), "????? ??????? ???????????", "??????? ????????????");
					}
					case 1:
					{
						SendClientMessage(playerid, 0xFF6600FF, "??? ???????????? ????? ?????ù ?? ?????? ????????");
					}
				}
				PlayerPlaySound(playerid, 1053, 0.0, 0.0, 0.0);
			}
			else strcat(fmt_str, "{FFFFFF}??????? ?????? ?? ????????:");

			Dialog(playerid, DIALOG_LOGIN, DIALOG_STYLE_INPUT, "{66CCFF}??????????ù", fmt_str, "?????", "??????");
		}
		case LOGIN_STATE_PHONE: // ???? 5 ??????. ???? ????????
		{
			if(GetPlayerData(playerid, P_REQUEST_PHONE))
			{
				if(!wrong_pass)
				{
					new phone[13];

					strmid(phone, GetPlayerData(playerid, P_SETTING_PHONE), 0, strlen(GetPlayerData(playerid, P_SETTING_PHONE)) - 5);
					strcat(phone, "*****");

					format
					(
						fmt_str, sizeof fmt_str,
						"{FFFFFF}??????? ???????????? ??????????? ????\n"\
						"?????? ?????????? ????????\n\n{FFCD00}%s\n\n"\
						"{FFFFFF}??????? ????????? 5 ???? ??????:",
						phone
					);
					Dialog(playerid, DIALOG_LOGIN, DIALOG_STYLE_INPUT, "{66CCFF}????????? ???????", fmt_str, "??????", "?????");
				}
				else
				{
					SendClientMessage(playerid, 0xFF0000FF, "????? ?????????? ???????? ?????? ???????. ?????? ????????");
					Kick:(playerid);
				}
			}
			else
			{
				return CallLocalFunction("ShowPlayerLoginDialog", "iii", playerid, step + 1, false);
			}
		}
		case LOGIN_STATE_PIN_CODE: // ???? ??? ????
		{
			if(GetPlayerData(playerid, P_REQUEST_PIN))
			{
				if(wrong_pass)
				{
					SendClientMessage(playerid, 0xFF0000FF, "PIN-??? ?????? ???????. ?????? ????????");
					Kick:(playerid);
				}
				else ShowPlayerPinCodePTD(playerid, PIN_CODE_STATE_LOGIN_CHECK);
			}
			else
			{
				return CallLocalFunction("ShowPlayerLoginDialog", "iii", playerid, step + 1, false);
			}
		}
		case LOGIN_STATE_LOAD_ACC:
		{
			SetPlayerData(playerid, P_AUTH_TIME, -1);
			SetPlayerData(playerid, P_OCCUPIED_BED, -1);
			LoadPlayerData(playerid);
			printf("[DEBUG] Load_acc ???????? ??ù %s", GetPlayerNameEx(playerid));
		}
	}
	SetPlayerData(playerid, P_ACCOUNT_STEP_STATE, step);

	return 1;
}

public: ClearPlayerAnim(playerid)
{
	ApplyAnimationEx(playerid, "CARRY", "crry_prtial", 4.0, 0, 0, 0, 0, 0, 0);
}


public: ClearPlayerChatAnim(playerid)
{
	if(GetPlayerData(playerid, P_USE_ANIM_TYPE) == USE_ANIM_TYPE_CHAT)
	{
		ClearPlayerAnim(playerid);
		SetPlayerData(playerid, P_USE_ANIM_TYPE, USE_ANIM_TYPE_NONE);
	}
}

public: SetPlayerLoaderJobLoad(playerid)
{
    if (GetPlayerTempJob(playerid) != TEMP_JOB_LOADER)
        return 1;

    if (GetPlayerTempJobState(playerid) != TEMP_JOB_STATE_LOADER_LOAD)
        return 1;

    ClearAnimations(playerid);

    ApplyAnimationEx(playerid, "CARRY", "crry_prtial", 4.1, 1, 1, 1, 1, 1, 0);

    SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 1271, A_OBJECT_BONE_RIGHT_HAND,
        0.1, 0.05, 0.1,
        0.0, 90.0, 0.0,
        0.25, 0.25, 0.25,
        0
    );

    SetPlayerLoaderJobUnLoadCP(playerid);
}

public: SetPlayerMinerJobTakeOre(playerid)
{
    if (GetPlayerTempJob(playerid) != TEMP_JOB_MINER)
        return 1;

    ClearAnimations(playerid);

    RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);

    ApplyAnimationEx(playerid, "CARRY", "liftup", 8.0, 0, 0, 0, 0, 0, 0);

    SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 17100, A_OBJECT_BONE_LEFT_HAND,
        0.1, 0.05, -0.1,
        0.0, 90.0, 0.0,
        0.2, 0.2, 0.2,
        0
    );

    SetPlayerMinerJobUnLoadCP(playerid);
    return 1;
}

public: SetPlayerLumberJackTakeWood(playerid)
{
	if(GetPlayerTempJob(playerid) == TEMP_JOB_LUMBERJACK)
	{
		SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LUMBERJACK_PUT);

		SetPlayerLumberUnJackChopCP(playerid);

		RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);
		ApplyAnimation(playerid, "CARRY", "liftup", 4.1, 1, 0, 1, 0, 1500, 0);

		ApplyAnimation(playerid, "CARRY", "crry_prtial", 4.1, 1, 0, 1, 1, 1);
	//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 1463, A_OBJECT_BONE_RIGHT_HAND, 0.006, 0.138, -0.192, -109.8, -2.2, -102.9, 0.505, 0.328, 0.57);
	}
}

public: LumberJackPlayerDrop(playerid, bool: message)
{
	SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LUMBERJACK_CHOP);

	if(message)
		SendClientMessage(playerid, 0xFF6600FF, "?? ??????? ?????");

	RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);
//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 326, A_OBJECT_BONE_RIGHT_HAND, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0);

	ApplyAnimationEx(playerid, "MISC", "Idle_Chat_02", 4.1, 0, 0, 0, 0, 1, 0);

	SetPlayerLumberJackChopCP(playerid);

	return 1;
}

public: MinerCarriageUpdate(carriageid)
{
	if(miner_carriage[carriageid][MC_STATUS] && !miner_carriage[carriageid][MC_IN_MOVE])
	{
		if(miner_carriage[carriageid][MC_ORE_COUNT] >= 500)
		{
			new fmt_str[55],
				items = GetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_AMOUNT);

			miner_carriage[carriageid][MC_ORE_COUNT] -= 500;

			SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_AMOUNT, items + 500);
			UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE);

			format(fmt_str, sizeof fmt_str, "?????????\n\n{FFCC00}?????????? ????\n%d / 10000 ??", miner_carriage[carriageid][MC_ORE_COUNT]);
			UpdateDynamic3DTextLabelText(miner_carriage[carriageid][MC_LABEL], 0x66CCFFFF, fmt_str);
		}

		else if(miner_carriage[carriageid][MC_ORE_COUNT] <= 0)
		{
			miner_carriage[carriageid][MC_IN_MOVE] = true;

			SetTimerEx("MinerCarriageMove", 7_000, false, "i", carriageid);
			UpdateDynamic3DTextLabelText(miner_carriage[carriageid][MC_LABEL], 0xFFFF00FF, "????????...");
		}
	}
}

public: MinerCarriageMove(carriageid)
{
	new bool: status = miner_carriage[carriageid][MC_STATUS];
	if(status)
	{
	//	MoveDynamicObject(miner_carriage[carriageid][MC_OBJECT_ID], miner_carriage[carriageid][MC_START_POS_X], miner_carriage[carriageid][MC_START_POS_Y], miner_carriage[carriageid][MC_START_POS_Z], 10.0, 0.0, 0.0, 90.0);
	}
	else
	{
	//	MoveDynamicObject(miner_carriage[carriageid][MC_OBJECT_ID], miner_carriage[carriageid][MC_END_POS_X], miner_carriage[carriageid][MC_END_POS_Y], miner_carriage[carriageid][MC_END_POS_Z], 10.0, 0.0, 0.0, 90.0);
	}

	DestroyDynamic3DTextLabel(miner_carriage[carriageid][MC_LABEL]);

	miner_carriage[carriageid][MC_IN_MOVE] = true;

	miner_carriage[carriageid][MC_STATUS] = (status ^ true);
}

public: MinerCarriageSetState(carriageid)
{
	if(miner_carriage[carriageid][MC_STATUS]) // ?????????
	{
		miner_carriage[carriageid][MC_LABEL] = CreateDynamic3DTextLabel("?????????\n\n{FFCC00}?????????? ????\n10000 / 10000 ??", 0x66CCFFFF, -2548.1213, 294.7194, -15.4815 + 3.0, 10.0);
		miner_carriage[carriageid][MC_ORE_COUNT] = 10_000;
	}
	else
	{
		miner_carriage[carriageid][MC_LABEL] = CreateDynamic3DTextLabel("????????\n\n{FFCC00}?????????? ????\n0 / 10000 ??", 0x66CC00FF, -2375.1228, 294.7194, -15.4815 + 3.0, 10.0);
		miner_carriage[carriageid][MC_PICKUP_ID] = CreatePickup(1239, 23, -2375.1228, 296.8900, -15.7689, -1, PICKUP_ACTION_TYPE_MINER_CARRI);
		miner_carriage[carriageid][MC_ORE_COUNT] = 0;
	}
}

public: NextBusRouteCP(playerid)
{
	if(GetPlayerJob(playerid) == JOB_BUS_DRIVER)
	{
		if(IsPlayerInJob(playerid))
		{
			new route_id = GetPlayerData(playerid, P_BUS_ROUTE);
			new route_step = GetPlayerData(playerid, P_BUS_ROUTE_STEP);
			new next_cp = route_step + 1;

			if(g_bus_route[route_id][next_cp][BRS_POS_X] == 0.0)
			{
				next_cp = 0;
			}

			SetPlayerRaceCheckpoint
			(
				playerid,
				g_bus_route[route_id][route_step][BRS_STOP],
				g_bus_route[route_id][route_step][BRS_POS_X],
				g_bus_route[route_id][route_step][BRS_POS_Y],
				g_bus_route[route_id][route_step][BRS_POS_Z],
				g_bus_route[route_id][next_cp][BRS_POS_X],
				g_bus_route[route_id][next_cp][BRS_POS_Y],
				g_bus_route[route_id][next_cp][BRS_POS_Z],
				4.0,
				RCP_ACTION_TYPE_BUS_ROUTE
			);
			AddPlayerData(playerid, P_BUS_ROUTE_STEP, +, 1);
		}
	}
}

public: StartPlayerJob(playerid, jobid)
{
	if(GetPlayerJob(playerid) == jobid)
	{
		//if(!IsPlayerInJob(playerid))
		//{
			new job_car = GetPlayerJobCar(playerid);
			//if(IsPlayerInVehicle(playerid, job_car))
			//{
				new action_type = GetVehicleData(job_car, V_ACTION_TYPE);
				new car_type = (action_type - VEHICLE_ACTION_TYPE_BUS_DRIVER) + 1;

				//if(jobid == car_type)
				//{
					SetPlayerJobLoadItems(playerid, 0);

					SetPlayerData(playerid, P_JOB_WAGE, 0);
					SetPlayerData(playerid, P_IN_JOB, true);
					SetVehicleData(job_car, V_ACTION_ID, true);

					new fmt_str[128];

					switch(jobid)
					{
						case JOB_BUS_DRIVER:
						{
							new route_id = GetPlayerData(playerid, P_BUS_ROUTE);

							format(fmt_str, sizeof fmt_str, "%s\n{FFFFFF}????????? ???????: {FF9900}%d ???", g_bus_routes[route_id][BR_NAME], GetPlayerData(playerid, P_JOB_TARIFF));
							CreateVehicleLabel(job_car, fmt_str, g_bus_routes[route_id][BR_COLOR], 0.0, 0.0, 2.6, 45.0);

							format(fmt_str, sizeof fmt_str, "????? ?????? ???????ù ???????? ?? ???????? %s", g_bus_routes[route_id][BR_NAME]);
							Action(playerid, fmt_str, _, false);

							NextBusRouteCP(playerid);

							SetPVarFloat(playerid, "car_damage", 1000.0);
						}
						case 6:
						{
							format(fmt_str, sizeof fmt_str, "%s{FFFF00}ù????: %d ???", GetPlayerData(playerid, P_JOB_SERVICE_NAME), GetPlayerData(playerid, P_JOB_TARIFF));
							CreateVehicleLabel(job_car, fmt_str, 0x3399FFFF, 0.0, 0.0, 1.4, 25.0);

							Action(playerid, "????? ?????? ????????", _, false);
						}
						case JOB_MECHANIC:
						{
							SetPlayerData(playerid, P_MECHANIC_FILL_PAY, 0);
							SetPlayerData(playerid, P_MECHANIC_REPAIR_PAY, 0);

							format(fmt_str, sizeof fmt_str, "%s{FFFFFF}???????????\n{999999}??? ???????", GetPlayerData(playerid, P_JOB_SERVICE_NAME));
							CreateVehicleLabel(job_car, fmt_str, 0xCC9900FF, 0.0, 0.0, 2.0, 25.0);

							Action(playerid, "????? ?????? ????????????", _, false);
						}
						case JOB_TRUCKER:
						{
							if(!GetTruckIndex(job_car))
							{
								fmt_str = "??????\n{FFFFFF}???????? ?????????";

								SendClientMessage(playerid, 0x66CC00FF, "??????????? {3399FF}/bizlist {66CC00}????? ?????????? ?????? ?? ?????????? ????????");
								Action(playerid, "????? ?????? ?????????? ?????????", _, false);
							}
							else
							{
								fmt_str = "??????\n{FFFFFF}???????? ???????";

								SendClientMessage(playerid, 0x66CC00FF, "??????????? {3399FF}/fuellist {66CC00}??ù ????????? ??????? ?? ?????????? ???");
								Action(playerid, "????? ?????? ?????????? ???????", _, false);
							}

							CreateVehicleLabel(job_car, fmt_str, 0x3399FFFF, 0.0, 2.1, 2.1, 20.0);
						}
					//}
				//}
			//}
		}
	}
	return 1;
}

public: EndPlayerJob(playerid)
{
	if(IsPlayerInJob(playerid))
	{
		new vehicleid = GetPlayerJobCar(playerid);
		if(vehicleid != INVALID_VEHICLE_ID)
		{
			SetVehicleToRespawn(vehicleid);
			SetPlayerData(playerid, P_JOB_CAR, INVALID_VEHICLE_ID);
		}
	}
	KillEndJobTimer(playerid);

	new fmt_str[128];
	new wage = GetPlayerJobWage(playerid);
	new items = GetPlayerJobLoadItems(playerid);

	SetPlayerData(playerid, P_JOB_WAGE, 0);
	SendClientMessage(playerid, 0xFFFF00FF, "??????? ???? ????????!");

	SetPlayerData(playerid, P_IN_JOB, false);
	switch(GetPlayerData(playerid, P_JOB))
	{
		case JOB_BUS_DRIVER:
		{
			new Float: health = GetPVarFloat(playerid, "car_damage");
			new repair_sum;

			if(health < 1000.0)
				repair_sum = (floatround((1000.0 - health) + float(random(100)+10))) / 3;

			DisablePlayerRaceCheckpoint(playerid);

			format(fmt_str, sizeof fmt_str, "??????????: {00FF00}%d ???", wage + (items * GetPlayerData(playerid, P_JOB_TARIFF)));
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

			format(fmt_str, sizeof fmt_str, "?????????? ??????????: {00FF00}%d{FFFFFF}. ??????? ??????? ?? {00FF00}%d ???", items, items * GetPlayerData(playerid, P_JOB_TARIFF));
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

			format(fmt_str, sizeof fmt_str, "?? ?????? ????????: {FF6600}-%d ???", repair_sum);
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

			if(repair_sum < wage)
				wage -= repair_sum;

			//GiveMoney(playerid, salary, "???????? ???????ù ?????????", true, true);
		}
		case 6:
		{
			DisablePlayerRaceCheckpoint(playerid);
			wage = items * GetPlayerData(playerid, P_JOB_TARIFF);

			format(fmt_str, sizeof fmt_str, "??????????: {00FF00}%d ???", wage);
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

			format(fmt_str, sizeof fmt_str, "?????????? ??????????: {00FF00}%d", items);
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);
		}
		case JOB_MECHANIC:
		{
			DisablePlayerRaceCheckpoint(playerid);
			wage = GetPlayerData(playerid, P_MECHANIC_FILL_PAY) + GetPlayerData(playerid, P_MECHANIC_REPAIR_PAY);

			format(fmt_str, sizeof fmt_str, "???????? ?? ??????: {00FF00}%d ???", GetPlayerData(playerid, P_MECHANIC_REPAIR_PAY));
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

			format(fmt_str, sizeof fmt_str, "???????? ?? ????????: {00FF00}%d ???", GetPlayerData(playerid, P_MECHANIC_FILL_PAY));
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

			format(fmt_str, sizeof fmt_str, "????? ??????????: {FFCD00}%d ???", wage);
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);
		}
		case JOB_TRUCKER:
		{
			DisablePlayerRaceCheckpoint(playerid);

			format(fmt_str, sizeof fmt_str, "???? ????ù ?????ù ??????? ???????ù?? {00CC00}%d ???", wage);
			SendClientMessage(playerid, -1, fmt_str);

			if(GetPlayerData(playerid, P_ORDER) != -1)
				SetOrderData(GetPlayerData(playerid, P_ORDER), O_USED, false);

			return 1;
		}
		default:
		{
			switch(GetPlayerTempJob(playerid))
			{
				case TEMP_JOB_FACTORY_TRUCKER:
				{
					SetPlayerSkinInit(playerid);

					format(fmt_str, sizeof fmt_str, "???? ????ù ?????ù ??????? ???????ù?? {00CC00}%d ???", wage);
					SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

					SetPlayerJobLoadItems(playerid, 0);
					SetPlayerTempJob(playerid, TEMP_JOB_NONE);
				}
			}
			return 1;
		}
	}
	SendClientMessage(playerid, 0x66CC00FF, "?????? ????? ??????????? ?? ??? ???? ?? ????ù ????????");

	AddPlayerData(playerid, P_WAGE, +, wage);
	
	AddPlayerData(playerid, P_TOP_2, +, wage);
	UpdatePlayerDatabaseInt(playerid, "TOP_SalaryGosWork", GetPlayerData(playerid, P_TOP_2));

	format(fmt_str, sizeof fmt_str, "UPDATE accounts SET wage=%d WHERE id=%d LIMIT 1", GetPlayerData(playerid, P_WAGE), GetPlayerAccountID(playerid));
	mysql_query(mysql, fmt_str, false);

	return 1;
}

public: ShowChangeNameHistory(playerid, name[])
{
	new fmt_str[64];
	new rows = cache_num_rows();

	if(!rows)
	{
		format(fmt_str, sizeof fmt_str, "{FFCD00}??????? ????? %s", name);
		return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, fmt_str, "{FFFFFF}??????ù ????????ù ???? ????????? ?????", "???????", "");
	}

	new text[1024] = "{FFFFFF}";
	for(new idx; idx < rows; idx ++)
	{
		cache_get_row(idx, 0, fmt_str);
		strcat(fmt_str, "\n");

		strcat(text, fmt_str);
	}
	format(fmt_str, sizeof fmt_str, "{FFCD00}??????? ????? %s", name);
	return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, fmt_str, text, "???????", "");
}

public: ShowPlayerPhoneBook(playerid)
{
	if(IsPlayerPhoneBookInit(playerid))
	{
		if(GetPlayerPhoneBookContacts(playerid) > 0)
		{
			new fmt_str[37];
			new string[((sizeof fmt_str) * MAX_PHONE_BOOK_CONTACTS) + 1];

			for(new idx, count; idx < MAX_PHONE_BOOK_CONTACTS; idx ++)
			{
				if(!GetPlayerPhoneBook(playerid, idx, PB_SQL_ID)) continue;
				SetPlayerListitemValue(playerid, count ++, idx);

				format(fmt_str, sizeof fmt_str, "%s - tel.%s\n", GetPlayerPhoneBook(playerid, idx, PB_NAME), GetPlayerPhoneBook(playerid, idx, PB_NUMBER));
				strcat(string, fmt_str);
			}
			Dialog(playerid, DIALOG_PHONE_BOOK, DIALOG_STYLE_LIST, "{FFCD00}ù????????ù ?????", string, "????????", "??????");
		}
		else
		{
			SendClientMessage(playerid, 0xCECECEFF, "? ?????????? ????? ??? ???????");
			SendClientMessage(playerid, 0xCECECEFF, "????? ???????? ????? ??????? ??????? {FFFF00}/add [id ??????]");
		}
	}
	else
	{
		InitPlayerPhoneBook(playerid);
		CallLocalFunction("ShowPlayerPhoneBook", "i", playerid);
	}
	return 1;
}

public: BusinesGPSListInit()
{
	new rows;
	new query[64 + 1];
	new Cache: result;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM business_gps ORDER BY pos DESC, time ASC LIMIT %d", MAX_BUSINESS_GPS);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();
	for(new idx; idx < rows; idx ++)
	{
		SetBusinessGPSInfo(idx, BG_SQL_ID, 	cache_get_row_int(idx, 0));
		SetBusinessGPSInfo(idx, BG_BIZ_ID, 	cache_get_row_int(idx, 1));
		SetBusinessGPSInfo(idx, BG_POS, 	cache_get_row_int(idx, 2));
		SetBusinessGPSInfo(idx, BG_TIME, 	cache_get_row_int(idx, 3));
	}
	g_business_gps_count = rows;
	g_business_gps_init = true;

	cache_delete(result);
}

public: ShowPlayerGPSBusinessList(playerid)
{
	if(g_business_gps_init)
	{
		new businessid;

		new fmt_str[44];
		new string[(sizeof fmt_str) * MAX_BUSINESS_GPS];
		new city[MAX_ZONES_NAME + 1];

		if(!g_business_gps_count)
			string = "? ?????? ?????? ? ?????? ??? ????????";

		for(new idx, count; idx < g_business_gps_count; idx ++)
		{
			businessid = GetBusinessGPSInfo(idx, BG_BIZ_ID);

			GetCityName(GetBusinessData(businessid, B_POS_X), GetBusinessData(businessid, B_POS_Y), city);
			format(fmt_str, sizeof fmt_str, "%d. %s (%s)\n", idx + 1, GetBusinessInteriorInfo(GetBusinessData(businessid, B_INTERIOR), BT_NAME) , city);
			strcat(string, fmt_str);

			SetPlayerListitemValue(playerid, count ++, idx);
		}
		Dialog(playerid, DIALOG_GPS_BUSINESS, DIALOG_STYLE_LIST, "{FFCD00}??????? ???????", string, "????????", "?????");
	}
	else
	{
		BusinesGPSListInit();
		CallLocalFunction("ShowPlayerGPSBusinessList", "i", playerid);
	}
}

public: ShowPlayerBusinessDialog(playerid, operationid)
{
	new businessid = GetPlayerBusiness(playerid);
	if(businessid != -1)
	{
		switch(operationid)
		{
			case BIZ_OPERATION_PARAMS: // ?????????? ?????????
			{
				Dialog
				(
					playerid, DIALOG_BIZ_PARAMS, DIALOG_STYLE_LIST,
					"{33AACC}????????? ?????????? ???????",
					"1. {669966}??????? {FFFFFF}??? {CC3333}??????? {FFFFFF}??????\n"\					
					"2. none\n"\
					"3. ???????? ????????? ????????\n"\
					"4. ???????? ????????\n"\
					"5. ???????? ?????\n"\
					"6. ?????????ù ??????????",
					"???????", "?????"
				);
			}
			case BIZ_OPERATION_LOCK: // ??????? / ???????
			{
				if(GetBusinessData(businessid, B_LOCK_STATUS))
				{
					SetBusinessData(businessid, B_LOCK_STATUS, false);
					SendClientMessage(playerid, 0x66CC00FF, "?????? ??????");
				}
				else
				{
					SetBusinessData(businessid, B_LOCK_STATUS, true);
					SendClientMessage(playerid, 0xFF6600FF, "?????? ??????");
				}
				UpdateBusinessLabel(businessid);

				new query[75];
				mysql_format(mysql, query, sizeof query, "UPDATE business SET `lock`=%d WHERE `id`=%d LIMIT 1", GetBusinessData(businessid, B_LOCK_STATUS), GetBusinessData(businessid, B_SQL_ID));
				mysql_query(mysql, query, false);

				CallLocalFunction("ShowPlayerBusinessDialog", "ii", playerid, BIZ_OPERATION_PARAMS);
			}			
			case BIZ_OPERATION_PROD_PRICE: // ?????????? ????????? ????????
			{
				Dialog
				(
					playerid, DIALOG_BIZ_PROD_PRICE, DIALOG_STYLE_INPUT,
					"{33AACC}????????? ????????",
					"{FFFFFF}ù?? ?? ?????? ???????? ????????? ???????? ??ù ???????\n"\
					"??????? ???? ? ???????? ?? 25 ?? 200 ??????",
					"???????", "?????"
				);
			}
			case BIZ_OPERATION_PROD_ORDER: // ???????? ????????
			{
				Dialog
				(
					playerid, DIALOG_BIZ_ORDER_PRODS, DIALOG_STYLE_INPUT,
					"{33AACC}????? ?????????",
					"{FFFFFF}??????? ????????? ?? ?????? ?????????",
					"????????", "?????"
				);
			}
			case BIZ_OPERATION_PROD_ORDER_CANCEL: // ???????? ?????
			{
				new order_id = GetBusinessData(businessid, B_ORDER_ID);
				if(order_id != -1)
				{
					new fmt_str[128];
					format
					(
						fmt_str, sizeof fmt_str,
						"{FFFFFF}?? ????????????? ?????? ???????? ??????\n"\
						"?? ???? ??????? ????? ?????????? {FFCD00}%d ???",
						GetOrderData(order_id, O_AMOUNT) * GetOrderData(order_id, O_PRICE)
					);
					Dialog(playerid, DIALOG_BIZ_ORDER_CANCEL, DIALOG_STYLE_MSGBOX, "{33AADD}?????? ??????", fmt_str, "??", "???");
				}
				else
				{
					SendClientMessage(playerid, 0xFF6600FF, "?? ?? ??????ù?? ????? ????????? ??ù ?????? ???????");
					CallLocalFunction("ShowPlayerBusinessDialog", "ii", playerid, BIZ_OPERATION_PARAMS);
				}
			}
			case BIZ_OPERATION_PROFIT_STATS: // ?????????ù ??????????
			{
				new query[256];

				new time = gettime();
				new cur_day = time - (time % 86400);
				new start_day = cur_day - (86400 * 20);

				mysql_format(mysql, query, sizeof query, "SELECT FROM_UNIXTIME(time, '%%Y-%%m-%%d') AS date, SUM(money) as total FROM business_profit WHERE bid=%d AND view=1 AND time >= %d AND time < %d GROUP BY time ORDER BY time DESC LIMIT 20", GetBusinessData(businessid, B_SQL_ID), start_day, cur_day);
				mysql_tquery(mysql, query, "ShowBusinessProfit", "ii", playerid, ++ mysql_race[playerid]);
			}
			case BIZ_OPERATION_IMPROVEMENTS: // ????????ù
			{
				new fmt_str[80];
				new string[512];

				new buffer[14 + 1];
				new i_level = GetBusinessData(businessid, B_IMPROVEMENTS);

				for(new idx; idx < sizeof(g_business_improvements); idx ++)
				{
					format(fmt_str, sizeof fmt_str, "%d ???????:\t%s\t", idx + 1, g_business_improvements[idx][I_NAME]);

					switch(idx)
					{
						case 0,1,4:
							buffer = "\t";

						case 5:
							buffer = "\t\t";

						default:
							buffer[0] = 0;
					}
					if(buffer[0] != EOS)
						strcat(fmt_str, buffer);

					if(i_level > idx)
					{
						strins(fmt_str, "{2277AA}", 0, sizeof fmt_str);
						strcat(fmt_str, "???????");
					}
					else
					{
						if(i_level < idx)
						{
							strins(fmt_str, "{CC3344}", 0, sizeof fmt_str);
						}
						strcat(string, fmt_str);

						valfmt(buffer, g_business_improvements[idx][I_PRICE]);
						format(fmt_str, sizeof fmt_str, "%s ???", buffer);

						if(i_level == idx)
							strins(fmt_str, "{66CC33}", 0, sizeof fmt_str);
					}
					strcat(fmt_str, "\n");
					strcat(string, fmt_str);
				}
				Dialog(playerid, DIALOG_BIZ_IMPROVEMENT, DIALOG_STYLE_LIST, "{33AADD}????????? ????????ù", string, "??????", "?????");
			}
		}
	}

	return 1;
}

AntiDeAMX()
{
        new a[][] =
        {
                "Unarmed (Fist)",
                "Brass K"
        };
        #pragma unused a
}

public: ShowBusinessProfit(playerid, race)
{
	if(race != mysql_race[playerid])
	{
		new string[600];
		new fmt_str[32];
		new rows = cache_num_rows();

		if(rows)
		{
			string = "????\t\t\t???????\n\n{FFFFFF}";
		}
		else string = "{FFFFFF}?????????ù ?????????? ?????? ??????? ??? ?? ????????????";

		for(new idx; idx < rows; idx ++)
		{
			cache_get_row(idx, 0, fmt_str, mysql, sizeof fmt_str);
			strcat(string, fmt_str);

			format(fmt_str, sizeof fmt_str, "\t\t%d ???\n", cache_get_row_int(idx, 1));
			strcat(string, fmt_str);
		}
		Dialog(playerid, DIALOG_BIZ_INFO, DIALOG_STYLE_MSGBOX, "{33AADD}????? ??????? ?? 20 ????", string, "<< ?????", "???????");
	}
}

public: ShowPlayerFuelStationDialog(playerid, operationid)
{
	new stationid = GetPlayerFuelStation(playerid);
	if(stationid != -1)
	{
		switch(operationid)
		{
			case FUEL_ST_OPERATION_PARAMS:
			{
				Dialog
				(
					playerid, DIALOG_FUEL_STATION_PARAMS, DIALOG_STYLE_LIST,
					"{33AACC}????????? ??????????? ???????",
					"1. {669966}??????? {FFFFFF}??? {CC3333}??????? {FFFFFF}??????????? ???????\n"\
					"2. ????? ????????\n"\
					"3. ???????? ???? ?? ???????\n"\
					"4. ?????????? ?????????? ????\n"\
					"5. ???????? ???????\n"\
					"6. ???????? ?????\n"\
					"7. ?????????ù ??????????\n"\
					"8. ???????? ??????????? ???????",
					"???????", "?????"
				);
			}
			case FUEL_ST_OPERATION_LOCK:
			{
				if(GetFuelStationData(stationid, FS_LOCK_STATUS))
				{
					SetFuelStationData(stationid, FS_LOCK_STATUS, false);
					SendClientMessage(playerid, 0x66CC00FF, "??????????ù ??????ù ???????");
				}
				else
				{
					SetFuelStationData(stationid, FS_LOCK_STATUS, true);
					SendClientMessage(playerid, 0xFF6600FF, "??????????ù ??????ù ???????");
				}
				UpdateFuelStationLabel(stationid);

				new query[75];
				mysql_format(mysql, query, sizeof query, "UPDATE `fuel_stations` SET `lock`=%d WHERE `id`=%d LIMIT 1", GetFuelStationData(stationid, FS_LOCK_STATUS), GetFuelStationData(stationid, FS_SQL_ID));
				mysql_query(mysql, query, false);

				CallLocalFunction("ShowPlayerFuelStationDialog", "ii", playerid, FUEL_ST_OPERATION_PARAMS);
			}
			case FUEL_ST_OPERATION_NEW_NAME:
			{
				Dialog
				(
					playerid, DIALOG_FUEL_STATION_NAME, DIALOG_STYLE_INPUT,
					"{33AACC}????? ???????ù",
					"{FFFFFF}??????? ????? ???????? ??ù ??????????? ???????\n\n"\
					"ù????????ù:\n"\
					"- ????? ?? 3-? ?? 15-?? ????????\n"\
					"- ???????? ?? ?????? ????????????? ???????? ???????\n"\
					"- ???????? ?????? ??????????????ù ? ???????????? ??????ù??\n\n"\
					"{CC3333}??????????: ????? ???????? ?? ?????????ù ????? ???????? ???????",
					"???????", "?????"
				);
			}
			case FUEL_ST_OPERATION_FUEL_PRICE:
			{
				Dialog
				(
					playerid, DIALOG_FUEL_STATION_PRICE_FUEL, DIALOG_STYLE_INPUT,
					"???? ???????",
					"{FFFFFF}??????? ????????? ???? ?? 1 ????\n"\
					"??????? ? ???????? ?? 2 ?? 10 ???.",
					"??????", "?????"
				);
			}
			case FUEL_ST_OPERATION_FUEL_ORDER:
			{
				Dialog
				(
					playerid, DIALOG_FUEL_STATION_ORDER_FUELS, DIALOG_STYLE_INPUT,
					"????? ???????",
					"{FFFFFF}??????? ?????? ??????? ?? ?????? ?????????",
					"????????", "?????"
				);
			}
			case FUEL_ST_OPERATION_FUEL_ORDER_CA:
			{
				new order_id = GetFuelStationData(stationid, FS_ORDER_ID);

				if(order_id != -1)
				{
					new fmt_str[128];
					format
					(
						fmt_str, sizeof fmt_str,
						"{FFFFFF}?? ????????????? ?????? ???????? ??????\n"\
						"?? ???? ??????????? ??????? ????? ?????????? {FFCD00}%d ???",
						GetOrderData(order_id, O_AMOUNT) * GetOrderData(order_id, O_PRICE)
					);
					Dialog(playerid, DIALOG_FUEL_STATION_ORDER_CANCE, DIALOG_STYLE_MSGBOX, "{33AADD}?????? ??????", fmt_str, "??", "???");
				}
				else
				{
					SendClientMessage(playerid, 0xFF6600FF, "?? ?? ??????ù?? ????? ??????? ??ù ????? ???");
					CallLocalFunction("ShowPlayerFuelStationDialog", "ii", playerid, FUEL_ST_OPERATION_PARAMS);
				}
			}
			case FUEL_ST_OPERATION_PROFIT_STATS:
			{
				new query[256];

				new time = gettime();
				new cur_day = time - (time % 86400);
				new start_day = cur_day - (86400 * 20);

				format(query, sizeof query, "SELECT FROM_UNIXTIME(time, '%%Y-%%m-%%d') AS date, SUM(money) as total FROM fuel_stations_profit WHERE fid=%d AND view=1 AND time >= %d AND time < %d GROUP BY time ORDER BY time DESC LIMIT 20", GetFuelStationData(stationid, FS_SQL_ID), start_day, cur_day);
				mysql_tquery(mysql, query, "ShowFuelStationProfit", "ii", playerid, ++ mysql_race[playerid]);
			}
			case FUEL_ST_OPERATION_IMPROVEMENTS:
			{
				new fmt_str[75];
				new string[300];

				new str_numeric[14 + 1];
				new i_level = GetFuelStationData(stationid, FS_IMPROVEMENTS);

				for(new idx; idx < sizeof(g_fuel_station_improvements); idx ++)
				{
					format(fmt_str, sizeof fmt_str, "%d ???????:\t%s\t", idx + 1, g_fuel_station_improvements[idx][I_NAME]);

					if(idx != 2)
						strcat(fmt_str, "\t");

					if(i_level > idx)
					{
						strins(fmt_str, "{2277AA}", 0, sizeof fmt_str);
						strcat(fmt_str, "???????");
					}
					else
					{
						if(i_level < idx)
						{
							strins(fmt_str, "{CC3344}", 0, sizeof fmt_str);
						}
						strcat(string, fmt_str);

						valfmt(str_numeric, g_fuel_station_improvements[idx][I_PRICE]);
						format(fmt_str, sizeof fmt_str, "%s ???", str_numeric);

						if(i_level == idx)
							strins(fmt_str, "{66CC33}", 0, sizeof fmt_str);
					}
					strcat(fmt_str, "\n");
					strcat(string, fmt_str);
				}
				Dialog(playerid, DIALOG_FUEL_STATION_IMPROVEMENT, DIALOG_STYLE_LIST, "{33AADD}????????ù ??ù ??????????? ???????", string, "??????", "?????");
			}
		}
	}
	return 1;
}

public: ShowFuelStationProfit(playerid, race)
{
	if(race != mysql_race[playerid])
	{
		new string[600];
		new fmt_str[32];
		new rows = cache_num_rows();

		if(rows)
		{
			string = "????\t\t\t???????\n\n{FFFFFF}";
		}
		else string = "{FFFFFF}?????????ù ?????????? ????? ??????????? ??????? ??? ?? ????????????";

		for(new idx; idx < rows; idx ++)
		{
			cache_get_row(idx, 0, fmt_str, mysql, sizeof fmt_str);
			strcat(string, fmt_str);

			format(fmt_str, sizeof fmt_str, "\t\t%d ???\n", cache_get_row_int(idx, 1));
			strcat(string, fmt_str);
		}
		Dialog(playerid, DIALOG_FUEL_STATION_INFO, DIALOG_STYLE_MSGBOX, "{33AADD}????? ??? ?? 20 ????", string, "<< ?????", "???????");
	}
}

public: PresentFlowersToPlayer(playerid, to_player)
{
	SetPlayerAmmo(playerid, WEAPON_FLOWER, 0);
	GivePlayerWeapon(to_player, WEAPON_FLOWER, 1);
}

public: ShowPlayerLotteryDialog(playerid)
{
	if(GetPlayerData(playerid, P_LOTTERY) >= 100)
	{
		new hour;
		new fmt_str[632];

		gettime(hour);
		format
		(
			fmt_str, sizeof fmt_str,
			"???? ?????????? ?????: {FFCD00}%d\n\n"\
			"{FFFFFF}?? ???????????????? ? ???????, ????????? ????? ???????? ??\n"\
			"????ù ?????????? ?????????, ??????? ??????? ? %d:02\n"\
			"?? ???????? ?? ???? ????? ????ù?? ? ??? ???????.\n\n"\
			"??????? ????? ???????? ?? ????, ??????? ????? ??????? ?\n"\
			"????? ?????????? ????? ? ? ?????, ??????? ??????? ??\n"\
			"????ù ????????? (?? ???ù??? ????? ???????):\n\n"\
			"??? ??????????:\t{FF6633}0 ???\n"\
			"{FFFFFF}1 ?????:\t\t{66FF00}2000 ???\n"\
			"{FFFFFF}2 ?????:\t\t{66FF00}15000 ???\n"\
			"{FFFFFF}??? ?????:\t\t{66FF00}50000 ???\n\n"\
			"{FFFFFF}???? ?? ?????? ???????? ?????????? ?????, ??????? ?????\n"\
			"3 ?????. ? ????????? ?????? ?????? ??????? \"??\"",
			GetPlayerData(playerid, P_LOTTERY),
			GetElapsedTime(gettime(), g_last_lottery_time) >= 1 ? hour : hour+1
		);
		Dialog(playerid, DIALOG_BIZ_LOTTERY, DIALOG_STYLE_INPUT, "{66CC00}??????ù", fmt_str, "??", "");
	}
}

public: UpdateFactoryDesk(deskid)
{
	new fmt_str[64];

	format(fmt_str, sizeof fmt_str, "??????? ????? ?%d\n%s", deskid + 1, factory_desk[deskid][FD_USED] ? ("{FF6600}???ù??") : ("{33CC00}????????"));
	UpdateDynamic3DTextLabelText(factory_desk[deskid][FD_LABEl], 0xFFFFFFEE, fmt_str);
}


public: ClearBanList()
{
	new query[64];
	new time = gettime();

	format(query, sizeof query, "SELECT ip FROM ban_list WHERE ban_time <= %d", time);
	mysql_tquery(mysql, query, "UnBanIPs", "i", time);

	return 1;
}

public: UnBanIPs(time)
{
	new ip[16];
	new query[64];
	new rows = cache_num_rows();

	if(rows)
	{
		for(new idx; idx < rows; idx ++)
		{
			cache_get_row(idx, 0, ip);

			format(query, sizeof query, "unbanip %s", ip);
			SendRconCommand(query);
		}
		SendRconCommand("reloadbans");

		format(query, sizeof query, "DELETE FROM ban_list WHERE ban_time <= %d", time);
		mysql_query(mysql, query, false);
	}
	return 1;
}

public: PlayerOwnableCarInit(playerid)
{
	new index;
	new vehicleid = -1;

	while(vehicleid < MAX_VEHICLES-1)
	{
		vehicleid ++;
		index = GetVehicleData(vehicleid, V_ACTION_ID);

		if(GetVehicleData(vehicleid, V_ACTION_TYPE) != VEHICLE_ACTION_TYPE_OWNABLE_CAR) continue;
		if(GetOwnableCarData(index, OC_OWNER_ID) != GetPlayerAccountID(playerid)) continue;

		SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);
		break;
	}
}

public: SaveOwnableCar(vehicleid)
{
	if(IsAOwnableCar(vehicleid))
	{
		new query[300];
		new index = GetVehicleData(vehicleid, V_ACTION_ID);

		new Float: health;

		GetVehicleHealth(vehicleid, health);

		format
		(
			query, sizeof query,
			"UPDATE ownable_cars SET "\
			"pos_x=%f,"\
			"pos_y=%f,"\
			"pos_z=%f,"\
			"angle=%f,"\
			"status=%d,"\
			"alarm=%d,"\
			"key_in=%d,"\
			"mileage=%f,"\
			"health=%f,"\
			"number='%s'"\
			" WHERE id=%d LIMIT 1",
			GetOwnableCarData(index, OC_POS_X),
			GetOwnableCarData(index, OC_POS_Y),
			GetOwnableCarData(index, OC_POS_Z),
			GetOwnableCarData(index, OC_ANGLE),
			GetVehicleParam(vehicleid, V_LOCK),
			GetVehicleParam(vehicleid, V_ALARM),
			GetOwnableCarData(index, OC_KEY_IN),
			GetVehicleData(vehicleid, V_MILEAGE),
			GetVehicleData(vehicleid, V_HEALTH),
			GetOwnableCarData(index, OC_NUMBER),
			GetOwnableCarData(index, OC_SQL_ID)
		);
		mysql_query(mysql, query, false);

		return mysql_errno();
	}
	return -1;
}

public: ShowTrunkDialog(playerid, vehicleid, view)
{
	new count, type;

	new fmt_str[36];
	new string[(sizeof fmt_str) * MAX_VEHICLE_TRUNK_SLOTS + 1];

	ClearPlayerListitemValues(playerid);
	for(new idx; idx < MAX_VEHICLE_TRUNK_SLOTS; idx ++)
	{
		if(IsTrunkFreeSlot(vehicleid, idx)) continue;

		type = GetTrunkData(vehicleid, idx, VT_ITEM_TYPE);

		format(fmt_str, sizeof fmt_str, "%d. %s:\t{66CC00}%d %s\n", count + 1, GetItemInfo(type, I_NAME), GetTrunkData(vehicleid, idx, VT_ITEM_AMOUNT), GetItemInfo(type, I_NAME_COUNT));
		strcat(string, fmt_str);

		SetPlayerListitemValue(playerid, count ++, idx);
	}

	if(!view)
	{
		SetPlayerListitemValue(playerid, count, -1);
		SetPlayerUseTrunk(playerid, vehicleid);

		format(fmt_str, sizeof fmt_str, "{888888}%d. ????????", count + 1);
		strcat(string, fmt_str);

		Dialog(playerid, DIALOG_VEHICLE_TRUNK, DIALOG_STYLE_LIST, "{0099FF}?????????? ?????????", string, "???????", "???????");
	}
	else
	{
		if(!count)
			strcat(string, "{888888}?????");

		SetPlayerUseTrunk(playerid, INVALID_VEHICLE_ID);
		Dialog(playerid, DIALOG_VEHICLE_TRUNK, DIALOG_STYLE_LIST, "{0099FF}?????????? ?????????", string, "???????", "");
	}
	return 1;
}

// ------------------------------------------
stock GetTrunkFreeSlot(vehicleid, item_type)
{
	new free_slot = -1, comb_slot = -1;
	new bool: comb = GetItemInfo(item_type, I_COMBINATION);

	for(new idx; idx < MAX_VEHICLE_TRUNK_SLOTS; idx ++)
	{
		if(GetTrunkData(vehicleid, idx, VT_ITEM_TYPE) == item_type && comb)
		{
			comb_slot = idx;
		}
		else if(free_slot == -1 && IsTrunkFreeSlot(vehicleid, idx))
		{
			free_slot = idx;
		}
		else continue;
	}
	return comb_slot != -1 ? comb_slot : free_slot;
}

stock GetTrunkBusySlot(vehicleid, item_type)
{
	new busy_slot = -1;

	for(new idx; idx < MAX_VEHICLE_TRUNK_SLOTS; idx ++)
	{
		if(GetTrunkData(vehicleid, idx, VT_ITEM_TYPE) == item_type)
		{
			busy_slot = idx;
		}
		else continue;
	}
	return busy_slot;
}

stock AddTrunkItem(vehicleid, item_id, amount, value = 0)
{
	if(1 <= item_id <= sizeof(g_item_type)-1)
	{
		new free_slot = GetTrunkFreeSlot(vehicleid, item_id);
		if(free_slot != -1)
		{
			SetTrunkData(vehicleid, free_slot, VT_SQL_ID, 1);

			SetTrunkData(vehicleid, free_slot, VT_ITEM_TYPE, item_id);
			SetTrunkData(vehicleid, free_slot, VT_ITEM_VALUE, value);

			new query[100],
				index,
				oc_id;

			index = GetVehicleData(vehicleid, V_ACTION_ID);
			oc_id = GetOwnableCarData(index, OC_SQL_ID);

			if(!IsTrunkFreeSlot(vehicleid, free_slot))
			{
				AddTrunkData(vehicleid, free_slot, VT_ITEM_AMOUNT, +, amount);

				if((GetTrunkData(vehicleid, free_slot, VT_ITEM_AMOUNT) - amount) == 0)
				{
					mysql_format(mysql, query, sizeof query, "INSERT INTO trunks (oc_id,item_id,amount,value) VALUES (%d,%d,%d,%d)", oc_id, item_id, amount, value);
					mysql_query(mysql, query, false);
				}
				else
				{
					mysql_format(mysql, query, sizeof query, "UPDATE trunks SET amount='%d' WHERE item_id='%d' AND oc_id='%d' LIMIT 1", GetTrunkData(vehicleid, free_slot, VT_ITEM_AMOUNT), item_id, oc_id);
					mysql_query(mysql, query, false);
				}
			}

			else
			{
				SetTrunkData(vehicleid, free_slot, VT_ITEM_AMOUNT, amount);

				mysql_format(mysql, query, sizeof query, "INSERT INTO trunks (oc_id,item_id,amount,value) VALUES (%d,%d,%d,%d)", oc_id, item_id, amount, value);
				mysql_query(mysql, query, false);
			}

			return 1;
		}
		return -1;
	}
	return 0;
}


stock TakeTrunkItem(vehicleid, item_id, amount)
{
	if(1 <= item_id <= sizeof(g_item_type)-1)
	{
		new busy_slot = GetTrunkBusySlot(vehicleid, item_id);

		new query[100],
			index,
			oc_id;

		index = GetVehicleData(vehicleid, V_ACTION_ID);
		oc_id = GetOwnableCarData(index, OC_SQL_ID);

		if(!IsTrunkFreeSlot(vehicleid, busy_slot))
		{
			AddTrunkData(vehicleid, busy_slot, VT_ITEM_AMOUNT, -, amount);

			if(GetTrunkData(vehicleid, busy_slot, VT_ITEM_AMOUNT) >= 0)
			{
				if(!GetTrunkData(vehicleid, busy_slot, VT_ITEM_AMOUNT))
				{
					mysql_format(mysql, query, sizeof query, "DELETE FROM trunks WHERE item_id='%d' AND oc_id='%d'", item_id, oc_id);
					mysql_query(mysql, query, false);

					RemoveTrunkItem(vehicleid, busy_slot);
				}
				else
				{
					mysql_format(mysql, query, sizeof query, "UPDATE trunks SET amount='%d' WHERE item_id='%d' AND oc_id='%d' LIMIT 1", GetTrunkData(vehicleid, busy_slot, VT_ITEM_AMOUNT), item_id, oc_id);
					mysql_query(mysql, query, false);
				}
				return 1;
			}
			else
			{
				AddTrunkData(vehicleid, busy_slot, VT_ITEM_AMOUNT, +, amount);
				return -1;
			}
		}
		return -1;
	}
	return 0;
}

stock RemoveTrunkItem(vehicleid, item_slot)
{
	if(!IsTrunkFreeSlot(vehicleid, item_slot))
	{
		SetTrunkData(vehicleid, item_slot, VT_SQL_ID,	0);

		SetTrunkData(vehicleid, item_slot, VT_ITEM_TYPE, 	0);
		SetTrunkData(vehicleid, item_slot, VT_ITEM_AMOUNT, 	0);
		SetTrunkData(vehicleid, item_slot, VT_ITEM_VALUE, 	0);

		return 1;
	}
	return 0;
}

stock GetCoordVehicle(vehicleid, type, &Float:x, &Float:y, &Float:z, &Float:angle, &Float:distance) // by Essle (???????? / ?????)
{
    GetVehicleModelInfo(GetVehicleData(vehicleid, V_MODELID), 1, x, distance, z); // ?????? ????? ??????
    distance = distance / 2 + 0.1; // ?????????? ????? ????? ?? ???

    GetVehiclePos(vehicleid, x, y, z); // ?????? ?????????? ????
    GetVehicleZAngle(vehicleid, angle); // ?????? ???? ???????? ????

	switch(type)
	{
		case VEHICLE_COORD_TYPE_BOOT: // ????????
		{
			x += (distance * floatsin(-angle+180, degrees)); // ???????? ?????????? x ?a???????
			y += (distance * floatcos(-angle+180, degrees)); // ???????? ?????????? y ?a???????
		}
		case VEHICLE_COORD_TYPE_BONNET: // ?????
		{
			x -= (distance * floatsin(-angle+180, degrees)); // ???????? ?????????? x ??????
			y -= (distance * floatcos(-angle+180, degrees)); // ???????? ?????????? y ??????
		}
		default:
		{
			return 0;
		}
	}
	return 1;
}

stock GetVehicleTurnSignalPos(vehicleid, type, &Float:x, &Float:y)
{
	new Float: size_x,
		Float: size_y,
		Float: size_z;

	GetVehicleModelInfo(GetVehicleData(vehicleid, V_MODELID), 1, size_x, size_y, size_z);

	switch(type)
	{
		case 1:
		{
			x = -(size_x / 2) + 0.3;
			y = size_y / 2 - 0.5;
		}
		case 2:
		{
			x = -(size_x / 2) + 0.3;
			y = -(size_y / 2) + 0.4;
		}
		case 3:
		{
			x = size_x / 2 - 0.3;
			y = size_y / 2 - 0.5;
		}
		case 4:
		{
			x = size_x / 2 - 0.3;
			y = -(size_y / 2) + 0.4;
		}
	}

	return 1;
}

stock SetVehicleToHotelRespawn(hotelid, vehicleid)
{
	if(IsValidVehicle(vehicleid))
	{
		new free_slot = GetHotelFreePark(hotelid);
		if(free_slot != -1)
		{
			g_hotel_car_park_pos[hotelid][free_slot][HC_VEHICLE_ID] = vehicleid;

			SetVehiclePos(vehicleid, g_hotel_car_park_pos[hotelid][free_slot][HC_POS_X], g_hotel_car_park_pos[hotelid][free_slot][HC_POS_Y], g_hotel_car_park_pos[hotelid][free_slot][HC_POS_Z]);
			SetVehicleZAngle(vehicleid, g_hotel_car_park_pos[hotelid][free_slot][HC_ANGLE]);

			return 1;
		}
	}
	return 0;
}

stock GetHotelFreePark(hotelid)
{
	new vehicleid, slot = -1;

	for(new idx; idx < sizeof(g_hotel_car_park_pos[]); idx ++)
	{
		vehicleid = g_hotel_car_park_pos[hotelid][idx][HC_VEHICLE_ID];
		if(GetVehicleDistanceFromPoint(vehicleid, g_hotel_car_park_pos[hotelid][idx][HC_POS_X], g_hotel_car_park_pos[hotelid][idx][HC_POS_Y], g_hotel_car_park_pos[hotelid][idx][HC_POS_Z]) >= 8.0) continue;

		slot = idx;
		break;
	}
	return slot;
}

stock ShowOwnableCarPass(playerid, vehicleid)
{
	new model_id = GetVehicleData(vehicleid, V_MODELID);

	if(model_id && IsAOwnableCar(vehicleid))
	{
		new fmt_str[300];
		new Float: health;
		new index = GetVehicleData(vehicleid, V_ACTION_ID);

		new description[32];

		format(description, sizeof description, "{0099FF}????????? ?? ù? ?%d", GetOwnableCarData(index, OC_SQL_ID));

		GetVehicleHealth(vehicleid, health);

		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}????????:\t\t{3399FF}%s\n\n"\
			"{FFFFFF}??????:\t\t{3399FF}%d\n"\
			"{FFFFFF}?????ù???:\t\t{3399FF}%d\n"\
			"{FFFFFF}??????:\t\t{3399FF}%07i\n"\
			"{FFFFFF}????:\t\t\t{3399FF}ID %d, %d\n"\
			"{FFFFFF}???. ?????????:\t{3399FF}%d ???\n"\
			"{FFFFFF}???????? ?????:\t{3399FF}%s",
			GetVehicleInfo(model_id-400, VI_NAME),
			model_id,
			floatround(health),
			floatround(GetVehicleData(vehicleid, V_MILEAGE), floatround_ceil),
			GetOwnableCarData(index, OC_COLOR_1),
			GetOwnableCarData(index, OC_COLOR_2),
			GetVehicleInfo(model_id-400, VI_PRICE),
			GetOwnableCarData(index, OC_NUMBER)
		);
		Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, description, fmt_str, "???????", "");

		return 1;
	}
	return 0;
}
stock ShowOwnableCarLoadDialogLut(playerid, id, bool: show_menu = false, bool:rent_car = false)
{
	SetPVarInt(playerid, "ownablecar_id", id);

	if(show_menu)
		SetPVarInt(playerid, "show_menu", 1);

	if(rent_car)
	{
		SetPVarInt(playerid, "rent_true", 1);
		
		new w_str[114],
		Cache:result,
		price, price_auto, query[64],
		model_id;

		mysql_format(mysql, query, sizeof query, "SELECT model_id FROM ownable_cars WHERE id='%d'", id);
		result = mysql_query(mysql, query, true);

		model_id = cache_get_row_int(0, 0);

		cache_delete(result);

		price = GetVehicleInfo(model_id - 400, VI_PRICE);

		price_auto = price * 1 / 100;

		SetPVarInt(playerid, "price_rent", price_auto);

		format(w_str, sizeof w_str, "1. ???????? ????????? ?? GPS {FF6600}(300 ???)\n""{FFFFFF}2. ????????? ????????? ?? ???? ????????(%d)", price_auto);

		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR_LOAD_LUT, DIALOG_STYLE_LIST,
			"{FFCD00}??????? ?????????ù ???????????",
			w_str,
			"???????", "???????"
		);
	}
	else
	{
		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR_LOAD, DIALOG_STYLE_LIST,
		"{FFCD00}??????? ?????????ù ???????????",
		"1. ???????? ????????? ?? GPS {FF6600}(300 ???)\n"\
		"2. ????????? ????????? ?? ????? {FF6600}????????\n"\
		"3. ????????? ????????? ?? ????? {FF6600}????????\n"\
		"4. ???????? ???????? ?????????ù",
		"???????", "???????"
		);
	}
}

stock ShowOwnableCarLoadDialogBat(playerid, id, bool: show_menu = false, bool:rent_car = false)
{
	SetPVarInt(playerid, "ownablecar_id", id);

	if(show_menu)
		SetPVarInt(playerid, "show_menu", 1);

	if(rent_car)
	{
		SetPVarInt(playerid, "rent_true", 1);
		
		new w_str[114],
		Cache:result,
		price, price_auto, query[64],
		model_id;

		mysql_format(mysql, query, sizeof query, "SELECT model_id FROM ownable_cars WHERE id='%d'", id);
		result = mysql_query(mysql, query, true);

		model_id = cache_get_row_int(0, 0);

		cache_delete(result);

		price = GetVehicleInfo(model_id - 400, VI_PRICE);

		price_auto = price * 1 / 100;

		SetPVarInt(playerid, "price_rent", price_auto);

		format(w_str, sizeof w_str, "1. ???????? ????????? ?? GPS {FF6600}(300 ???)\n""{FFFFFF}2. ????????? ????????? ?? ???? ????????(%d)", price_auto);

		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR_LOAD_BAT, DIALOG_STYLE_LIST,
			"{FFCD00}??????? ?????????ù ???????????",
			w_str,
			"???????", "???????"
		);
	}
	else
	{
		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR_LOAD, DIALOG_STYLE_LIST,
		"{FFCD00}??????? ?????????ù ???????????",
		"1. ???????? ????????? ?? GPS {FF6600}(300 ???)\n"\
		"2. ????????? ????????? ?? ????? {FF6600}????????\n"\
		"3. ????????? ????????? ?? ????? {FF6600}????????\n"\
		"4. ???????? ???????? ?????????ù",
		"???????", "???????"
		);
	}
}

stock ShowOwnableCarLoadDialogArz(playerid, id, bool: show_menu = false, bool:rent_car = false)
{
	SetPVarInt(playerid, "ownablecar_id", id);

	if(show_menu)
		SetPVarInt(playerid, "show_menu", 1);

	if(rent_car)
	{
		SetPVarInt(playerid, "rent_true", 1);
		
		new w_str[114],
		Cache:result,
		price, price_auto, query[64],
		model_id;

		mysql_format(mysql, query, sizeof query, "SELECT model_id FROM ownable_cars WHERE id='%d'", id);
		result = mysql_query(mysql, query, true);

		model_id = cache_get_row_int(0, 0);

		cache_delete(result);

		price = GetVehicleInfo(model_id - 400, VI_PRICE);

		price_auto = price * 1 / 100;

		SetPVarInt(playerid, "price_rent", price_auto);

		format(w_str, sizeof w_str, "1. ???????? ????????? ?? GPS {FF6600}(300 ???)\n""{FFFFFF}2. ????????? ????????? ?? ???? ????????(%d)", price_auto);

		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR_LOAD_ARZ, DIALOG_STYLE_LIST,
			"{FFCD00}??????? ?????????ù ???????????",
			w_str,
			"???????", "???????"
		);
	}
	else
	{
		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR_LOAD, DIALOG_STYLE_LIST,
		"{FFCD00}??????? ?????????ù ???????????",
		"1. ???????? ????????? ?? GPS {FF6600}(300 ???)\n"\
		"2. ????????? ????????? ?? ????? {FF6600}????????\n"\
		"3. ????????? ????????? ?? ????? {FF6600}????????\n"\
		"4. ???????? ???????? ?????????ù",
		"???????", "???????"
		);
	}
}

stock ShowOwnableCarLoadDialog(playerid, id, bool: show_menu = false, bool:rent_car = false)
{
	SetPVarInt(playerid, "ownablecar_id", id);

	if(show_menu)
		SetPVarInt(playerid, "show_menu", 1);

	if(rent_car)
	{
		SetPVarInt(playerid, "rent_true", 1);
		
		new w_str[2048],
		Cache:result,
		price, price_auto, query[64],
		model_id;

		mysql_format(mysql, query, sizeof query, "SELECT model_id FROM ownable_cars WHERE id='%d'", id);
		result = mysql_query(mysql, query, true);

		model_id = cache_get_row_int(0, 0);

		cache_delete(result);

		price = GetVehicleInfo(model_id - 400, VI_PRICE);

		price_auto = price * 1 / 100;

		SetPVarInt(playerid, "price_rent", price_auto);

		format(w_str, sizeof w_str, "1. ???????? ????????? ?? GPS {FF6600}(300 ???)\n""{FFFFFF}2. ????????? ????????? ?? ???? ????????(%d)", price_auto);

		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR_LOAD, DIALOG_STYLE_LIST,
			"{FFCD00}??????? ?????????ù ???????????",
			w_str,
			"???????", "???????"
		);
	}
	else
	{
		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR_LOAD, DIALOG_STYLE_LIST,
			"{FFCD00}??????? ?????????ù ???????????",
			"1. ???????? ????????? ?? GPS {FF6600}(300 ???)\n"\
			"{888888}2. ????????? ?????????",
			"???????", "???????"
		);
	}
}

stock IsAOwnableCar(vehicleid)
{
	if(IsValidVehicleID(vehicleid))
	{
		if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_OWNABLE_CAR)
		{
			return 1;
		}
	}
	return 0;
}

stock IsVehicleSeatOccupied(vehicleid, seatid)
{
	foreach(new i : Player)
	{
		if(!IsPlayerConnected(i)) continue;
		else if(!IsPlayerLogged(i)) continue;
		else if(!IsPlayerInVehicle(i, vehicleid)) continue;
		else if(GetPlayerVehicleSeat(i) != seatid) continue;

		return 1;
	}

	return 0;
}

stock IsVehicleOccupied(vehicleid)
{
	foreach(new i : Player)
	{
		if(!IsPlayerInAnyVehicle(i)) continue;

		if(GetPlayerVehicleID(i) == vehicleid)
			return 1;
	}

	return 0;
}

stock IsTrailerAttachedToAnyVehicle(trailerid)
{
	for(new i = 1; i < MAX_VEHICLES; i ++)
	{
		if(!IsValidVehicle(i)) continue;

		if(GetVehicleTrailer(i) == trailerid)
			return 1;
	}

	return 0;
}

stock ShowPlayerHotelRoomPayForRent(playerid)
{
	new hotel_id = GetPlayerInHotelID(playerid);
	new room_id = GetPlayerData(playerid, P_HOUSE_ROOM);

	if(GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL) == hotel_id)
	{
		new rent_days = GetElapsedTime(GetHotelData(hotel_id, room_id, H_RENT_DATE), gettime(), CONVERT_TIME_TO_DAYS);
		if(rent_days < 0)
		{
			rent_days = 0;
		}

		new fmt_str[128];
		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}?????????? ????:\t\t%d ?? 30\n"\
			"?????????ù ?????:\t\t1000 ???\n\n"\
			"?? ??????? ???? ?? ?????? ???????? ??????",
			rent_days
		);
		Dialog(playerid, DIALOG_HOTEL_PAY_FOR_ROOM, DIALOG_STYLE_INPUT, "{66CC99}?????? ?????????ù ? ?????", fmt_str, "????????", "?????");
	}
}

stock ShowPlayerHotelClientMenu(playerid, hotel_id)
{
	if(GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL) == hotel_id)
	{
		Dialog
		(
			playerid, DIALOG_HOTEL_CLIENT_MENU, DIALOG_STYLE_LIST,
			"{66CC99}???? ???????",
			"1. ???????? ??????????\n"\
			"2. ?????????ù ? ??????????\n"\
			"3. ???????? ????????? ?? GPS\n"\
			"4. ????????? ????????? ? ????? (1000 ???)\n"\
			"5. ??????? ?????????\n"\
			"6. ?????????ù ?? ????ù",
			"???????", "?????"
		);
	}
	else
	{
		SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????????? ? ???? ?????????");
		ShowPlayerHotelDialog(playerid);
	}
}

stock GetHotelFreeRoom(hotelid)
{
	new free_room = -1;
	if(0 <= hotelid <= MAX_HOTELS-1)
	{
		new max_rooms = g_hotel_rooms_loaded[hotelid] / 12;

		for(new idx; idx < max_rooms; idx ++)
		{
			if(IsHotelRoomOwned(hotelid, idx)) continue;

			free_room = idx;
			break;
		}
	}
	return free_room;
}

stock ExitPlayerFromHotelRoom(playerid)
{
	new room_id = GetPlayerData(playerid, P_IN_HOTEL_ROOM);
	if(room_id != -1)
	{
		new hotel_id = GetPlayerInHotelID(playerid);
		if(hotel_id != -1)
		{
			if(IsPlayerInRangeOfPoint(playerid, 1.0, 490.0204, -992.8733, 1002.9255))
			{
				new floor = (room_id / 12) + 1;
				new index = (room_id % 12) / 5;

				SetPlayerPosEx
				(
					playerid,
					g_hotel_room_exit_pos[index][0],
					g_hotel_room_exit_pos[index][1],
					g_hotel_room_exit_pos[index][2],
					180.0,
					floor,
					((hotel_id + 1) * 200) + (floor + 1000)
				);
				SetPlayerData(playerid, P_IN_HOTEL_ROOM, -1);
			}
		}
	}
}

stock EnterPlayerToHotelRoom(playerid, hotel_id, room_id)
{
	if(GetPlayerData(playerid, P_IN_HOTEL_ROOM) == -1)
	{
		if(!GetHotelData(hotel_id, room_id, H_STATUS) || GetPlayerAccountID(playerid) == GetHotelData(hotel_id, room_id, H_OWNER_ID))
		{
			SetPlayerPosEx(playerid, 491.5204, -992.8733, 1002.9255, 0.0, 6, ((hotel_id + 1) * 400) + (room_id + 2000));
			SetPlayerData(playerid, P_IN_HOTEL_ROOM, room_id);

			SetPlayerData(playerid, P_IN_HOTEL_FLOOR, (room_id / 12) + 1);
		}
		else GameTextForPlayer(playerid, "~r~Closed", 2500, 1);
	}
	return 1;
}

stock ShowPlayerHotelFloorsInfo(playerid, hotel_id)
{
	new fmt_str[8 + 1];
	new string[(sizeof fmt_str - 1) * MAX_HOTEL_FLOORS];

	new max_floors = g_hotel_rooms_loaded[hotel_id] / 12;
	for(new idx; idx < max_floors; idx ++)
	{
		format(fmt_str, sizeof fmt_str, "%d ????\n", idx + 1);
		strcat(string, fmt_str);
	}
	Dialog(playerid, DIALOG_HOTEL_FLOOR_SELECT, DIALOG_STYLE_LIST, "{FFCD00}???????? ????", string, "???????", "??????");
}

stock ShowPlayerHotelFloorsLift(playerid, hotel_id, floor_id)
{
	new fmt_str[8 + 1];
	new string[(sizeof fmt_str - 1) * MAX_HOTEL_FLOORS];

	new max_floors = g_hotel_rooms_loaded[hotel_id] / 12;
	for(new idx, count; idx <= max_floors; idx ++)
	{
		if(idx == floor_id) continue;
		if(idx)
		{
			format(fmt_str, sizeof fmt_str, "%d ????\n", idx);
			strcat(string, fmt_str);
		}
		else strcat(string, "?????\n");

		SetPlayerListitemValue(playerid, count ++, idx);
	}
	Dialog(playerid, DIALOG_HOTEL_FLOOR_LIFT, DIALOG_STYLE_LIST, "{FFCD00}???????? ????", string, "???????", "??????");
}

stock ShowPlayerHotelFloorInfo(playerid, hotel_id, floor_id)
{
	if(0 <= hotel_id <= MAX_HOTELS-1)
	{
		if(0 <= floor_id <= MAX_HOTEL_FLOORS-1)
		{
			new string[512];
			new fmt_str[45 + 1];

			new rent_time;
			new time = gettime();

			new s_idx = floor_id * 12;
			new e_idx = s_idx + 12;

			string = "?????\t\t??????\t\t?????????? ???\t?????ù???\n\n{FFFFFF}";
			while(s_idx < e_idx)
			{
				if(IsHotelRoomOwned(hotel_id, s_idx))
				{
					rent_time = GetElapsedTime(GetHotelData(hotel_id, s_idx, H_RENT_DATE), time, CONVERT_TIME_TO_DAYS);
					if(rent_time < 0)
						rent_time = 0;

					format(fmt_str, sizeof fmt_str, "%d\t\t%s\t\t%d\t\t%s\n", (s_idx % 12) + 1, rent_time > 0 ? ("???ù?\t") : ("?????????"), rent_time, GetHotelData(hotel_id, s_idx, H_OWNER_NAME));
				}
				else format(fmt_str, sizeof fmt_str, "%d\t\t????????\n", (s_idx % 12) + 1);
				strcat(string, fmt_str);

				s_idx ++;
			}

			format(fmt_str, sizeof fmt_str, "{66CC99}?????? ??????? ?? %d ?????", floor_id + 1);
			Dialog(playerid, DIALOG_HOTEL_FLOOR_INFO, DIALOG_STYLE_MSGBOX, fmt_str, string, "?????", "???????");
		}
	}
}

stock ShowPlayerHotelDialog(playerid)
{
	if(GetPlayerInHotelID(playerid) != -1)
	{
		new businessid = GetPlayerInBiz(playerid);

		Dialog
		(
			playerid, DIALOG_HOTEL, DIALOG_STYLE_LIST,
			GetBusinessData(businessid, B_NAME),
			"1. ?????? ???????\n"\
			"2. ??????????ù\n"\
			"3. ???? ???????",
			"???????", "???????"
		);
	}
}

stock GetPlayerInHotelID(playerid)
{
	new hotel_id = -1;
	new businessid = GetPlayerInBiz(playerid);

	if(businessid != -1)
	{
		if(GetBusinessData(businessid, B_TYPE) == BUSINESS_TYPE_HOTEL)
		{
			switch(businessid)
			{
				case 30:
					hotel_id = 0;

				case 31:
					hotel_id = 1;

				case 32:
					hotel_id = 2;

				default:
					hotel_id = -1;
			}
		}
	}
	return hotel_id;
}

stock EntranceStatusInitAll()
{
	for(new idx; idx < g_entrance_loaded; idx ++)
	{
		CallLocalFunction("EntranceStatusInit", "i", idx);
	}
}

stock UpdateEntrance(entranceid, houses)
{
	new status = (houses >= GetEntranceData(entranceid, E_FLOORS) * 4);

	if(GetEntranceData(entranceid, E_STATUS) != status)
	{
		if(GetEntranceData(entranceid, E_PICKUP_ID))
			DestroyPickup(GetEntranceData(entranceid, E_PICKUP_ID));

		if(IsValidDynamicMapIcon(GetEntranceData(entranceid, E_MAP_ICON)))
			DestroyDynamicMapIcon(GetEntranceData(entranceid, E_MAP_ICON));

		SetEntranceData(entranceid, E_PICKUP_ID, CreatePickup((status ? 1272 : 1273), 23, GetEntranceData(entranceid, E_POS_X), GetEntranceData(entranceid, E_POS_Y), GetEntranceData(entranceid, E_POS_Z), 0, PICKUP_ACTION_TYPE_ENTRANCE_ENT, entranceid));
		SetEntranceData(entranceid, E_MAP_ICON, CreateDynamicMapIcon(GetEntranceData(entranceid, E_POS_X), GetEntranceData(entranceid, E_POS_Y), GetEntranceData(entranceid, E_POS_Z), (status ? 40 : 40), 0, 0, 0, -1, STREAMER_MAP_ICON_SD, MAPICON_LOCAL));

		SetEntranceData(entranceid, E_STATUS, status);
	}
}

stock ShowPlayerEntranceFloorsLift(playerid, entranceid, floor)
{
	new fmt_str[10];
	new string[(sizeof fmt_str) * MAX_ENTRANCE_FLOORS];

	new max_floors = GetEntranceData(entranceid, E_FLOORS) + 1;

	for(new idx, count; idx < max_floors; idx ++)
	{
		if(idx == floor) continue;
		if(idx)
		{
			format(fmt_str, sizeof fmt_str, "%d ????\n", idx);
			strcat(string, fmt_str);
		}
		else strcat(string, "???????\n");

		SetPlayerListitemValue(playerid, count ++, idx);
	}
	Dialog(playerid, DIALOG_ENTRANCE_LIFT, DIALOG_STYLE_LIST, "{FFCD00}???????? ????", string, "???????", "??????");
}

stock EnterPlayerToEntrance(playerid, entranceid)
{
	if(GetPlayerInEntrance(playerid) == -1)
	{
		SetPlayerPosEx(playerid, 558.4705, 24.8017, 1049.2731, 357.8067, 1, entranceid + 2500);

		SendClientMessage(playerid, -1, "?ù? ?? ????ù? ????ù???, ??????? ?????????ù? ???ù, ? ??????ù? ?ù??!");

		SetPlayerInEntranceFloor(playerid, 0);
		SetPlayerInEntrance(playerid, entranceid);
	}
}

stock SetPlayerFactoryDeskUse(playerid, deskid, bool: status)
{
	if(!(0 <= deskid <= sizeof factory_desk-1)) return ;

	if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY)
	{
		if(status)
		{
			if(!factory_desk[deskid][FD_USED] && GetPlayerData(playerid, P_FACTORY_USE_DESK) == -1)
			{
				if(GetPlayerTempJobState(playerid) == TEMP_JOB_STATE_FACTORY_CREATE_P)
				{
					factory_desk[deskid][FD_USED] = true;

					// static const
					//	p_object_id[3] = {1954, 2926, 1718};

					// static const
					//	Float: p_object_z[3] = {0.09, 0.0, 0.06};

					// new rand = random(sizeof(p_object_id));
					// new Float: x, Float: y, Float: z;
					// GetPlayerPos(playerid, x, y, z);

					new Float: angle;

					new take_metall = GetPVarInt(playerid, "factory_take_metall");
					new factory_fuel = GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL, R_AMOUNT);

					SetPlayerData(playerid, P_FACTORY_USE_DESK, deskid);
					TogglePlayerFactoryCP(playerid, false);

					if(!((deskid / 4) % 2))
					{
						angle = 180.0;
					}
					else angle = 0.0;
					SetPlayerFacingAngle(playerid, angle);

					//factory_object[playerid] = CreateDynamicObject(p_object_id[rand], x, y, 1044.08 + p_object_z[rand], 0.0, 0.0, angle + 180.0);
					ApplyAnimationEx(playerid, "OTB", "betslp_loop", 4.1, 1, 0, 0, 1, 20_000, 0, USE_ANIM_TYPE_NONE - 1);

				//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 18644, A_OBJECT_BONE_RIGHT_HAND, 0.06, 0.02, 0.0, 30.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0);
				//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND + 1, 18635, A_OBJECT_BONE_LEFT_HAND, 0.1, 0.06, -0.1, 180.0, 80.0, 0.0, 1.0, 1.0, 1.0, 0);

					SetPlayerTempJobState(playerid, TEMP_JOB_STATE_FACTORY_CREATED);
					SetTimerEx("CreateFactoryProd", 18_000, false, "i", playerid);

					SetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL, R_AMOUNT, factory_fuel - (take_metall * 6));
					UpdateRepository(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL);
				}
				else
				{
					if(GetPlayerTempJobState(playerid) != TEMP_JOB_STATE_FACTORY_PUT_PROD)
						SendClientMessage(playerid, 0x999999FF, "???????? ????????? ? ???????????? ?????");
				}
			}
		}
		else
		{
			if(factory_desk[deskid][FD_USED])
			{
				if(GetPlayerData(playerid, P_FACTORY_USE_DESK) == deskid)
				{
					TogglePlayerFactoryCP(playerid, true);
					SetPlayerData(playerid, P_FACTORY_USE_DESK, -1);

					factory_desk[deskid][FD_USED] = false;
				}
			}
		}
		UpdateFactoryDesk(deskid);
	}
}

stock AddBan(user_id, time, days, ip[], description[], admin_name[])
{
	new query[200];
	new c_time = time-(time % 86400);

	mysql_format(mysql, query, sizeof query, "INSERT INTO ban_list (user_id,time,ban_time,ip,description,admin) VALUES (%d,%d,%d,'%e','%e','%e')", user_id, c_time, c_time + (days * 86400), ip, description, admin_name);
	mysql_query(mysql, query, false);

	return !mysql_errno();
}

stock GivePlayerDrinkItem(playerid, itemid)
{
	new action_id = -1;
	switch(itemid+1)
	{
		case 1: // ???????
		{
			action_id = 23;
		}
		case 2, 6..7: // ????, ????ù?, ?????
		{
			action_id = 20;
		}
		case 3..5, 8: // ????, ??????????, ?????, ??????
		{
			action_id = 22;
		}
		case 9: // ???????
		{
			if(GetPlayerData(playerid, P_DRINK_STEP))
			{
				SetPlayerData(playerid, P_DRINK_STEP, 0);
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
			}

		//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 10213, A_OBJECT_BONE_RIGHT_HAND, 0.08, 0.05, 0.06, 180.0, 270.0, -30.0, 1.0, 1.0, 1.0, 0, 0);
			SetPlayerData(playerid, P_SNACK, true);
		}
		case 10: // ??????
		{
			action_id = 21;
		}
	}
	if(action_id != -1)
	{
		if(GetPlayerData(playerid, P_SNACK))
		{
			SetPlayerData(playerid, P_SNACK, false);
		//	T_RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);
		}

		SetPlayerData(playerid, P_DRINK_STEP, 7);
		SetPlayerSpecialAction(playerid, action_id);
	}
	return 1;
}

stock FactoryPlayerDrop(playerid, bool: reject = true)
{
	if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY)
	{
		if(reject)
		{
			if(GetPlayerTempJobState(playerid) != TEMP_JOB_STATE_FACTORY_CREATED) return ;

			SetPlayerChatBubble(playerid, "????", 0xFF0000FF, 10.0, 1500);
			ApplyAnimationEx(playerid, "OTB", "WTCHRACE_LOSE", 4.1, 0, 0, 0, 0, 0, 0, USE_ANIM_TYPE_NONE);
		}
		else
		{
			if(GetPlayerTempJobState(playerid) != TEMP_JOB_STATE_FACTORY_DROP_P) return ;
			SetPlayerTempJobCheckAnim(playerid, false);

			//RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_FOREARM);
			SetPlayerFactoryDeskUse(playerid, GetPlayerData(playerid, P_FACTORY_USE_DESK), false);

			ApplyAnimationEx(playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 1, 0, USE_ANIM_TYPE_NONE);
			SendClientMessage(playerid, 0xFF6600FF, "?? ??????? ???????");
		}

		new bad_prods = GetPVarInt(playerid, "factory_bad_prods") + 1;
		SetPVarInt(playerid, "factory_bad_prods", bad_prods);

		GameTextForPlayer(playerid, "~r~~h~fail", 4000, 1);
		SetPlayerTempJobState(playerid, TEMP_JOB_STATE_FACTORY_TAKE_MET);
	}
}

stock ShowPlayerClothingShopPanel(playerid)
{
	new businessid = GetPlayerInBiz(playerid);
	new select_skin;
    
	if(GetPlayerTeamEx(playerid) <= 0)
	{
	
	    if(Shopclothing[playerid] == 1)
	{
		select_skin = GetPlayerSelectSkin(playerid);
	}
	
	if(Shopclothing[playerid] == 0)
	{
		select_skin = 1;
		Shopclothing[playerid] = 1;
	}
	
		if(select_skin == -1)
		{
			new type = GetBusinessData(businessid, B_INTERIOR);
			new interior = GetBusinessInteriorInfo(type, BT_ENTER_INTERIOR);
			new
				Float: cam_x, Float: cam_y, Float: cam_z,
				Float: v_cam_x, Float: v_cam_y, Float: v_cam_z;

			GetPlayerCameraPos(playerid, cam_x, cam_y, cam_z);
			GetPlayerCameraFrontVector(playerid, v_cam_x, v_cam_y, v_cam_z);

			SetPlayerPosEx(playerid, 1200.399902, 607.876281, 1349.309448, 184.824386, playerid, _, false);
			
			SetPlayerCameraPos(playerid, 1201.510253, 604.738281, 1350.530395);
			SetPlayerCameraLookAt(playerid, 1193.910253, 630.0, 1342.530395);
			
			CreateCLTHButtonBR(playerid);
			
			SetPlayerSelectClothingSkin(playerid, 0);
			
			CallLocalFunction("BuySkinPTDUpdate", "i", playerid);
			
			SelectTextDraw(playerid, 0xFF5252FF);
			for(new i;i < sizeof clothingbuttons_TD;i++) TextDrawShowForPlayer(playerid, clothingbuttons_TD[i]);
  		  PlayerTextDrawShow(playerid, clothingbuttons_PTD[playerid][0]);
			
			TogglePlayerControllable(playerid, false);

		}
	}
	else SendClientMessage(playerid, 0xCECECEFF, "?? ???????? ? ???????????, ?????? ????? ????????? ?????ù");
}

stock ExitPlayerClothingShopPanel(playerid)
{
	new in_biz = GetPlayerInBiz(playerid);
	if(in_biz != -1)
	{
		HidePlayerSelectPanel(playerid);

		SetPlayerSkinInit(playerid);
		SetCameraBehindPlayer(playerid);
		TogglePlayerControllable(playerid, true);

		//SetPlayerData(playerid, P_USE_SELECT_PANEL, SELECT_PANEL_TYPE_NONE);

		PlayerTextDrawSetString(playerid, price_select_TD[playerid][0], "exit...");
		SetTimerEx("HidePlayerSelectPanelPriceTimer", 1000, false, "i", playerid);

		SetPlayerData(playerid, P_SELECT_SKIN, -1);
		
		for(new i;i < sizeof clothingbuttons_TD;i++) TextDrawHideForPlayer(playerid, clothingbuttons_TD[i]);
        PlayerTextDrawHide(playerid, clothingbuttons_PTD[playerid][0]);

		SetPlayerPosEx
		(
			playerid,
			GetBusinessData(in_biz, B_EXIT_POS_X),
			GetBusinessData(in_biz, B_EXIT_POS_Y),
			GetBusinessData(in_biz, B_EXIT_POS_Z),
			GetBusinessData(in_biz, B_EXIT_ANGLE),
			0,
			0
		);
		SetPlayerInBiz(playerid, -1);

	}
}

public: BuySkinPTDUpdate(playerid)
{
    new select_skin = GetPlayerSelectSkin(playerid);
    
	new price = g_business_clothing_skins[GetPlayerSex(playerid)][select_skin][1];

	new fmt_str[50];
	
	PlayerTextDrawHide(playerid, clothingbuttons_PTD[playerid][0]);
	
	PlayerTextDrawShow(playerid, clothingbuttons_PTD[playerid][0]);

    format(fmt_str, sizeof fmt_str, "%d ???", price);
	PlayerTextDrawSetString(playerid, clothingbuttons_PTD[playerid][0], fmt_str);
	
	return 1;
}

stock HidePlayerSelectPanelPrice(playerid)
{
	for(new idx; idx < sizeof price_select_TD[]; idx ++)
	{
		if(price_select_TD[playerid][idx] != PlayerText: -1)
		{
			PlayerTextDrawHide(playerid, price_select_TD[playerid][idx]);
			PlayerTextDrawDestroy(playerid, price_select_TD[playerid][idx]);

			price_select_TD[playerid][idx] = PlayerText: -1;
		}
	}
}

stock SetPlayerSelectClothingSkin(playerid, index = 0)
{
	new sex = GetPlayerSex(playerid);

	SetPlayerSelectSkin(playerid, index, g_business_clothing_skins[sex][index][0]);
}

stock GetOwnableCarBySqlID(sql_id, buffer[] = {0, 0, 0})
{
	buffer[2] = INVALID_VEHICLE_ID;
	for(buffer[0] = 1; buffer[0] < MAX_VEHICLES; buffer[0] ++)
	{
		if(!IsAOwnableCar(buffer[0])) continue;
		buffer[1] = GetVehicleData(buffer[0], V_ACTION_ID);

		if(GetOwnableCarData(buffer[1], OC_SQL_ID) != sql_id) continue;

		buffer[2] = buffer[0];
		break;
	}
	return buffer[2];
}

stock GetPlayerIDBySqlID(sql_id)
{
	new playerid = INVALID_PLAYER_ID;

	foreach(new idx : Player)
	{
		if(!IsPlayerLogged(idx)) continue;
		if(GetPlayerAccountID(idx) != sql_id) continue;

		playerid = idx;
		break;
	}
	return playerid;
}

stock GetPlayerID(name[], playerid=INVALID_PLAYER_ID)
{
	sscanf(name, "u", playerid);

	return playerid;
}

stock GetPlayerSqlIDByName(name[])
{
	new sql_id,
		query[80],
		Cache: result;

	mysql_format(mysql, query, sizeof query, "SELECT id FROM `accounts` WHERE name = '%s' LIMIT 1", name);
	result = mysql_query(mysql, query, true);

	sql_id = cache_num_rows() ? cache_get_row_int(0, 0) : -1;

	cache_delete(result);

	return sql_id;
}

stock GetPlayerNameBySqlID(sql_id)
{
	new name[21] = "none",
		query[80],
		Cache: result;

	mysql_format(mysql, query, sizeof query, "SELECT name FROM `accounts` WHERE id = '%e' LIMIT 1", sql_id);
	result = mysql_query(mysql, query, true);

	if(cache_num_rows())
		cache_get_row(0, 0, name);

	cache_delete(result);

	return name;
}

stock UpdateHouse(houseid)
{
	if(GetHouseData(houseid, H_ENTRACE) == -1)
	{
		if(GetHouseData(houseid, H_ENTER_PICKUP))
			DestroyPickup(GetHouseData(houseid, H_ENTER_PICKUP));

		if(IsValidDynamicMapIcon(GetHouseData(houseid, H_MAP_ICON)))
			DestroyDynamicMapIcon(GetHouseData(houseid, H_MAP_ICON));

		SetHouseData(houseid, H_ENTER_PICKUP, CreatePickup((IsHouseOwned(houseid) ? 1272 : 1273), 23, GetHouseData(houseid, H_POS_X), GetHouseData(houseid, H_POS_Y), GetHouseData(houseid, H_POS_Z), 0, PICKUP_ACTION_TYPE_HOUSE, houseid));
		SetHouseData(houseid, H_MAP_ICON, CreateDynamicMapIcon(GetHouseData(houseid, H_POS_X), GetHouseData(houseid, H_POS_Y), GetHouseData(houseid, H_POS_Z), (IsHouseOwned(houseid) ? 32 : 31), 0, 0, 0, -1, STREAMER_MAP_ICON_SD, MAPICON_LOCAL));
	}
}

stock HouseHealthInit(houseid, type = -1)
{
	if(GetHouseData(houseid, H_IMPROVEMENTS) >= 2)
	{
		if(!GetHouseData(houseid, H_HEALTH_PICKUP))
		{
			type = GetHouseData(houseid, H_TYPE);
			SetHouseData(houseid, H_HEALTH_PICKUP, CreatePickup(1240, 23, GetHouseTypeInfo(type, HT_HEALTH_POS_X), GetHouseTypeInfo(type, HT_HEALTH_POS_Y), GetHouseTypeInfo(type, HT_HEALTH_POS_Z), houseid + 2000, PICKUP_ACTION_TYPE_HOUSE_HEALTH, houseid));
		}
	}
	else
	{
		if(GetHouseData(houseid, H_HEALTH_PICKUP))
		{
			DestroyPickup(GetHouseData(houseid, H_HEALTH_PICKUP));
			SetHouseData(houseid, H_HEALTH_PICKUP, 0);
		}
	}
}

stock HouseStoreInit(houseid, type = -1)
{
	if(GetHouseData(houseid, H_IMPROVEMENTS) >= 5)
	{
		if(GetHouseData(houseid, H_STORE_LABEL) == Text3D:-1)
		{
			if(GetHouseData(houseid, H_STORE_X) == 0.0 && GetHouseData(houseid, H_STORE_Y) == 0.0 && GetHouseData(houseid, H_STORE_Z) == 0.0)
			{
				type = GetHouseData(houseid, H_TYPE);

				SetHouseData(houseid, H_STORE_X, GetHouseTypeInfo(type, HT_STORE_POS_X));
				SetHouseData(houseid, H_STORE_Y, GetHouseTypeInfo(type, HT_STORE_POS_Y));
				SetHouseData(houseid, H_STORE_Z, GetHouseTypeInfo(type, HT_STORE_POS_Z));
			}
			SetHouseData(houseid, H_STORE_LABEL, CreateDynamic3DTextLabel("????", 0xFFFF00FF, GetHouseData(houseid, H_STORE_X), GetHouseData(houseid, H_STORE_Y), GetHouseData(houseid, H_STORE_Z) + 0.5, 6.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, houseid + 2000, -1, -1, 50.0));

			CallLocalFunction("UpdateHouseStore", "i", houseid);
		}
	}
	else
	{
		if(GetHouseData(houseid, H_STORE_LABEL) != Text3D:-1)
		{
			if(IsValidDynamic3DTextLabel(GetHouseData(houseid, H_STORE_LABEL)))
			{
				DestroyDynamic3DTextLabel(GetHouseData(houseid, H_STORE_LABEL));
				SetHouseData(houseid, H_STORE_LABEL, Text3D:-1);
			}
		}
	}
}

stock SellHouse(playerid, to_player = INVALID_PLAYER_ID, price = 0)
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
	if(houseid != -1)
	{
		new house_price = GetHouseData(houseid, H_PRICE);
		new house_percent = (house_price * 30) / 100;
		new house_improvemnts_price = HouseImprovementsPrice(houseid);

		if(house_improvemnts_price)
			house_improvemnts_price = (house_improvemnts_price * 60) / 100;

		new query[200];
		new return_money = (house_price - house_percent) + house_improvemnts_price;

		CallLocalFunction("EvictHouseRentersAll", "i", houseid);

		SetPlayerData(playerid, P_HOUSE, -1);
		SetPlayerData(playerid, P_HOUSE_TYPE, HOUSE_TYPE_NONE);

		SetHouseData(houseid, H_OWNER_ID, 0);

		if(to_player == INVALID_PLAYER_ID)
		{
			AddPlayerData(playerid, P_BANK, +, return_money);

			BankLog(playerid, return_money, "??????? ????");

			SetHouseData(houseid, H_IMPROVEMENTS,	0);

			SetHouseData(houseid, H_RENT_DATE,		0);
			SetHouseData(houseid, H_LOCK_STATUS,	false);

			format(query, sizeof query, "UPDATE accounts a,houses h SET a.bank=%d,a.house_type=-1,a.house=-1,h.owner_id=0,h.lock=0 WHERE a.id=%d AND h.id=%d", GetPlayerData(playerid, P_BANK), GetPlayerAccountID(playerid), GetHouseData(houseid, H_SQL_ID));
			mysql_query(mysql, query, false);

			UpdateHouse(houseid);

			HouseHealthInit(houseid);
			HouseStoreInit(houseid);

			GivePlayerMoneyEx(playerid, 0, "??????? ???? ???????????", false, false);

			format(query, sizeof query, "????? ?? ??????? ???? ???????? 30 ????????? ?? ??? ????????? {99CC00}(%d ???)", house_percent);
			SendClientMessage(playerid, 0xCECECEFF, query);

			format(query, sizeof query, "??? ???? ?????????? 60 ????????? ?? ????????? ????????? ?????????: {CCFF00}%d ???", house_improvemnts_price);
			SendClientMessage(playerid, 0xCECECEFF, query);
			
			format(query, sizeof query, "??? ???? ?????????? 60 ????????? ?? ????????? ????????? ????????? ???????: {CCFF00}%d ???", house_improvemnts_price);
			SendClientMessage(playerid, 0xCECECEFF, query);

			format(query, sizeof query, "????? ?? ?????????? ???? ???????????: {3399FF}%d ???", return_money);
			SendClientMessage(playerid, 0xFFFFFFFF, query);

			new entranceid = GetHouseData(houseid, H_ENTRACE);
			if(entranceid != -1)
			{
				CallLocalFunction("EntranceStatusInit", "i", entranceid);
			}
		}
		else
		{
			if(BuyPlayerHouse(to_player, houseid, true, price) == 1)
			{
				new total_price = price + house_improvemnts_price;

				format(query, sizeof query, "??? ???? ?????????? 60 ????????? ?? ????????? ????????? ?????????: {CCFF00}%d ???", house_improvemnts_price);
				SendClientMessage(playerid, 0xCECECEFF, query);

				format(query, sizeof query, "UPDATE accounts SET money=%d,house=-1 WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)+total_price, GetPlayerAccountID(playerid));
				mysql_query(mysql, query, false);

				GivePlayerMoneyEx(playerid, total_price, "??????? ???? ??????", false, false);

				house_price = price;
				house_percent = 0;
			}
			else return ;
		}
		format(query, sizeof query, "~g~+%d rub~n~+%d rub", (house_price - house_percent), house_improvemnts_price);
		GameTextForPlayer(playerid, query, 4000, 1);
	}
}

stock BuyPlayerHouse(playerid, houseid, bool: buy_from_owner = false, price = -1)
{
	if(!IsHouseOwned(houseid) && GetPlayerHouse(playerid) == -1)
	{
		if(price <= 0)
			price = GetHouseData(houseid, H_PRICE);

		if(GetPlayerMoneyEx(playerid) >= price)
		{
			new query[256];

			format(query, sizeof query, "UPDATE accounts a, houses h SET a.money=%d,a.house_type=%d,a.house=%d,h.owner_id=%d WHERE a.id=%d AND h.id=%d", GetPlayerMoneyEx(playerid)-price, HOUSE_TYPE_HOME, houseid, GetPlayerAccountID(playerid), GetPlayerAccountID(playerid), GetHouseData(houseid, H_SQL_ID));
			mysql_query(mysql, query, false);
			printf("sql %s", query);

			if(!mysql_errno())
			{
				SetPlayerData(playerid, P_HOUSE, 		houseid);
				SetPlayerData(playerid, P_HOUSE_TYPE, 	HOUSE_TYPE_HOME);

				SetHouseData(houseid, H_OWNER_ID, GetPlayerAccountID(playerid));
				SetHouseData(houseid, H_IMPROVEMENTS, 	0);

				SetHouseData(houseid, H_STORE_X, 0.0);
				SetHouseData(houseid, H_STORE_Y, 0.0);
				SetHouseData(houseid, H_STORE_Z, 0.0);

				new time = gettime();
				new rent_time = (time - (time % 86400)) + 86400;

				if(!buy_from_owner)
				{
					SetHouseData(houseid,	H_RENT_DATE,	rent_time);
					SetHouseData(houseid,	H_LOCK_STATUS,	false);

					new entranceid = GetHouseData(houseid, H_ENTRACE);
					if(entranceid != -1)
					{
						CallLocalFunction("EntranceStatusInit", "i", entranceid);
					}
				}
				else
				{
					if(GetElapsedTime(GetHouseData(houseid, H_RENT_DATE), time, CONVERT_TIME_TO_DAYS) <= 0)
					{
						SetHouseData(houseid, H_RENT_DATE, rent_time);
					}
				}
				format(g_house[houseid][H_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);

				UpdateHouse(houseid);

				HouseHealthInit(houseid);
				HouseStoreInit(houseid);

				GivePlayerMoneyEx(playerid, -price, "??????? ????", false, true);
				SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}????????ù?? ? ???????? ????????????? ?????? ???? / ????????.");

				format(query, sizeof query, "UPDATE houses SET improvements=0,rent_time=%d,`lock`=%d,store_x=0.0,store_y=0.0,store_z=0.0 WHERE id=%d LIMIT 1", GetHouseData(houseid, H_RENT_DATE), GetHouseData(houseid, H_LOCK_STATUS), GetHouseData(houseid, H_SQL_ID));
				mysql_query(mysql, query, false);

				return 1;
			}
			else SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 34)");

			return 0;
		}
		return 0;
	}
	return -1;
}

stock EnterPlayerToHouse(playerid, houseid)
{
	if(GetPlayerInHouse(playerid) == -1)
	{
		new type = GetHouseData(houseid, H_TYPE);

		SetPlayerPosEx
		(
			playerid,
			GetHouseTypeInfo(type, HT_ENTER_POS_X),
			GetHouseTypeInfo(type, HT_ENTER_POS_Y),
			GetHouseTypeInfo(type, HT_ENTER_POS_Z),
			GetHouseTypeInfo(type, HT_ENTER_POS_ANGLE),
			GetHouseTypeInfo(type, HT_INTERIOR),
			houseid + 2000
		);
		SetPlayerInHouse(playerid, houseid);
	}
}

stock ExitPlayerFromHouse(playerid, Float: radius = 3.0, pos = 0)
{
	new houseid = GetPlayerInHouse(playerid);
	if(houseid != -1)
	{
		new type = GetHouseData(houseid, H_TYPE);
		if(IsPlayerInRangeOfPoint(playerid, radius, GetHouseTypeInfo(type, HT_ENTER_POS_X), GetHouseTypeInfo(type, HT_ENTER_POS_Y), GetHouseTypeInfo(type, HT_ENTER_POS_Z)) || IsPlayerInRangeOfPoint(playerid, radius, 1.2011, 1994.7356, 1554.2031))
		{
			switch(pos)
			{
				case 0:
				{
					SetPlayerInHouse(playerid, -1);

					new entranceid = GetHouseData(houseid, H_ENTRACE);
					if(entranceid != -1)
					{
						new floor = GetHouseData(houseid, H_FLAT_ID) / 4 + 1;
						type = GetHouseData(houseid, H_FLAT_ID) % 4;

						SetPlayerInEntrance(playerid, entranceid);
						SetPlayerInEntranceFloor(playerid, floor);

						SetPlayerPosEx
						(
							playerid,
							g_entrance_flat_pos[type][3],
							g_entrance_flat_pos[type][4],
							g_entrance_flat_pos[type][2],
							g_entrance_flat_pos[type][5],
							floor + 1,
							(entranceid * 100) + floor
						);
					}
					else
					{
						SetPlayerPosEx
						(
							playerid,
							GetHouseData(houseid, H_EXIT_POS_X),
							GetHouseData(houseid, H_EXIT_POS_Y),
							GetHouseData(houseid, H_EXIT_POS_Z),
							GetHouseData(houseid, H_EXIT_ANGLE),
							0,
							0
						);
					}
				}
				case 1:
				{
					
					SetPlayerPosEx
					(
						playerid,
						1.2011,
						1994.7356,
						1554.2031,
						353.9531,
						GetHouseTypeInfo(type, HT_INTERIOR),
						houseid + 2000
					);
					
				}
			}
			
			return 1;
		}
	}
	return 0;
}

stock GetPlayerHouse(playerid, type = -1)
{
	new houseid = GetPlayerData(playerid, P_HOUSE);
	if(houseid != -1)
	{
		switch(type)
		{
			case HOUSE_TYPE_HOME:
			{
				if(GetPlayerData(playerid, P_HOUSE_TYPE) == HOUSE_TYPE_HOME)
				{
					if(GetHouseData(houseid, H_OWNER_ID) == GetPlayerAccountID(playerid))
					{
						return houseid;
					}
				}
			}
			case HOUSE_TYPE_ROOM:
			{
				if(GetPlayerData(playerid, P_HOUSE_TYPE) == HOUSE_TYPE_ROOM)
				{
					new room = GetPlayerData(playerid, P_HOUSE_ROOM);
					if(room != -1)
					{
						if(GetHouseRenterInfo(houseid, room, HR_OWNER_ID) == GetPlayerAccountID(playerid))
						{
							return houseid;
						}
					}
				}
			}
			case HOUSE_TYPE_HOTEL:
			{
				if(GetPlayerData(playerid, P_HOUSE_TYPE) == HOUSE_TYPE_HOTEL)
				{
					new room = GetPlayerData(playerid, P_HOUSE_ROOM);
					if(room != -1)
					{
						if(GetHotelData(houseid, room, H_OWNER_ID) == GetPlayerAccountID(playerid))
						{
							return houseid;
						}
					}
				}
			}
			default:
				return houseid;
		}
	}
	return -1;
}

stock HouseImprovementsPrice(houseid)
{
	new price;
	new level = GetHouseData(houseid, H_IMPROVEMENTS);

	if(1 <= level <= sizeof g_house_improvements)
	{
		for(new idx; idx < level; idx ++)
		{
			price += g_house_improvements[idx][I_PRICE];
		}
	}
	return price;
}

stock IsPlayerInRangeOfHouse(playerid, houseid, Float: radius = 10.0)
{
	new result;
	if(GetHouseData(houseid, H_ENTRACE) != -1)
	{
		new flatid = GetHouseData(houseid, H_FLAT_ID) % 4;
		result = IsPlayerInRangeOfPoint(playerid, radius, g_entrance_flat_pos[flatid][0], g_entrance_flat_pos[flatid][1], g_entrance_flat_pos[flatid][2]);
	}
	else result = IsPlayerInRangeOfPoint(playerid, radius, GetHouseData(houseid, H_POS_X), GetHouseData(houseid, H_POS_Y), GetHouseData(houseid, H_POS_Z));

	return result;
}

stock BuyOwnableCarFamily(playerid, marketid, ownablecar)
{
	new color_1 = GetPlayerData(playerid, P_AUTOSALON_COLOR1);
	new color_2 = GetPlayerData(playerid, P_AUTOSALON_COLOR2);
	
    HideAutosalonTextDraws(playerid);
	RemovePlayerFromVehicle(playerid);
    new modelid, query[256], time = gettime();
 	printf("player_cars: %d / player_slots: %d", GetPlayerOwnableCars(playerid), GetPlayerCarSlots(playerid));

	printf("BuyOwnableCar(%d, %d, %d, %d, %d)", playerid, marketid, ownablecar, color_1, color_2);

	if(ownablecar < 1000)
		modelid = car_market_data[marketid][ownablecar][0];
	else
		modelid = ownablecar - 1000;

	
	if(GetPlayerData(playerid, P_FAMILY_RANK) != 10)
			return SendClientMessage(playerid, 0x999999FF, "?? ?? ????? ?????");
	
	if(GetFamilyData(fam, F_FAMILY_CARS) >= 5) return Send(playerid, -1, "? ????? ????? ??? ?????? ??ù ??????????");
	
	if(GetPlayerMoneyEx(playerid) < GetVehicleInfo(modelid - 400, VI_PRICE))
	{
		SendClientMessage(playerid, 0xCECECEFF, "???????????? ????? ??ù ??????? ????? ??????????");
		return -1;
	}

	GivePlayerMoneyEx(playerid, -GetVehicleInfo(modelid - 400, VI_PRICE), "??????? ù? ? ??????????", true, true);


	new biz_id = marketid + 34,
	take_prods = random(5) + 6;

	if(GetBusinessData(biz_id, B_PRODS) >= take_prods)
	{
		AddBusinessData(biz_id, B_PRODS, -, take_prods);
		AddBusinessData(biz_id, B_BALANCE, +, (GetVehicleInfo(modelid - 400, VI_PRICE) * 20 / 100));
		//AddBusinessData(biz_id, B_BALANCE_DAY, +, (GetVehicleInfo(modelid - 400, VI_PRICE) * 20 / 100));

		format(query, sizeof query, "UPDATE business SET balance=%d WHERE id=%d LIMIT 1", GetBusinessData(biz_id, B_BALANCE), GetBusinessData(biz_id, B_SQL_ID));
		mysql_query(mysql, query, false);


		mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(biz_id, B_SQL_ID), GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), time, (GetVehicleInfo(modelid - 400, VI_PRICE) * 20 / 100), IsBusinessOwned(biz_id));
		mysql_query(mysql, query, false);
	}

  	//TransferCoffersMoney((GetVehicleInfo(modelid - 400, VI_PRICE)), "??????? ????", "", false);

	new buy_cars_count = cars_after_purchase_count[marketid]++;

	new fam_id = GetPlayerData(playerid, P_FAMILY);

	new vehicleid = GetPlayerVehicleID(playerid);

	if(buy_cars_count >= 3)
		cars_after_purchase_count[marketid] = 0;

	new Float: pos_x = cars_pos_after_purchase[marketid][buy_cars_count][0];
	new Float: pos_y = cars_pos_after_purchase[marketid][buy_cars_count][1];
	new Float: pos_z = cars_pos_after_purchase[marketid][buy_cars_count][2];
	new Float: angle = cars_pos_after_purchase[marketid][buy_cars_count][3];

	new Cache: result,
		idx;

	idx = GetFreeFamilyCarID();

    SetFamilyCarData(idx, F_OWNER_ID,     GetPlayerAccountID(playerid));

    SetFamilyCarData(idx, F_MODEL_ID,     modelid);
    SetFamilyCarData(idx, F_COLOR_1,      color_1);
    SetFamilyCarData(idx, F_COLOR_2,      color_2);

    SetFamilyCarData(idx, F_POS_X,        pos_x);
    SetFamilyCarData(idx, F_POS_Y,        pos_y);
    SetFamilyCarData(idx, F_POS_Z,        pos_z);
    SetFamilyCarData(idx, F_ANGLE,        angle);

    SetOwnableCarData(idx, OC_KEY_IN,       false);

    SetOwnableCarData(idx, OC_CREATE,       gettime());

    // ----------------------------------------------------------------------------------------

    g_family_car[idx][F_CAR_ID] = CreateVehicle
    (
        GetFamilyCarData(idx, F_MODEL_ID),
        GetFamilyCarData(idx, F_POS_X),
        GetFamilyCarData(idx, F_POS_Y),
        GetFamilyCarData(idx, F_POS_Z),
        GetFamilyCarData(idx, F_ANGLE),
        GetFamilyCarData(idx, F_COLOR_1),
        GetFamilyCarData(idx, F_COLOR_2),
        -1,
        0,
        VEHICLE_ACTION_TYPE_FAMILY_CAR,
        idx
    );
    if(GetFamilyCarData(idx, F_CAR_ID) != INVALID_VEHICLE_ID)
    {
        CreateVehicleLabel(GetFamilyCarData(idx, F_CAR_ID), GetFamilyData(fam_id, F_NAME), 0x6666CCEE, 0.0, 0.0, 1.3, 20.0);
        SetVehicleParam(GetFamilyCarData(idx, F_CAR_ID), V_LOCK, false);

        SetVehicleData(GetFamilyCarData(idx, F_CAR_ID), V_MILEAGE, 0.0);
        SetVehicleData(GetFamilyCarData(idx, F_CAR_ID), V_FUEL, 50.0);
    }
    format
    (
        query, sizeof query,
        "INSERT INTO family_cars \
        (owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
        VALUES \
        ('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
        fam_id,
        GetFamilyCarData(idx, F_MODEL_ID),
        GetFamilyCarData(idx, F_COLOR_1),
        GetFamilyCarData(idx, F_COLOR_2),
        GetFamilyCarData(idx, F_POS_X),
        GetFamilyCarData(idx, F_POS_Y),
        GetFamilyCarData(idx, F_POS_Z),
        GetFamilyCarData(idx, F_ANGLE),
        gettime()
    );

    result = mysql_query(mysql, query, true);
    printf("%s",query);

    SetFamilyCarData(idx, F_SQL_ID, cache_insert_id());
    cache_delete(result);

	SaveFamilyCar(vehicleid);
	
	fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
	new fmt_text[120];
	
	AddFamilyData(fam_id,F_FAMILY_CARS,+,1);
	
	mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE family SET family_cars='%d' WHERE id='%d' LIMIT 1", GetFamilyData(fam_id, F_FAMILY_CARS), fam_id);
 	mysql_query(mysql, fmt_text, false);

	SendClientMessage(playerid, 0x32a44bFF, "????????ù?? ? ???????? ?????? ?????????? ? ?????!");
    SendClientMessage(playerid, 0x1E90FFFF, "????????? ?? ????????? ????? ????????? ? ??????? ?????????? ?????");

    return 1;
}

stock BuyOwnableCar(playerid, marketid, ownablecar)
{
    new color_1 = GetPlayerData(playerid, P_AUTOSALON_COLOR1);
	new color_2 = GetPlayerData(playerid, P_AUTOSALON_COLOR2);
	
    HideAutosalonTextDraws(playerid);
	printf("player_cars: %d / player_slots: %d", GetPlayerOwnableCars(playerid), GetPlayerCarSlots(playerid));

	printf("BuyOwnableCar(%d, %d, %d, %d, %d)", playerid, marketid, ownablecar, color_1, color_2);

	ExitPlayerBuyCarMarket(playerid);

	if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
	{
		SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
		return -1;
	}
	
	if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
	{
		SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
		return -1;
	}
	
	new modelid;

	if(ownablecar < 1000)
		modelid = car_market_data[marketid][ownablecar][0];
	else
		modelid = ownablecar - 1000;

	printf("modelid = %d | ownablecar = %d", modelid, ownablecar);

	if(GetPlayerMoneyEx(playerid) < GetVehicleInfo(modelid - 400, VI_PRICE))
	{
		SendClientMessage(playerid, 0x999999FF, "???????????? ????? ??ù ??????? ????? ??????????");
		return -1;
	}

	GivePlayerMoneyEx(playerid, -GetVehicleInfo(modelid - 400, VI_PRICE), "??????? ù? ? ??????????", true, true);

	new biz_id = marketid + 34,
		take_prods = random(5) + 6;

	if(GetBusinessData(biz_id, B_PRODS) >= take_prods)
	{
		AddBusinessData(biz_id, B_PRODS, -, take_prods);
		AddBusinessData(biz_id, B_BALANCE, +, (GetVehicleInfo(modelid - 400, VI_PRICE) * 20 / 100));
	}

	new buy_cars_count = cars_after_purchase_count[marketid]++;

	if(buy_cars_count >= 4)
		cars_after_purchase_count[marketid] = 0;

	new Float: pos_x = cars_pos_after_purchase[marketid][buy_cars_count][0];
	new Float: pos_y = cars_pos_after_purchase[marketid][buy_cars_count][1];
	new Float: pos_z = cars_pos_after_purchase[marketid][buy_cars_count][2];
	new Float: angle = cars_pos_after_purchase[marketid][buy_cars_count][3];

	new query[220],
		Cache: result,
		idx;

	idx = GetFreeOwnableCarID();

	SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

	SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
	SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
	SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

	SetOwnableCarData(idx, OC_POS_X, 		pos_x);
	SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
	SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
	SetOwnableCarData(idx, OC_ANGLE, 		angle);

	strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

	SetOwnableCarData(idx, OC_ALARM, 		false);
	SetOwnableCarData(idx, OC_KEY_IN, 		false);

	SetOwnableCarData(idx, OC_CREATE, 		gettime());

	format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
	// ----------------------------------------------------------------------------------------

	new vehicleid = CreateVehicle
	(
		GetOwnableCarData(idx, OC_MODEL_ID),
		GetOwnableCarData(idx, OC_POS_X),
		GetOwnableCarData(idx, OC_POS_Y),
		GetOwnableCarData(idx, OC_POS_Z),
		GetOwnableCarData(idx, OC_ANGLE),
		GetOwnableCarData(idx, OC_COLOR_1),
		GetOwnableCarData(idx, OC_COLOR_2),
		-1,
		0,
		VEHICLE_ACTION_TYPE_OWNABLE_CAR,
		idx
	);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
		//index = GetVehicleData(vehicleid, V_ACTION_ID);
        format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
        SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
		SetVehicleParam(vehicleid, V_LOCK, false);

		SetVehicleData(vehicleid, V_MILEAGE, 0.0);
	}

	SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

	format
	(
		query, sizeof query,
		"INSERT INTO ownable_cars \
		(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
		VALUES \
		('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
		GetPlayerAccountID(playerid),
		modelid,
		color_1,
		color_2,
		pos_x,
		pos_y,
		pos_z,
		angle,
		gettime()
	);
	result = mysql_query(mysql, query, true);

	SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

	cache_delete(result);

    ShowHud(playerid);
    launch[playerid] = 0;
    diski[playerid] = 0;
    fars[playerid] = 0;
    nitro[playerid] = 0;
	SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}??ù ???????? ?????????? ??????????????{ffff00} ???? - ù????????.");
	SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}??? ??????????????{ffff00} ?????????.");
	UnloadPlayerOwnableCar(playerid);

	AddPlayerData(playerid, P_QUEST_EXP_5, +, 1);
	UpdatePlayerDatabaseInt(playerid, "quest_exp_5", GetPlayerData(playerid, P_QUEST_EXP_5));

	if(GetPlayerData(playerid, P_QUEST_EXP_5) == 1)
	{
	    SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'?????? ?????????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
        SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");
	    GivePlayerMoneyEx(playerid, 10000, "?????????? ??????");

	    SetPlayerData(playerid, P_QUEST_5, 1);
	    UpdatePlayerDatabaseInt(playerid, "quest_5", 1);
	    
	    AddPlayerData(playerid, P_TOP_5, +, 1);
		UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
	}

	return 1;
}

stock GetFreeHousesCount()
{
	new count;
	for(new idx; idx < g_house_loaded; idx ++)
	{
		if(IsHouseOwned(idx)) continue;

		count ++;
	}
	return count;
}

stock ShowHouseRenterInfo(playerid, houseid, roomid)
{
	if(GetPlayerHouse(playerid, HOUSE_TYPE_HOME) == houseid)
	{
		if(0 <= roomid <= MAX_HOUSE_ROOMS-1)
		{
			if(IsHouseRoomOwned(houseid, roomid))
			{
				SetPlayerUseListitem(playerid, roomid);

				new string[144];
				new time = gettime();

				new s_year, s_month, s_day; // ?????????
				timestamp_to_date(GetHouseRenterInfo(houseid, roomid, HR_RENT_TIME), s_year, s_month, s_day);

				//new e_year, e_month, e_day;	// ?????????
				//timestamp_to_date(GetHouseRoomInfo(houseid, roomid, HR_RENT_DATE), e_year, e_month, e_day);

				format
				(
					string, sizeof string,
					"1. ?????????\t\t\t{CCCC00}%s\n"\
					"2. ????????ù\t\t\t%02d-%02d-%d\n"\
					"3. ?????????\t\t\t{66BB33}%d ????\n"\
					"{888888}4. ????????",
					GetHouseRenterInfo(houseid, roomid, HR_OWNER_NAME),
					s_day, s_month, s_year,
					GetElapsedTime(time, GetHouseRenterInfo(houseid, roomid, HR_RENT_TIME), CONVERT_TIME_TO_DAYS)
				);
				Dialog(playerid, DIALOG_HOUSE_RENTER_INFO, DIALOG_STYLE_LIST, "{33AACC}?????????ù ? ??????????", string, "????????", "?????");
			}
			else SendClientMessage(playerid, 0x999999FF, "? ???? ??????? ??? ????? ?? ?????????");
		}
	}
}

stock AddHouseRenter(houseid, roomid, playerid)
{
	if(!IsHouseRoomOwned(houseid, roomid))
	{
		new query[128];
		new Cache: result;

		new time = gettime();

		format(query, sizeof query, "UPDATE accounts SET house_type=%d,house_room=%d,house=%d WHERE id=%d LIMIT 1", HOUSE_TYPE_ROOM, roomid, houseid, GetPlayerAccountID(playerid));
		mysql_query(mysql, query, false);

		format(query, sizeof query, "INSERT INTO houses_renters (owner_id,house_id,room_id,rent_time,time) VALUES (%d,%d,%d,%d,%d)", GetPlayerAccountID(playerid), GetHouseData(houseid, H_SQL_ID), roomid, 0, time);
		result = mysql_query(mysql, query, true);

		SetHouseRenterInfo(houseid, roomid, HR_SQL_ID, 		cache_insert_id());
		SetHouseRenterInfo(houseid, roomid, HR_OWNER_ID,	GetPlayerAccountID(playerid));
		SetHouseRenterInfo(houseid, roomid, HR_RENT_DATE,	0);
		SetHouseRenterInfo(houseid, roomid, HR_RENT_TIME,	time);

		format(GetHouseRenterInfo(houseid, roomid, HR_OWNER_NAME), 21, GetPlayerNameEx(playerid));

		SetPlayerData(playerid, P_HOUSE, 		houseid);
		SetPlayerData(playerid, P_HOUSE_TYPE, 	HOUSE_TYPE_ROOM);
		SetPlayerData(playerid, P_HOUSE_ROOM, 	roomid);

		AddHouseRentersCount(houseid, +, 1);

		cache_delete(result);
	}
}

stock EvictHouseRenter(houseid, roomid, renter_id = INVALID_PLAYER_ID, ownerid = INVALID_PLAYER_ID)
{
	if(IsHouseRoomOwned(houseid, roomid))
	{
		new query[90];

		format(query, sizeof query, "DELETE FROM houses_renters WHERE owner_id=%d AND house_id=%d", GetHouseRenterInfo(houseid, roomid, HR_OWNER_ID), GetHouseData(houseid, H_SQL_ID));
		mysql_query(mysql, query, false);

		format(query, sizeof query, "UPDATE accounts SET house_type=-1,house_room=-1,house=-1 WHERE id=%d LIMIT 1", GetHouseRenterInfo(houseid, roomid, HR_OWNER_ID));
		mysql_query(mysql, query, false);

		if(!mysql_errno())
		{
			if(renter_id == INVALID_PLAYER_ID)
				renter_id = GetPlayerID(GetHouseRenterInfo(houseid, roomid, HR_OWNER_NAME));

			if(renter_id != INVALID_PLAYER_ID)
			{
				if(GetPlayerHouse(renter_id, HOUSE_TYPE_ROOM) == houseid)
				{
					if(ownerid != INVALID_PLAYER_ID)
					{
						format(query, sizeof query, "%s ??????? ??? ?? ?????? ????", GetPlayerNameEx(ownerid));
						SendClientMessage(renter_id, 0x3399FFFF, query);
					}

					SetPlayerData(renter_id, P_HOUSE, -1);
					SetPlayerData(renter_id, P_HOUSE_TYPE, -1);
					SetPlayerData(renter_id, P_HOUSE_ROOM, -1);
				}
			}

			SetHouseRenterInfo(houseid, roomid, HR_SQL_ID, 	0);
			SetHouseRenterInfo(houseid, roomid, HR_OWNER_ID,	0);
			SetHouseRenterInfo(houseid, roomid, HR_RENT_DATE,	0);
			SetHouseRenterInfo(houseid, roomid, HR_RENT_TIME,	0);

			AddHouseRentersCount(houseid, -, 1);
			return 1;
		}
		return -1;
	}
	return 0;
}

stock GetHouseIndexBySQLID(sql_id)
{
	new index = -1;

	for(new idx; idx < MAX_HOUSES; idx ++)
	{
		if(GetHouseData(idx, H_SQL_ID) != sql_id) continue;

		index = idx;
		break;
	}
	return index;
}

stock GetHouseFreeRoom(houseid)
{
	new roomid = -1;

	for(new idx; idx < MAX_HOUSE_ROOMS; idx ++)
	{
		if(IsHouseRoomOwned(houseid, idx)) continue;

		roomid = idx;
		break;
	}
	return roomid;
}

stock LotteryBuyTicketCount()
{
	new count;
	foreach(new playerid : Player)
	{
		if(!IsPlayerLogged(playerid)) continue;
		if(!GetPlayerData(playerid, P_LOTTERY)) continue;

		count ++;
	}
	return count;
}



stock ShowPlayerSelectPanel(playerid, type)
{
	if(GetPlayerData(playerid, P_USE_SELECT_PANEL) == SELECT_PANEL_TYPE_NONE)
	{
		for(new idx; idx < sizeof select_TD; idx ++)
		{
			TextDrawShowForPlayer(playerid, select_TD[idx]);
		}
		SetPlayerData(playerid, P_USE_SELECT_PANEL, type);

		SelectTextDraw(playerid, 0x009900FF);
	}
}

stock HidePlayerSelectPanel(playerid)
{
	if(GetPlayerData(playerid, P_USE_SELECT_PANEL) != SELECT_PANEL_TYPE_NONE)
	{
		CancelSelectTextDraw(playerid);

		for(new idx; idx < sizeof select_TD; idx ++)
		{
			TextDrawHideForPlayer(playerid, select_TD[idx]);
		}
		SetPlayerData(playerid, P_USE_SELECT_PANEL, SELECT_PANEL_TYPE_NONE);
	}
}

stock IsPlayerHaveWeapon(playerid, weaponid)
{
	new weapon, ammo;
	new bool: is_have = false;

	for(new idx; idx <= 12; idx ++)
	{
		GetPlayerWeaponData(playerid, idx, weapon, ammo);
		if(weapon != weaponid) continue;

		is_have = true;
		break;
	}
	return is_have;
}

stock IsAJobCar(vehicleid)
{
	switch(GetVehicleData(vehicleid, V_ACTION_TYPE))
	{
		case
			VEHICLE_ACTION_TYPE_BUS_DRIVER,
			VEHICLE_ACTION_TYPE_TAXI_DRIVER,
			VEHICLE_ACTION_TYPE_MECHANIC,
			VEHICLE_ACTION_TYPE_TRUCKER:
		{
			return 1;
		}
	}
	return 0;
}

stock GetNearestVehicleID(playerid, Float: radius = 0.0)
{
	if(radius == 0.0)
		radius = FLOAT_INFINITY;

	new vehicleid = INVALID_VEHICLE_ID;

	new Float: dist;
	new Float: pos_x, Float: pos_y, Float: pos_z;

	GetPlayerPos(playerid, pos_x, pos_y, pos_z);
	for(new idx; idx < MAX_VEHICLES; idx ++)
	{
		if(!IsValidVehicle(idx)) continue;
		if(!IsVehicleStreamedIn(idx, playerid)) continue;

		dist = GetVehicleDistanceFromPoint(idx, pos_x, pos_y, pos_z);
		if(dist < radius)
		{
			radius = dist,
			vehicleid = idx;
		}
	}
	return vehicleid;
}

stock ShowPlayerBuyRepairCarDialog(playerid, stationid)
{
	if(stationid != -1)
	{
		SetPVarInt(playerid, "buy_jerrican_in_fuelst", stationid);

		new fmt_str[70];
		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}???. ???????? ????? 100.000$\n"\
			"?? ?????? ?????? ???"
		);
		Dialog(playerid, DIALOG_FUEL_STATION_BUY_REPAIR, DIALOG_STYLE_MSGBOX, "???", fmt_str, "??", "???");
	}
	else SendClientMessage(playerid, 0xCECECEFF, "??? ???????? ????? ?????? ?? ????? ???");
}

stock ShowPlayerBuyJerricanDialog(playerid, stationid)
{
	if(stationid != -1)
	{
		SetPVarInt(playerid, "buy_jerrican_in_fuelst", stationid);

		new fmt_str[70];
		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}???????? ?? ???? ???????? ????? %d ???\n"\
			"?? ?????? ?????? ???",
			GetFuelStationData(stationid, FS_FUEL_PRICE) * 15
		);
		Dialog(playerid, DIALOG_FUEL_STATION_BUY_JERRICA, DIALOG_STYLE_MSGBOX, "{FFCD00}??????? ????????", fmt_str, "??", "???");
	}
	else SendClientMessage(playerid, 0xCECECEFF, "???????? ? ???????? ????? ?????? ?? ????? ???");
}

stock LoadOrders()
{
	new Cache: result, rows;

	result = mysql_query(mysql, "SELECT * FROM orders");
	rows = cache_num_rows();

	if(rows > sizeof g_order)
		rows = sizeof g_order;

	new buffer;
	for(new idx; idx < rows; idx ++)
	{
		SetOrderData(idx, O_SQL_ID,		cache_get_field_content_int(idx, "id"));
		SetOrderData(idx, O_TYPE,		cache_get_field_content_int(idx, "type"));
		SetOrderData(idx, O_COMPANY_ID,		cache_get_field_content_int(idx, "company"));
		SetOrderData(idx, O_AMOUNT,		cache_get_field_content_int(idx, "amount"));
		SetOrderData(idx, O_PRICE,		cache_get_field_content_int(idx, "price"));
		SetOrderData(idx, O_TIME,		cache_get_field_content_int(idx, "time"));
		SetOrderData(idx, O_USED, 		false);

		buffer = GetOrderData(idx, O_COMPANY_ID);
		switch(GetOrderData(idx, O_TYPE))
		{
			case ORDER_TYPE_FUEL_STATION:
			{
				SetFuelStationData(buffer, FS_ORDER_ID, idx);
			}
			case ORDER_TYPE_BUSINESS:
			{
				SetBusinessData(buffer, B_ORDER_ID, idx);
			}
		}
	}
	cache_delete(result);

	printf("[Orders]: ??????? ?????????: %d", rows);
}

stock CreateOrder(type, company, amount, price, description[] = "")
{

	new order_id = GetOrderFreeSlot();
	if(order_id != -1)
	{
		new query[128];
		new Cache: result;
		new time = gettime();

		format(query, sizeof query, "INSERT INTO orders (type,company,amount,price,time) VALUES (%d,%d,%d,%d,%d)", type, company, amount, price, time);
		result = mysql_query(mysql, query, true);

		if(!mysql_errno())
		{
			new year, month, day;
			getdate(year, month, day);

			SetOrderData(order_id, O_TYPE, type);
			SetOrderData(order_id, O_COMPANY_ID, company);
			SetOrderData(order_id, O_AMOUNT, amount);
			SetOrderData(order_id, O_PRICE, price);
			SetOrderData(order_id, O_TIME, time);
			SetOrderData(order_id, O_USED, false);

			SetOrderData(order_id, O_SQL_ID, cache_insert_id());

			switch(type)
			{
				case ORDER_TYPE_FUEL_STATION:
				{
					SetFuelStationData(company, FS_ORDER_ID, order_id);
				}
				case ORDER_TYPE_BUSINESS:
				{
					SetBusinessData(company, B_ORDER_ID, order_id);
				}
			}
		}
		else order_id = -1;

		cache_delete(result);
	}
	return order_id;
}

stock DeleteOrder(orderid)
{
	if(GetOrderData(orderid, O_SQL_ID) > 0)
	{
		new query[64];
		new company = GetOrderData(orderid, O_COMPANY_ID);

		switch(GetOrderData(orderid, O_TYPE))
		{
			case ORDER_TYPE_FUEL_STATION:
			{
				SetFuelStationData(company, FS_ORDER_ID, -1);
			}
			case ORDER_TYPE_BUSINESS:
			{
				SetBusinessData(company, B_ORDER_ID, -1);
			}
		}

		format(query, sizeof query, "DELETE FROM orders WHERE type=%d AND company=%d", GetOrderData(orderid, O_TYPE), GetOrderData(orderid, O_COMPANY_ID));
		mysql_query(mysql, query, false);

		SetOrderData(orderid, O_SQL_ID, 0);
		SetOrderData(orderid, O_PRICE,  0);
		SetOrderData(orderid, O_AMOUNT, 0);
	}
}

stock GetOrderFreeSlot()
{
	new slot = -1;

	for(new idx; idx < sizeof g_order; idx ++)
	{
		if(GetOrderData(idx, O_SQL_ID) > 0) continue;

		slot = idx;
		break;
	}
	return slot;
}

stock SellFuelStation(playerid, to_player = INVALID_PLAYER_ID, price = 0)
{
	new stationid = GetPlayerFuelStation(playerid);
	if(stationid != -1)
	{
		new fuel_st_price = GetFuelStationData(stationid, FS_PRICE);
		new fuel_st_percent = (fuel_st_price * 30) / 100;
		new fuel_st_improvemnts_price = FuelStationImprovementsPrice(stationid);

		if(fuel_st_improvemnts_price)
			fuel_st_improvemnts_price = (fuel_st_improvemnts_price * 60) / 100;

		new query[170];
		new return_money = (fuel_st_price - fuel_st_percent) + fuel_st_improvemnts_price;

		SetPlayerData(playerid, P_FUEL_ST, -1);

		SetFuelStationData(stationid, FS_OWNER_ID, 0);

		if(to_player == INVALID_PLAYER_ID)
		{
			AddPlayerData(playerid, P_BANK, +, return_money);

			BankLog(playerid, return_money, "??????? ???");

			SetFuelStationData(stationid, FS_IMPROVEMENTS, 0);

			SetFuelStationData(stationid, FS_FUELS, 		1000);
			SetFuelStationData(stationid, FS_FUEL_PRICE,	3);
			SetFuelStationData(stationid, FS_BUY_FUEL_PRICE,0);

			SetFuelStationData(stationid, FS_BALANCE,		0);
			SetFuelStationData(stationid, FS_RENT_DATE,		0);
			SetFuelStationData(stationid, FS_LOCK_STATUS,	false);

			format(query, sizeof query, "UPDATE accounts a,fuel_stations f SET a.bank=%d,a.fuel_st=-1,f.owner_id=0,f.fuels=1000,f.fuel_price=3,f.lock=0 WHERE a.id=%d AND f.id=%d", GetPlayerData(playerid, P_BANK), GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
			mysql_query(mysql, query, false);

			//format(query, sizeof query, "UPDATE fuel_stations_profit SET view=0 WHERE fid=%d AND view=1",  GetFuelStationData(stationid, FS_SQL_ID));
			//mysql_query(mysql, query, false);

			GivePlayerMoneyEx(playerid, 0, "??????? ??????????? ??????? ???????????", false, false);
			CallLocalFunction("UpdateFuelStationLabel", "i", stationid);

			SendClientMessage(playerid, 0x66CC00FF, "?? ??????? ???? ??????????? ???????!");

			format(query, sizeof query, "????? ?? ??????? ??????????? ??????? ???????? 30 ????????? ?? ?? ????????? {99CC00}(%d ???)", fuel_st_percent);
			SendClientMessage(playerid, 0xCECECEFF, query);

			format(query, sizeof query, "??? ???? ?????????? 60 ????????? ?? ????????? ????????? ?????????: {CCFF00}%d ???", fuel_st_improvemnts_price);
			SendClientMessage(playerid, 0xCECECEFF, query);

			format(query, sizeof query, "????? ?? ?????????? ???? ???????????: {3399FF}%d ???", return_money);
			SendClientMessage(playerid, 0xFFFFFFFF, query);

		}
		else
		{
			if(BuyPlayerFuelStation(to_player, stationid, true, price) == 1)
			{
				new total_price = price + fuel_st_improvemnts_price;

				format(query, sizeof query, "??? ???? ?????????? 60 ????????? ?? ????????? ????????? ?????????: {CCFF00}%d ???", fuel_st_improvemnts_price);
				SendClientMessage(playerid, 0xCECECEFF, query);

				format(query, sizeof query, "UPDATE accounts SET money=%d,fuel_st=-1 WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)+total_price, GetPlayerAccountID(playerid));
				mysql_query(mysql, query, false);

				GivePlayerMoneyEx(playerid, total_price, "??????? ??????????? ??????? ??????", false, false);

				fuel_st_price = price;
				fuel_st_percent = 0;
			}
			else return ;
		}
		format(query, sizeof query, "~g~+%d rub~n~+%d rub", (fuel_st_price - fuel_st_percent), fuel_st_improvemnts_price);
		GameTextForPlayer(playerid, query, 4000, 1);
	}
}

stock BuyPlayerFuelStation(playerid, stationid, bool: buy_from_owner = false, price = -1)
{
	if(!IsFuelStationOwned(stationid) && GetPlayerFuelStation(playerid) == -1)
	{
		if(price <= 0)
			price = GetFuelStationData(stationid, FS_PRICE);

		if(GetPlayerMoneyEx(playerid) >= price)
		{
			new query[256];

			format(query, sizeof query, "UPDATE accounts a, fuel_stations f SET a.money=%d,a.fuel_st=%d,f.owner_id=%d WHERE a.id=%d AND f.id=%d", GetPlayerMoneyEx(playerid)-price, stationid, GetPlayerAccountID(playerid), GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
			mysql_query(mysql, query, false);

			if(!mysql_errno())
			{
				SetPlayerData(playerid, P_FUEL_ST, stationid);

				SetFuelStationData(stationid, FS_OWNER_ID, 		GetPlayerAccountID(playerid));
				SetFuelStationData(stationid, FS_IMPROVEMENTS, 0);

				new time = gettime();
				new rent_time = (time - (time % 86400)) + 86400;

				if(!buy_from_owner)
				{
					SetFuelStationData(stationid, FS_FUELS, 		50);
					SetFuelStationData(stationid, FS_FUEL_PRICE,	3);
					SetFuelStationData(stationid, FS_BUY_FUEL_PRICE,0);

					SetFuelStationData(stationid, FS_BALANCE,		0);
					SetFuelStationData(stationid, FS_RENT_DATE,		rent_time);
					SetFuelStationData(stationid, FS_LOCK_STATUS,	false);
				}
				else
				{
					if(GetElapsedTime(GetFuelStationData(stationid, FS_RENT_DATE), time, CONVERT_TIME_TO_DAYS) <= 0)
					{
						SetFuelStationData(stationid, FS_RENT_DATE, rent_time);
					}
				}
				format(g_fuel_station[stationid][FS_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);
				CallLocalFunction("UpdateFuelStationLabel", "i", stationid);

				GivePlayerMoneyEx(playerid, -price, "??????? ??????????? ???????", false, true);
				SendClientMessage(playerid, 0x66CC00FF, "???????? {3399FF}/fuelst {66CC00}????? ?????? ? ??????????ù?");

				format(query, sizeof query, "UPDATE fuel_stations SET improvements=0,fuels=%d,fuel_price=%d,buy_fuel_price=%d,balance=%d,rent_time=%d,`lock`=%d WHERE id=%d LIMIT 1", GetFuelStationData(stationid, FS_FUELS), GetFuelStationData(stationid, FS_FUEL_PRICE), GetFuelStationData(stationid, FS_BUY_FUEL_PRICE), GetFuelStationData(stationid, FS_BALANCE), GetFuelStationData(stationid, FS_RENT_DATE), GetFuelStationData(stationid, FS_LOCK_STATUS), GetFuelStationData(stationid, FS_SQL_ID));
				mysql_query(mysql, query, false);

				format(query, sizeof query, "UPDATE fuel_stations_profit SET view=0 WHERE fid=%d AND view=1",  GetFuelStationData(stationid, FS_SQL_ID));
				mysql_query(mysql, query, false);

				return 1;
			}

			SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 16)");
			return 0;
		}
		return 0;
	}
	return -1;
}

stock FuelStationFillCar(playerid, vehicleid, stationid)
{
	if(IsPlayerDriver(playerid) && IsPlayerInVehicle(playerid, vehicleid))
	{
		if(0 <= stationid <= g_fuel_station_loaded)
		{
			if(!GetFuelStationData(stationid, FS_LOCK_STATUS))
			{
				new fmt_str[150];

				new buy_fuel_pay = GetPVarInt(playerid, "buy_fuel_pay");
				new buy_fuel_count = GetPVarInt(playerid, "buy_fuel_count");

				new price = GetFuelStationData(stationid, FS_FUEL_PRICE) * 10;

				if(GetPlayerMoneyEx(playerid) >= price)
				{
					if((GetVehicleData(vehicleid, V_FUEL) + 10.0) <= 150.0)
					{
						if(GetFuelStationData(stationid, FS_FUELS) >= 10)
						{
							if(IsFuelStationOwned(stationid))
							{
								AddFuelStationData(stationid, FS_FUELS, -, 10);
								AddFuelStationData(stationid, FS_BALANCE, +, price);
							}
							SetVehicleData(vehicleid, V_FUEL, GetVehicleData(vehicleid, V_FUEL) + 10);

							buy_fuel_count += 10;
							buy_fuel_pay += price;

							SetPVarInt(playerid, "buy_fuel_pay", buy_fuel_pay);
							SetPVarInt(playerid, "buy_fuel_count", buy_fuel_count);

							format(fmt_str, sizeof fmt_str, "UPDATE accounts a,fuel_stations f SET a.money=%d,f.fuels=%d,f.balance=%d WHERE a.id=%d AND f.id=%d", GetPlayerMoneyEx(playerid)-price, GetFuelStationData(stationid, FS_FUELS), GetFuelStationData(stationid, FS_BALANCE), GetPlayerAccountID(playerid), GetFuelStationData(stationid, FS_SQL_ID));
							mysql_query(mysql, fmt_str, false);

							fmt_str = "";
							GivePlayerMoneyEx(playerid, -price, "??????? ??????? ?? ????????", false, false);
						}
						else strcat(fmt_str, "~n~~r~~h~no fuel");
					}
					else strcat(fmt_str, "~n~~r~~h~benzobak full");

					format(fmt_str, sizeof fmt_str, "~w~summa: ~g~~h~%d rub~n~~w~litres: ~b~%d%s", buy_fuel_pay, buy_fuel_count, fmt_str);
					GameTextForPlayer(playerid, fmt_str, 3000, 4);
				}
				else SendClientMessage(playerid, 0xCECECEFF, "???????????? ????? ??ù ????????");
			}
			else
			{
				GameTextForPlayer(playerid, "~w~fuel station~n~~r~~h~is closed", 3000, 4);
				//SendClientMessage(playerid, 0xFF6600FF, "??????????ù ??????ù ???????");
			}
		}
	}
}

stock GetFuelStationMaxFuel(stationid)
{
	new max_fuels = 2500;
	new i_level = GetFuelStationData(stationid, FS_IMPROVEMENTS);

	if(i_level > 3)
		i_level = 3;

	max_fuels += i_level * 2500;
	return max_fuels;
}

stock GetNearestFuelStation(playerid, Float: dist = 15.0)
{
	if(dist == 0.0)
		dist = FLOAT_INFINITY;

	new stationid = -1;
	new Float: my_dist;

	for(new idx; idx < g_fuel_station_loaded; idx ++)
	{
		my_dist = GetPlayerDistanceFromPoint(playerid, GetFuelStationData(idx, FS_POS_X), GetFuelStationData(idx, FS_POS_Y), GetFuelStationData(idx, FS_POS_Z));
		if(my_dist < dist)
		{
			dist = my_dist,
			stationid = idx;
		}
	}
	return stationid;
}

stock GetPlayerFuelStation(playerid)
{
	new stationid = GetPlayerData(playerid, P_FUEL_ST);

	if(stationid != -1)
	{
		if(GetFuelStationData(stationid, FS_OWNER_ID) == GetPlayerAccountID(playerid))
		{
			return stationid;
		}
	}
	return -1;
}

stock FuelStationImprovementsPrice(stationid)
{
	new price;
	new level = GetFuelStationData(stationid, FS_IMPROVEMENTS);

	if(1 <= level <= sizeof g_fuel_station_improvements)
	{
		for(new idx; idx < level; idx ++)
		{
			price += g_fuel_station_improvements[idx][I_PRICE];
		}
	}
	return price;
}

stock ShowPlayerFuelStationPayForRent(playerid)
{
	new stationid = GetPlayerFuelStation(playerid);
	if(stationid != -1)
	{
		new fmt_str[256];

		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}??????????ù ??????ù:\t\t?%d (%s)\n"\
			"?????????? ???? ???????:\t\t%d ?? 30\n"\
			"?????????ù ???????ù ?????:\t%d ???\n"\
			"ù?? ??????:\t\t\t\t%s\n\n"\
			"?? ??????? ???? ?? ?????? ?????????? ??????????? ????????",
			stationid,
			GetFuelStationData(stationid, FS_NAME),
			GetElapsedTime(GetFuelStationData(stationid, FS_RENT_DATE), gettime(), CONVERT_TIME_TO_DAYS),
			GetFuelStationData(stationid, FS_IMPROVEMENTS) < 4 ? GetFuelStationData(stationid, FS_RENT_PRICE) : GetFuelStationData(stationid, FS_RENT_PRICE) / 2,
			GetFuelStationData(stationid, FS_IMPROVEMENTS) < 4 ? ("?????ù") : ("?????????ù")
		);
		Dialog(playerid, DIALOG_PAY_FOR_RENT_FUEL_ST, DIALOG_STYLE_INPUT, "{66CC00}?????? ??????????? ???????", fmt_str, "????????", "?????");
	}
}

stock ShowPlayerBusinessPayForRent(playerid)
{
	new businessid = GetPlayerBusiness(playerid);
	if(businessid != -1)
	{
		new fmt_str[256];

		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}??????:\t\t\t\t?%d (%s)\n"\
			"?????????? ???? ???????:\t\t%d ?? 30\n"\
			"?????????ù ???????ù ?????:\t%d ???\n"\
			"ù?? ??????:\t\t\t\t%s\n\n"\
			"?? ??????? ???? ?? ?????? ?????????? ???????",
			businessid,
			GetBusinessData(businessid, B_NAME),
			GetElapsedTime(GetBusinessData(businessid, B_RENT_DATE), gettime(), CONVERT_TIME_TO_DAYS),
			GetBusinessData(businessid, B_IMPROVEMENTS) < 3 ? GetBusinessData(businessid, B_RENT_PRICE) : GetBusinessData(businessid, B_RENT_PRICE) / 2,
			GetBusinessData(businessid, B_IMPROVEMENTS) < 3 ? ("?????ù") : ("?????????ù")
		);
		Dialog(playerid, DIALOG_PAY_FOR_RENT_BIZ, DIALOG_STYLE_INPUT, "{66CC00}?????? ???????", fmt_str, "????????", "?????");
	}
}

stock ShowPlayerHousePayForRent(playerid)
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
	if(houseid != -1)
	{
		new fmt_str[256];

		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}???:\t\t\t\t\t?%d (%s)\n"\
			"?????????? ???? ???????:\t\t%d ?? 30\n"\
			"?????????ù ??????????:\t\t%d ???\n"\
			"???????ù:\t\t\t\t%s\n\n"\
			"?? ??????? ???? ?? ?????? ???????? ????",
			houseid,
			GetHouseData(houseid, H_NAME),
			GetElapsedTime(GetHouseData(houseid, H_RENT_DATE), gettime(), CONVERT_TIME_TO_DAYS),
			GetHouseData(houseid, H_IMPROVEMENTS) < 4 ? GetHouseData(houseid, H_RENT_PRICE) : GetHouseData(houseid, H_RENT_PRICE) / 2,
			GetHouseData(houseid, H_IMPROVEMENTS) < 4 ? ("???") : ("????")
		);
		Dialog(playerid, DIALOG_PAY_FOR_RENT_HOUSE, DIALOG_STYLE_INPUT, "{66CC00}?????? ????", fmt_str, "????????", "?????");
	}
}

stock SellBusiness(playerid, to_player = INVALID_PLAYER_ID, price = 0)
{
	new businessid = GetPlayerBusiness(playerid);

	if(businessid != -1)
	{
		new biz_price = GetBusinessData(businessid, B_PRICE);
		new biz_percent = (biz_price * 30) / 100;
		new biz_improvemnts_price = BusinessImprovementsPrice(businessid);

		if(biz_improvemnts_price)
			biz_improvemnts_price = (biz_improvemnts_price * 60) / 100;

		new query[200];
		new return_money = (biz_price - biz_percent) + biz_improvemnts_price;

		SetPlayerData(playerid, P_BUSINESS, -1);

		SetBusinessData(businessid, B_OWNER_ID, 0);

		if(to_player == INVALID_PLAYER_ID)
		{
			AddPlayerData(playerid, P_BANK, +, return_money);

			BankLog(playerid, return_money, "??????? ???????");

			SetBusinessData(businessid, B_IMPROVEMENTS, 	0);

			SetBusinessData(businessid, B_PRODS, 			0);
			SetBusinessData(businessid, B_PROD_PRICE,		0);

			SetBusinessData(businessid, B_BALANCE,			0);
			SetBusinessData(businessid, B_RENT_DATE,		0);
			SetBusinessData(businessid, B_ENTER_MUSIC,		0);
			SetBusinessData(businessid, B_LOCK_STATUS,	false);

			BusinessHealthPickupInit(businessid);

			format(query, sizeof query, "UPDATE accounts a,business b SET a.bank=%d,a.business=-1,b.owner_id=0,b.products=0,b.prod_price=0,b.lock=0 WHERE a.id=%d AND b.id=%d", GetPlayerData(playerid, P_BANK), GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
			mysql_query(mysql, query, false);

			format(query, sizeof query, "DELETE FROM business_gps WHERE bid=%d", businessid);
			mysql_query(mysql, query, false);

			g_business_gps_init = false;

			//format(query, sizeof query, "UPDATE business_profit SET view=0 WHERE bid=%d AND view=1", GetBusinessData(businessid, B_SQL_ID));
			//mysql_query(mysql, query, false);

			GivePlayerMoneyEx(playerid, 0, "??????? ??????? ???????????", false, false);
			CallLocalFunction("UpdateBusinessLabel", "i", businessid);

			SendClientMessage(playerid, 0x66CC00FF, "?? ??????? ???? ??????!");

			format(query, sizeof query, "????? ?? ??????? ??????? ???????? 30 ????????? ?? ??? ????????? {99CC00}(%d ???)", biz_percent);
			SendClientMessage(playerid, 0xCECECEFF, query);

			format(query, sizeof query, "??? ???? ?????????? 60 ????????? ?? ????????? ????????? ?????????: {CCFF00}%d ???", biz_improvemnts_price);
			SendClientMessage(playerid, 0xCECECEFF, query);

			format(query, sizeof query, "????? ?? ?????????? ???? ???????????: {3399FF}%d ???", return_money);
			SendClientMessage(playerid, 0xFFFFFFFF, query);
		}
		else
		{
			if(BuyPlayerBusiness(to_player, businessid, true, price) == 1)
			{
				new total_price = price + biz_improvemnts_price;

				format(query, sizeof query, "??? ???? ?????????? 60 ????????? ?? ????????? ????????? ?????????: {CCFF00}%d ???", biz_improvemnts_price);
				SendClientMessage(playerid, 0xCECECEFF, query);

				format(query, sizeof query, "UPDATE accounts SET money=%d,business=-1 WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid)+total_price, GetPlayerAccountID(playerid));
				mysql_query(mysql, query, false);

				format(query, sizeof query, "DELETE FROM business_gps WHERE bid=%d", businessid);
				mysql_query(mysql, query, false);

				g_business_gps_init = false;
				GivePlayerMoneyEx(playerid, total_price, "??????? ??????? ??????", false, false);

				biz_price = price;
				biz_percent = 0;
			}
			else return ;
		}
		format(query, sizeof query, "~g~+%d rub~n~+%d rub", (biz_price - biz_percent), biz_improvemnts_price);
		GameTextForPlayer(playerid, query, 4000, 1);
	}
}

stock BuyPlayerBusiness(playerid, businessid, bool: buy_from_owner = false, price = -1)
{
	if(!IsBusinessOwned(businessid) && GetPlayerBusiness(playerid) == -1)
	{
		if(price <= 0)
			price = GetBusinessData(businessid, B_PRICE);

		if(GetPlayerMoneyEx(playerid) >= price)
		{
			new query[256];

			format(query, sizeof query, "UPDATE accounts a, business b SET a.money=%d,a.business=%d,b.owner_id=%d WHERE a.id=%d AND b.id=%d", GetPlayerMoneyEx(playerid)-price, businessid, GetPlayerAccountID(playerid), GetPlayerAccountID(playerid), GetBusinessData(businessid, B_SQL_ID));
			mysql_query(mysql, query, false);
			printf("sql %s", query);

			if(!mysql_errno())
			{
				SetPlayerData(playerid, P_BUSINESS, businessid);

				SetBusinessData(businessid, B_OWNER_ID, GetPlayerAccountID(playerid));
				SetBusinessData(businessid, B_IMPROVEMENTS, 	0);

				new time = gettime();
				new rent_time = (time - (time % 86400)) + 86400;

				if(!buy_from_owner)
				{
					SetBusinessData(businessid,	B_PRODS, 		20);
					SetBusinessData(businessid,	B_PROD_PRICE, 	0);

					SetBusinessData(businessid,	B_ENTER_MUSIC, 	0);
					SetBusinessData(businessid,	B_ENTER_PRICE, 	0);

					SetBusinessData(businessid,	B_BALANCE, 		0);
					SetBusinessData(businessid,	B_RENT_DATE,	rent_time);
					SetBusinessData(businessid,	B_LOCK_STATUS,	false);
				}
				else
				{
					if(GetElapsedTime(GetBusinessData(businessid, B_RENT_DATE), time, CONVERT_TIME_TO_DAYS) <= 0)
					{
						SetBusinessData(businessid, B_RENT_DATE, rent_time);
					}
				}
				format(g_business[businessid][B_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);
				CallLocalFunction("UpdateBusinessLabel", "i", businessid);

				GivePlayerMoneyEx(playerid, -price, "??????? ???????", false, true);
				SendClientMessage(playerid, 0x66CC00FF, "???????? {0099FF}/business {66CC00}????? ?????? ? ??????????ù?");

				format(query, sizeof query, "UPDATE business SET improvements=0,products=%d,prod_price=%d,balance=%d,rent_time=%d,`lock`=%d WHERE id=%d LIMIT 1", GetBusinessData(businessid, B_PRODS), GetBusinessData(businessid, B_PROD_PRICE), GetBusinessData(businessid, B_BALANCE), GetBusinessData(businessid, B_RENT_DATE), GetBusinessData(businessid, B_LOCK_STATUS), GetBusinessData(businessid, B_SQL_ID));
				mysql_query(mysql, query, false);

				format(query, sizeof query, "UPDATE business_profit SET view=0 WHERE bid=%d AND view=1", GetBusinessData(businessid, B_SQL_ID));
				mysql_query(mysql, query, false);

				return 1;
			}
			SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 21)");
			return 0;
		}
		return 0;
	}
	return -1;
}

stock BusinessHealthPickupInit(businessid)
{
	if(GetBusinessData(businessid, B_IMPROVEMENTS) >= 2)
	{
		if(!GetBusinessData(businessid, B_HEALTH_PICKUP))
		{
			new interior = GetBusinessData(businessid, B_INTERIOR);
			SetBusinessData(businessid, B_HEALTH_PICKUP, CreatePickup(1240, 23, GetBusinessInteriorInfo(interior, BT_HEALTH_POS_X), GetBusinessInteriorInfo(interior, BT_HEALTH_POS_Y), GetBusinessInteriorInfo(interior, BT_HEALTH_POS_Z), businessid + 255, PICKUP_ACTION_TYPE_BIZ_HEALTH, businessid));
		}
	}
	else
	{
		if(GetBusinessData(businessid, B_HEALTH_PICKUP))
		{
			DestroyPickup(GetBusinessData(businessid, B_HEALTH_PICKUP));
			SetBusinessData(businessid, B_HEALTH_PICKUP, 0);
		}
	}
}

stock GetBusinessEnterProdCount(businessid)
{
	new take_prods = 0;
	new enter_price = GetBusinessData(businessid, B_ENTER_PRICE);

	if(enter_price > 0)
	{
		if(enter_price < 150)
		{
			take_prods = 1;
		}
		else if(enter_price < 500)
		{
			take_prods = 2;
		}
		else take_prods = 3;
	}
	return take_prods;
}

stock GetBusinessMaxProd(businessid)
{
	new max_prods = 500;
	new i_level = GetBusinessData(businessid, B_IMPROVEMENTS);

	if(i_level >= 5)
	{
		max_prods = 10_000;
	}
	else if(i_level >= 1)
	{
		max_prods = 3_000;
	}
	else max_prods = 500;

	return max_prods;
}

stock GetNearestBusiness(playerid, Float: dist = 10.0)
{
	if(dist == 0.0)
		dist = FLOAT_INFINITY;

	new businessid = -1;
	new Float: my_dist;

	for(new idx; idx < g_business_loaded; idx ++)
	{
		my_dist = GetPlayerDistanceFromPoint(playerid, GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), GetBusinessData(idx, B_POS_Z));
		if(my_dist < dist)
		{
			dist = my_dist,
			businessid = idx;
		}
	}
	return businessid;
}

stock BusinessImprovementsPrice(businessid)
{
	new price;
	new level = GetBusinessData(businessid, B_IMPROVEMENTS);

	if(1 <= level <= sizeof g_business_improvements)
	{
		for(new idx; idx < level; idx ++)
		{
			price += g_business_improvements[idx][I_PRICE];
		}
	}
	return price;
}

stock EnterPlayerToBiz(playerid, businessid)
{
	print("okey");
	if(GetPlayerInBiz(playerid) == -1)
	{
		new type = GetBusinessData(businessid, B_TYPE),
			buffer = GetBusinessData(businessid, B_INTERIOR);

		printf("okey type %d buffer %d",type,buffer);

		if(type == BUSINESS_TYPE_CAR_TUNING)
		{
			new vehicleid = GetPlayerOwnableCar(playerid);

			if(vehicleid == INVALID_VEHICLE_ID)
				return 1;

			GetVehiclePos(vehicleid, vehicle_temp_position[playerid][0], vehicle_temp_position[playerid][3], vehicle_temp_position[playerid][2]);
			GetVehicleZAngle(vehicleid, vehicle_temp_position[playerid][3]);

			SetVehiclePos(vehicleid, 2503.6116,1503.9767,1497.8375);
			SetVehicleZAngle(vehicleid, 161.0);

			LinkVehicleToInterior(vehicleid, GetBusinessInteriorInfo(buffer, BT_ENTER_INTERIOR));
			SetVehicleVirtualWorld(vehicleid, businessid + 255);
		}

		SetPlayerPosEx
		(
			playerid,
			GetBusinessInteriorInfo(buffer, BT_ENTER_POS_X),
			GetBusinessInteriorInfo(buffer, BT_ENTER_POS_Y),
			GetBusinessInteriorInfo(buffer, BT_ENTER_POS_Z),
			GetBusinessInteriorInfo(buffer, BT_ENTER_ANGLE),
			GetBusinessInteriorInfo(buffer, BT_ENTER_INTERIOR),
			businessid + 255, false
		);
		SetPlayerInBiz(playerid, businessid);

		buffer = GetBusinessData(businessid, B_ENTER_MUSIC);
		
		if(1 <= buffer <= sizeof g_business_sound)
		{
			PlayerPlaySound(playerid, g_business_sound[buffer - 1], 0.0, 0.0, 0.0);
		}
	}
	return 1;
}

stock GetPlayerBusiness(playerid)
{
	new businessid = GetPlayerData(playerid, P_BUSINESS);

	if(businessid != -1)
	{
		if(GetBusinessData(businessid, B_OWNER_ID) == GetPlayerAccountID(playerid))
		{
			return businessid;
		}
	}
	return -1;
}

stock GetFreeBusinessCount()
{
	new count;
	for(new idx; idx < g_business_loaded; idx ++)
	{
		if(IsBusinessOwned(idx)) continue;

		count ++;
	}
	return count;
}

stock IsPlayerInBuyPosBiz(playerid, businessid, type, Float: radius = 50.0)
{
	if(GetBusinessData(businessid, B_TYPE) == type)
	{
		new interior = GetBusinessData(businessid, B_INTERIOR);
		if(IsPlayerInRangeOfPoint(playerid, radius, GetBusinessInteriorInfo(interior, BT_BUY_POS_X), GetBusinessInteriorInfo(interior, BT_BUY_POS_Y), GetBusinessInteriorInfo(interior, BT_BUY_POS_Z)))
		{
			return 1;
		}
	}
	return 0;
}

stock ShowPlayerRealtorHomeDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_BIZ_REALTOR_HOME_GET, DIALOG_STYLE_INPUT,
		"{99CC00}?????????ù ? ????",
		"{FFFFFF}??????? ????? ????, ??????????\n"\
		"? ??????? ?? ?????? ????????\n\n"\
		"{FFCD00}????????? ?????? 50 ??????",
		"?????", "??????"
	);
}

stock IsABike(vehicleid)
{
	switch(GetVehicleData(vehicleid, V_MODELID))
	{
		case 481, 509, 510:
		{
			return 1;
		}
	}
	return 0;
}

stock IsModelHasBootAndBonnet(modelid)
{
	switch(modelid)
	{
		case 481,509,510,417,425,447,460,469,464,465,476,487,489,497,501,511,512,513,519,520,530,548,553,563,577,592,593: return 0;
	}
	return 1;
}

stock SetPlayerPhoneUseState(playerid, bool: use = true, bool: bubble = true)
{
	if(use)
	{
	//	SetPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, GetPlayerData(playerid, P_PHONE_COLOR) + 18865, A_OBJECT_BONE_RIGHT_HAND, 0.1, 0.001, 0.0, 280.0, 0.0, 200.0, 1.0, 1.0, 1.0);
		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_USECELLPHONE);

		SetPlayerData(playerid, P_USE_ANIM_TYPE, USE_ANIM_TYPE_NONE - 1);

		if(bubble)
			Action(playerid, "?????? ???????", _, false);
	}
	else
	{
	//	RemovePlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND);
		SetPlayerData(playerid, P_USE_ANIM_TYPE, USE_ANIM_TYPE_NONE);

		if(GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_USECELLPHONE)
			SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
	}
}

stock GetNearestAtm(playerid, Float: dist = 15.0)
{
	if(dist == 0.0)
		dist = FLOAT_INFINITY;

	new atmid = -1;
	new Float: my_dist;

	for(new idx; idx < sizeof g_atm-1; idx ++)
	{
		my_dist = GetPlayerDistanceFromPoint(playerid, g_atm[idx][A_POS_X], g_atm[idx][A_POS_Y], g_atm[idx][A_POS_Z]);
		if(my_dist < dist)
		{
			dist = my_dist,
			atmid = idx;
		}
	}
	return atmid;
}

stock GetElapsedTime(time, to_time, type = CONVERT_TIME_TO_HOURS)
{
	new result;

	switch(type)
	{
		case CONVERT_TIME_TO_MINUTES:
		{
			result = ((time - (time % 60)) - (to_time - (to_time % 60))) / 60;
		}
		case CONVERT_TIME_TO_HOURS:
		{
			result = ((time - (time % 3600)) - (to_time - (to_time % 3600))) / 3600;
		}
		case CONVERT_TIME_TO_DAYS:
		{
			result = ((time - (time % 86400)) - (to_time - (to_time % 86400))) / 86400;
		}
		default:
			result = -1;
	}
	return result;
}

stock ConvertUnixTime(unix_time, type = CONVERT_TIME_TO_SECONDS)
{
	switch(type)
	{
		case CONVERT_TIME_TO_SECONDS:
		{
			unix_time %= 60;
		}
		case CONVERT_TIME_TO_MINUTES:
		{
			unix_time = (unix_time / 60) % 60;
		}
		case CONVERT_TIME_TO_HOURS:
		{
			unix_time = (unix_time / 3600) % 24;
		}
		case CONVERT_TIME_TO_DAYS:
		{
			unix_time = (unix_time / 86400) % 30;
		}
		case CONVERT_TIME_TO_MONTHS:
		{
			unix_time = (unix_time / 2629743) % 12;
		}
		case CONVERT_TIME_TO_YEARS:
		{
			unix_time = (unix_time / 31556926) + 1970;
		}
		default:
			unix_time %= 60;
	}
	return unix_time;
}

stock CheckPlayerFlood(playerid, bool:inc = true, max_rate = MAX_FLOOD_RATE, rate_inc = FLOOD_RATE_INC, kick_rate = FLOOD_RATE_KICK)
{
	new tick = GetTickCount();

	AddPlayerAntiFloodData(playerid, AF_RATE, +, inc ? rate_inc : 0);
	AddPlayerAntiFloodData(playerid, AF_RATE, -, (GetTickCount() - GetPlayerAntiFloodData(playerid, AF_LAST_TICK)));
	SetPlayerAntiFloodData(playerid, AF_LAST_TICK, tick);

	if(GetPlayerAntiFloodData(playerid, AF_RATE) < 0)
		SetPlayerAntiFloodData(playerid, AF_RATE, 0);

	if(GetPlayerAntiFloodData(playerid, AF_RATE) >= max_rate)
	{
		if(GetPlayerAntiFloodData(playerid, AF_RATE) >= kick_rate)
		{
			Kick:(playerid, _, 10);
		}
		return 1;
	}
	return 0;
}

stock ShowPhoneBookOperation(playerid, operationid, contactid=0)
{
	switch(operationid)
	{
		case PHONE_BOOK_OPERATION_OPTIONS:
		{
			SetPlayerPhoneBookSelectContact(playerid, GetPlayerListitemValue(playerid, contactid));

			Dialog
			(
				playerid, DIALOG_PHONE_BOOK_OPTION, DIALOG_STYLE_LIST,
				"{FFCD00}????????",
				"1. ?????????\n"\
				"2. ????????? SMS ?????????\n"\
				"3. ???????? ??ù ????????\n"\
				"4. ???????? ????? ????????\n"\
				"5. ??????? ???????",
				"???????", "?????"
			);
		}
		case PHONE_BOOK_OPERATION_CALL:
		{
			new number[11]; // TODO
			format(number, sizeof number, "%d", GetPlayerPhoneBook(playerid, contactid, PB_NUMBER));
			callcmd::call(playerid, number);
		}
		case PHONE_BOOK_OPERATION_SEND_SMS:
		{
			Dialog
			(
				playerid, DIALOG_PHONE_BOOK_SEND_SMS, DIALOG_STYLE_INPUT,
				"{FFCD00}???????? SMS ????????ù",
				"{FFFFFF}-\t\t\t??????? ????? SMS ????????ù:\t\t-",
				"?????????", "?????"
			);
		}
		case PHONE_BOOK_OPERATION_CHANGE_NAM:
		{
			Dialog
			(
				playerid, DIALOG_PHONE_BOOK_CHANGE_NAME, DIALOG_STYLE_INPUT,
				"{FFCD00}????????? ????? ????????",
				"{FFFFFF}??????? ????? ??ù ??ù ????????:",
				"????????", "?????"
			);
		}
		case PHONE_BOOK_OPERATION_CHANGE_NUM:
		{
			Dialog
			(
				playerid, DIALOG_PHONE_BOOK_CHANGE_NUMBER, DIALOG_STYLE_INPUT,
				"{FFCD00}????????? ?????? ????????",
				"{FFFFFF}??????? ????? ????? ??ù ????????:",
				"????????", "?????"
			);
		}
		case PHONE_BOOK_OPERATION_DELETE_CON:
		{
			if(GetPlayerPhoneBook(playerid, contactid, PB_SQL_ID))
			{
				new query[80];

				format(query, sizeof query, "DELETE FROM phone_books WHERE id=%d LIMIT 1", GetPlayerPhoneBook(playerid, contactid, PB_SQL_ID));
				mysql_query(mysql, query, false);

				SetPlayerPhoneBookInitStatus(playerid, false);
				SendClientMessage(playerid, 0xFF9030FF, "??????? ?????? ? ???ù?? ????????");
			}
		}
	}
}

stock AddPhoneBookContact(playerid, name[], number[])
{
	if(!IsPlayerPhoneBookInit(playerid))
	{
		InitPlayerPhoneBook(playerid);
	}
	if(GetPlayerPhoneBookContacts(playerid) < MAX_PHONE_BOOK_CONTACTS)
	{
		if(!CheckPhoneBookUsedNumber(playerid, number))
		{
			new fmt_str[128];
			SetPlayerPhoneBookInitStatus(playerid, false);

			format(fmt_str, sizeof fmt_str, "?? ???????? %s (???. %s) ? ???? ?????? ?????????", name, number);
			SendClientMessage(playerid, 0x33FF66FF, fmt_str);

			mysql_format(mysql, fmt_str, sizeof fmt_str, "INSERT INTO phone_books (owner_id,name,number,time) VALUES (%d,'%e','%e',%d)", GetPlayerAccountID(playerid), name, number, gettime());
			mysql_query(mysql, fmt_str, false);
		}
	}
	return 1;
}

stock CheckPhoneBookUsedNumber(playerid, number[])
{
	for(new idx, len; idx < MAX_PHONE_BOOK_CONTACTS; idx ++)
	{
		if(!GetPlayerPhoneBook(playerid, idx, PB_SQL_ID)) continue;

		len = strlen(GetPlayerPhoneBook(playerid, idx, PB_NUMBER));
		if(len && !strcmp(GetPlayerPhoneBook(playerid, idx, PB_NUMBER), number, true))
		{
			new fmt_str[64];
			format(fmt_str, sizeof fmt_str, "{FFFFFF}????? %s ??? ??????? ??ù ???????? %s", number, GetPlayerPhoneBook(playerid, idx, PB_NAME));
			Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FF6633}??????", fmt_str, "???????", "");

			return 1;
		}
	}
	return 0;
}

stock InitPlayerPhoneBook(playerid)
{
	if(!IsPlayerPhoneBookInit(playerid))
	{
		new query[80];
		new Cache: result, rows;

		format(query, sizeof query, "SELECT * FROM phone_books WHERE owner_id=%d ORDER BY id DESC LIMIT %d", GetPlayerAccountID(playerid), MAX_PHONE_BOOK_CONTACTS);
		result = mysql_query(mysql, query);

		rows = cache_num_rows();
		for(new idx; idx < MAX_PHONE_BOOK_CONTACTS; idx ++)
		{
			if(idx < rows)
			{
				SetPlayerPhoneBook(playerid, idx, PB_SQL_ID, cache_get_row_int(idx, 0));

				cache_get_row(idx, 2, g_player_phone_book[playerid][idx][PB_NAME], mysql, 21);
				cache_get_row(idx, 3, g_player_phone_book[playerid][idx][PB_NUMBER], mysql, 9);

				SetPlayerPhoneBook(playerid, idx, PB_TIME, cache_get_row_int(idx, 4));
				continue;
			}
			ClearPlayerPhoneBookContact(playerid, idx);
		}
		cache_delete(result);

		SetPlayerPhoneBookContacts(playerid, rows);
		SetPlayerPhoneBookInitStatus(playerid, true);
	}
	return 1;
}

stock ClearPlayerPhoneBookContact(playerid, contactid)
{
	SetPlayerPhoneBook(playerid, contactid, PB_SQL_ID, 	0);
	SetPlayerPhoneBook(playerid, contactid, PB_NAME, 	0);
	SetPlayerPhoneBook(playerid, contactid, PB_NUMBER, 	0);
	SetPlayerPhoneBook(playerid, contactid, PB_TIME, 	0);
}

stock GetPlayerIDByPhone(number)
{
	new playerid = INVALID_PLAYER_ID;

	if(1000 <= number <= 9999999)
	{
		foreach(new i : Player)
		{
			if(!IsPlayerLogged(i)) continue;
			if(number != GetPlayerPhone(i)) continue;

			playerid = i;
			break;
		}
	}
	return playerid;
}

stock CheckPlayerTempJobState(playerid)
{
	new job = GetPlayerTempJob(playerid);
	new j_state = GetPlayerTempJobState(playerid);

	//new s_action = GetPlayerSpecialAction(playerid);

	switch(job)
	{
		case TEMP_JOB_MINER:
		{
			if(j_state == TEMP_JOB_STATE_MINER_DROP_LOAD) // || s_action != SPECIAL_ACTION_NONE
			{
				SetPlayerTempJobCheckAnim(playerid, false);
				SetPlayerTempJobState(playerid, TEMP_JOB_STATE_MINER_LOAD);

				RemovePlayerAttachedObjects(playerid);
				ApplyAnimationEx(playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 1, 0);

		//tPlayerAttachedObject(playerid, A_OBJECT_SLOT_HAND, 18634, A_OBJECT_BONE_RIGHT_HAND, 0.07, 0.03, 0.04, 0.0, 270.0, 270.0, 1.5, 2.1, 1.8, 0);

				SetPlayerData(playerid, P_USE_ANIM_TYPE, USE_ANIM_TYPE_NONE);
				SetPlayerMinerJobLoadCP(playerid);

				SendClientMessage(playerid, 0xFF6600FF, "?? ??????? ???????");
			}
		}
		case TEMP_JOB_FACTORY:
		{
			if(j_state == TEMP_JOB_STATE_FACTORY_DROP_P)
			{
				FactoryPlayerDrop(playerid, false);
			}
		}
		case TEMP_JOB_LUMBERJACK:
		{
			if(j_state == TEMP_JOB_STATE_LUMBERJACK_DROP)
			{
				LumberJackPlayerDrop(playerid, true);
			}
		}
	}
}

stock ChangePlayerName(playerid, name[], bool: non_rp_nick = false)
{
	new query[128];
	new Cache: result, rows;

	mysql_format(mysql, query, sizeof query, "SELECT id FROM accounts WHERE name='%e' LIMIT 1", name);
	result = mysql_query(mysql, query);

	rows = cache_num_rows();
	cache_delete(result);

	if(3 <= strlen(name) <= 20 && !rows)
	{
		mysql_format(mysql, query, sizeof query, "UPDATE accounts SET name='%e' WHERE id=%d LIMIT 1", name, GetPlayerAccountID(playerid));
		mysql_query(mysql, query, false);

		if(!mysql_errno())
		{
			mysql_format(mysql, query, sizeof query, "INSERT INTO change_names (owner_id,name,time,ip) VALUES (%d,'%e',%d,'%e')", GetPlayerAccountID(playerid), GetPlayerNameEx(playerid), gettime(), GetPlayerIpEx(playerid));
			mysql_query(mysql, query, false);

			format(query, sizeof query, "%s ?????? %s ?? %s", GetPlayerNameEx(playerid), non_rp_nick ? "???-?? ??ù" : "??ù", name);

			format(g_player[playerid][P_NAME], 21, "%s", name);
			SetPlayerName(playerid, GetPlayerNameEx(playerid));

			SendClientMessageToAll(0xCCFF00FF, query);
			UpdateCharity();

			new buffer;
			if((buffer = GetPlayerFuelStation(playerid)) != -1)
			{
				format(g_fuel_station[buffer][FS_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);
				CallLocalFunction("UpdateFuelStationLabel", "i", buffer);
			}
			if((buffer = GetPlayerBusiness(playerid)) != -1)
			{
				format(g_business[buffer][B_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);
				CallLocalFunction("UpdateBusinessLabel", "i", buffer);
			}
			if((buffer = GetPlayerHouse(playerid, HOUSE_TYPE_HOME)) != -1)
			{
				format(g_house[buffer][H_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);
			}
			if((buffer = GetPlayerHouse(playerid, HOUSE_TYPE_ROOM)) != -1)
			{
				new room = GetPlayerData(playerid, P_HOUSE_ROOM);
				format(g_house_renters[buffer][room][HR_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);
			}
			if((buffer = GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL)) != -1)
			{
				new room = GetPlayerData(playerid, P_HOUSE_ROOM);
				format(g_hotel[buffer][room][H_OWNER_NAME], 21, GetPlayerNameEx(playerid), 0);
			}
			return 1;
		}
	}
	return 0;
}



stock EndPlayerTempJob(playerid, job, bool:annul = false)
{
	print("EndPlayerTempJob");
	if(GetPlayerTempJob(playerid) == job)
	{
		printf("GetPlayerTempJob(%d) == job(%d)", GetPlayerTempJob(playerid), job);
		SetPlayerTempJobCheckAnim(playerid, false);

	//	RemovePlayerAttachedObjects(playerid);
		SetPlayerSkinInit(playerid);

		new items = GetPlayerJobLoadItems(playerid);
		new pay_sum = items * GetTempJobInfo(job, TJ_PAY_FOR_LOAD);

		if(g_doubling[DOUBLING_WAGE])
			pay_sum = pay_sum * 2;

		new fmt_str[128];
		switch(job)
		{
			case TEMP_JOB_LOADER:
			{
				DisablePlayerCheckpoint(playerid);
				DisablePlayerRaceCheckpoint(playerid);

				TogglePlayerDynamicCP(playerid, help_info_CP, true);

				if(!annul)
				{
					new ts_pay = false;
					if(pay_sum > 0)
						format(fmt_str, sizeof fmt_str, ". ?????????? {FFFF00}%d ???.", pay_sum);

					strins(fmt_str, "[?????????ù]: "c_server"??????? ???? ????????", 0, sizeof fmt_str);
					SendClientMessage(playerid, COR_SERVER, fmt_str);

					if(ts_pay)
					{
						format(fmt_str, sizeof fmt_str, "%d ??? {3399FF}?? ?????? ?? ??????????", pay_sum);
						SendClientMessage(playerid, 0xFFFF00FF, fmt_str);
					}

					if(pay_sum > 0)
						GivePlayerMoneyEx(playerid, pay_sum, "???????? ?? ?????? ????????", true, false);

					format(fmt_str, sizeof fmt_str, "~b~~h~+%d rub", pay_sum);
					GameTextForPlayer(playerid, fmt_str, 4000, 1);
				}
			}
			case TEMP_JOB_MINER:
			{
				DisablePlayerCheckpoint(playerid);

				if(!annul)
				{
					if(items > 0)
					{
						format(fmt_str, sizeof fmt_str, "??????? ???? ????????. ?? ?????? %d ?? ????", items);
						SendClientMessage(playerid, 0x3399FFFF, fmt_str);

						format(fmt_str, sizeof fmt_str, "????? ?????????? %d ???", pay_sum);
						SendClientMessage(playerid, 0x3399FFFF, fmt_str);

						GivePlayerMoneyEx(playerid, pay_sum, "???????? ?? ?????? ???????", true, false);

						format(fmt_str, sizeof fmt_str, "~b~~h~+%d rub", pay_sum);
						GameTextForPlayer(playerid, fmt_str, 4000, 1);
					}
					else SendClientMessage(playerid, 0x3399FFFF, "??????? ???? ????????");
				}
				else SendClientMessage(playerid, 0xFF6600FF, "?? ???????? ?????????? ?????. ????????? ??? ???????????");

				ApplyAnimationEx(playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 1, 0, USE_ANIM_TYPE_NONE);
			}
			case TEMP_JOB_FACTORY:
			{
				pay_sum = GetPlayerJobWage(playerid);

				new bad_items = GetPVarInt(playerid, "factory_bad_prods");
				new skill = GetPVarInt(playerid, "factory_skill");
				new waste_sum = bad_items * (random(16) + 5);

				if(!annul)
				{
					SendClientMessage(playerid, 0x3399FFFF, "??????? ???? ????????");
					if(pay_sum > 0 && waste_sum < pay_sum)
					{
						format(fmt_str, sizeof fmt_str, "????? ??????? {FFFF00}%d {66CC00}?????????, ???????????? {FFFF00}%d ??.", items, bad_items) ;
						SendClientMessage(playerid, 0x66CC00FF, fmt_str);

						if(skill > 0)
						{
							format(fmt_str, sizeof fmt_str, "??????? ????? ?????????ù {66CCFF}?? %d ??????(?)", skill);
						}
						else fmt_str = "??????? ????? ?? ????????ù";
						SendClientMessage(playerid, 0x66CC00FF, fmt_str);

						format(fmt_str, sizeof fmt_str, "?????????? {00CC00}%d ???, {FFFFFF}?? ??? {FF6600}%d ??? {FFFFFF}- ????? ?? ???? ?????????", pay_sum, waste_sum);
						SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

						pay_sum -= waste_sum;
						format(fmt_str, sizeof fmt_str, "~b~~h~+%d rub", pay_sum);
						GameTextForPlayer(playerid, fmt_str, 4000, 1);

						GivePlayerMoneyEx(playerid, pay_sum, "???????? ?? ?????? ? ???? (?????)", true, false);
					}
				}
				else SendClientMessage(playerid, 0xFF6600FF, "?? ???????? ?????????? ??????. ??????? ???? ????????????");

				skill = GetPlayerData(playerid, P_FACTORY_USE_DESK);
				SetPlayerFactoryDeskUse(playerid, skill, false);
			}
			case TEMP_JOB_LUMBERJACK:
			{
				DisablePlayerCheckpoint(playerid);

				if(!annul)
				{
					if(items > 0)
					{
						format(fmt_str, sizeof fmt_str, "??????? ???? ????????. ?? ???????? %d ?? ????", items);
						SendClientMessage(playerid, 0x3399FFFF, fmt_str);

						format(fmt_str, sizeof fmt_str, "????? ?????????? %d ???", pay_sum);
						SendClientMessage(playerid, 0x3399FFFF, fmt_str);

						GivePlayerMoneyEx(playerid, pay_sum, "???????? ?? ?????? ????????", true, false);

						format(fmt_str, sizeof fmt_str, "~b~~h~+%d rub", pay_sum);
						GameTextForPlayer(playerid, fmt_str, 4000, 1);
					}
					else SendClientMessage(playerid, 0x3399FFFF, "??????? ???? ????????");
				}
				else SendClientMessage(playerid, 0xFF6600FF, "?? ???????? ?????????? ?????????. ????????? ??? ???????????");

				ApplyAnimationEx(playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 1, 0, USE_ANIM_TYPE_NONE);
			}
		}

		SetPlayerJobLoadItems(playerid, 0);
		SetPlayerData(playerid, P_JOB_WAGE, 0);
		SetPlayerTempJob(playerid, TEMP_JOB_NONE);
		
		AddPlayerData(playerid, P_TOP_1, +, pay_sum);
		UpdatePlayerDatabaseInt(playerid, "TOP_SalaryNewWork", GetPlayerData(playerid, P_TOP_1));
	}
}

stock TogglePlayerFactoryCP(playerid, toggle)
{
	for(new idx; idx < sizeof factory_desk; idx ++)
	{
		TogglePlayerDynamicCP(playerid, factory_desk[idx][FD_CHEK_ID], toggle);
	}
}

stock KillEndJobTimer(playerid)
{
	KillTimer(GetPlayerData(playerid, P_END_JOB_TIMER));
	SetPlayerData(playerid, P_END_JOB_TIMER, -1);
}

stock StartEndJobTimer(playerid, time = 15_000)
{
	if(GetPlayerData(playerid, P_END_JOB_TIMER) == -1)
		SetPlayerData(playerid, P_END_JOB_TIMER, SetTimerEx("EndPlayerJob", time, false, "i", playerid));
}

stock ShowPlayerBuyMetalDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_MINER_BUY_METALL, DIALOG_STYLE_INPUT,
		"{FFCD00}??????? ??????????",
		"{FFFFFF}??????? ?? ?????????? ?? ?????? ???????\n"\
		"{00CC00}???? ?? ??: 15 ??????",
		"??????", "??????"
	);
}

stock SetPlayerMinerJobLoadCP(playerid)
{
    if(GetPlayerTempJob(playerid) == TEMP_JOB_MINER)
    {
        new rand = random(sizeof miner_job_chop_cp);
        SetPlayerCheckpoint(playerid, miner_job_chop_cp[rand][0], miner_job_chop_cp[rand][1], miner_job_chop_cp[rand][2], 2.0, CP_ACTION_TYPE_MINER_JOB_TAKE);
        SetPlayerTempJobState(playerid, TEMP_JOB_STATE_MINER_LOAD);
    }
}

stock SetPlayerMinerJobUnLoadCP(playerid)
{
	if(GetPlayerTempJob(playerid) == TEMP_JOB_MINER)
	{
		SetPlayerCheckpoint(playerid, 557.652160,515.897888,999.714172, 2.0, CP_ACTION_TYPE_MINER_JOB_PUT);

		SetPlayerTempJobState(playerid, TEMP_JOB_STATE_MINER_UNLOAD);
	}
}

public: SetPlayerLoaderJobUnLoadCP(playerid) // ?????????? ???????? ??? ?????? ????
{
    if(GetPlayerTempJob(playerid) == TEMP_JOB_LOADER)
    {
        new rand = random(sizeof loader_job_unload_cp);

        SetPlayerCheckpoint(playerid, loader_job_unload_cp[rand][0], loader_job_unload_cp[rand][1], loader_job_unload_cp[rand][2], 2.0, CP_ACTION_TYPE_LOADER_JOB_PUT);
        //SetPlayerCheckpoint(playerid, 622.3066, 1664.1621, 12.1726, 2.0);
		SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LOADER_UNLOAD);

        SetPlayerTempJobCheckAnim(playerid, true);
    }
}

public: SetPlayerLoaderJobLoadCP(playerid) // ?????????? ???????? ??? ????? ????
{
    if(GetPlayerTempJob(playerid) == TEMP_JOB_LOADER)
    {
        new rand = random(sizeof loader_get_cp);

        SetPlayerTempJobCheckAnim(playerid, false);

        SetPlayerTempJobState(playerid, TEMP_JOB_STATE_LOADER_LOAD);
        SetPlayerCheckpoint(playerid, loader_get_cp[rand][0], loader_get_cp[rand][1], loader_get_cp[rand][2], 2.0, CP_ACTION_TYPE_LOADER_JOB_TAKE);
    }
}

stock SetPlayerLumberJackChopCP(playerid)
{
	new rand = random(sizeof lumberjack_job_chop_cp);

	SetPlayerCheckpoint(playerid, lumberjack_job_chop_cp[rand][0], lumberjack_job_chop_cp[rand][1], lumberjack_job_chop_cp[rand][2], 2.0, CP_ACTION_TYPE_LUMBERJACK_TAKE);
}

stock SetPlayerLumberUnJackChopCP(playerid)
{
	SetPlayerCheckpoint(playerid, 2239.7788,496.8613,15.7230, 2.0, CP_ACTION_TYPE_LUMBERJACK_PUT);
}

stock ShowPlayerDrivingTutorial(playerid)
{
    
	Dialog
	(
		playerid, DIALOG_DRIVING_TUTORIAL_START, DIALOG_STYLE_MSGBOX,
		"{0099FF}????????",
		"{FFFFFF}??? ??????? ??????? ??? ?????? ????????????ù\n"\
		"? ???????? ?? ????????\n\n"\
		"{CC9900}??ù ????, ????? ?????? ???????? ??????? \"?????\"",
		"?????", "??????"
	);
	return 1;
}

stock ShowDrivingTutorialSection(playerid, step)
{
	if(0 <= step <= sizeof driving_tutorial-1)
	{
		Dialog
		(
			playerid, DIALOG_DRIVING_TUTORIAL, DIALOG_STYLE_MSGBOX,
			driving_tutorial[step][DT_TITLE],
			driving_tutorial[step][DT_INFO],
			"?????", "?????"
		);
		SetPVarInt(playerid, "driving_tutorial_step", step);
	}
}

stock ShowPlayerDrivingExam(playerid, step)
{
	if(0 <= step <= sizeof driving_exam - 1)
	{
		Dialog
		(
			playerid, DIALOG_DRIVING_EXAM, DIALOG_STYLE_LIST,
			driving_exam[step][DE_TITLE],
			driving_exam[step][DE_LIST_ITEMS],
			"????????", ""
		);
		SetPlayerDrivingExamInfo(playerid, DE_EXAM_STEP, step);
	}
	else if(step >= sizeof driving_exam)
	{
		new points = GetPlayerDrivingExamInfo(playerid, DE_POINTS);
		SetPlayerDrivingExamInfo(playerid, DE_EXAM_STEP, 0);
		SetPlayerDrivingExamInfo(playerid, DE_ROUTE_STEP, 0);

		if(points >= 9)
			SetPlayerData(playerid, P_DRIVING_LIC, 1);

		new fmt_str[256];
		format(fmt_str, sizeof fmt_str, "{FFFFFF}?????????? ?????????? ???????: {66CC00}%d\n\n", points);

		if(points == 9)
		{
			strcat
			(
				fmt_str,
				"{6699FF}????????ù??!\n"\
				"?? ??????? ??????????? ?????????? ??????, ????? ?????????? ?? ?????? ????? ????????!"
			);
		}
		else if(points >= 10)
		{
			static const
				medal_name[3][12] = {"?????????", "??????ù????", "???????"};

			format(fmt_str, sizeof fmt_str, "%s{6699FF}????????ù??!\n?? ????????? %s ?????? ?? ????????????? ????? ????????!", fmt_str, medal_name[points - 10]);
		}
		else
		{
			ClearPlayerDrivingExamInfo(playerid);
			strcat
			(
				fmt_str,
				"{FF6600}? ????????? ?? ?? ??????? ???????????? ?????????? ??????\n"\
				"? ????????? ??? ??????????? ?????????? ????????? ??????\n"\
				"???? ??? ?? ?????????!"
			);
		}

		Dialog
		(
			playerid, DIALOG_DRIVING_EXAM_RESULT, DIALOG_STYLE_MSGBOX,
			"{FFFF00}?????????? ????????????? ?????",
			fmt_str,
			"??", ""
		);
	}
	return 1;
}

stock NextDrivingExamRouteCP(playerid)
{
	new step = GetPlayerDrivingExamInfo(playerid, DE_ROUTE_STEP);

	SetPlayerRaceCheckpoint
	(
		playerid,
		0,
		driving_exam_route[step][0],
		driving_exam_route[step][1],
		driving_exam_route[step][2],
		driving_exam_route[step + 1][0],
		driving_exam_route[step + 1][1],
		driving_exam_route[step + 1][2],
		4.0,
		RCP_ACTION_TYPE_DRIVING_EXAM
	);
	SetPlayerDrivingExamInfo(playerid, DE_ROUTE_STEP, step + 1);
}

stock GetPlayerSpeed(playerid)
{
	new Float: x, Float: y, Float: z;
	if(IsPlayerInAnyVehicle(playerid))
	{
		GetVehicleVelocity(GetPlayerVehicleID(playerid), x, y, z);
	}
	else GetPlayerVelocity(playerid, x, y, z);

	return floatround(floatsqroot(x*x+y*y+z*z)*100);
}

stock SetVehicleSpeed(vehicleid, Float: speed)
{
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		new Float: x,
			Float: y,
			Float: z,
			Float: angle;

		GetVehicleVelocity(vehicleid, x, y, z);
		GetVehicleZAngle(vehicleid, angle);

		speed /= 100.0;
        x = speed * floatsin(-angle, degrees);
        y = speed * floatcos(-angle, degrees);

        return SetVehicleVelocity(vehicleid, x, y, z - speed / 1000.0);

	}

	return 0;
}

stock IsPlayerDriver(playerid) // ????? ?? ????? ?? ????? ù?
{
	return (IsPlayerInAnyVehicle(playerid) && GetPlayerState(playerid) == PLAYER_STATE_DRIVER);
}

stock IsPlayerPassenger(playerid) // ????? ?? ????? ??? ????????
{
	return (IsPlayerInAnyVehicle(playerid) && GetPlayerState(playerid) == PLAYER_STATE_PASSENGER);
}

stock Speedometr01ShowForPlayer(playerid)
{
	//for(new idx; idx < sizeof speedometr_PTD[]; idx ++)
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][idx]);
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][0]);
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][1]);
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][2]);
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][3]);
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][4]);
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][5]);
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][6]);
	// PlayerTextDrawShow(playerid, speedometr_PTD[playerid][7]);
		
    //for(new idx; idx < sizeof speedometr_TD; idx ++)
	//	TextDrawShowForPlayer(playerid, speedometr_TD[idx]);
}

stock CreateSpeedometr01ForPlayer(playerid)
{
	speedometr_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 273.3996, 377.2600, "Sheatch_A"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr_PTD[playerid][0], 0.1602, 0.6442);
	PlayerTextDrawTextSize(playerid, speedometr_PTD[playerid][0], -58.0000, 0.0000);
	PlayerTextDrawAlignment(playerid, speedometr_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, speedometr_PTD[playerid][0], -2147483393);
	PlayerTextDrawBackgroundColor(playerid, speedometr_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, speedometr_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, speedometr_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, speedometr_PTD[playerid][0], 0);

	speedometr_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 276.1997, 384.3466, "0"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr_PTD[playerid][1], 0.4731, 2.2022);
	PlayerTextDrawTextSize(playerid, speedometr_PTD[playerid][1], 2.0000, 0.0000);
	PlayerTextDrawAlignment(playerid, speedometr_PTD[playerid][1], 1);
	PlayerTextDrawColor(playerid, speedometr_PTD[playerid][1], -16776961);
	PlayerTextDrawBackgroundColor(playerid, speedometr_PTD[playerid][1], 255);
	PlayerTextDrawFont(playerid, speedometr_PTD[playerid][1], 2);
	PlayerTextDrawSetProportional(playerid, speedometr_PTD[playerid][1], 1);
	PlayerTextDrawSetShadow(playerid, speedometr_PTD[playerid][1], 0);

	speedometr_PTD[playerid][2] = CreatePlayerTextDraw(playerid, 338.6995, 407.5964, "100_L"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr_PTD[playerid][2], 0.1558, 0.8732);
	PlayerTextDrawAlignment(playerid, speedometr_PTD[playerid][2], 1);
	PlayerTextDrawColor(playerid, speedometr_PTD[playerid][2], -1);
	PlayerTextDrawBackgroundColor(playerid, speedometr_PTD[playerid][2], 255);
	PlayerTextDrawFont(playerid, speedometr_PTD[playerid][2], 1);
	PlayerTextDrawSetProportional(playerid, speedometr_PTD[playerid][2], 1);
	PlayerTextDrawSetShadow(playerid, speedometr_PTD[playerid][2], 0);

	speedometr_PTD[playerid][3] = CreatePlayerTextDraw(playerid, 365.1012, 407.2963, "100_%"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr_PTD[playerid][3], 0.1578, 0.8732);
	PlayerTextDrawAlignment(playerid, speedometr_PTD[playerid][3], 1);
	PlayerTextDrawColor(playerid, speedometr_PTD[playerid][3], -1);
	PlayerTextDrawBackgroundColor(playerid, speedometr_PTD[playerid][3], 255);
	PlayerTextDrawFont(playerid, speedometr_PTD[playerid][3], 1);
	PlayerTextDrawSetProportional(playerid, speedometr_PTD[playerid][3], 1);
	PlayerTextDrawSetShadow(playerid, speedometr_PTD[playerid][3], 0);

	speedometr_PTD[playerid][4] = CreatePlayerTextDraw(playerid, 346.7994, 364.3417, "."); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr_PTD[playerid][4], 0.6183, 2.7697);
	PlayerTextDrawAlignment(playerid, speedometr_PTD[playerid][4], 1);
	PlayerTextDrawColor(playerid, speedometr_PTD[playerid][4], 16711935);
	PlayerTextDrawBackgroundColor(playerid, speedometr_PTD[playerid][4], 255);
	PlayerTextDrawFont(playerid, speedometr_PTD[playerid][4], 2);
	PlayerTextDrawSetProportional(playerid, speedometr_PTD[playerid][4], 1);
	PlayerTextDrawSetShadow(playerid, speedometr_PTD[playerid][4], 0);

	speedometr_PTD[playerid][5] = CreatePlayerTextDraw(playerid, 372.5010, 364.3417, "."); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr_PTD[playerid][5], 0.6183, 2.7697);
	PlayerTextDrawAlignment(playerid, speedometr_PTD[playerid][5], 1);
	PlayerTextDrawColor(playerid, speedometr_PTD[playerid][5], 16711935);
	PlayerTextDrawBackgroundColor(playerid, speedometr_PTD[playerid][5], 255);
	PlayerTextDrawFont(playerid, speedometr_PTD[playerid][5], 2);
	PlayerTextDrawSetProportional(playerid, speedometr_PTD[playerid][5], 1);
	PlayerTextDrawSetShadow(playerid, speedometr_PTD[playerid][5], 0);

	speedometr_PTD[playerid][6] = CreatePlayerTextDraw(playerid, 364.7669, 370.6374, "."); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr_PTD[playerid][6], 0.6183, 2.7697);
	PlayerTextDrawAlignment(playerid, speedometr_PTD[playerid][6], 1);
	PlayerTextDrawColor(playerid, speedometr_PTD[playerid][6], 16711935);
	PlayerTextDrawBackgroundColor(playerid, speedometr_PTD[playerid][6], 255);
	PlayerTextDrawFont(playerid, speedometr_PTD[playerid][6], 2);
	PlayerTextDrawSetProportional(playerid, speedometr_PTD[playerid][6], 1);
	PlayerTextDrawSetShadow(playerid, speedometr_PTD[playerid][6], 0);

	speedometr_PTD[playerid][7] = CreatePlayerTextDraw(playerid, 293.9000, 415.2975, "00000_km"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr_PTD[playerid][7], 0.0915, 0.6686);
	PlayerTextDrawAlignment(playerid, speedometr_PTD[playerid][7], 2);
	PlayerTextDrawColor(playerid, speedometr_PTD[playerid][7], -1378294017);
	PlayerTextDrawBackgroundColor(playerid, speedometr_PTD[playerid][7], 255);
	PlayerTextDrawFont(playerid, speedometr_PTD[playerid][7], 2);
	PlayerTextDrawSetProportional(playerid, speedometr_PTD[playerid][7], 1);
	PlayerTextDrawSetShadow(playerid, speedometr_PTD[playerid][7], 0);


}

stock Speedometr02ShowForPlayer(playerid)
{
	PlayerTextDrawShow(playerid, speedometr02_PTD[playerid][0]);
	PlayerTextDrawShow(playerid, speedometr02_PTD[playerid][1]);
	PlayerTextDrawShow(playerid, speedometr02_PTD[playerid][2]);
	PlayerTextDrawShow(playerid, speedometr02_PTD[playerid][3]);
	PlayerTextDrawShow(playerid, speedometr02_PTD[playerid][4]);
	PlayerTextDrawShow(playerid, speedometr02_PTD[playerid][5]);
	PlayerTextDrawShow(playerid, speedometr02_PTD[playerid][6]);
	PlayerTextDrawShow(playerid, speedometr02_PTD[playerid][7]);

    for(new idx; idx < sizeof speedometr02_TD; idx ++)
		TextDrawShowForPlayer(playerid, speedometr02_TD[idx]);
}

stock CreateSpeedometr02ForPlayer(playerid)
{

    speedometr02_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 284.0002, 370.9864, "Sheatch_A"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr02_PTD[playerid][0], 0.1442, 0.6392);
	PlayerTextDrawTextSize(playerid, speedometr02_PTD[playerid][0], -1.0000, 0.0000);
	PlayerTextDrawAlignment(playerid, speedometr02_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, speedometr02_PTD[playerid][0], -1061109505);
	PlayerTextDrawBackgroundColor(playerid, speedometr02_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, speedometr02_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, speedometr02_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, speedometr02_PTD[playerid][0], 0);

	speedometr02_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 283.8999, 380.1507, "000"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr02_PTD[playerid][1], 0.5735, 2.5308);
	PlayerTextDrawAlignment(playerid, speedometr02_PTD[playerid][1], 1);
	PlayerTextDrawColor(playerid, speedometr02_PTD[playerid][1], -1);
	PlayerTextDrawBackgroundColor(playerid, speedometr02_PTD[playerid][1], 255);
	PlayerTextDrawFont(playerid, speedometr02_PTD[playerid][1], 1);
	PlayerTextDrawSetProportional(playerid, speedometr02_PTD[playerid][1], 1);
	PlayerTextDrawSetShadow(playerid, speedometr02_PTD[playerid][1], 0);

	speedometr02_PTD[playerid][2] = CreatePlayerTextDraw(playerid, 289.2998, 410.5108, "00000_km"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr02_PTD[playerid][2], 0.1090, 0.8582);
	PlayerTextDrawAlignment(playerid, speedometr02_PTD[playerid][2], 1);
	PlayerTextDrawColor(playerid, speedometr02_PTD[playerid][2], -1);
	PlayerTextDrawBackgroundColor(playerid, speedometr02_PTD[playerid][2], 255);
	PlayerTextDrawFont(playerid, speedometr02_PTD[playerid][2], 2);
	PlayerTextDrawSetProportional(playerid, speedometr02_PTD[playerid][2], 1);
	PlayerTextDrawSetShadow(playerid, speedometr02_PTD[playerid][2], 0);

	speedometr02_PTD[playerid][3] = CreatePlayerTextDraw(playerid, 360.2994, 359.6276, "."); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr02_PTD[playerid][3], 0.4751, 2.3217);
	PlayerTextDrawAlignment(playerid, speedometr02_PTD[playerid][3], 1);
	PlayerTextDrawColor(playerid, speedometr02_PTD[playerid][3], 16711935);
	PlayerTextDrawBackgroundColor(playerid, speedometr02_PTD[playerid][3], 255);
	PlayerTextDrawFont(playerid, speedometr02_PTD[playerid][3], 2);
	PlayerTextDrawSetProportional(playerid, speedometr02_PTD[playerid][3], 1);
	PlayerTextDrawSetShadow(playerid, speedometr02_PTD[playerid][3], 0);

	speedometr02_PTD[playerid][4] = CreatePlayerTextDraw(playerid, 359.8994, 370.7283, "."); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr02_PTD[playerid][4], 0.4751, 2.3217);
	PlayerTextDrawAlignment(playerid, speedometr02_PTD[playerid][4], 1);
	PlayerTextDrawColor(playerid, speedometr02_PTD[playerid][4], 16711935);
	PlayerTextDrawBackgroundColor(playerid, speedometr02_PTD[playerid][4], 255);
	PlayerTextDrawFont(playerid, speedometr02_PTD[playerid][4], 2);
	PlayerTextDrawSetProportional(playerid, speedometr02_PTD[playerid][4], 1);
	PlayerTextDrawSetShadow(playerid, speedometr02_PTD[playerid][4], 0);

	speedometr02_PTD[playerid][5] = CreatePlayerTextDraw(playerid, 366.9998, 381.6290, "."); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr02_PTD[playerid][5], 0.4751, 2.3217);
	PlayerTextDrawAlignment(playerid, speedometr02_PTD[playerid][5], 1);
	PlayerTextDrawColor(playerid, speedometr02_PTD[playerid][5], 16711935);
	PlayerTextDrawBackgroundColor(playerid, speedometr02_PTD[playerid][5], 255);
	PlayerTextDrawFont(playerid, speedometr02_PTD[playerid][5], 2);
	PlayerTextDrawSetProportional(playerid, speedometr02_PTD[playerid][5], 1);
	PlayerTextDrawSetShadow(playerid, speedometr02_PTD[playerid][5], 0);

	speedometr02_PTD[playerid][6] = CreatePlayerTextDraw(playerid, 348.5995, 410.7492, "50_L"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr02_PTD[playerid][6], 0.0990, 0.7039);
	PlayerTextDrawAlignment(playerid, speedometr02_PTD[playerid][6], 1);
	PlayerTextDrawColor(playerid, speedometr02_PTD[playerid][6], -1);
	PlayerTextDrawBackgroundColor(playerid, speedometr02_PTD[playerid][6], 255);
	PlayerTextDrawFont(playerid, speedometr02_PTD[playerid][6], 2);
	PlayerTextDrawSetProportional(playerid, speedometr02_PTD[playerid][6], 1);
	PlayerTextDrawSetShadow(playerid, speedometr02_PTD[playerid][6], 0);

	speedometr02_PTD[playerid][7] = CreatePlayerTextDraw(playerid, 364.8005, 410.7515, "100%"); // ?????
	PlayerTextDrawLetterSize(playerid, speedometr02_PTD[playerid][7], 0.0955, 0.7188);
	PlayerTextDrawAlignment(playerid, speedometr02_PTD[playerid][7], 1);
	PlayerTextDrawColor(playerid, speedometr02_PTD[playerid][7], -1);
	PlayerTextDrawBackgroundColor(playerid, speedometr02_PTD[playerid][7], 255);
	PlayerTextDrawFont(playerid, speedometr02_PTD[playerid][7], 2);
	PlayerTextDrawSetProportional(playerid, speedometr02_PTD[playerid][7], 1);
	PlayerTextDrawSetShadow(playerid, speedometr02_PTD[playerid][7], 0);
}

stock CreateAutoMarketForPlayer(playerid)
{
	buy_menu_PTD[playerid] = CreatePlayerTextDraw(playerid, 317.600006, 347.199920, "---");
	PlayerTextDrawLetterSize(playerid, buy_menu_PTD[playerid], 0.346798, 1.861333);
	PlayerTextDrawAlignment(playerid, buy_menu_PTD[playerid], 2);
	PlayerTextDrawColor(playerid, buy_menu_PTD[playerid], -1);
	PlayerTextDrawSetShadow(playerid, buy_menu_PTD[playerid], 1);
	PlayerTextDrawSetOutline(playerid, buy_menu_PTD[playerid], 0);
	PlayerTextDrawBackgroundColor(playerid, buy_menu_PTD[playerid], 51);
	PlayerTextDrawFont(playerid, buy_menu_PTD[playerid], 2);
	PlayerTextDrawSetProportional(playerid, buy_menu_PTD[playerid], 1);

	buy_car_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 454.400146, 120.213172, "ABùO #0");
	PlayerTextDrawLetterSize(playerid, buy_car_PTD[playerid][0], 0.593998, 2.406393);
	PlayerTextDrawAlignment(playerid, buy_car_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, buy_car_PTD[playerid][0], -1);
	PlayerTextDrawSetShadow(playerid, buy_car_PTD[playerid][0], 0);
	PlayerTextDrawSetOutline(playerid, buy_car_PTD[playerid][0], 1);
	PlayerTextDrawBackgroundColor(playerid, buy_car_PTD[playerid][0], 51);
	PlayerTextDrawFont(playerid, buy_car_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, buy_car_PTD[playerid][0], 1);

	buy_car_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 536.799865, 145.599868, "~b~~h~âE?A: 0 P~n~ùPOÄEÇ: 0 km~n~~b~~h~CKOPOCùí: 0 km/h~n~KáACC: -");
	PlayerTextDrawLetterSize(playerid, buy_car_PTD[playerid][1], 0.365597, 1.764965);
	PlayerTextDrawAlignment(playerid, buy_car_PTD[playerid][1], 2);
	PlayerTextDrawColor(playerid, buy_car_PTD[playerid][1], -1);
	PlayerTextDrawSetShadow(playerid, buy_car_PTD[playerid][1], 0);
	PlayerTextDrawSetOutline(playerid, buy_car_PTD[playerid][1], 1);
	PlayerTextDrawBackgroundColor(playerid, buy_car_PTD[playerid][1], 51);
	PlayerTextDrawFont(playerid, buy_car_PTD[playerid][1], 2);
	PlayerTextDrawSetProportional(playerid, buy_car_PTD[playerid][1], 1);

	buy_car_PTD[playerid][2] = CreatePlayerTextDraw(playerid, 521.0, 226.916687, "âBEù  ");
	PlayerTextDrawTextSize(playerid, buy_car_PTD[playerid][2], 521.0 + 30.0, 7.0);	 // ----------------------
	PlayerTextDrawLetterSize(playerid, buy_car_PTD[playerid][2], 0.180999, 0.975832);
	PlayerTextDrawAlignment(playerid, buy_car_PTD[playerid][2], 1);
	PlayerTextDrawColor(playerid, buy_car_PTD[playerid][2], -1);
	PlayerTextDrawSetShadow(playerid, buy_car_PTD[playerid][2], 0);
	PlayerTextDrawSetOutline(playerid, buy_car_PTD[playerid][2], 0);
	PlayerTextDrawBackgroundColor(playerid, buy_car_PTD[playerid][2], 51);
	PlayerTextDrawFont(playerid, buy_car_PTD[playerid][2], 2);
	PlayerTextDrawSetProportional(playerid, buy_car_PTD[playerid][2], 1);
	PlayerTextDrawSetSelectable(playerid, buy_car_PTD[playerid][2], true);

	buy_car_PTD[playerid][3] = CreatePlayerTextDraw(playerid, 475.5, 239.4, "_");
	PlayerTextDrawTextSize(playerid, buy_car_PTD[playerid][3], 475.5 + 36.5, 34.0);
	PlayerTextDrawLetterSize(playerid, buy_car_PTD[playerid][3], 1.0, 4.1);
	PlayerTextDrawAlignment(playerid, buy_car_PTD[playerid][3], 1);
	PlayerTextDrawColor(playerid, buy_car_PTD[playerid][3], -1);
	PlayerTextDrawUseBox(playerid, buy_car_PTD[playerid][3], true);
	PlayerTextDrawBoxColor(playerid, buy_car_PTD[playerid][3], 255);
	PlayerTextDrawSetShadow(playerid, buy_car_PTD[playerid][3], 0);
	PlayerTextDrawSetOutline(playerid, buy_car_PTD[playerid][3], 1);
	PlayerTextDrawBackgroundColor(playerid, buy_car_PTD[playerid][3], 51);
	PlayerTextDrawFont(playerid, buy_car_PTD[playerid][3], 1);
	PlayerTextDrawSetProportional(playerid, buy_car_PTD[playerid][3], 1);
	PlayerTextDrawSetSelectable(playerid, buy_car_PTD[playerid][3], true);

	buy_car_PTD[playerid][4] = CreatePlayerTextDraw(playerid, 516.5, 239.4, "_");
	PlayerTextDrawTextSize(playerid, buy_car_PTD[playerid][4], 516.5 + 36.5, 34.0);
	PlayerTextDrawLetterSize(playerid, buy_car_PTD[playerid][4], 1.0, 4.1); // 4.108332);
	PlayerTextDrawAlignment(playerid, buy_car_PTD[playerid][4], 1);
	PlayerTextDrawColor(playerid, buy_car_PTD[playerid][4], -1);
	PlayerTextDrawUseBox(playerid, buy_car_PTD[playerid][4], true);
	PlayerTextDrawBoxColor(playerid, buy_car_PTD[playerid][4], 255);
	PlayerTextDrawSetShadow(playerid, buy_car_PTD[playerid][4], 0);
	PlayerTextDrawSetOutline(playerid, buy_car_PTD[playerid][4], 1);
	PlayerTextDrawBackgroundColor(playerid, buy_car_PTD[playerid][4], 51);
	PlayerTextDrawFont(playerid, buy_car_PTD[playerid][4], 1);
	PlayerTextDrawSetProportional(playerid, buy_car_PTD[playerid][4], 1);

	// ------

	buy_car_PTD[playerid][5] = CreatePlayerTextDraw(playerid, 557.5, 239.4, "_");
	PlayerTextDrawTextSize(playerid, buy_car_PTD[playerid][5], 557.5 + 36.5, 34.0);
	PlayerTextDrawLetterSize(playerid, buy_car_PTD[playerid][5], 1.0, 4.1);
	PlayerTextDrawAlignment(playerid, buy_car_PTD[playerid][5], 1);
	PlayerTextDrawColor(playerid, buy_car_PTD[playerid][5], -1);
	PlayerTextDrawUseBox(playerid, buy_car_PTD[playerid][5], true);
	PlayerTextDrawBoxColor(playerid, buy_car_PTD[playerid][5], 255);
	PlayerTextDrawSetShadow(playerid, buy_car_PTD[playerid][5], 0);
	PlayerTextDrawSetOutline(playerid, buy_car_PTD[playerid][5], 1);
	PlayerTextDrawBackgroundColor(playerid, buy_car_PTD[playerid][5], 51);
	PlayerTextDrawFont(playerid, buy_car_PTD[playerid][5], 1);
	PlayerTextDrawSetProportional(playerid, buy_car_PTD[playerid][5], 1);
	PlayerTextDrawSetSelectable(playerid, buy_car_PTD[playerid][5], true);
}

stock CreateAutoTuningForPlayer(playerid)
{
	change_color_PTD[0][playerid] = CreatePlayerTextDraw(playerid, 321.889190, 346.457916, "???? 1");
	PlayerTextDrawLetterSize(playerid, change_color_PTD[0][playerid], 0.193553, 0.913064);
	PlayerTextDrawTextSize(playerid, change_color_PTD[0][playerid], 27.999996, 26.382226);
	PlayerTextDrawAlignment(playerid, change_color_PTD[0][playerid], 2);
	PlayerTextDrawColor(playerid, change_color_PTD[0][playerid], -1);
	PlayerTextDrawUseBox(playerid, change_color_PTD[0][playerid], true);
	PlayerTextDrawBoxColor(playerid, change_color_PTD[0][playerid], -256);
	PlayerTextDrawSetShadow(playerid, change_color_PTD[0][playerid], 1);
	PlayerTextDrawSetOutline(playerid, change_color_PTD[0][playerid], 0);
	PlayerTextDrawBackgroundColor(playerid, change_color_PTD[0][playerid], 51);
	PlayerTextDrawFont(playerid, change_color_PTD[0][playerid], 2);
	PlayerTextDrawSetProportional(playerid, change_color_PTD[0][playerid], 1);
	PlayerTextDrawSetSelectable(playerid, change_color_PTD[0][playerid], true);

	change_color_PTD[1][playerid] = CreatePlayerTextDraw(playerid, 342.444366, 359.402191, "usebox");
	PlayerTextDrawLetterSize(playerid, change_color_PTD[1][playerid], 0.000000, 4.030000);
	PlayerTextDrawTextSize(playerid, change_color_PTD[1][playerid], 300.222320, 0.000000);
	PlayerTextDrawAlignment(playerid, change_color_PTD[1][playerid], 1);
	PlayerTextDrawColor(playerid, change_color_PTD[1][playerid], 0);
	PlayerTextDrawUseBox(playerid, change_color_PTD[1][playerid], true);
	PlayerTextDrawBoxColor(playerid, change_color_PTD[1][playerid], 102);
	PlayerTextDrawSetShadow(playerid, change_color_PTD[1][playerid], 0);
	PlayerTextDrawSetOutline(playerid, change_color_PTD[1][playerid], 0);
	PlayerTextDrawFont(playerid, change_color_PTD[1][playerid], 0);
	PlayerTextDrawSetSelectable(playerid, change_color_PTD[1][playerid], true);

	change_color_PTD[2][playerid] = CreatePlayerTextDraw(playerid, 402.999755, 359.406555, "usebox");
	PlayerTextDrawLetterSize(playerid, change_color_PTD[2][playerid], 0.000000, 4.030000);
	PlayerTextDrawTextSize(playerid, change_color_PTD[2][playerid], 360.666625, 0.000000);
	PlayerTextDrawAlignment(playerid, change_color_PTD[2][playerid], 1);
	PlayerTextDrawColor(playerid, change_color_PTD[2][playerid], 0);
	PlayerTextDrawUseBox(playerid, change_color_PTD[2][playerid], true);
	PlayerTextDrawBoxColor(playerid, change_color_PTD[2][playerid], -171);
	PlayerTextDrawSetShadow(playerid, change_color_PTD[2][playerid], 0);
	PlayerTextDrawSetOutline(playerid, change_color_PTD[2][playerid], 0);
	PlayerTextDrawFont(playerid, change_color_PTD[2][playerid], 0);
	PlayerTextDrawSetSelectable(playerid, change_color_PTD[2][playerid], true);

	change_color_PTD[3][playerid] = CreatePlayerTextDraw(playerid, 283.555328, 359.411010, "usebox");
	PlayerTextDrawLetterSize(playerid, change_color_PTD[3][playerid], 0.000000, 4.030000);
	PlayerTextDrawTextSize(playerid, change_color_PTD[3][playerid], 241.111145, 0.000000);
	PlayerTextDrawAlignment(playerid, change_color_PTD[3][playerid], 1);
	PlayerTextDrawColor(playerid, change_color_PTD[3][playerid], 0);
	PlayerTextDrawUseBox(playerid, change_color_PTD[3][playerid], true);
	PlayerTextDrawBoxColor(playerid, change_color_PTD[3][playerid], 865730389);
	PlayerTextDrawSetShadow(playerid, change_color_PTD[3][playerid], 0);
	PlayerTextDrawSetOutline(playerid, change_color_PTD[3][playerid], 0);
	PlayerTextDrawFont(playerid, change_color_PTD[3][playerid], 0);
	PlayerTextDrawSetSelectable(playerid, change_color_PTD[3][playerid], true);
}

stock IntToString(integer)
{
	new string[sizeof integer + 5];

	format(string, sizeof string, "%d", integer);

	return string;
}

stock SendMessageInChat(playerid, text[], Float: radius = 30.0)
{
    new Float: dist, type;
    new Float: x, Float: y, Float: z;
    new name[MAX_PLAYER_NAME];
    new message[256];

    GetPlayerPos(playerid, x, y, z);
    SetPlayerChatBubble(playerid, text, 0x00CCFFFF, 30.0, 8000);

    ChatMessageInit(playerid, text);

    GetPlayerName(playerid, name, sizeof(name));

    format(message, sizeof(message), "- %s {%06x}(%s)[%d]", text, GetPlayerColor(playerid) >>> 8, name, playerid);

    foreach(new idx : Player)
    {
        if (!IsPlayerLogged(idx)) continue;
        dist = GetPlayerDistanceFromPoint(idx, x, y, z);

        if (dist > radius) continue;
        type = GetPlayerChatType(idx);

        switch (GetPlayerSettingData(idx, S_CHAT_TYPE))
        {
            case SETTING_CHAT_ADVANCE:
            {
                if (dist < (radius / 4))
                {
                    SendClientMessage(idx, 0xCECECEFF, message);
                }
                else if (dist < (radius / 2))
                {
                    SendClientMessage(idx, 0x999999FF, message);
                }
                else
                {
                    SendClientMessage(idx, 0x6B6B6BFF, message);
                }
            }
            case SETTING_CHAT_STANDART:
            {
                if (GetPlayerSettingData(idx, S_NICK_IN_CHAT))
                {
                    SendPlayerMessageToPlayer(idx, playerid, message);
                }
                else
                {
                    SendClientMessage(idx, 0xCECECEFF, message);
                }
            }
            default: continue;
        }
    }
	if(!IsPlayerDriver(playerid))
	{
		if(GetPlayerData(playerid, P_USE_ANIM_TYPE) == USE_ANIM_TYPE_NONE)
		{
			ApplyAnimationEx(playerid, "PED", "IDLE_chat", 4.100, 0, 1, 1, 1, 1, 0, USE_ANIM_TYPE_CHAT);
			SetTimerEx("ClearPlayerChatAnim", strlen(text) * 400, false, "i", playerid);
		}
	}
}

stock ChatMessageInit(playerid, text[])
{
	format(chat_message[0], 129, "- %s {%06x}(%s)[%d]", text, GetPlayerColorEx(playerid) >>> 8, GetPlayerNameEx(playerid), playerid);
	format(chat_message[1], 129, "- %s {%06x}(%s)", text, GetPlayerColorEx(playerid) >>> 8, GetPlayerNameEx(playerid));
	format(chat_message[2], 129, "- %s", text);

	format(chat_message[3], 129, "(%d): %s", playerid, text);
	format(chat_message[4], 129, "%s", text);
}

stock SetPlayerChatInit(playerid)
{
	new type = 0;
	switch(GetPlayerSettingData(playerid, S_CHAT_TYPE))
	{
		case SETTING_CHAT_ADVANCE:
		{
			if(GetPlayerSettingData(playerid, S_NICK_IN_CHAT) == SETTING_TYPE_ON)
			{
				if(GetPlayerSettingData(playerid, S_ID_IN_CHAT) == SETTING_TYPE_ON)
				{
					type = 0;
				}
				else type = 1;
			}
			else type = 2;
		}
		case SETTING_CHAT_STANDART:
		{
			if(GetPlayerSettingData(playerid, S_ID_IN_CHAT) == SETTING_TYPE_ON)
			{
				type = 3;
			}
			else type = 4;
		}
		default: type = 0;
	}
	SetPlayerChatType(playerid, type);
}

stock SetPlayerSpawnInit(playerid)
{
	new spawn_id = random(4);
	
	SetSpawnInfo
	(
		playerid,
		0,
		GetPlayerSkinEx(playerid),
		spawn_pos_data[spawn_id][0], // + random(3),
		spawn_pos_data[spawn_id][1], // + random(3),
		spawn_pos_data[spawn_id][2],
		spawn_pos_data[spawn_id][3],
		0, 0, 0, 0, 0, 0
	);

	return 1;
}

stock SetHospitalSpawn(playerid)
{
    SetSpawnInfo
    (
        playerid,
        1, // Interior ID
        GetPlayerSkinEx(playerid),
        SetPlayerHealth(playerid, 15.0),
        2054.7827, 1415.1486, 998.8735, 0.0, // ??????ù ? ????
        0, 0, 0, 0, 0, 0
    );

    SetPlayerVirtualWorld(playerid, 1); // ??? ??, ?????? ???
}

stock SetPlayerSpawnPos(playerid)
{
	if(GetPlayerData(playerid, P_DMZ_STATUS) == 1)
	{
		SpawnDeathMatch(playerid);
	}
	SetPlayerSpawnSetting(playerid, 0);
	UpdatePlayerDatabaseInt(playerid, "setting_spawn", 0);
	FinalizeSpawnState(playerid);

	return 1;
}

stock SetPlayerInit(playerid)
{
	SetPlayerLevelInit(playerid);
	SetPlayerColorInit(playerid);
	SetPlayerSuspectInit(playerid);
	SetPlayerSkinInit(playerid);
	SetPlayerChatInit(playerid);
	SetPlayerMoneyInit(playerid);

    // CreateTeleportObjects(playerid);
	// CreateSpeedometr01ForPlayer(playerid);
	// CreateSpeedometr02ForPlayer(playerid);
	CreateAutoMarketForPlayer(playerid);
	// CreatePlayerGreenZoneText(playerid);
	// CreateAutoTuningForPlayer(playerid);

	SetPlayerLogged(playerid, true);
}

stock GetPlayerSkinEx(playerid)
{
	if(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)
		return GetPlayerData(playerid, P_OSKIN);
	else
		return GetPlayerData(playerid, P_SKIN);
}

stock PreLoadPlayerAnims(playerid)
{
	for(new idx; idx < sizeof g_anim_libs; idx ++)
	{
		PreloadAnimLib(playerid, g_anim_libs[idx]);
	}
}

stock PreloadAnimLib(playerid, animlib[])
{
	ApplyAnimationEx(playerid, animlib, "null", 0.0, 0, 0, 0, 0, 0, 0);
}

stock SetPlayerMoneyInit(playerid)
{
	ResetPlayerMoney(playerid);
	return GivePlayerMoney(playerid, GetPlayerMoneyEx(playerid));
}

stock SetPlayerColorInit(playerid)
{
	return SetPlayerColorEx(playerid, GetPlayerTeamColor(playerid));
}

stock SetPlayerColorEx(playerid, color)
{
	SetPlayerData(playerid, P_COLOR, color);
	return SetPlayerColor(playerid, color);
}

stock SetPlayerHealthEx(playerid, Float: health, bool: inc_health = false)
{
	if(inc_health)
	{
		AddPlayerData(playerid, P_HEALTH, +, health);
	}
	else SetPlayerData(playerid, P_HEALTH, health);

	if(GetPlayerData(playerid, P_HEALTH) > 100.0)
		SetPlayerData(playerid, P_HEALTH, 100.0);

	return SetPlayerHealth(playerid, GetPlayerData(playerid, P_HEALTH));
}

stock SetPlayerSuspectInit(playerid)
{
	return SetPlayerWantedLevel(playerid, GetPlayerSuspect(playerid));
}

stock SetPlayerSkinInit(playerid)
{
	return SetPlayerSkin(playerid, GetPlayerSkinEx(playerid));
}

stock SetPlayerLevelInit(playerid)
{
	return SetPlayerScore(playerid, GetPlayerLevel(playerid));
}

stock SetPlayerSkillsInit(playerid)
{
	SetPlayerSkillLevel(playerid, 0, GetPlayerData(playerid, P_SKILL_COLT) * 10);
	SetPlayerSkillLevel(playerid, 1, GetPlayerData(playerid, P_SKILL_SDPISTOL) * 10);
	SetPlayerSkillLevel(playerid, 2, GetPlayerData(playerid, P_SKILL_DEAGLE) * 10);
	SetPlayerSkillLevel(playerid, 3, GetPlayerData(playerid, P_SKILL_SHOTGUN) * 10);
	SetPlayerSkillLevel(playerid, 4, GetPlayerData(playerid, P_SKILL_SAWNOFF) * 10);
	SetPlayerSkillLevel(playerid, 5, GetPlayerData(playerid, P_SKILL_COMBAT_SG) * 10);
	SetPlayerSkillLevel(playerid, 6, GetPlayerData(playerid, P_SKILL_MICRO_UZI) * 10);
	SetPlayerSkillLevel(playerid, 7, GetPlayerData(playerid, P_SKILL_MP5) * 10);
	SetPlayerSkillLevel(playerid, 8, GetPlayerData(playerid, P_SKILL_AK47) * 10);
	SetPlayerSkillLevel(playerid, 9, GetPlayerData(playerid, P_SKILL_M4) * 10);
	SetPlayerSkillLevel(playerid, 10, GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE) * 10);

	return 1;
}

stock SetPlayerSelectSkin(playerid, select_skin, skinid)
{
	SetPlayerData(playerid, P_SELECT_SKIN, select_skin);
	SetPlayerSkin(playerid, skinid);
}

stock SetPlayerPosEx(playerid, Float: x, Float: y, Float: z, Float: angle, interior = -1, virtual_world = -1, freeze = true)
{
//	if(interior > 0)
//	PlayerTeleportInit(playerid, x, y,  z, angle);

	SetPlayerPos(playerid, x, y, z);

	SetPlayerFacingAngle(playerid, angle);
	SetCameraBehindPlayer(playerid);

	if(interior != -1)// && GetPlayerInterior(playerid) != interior)
	{
		SetPlayerInterior(playerid, interior);
	}
	if(virtual_world != -1)// && GetPlayerVirtualWorld(playerid) != virtual_world)
	{
		SetPlayerVirtualWorld(playerid, virtual_world);
	}
	if(GetPlayerData(playerid, P_LAST_PICKUP) != -1)
	{
		SetPlayerData(playerid, P_LAST_PICKUP, -1);
	}
	if(freeze)
    {
        TeleportFreeze(playerid, GetPlayerPing(playerid)*10);
    }
	return 1;
}

stock TeleportFreeze(playerid, ms)
{
	if(ms <= 0)
        return 0;

    TogglePlayerControllable(playerid, false);

    SetTimerEx("TeleportUnfreeze", ms, false, "d", playerid);

    return 1;
}

public: TeleportUnfreeze(playerid)
{
    TogglePlayerControllable(playerid, true);

    return 1;
}

stock JailPlayer(playerid, jail_time)
{
	new jail_pos = random(sizeof g_jail_positions);

	SetPlayerPosEx
	(
		playerid,
		g_jail_positions[jail_pos][0],
		g_jail_positions[jail_pos][1],
		g_jail_positions[jail_pos][2],
		g_jail_positions[jail_pos][3],
		1, 2
	);

	SetPlayerData(playerid, P_JAIL, jail_time * 60);
	UpdatePlayerDatabaseInt(playerid, "jail", jail_time * 60);
}

stock UnjailPlayer(playerid)
{
	SetPlayerPosEx(playerid, 2583.46, -2415.92, 21.99, 267.55, 0, 0);

	SetPlayerData(playerid, P_JAIL, 0);
	UpdatePlayerDatabaseInt(playerid, "jail", 0);
}

stock FSinJailPlayer(playerid, jail_time)
{
	new jail_pos = random(sizeof g_fjail_positions);

	SetPlayerPosEx
	(
		playerid,
		g_fjail_positions[jail_pos][0],
		g_fjail_positions[jail_pos][1],
		g_fjail_positions[jail_pos][2],
		g_fjail_positions[jail_pos][3],
		1,
		g_fjail_positions[jail_pos][4]
	);

	SetPlayerInterior(playerid, 1);

	SetPlayerData(playerid, P_FJAIL, jail_time * 60);
	UpdatePlayerDatabaseInt(playerid, "fjail", jail_time * 60);

	g_original_skin[playerid] = GetPlayerSkin(playerid);
	UpdatePlayerDatabaseInt(playerid, "skin_backup", g_original_skin[playerid]);
	SetPlayerSkin(playerid, FSIN_SKIN_ID);
}

stock FSinUnjailPlayer(playerid)
{
	SetPlayerData(playerid, P_FJAIL, 0);
	UpdatePlayerDatabaseInt(playerid, "fjail", 0);

	if (g_original_skin[playerid] > 0)
{
	SetPlayerSkin(playerid, g_original_skin[playerid]);
	UpdatePlayerDatabaseInt(playerid, "skin_backup", 0); // ???????
	g_original_skin[playerid] = -1;
}

	SetPlayerData(playerid, P_PR, 0);
	SetPlayerData(playerid, P_MR, 0);
	SetPlayerData(playerid, P_KARCER, 0);

	UpdatePlayerDatabaseInt(playerid, "pr", GetPlayerData(playerid, P_PR));
	UpdatePlayerDatabaseInt(playerid, "mr", GetPlayerData(playerid, P_MR));
	UpdatePlayerDatabaseInt(playerid, "karcer", GetPlayerData(playerid, P_KARCER));

	SetPlayerPosEx(playerid, -1807.29,-2624.50,7.68, 0, 0);
	SetPlayerVirtualWorld(playerid, 0);
	SetPlayerFacingAngle(playerid, 9.19);
}

stock UpdatePlayerDatabaseInt(playerid, field[], value)
{
	if(!IsPlayerConnected(playerid)) return 1;

	new query[256];

	mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `%s`=%d WHERE `id`=%d LIMIT 1", field, value, GetPlayerAccountID(playerid));
	mysql_query(mysql, query, false);
	return 1;
}

stock UpdatePlayerDatabaseFloat(playerid, field[], Float:value)
{
	if(!IsPlayerConnected(playerid)) return 1;

	new query[256];

	mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `%s`='%f' WHERE `id`=%d LIMIT 1", field, value, GetPlayerAccountID(playerid));
	mysql_query(mysql, query, false);
	return 1;
}

stock UpdatePlayerDatabaseString(playerid, field[], value[])
{
	if(!IsPlayerConnected(playerid)) return 1;

	new query[256];

	mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `%s`='%s' WHERE `id`=%d LIMIT 1", field, value, GetPlayerAccountID(playerid));
	mysql_query(mysql, query, false);
	return 1;
}

stock FixKick(playerid, message[] = "??????? /q (/quit) ????? ?????", time_ms = 0)
{
	if(strlen(message) > 1)
		SendClientMessage(playerid, 0xFF6600FF, message);
				
	if(time_ms == 0)
	{
		new fmt_text[65];

		format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ????????-????????", GetPlayerNameEx(playerid), playerid);
		SendMessageToAdmins(fmt_text, 0x999999FF);
	}

	SetTimerEx("FixedKick", time_ms, false, "i", playerid);

	return 1;
}

stock ClearPlayerInfo(playerid)
{
	g_player[playerid] = g_player_default_values;
	g_player_gps[playerid] = g_gps_default_values;
	g_player_setting[playerid] = g_settings_default_values;
	g_player_driving_exam[playerid] = g_driving_exam_default_values;

	g_pickup_flood[playerid] = 0;
	g_speed_line_update[playerid] = -1;
//	g_teleport_object[playerid] = {-1, -1};

	price_select_TD[playerid] = PlayerText: {-1};

	SetPlayerPhoneBookInitStatus(playerid, false);
	SetPlayerPhoneBookContacts(playerid, 0);

	ClearPlayerOffer(playerid);
	ClearPlayerListitemValues(playerid);
	ClearPlayerPhoneCall(playerid);

	AntiFloodPlayerInit(playerid);
	// ClearBankAccountsData(playerid);

//	DestroyTeleportObjects(playerid);

	SetPlayerSpectateData(playerid, S_PLAYER, -1);

	#if defined _SYSTEM_CP
	ClearPlayerCPInfo(playerid);
	#endif

	#if defined _SYSTEM_RACE_CP
	ClearPlayerRCPInfo(playerid);
	#endif

	SetPlayerPinCodeState(playerid, PIN_CODE_STATE_NONE);

	mysql_race[playerid] ++;
}

stock CreatePlayerAccount(playerid)
{
	new query[356];
	new Cache: result;

	new time = gettime();

	SetPlayerData(playerid, P_REG_TIME, time);
	SetPlayerData(playerid, P_LAST_LOGIN_TIME, time);

	format(g_player[playerid][P_REG_IP], 16, "%s", GetPlayerIpEx(playerid));
	format(g_player[playerid][P_LAST_IP], 16, "%s", GetPlayerIpEx(playerid));

	//sha 256

	for(new i; i < 10; i++)
	{
		g_player[playerid][P_SALT][i] = random(79) + 47;
	}
    g_player[playerid][P_SALT][10] = 0;

    SHA256_PassHash(CheckPass[playerid], GetPlayerData(playerid, P_SALT), GetPlayerData(playerid, P_PASSWORD), 65);//PlayerInfo[playerid][pSalt], PlayerInfo[playerid][pPassword], 65);


	mysql_format
	(
		mysql, query, sizeof query,
		"INSERT INTO accounts "\
			"(name,password,salt,email,refer,sex,reg_time,reg_ip,last_ip,last_login) "\
			"VALUES "\
			"('%e','%e','%e','%e',%d,%d,%d,'%e','%e',%d)",
		GetPlayerNameEx(playerid),
		GetPlayerData(playerid, P_PASSWORD),
		GetPlayerData(playerid, P_SALT),
		GetPlayerData(playerid, P_EMAIL),
		GetPlayerData(playerid, P_REFER),
		GetPlayerData(playerid, P_SEX),
		GetPlayerData(playerid, P_REG_TIME),
		GetPlayerData(playerid, P_REG_IP),
		GetPlayerData(playerid, P_LAST_IP),
		GetPlayerData(playerid, P_LAST_LOGIN_TIME)
	);
	result = mysql_query(mysql, query);

	print(query);

	SetPlayerData(playerid, P_ACCOUNT_ID, cache_insert_id());
	CheckPass[playerid][0] = 0;
	cache_delete(result);

	return GetPlayerAccountID(playerid);
}

stock CreateTextDraws()
{
	new playerid;
	
	enter_speedometr_TD[0] = TextDrawCreate(151.4990, 134.6741, "txd:enter_speedometr"); // ?????
	TextDrawTextSize(enter_speedometr_TD[0], 341.0000, 186.0000);
	TextDrawAlignment(enter_speedometr_TD[0], 1);
	TextDrawColor(enter_speedometr_TD[0], -1);
	TextDrawBackgroundColor(enter_speedometr_TD[0], 255);
	TextDrawFont(enter_speedometr_TD[0], 4);
	TextDrawSetProportional(enter_speedometr_TD[0], 0);
	TextDrawSetShadow(enter_speedometr_TD[0], 0);

	enter_speedometr_TD[1] = TextDrawCreate(151.4000, 162.4667, "speedometr_1"); // ?????
	TextDrawTextSize(enter_speedometr_TD[1], 169.0000, 155.0000);
	TextDrawAlignment(enter_speedometr_TD[1], 1);
	TextDrawColor(enter_speedometr_TD[1], -1);
	TextDrawBackgroundColor(enter_speedometr_TD[1], 255);
	TextDrawFont(enter_speedometr_TD[1], 4);
	TextDrawSetProportional(enter_speedometr_TD[1], 0);
	TextDrawSetShadow(enter_speedometr_TD[1], 0);
	TextDrawSetSelectable(enter_speedometr_TD[1], true);

	enter_speedometr_TD[2] = TextDrawCreate(322.7023, 161.9689, "speedometr_2"); // ?????
	TextDrawTextSize(enter_speedometr_TD[2], 169.0000, 155.0000);
	TextDrawAlignment(enter_speedometr_TD[2], 1);
	TextDrawColor(enter_speedometr_TD[2], -1);
	TextDrawBackgroundColor(enter_speedometr_TD[2], 255);
	TextDrawFont(enter_speedometr_TD[2], 4);
	TextDrawSetProportional(enter_speedometr_TD[2], 0);
	TextDrawSetShadow(enter_speedometr_TD[2], 0);
	TextDrawSetSelectable(enter_speedometr_TD[2], true);

	enter_speedometr_TD[3] = TextDrawCreate(431.3999, 294.8756, "exit"); // ?????
	TextDrawTextSize(enter_speedometr_TD[3], 61.0000, 27.0000);
	TextDrawAlignment(enter_speedometr_TD[3], 1);
	TextDrawColor(enter_speedometr_TD[3], -1);
	TextDrawBackgroundColor(enter_speedometr_TD[3], 255);
	TextDrawFont(enter_speedometr_TD[3], 4);
	TextDrawSetProportional(enter_speedometr_TD[3], 0);
	TextDrawSetShadow(enter_speedometr_TD[3], 0);
	TextDrawSetSelectable(enter_speedometr_TD[3], true);
	
	speedometr02_TD[0] = TextDrawCreate(263.3994, 351.1237, "txd:speedometr02"); // ?????
	TextDrawTextSize(speedometr02_TD[0], 111.0000, 90.0000);
	TextDrawAlignment(speedometr02_TD[0], 1);
	TextDrawColor(speedometr02_TD[0], -1);
	TextDrawBackgroundColor(speedometr02_TD[0], 255);
	TextDrawFont(speedometr02_TD[0], 4);
	TextDrawSetProportional(speedometr02_TD[0], 0);
	TextDrawSetShadow(speedometr02_TD[0], 0);
	
	speedometr_TD[0] = TextDrawCreate(248.8017, 312.7956, "txd:speedometr"); // ?????
	TextDrawTextSize(speedometr_TD[0], 142.0000, 172.0000);
	TextDrawAlignment(speedometr_TD[0], 1);
	TextDrawColor(speedometr_TD[0], -1);
	TextDrawBackgroundColor(speedometr_TD[0], 255);
	TextDrawFont(speedometr_TD[0], 4);
	TextDrawSetProportional(speedometr_TD[0], 0);
	TextDrawSetShadow(speedometr_TD[0], 0);
	
	buy_car_number_TD[0] = TextDrawCreate(-25.3997, -285.5335, "txd:buy_car_number"); // ?????
	TextDrawTextSize(buy_car_number_TD[0], 700.0000, 1017.0000);
	TextDrawAlignment(buy_car_number_TD[0], 1);
	TextDrawColor(buy_car_number_TD[0], -1);
	TextDrawBackgroundColor(buy_car_number_TD[0], 255);
	TextDrawFont(buy_car_number_TD[0], 4);
	TextDrawSetProportional(buy_car_number_TD[0], 0);
	TextDrawSetShadow(buy_car_number_TD[0], 0);
	TextDrawSetSelectable(buy_car_number_TD[0], true);

	buy_car_number_TD[1] = TextDrawCreate(383.0000, 172.4221, "txd:flag_RUS"); // ?????
	TextDrawTextSize(buy_car_number_TD[1], 91.0000, 117.0000);
	TextDrawAlignment(buy_car_number_TD[1], 1);
	TextDrawColor(buy_car_number_TD[1], -1);
	TextDrawBackgroundColor(buy_car_number_TD[1], 255);
	TextDrawFont(buy_car_number_TD[1], 4);
	TextDrawSetProportional(buy_car_number_TD[1], 0);
	TextDrawSetShadow(buy_car_number_TD[1], 0);

	buy_car_number_TD[2] = TextDrawCreate(195.0001, 372.5289, "buy_number"); // ?????
	TextDrawTextSize(buy_car_number_TD[2], 120.0000, 62.0000);
	TextDrawAlignment(buy_car_number_TD[2], 1);
	TextDrawColor(buy_car_number_TD[2], -1);
	TextDrawBackgroundColor(buy_car_number_TD[2], 255);
	TextDrawFont(buy_car_number_TD[2], 4);
	TextDrawSetProportional(buy_car_number_TD[2], 0);
	TextDrawSetShadow(buy_car_number_TD[2], 0);
	TextDrawSetSelectable(buy_car_number_TD[2], true);

	buy_car_number_TD[3] = TextDrawCreate(335.0000, 372.5289, "exit"); // ?????
	TextDrawTextSize(buy_car_number_TD[3], 117.0000, 59.0000);
	TextDrawAlignment(buy_car_number_TD[3], 1);
	TextDrawColor(buy_car_number_TD[3], -1);
	TextDrawBackgroundColor(buy_car_number_TD[3], 255);
	TextDrawFont(buy_car_number_TD[3], 4);
	TextDrawSetProportional(buy_car_number_TD[3], 0);
	TextDrawSetShadow(buy_car_number_TD[3], 0);
	TextDrawSetSelectable(buy_car_number_TD[3], true);

	buy_car_number_TD[4] = TextDrawCreate(167.3999, 167.9420, "input_number"); // ?????
	TextDrawTextSize(buy_car_number_TD[4], 213.0000, 110.0000);
	TextDrawAlignment(buy_car_number_TD[4], 1);
	TextDrawColor(buy_car_number_TD[4], -1);
	TextDrawBackgroundColor(buy_car_number_TD[4], 255);
	TextDrawFont(buy_car_number_TD[4], 4);
	TextDrawSetProportional(buy_car_number_TD[4], 0);
	TextDrawSetShadow(buy_car_number_TD[4], 0);
	TextDrawSetSelectable(buy_car_number_TD[4], true);

	buy_car_number_TD[5] = TextDrawCreate(381.3999, 167.9420, "enter_flag"); // ?????
	TextDrawTextSize(buy_car_number_TD[5], 100.0000, 108.0000);
	TextDrawAlignment(buy_car_number_TD[5], 1);
	TextDrawColor(buy_car_number_TD[5], -1);
	TextDrawBackgroundColor(buy_car_number_TD[5], 255);
	TextDrawFont(buy_car_number_TD[5], 4);
	TextDrawSetProportional(buy_car_number_TD[5], 0);
	TextDrawSetShadow(buy_car_number_TD[5], 0);
	TextDrawSetSelectable(buy_car_number_TD[5], true);

	buy_car_number_TD[6] = TextDrawCreate(1.0000, 93.2753, "enter_flag_ru"); // ?????
	TextDrawTextSize(buy_car_number_TD[6], 90.0000, 80.0000);
	TextDrawAlignment(buy_car_number_TD[6], 1);
	TextDrawColor(buy_car_number_TD[6], -1);
	TextDrawBackgroundColor(buy_car_number_TD[6], 255);
	TextDrawFont(buy_car_number_TD[6], 4);
	TextDrawSetProportional(buy_car_number_TD[6], 0);
	TextDrawSetShadow(buy_car_number_TD[6], 0);
	TextDrawSetSelectable(buy_car_number_TD[6], true);

	buy_car_number_TD[7] = TextDrawCreate(1.3997, 173.9154, "enter_flag_kz"); // ?????
	TextDrawTextSize(buy_car_number_TD[7], 89.0000, 77.0000);
	TextDrawAlignment(buy_car_number_TD[7], 1);
	TextDrawColor(buy_car_number_TD[7], -1);
	TextDrawBackgroundColor(buy_car_number_TD[7], 255);
	TextDrawFont(buy_car_number_TD[7], 4);
	TextDrawSetProportional(buy_car_number_TD[7], 0);
	TextDrawSetShadow(buy_car_number_TD[7], 0);
	TextDrawSetSelectable(buy_car_number_TD[7], true);

	buy_car_number_TD[8] = TextDrawCreate(3.3998, 253.0621, "enter_flag_by"); // ?????
	TextDrawTextSize(buy_car_number_TD[8], 89.0000, 77.0000);
	TextDrawAlignment(buy_car_number_TD[8], 1);
	TextDrawColor(buy_car_number_TD[8], -1);
	TextDrawBackgroundColor(buy_car_number_TD[8], 255);
	TextDrawFont(buy_car_number_TD[8], 4);
	TextDrawSetProportional(buy_car_number_TD[8], 0);
	TextDrawSetShadow(buy_car_number_TD[8], 0);
	TextDrawSetSelectable(buy_car_number_TD[8], true);

	buy_car_number_TD[9] = TextDrawCreate(1.3997, 336.6889, "enter_flag_ua"); // ?????
	TextDrawTextSize(buy_car_number_TD[9], 90.0000, 90.0000);
	TextDrawAlignment(buy_car_number_TD[9], 1);
	TextDrawColor(buy_car_number_TD[9], -1);
	TextDrawBackgroundColor(buy_car_number_TD[9], 255);
	TextDrawFont(buy_car_number_TD[9], 4);
	TextDrawSetProportional(buy_car_number_TD[9], 0);
	TextDrawSetShadow(buy_car_number_TD[9], 0);
	TextDrawSetSelectable(buy_car_number_TD[9], true);

	buy_car_number_TD[10] = TextDrawCreate(383.0000, 172.4221, "txd:flag_KZ"); // ?????
	TextDrawTextSize(buy_car_number_TD[10], 91.0000, 117.0000);
	TextDrawAlignment(buy_car_number_TD[10], 1);
	TextDrawColor(buy_car_number_TD[10], -1);
	TextDrawBackgroundColor(buy_car_number_TD[10], 255);
	TextDrawFont(buy_car_number_TD[10], 4);
	TextDrawSetProportional(buy_car_number_TD[10], 0);
	TextDrawSetShadow(buy_car_number_TD[10], 0);

	buy_car_number_TD[12] = TextDrawCreate(383.0000, 172.4221, "txd:flag_UA"); // ?????
	TextDrawLetterSize(buy_car_number_TD[12], 91.0000, 117.0000);
	TextDrawAlignment(buy_car_number_TD[12], 1);
	TextDrawColor(buy_car_number_TD[12], -1);
	TextDrawBackgroundColor(buy_car_number_TD[12], 255);
	TextDrawFont(buy_car_number_TD[12], 4);
	TextDrawSetProportional(buy_car_number_TD[12], 0);
	TextDrawSetShadow(buy_car_number_TD[12], 0);

	buy_car_number_TD[13] = TextDrawCreate(383.0000, 172.4221, "txd:flag_BY"); // ?????
	TextDrawTextSize(buy_car_number_TD[13], 91.0000, 117.0000);
	TextDrawAlignment(buy_car_number_TD[13], 1);
	TextDrawColor(buy_car_number_TD[13], -1);
	TextDrawBackgroundColor(buy_car_number_TD[13], 255);
	TextDrawFont(buy_car_number_TD[13], 4);
	TextDrawSetProportional(buy_car_number_TD[13], 0);
	TextDrawSetShadow(buy_car_number_TD[13], 0);

	buy_car_number_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 214.3997, 197.4667, ""); // ?????
	PlayerTextDrawLetterSize(playerid, buy_car_number_PTD[playerid][0], 1.0231, 5.7761);
	PlayerTextDrawAlignment(playerid, buy_car_number_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, buy_car_number_PTD[playerid][0], -1378294017);
	PlayerTextDrawBackgroundColor(playerid, buy_car_number_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, buy_car_number_PTD[playerid][0], 3);
	PlayerTextDrawSetProportional(playerid, buy_car_number_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, buy_car_number_PTD[playerid][0], 0);

	buy_car_number_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 585.2005, 203.9378, ""); // ?????
	PlayerTextDrawLetterSize(playerid, buy_car_number_PTD[playerid][1], 0.4338, 2.0878);
	PlayerTextDrawAlignment(playerid, buy_car_number_PTD[playerid][1], 1);
	PlayerTextDrawColor(playerid, buy_car_number_PTD[playerid][1], 16711935);
	PlayerTextDrawBackgroundColor(playerid, buy_car_number_PTD[playerid][1], 255);
	PlayerTextDrawFont(playerid, buy_car_number_PTD[playerid][1], 1);
	PlayerTextDrawSetProportional(playerid, buy_car_number_PTD[playerid][1], 1);
	PlayerTextDrawSetShadow(playerid, buy_car_number_PTD[playerid][1], 0);
	
	shop_clothes_TD[0] = TextDrawCreate(8.6000, 120.1555, "txd:shop_clothes_buy_and_exit"); // ?????
	TextDrawTextSize(shop_clothes_TD[0], 184.0000, 225.0000);
	TextDrawAlignment(shop_clothes_TD[0], 1);
	TextDrawColor(shop_clothes_TD[0], -1);
	TextDrawBackgroundColor(shop_clothes_TD[0], 255);
	TextDrawFont(shop_clothes_TD[0], 4);
	TextDrawSetProportional(shop_clothes_TD[0], 0);
	TextDrawSetShadow(shop_clothes_TD[0], 0);

	shop_clothes_TD[1] = TextDrawCreate(372.6001, 358.5910, "next"); // ?????
	TextDrawTextSize(shop_clothes_TD[1], 83.0000, 40.0000);
	TextDrawAlignment(shop_clothes_TD[1], 1);
	TextDrawColor(shop_clothes_TD[1], -1);
	TextDrawBackgroundColor(shop_clothes_TD[1], 255);
	TextDrawFont(shop_clothes_TD[1], 4);
	TextDrawSetProportional(shop_clothes_TD[1], 0);
	TextDrawSetShadow(shop_clothes_TD[1], 0);
	TextDrawSetSelectable(shop_clothes_TD[1], true);

	shop_clothes_TD[2] = TextDrawCreate(181.0001, 359.0888, "back"); // ?????
	TextDrawTextSize(shop_clothes_TD[2], 84.0000, 40.0000);
	TextDrawAlignment(shop_clothes_TD[2], 1);
	TextDrawColor(shop_clothes_TD[2], -1);
	TextDrawBackgroundColor(shop_clothes_TD[2], 255);
	TextDrawFont(shop_clothes_TD[2], 4);
	TextDrawSetProportional(shop_clothes_TD[2], 0);
	TextDrawSetShadow(shop_clothes_TD[2], 0);
	TextDrawSetSelectable(shop_clothes_TD[2], true);

	shop_clothes_TD[3] = TextDrawCreate(12.2000, 253.0623, "buy"); // ?????
	TextDrawTextSize(shop_clothes_TD[3], 79.0000, 37.0000);
	TextDrawAlignment(shop_clothes_TD[3], 1);
	TextDrawColor(shop_clothes_TD[3], -1);
	TextDrawBackgroundColor(shop_clothes_TD[3], 255);
	TextDrawFont(shop_clothes_TD[3], 4);
	TextDrawSetProportional(shop_clothes_TD[3], 0);
	TextDrawSetShadow(shop_clothes_TD[3], 0);
	TextDrawSetSelectable(shop_clothes_TD[3], true);

	shop_clothes_TD[4] = TextDrawCreate(109.7999, 254.0577, "exit"); // ?????
	TextDrawTextSize(shop_clothes_TD[4], 78.0000, 34.0000);
	TextDrawAlignment(shop_clothes_TD[4], 1);
	TextDrawColor(shop_clothes_TD[4], -1);
	TextDrawBackgroundColor(shop_clothes_TD[4], 255);
	TextDrawFont(shop_clothes_TD[4], 4);
	TextDrawSetProportional(shop_clothes_TD[4], 0);
	TextDrawSetShadow(shop_clothes_TD[4], 0);
	TextDrawSetSelectable(shop_clothes_TD[4], true);
	
	shop_clothes_TD[5] = TextDrawCreate(168.5998, 182.8753, "txd:shop_clothes_next_and_back"); // ?????
	TextDrawTextSize(shop_clothes_TD[5], 301.0000, 394.0000);
	TextDrawAlignment(shop_clothes_TD[5], 1);
	TextDrawColor(shop_clothes_TD[5], -1);
	TextDrawBackgroundColor(shop_clothes_TD[5], 255);
	TextDrawFont(shop_clothes_TD[5], 4);
	TextDrawSetProportional(shop_clothes_TD[5], 0);
	TextDrawSetShadow(shop_clothes_TD[5], 0);


	business_menu_TD[0] = TextDrawCreate(124.2000, -35.6488, "txd:business_menu"); // ?????
	TextDrawTextSize(business_menu_TD[0], 392.0000, 514.0000);
	TextDrawAlignment(business_menu_TD[0], 1);
	TextDrawColor(business_menu_TD[0], -1);
	TextDrawBackgroundColor(business_menu_TD[0], 255);
	TextDrawFont(business_menu_TD[0], 4);
	TextDrawSetProportional(business_menu_TD[0], 0);
	TextDrawSetShadow(business_menu_TD[0], 0);

	business_menu_TD[1] = TextDrawCreate(327.3999, 134.5911, "Business_Menu"); // ?????
	TextDrawTextSize(business_menu_TD[1], 168.0000, 88.0000);
	TextDrawAlignment(business_menu_TD[1], 1);
	TextDrawColor(business_menu_TD[1], -1);
	TextDrawBackgroundColor(business_menu_TD[1], 255);
	TextDrawFont(business_menu_TD[1], 4);
	TextDrawSetProportional(business_menu_TD[1], 0);
	TextDrawSetShadow(business_menu_TD[1], 0);
	TextDrawSetSelectable(business_menu_TD[1], true);

	business_menu_TD[2] = TextDrawCreate(327.7998, 228.1734, "Business_Finka"); // ?????
	TextDrawTextSize(business_menu_TD[2], 168.0000, 88.0000);
	TextDrawAlignment(business_menu_TD[2], 1);
	TextDrawColor(business_menu_TD[2], -1);
	TextDrawBackgroundColor(business_menu_TD[2], 255);
	TextDrawFont(business_menu_TD[2], 4);
	TextDrawSetProportional(business_menu_TD[2], 0);
	TextDrawSetShadow(business_menu_TD[2], 0);
	TextDrawSetSelectable(business_menu_TD[2], true);

	business_menu_TD[3] = TextDrawCreate(439.0000, 328.2268, "Business_menu_exit"); // ?????
	TextDrawTextSize(business_menu_TD[3], 66.0000, 30.0000);
	TextDrawAlignment(business_menu_TD[3], 1);
	TextDrawColor(business_menu_TD[3], -1);
	TextDrawBackgroundColor(business_menu_TD[3], 255);
	TextDrawFont(business_menu_TD[3], 4);
	TextDrawSetProportional(business_menu_TD[3], 0);
	TextDrawSetShadow(business_menu_TD[3], 0);
	TextDrawSetSelectable(business_menu_TD[3], true);

	business_menu_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 205.1999, 144.7021, "Business_Name"); // ?????
	PlayerTextDrawLetterSize(playerid, business_menu_PTD[playerid][0], 0.2031, 1.2167);
	PlayerTextDrawAlignment(playerid, business_menu_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, business_menu_PTD[playerid][0], -16776961);
	PlayerTextDrawBackgroundColor(playerid, business_menu_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, business_menu_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, business_menu_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, business_menu_PTD[playerid][0], 0);

	business_menu_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 205.1999, 189.5022, "Jackson_Vendetta"); // ?????
	PlayerTextDrawLetterSize(playerid, business_menu_PTD[playerid][1], 0.1951, 1.4257);
	PlayerTextDrawAlignment(playerid, business_menu_PTD[playerid][1], 1);
	PlayerTextDrawColor(playerid, business_menu_PTD[playerid][1], -16776961);
	PlayerTextDrawBackgroundColor(playerid, business_menu_PTD[playerid][1], 255);
	PlayerTextDrawFont(playerid, business_menu_PTD[playerid][1], 1);
	PlayerTextDrawSetProportional(playerid, business_menu_PTD[playerid][1], 1);
	PlayerTextDrawSetShadow(playerid, business_menu_PTD[playerid][1], 0);

	business_menu_PTD[playerid][2] = CreatePlayerTextDraw(playerid, 206.4000, 235.2977, "100000000$"); // ?????
	PlayerTextDrawLetterSize(playerid, business_menu_PTD[playerid][2], 0.2627, 1.5552);
	PlayerTextDrawAlignment(playerid, business_menu_PTD[playerid][2], 1);
	PlayerTextDrawColor(playerid, business_menu_PTD[playerid][2], 8388863);
	PlayerTextDrawBackgroundColor(playerid, business_menu_PTD[playerid][2], 255);
	PlayerTextDrawFont(playerid, business_menu_PTD[playerid][2], 1);
	PlayerTextDrawSetProportional(playerid, business_menu_PTD[playerid][2], 1);
	PlayerTextDrawSetShadow(playerid, business_menu_PTD[playerid][2], 0);

	business_menu_PTD[playerid][3] = CreatePlayerTextDraw(playerid, 209.1999, 282.5866, "50000$"); // ?????
	PlayerTextDrawLetterSize(playerid, business_menu_PTD[playerid][3], 0.2643, 1.4855);
	PlayerTextDrawAlignment(playerid, business_menu_PTD[playerid][3], 1);
	PlayerTextDrawColor(playerid, business_menu_PTD[playerid][3], 8388863);
	PlayerTextDrawBackgroundColor(playerid, business_menu_PTD[playerid][3], 255);
	PlayerTextDrawFont(playerid, business_menu_PTD[playerid][3], 1);
	PlayerTextDrawSetProportional(playerid, business_menu_PTD[playerid][3], 1);
	PlayerTextDrawSetShadow(playerid, business_menu_PTD[playerid][3], 0);

	autosalon_color_TD[0] = TextDrawCreate(444.9995, 116.1733, "txd:autosalon_color"); // ?????
	TextDrawTextSize(autosalon_color_TD[0], 189.0000, 238.0000);
	TextDrawAlignment(autosalon_color_TD[0], 1);
	TextDrawColor(autosalon_color_TD[0], -1);
	TextDrawBackgroundColor(autosalon_color_TD[0], 255);
	TextDrawFont(autosalon_color_TD[0], 4);
	TextDrawSetProportional(autosalon_color_TD[0], 0);
	TextDrawSetShadow(autosalon_color_TD[0], 0);

	autosalon_color_TD[1] = TextDrawCreate(464.9999, 201.7911, "color_1"); // ?????
	TextDrawTextSize(autosalon_color_TD[1], 26.0000, 31.0000);
	TextDrawAlignment(autosalon_color_TD[1], 1);
	TextDrawColor(autosalon_color_TD[1], -1);
	TextDrawBackgroundColor(autosalon_color_TD[1], 255);
	TextDrawFont(autosalon_color_TD[1], 4);
	TextDrawSetProportional(autosalon_color_TD[1], 0);
	TextDrawSetShadow(autosalon_color_TD[1], 0);
	TextDrawSetSelectable(autosalon_color_TD[1], true);

	autosalon_color_TD[2] = TextDrawCreate(506.1998, 202.2889, "color_2"); // ?????
	TextDrawTextSize(autosalon_color_TD[2], 26.0000, 31.0000);
	TextDrawAlignment(autosalon_color_TD[2], 1);
	TextDrawColor(autosalon_color_TD[2], -1);
	TextDrawBackgroundColor(autosalon_color_TD[2], 255);
	TextDrawFont(autosalon_color_TD[2], 4);
	TextDrawSetProportional(autosalon_color_TD[2], 0);
	TextDrawSetShadow(autosalon_color_TD[2], 0);
	TextDrawSetSelectable(autosalon_color_TD[2], true);

	autosalon_color_TD[3] = TextDrawCreate(546.5999, 201.7911, "color_3"); // ?????
	TextDrawTextSize(autosalon_color_TD[3], 26.0000, 31.0000);
	TextDrawAlignment(autosalon_color_TD[3], 1);
	TextDrawColor(autosalon_color_TD[3], -1);
	TextDrawBackgroundColor(autosalon_color_TD[3], 255);
	TextDrawFont(autosalon_color_TD[3], 4);
	TextDrawSetProportional(autosalon_color_TD[3], 0);
	TextDrawSetShadow(autosalon_color_TD[3], 0);
	TextDrawSetSelectable(autosalon_color_TD[3], true);

	autosalon_color_TD[4] = TextDrawCreate(587.7998, 202.2889, "color_4"); // ?????
	TextDrawTextSize(autosalon_color_TD[4], 26.0000, 31.0000);
	TextDrawAlignment(autosalon_color_TD[4], 1);
	TextDrawColor(autosalon_color_TD[4], -1);
	TextDrawBackgroundColor(autosalon_color_TD[4], 255);
	TextDrawFont(autosalon_color_TD[4], 4);
	TextDrawSetProportional(autosalon_color_TD[4], 0);
	TextDrawSetShadow(autosalon_color_TD[4], 0);
	TextDrawSetSelectable(autosalon_color_TD[4], true);

	autosalon_color_TD[5] = TextDrawCreate(464.9998, 254.5556, "color_5"); // ?????
	TextDrawTextSize(autosalon_color_TD[5], 26.0000, 31.0000);
	TextDrawAlignment(autosalon_color_TD[5], 1);
	TextDrawColor(autosalon_color_TD[5], -1);
	TextDrawBackgroundColor(autosalon_color_TD[5], 255);
	TextDrawFont(autosalon_color_TD[5], 4);
	TextDrawSetProportional(autosalon_color_TD[5], 0);
	TextDrawSetShadow(autosalon_color_TD[5], 0);
	TextDrawSetSelectable(autosalon_color_TD[5], true);

	autosalon_color_TD[6] = TextDrawCreate(506.1997, 253.0622, "color_6"); // ?????
	TextDrawTextSize(autosalon_color_TD[6], 26.0000, 31.0000);
	TextDrawAlignment(autosalon_color_TD[6], 1);
	TextDrawColor(autosalon_color_TD[6], -1);
	TextDrawBackgroundColor(autosalon_color_TD[6], 255);
	TextDrawFont(autosalon_color_TD[6], 4);
	TextDrawSetProportional(autosalon_color_TD[6], 0);
	TextDrawSetShadow(autosalon_color_TD[6], 0);
	TextDrawSetSelectable(autosalon_color_TD[6], true);

	autosalon_color_TD[7] = TextDrawCreate(546.5999, 252.5645, "color_7"); // ?????
	TextDrawTextSize(autosalon_color_TD[7], 26.0000, 31.0000);
	TextDrawAlignment(autosalon_color_TD[7], 1);
	TextDrawColor(autosalon_color_TD[7], -1);
	TextDrawBackgroundColor(autosalon_color_TD[7], 255);
	TextDrawFont(autosalon_color_TD[7], 4);
	TextDrawSetProportional(autosalon_color_TD[7], 0);
	TextDrawSetShadow(autosalon_color_TD[7], 0);
	TextDrawSetSelectable(autosalon_color_TD[7], true);

	autosalon_color_TD[8] = TextDrawCreate(587.8002, 253.5600, "color_8"); // ?????
	TextDrawTextSize(autosalon_color_TD[8], 26.0000, 31.0000);
	TextDrawAlignment(autosalon_color_TD[8], 1);
	TextDrawColor(autosalon_color_TD[8], -1);
	TextDrawBackgroundColor(autosalon_color_TD[8], 255);
	TextDrawFont(autosalon_color_TD[8], 4);
	TextDrawSetProportional(autosalon_color_TD[8], 0);
	TextDrawSetShadow(autosalon_color_TD[8], 0);
	TextDrawSetSelectable(autosalon_color_TD[8], true);

	autosalon_select_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 297.1998, 399.5642, "BMW_X5"); // ?????
	PlayerTextDrawLetterSize(playerid, autosalon_select_PTD[playerid][0], 0.3619, 1.2017);
	PlayerTextDrawAlignment(playerid, autosalon_select_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, autosalon_select_PTD[playerid][0], -2139062017);
	PlayerTextDrawBackgroundColor(playerid, autosalon_select_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, autosalon_select_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, autosalon_select_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, autosalon_select_PTD[playerid][0], 0);

    autosalon_price_TD[0] = TextDrawCreate(13.3999, 119.6577, "txd:autosalon_price"); // ?????
	TextDrawTextSize(autosalon_price_TD[0], 209.0000, 238.0000);
	TextDrawAlignment(autosalon_price_TD[0], 1);
	TextDrawColor(autosalon_price_TD[0], -1);
	TextDrawBackgroundColor(autosalon_price_TD[0], 255);
	TextDrawFont(autosalon_price_TD[0], 4);
	TextDrawSetProportional(autosalon_price_TD[0], 0);
	TextDrawSetShadow(autosalon_price_TD[0], 0);

	autosalon_price_TD[1] = TextDrawCreate(28.9999, 258.5378, "autosalon_buy"); // ?????
	TextDrawTextSize(autosalon_price_TD[1], 80.0000, 34.0000);
	TextDrawAlignment(autosalon_price_TD[1], 1);
	TextDrawColor(autosalon_price_TD[1], -1);
	TextDrawBackgroundColor(autosalon_price_TD[1], 255);
	TextDrawFont(autosalon_price_TD[1], 4);
	TextDrawSetProportional(autosalon_price_TD[1], 0);
	TextDrawSetShadow(autosalon_price_TD[1], 0);
	TextDrawSetSelectable(autosalon_price_TD[1], true);

	autosalon_price_TD[2] = TextDrawCreate(126.5999, 258.5378, "autosalon_exit"); // ?????
	TextDrawTextSize(autosalon_price_TD[2], 80.0000, 34.0000);
	TextDrawAlignment(autosalon_price_TD[2], 1);
	TextDrawColor(autosalon_price_TD[2], -1);
	TextDrawBackgroundColor(autosalon_price_TD[2], 255);
	TextDrawFont(autosalon_price_TD[2], 4);
	TextDrawSetProportional(autosalon_price_TD[2], 0);
	TextDrawSetShadow(autosalon_price_TD[2], 0);
	TextDrawSetSelectable(autosalon_price_TD[2], true);

	autosalon_price_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 89.6000, 214.3911, "25000000_P"); // ?????
	PlayerTextDrawLetterSize(playerid, autosalon_price_PTD[playerid][0], 0.3615, 1.4805);
	PlayerTextDrawTextSize(playerid, autosalon_price_PTD[playerid][0], -20.0000, 0.0000);
	PlayerTextDrawAlignment(playerid, autosalon_price_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, autosalon_price_PTD[playerid][0], 8388863);
	PlayerTextDrawBackgroundColor(playerid, autosalon_price_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, autosalon_price_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, autosalon_price_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, autosalon_price_PTD[playerid][0], 0);

    autosalon_select_TD[0] = TextDrawCreate(180.9997, 227.6753, "txd:autosalon_input"); // ?????
	TextDrawTextSize(autosalon_select_TD[0], 278.0000, 338.0000);
	TextDrawAlignment(autosalon_select_TD[0], 1);
	TextDrawColor(autosalon_select_TD[0], -1);
	TextDrawBackgroundColor(autosalon_select_TD[0], 255);
	TextDrawFont(autosalon_select_TD[0], 4);
	TextDrawSetProportional(autosalon_select_TD[0], 0);
	TextDrawSetShadow(autosalon_select_TD[0], 0);

	autosalon_select_TD[1] = TextDrawCreate(192.2000, 370.0401, "input_1"); // ?????
	TextDrawTextSize(autosalon_select_TD[1], 42.0000, 53.0000);
	TextDrawAlignment(autosalon_select_TD[1], 1);
	TextDrawColor(autosalon_select_TD[1], -1);
	TextDrawBackgroundColor(autosalon_select_TD[1], 255);
	TextDrawFont(autosalon_select_TD[1], 4);
	TextDrawSetProportional(autosalon_select_TD[1], 0);
	TextDrawSetShadow(autosalon_select_TD[1], 0);
	TextDrawSetSelectable(autosalon_select_TD[1], true);

	autosalon_select_TD[2] = TextDrawCreate(406.2001, 368.5469, "input_2"); // ?????
	TextDrawTextSize(autosalon_select_TD[2], 42.0000, 53.0000);
	TextDrawAlignment(autosalon_select_TD[2], 1);
	TextDrawColor(autosalon_select_TD[2], -1);
	TextDrawBackgroundColor(autosalon_select_TD[2], 255);
	TextDrawFont(autosalon_select_TD[2], 4);
	TextDrawSetProportional(autosalon_select_TD[2], 0);
	TextDrawSetShadow(autosalon_select_TD[2], 0);
	TextDrawSetSelectable(autosalon_select_TD[2], true);

	gps_on_TD[0] = TextDrawCreate(485.3998, 94.2711, "txd:gps_on"); // ?????
	TextDrawTextSize(gps_on_TD[0], 146.0000, 193.0000);
	TextDrawAlignment(gps_on_TD[0], 1);
	TextDrawColor(gps_on_TD[0], -1);
	TextDrawBackgroundColor(gps_on_TD[0], 255);
	TextDrawFont(gps_on_TD[0], 4);
	TextDrawSetProportional(gps_on_TD[0], 0);
	TextDrawSetShadow(gps_on_TD[0], 0);

	stop_anim_TD[0] = TextDrawCreate(263.3999, 347.1419, "txd:stop_anim"); // ?????
	TextDrawTextSize(stop_anim_TD[0], 114.0000, 154.0000);
	TextDrawAlignment(stop_anim_TD[0], 1);
	TextDrawColor(stop_anim_TD[0], -1);
	TextDrawBackgroundColor(stop_anim_TD[0], 255);
	TextDrawFont(stop_anim_TD[0], 4);
	TextDrawSetProportional(stop_anim_TD[0], 0);
	TextDrawSetShadow(stop_anim_TD[0], 0);
	TextDrawSetSelectable(stop_anim_TD[0], true);

	select_TD[0] = TextDrawCreate(229.575424, 395.499969, "<<");
	TextDrawLetterSize(select_TD[0], 0.449999, 1.600000);
	TextDrawTextSize(select_TD[0], 229.000 + 20, 18.000);
	TextDrawAlignment(select_TD[0], 1);
	TextDrawColor(select_TD[0], -1);
	TextDrawSetShadow(select_TD[0], 0);
	TextDrawSetOutline(select_TD[0], 1);
	TextDrawBackgroundColor(select_TD[0], 51);
	TextDrawFont(select_TD[0], 1);
	TextDrawSetProportional(select_TD[0], 1);
	TextDrawSetSelectable(select_TD[0], true);

	select_TD[1] = TextDrawCreate(407.613922, 395.499969, ">>");
	TextDrawLetterSize(select_TD[1], 0.449999, 1.600000);
	TextDrawTextSize(select_TD[1], 407.000 + 20, 18.000);
	TextDrawAlignment(select_TD[1], 3);
	TextDrawColor(select_TD[1], -1);
	TextDrawSetShadow(select_TD[1], 0);
	TextDrawSetOutline(select_TD[1], 1);
	TextDrawBackgroundColor(select_TD[1], 51);
	TextDrawFont(select_TD[1], 3);
	TextDrawSetProportional(select_TD[1], 1);
	TextDrawSetSelectable(select_TD[1], true);

	select_TD[2] = TextDrawCreate(285.798065, 395.499969, "SELECT");
	TextDrawLetterSize(select_TD[2], 0.449999, 1.600000);
	TextDrawTextSize(select_TD[2], 285.000 + 65, 14.000);
	TextDrawAlignment(select_TD[2], 1);
	TextDrawColor(select_TD[2], -1);
	TextDrawSetShadow(select_TD[2], 0);
	TextDrawSetOutline(select_TD[2], 1);
	TextDrawBackgroundColor(select_TD[2], 51);
	TextDrawFont(select_TD[2], 2);
	TextDrawSetProportional(select_TD[2], 1);
	TextDrawSetSelectable(select_TD[2], true);

	select_TD[3] = TextDrawCreate(585.182983, 159.250045, "EXIT");
	TextDrawLetterSize(select_TD[3], 0.449999, 1.600000);
	TextDrawTextSize(select_TD[3], 585.000 + 30, 14.000);
	TextDrawAlignment(select_TD[3], 1);
	TextDrawColor(select_TD[3], -16776961);
	TextDrawSetShadow(select_TD[3], 0);
	TextDrawSetOutline(select_TD[3], 1);
	TextDrawBackgroundColor(select_TD[3], 51);
	TextDrawFont(select_TD[3], 2);
	TextDrawSetProportional(select_TD[3], 1);
	TextDrawSetSelectable(select_TD[3], true);

	select_TD[4] = TextDrawCreate(630.755493, 158.416656, "usebox");
	TextDrawLetterSize(select_TD[4], 0.000000, 1.498149);
	TextDrawTextSize(select_TD[4], 578.497802, 0.000000);
	TextDrawAlignment(select_TD[4], 1);
	TextDrawColor(select_TD[4], 0);
	TextDrawUseBox(select_TD[4], true);
	TextDrawBoxColor(select_TD[4], 102);
	TextDrawSetShadow(select_TD[4], 0);
	TextDrawSetOutline(select_TD[4], 0);
	TextDrawFont(select_TD[4], 0);

	select_TD[5] = TextDrawCreate(229.701324, 401.083312, "usebox");
	TextDrawLetterSize(select_TD[5], 0.000000, 0.201854);
	TextDrawTextSize(select_TD[5], 406.082000, 0.000000);
	TextDrawAlignment(select_TD[5], 1);
	TextDrawColor(select_TD[5], 0);
	TextDrawUseBox(select_TD[5], true);
	TextDrawBoxColor(select_TD[5], 102);
	TextDrawSetShadow(select_TD[5], 0);
	TextDrawSetOutline(select_TD[5], 0);
	TextDrawFont(select_TD[5], 0);
//

	buy_car_TD[0] = TextDrawCreate(626.000000, 134.406661, "usebox");
	TextDrawLetterSize(buy_car_TD[0], 0.110399, 9.810622);
	TextDrawTextSize(buy_car_TD[0], 442.000000, 0.000000);
	TextDrawAlignment(buy_car_TD[0], 1);
	TextDrawColor(buy_car_TD[0], 0);
	TextDrawUseBox(buy_car_TD[0], true);
	TextDrawBoxColor(buy_car_TD[0], 102);
	TextDrawSetShadow(buy_car_TD[0], 0);
	TextDrawSetOutline(buy_car_TD[0], 0);
	TextDrawFont(buy_car_TD[0], 0);

	buy_car_TD[1] = TextDrawCreate(626.000000, 226.406677, "usebox");
	TextDrawLetterSize(buy_car_TD[1], 0.110399, 6.765620);
	TextDrawTextSize(buy_car_TD[1], 442.000000, 0.000000);
	TextDrawAlignment(buy_car_TD[1], 1);
	TextDrawColor(buy_car_TD[1], 0);
	TextDrawUseBox(buy_car_TD[1], true);
	TextDrawBoxColor(buy_car_TD[1], 102);
	TextDrawSetShadow(buy_car_TD[1], 0);
	TextDrawSetOutline(buy_car_TD[1], 0);
	TextDrawFont(buy_car_TD[1], 0);

	capture_TD[0] = TextDrawCreate(170.444442, 260.842224, "usebox");
	TextDrawLetterSize(capture_TD[0], 0.000000, 4.293703);
	TextDrawTextSize(capture_TD[0], -0.222222, 0.000000);
	TextDrawAlignment(capture_TD[0], 1);
	TextDrawColor(capture_TD[0], 0);
	TextDrawUseBox(capture_TD[0], true);
	TextDrawBoxColor(capture_TD[0], 102);
	TextDrawSetShadow(capture_TD[0], 0);
	TextDrawSetOutline(capture_TD[0], 0);
	TextDrawFont(capture_TD[0], 0);

	capture_TD[1] = TextDrawCreate(3.555550, 260.337829, "_");
	TextDrawLetterSize(capture_TD[1], 0.410000, 1.380977);
	TextDrawAlignment(capture_TD[1], 1);
	TextDrawColor(capture_TD[1], 13369599);
	TextDrawSetShadow(capture_TD[1], 0);
	TextDrawSetOutline(capture_TD[1], 1);
	TextDrawBackgroundColor(capture_TD[1], 255);
	TextDrawFont(capture_TD[1], 1);
	TextDrawSetProportional(capture_TD[1], 1);

	green_zone_TD[0] = TextDrawCreate(4.6000, 187.8533, "txd:green_zone"); // ?????
	TextDrawTextSize(green_zone_TD[0], 143.0000, 174.0000);
	TextDrawAlignment(green_zone_TD[0], 1);
	TextDrawColor(green_zone_TD[0], -1);
	TextDrawBackgroundColor(green_zone_TD[0], 255);
	TextDrawFont(green_zone_TD[0], 4);
	TextDrawSetProportional(green_zone_TD[0], 0);
	TextDrawSetShadow(green_zone_TD[0], 0);

	radio_edit_TD = TextDrawCreate(9.838958, 385.000122, "_");
	TextDrawLetterSize(radio_edit_TD, 0.362385, 1.605833);
	TextDrawTextSize(radio_edit_TD, -0.468522, -161.583328);
	TextDrawAlignment(radio_edit_TD, 1);
	TextDrawColor(radio_edit_TD, -1);
	TextDrawSetShadow(radio_edit_TD, 0);
	TextDrawSetOutline(radio_edit_TD, 1);
	TextDrawBackgroundColor(radio_edit_TD, 255);
	TextDrawFont(radio_edit_TD, 1);
	TextDrawSetProportional(radio_edit_TD, 1);

	change_color_TD[0] = TextDrawCreate(434.889099, 332.522338, "usebox");
	TextDrawLetterSize(change_color_TD[0], 0.000000, 9.385062);
	TextDrawTextSize(change_color_TD[0], 207.777801, 0.000000);
	TextDrawAlignment(change_color_TD[0], 1);
	TextDrawColor(change_color_TD[0], 0);
	TextDrawUseBox(change_color_TD[0], true);
	TextDrawBoxColor(change_color_TD[0], 102);
	TextDrawSetShadow(change_color_TD[0], 0);
	TextDrawSetOutline(change_color_TD[0], 0);
	TextDrawFont(change_color_TD[0], 0);

	change_color_TD[1] = TextDrawCreate(434.000000, 333.517761, "usebox");
	TextDrawLetterSize(change_color_TD[1], 0.000000, 1.121358);
	TextDrawTextSize(change_color_TD[1], 208.666671, 0.000000);
	TextDrawAlignment(change_color_TD[1], 1);
	TextDrawColor(change_color_TD[1], 0);
	TextDrawUseBox(change_color_TD[1], true);
	TextDrawBoxColor(change_color_TD[1], 865730389);
	TextDrawSetShadow(change_color_TD[1], 0);
	TextDrawSetOutline(change_color_TD[1], 0);
	TextDrawFont(change_color_TD[1], 0);

	change_color_TD[2] = TextDrawCreate(322.222564, 333.511169, "?????????? ??????????");
	TextDrawLetterSize(change_color_TD[2], 0.219777, 1.077329);
	TextDrawAlignment(change_color_TD[2], 2);
	TextDrawColor(change_color_TD[2], -1);
	TextDrawSetShadow(change_color_TD[2], 1);
	TextDrawSetOutline(change_color_TD[2], 0);
	TextDrawBackgroundColor(change_color_TD[2], 51);
	TextDrawFont(change_color_TD[2], 2);
	TextDrawSetProportional(change_color_TD[2], 1);

	change_color_TD[3] = TextDrawCreate(321.778656, 402.717987, "usebox");
	TextDrawLetterSize(change_color_TD[3], 0.000000, 1.453209);
	TextDrawTextSize(change_color_TD[3], 208.666885, 0.000000);
	TextDrawAlignment(change_color_TD[3], 1);
	TextDrawColor(change_color_TD[3], 0);
	TextDrawUseBox(change_color_TD[3], true);
	TextDrawBoxColor(change_color_TD[3], 1724658517);
	TextDrawSetShadow(change_color_TD[3], 0);
	TextDrawSetOutline(change_color_TD[3], 0);
	TextDrawBackgroundColor(change_color_TD[3], 1714657791);
	TextDrawFont(change_color_TD[3], 0);
	TextDrawSetSelectable(change_color_TD[3], true);

	change_color_TD[4] = TextDrawCreate(433.889801, 402.722534, "usebox");
	TextDrawLetterSize(change_color_TD[4], 0.000000, 1.453209);
	TextDrawTextSize(change_color_TD[4], 319.333526, 0.000000);
	TextDrawAlignment(change_color_TD[4], 1);
	TextDrawColor(change_color_TD[4], 0);
	TextDrawUseBox(change_color_TD[4], true);
	TextDrawBoxColor(change_color_TD[4], -11193515);
	TextDrawSetShadow(change_color_TD[4], 0);
	TextDrawSetOutline(change_color_TD[4], 0);
	TextDrawFont(change_color_TD[4], 0);
	TextDrawSetSelectable(change_color_TD[4], true);

	change_color_TD[5] = TextDrawCreate(265.110870, 404.222503, "???????");
	TextDrawLetterSize(change_color_TD[5], 0.222444, 1.052441);
	TextDrawAlignment(change_color_TD[5], 2);
	TextDrawColor(change_color_TD[5], -1);
	TextDrawSetShadow(change_color_TD[5], 1);
	TextDrawSetOutline(change_color_TD[5], 0);
	TextDrawBackgroundColor(change_color_TD[5], 51);
	TextDrawFont(change_color_TD[5], 2);
	TextDrawSetProportional(change_color_TD[5], 1);
	

zakaz7_TD[0] = TextDrawCreate(-1.3999, 309.5602, "zakazzahvat:zakaz"); // ????? 
TextDrawTextSize(zakaz7_TD[0], 142.0000, 65.0000); 
TextDrawAlignment(zakaz7_TD[0], 1); 
TextDrawColor(zakaz7_TD[0], -1); 
TextDrawBackgroundColor(zakaz7_TD[0], 255); 
TextDrawFont(zakaz7_TD[0], 4); 
TextDrawSetProportional(zakaz7_TD[0], 0); 
TextDrawSetShadow(zakaz7_TD[0], 0); 
 
zakaz7_TD[1] = TextDrawCreate(117.9999, 334.1066, "0"); // ????? 
TextDrawLetterSize(zakaz7_TD[1], 0.3079, 1.3162); 
TextDrawAlignment(zakaz7_TD[1], 1); 
TextDrawColor(zakaz7_TD[1], -1); 
TextDrawBackgroundColor(zakaz7_TD[1], 255); 
TextDrawFont(zakaz7_TD[1], 1); 
TextDrawSetProportional(zakaz7_TD[1], 1); 
TextDrawSetShadow(zakaz7_TD[1], 0); 
 
zakaz7_TD[2] = TextDrawCreate(84.3999, 350.7601, "0"); // ????? 
TextDrawLetterSize(zakaz7_TD[2], 0.2910, 1.0922); 
TextDrawAlignment(zakaz7_TD[2], 1); 
TextDrawColor(zakaz7_TD[2], -1); 
TextDrawBackgroundColor(zakaz7_TD[2], 255); 
TextDrawFont(zakaz7_TD[2], 1); 
TextDrawSetProportional(zakaz7_TD[2], 1); 
TextDrawSetShadow(zakaz7_TD[2], 0); 
 
zakaz7_TD[3] = TextDrawCreate(73.1998, 350.7601, "9:"); // ????? 
TextDrawLetterSize(zakaz7_TD[3], 0.2910, 1.0922); 
TextDrawAlignment(zakaz7_TD[3], 1); 
TextDrawColor(zakaz7_TD[3], -1); 
TextDrawBackgroundColor(zakaz7_TD[3], 255); 
TextDrawFont(zakaz7_TD[3], 1); 
TextDrawSetProportional(zakaz7_TD[3], 1); 
TextDrawSetShadow(zakaz7_TD[3], 0); 
	zakaz6_TD[0] = TextDrawCreate(-1.3999, 309.5602, "zakazzahvat:zakaz"); // ????? 
TextDrawTextSize(zakaz6_TD[0], 142.0000, 65.0000); 
TextDrawAlignment(zakaz6_TD[0], 1); 
TextDrawColor(zakaz6_TD[0], -1); 
TextDrawBackgroundColor(zakaz6_TD[0], 255); 
TextDrawFont(zakaz6_TD[0], 4); 
TextDrawSetProportional(zakaz6_TD[0], 0); 
TextDrawSetShadow(zakaz6_TD[0], 0); 
 
zakaz6_TD[1] = TextDrawCreate(117.9999, 334.1066, "0"); // ????? 
TextDrawLetterSize(zakaz6_TD[1], 0.3079, 1.3162); 
TextDrawAlignment(zakaz6_TD[1], 1); 
TextDrawColor(zakaz6_TD[1], -1); 
TextDrawBackgroundColor(zakaz6_TD[1], 255); 
TextDrawFont(zakaz6_TD[1], 1); 
TextDrawSetProportional(zakaz6_TD[1], 1); 
TextDrawSetShadow(zakaz6_TD[1], 0); 
 
zakaz6_TD[2] = TextDrawCreate(84.3999, 350.7601, "0"); // ????? 
TextDrawLetterSize(zakaz6_TD[2], 0.2910, 1.0922); 
TextDrawAlignment(zakaz6_TD[2], 1); 
TextDrawColor(zakaz6_TD[2], -1); 
TextDrawBackgroundColor(zakaz6_TD[2], 255); 
TextDrawFont(zakaz6_TD[2], 1); 
TextDrawSetProportional(zakaz6_TD[2], 1); 
TextDrawSetShadow(zakaz6_TD[2], 0); 
 
zakaz6_TD[3] = TextDrawCreate(73.1998, 350.7601, "9:"); // ????? 
TextDrawLetterSize(zakaz6_TD[3], 0.2910, 1.0922); 
TextDrawAlignment(zakaz6_TD[3], 1); 
TextDrawColor(zakaz6_TD[3], -1); 
TextDrawBackgroundColor(zakaz6_TD[3], 255); 
TextDrawFont(zakaz6_TD[3], 1); 
TextDrawSetProportional(zakaz6_TD[3], 1); 
TextDrawSetShadow(zakaz6_TD[3], 0); 
	zakaz5_TD[0] = TextDrawCreate(-1.3999, 309.5602, "zakazzahvat:zakaz"); // ????? 
TextDrawTextSize(zakaz5_TD[0], 142.0000, 65.0000); 
TextDrawAlignment(zakaz5_TD[0], 1); 
TextDrawColor(zakaz5_TD[0], -1); 
TextDrawBackgroundColor(zakaz5_TD[0], 255); 
TextDrawFont(zakaz5_TD[0], 4); 
TextDrawSetProportional(zakaz5_TD[0], 0); 
TextDrawSetShadow(zakaz5_TD[0], 0); 
 
zakaz5_TD[1] = TextDrawCreate(117.9999, 334.1066, "0"); // ????? 
TextDrawLetterSize(zakaz5_TD[1], 0.3079, 1.3162); 
TextDrawAlignment(zakaz5_TD[1], 1); 
TextDrawColor(zakaz5_TD[1], -1); 
TextDrawBackgroundColor(zakaz5_TD[1], 255); 
TextDrawFont(zakaz5_TD[1], 1); 
TextDrawSetProportional(zakaz5_TD[1], 1); 
TextDrawSetShadow(zakaz5_TD[1], 0); 
 
zakaz5_TD[2] = TextDrawCreate(84.3999, 350.7601, "0"); // ????? 
TextDrawLetterSize(zakaz5_TD[2], 0.2910, 1.0922); 
TextDrawAlignment(zakaz5_TD[2], 1); 
TextDrawColor(zakaz5_TD[2], -1); 
TextDrawBackgroundColor(zakaz5_TD[2], 255); 
TextDrawFont(zakaz5_TD[2], 1); 
TextDrawSetProportional(zakaz5_TD[2], 1); 
TextDrawSetShadow(zakaz5_TD[2], 0); 
 
zakaz5_TD[3] = TextDrawCreate(73.1998, 350.7601, "9:"); // ????? 
TextDrawLetterSize(zakaz5_TD[3], 0.2910, 1.0922); 
TextDrawAlignment(zakaz5_TD[3], 1); 
TextDrawColor(zakaz5_TD[3], -1); 
TextDrawBackgroundColor(zakaz5_TD[3], 255); 
TextDrawFont(zakaz5_TD[3], 1); 
TextDrawSetProportional(zakaz5_TD[3], 1); 
TextDrawSetShadow(zakaz5_TD[3], 0); 
	zakaz4_TD[0] = TextDrawCreate(-1.3999, 309.5602, "zakazzahvat:zakaz"); // ????? 
TextDrawTextSize(zakaz4_TD[0], 142.0000, 65.0000); 
TextDrawAlignment(zakaz4_TD[0], 1); 
TextDrawColor(zakaz4_TD[0], -1); 
TextDrawBackgroundColor(zakaz4_TD[0], 255); 
TextDrawFont(zakaz4_TD[0], 4); 
TextDrawSetProportional(zakaz4_TD[0], 0); 
TextDrawSetShadow(zakaz4_TD[0], 0); 
 
zakaz4_TD[1] = TextDrawCreate(117.9999, 334.1066, "0"); // ????? 
TextDrawLetterSize(zakaz4_TD[1], 0.3079, 1.3162); 
TextDrawAlignment(zakaz4_TD[1], 1); 
TextDrawColor(zakaz4_TD[1], -1); 
TextDrawBackgroundColor(zakaz4_TD[1], 255); 
TextDrawFont(zakaz4_TD[1], 1); 
TextDrawSetProportional(zakaz4_TD[1], 1); 
TextDrawSetShadow(zakaz4_TD[1], 0); 
 
zakaz4_TD[2] = TextDrawCreate(84.3999, 350.7601, "0"); // ????? 
TextDrawLetterSize(zakaz4_TD[2], 0.2910, 1.0922); 
TextDrawAlignment(zakaz4_TD[2], 1); 
TextDrawColor(zakaz4_TD[2], -1); 
TextDrawBackgroundColor(zakaz4_TD[2], 255); 
TextDrawFont(zakaz4_TD[2], 1); 
TextDrawSetProportional(zakaz4_TD[2], 1); 
TextDrawSetShadow(zakaz4_TD[2], 0); 
 
zakaz4_TD[3] = TextDrawCreate(73.1998, 350.7601, "9:"); // ????? 
TextDrawLetterSize(zakaz4_TD[3], 0.2910, 1.0922); 
TextDrawAlignment(zakaz4_TD[3], 1); 
TextDrawColor(zakaz4_TD[3], -1); 
TextDrawBackgroundColor(zakaz4_TD[3], 255); 
TextDrawFont(zakaz4_TD[3], 1); 
TextDrawSetProportional(zakaz4_TD[3], 1); 
TextDrawSetShadow(zakaz4_TD[3], 0); 
	// ?????????? ?????????? 
zakaz3_TD[0] = TextDrawCreate(-1.3999, 309.5602, "zakazzahvat:zakaz"); // ????? 
TextDrawTextSize(zakaz3_TD[0], 142.0000, 65.0000); 
TextDrawAlignment(zakaz3_TD[0], 1); 
TextDrawColor(zakaz3_TD[0], -1); 
TextDrawBackgroundColor(zakaz3_TD[0], 255); 
TextDrawFont(zakaz3_TD[0], 4); 
TextDrawSetProportional(zakaz3_TD[0], 0); 
TextDrawSetShadow(zakaz3_TD[0], 0); 
 
zakaz3_TD[1] = TextDrawCreate(117.9999, 334.1066, "0"); // ????? 
TextDrawLetterSize(zakaz3_TD[1], 0.3079, 1.3162); 
TextDrawAlignment(zakaz3_TD[1], 1); 
TextDrawColor(zakaz3_TD[1], -1); 
TextDrawBackgroundColor(zakaz3_TD[1], 255); 
TextDrawFont(zakaz3_TD[1], 1); 
TextDrawSetProportional(zakaz3_TD[1], 1); 
TextDrawSetShadow(zakaz3_TD[1], 0); 
 
zakaz3_TD[2] = TextDrawCreate(84.3999, 350.7601, "0"); // ????? 
TextDrawLetterSize(zakaz3_TD[2], 0.2910, 1.0922); 
TextDrawAlignment(zakaz3_TD[2], 1); 
TextDrawColor(zakaz3_TD[2], -1); 
TextDrawBackgroundColor(zakaz3_TD[2], 255); 
TextDrawFont(zakaz3_TD[2], 1); 
TextDrawSetProportional(zakaz3_TD[2], 1); 
TextDrawSetShadow(zakaz3_TD[2], 0); 
 
zakaz3_TD[3] = TextDrawCreate(73.1998, 350.7601, "9:"); // ????? 
TextDrawLetterSize(zakaz3_TD[3], 0.2910, 1.0922); 
TextDrawAlignment(zakaz3_TD[3], 1); 
TextDrawColor(zakaz3_TD[3], -1); 
TextDrawBackgroundColor(zakaz3_TD[3], 255); 
TextDrawFont(zakaz3_TD[3], 1); 
TextDrawSetProportional(zakaz3_TD[3], 1); 
TextDrawSetShadow(zakaz3_TD[3], 0); 
 //355


	change_color_TD[6] = TextDrawCreate(377.444671, 404.715820, "??????");
	TextDrawLetterSize(change_color_TD[6], 0.224666, 1.012619);
	TextDrawAlignment(change_color_TD[6], 2);
	TextDrawColor(change_color_TD[6], -1);
	TextDrawSetShadow(change_color_TD[6], 1);
	TextDrawSetOutline(change_color_TD[6], 0);
	TextDrawBackgroundColor(change_color_TD[6], 51);
	TextDrawFont(change_color_TD[6], 2);
	TextDrawSetProportional(change_color_TD[6], 1);

	print("[TextDraw]: ??? ?????????? ???????");
}

stock CreateMenus()
{
	admin_spec_menu = CreateMenu("_", 1, 550.0, 130.0, 50.0);
    AddMenuItem(admin_spec_menu, 0, "-EXIT-");
    AddMenuItem(admin_spec_menu, 0, "Update");
    AddMenuItem(admin_spec_menu, 0, "Stats");
    AddMenuItem(admin_spec_menu, 0, "Skick");
    AddMenuItem(admin_spec_menu, 0, "Mute");
    AddMenuItem(admin_spec_menu, 0, "Slap");
    AddMenuItem(admin_spec_menu, 0, "GMTest");
    AddMenuItem(admin_spec_menu, 0, "Info");
    AddMenuItem(admin_spec_menu, 0, "-EXIT-");

	print("[Menu]: ??? ???? ???????");
}

stock CreateVehicles()
{
	
	print("[Vehicle]: ??? ???????????? ???????? ???????");
}

stock CreateMedBeds()
{
	for(new i; i < sizeof g_med_bed_pos; i ++)
	{
		g_med_bed_label[i] = CreateDynamic3DTextLabel(" ", 0xFFFFFFEE, g_med_bed_pos[i][0], g_med_bed_pos[i][1], g_med_bed_pos[i][2], 5.0, _, _, _, -1, -1, _, 30.0);
		UpdateMedBed(i);
	}
}

stock CreateCasinoTables()
{
	for(new idx; idx < sizeof g_casino_table_pos; idx ++)
	{
		g_casino_area[idx] = CreateDynamicSphere
		(
			g_casino_table_pos[idx][0],
			g_casino_table_pos[idx][1],
			g_casino_table_pos[idx][2],
			2.0
		);

		CreateDynamic3DTextLabel
		(
			"- ?????? -\n\n{FFFFFF}??ù ???? ???????????:\n{9999ff}/dice",
			0x3399FFFF,
			g_casino_table_pos[idx][0], g_casino_table_pos[idx][1], g_casino_table_pos[idx][2] + 1.5,
			8.0,
			_, _, _, -1, -1, _,
			15.0
		);
	}
}

stock CreateArmories()
{
	for (new idx = 0; idx < sizeof g_armory; idx++)
	{
		g_armory[idx][A_IS_OPEN] = false;

		CreatePickup(
			2969, // ?????? ??????
			23,   // ???
			g_armory[idx][A_POS_X],
			g_armory[idx][A_POS_Y],
			g_armory[idx][A_POS_Z],
			-1,
			PICKUP_ACTION_TYPE_ARMORY,
			idx
		);

		g_armory[idx][A_LABEL] = CreateDynamic3DTextLabel(
			"", 
			0xFFD700FF,
			g_armory[idx][A_POS_X],
			g_armory[idx][A_POS_Y],
			g_armory[idx][A_POS_Z] + 1.5,
			10.0
		);

		UpdateArmoryLabel(idx);
	}
}

stock IsPlayerInRangeOfAnyCasinoTable(playerid)
{
	for(new idx; idx < sizeof g_casino_table_pos; idx ++)
	{
		if(IsPlayerInDynamicArea(playerid, g_casino_area[idx])) return 1;
	}

	return 0;
}

stock ShowPlayerPayForRentDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_PAY_FOR_RENT, DIALOG_STYLE_LIST,
		"{66CC00}??????",
		"1. ????????? ?? ???\n"\
		"2. ???????? ?????? ???????\n"\
		"3. ???????? ?????? ???",
		"?????", "??????"
	);
	return 1;
}

stock ClearBankAccountInfo(playerid, accountid)
{
	strmid(g_bank_account[playerid][accountid][BA_NAME], "None", 0, 21, 21);

	SetBankAccountData(playerid, accountid, BA_ID, 0);
	SetBankAccountData(playerid, accountid, BA_PIN_CODE, 0);

	SetBankAccountData(playerid, accountid, BA_BALANCE, 0);
	SetBankAccountData(playerid, accountid, BA_REG_TIME, 0);
}

stock ClearBankAccountsData(playerid)
{
	for(new idx; idx < MAX_BANK_ACCOUNTS; idx ++)
	{
		ClearBankAccountInfo(playerid, idx);
	}
}

stock ShowPlayerBankDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_BANK, DIALOG_STYLE_LIST,
		"{00CC00}????",
		"??? ?????\n"\
		"??????? ????? ????",
		"???????", "??????"
	);
}

stock ShowPlayerBankAccounts(playerid)
{
	new query[64];
	new Cache: result;
	new rows;
	new bank_accounts_list[(37 * MAX_BANK_ACCOUNTS) + 22 + 1];

	format(query, sizeof query, "SELECT * FROM bank_accounts WHERE uid=%d LIMIT %d", GetPlayerAccountID(playerid), MAX_BANK_ACCOUNTS);
	result = mysql_query(mysql, query);
	rows = cache_num_rows();

	bank_accounts_list = "{99CC00}???????? ????\n";
	for(new idx, count; idx < MAX_BANK_ACCOUNTS; idx ++)
	{
		ClearBankAccountInfo(playerid, idx);

		if(idx < rows)
		{
			SetBankAccountData(playerid, idx, BA_ID, cache_get_row_int(idx, 0));

			cache_get_row(idx, 2, g_bank_account[playerid][idx][BA_NAME], mysql, 21);
			cache_get_row(idx, 4, g_bank_account[playerid][idx][BA_PIN_CODE], mysql, 9);

			SetBankAccountData(playerid, idx, BA_BALANCE, cache_get_row_int(idx, 3));
			SetBankAccountData(playerid, idx, BA_REG_TIME, cache_get_row_int(idx, 5));

			format(query, sizeof query, "%s - ?%d\n", GetBankAccountData(playerid, idx, BA_NAME), GetBankAccountData(playerid, idx, BA_ID));
			strcat(bank_accounts_list, query);

			SetPlayerListitemValue(playerid, count ++, idx);
		}
	}
	cache_delete(result);

	return Dialog(playerid, DIALOG_BANK_ACCOUNTS, DIALOG_STYLE_LIST, "{FFCD00}???? ?????", bank_accounts_list, "????????", "?????");
}

stock IsValidBankAccount(playerid, accountid)
{
	if(0 <= accountid <= MAX_BANK_ACCOUNTS-1)
	{
		if(GetBankAccountData(playerid, accountid, BA_ID) > 0)
		{
			return 1;
		}
	}
	return 0;
}

stock UpdateBankAccountData(playerid, accountid)
{
	if(IsValidBankAccount(playerid, accountid))
	{
		new query[64];
		new Cache: result;

		format(query, sizeof query, "SELECT balance FROM bank_accounts WHERE id=%d LIMIT 1", GetBankAccountData(playerid, accountid, BA_ID));
		result = mysql_query(mysql, query);

		if(cache_num_rows())
			SetBankAccountData(playerid, accountid, BA_BALANCE, cache_get_row_int(0, 0));

		cache_delete(result);
	}
}

stock ShowPlayerBankAccountOperation(playerid)
{
	Dialog
	(
		playerid, DIALOG_BANK_ACCOUNT_OPERATION, DIALOG_STYLE_LIST,
		"{0099FF}?????? ????????",
		"1. ?????????ù ? ?????\n"\
		"2. ??????ù ????????\n"\
		"3. ??ù?? ??????\n"\
		"4. ???????? ??????\n"\
		"5. ????????? ?? ?????? ????\n"\
		"6. ????????????? ????\n"\
		"7. ???????? PIN-???",
		"???????", "?????"
	);
	return 1;
}

stock ShowPlayerBankAccountTransfer(playerid, accountid)
{
	if(IsValidBankAccount(playerid, accountid))
	{
		new fmt_str[128];
		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}???????? ????:\t%d\n"\
			"??????????:\t\t\"%s\", ?%d\n\n"\
			"??????? ????? ??ù ????????:",
			GetBankAccountData(playerid, accountid, BA_ID),
			GetPlayerBankTransfer(playerid, BT_NAME),
			GetPlayerBankTransfer(playerid, BT_ID)
		);
		Dialog(playerid, DIALOG_BANK_ACCOUNT_TRANSFER_2, DIALOG_STYLE_INPUT, "{FFCD00}??????? ???????", fmt_str, "?????????", "??????");
	}
	return 1;
}

stock ShowPlayerATMTransfer(playerid)
{
	new transfer_id = GetPlayerBankTransfer(playerid, BT_ID);
	if(transfer_id)
	{
		new fmt_str[64 + 1];

		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}?? ??????ù??? ??????? ?? ???? ?%d\n"\
			"??????? ?????:",
			transfer_id
		);
		Dialog(playerid, DIALOG_ATM_TRANSFER_MONEY_2, DIALOG_STYLE_INPUT, "{FFCD00}??????????? ???????", fmt_str, "?????????", "??????");
	}
	return 1;
}

stock IsABadBankAccountName(dest[], pos=0)
{
	new is_bad_name = false;
	do
	{
		switch(dest[pos])
		{
			case
				'a'..'z', 'A'..'Z', '?'..'ù', '?'..'?', '0'..'9': continue;

			default:
				is_bad_name = true;

		}
	}
	while(dest[++pos]);

	return is_bad_name;
}

stock BankAccountLog(playerid, accountid, description[])
{
	new query[180 + 1];

	mysql_format(mysql, query, sizeof query, "INSERT INTO bank_accounts_log (acc_id,uip,time,description) VALUES (%d,'%e',%d,'%e')", accountid, GetPlayerIpEx(playerid), gettime(), description);
	mysql_query(mysql, query, false);

	return 1;
}

stock ShowPlayerBankAccountLog(playerid, accountid)
{
	new fmt_str[128];
	new Cache: result;
	new rows;

	format(fmt_str, sizeof fmt_str, "SELECT FROM_UNIXTIME(time,'%%Y-%%m-%%d') AS date,description FROM bank_accounts_log WHERE acc_id=%d ORDER BY id DESC LIMIT 10", accountid);
	result = mysql_query(mysql, fmt_str);

	rows = cache_num_rows();

	if(rows)
	{
		new text[900] = "{FFFFFF}";
		new day, month, year;

		for(new idx; idx < rows; idx ++)
		{
			cache_get_row(idx, 0, fmt_str);
			sscanf(fmt_str, "P<->ddd", year, month, day);

			cache_get_row(idx, 1, fmt_str);

			format(fmt_str, sizeof fmt_str, "%d %s %d ?.\t\t%s\n", day, GetMonthName(month), year, fmt_str);
			strcat(text, fmt_str);
		}
		Dialog(playerid, DIALOG_BANK_ACCOUNT_INFO, DIALOG_STYLE_MSGBOX, "{FFCD00}????????? 10 ????????", text, "????????ù", "");
	}
	else Dialog(playerid, DIALOG_BANK_ACCOUNT_INFO, DIALOG_STYLE_MSGBOX, "{FFCD00}??????ù", "{FFFFFF}??????ù ???????? ?????", "????????ù", "");

	cache_delete(result);
	return 1;
}

stock RemovePlayerAttachedObjects(playerid)
{
	for(new idx; idx < MAX_PLAYER_ATTACHED_OBJECTS; idx ++)
	{
		if(IsPlayerAttachedObjectSlotUsed(playerid, idx))
		{
			RemovePlayerAttachedObject(playerid, idx);
		}
	}
}

stock RemovePlayerAttachedObjectEx(playerid, ...)
{
	new args = numargs()-1;
	for(new idx; idx < args; idx ++)
		RemovePlayerAttachedObject(playerid, getarg(idx + 1));
}

stock HelpInfoInit()
{
	new fmt_str[64];

	for(new idx; idx < sizeof help_info; idx ++)
	{
		format(fmt_str, sizeof fmt_str, "%d. %s\n", idx + 1, help_info[idx][H_TITLE]);
		strcat(help_info_items, fmt_str);

		format(fmt_str, sizeof fmt_str, "{FFCD00}%d. ", idx + 1);
		strins(help_info[idx][H_TITLE], fmt_str, 0, 64);

		//strins(help_info[idx][H_INFO], "{FFFFFF}", 0, 1024);
	}


	markerhelp = CreateDynamicCP(-116.0248,965.5103,12.1417, 2.1, _, _, _, 23.0); // ??-?????? ??
	CreateDynamic3DTextLabel("?????? ??ù ????????\n{FFFF00}?????? ?? ????", 0x3399FFFF, 1763.693, -1885.828, 13.555 + 0.66, 26.0, _, _, _, 0, 0);

//	CreateDynamic3DTextLabel("??????ù ???????????? ???????????ù\n??????????? ????? ???????? ????\n{FFFF00}????????? ??????: 50.000 ??????", 0x3399FFFF, 1850.7094,2196.4565,15.8480 + 0.66, 26.0, _, _, _, 0, 0);
//	CreateDynamicCP(1850.7094,2196.4565,15.8480	, 2.1, _, _, _, 23.0); // ??-?????? ??

//	CreateDynamic3DTextLabel("??????ù ???????????? ???????????ù\n??????????? ????? ???????? ????\n{FFFF00}????????? ??????: 50.000 ??????", 0x3399FFFF, 275.8153,673.9254,12.0000 + 0.66, 26.0, _, _, _, 0, 0);
//	CreateDynamicCP(275.8153,673.9254,12.0000	, 2.1, _, _, _, 23.0); // ??-?????? ??

	markerhelp1 = CreateDynamicCP(1808.5878,2498.1243,15.8725, 2.1, _, _, _, 23.0); // ??-?????? ??
	CreateDynamic3DTextLabel("?????? ??ù ????????\n{FFFF00}?????? ?? ????", 0x3399FFFF, 1763.693, -1885.828, 13.555 + 0.66, 26.0, _, _, _, 0, 0);
}

stock ShowPlayerHelpSection(playerid, sectionid)
{
	new next_buttom[9] = "????? >>";
	if(sectionid >= sizeof help_info - 1)
	{
		next_buttom[0] = '\0';
	}

	Dialog
	(
		playerid, DIALOG_HELP_SECTION, DIALOG_STYLE_MSGBOX,
		GetHelpInfoData(sectionid, H_TITLE),
		GetHelpInfoData(sectionid, H_INFO),
		"<< ????", next_buttom
	);
	SetPVarInt(playerid, "help_section", sectionid);
}

stock ServerRadioInit()
{
	new fmt_str[64];

	for(new idx; idx < sizeof g_server_radio; idx ++)
	{
		format(fmt_str, sizeof fmt_str, "%d. %s\n", idx + 1, GetServerRadioData(idx, SR_CHANNEL_NAME));
		strcat(g_server_radio_items, fmt_str);
	}
}

stock MapIconsInit()
{
	for(new idx; idx < sizeof map_icons; idx ++)
	{
		CreateDynamicMapIcon
		(
			GetMapIconsData(idx, MI_POS_X),
			GetMapIconsData(idx, MI_POS_Y),
			GetMapIconsData(idx, MI_POS_Z),
			GetMapIconsData(idx, MI_TYPE),
			0,
			0,
			0,
			-1,
			MAP_ICON_STREAM_DISTANCE,
			MAPICON_LOCAL
		);
	}
}

stock TeleportPickupsInit()
{
	new Text3D:buffer;
	for(new idx; idx < sizeof g_teleport; idx ++)
	{
		if(strlen(GetTeleportData(idx, T_NAME)) && !GetTeleportData(idx, T_PICKUP_VIRTUAL_WORLD))
		{
			buffer = CreateDynamic3DTextLabel
			(
				GetTeleportData(idx, T_NAME),
				0x3399FFEE,
				GetTeleportData(idx, T_PICKUP_POS_X),
				GetTeleportData(idx, T_PICKUP_POS_Y),
				GetTeleportData(idx, T_PICKUP_POS_Z) + 0.8,
				5.0,
				INVALID_PLAYER_ID,
				INVALID_VEHICLE_ID,
				0,
				0,
				0,
				-1,
				STREAMER_3D_TEXT_LABEL_SD
			);
			SetTeleportData(idx, T_LABEL, buffer);
		}
		CreatePickup(1318, 23, GetTeleportData(idx, T_PICKUP_POS_X), GetTeleportData(idx, T_PICKUP_POS_Y), GetTeleportData(idx, T_PICKUP_POS_Z), GetTeleportData(idx, T_PICKUP_VIRTUAL_WORLD), PICKUP_ACTION_TYPE_TELEPORT, idx);
	}

	CreatePickup(1318, 23, 5.6028, -23.3124, 1080.9968, -1, PICKUP_ACTION_TYPE_BIZ_CAR_ENT); // ????????? ???????? ?? ?????
	CreatePickup(1318, 23, 5.9334, -25.4932, 1085.9291, -1, PICKUP_ACTION_TYPE_BIZ_CAR_EXI); // ????????? ???????? ? ??????

	print("[TP]: ??? ?????/?????? ???????");
}

stock DrivingSchoolInit()
{
	new buffer[5];

	driving_exam_CP = CreateDynamicCP(1644.4178,928.7159,1001.0000, 1.5, 1, 1, -1, 15.0); // ?????????
//	CreateDynamic3DTextLabel("?????\n????????", 0x99CC00BB, 1644.4178,928.7159,1001.0000, 7.0, 1);

	CreatePickup(2894, 23, 1643.7570,915.3533,1001.0000, 1, PICKUP_ACTION_TYPE_DRIVING_TUTO); // ????????? ????????? ??????
	CreateDynamic3DTextLabel("?????????\n??????", 0xCC9900BB, 1643.7570,915.3533,1001.0000 + 0.2, 5.0);

//	buffer[0] = AddStaticVehicleEx(565, 1928.5189, 2225.2505, 15.7314, 360.0, 17, 17, 300, 0, VEHICLE_ACTION_TYPE_DRIVING_SCH); // ??????? 1
//	buffer[1] = AddStaticVehicleEx(565, 1932.1473, 2225.2505, 15.7304, 360.0, 17, 17, 300, 0, VEHICLE_ACTION_TYPE_DRIVING_SCH); 			// ??????? 2
//	buffer[2] = AddStaticVehicleEx(565, 1936.1224, 2225.2505, 15.7313, 360.0, 17, 17, 300, 0, VEHICLE_ACTION_TYPE_DRIVING_SCH); // ??????? 3
//    buffer[3] = AddStaticVehicleEx(565, 1921.2749, 2225.2498, 15.6625, 360.0, 17, 17, 300, 0, VEHICLE_ACTION_TYPE_DRIVING_SCH);
//       buffer[4] = AddStaticVehicleEx(565, 1924.9423, 2225.2175, 15.6620, 360.0, 17, 17, 300, 0, VEHICLE_ACTION_TYPE_DRIVING_SCH);

//	for(new idx = buffer[0]; idx <= buffer[4]; idx ++)
//		CreateDynamic3DTextLabel("???????", 0xFF0000FF, 0.0, 0.0, 1.2, 16.0, INVALID_PLAYER_ID, idx);

	new fmt_str[64];
	for(new idx; idx < sizeof driving_tutorial; idx ++)
	{
		format(fmt_str, sizeof fmt_str, "{CC9900}?????? %d: ", idx + 1);
		strins(driving_tutorial[idx][DT_TITLE], fmt_str, 0, 64);
	}

	for(new idx; idx < sizeof driving_exam; idx ++)
	{
		strins(driving_exam[idx][DE_TITLE], "{00CC66}", 0, 64);
	}
}

stock ShowPlayerATMDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_ATM, DIALOG_STYLE_LIST,
		"{FFCD00}????????",
		"1. ??ù?? ? ??????????? ?????\n"\
		"2. ???????? ?? ?????????? ????\n"\
		"3. ?????? ??????????? ?????\n"\
		"4. ??ù?? ?? ????? ???????ù??ù\n"\
		"5. ???????? ?? ???? ???????ù??ù\n"\
		"6. ????????? ????????? ???????\n"\
		"7. ??????????? ???????\n"\
		"8. ?????? ??????\n"\
		"9. ???????????????????",
		"???????", "?????"
	);
	return 1;
}

stock ShowPlayerATMSelectSumDialog(playerid, bool:take)
{
	Dialog
	(
		playerid, take ? DIALOG_ATM_TAKE_MONEY : DIALOG_ATM_PUT_MONEY, DIALOG_STYLE_LIST,
		"???????? ?????",
		"100 ???\n"\
		"200 ???\n"\
		"500 ???\n"\
		"1000 ???\n"\
		"2000 ???\n"\
		"5000 ???\n"\
		"10000 ???\n"\
		"?????ù ?????...",
		take ? ("??ù??") : ("????????"), "?????"
	);
	return 1;
}

stock ShowPlayerATMSelectOtherSum(playerid, bool:take)
{
	Dialog
	(
		playerid, take ? DIALOG_ATM_TAKE_OTHER_MONEY : DIALOG_ATM_PUT_OTHER_MONEY, DIALOG_STYLE_INPUT,
		"{FFCD00}?????ù ?????",
		"{FFFFFF}??????? ?????:",
		take ? ("??ù??") : ("????????"), "?????"
	);
	return 1;
}

stock ShowPlayerATMCharityDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_ATM_CHARITY, DIALOG_STYLE_INPUT,
		"{FFCD00}???????????????????",
		"{FFFFFF}?? ?????????? ??? ??????????? ?????\n"\
		"????? ?? ????????????????? ????\n"\
		"???????????. ??? ???????? ?????? ??\n"\
		"???????? ????? ?????? ? ????ù???\n"\
		"?????????.\n\n"\
		"?????? ?????, ? ????ù? ????ù ?? ???????\n"\
		"????? ????????????ù ?????? ???, ???\n"\
		"?????? ?????????? ??????.\n\n"\
		"???? ?????? ????? ??????????? ????????\n"\
		"/charity. ù?? ?? ????? ?????? ?????\n"\
		"????? ????????? ???? ?????????????.",
		"??????", "???????"
	);
	return 1;
}

stock ShowPlayerATMCompanyDialog(playerid, bool: take)
{
	new stationid = GetPlayerFuelStation(playerid);
	new businessid = GetPlayerBusiness(playerid);

	if(stationid != -1 && businessid != -1)
	{
		new fmt_str[64 + 1];

		format
		(
			fmt_str, sizeof fmt_str,
			"1. %s (?%d)\n"\
			"2. %s (?%d)",
			GetBusinessData(businessid, B_NAME), businessid,
			GetFuelStationData(stationid, FS_NAME), stationid
		);
		Dialog(playerid, take ? DIALOG_ATM_SELECT_COMPANY_TAKE : DIALOG_ATM_SELECT_COMPANY_PUT, DIALOG_STYLE_LIST, "{FFCD00}???????? ???????ù???", fmt_str, "???????", "?????");
	}
	else if(stationid != -1)
	{
		ShowPlayerATMFuelStationDialog(playerid, take);
	}
	else if(businessid != -1)
	{
		ShowPlayerATMBusinessDialog(playerid, take);
	}
}

stock ShowPlayerATMFuelStationDialog(playerid, bool:take)
{
	new stationid = GetPlayerFuelStation(playerid);
	if(stationid != -1)
	{
		Dialog
		(
			playerid, take ? DIALOG_ATM_FUEL_ST_TAKE_MONEY : DIALOG_ATM_FUEL_ST_PUT_MONEY, DIALOG_STYLE_INPUT,
			GetFuelStationData(stationid, FS_NAME),
			"{FFFFFF}??????? ?????:",
			take ? ("??ù??") : ("????????"), "?????"
		);
	}
}

stock ShowPlayerATMBusinessDialog(playerid, bool:take)
{
	new businessid = GetPlayerBusiness(playerid);
	if(businessid != -1)
	{
		Dialog
		(
			playerid, take ? DIALOG_ATM_BIZ_TAKE_MONEY : DIALOG_ATM_BIZ_PUT_MONEY, DIALOG_STYLE_INPUT,
			GetBusinessData(businessid, B_NAME),
			"{FFFFFF}??????? ?????:",
			take ? ("??ù??") : ("????????"), "?????"
		);
	}
}

stock BanksInit()
{
	CreatePickup(1274, 23, 2902.89,2506.98,1051.04, -1, PICKUP_ACTION_TYPE_BANK, false);
	CreateDynamic3DTextLabel("??????\n{CCCC00}????\n???????\n???", 0x00CC00FF, 2902.89,2506.98,1051.04 + 0.8, 8.0);

	CreatePickup(1274, 23, 2909.24,2503.70,1051.04, -1, PICKUP_ACTION_TYPE_BANK, true);
	CreateDynamic3DTextLabel("/bank", 0x00CC00FF, 2909.24,2503.70,1051.04 + 0.8, 8.0);

	CreatePickup(1274, 23, 2912.95,2503.04,1051.04, -1, PICKUP_ACTION_TYPE_BANK, true);
	CreateDynamic3DTextLabel("/bank", 0x00CC00FF, 2912.95,2503.04,1051.04 + 0.8, 8.0);

	CreatePickup(1274, 23, 2905.66,2505.03,1051.04, -1, PICKUP_ACTION_TYPE_BANK, true);
	CreateDynamic3DTextLabel("/bank", 0x66CC66FF, 2905.66,2505.03,1051.04 + 0.8, 8.0);

	CreatePickup(1274, 23, 2900.52,2509.45,1051.04, -1, PICKUP_ACTION_TYPE_BANK, false);
	CreateDynamic3DTextLabel("??????\n{CCCC00}????\n???????\n???", 0x66CC66FF, 2900.52,2509.45,1051.04 + 0.8, 8.0);
}

stock TempJobsInit()
{
	new idx;
	for(idx = 0; idx < sizeof g_temp_jobs; idx ++)
	{
		//if(idx == 3) continue; // ????? ? ?????? (????????ù ???????? ?? ????)

		CreatePickup(1275, 23, GetTempJobInfo(idx, TJ_POS_X), GetTempJobInfo(idx, TJ_POS_Y), GetTempJobInfo(idx, TJ_POS_Z), -1, PICKUP_ACTION_TYPE_TEMP_JOB, idx);
	}
	//loader_job_area = CreateDynamicRectangle(591.4026, 1781.0015, 482.7329, 1534.9045, 0, 0);

//	AddStaticVehicleEx(530, 494.4254, 1639.0137, 11.9525, 266.6, 6, 1, 5, 0, VEHICLE_ACTION_TYPE_LOADER); // ????????? ? ?????
//	AddStaticVehicleEx(530, 494.4254, 1641.4299, 11.9525, 266.6, 6, 1, 5, 0, VEHICLE_ACTION_TYPE_LOADER); // ????????? ? ?????
//	AddStaticVehicleEx(530, 494.4254, 1643.8461, 11.9525, 266.6, 6, 1, 5, 0, VEHICLE_ACTION_TYPE_LOADER); // ????????? ? ?????

	// ?????
	for(idx = 0; idx < sizeof miner_carriage; idx ++)
	{
		miner_carriage[idx][MC_STATUS] = false;
//		miner_carriage[idx][MC_OBJECT_ID] = CreateDynamicObject(1769, miner_carriage[idx][MC_START_POS_X], miner_carriage[idx][MC_START_POS_Y], miner_carriage[idx][MC_START_POS_Z], 0.0, 0.0, 90.0);

//		Streamer_SetIntData(STREAMER_TYPE_OBJECT, miner_carriage[idx][MC_OBJECT_ID], E_STREAMER_EXTRA_ID, OBJECT_TYPE_CARRIAGE);

		miner_carriage[idx][MC_LABEL] = CreateDynamic3DTextLabel("????????\n\n{FFCC00}?????????? ????\n0 / 10000 ??", 0x66CC00FF, -2375.1228, 294.7194, -15.4815 + 3.0, 10.0);
		miner_carriage[idx][MC_PICKUP_ID] = CreatePickup(1239, 23, -2375.1228, 296.8900, -15.7689, -1, PICKUP_ACTION_TYPE_MINER_CARRI);
	}
	miner_job_area = CreateDynamicRectangle(2447.1799,1697.9985, 2279.3557,1806.0872, 0, 0);

	for(new i; i < sizeof miner_job_load_pos; i ++)
	{
		CreateDynamic3DTextLabel("?????\n?????? ????", 0xFFFF00AA, miner_job_load_pos[i][0], miner_job_load_pos[i][1], miner_job_load_pos[i][2], 10.0);
		//miner_job_load_cp[i] = CreateDynamicCP(miner_job_load_pos[i][0], miner_job_load_pos[i][1], miner_job_load_pos[i][2], 1.2, _, _, _, 1.3);
	}

	CreatePickup(1318, 23, 2305.8884, 1738.6920, 1.7285, 0, PICKUP_ACTION_TYPE_MINER_SELL_M);
	CreateDynamic3DTextLabel("??????? ??????????\n{00CC00}15 ?????? {FFFFFF}?? 1 ??", 0x9966FFBB,  2305.8884, 1738.6920, 1.7285 + 1.2, 10.0);

	CreateDynamic3DTextLabel("?????\n\n{3399CC}1. ?????? ????????????\n2. ????????? ????????", 0x009933FF, GetTempJobInfo(TEMP_JOB_MINER, TJ_POS_X), GetTempJobInfo(TEMP_JOB_MINER, TJ_POS_Y), GetTempJobInfo(TEMP_JOB_MINER, TJ_POS_Z) + 0.82, 5.0);

	// ?????
	for(idx = 0; idx < 3; idx ++)
	{
		CreatePickup(1275, 33, 264.4713, -217.2706 + float(idx * 2), 1006.5694, -1, PICKUP_ACTION_TYPE_TEMP_JOB, TEMP_JOB_FACTORY);
	}
	for(idx = 0; idx < sizeof factory_take_metall_pos; idx ++)
	{
		CreatePickup(1279, 23, factory_take_metall_pos[idx][0], factory_take_metall_pos[idx][1], factory_take_metall_pos[idx][2] - 0.4, 1, PICKUP_ACTION_TYPE_FACTORY_MET);
	}
	for(idx = 0; idx < sizeof factory_put_metall_pos; idx ++)
	{
		CreatePickup(1318, 23, factory_put_metall_pos[idx][0], factory_put_metall_pos[idx][1], factory_put_metall_pos[idx][2] - 0.4, 1, PICKUP_ACTION_TYPE_P_CREATE);
	}

	new Float: x = 311.6580, Float: y = -207.6711, Float: z = 1006.5694;
	for(idx = 0; idx < sizeof factory_desk; idx ++)
	{
		if(idx && !(idx % 4))
			y -= (idx != 8 ? 2.9917 : 3.0085);

		factory_desk[idx][FD_POS_X] = x - (float(idx % 4) * 5.5003);
		factory_desk[idx][FD_POS_Y] = y;
		factory_desk[idx][FD_POS_Z] = z;

		factory_desk[idx][FD_USED] = false;
		factory_desk[idx][FD_OBJECT_ID] = -1;

		factory_desk[idx][FD_CHEK_ID] = CreateDynamicCP(factory_desk[idx][FD_POS_X], factory_desk[idx][FD_POS_Y], factory_desk[idx][FD_POS_Z], 0.3, _, _, _, 0.3);
		factory_desk[idx][FD_LABEl] = CreateDynamic3DTextLabel("??????? ?????", 0xFFFFFFEE, factory_desk[idx][FD_POS_X], factory_desk[idx][FD_POS_Y], factory_desk[idx][FD_POS_Z] + 1.0, 5.0);

		CallLocalFunction("UpdateFactoryDesk", "i", idx);
	}
	factory_put_zone = CreateDynamicRectangle(264.8033, -199.8648, 296.8693, -202.0421);
	factory_job_area = CreateDynamicRectangle(-981.2298, 2098.1736, -1170.6591, 2263.3167, 0, 0);

	// --------------- ?????
	AddStaticVehicleEx(406, -1076.2706, 2204.9490, 38.4303, 180.0, 125, 1, 20, 0, VEHICLE_ACTION_TYPE_FACTORY); // ?????? ??ù ???????? ??????????
	AddStaticVehicleEx(406, -1081.3639, 2204.7727, 38.4130, 180.0, 125, 1, 20, 0, VEHICLE_ACTION_TYPE_FACTORY); // ?????? ??ù ???????? ??????????
	AddStaticVehicleEx(406, -1086.3571, 2204.7319, 38.3786, 180.0, 125, 1, 20, 0, VEHICLE_ACTION_TYPE_FACTORY); // ?????? ??ù ???????? ??????????
	AddStaticVehicleEx(406, -1090.8806, 2204.7322, 38.3446, 180.0, 125, 1, 20, 0, VEHICLE_ACTION_TYPE_FACTORY); // ?????? ??ù ???????? ??????????

	AddStaticVehicleEx(514, -1116.3119, 2205.5913, 38.2890, 179.9556, 6, 6, 20, 0, VEHICLE_ACTION_TYPE_FACTORY); // ???? ??ù ????????? ???????
	AddStaticVehicleEx(514, -1107.9980, 2205.7349, 38.1867, 180.4830, 6, 6, 20, 0, VEHICLE_ACTION_TYPE_FACTORY); // ???? ??ù ????????? ???????

	AddStaticVehicleEx(584,-1121.6831, 2190.3965, 38.0457, 263.2740, 1, 1, 180, 0, VEHICLE_ACTION_TYPE_FACTORY, true); // ????????
	AddStaticVehicleEx(584,-1121.6831, 2181.3005, 38.0457, 263.2740, 1, 1, 180, 0, VEHICLE_ACTION_TYPE_FACTORY, true); // ????????
}

stock BusRoutesInit()
{
	new fmt_str[64];

	for(new idx; idx < sizeof g_bus_routes; idx ++)
	{
		format(fmt_str, sizeof fmt_str, "%d.  %s\n", idx + 1, g_bus_routes[idx][BR_NAME]);
		strcat(g_bus_routes_list, fmt_str);

		if(g_bus_routes[idx][BR_COLOR] > 0)
		{
			g_bus_routes[idx][BR_COLOR] = 0x66CC00FF;
		}
		else g_bus_routes[idx][BR_COLOR] = 0x3399FFFF;
	}
}

stock AnimListInit()
{
	new fmt_str[64];
	for(new idx; idx < sizeof anim_list; idx ++)
	{
		format(fmt_str, sizeof fmt_str, "%d. %s\n", idx + 1, GetAnimListData(idx, AL_DESCRIPTION));
		strcat(anim_list_items, fmt_str);

		if(GetAnimListData(idx, AL_LOOP) > 2)
			anim_list[idx][AL_DESCRIPTION] = 2;
	}
	strcat(anim_list_items, "{33CC00}?????????ù");
}

stock RepositoriesLoad()
{
	new Cache: result;
	new type, action_id;

	result = mysql_query(mysql, "SELECT * FROM repositories ORDER BY type,action_id ASC");
	new rows = cache_num_rows();

	for(new idx; idx < rows; idx ++)
	{
		type = cache_get_row_int(idx, 1);
		action_id = cache_get_row_int(idx, 2);

		if(0 <= type <= sizeof g_repository-1)
		{
			if(0 <= action_id <= sizeof g_repository[]-1)
			{
				SetRepositoryData(type, action_id, R_AMOUNT, cache_get_row_int(idx, 3));
			}
		}
	}
	cache_delete(result);

	RepositoriesInit();
}

stock RepositoriesInit()
{
	// ?????

	SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL, R_LABEL, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 2387.6606, 1757.4240, -1.8463 + 1.0, 20.0));
	SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL, R_LABEL_2, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 2317.1355, 1738.4092, 5.0, 25.0));

	UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL);

	// ----------------------
	SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_LABEL, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, -2568.2881, 297.3934, -15.7620 + 2.5, 15.0));
	SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_LABEL_2, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 2382.7622, 1720.6998, 4.0, 30.0));

	UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE);

	// ----------------------
	SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_REMELTI, R_LABEL, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 2387.6606, 1752.0416, -1.8463 + 1.0, 20.0));
	UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_REMELTI);

	SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_REMELTI, R_NOT_SAVE, true);
	SetTimer("UpdateMinerRemelting", 10_000, false);

	// ?????
	SetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_LABEL, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, -1046.6550,2208.5771, 41.0, 20.0));
	SetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_LABEL_2, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 263.7803, -203.8183, 1010.0, 15.0));

	factory_store_label[0] = CreateDynamic3DTextLabel("?? ??????:\n{FF9900}ù??????: 0 / 1000000 ?\n\n{6699FF}/sellf", 0xFFFFFFFF, -1120.4103,2175.6133,38.0294, 20.0); // ???????
	factory_store_label[1] = CreateDynamic3DTextLabel("?? ??????:\n{FF9900}?????????: 0 / 1000000 ??\n\n{6699FF}/sellm", 0xFFFFFFFF, -1043.8157,2205.5217,38.1195, 20.0); // ?????

	CreateDynamic3DTextLabel("?????\n?????????????????\n????\n\n{6699FF}/sellf\n/sellm\n{33CC00}/buyprod", 0xFFFFFFFF, -1046.6550, 2208.5771, 42.0, 25.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, _, _, _, _, 50.0);
	UpdateRepository(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL);

	// ??????????
	CreateDynamic3DTextLabel("??ù??\n\n{FFFFFF}??????? ??????? ??ù ???", 0xFF6600FF, 977.3191, 630.5245, 12.1154 - 0.5, 20.0);
	CreateDynamic3DTextLabel("???????\n\n{FFFFFF}??????? ??????? ??ù ??????", 0xFF6600FF, 977.3191, 635.4105, 12.1154 - 0.5, 20.0);

	SetRepositoryData(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F, R_LABEL, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 2738.3379,-2273.0725,17.9063 + 5.0, 35.0)); // ??ù ???
	SetRepositoryData(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F, R_LABEL_2, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 2710.3369,-2383.5164,17.9063 + 5.0, 35.0)); // ??ù ??????

	UpdateRepository(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F);
	SetTimer("UpdateOilFactory", 30_000, false);

	// ???????ù ?????
	SetRepositoryData(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL, R_LABEL, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 1562.881469,1642.907470,15.971530 + 1.5, 15.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, 18, 3)); // ?????????
	SetRepositoryData(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_AMMO, R_LABEL, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 1584.912963,1636.776245,16.058158 + 1.5, 15.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, 18, 3)); // ???????

	UpdateRepository(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL);
	UpdateRepository(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_AMMO);

	// ?????????
	SetRepositoryData(REPOSITORY_TYPE_SAWMILL, REPOSITORY_ACTION_SAWMILL_WOOD, R_LABEL, CreateDynamic3DTextLabel("-No Init-", 0xFFFFFFFF, 2411.6389,-599.9781,12.3683 + 2.0, 10.0)); // ?????? ?? ?????????

	UpdateRepository(REPOSITORY_TYPE_SAWMILL, REPOSITORY_ACTION_SAWMILL_WOOD);

	print("[Repositories]: ??? ?????? ??????????");
}

stock UpdateRepository(type, actionid)
{
	new fmt_str[128];
	new amount = GetRepositoryData(type, actionid, R_AMOUNT);
	new Text3D: label = GetRepositoryData(type, actionid, R_LABEL);
	new Text3D: label_2 = GetRepositoryData(type, actionid, R_LABEL_2);

	switch(type)
	{
		case REPOSITORY_TYPE_MINER:
		{
			switch(actionid)
			{
				case REPOSITORY_ACTION_MINER_METAL:
				{
					format(fmt_str, sizeof fmt_str, "??????? ??????????\n(??ù ???????????)\n\n{FFCD00}?? ?????? %d ??\n??????: /buym", amount);
					UpdateDynamic3DTextLabelText(label_2, 0xFFFFFFFF, fmt_str);

					format(fmt_str, sizeof fmt_str, "?????????\n{0099CC}?? ??????:\n%d ??", amount);
					UpdateDynamic3DTextLabelText(label, 0xFFFFFFFF, fmt_str);
				}
				case REPOSITORY_ACTION_MINER_ORE:
				{
					format(fmt_str, sizeof fmt_str, "????\n{00CC00}?? ??????:\n%d ??", amount);
					UpdateDynamic3DTextLabelText(label, 0xFFFFFFFF, fmt_str);

					UpdateDynamic3DTextLabelText(label_2, 0xFFFFFFFF, fmt_str);
				}
				case REPOSITORY_ACTION_MINER_REMELTI:
				{
					format(fmt_str, sizeof fmt_str, "???????\n{CC9900}%d ?? ????\n?? ??????????", amount);
					UpdateDynamic3DTextLabelText(label, 0xFFFFFFFF, fmt_str);
				}
			}
		}
		case REPOSITORY_TYPE_FACTORY:
		{
			switch(actionid)
			{
				case REPOSITORY_ACTION_FACTORY_METAL..REPOSITORY_ACTION_FACTORY_PROD:
				{
					if(actionid != REPOSITORY_ACTION_FACTORY_PROD)
					{
						format(fmt_str, sizeof fmt_str, "?? ??????:\n{FF9900}ù??????: %d / 1000000 ?\n\n{6699FF}/sellf", GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL, R_AMOUNT));
						UpdateDynamic3DTextLabelText(factory_store_label[0], 0xFFFFFFFF, fmt_str);

						format(fmt_str, sizeof fmt_str, "?? ??????:\n{FF9900}?????????: %d / 1000000 ??\n\n{6699FF}/sellm", GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_AMOUNT));
						UpdateDynamic3DTextLabelText(factory_store_label[1], 0xFFFFFFFF, fmt_str);
					}

					label = GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_LABEL);
					label_2 = GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_LABEL_2);

					format
					(
						fmt_str, sizeof fmt_str,
						"???????? ???????:\n"\
						"{FF9900}ù??????: %d / 1000000 ?\n"\
						"?????????: %d / 1000000 ??\n"\
						"{33CC00}????????: %d ??.",
						GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL, R_AMOUNT),
						GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_AMOUNT),
						GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_PROD, R_AMOUNT)
					);
					UpdateDynamic3DTextLabelText(label, 0xFFFFFFFF, fmt_str);
					UpdateDynamic3DTextLabelText(label_2, 0xFFFFFFFF, fmt_str);
				}
			}
		}
		case REPOSITORY_TYPE_OIL_FACTORY:
		{
			switch(actionid)
			{
				case REPOSITORY_ACTION_OIL_FACTORY_F:
				{
					format(fmt_str, sizeof fmt_str, "ù?????? ??ù ???\n\n{FFCD00}?? ??????\n%d ? ???????\n{33FF00}??????: /buyf", amount);
					UpdateDynamic3DTextLabelText(label, 0xFFFFFFFF, fmt_str);

					format(fmt_str, sizeof fmt_str, "ù?????? ??ù ??????\n\n{FFCD00}?? ??????\n%d ? ???????\n{33FF00}??????: /buyf", amount);
					UpdateDynamic3DTextLabelText(label_2, 0xFFFFFFFF, fmt_str);
				}
			}
		}
		case REPOSITORY_TYPE_ARMY:
		{
			switch(actionid)
			{
				case REPOSITORY_ACTION_ARMY_METAL:
				{
					format(fmt_str, sizeof fmt_str, "????????? ?? ??????:\n{66cc33}%d ??\n\n{9999ff}/takem\n/putm", amount);
					UpdateDynamic3DTextLabelText(label, 0xFFFFFFFF, fmt_str);
				}
				case REPOSITORY_ACTION_ARMY_AMMO:
				{
					format(fmt_str, sizeof fmt_str, "??????? ?? ??????:\n%d / 200000 ??.", amount);
					UpdateDynamic3DTextLabelText(label, 0xFFCD00FF, fmt_str);
				}
			}
		}
		case REPOSITORY_TYPE_SAWMILL:
		{
			switch(actionid)
			{
				case REPOSITORY_ACTION_SAWMILL_WOOD:
				{
					format(fmt_str, sizeof fmt_str, "?? ??????:\n{FF9900}??????: %d / 1000000 ??", GetRepositoryData(REPOSITORY_TYPE_SAWMILL, REPOSITORY_ACTION_SAWMILL_WOOD, R_AMOUNT));
					UpdateDynamic3DTextLabelText(label, 0xFFFFFFFF, fmt_str);
				}
			}
		}
	}
}

public: UpdateOilFactory()
{
	new add_fuels = (random(2500) + 500);
	new fuels = GetRepositoryData(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F, R_AMOUNT) + add_fuels;

	new time = (random(fuels <= 20_000 ? 1 : 180) + 60) * 1000;

	SetRepositoryData(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F, R_AMOUNT, fuels);
	UpdateRepository(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F);

	SetTimer("UpdateOilFactory", time, false);
}

public: UpdateMinerRemelting()
{
	new remelting = GetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_REMELTI, R_AMOUNT);
	new ore = GetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_AMOUNT);
	new metall = GetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL, R_AMOUNT);
	new rand;

	// ????? ? ?????????? ????
	rand = random(90) + 11; // ?? 10 ?? 100;
	if(remelting > 0) // ???? ?? ?????????? ???? ????
	{
		if(rand > remelting) // ???? ??ù?? ?????? ??? ????
			rand = remelting; // ????? ??? ??? ????????

		remelting -= rand;

		SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_REMELTI, R_AMOUNT, remelting); // ??????? ? ??????????
		SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL, R_AMOUNT, metall + rand); // ???????? ?? ????? ?????????
	}

	// ????? ?? ?????? ????
	rand = random(90) + 11; // ?? 10 ?? 100;
	if(remelting < 100) // ???? ?? ??????????? ?????? 100 ??
	{
		if(rand > ore) // ???? ??ù?? ?????? ??? ?? ??????
			rand = ore; // ????? ??? ??? ????????

		SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE, R_AMOUNT, ore - rand); // ??ù?? ?? ??????
		SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_REMELTI, R_AMOUNT, remelting + rand); // ???????? ? ??????????
	}

	UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_ORE);
	UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_REMELTI);

	UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL);

	SetTimer("UpdateMinerRemelting", (random(16)+15) * 1000, false);
}

stock SaveRepository(type = -1, actionid = -1)
{
	new fmt_str[128];

	if(type != -1 && actionid != -1)
	{
		format(fmt_str, sizeof fmt_str, "UPDATE repositories SET amount=%d WHERE type=%d AND action_id=%d LIMIT 1", GetRepositoryData(type, actionid, R_AMOUNT), type, actionid);
		mysql_query(mysql, fmt_str, false);
	}
	else
	{
		for(new idx, idx_2; idx < sizeof g_repository; idx ++)
		{
			for(idx_2 = 0; idx_2 < sizeof g_repository[]; idx_2 ++)
			{
				if(GetRepositoryData(idx, idx_2, R_NOT_SAVE)) continue;

				format(fmt_str, sizeof fmt_str, "UPDATE repositories SET amount=%d WHERE type=%d AND action_id=%d LIMIT 1", GetRepositoryData(idx, idx_2, R_AMOUNT), idx, idx_2);
				mysql_query(mysql, fmt_str, false);
			}
		}
	}
}

stock PreLoadPlayerAnimList(playerid)
{
	if(!GetPlayerData(playerid, P_ANIM_LIST_INIT))
	{
		PreLoadPlayerAnims(playerid);
		SetPlayerData(playerid, P_ANIM_LIST_INIT, true);

		return 1;
	}
	return 0;
}

stock SetPlayerAnimation(playerid, animid)
{
	if(0 <= animid <= sizeof anim_list-1)
	{
		if(!IsPlayerInAnyVehicle(playerid))
		{
			switch(animid+1)
			{
				case 1..4:
				{
					SetPlayerSpecialAction(playerid, SPECIAL_ACTION_DANCE1 + animid);
				}
				default:
				{
					new type = USE_ANIM_TYPE_NONE - 1;
					if(GetAnimListData(animid, AL_LOOP))
					{
						SetPlayerData(playerid, P_USE_ANIM, true);
						UseAnimWerton[playerid] = 1;
						//CreateAnimTD(playerid);
					}
					else
					{
						if(IsPlayerUseAnim(playerid))
						{
							SetPlayerData(playerid, P_USE_ANIM, false);
							UseAnimWerton[playerid] = 0;
							//HideAnimTD(playerid);
						}
						type = USE_ANIM_TYPE_NONE;
					}
					ApplyAnimationEx(playerid, GetAnimListData(animid, AL_LIB), GetAnimListData(animid, AL_NAME), GetAnimListData(animid, AL_DELTA), (GetAnimListData(animid, AL_LOOP) % 2), GetAnimListData(animid, AL_LOCK_X), GetAnimListData(animid, AL_LOCK_Y), GetAnimListData(animid, AL_FREEZE), GetAnimListData(animid, AL_TIME), 0, type);
				}
			}
		}
		return 1;
	}
	return 0;
}

stock ClearPlayerUseAnim(playerid)
{
    HideAnimTD(playerid);
    
	if(IsPlayerUseAnim(playerid))
	{
		SetPlayerData(playerid, P_USE_ANIM_TYPE, USE_ANIM_TYPE_NONE);

		SetPlayerData(playerid, P_USE_ANIM, false);
		
		HideAnimTD(playerid);

		ClearPlayerAnim(playerid);
	}
}

stock IsValidMail(email[], len = sizeof email)
{
    new count[2];
    if(!(5 <= len <= 60)) return 0;
    for(new i; i != len; i++)
    {
		switch(email[i])
		{
			case '@':
			{
				count[0]++;
				if(count[0] != 1 || i == len - 1 || i == 0) return 0;
			}
			case '.':
			{
				if(count[0] == 1 && count[1] == 0 && i != len - 1)
				{
					count[1] = 1;
				}
			}
			case '0'..'9', 'a'..'z', 'A'..'Z', '_', '-':
			{
				continue;
			}
			default:
				return 0;
		}
    }
    if(count[1] == 0) return 0;
    return 1;
}

stock ShowPlayerRegDialog(playerid, step)
{
	if(GetPlayerData(playerid, P_ACCOUNT_STATE) != ACCOUNT_STATE_REGISTER) return 0;
//SendClientMessage(playerid, 0xFFFF00FF, "{34C924}| {FFFFFF}????? ?????????? ?? {FF6347}"SERVER_NAME"!");
	switch(step)
	{
		case REGISTER_STATE_PASSWORD:
		{
			Dialog
			(
				playerid, DIALOG_REGISTER, DIALOG_STYLE_INPUT,
				"{66CCFF}??????????ù",
				"{FFFFFF}????? ?????????? ?? {FF6347}"SERVER_NAME"{ffffff}!\n"\
				"????? ?????? ???? ??????? ?????????? ?????????????????ù\n\n"\
				"?????????? ??????? ?????? ??ù ?????? ????????\n"\
				"?? ????? ????????????ù ?????? ???, ????? ?? ???????? ?? ??????\n\n"\
				"\t{66CC66}?????????ù:\n"\
				"\t- ?????? ????? ?????ù?? ?? ??????? ? ????????? ????????\n"\
				"\t- ?????? ???????????? ? ????????\n"\
				"\t- ????? ?????ù ?? 6-?? ?? 15-?? ????????",
				"?????", ""
			);
		}
		case REGISTER_STATE_REFER:
		{
			Dialog
			(
				playerid, DIALOG_REGISTER, DIALOG_STYLE_INPUT,
				"{66CCFF}??? ????????????? ??????",
				"{FFFFFF}???? ?? ?????? ? ????? ??????? ?? ?????? ?????\n"\
				"??????? ??? ??????, ??????? ??? ??? ? ???? ????\n\n"\
				"{66CC66}??? ?????????? ???? 4-?? ?????ù ?? ??????? ??????????????",
				"??????", "??????????"
			);
		}
		case REGISTER_STATE_SEX:
		{
			Dialog
			(
				playerid, DIALOG_REGISTER, DIALOG_STYLE_MSGBOX,
				"{66CCFF}???",
				"{FFFFFF}???????? ??? ?????? ?????????",
				"???????", "???????"
			);
		}
		case REGISTER_STATE_RULES:
		{
			ShowServerRules(playerid, true);
		}
		case REGISTER_STATE_CREATE_ACC:
		{
			if(CreatePlayerAccount(playerid))
			{
				SetPlayerData(playerid, P_ACCOUNT_STATE, ACCOUNT_STATE_REG_SKIN);

				SetSpawnInfo(playerid, 0, 0, 332.2033, -174.1066, 999.6743, 1.0, 0, 0, 0, 0, 0, 0);
				SpawnPlayer(playerid);
				
				//SendClientMessage(playerid, 0xFFFFFFFF, "???????? ?????? ???????!");
				SendClientMessage(playerid, 0x66CC00FF, "???????? ????????? ?????? ?????????");
				
				SetPlayerData(playerid, P_OCCUPIED_BED, -1);

			}
			else
			{
				SendClientMessage(playerid, 0xFF6600FF, "?????? ???????ù ????????, ??????????? ? ????????? ???????");
				Kick:(playerid);
			}
		}
		default:
			return 1;
	}

	SetPlayerData(playerid, P_ACCOUNT_STEP_STATE, step);
	return 1;
}

stock ShowServerRules(playerid, bool: reg = false)
{
	Dialog
	(
		playerid, reg ? DIALOG_REGISTER : DIALOG_PLAYER_STATS, DIALOG_STYLE_MSGBOX,
		"{66CCFF}??????? ???????",
		"{FFCD00}1. ????????\n"\
		"{FFFFFF}- ????????? ???????????? ????? ???? ??? CLEO ???????\n"\
		"- ???????? DM -????????? ????? ??????? ??? ???????\n"\
		"- ????????? ??????? ??????? ?? ??????\n"\
		"- ????????? ???????? ????? ?????? ?? ????\n"\
		"- ????????? ??????? ?? ????? ? ???ù? ???????ù\n"\
		"- ????????? ????????????? ???????????? ??????? ??ù ???????ù ?????\n\n"\
		"{FFCD00}2. ??????? ??????ù\n"\
		"{FFFFFF}- ????????? ??????????? ???????\n"\
		"- ????????? ?????? ??? ????\n"\
		"- ????????? ?????? ??????????\n"\
		"- ????????? ????ù ??????? ????????? ????????\n"\
		"- ????????? ???????\n\n"\
		"{FFCD00}3. ????????????ù\n"\
		"- ?????????? ???????? ????????????? ??????? ? ????????ù ?????? ??????\n"\
		"- ????????????ù ???????ù?????? ???????? ???????? ???????\n"\
		"- ??????? ????? ??????ù???ù ????? ????? ????????ù ??? ????? ????ù\n"\
		"- ??? ??????????, ??ù?????? ? ??????????????",
		"??????????", "??????"
	);
}

stock GetPlayerHouseName(playerid)
{
	new name[32];
	new houseid = GetPlayerHouse(playerid);

	if(houseid != -1)
	{
		switch(GetPlayerData(playerid, P_HOUSE_TYPE))
		{
			case HOUSE_TYPE_HOME:
			{
				if(GetHouseData(houseid, H_ENTRACE) != -1)
				{
					format(name, sizeof name, "??????? %d (?%d ?? %d ?????)", GetHouseData(houseid, H_ENTRACE) + 1, GetHouseData(houseid, H_FLAT_ID) + 1, GetHouseData(houseid, H_FLAT_ID) / 4 + 1);
				}
				else format(name, sizeof name, "%s (?%d)", GetHouseData(houseid, H_NAME), houseid);
			}
			case HOUSE_TYPE_ROOM:
			{
				format(name, sizeof name, "? ????ù? (??? ?%d)", houseid);
			}
			case HOUSE_TYPE_HOTEL:
			{
				format(name, sizeof name, "????????? (?%d ?? %d ?????)", (GetPlayerData(playerid, P_HOUSE_ROOM) % 12) + 1, (GetPlayerData(playerid, P_HOUSE_ROOM) / 12) + 1);
			}
		}
	}
	else name = "?????????";

	return name;
}

stock GetPlayerBizName(playerid)
{
	new name[32];
	new businessid = GetPlayerBusiness(playerid);

	if(businessid != -1)
	{
		format(name, sizeof name, "%s (?%d)", GetBusinessData(businessid, B_NAME),  businessid);
	}
	else name = "???";

	return name;
}

stock GetPlayerJobAndRankName(playerid)
{
	new team = GetPlayerTeamEx(playerid);
	new rang = GetPlayerJob(playerid);
	new fmt_rank[32];

	if(TEAM_GOVERNMENT <= team <= TEAM_OPG_LYTKARINSKAYA)
	{
		if(!(1 <= rang <= 10))
			rang = 1;

		format(fmt_rank, sizeof fmt_rank, rank_names[team - 1][rang - 1]);
	}
	else
	{
	    format(fmt_rank, sizeof fmt_rank, GetPlayerJobName(playerid));
	}

	return fmt_rank;
}

stock IsTeamSubdivision(team)
{
	if(TEAM_DPS <= team <= TEAM_FBI)
	{
		return true;
	}
	return false;
}

stock GetPlayerSubdivisionName(playerid)
{
	new player_team = GetPlayerTeamEx(playerid);

	if(IsTeamSubdivision(player_team))
		return team_subdivision_name[player_team - 4];

	return team_subdivision_name[0];
}

stock GetPlayerTeamStats(playerid)
{
	new fmt_text[110];

	format(fmt_text, sizeof fmt_text, "??????????ù:\t\t\t%s\n", GetPlayerTeamName(playerid));

	if(IsTeamSubdivision(GetPlayerTeamEx(playerid)))
	{
	    format(fmt_text, sizeof fmt_text, "%s?????????????:\t\t%s\n", fmt_text, GetPlayerSubdivisionName(playerid));
	}

	return fmt_text;
}

stock GetPlayerGameStatus(playerid)
{
	new status[16];

	switch(GetPlayerLevel(playerid))
	{
	    case 0: status = "??????";
	    case 1: status = "??? ???????";
	    case 2..5: status = "???????";
	    case 6..9: status = "????????????ù";
	    case 10..14: status = "??????????ù";
	    case 15..19: status = "??????? ?????";
	    case 20..29: status = "???????? ?????";
	    default: status = "???????????";
	}

	if(GetPlayerTeamEx(playerid) && (GetPlayerJob(playerid) == 10)) status = "?????";
	if(GetPlayerAdminEx(playerid) != 0) status = "?????????????";

	return status;
}

stock ShowPlayerStats(playerid, for_playerid)
{
    new fmt_str[1024];
    
    new rank_value[3] = "ó";

    if(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)
    {
        if(1 <= GetPlayerJob(playerid) <= 10)
            valstr(rank_value, GetPlayerJob(playerid));
        else
            rank_value = "1";
    }

    format
    (
        fmt_str, sizeof(fmt_str),
        "{FFFFFF}??ù:\t\t\t\t{0099FF}%s\n"\
        "{FFFFFF}???????:\t\t\t%d\n"\
        "???? ?????:\t\t\t%d ?? %d\n"\
        "????? ????????:\t\t%d\n"\
        "?? ????? ????????:\t\t%d ???\n"\
        "?????????????????:\t\t%d\n"\
        "??????? ???????:\t\t%d\n"\
        "??????? ?????????:\t\t%d\n"\
        "????:\t\t\t\t%d\n"\
        "?????????:\t\t\t%d\n"\
        "???????:\t\t\t%d\n"\
        "?????????:\t\t\t%d\n"\
        "???:\t\t\t\t%s\n"\
        "%s:\t\t\t%s\n\n"\
        "%s"\
        "?????? / ?????????:\t\t%s\n"\
        "????:\t\t\t\t%s\n\n"\
        "??????????:\t\t\t%s\n"\
        "??????:\t\t\t%s\n"\
        "??????? ??????:\t\t%s\n",
        GetPlayerNameEx(playerid),
        GetPlayerLevel(playerid),
        GetPlayerExp(playerid),
        GetExpToNextLevel(playerid),
        GetPlayerPhone(playerid),
        GetPlayerData(playerid, P_PHONE_BALANCE), 
        GetPlayerData(playerid, P_LAW_ABIDING),
        GetPlayerSuspect(playerid),
        GetPlayerData(playerid, P_IMPROVEMENTS),
        GetPlayerData(playerid, P_POWER),
        GetPlayerData(playerid, P_DRUGS),
        GetPlayerData(playerid, P_AMMO),
        GetPlayerData(playerid, P_METALL),
        GetPlayerSexName(playerid),
        GetPlayerSex(playerid) ? ("??????? ??") : ("????? ??"),
        GetPlayerData(playerid, P_WIFE_NAME),
        GetPlayerTeamStats(playerid),
        GetPlayerJobAndRankName(playerid),
        rank_value,
        GetPlayerHouseName(playerid),
        GetPlayerBizName(playerid),
        GetPlayerGameStatus(playerid)
    );

    return Dialog(for_playerid, DIALOG_PLAYER_STATS, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ?????????? ??????", fmt_str, "?????", "???????");
}

stock ShowPlayerStatsAdmin(playerid, for_playerid)
{
    new fmt_str[1024];
    
    new rank_value[3] = "ó";

    if(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)
    {
        if(1 <= GetPlayerJob(playerid) <= 10)
            valstr(rank_value, GetPlayerJob(playerid));
        else
            rank_value = "1";
    }

    format
    (
        fmt_str, sizeof(fmt_str),
        "{FFFFFF}??ù:\t\t\t\t{0099FF}%s\n"\
        "{FFFFFF}???????:\t\t\t%d\n"\
        "???? ?????:\t\t\t%d ?? %d\n"\
        "????? ????????:\t\t%d\n"\
        "?? ????? ????????:\t\t%d ???\n"\
        "?????????????????:\t\t%d\n"\
        "??????? ???????:\t\t%d\n"\
        "??????? ?????????:\t\t%d\n"\
        "????:\t\t\t\t%d\n"\
        "?????????:\t\t\t%d\n"\
        "???????:\t\t\t%d\n"\
        "?????????:\t\t\t%d\n"\
        "???:\t\t\t\t%s\n"\
        "%s:\t\t\t%s\n\n"\
        "%s"\
        "?????? / ?????????:\t\t%s\n"\
        "????:\t\t\t\t%s\n\n"\
        "??????????:\t\t\t%s\n"\
        "??????:\t\t\t%s\n"\
        "??????? ??????:\t\t%s\n",
        GetPlayerNameEx(playerid),
        GetPlayerLevel(playerid),
        GetPlayerExp(playerid),
        GetExpToNextLevel(playerid),
        GetPlayerPhone(playerid),
        GetPlayerData(playerid, P_PHONE_BALANCE), 
        GetPlayerData(playerid, P_LAW_ABIDING),
        GetPlayerSuspect(playerid),
        GetPlayerData(playerid, P_IMPROVEMENTS),
        GetPlayerData(playerid, P_POWER),
        GetPlayerData(playerid, P_DRUGS),
        GetPlayerData(playerid, P_AMMO),
        GetPlayerData(playerid, P_METALL),
        GetPlayerSexName(playerid),
        GetPlayerSex(playerid) ? ("??????? ??") : ("????? ??"),
        GetPlayerData(playerid, P_WIFE_NAME),
        GetPlayerTeamStats(playerid),
        GetPlayerJobAndRankName(playerid),
        rank_value,
        GetPlayerHouseName(playerid),
        GetPlayerBizName(playerid),
        GetPlayerGameStatus(playerid)
    );

    return Dialog(for_playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ?????????? ??????", fmt_str, "???????", "");
}

stock ShowPlayerCMDSDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_PLAYER_CMDS, DIALOG_STYLE_LIST,
		"{DC143C}"SERVER_NAME"{ffffff} | ?????? ??????",
		""c_b"1. ù????????\n"\
		"2. ???????\n"\
		"3. ????\n"\
		"4. ?????? ? ???\n"\
		"5. ??????\n"\
		"6. ?????\n"\
		"7. ?????????????\n"\
		"8. ????ù\n"\
		"9. ??????ù\n"\
		"10. ????\n"\
		"11. ???\n"\
		"12. ????????\n"\
		"13. ??????\n"\
		"14. ?????",
		"???????", "?????"
	);
	return 1;
}

stock ShowPlayerSettings(playerid)
{
}
stock ShowPlayerSecuritySettings(playerid)
{
	Dialog
	(
		playerid, DIALOG_PLAYER_SECURITY_SETTINGS, DIALOG_STYLE_LIST,
		"{FFCD00}????????? ????????????",
		"1. ?????????ù ? ??????????\n"\
		"2. ????????? ???????\n"\
		"3. '?????????' PIN-???\n"\
		"4. Google Authenticator\n"\
		"{00CC66}5. ???????? ??????\n"\
		"6. ???????? '?????????' PIN-???\n"\
		"{0099FF}7. ?????? ????????????\n"\
		"{999999}8. ??????????? Email",
		"???????", "?????"
	);
}

stock ShowPlayerReportDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_REPORT, DIALOG_STYLE_INPUT,
		"{FFCD00}??ù?? ? ??????????????",
		"{FFFFFF}?? ??????????? ???????? ????????????? ???????\n\
		{FFFFFF}????? ??? ??? ????????? ?????????\n\
		{FFFFFF}?????????, ??? ???? ?? ??????? ?????? ?? ??? ??? ?????? ?? ??? ??????\n\
		{FF3300}?????????:\n\
		{FFFFFF}- ????, ?????????????, ??????\n\
		{FFFFFF}- ???????????? ??????? ????????? ('???? ?????', '???? ???????', '???? ?????')\n\
		{FFFFFF}- ?????? ????????ù ? ?????????\n\n\
		{FF3300}?? ????????? ?????? ????????????? ?????:\n\
		{FFFFFF}- ???????????? (warn)\n\
		{FFFFFF}- ????????? ?? ??????? (kick)\n\
		{FFFFFF}- ?????? ??????????? ?????? (mute)\n\
		{FFFFFF}- ????????????? (ban)\n\n\
		{FFFFFF}?????? ??????? ??????????? ??ù ???? ??????? {339966}RUSSIA-MOBILE.RU",
		"?????????", "?????"
	);
}

stock ShowPlayerAskDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_ASK, DIALOG_STYLE_INPUT,
		"{FFCD00}??ù?? ? ??????????? ???????",
		"{FFFFFF}?? ??????????? ?????? ?????? ?????????? ???????\n\
		{FFFFFF}????? ??? ??? ????????? ?????????\n\
		{FFFFFF}?????????, ??? ???? ?? ??????? ?????? ?? ??? ??? ?????? ?? ??? ??????\n\
		{FF3300}?????????:\n\
		{FFFFFF}- ????, ?????????????, ??????\n\
		{FFFFFF}- ???????????? ??????? ????????? ('???? ?????', '???? ???????', '???? ?????')\n\
		{FFFFFF}- ?????? ????????ù ? ?????????\n\n\
		{FF3300}?? ????????? ?????? ????????????? ?????:\n\
		{FFFFFF}- ???????????? (warn)\n\
		{FFFFFF}- ????????? ?? ??????? (kick)\n\
		{FFFFFF}- ?????? ??????????? ?????? (mute)\n\
		{FFFFFF}- ????????????? (ban)\n\n\
		{FFFFFF}?????? ??????? ??????????? ??ù ???? ??????? {339966}RUSSIA-MOBILE.RU",
		"?????????", "?????"
	);
}

stock ShowPlayerChangeNameDialog(playerid)
{
	Dialog
	(
		playerid, DIALOG_CHANGE_NAME, DIALOG_STYLE_INPUT,
		"{DC143C}"SERVER_NAME"{ffffff} | ????????? ??ù",
		"{FFFFFF}?? ?????? ???????? ??ù ?????? ?????????, ???? ??? ?? ????????????? RP ????????\n"\
		"?? ???? ????????? ?????ù? ????? ????? ?????????ù???ù ? {6699FF}/menu > ?????????????.\n\n"\
		"{FFFFFF}RP ??? ????? ?????? ??ù_??????ù.\n"\
		"????????: Andrey_Ivanov, Nikolas_Ryan, Kate_Valente ? ?. ?.\n\n"\
		"??????? ????? ??ù ? ???? ????. ????????? ?????? ????????? ???????:",
		"????????", "???????"
	);
}

stock ShowPlayerImprovementsDialog(playerid)
{
	new fmt_str[67 + 1];
	new dest[((sizeof(fmt_str)-1) * (sizeof(g_player_improvements))) + 10 + 1];

	new str_numeric[14 + 1];
	new my_i_level = GetPlayerData(playerid, P_IMPROVEMENTS);

	for(new idx = 0; idx < sizeof g_player_improvements; idx ++)
	{
		format(fmt_str, sizeof fmt_str, "%d. %s\t\t", idx + 1, GetPlayerImprovementInfo(idx, I_NAME));
		if(idx == 2)
			strcat(fmt_str, "\t");

		if(my_i_level > idx)
		{
			strins(fmt_str, "{FFCD00}", 0);
			strcat(fmt_str, "???????\n");
			strcat(dest, fmt_str);

			continue;
		}
		else if(my_i_level < idx)
		{
			strins(fmt_str, "{FF3333}", 0);
		}
		else
		{
			strcat(fmt_str, "{00CC00}");
		}
		strcat(dest, fmt_str);
		valfmt(str_numeric, GetPlayerImprovementInfo(idx, I_PRICE));

		format(fmt_str, sizeof fmt_str, "????????ù %d ??????? ? %s ???\n", GetPlayerImprovementInfo(idx, I_LEVEL), str_numeric);
		strcat(dest, fmt_str);
	}
	strcat(dest, "?????????ù");

	return Dialog(playerid, DIALOG_PLAYER_IMPROVEMENTS, DIALOG_STYLE_LIST, "{FFCD00}????????ù", dest, "???????", "?????");
}

stock SendMessageToAdmins(message[], color, a_level = 1)
{
	if(a_level < 1)
		a_level = 1;

	new count;
	foreach(new playerid : Player)
	{
		if(!IsPlayerLogged(playerid)) continue;
		if(GetPlayerAdminEx(playerid) < a_level) continue;

		SendClientMessage(playerid, color, message);
		count ++;
	}
	return count;
}

stock SendMessageToHelpers(message[], color, h_level = 1)
{
	if(h_level < 1)
		h_level = 1;

	new count;
	foreach(new playerid : Player)
	{
		if(!IsPlayerLogged(playerid)) continue;
		if(GetPlayerHelperEx(playerid) < h_level) continue;

		SendClientMessage(playerid, color, message);
		count ++;
	}
	return count;
}

stock SendMessageToTeam(team, message[], color = -1, playerid = -1)
{
	for(new i; i < MAX_PLAYERS; i++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;

		if(P_MASCIR[i] == team || GetPlayerTeamEx(i) == team)
		{
			// ????????: ??????? ???? ???????
			if(GetPlayerData(i, P_WORKDAY) == 1)
			{
				SendClientMessage(i, color, message);
			}
		}
	}
	return 1;
}

stock SendMessageToPoliceTeam(const message[], color = 0xFFD700FF)
{
	for (new i = 0; i < MAX_PLAYERS; i++)
	{
		if (!IsPlayerConnected(i)) continue;
		if (!IsPlayerLogged(i)) continue;

		new team = GetPlayerTeamEx(i);
		if (team == TEAM_DPS || team == TEAM_PPS || team == TEAM_FBI)
		{
			SendClientMessage(i, color, message);
		}
	}
	return 1;
}

stock SendMessageToGang(message[], color = -1, playerid = -1)
{
	SendMessageToTeam(TEAM_OPG_ARZAMASKAYA, message, color, playerid);
	SendMessageToTeam(TEAM_OPG_BATYREVSKAYA, message, color, playerid);
	SendMessageToTeam(TEAM_OPG_LYTKARINSKAYA, message, color, playerid);

	return 1;
}

stock SendMessageToJob(to_job, message[], color = -1, playerid = -1, bool: org_chat = false)
{
	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		else if(!IsPlayerLogged(i)) continue;
		else if(GetPlayerJob(i) != to_job) continue;
		else if(org_chat && !GetPlayerSettingData(i, S_TEAM_CHAT)) continue;
		else if(playerid == i) continue;

		SendClientMessage(i, color, message);
	}
	return 1;
}

stock HidePlayerDialog(playerid)
{
	return Dialog(playerid, -1, DIALOG_STYLE_MSGBOX, "NULL", "NULL", "NULL", "NULL");
}

stock Shuffle(array[], size = sizeof array)
{
	new
		index,
		rand,
		buffer;

	for(index = 0; index < size; index ++)
	{
		rand = random(size);
		buffer = array[index];

		array[index] = array[rand];
		array[rand] = buffer;
	}
}

stock ShowPlayerPinCodePTD(playerid, s_state)
{
	if(GetPlayerPinCodeState(playerid) != PIN_CODE_STATE_NONE) return ;
	pin_code_input[playerid][0] = 0;

	switch(s_state)
	{
		case PIN_CODE_STATE_SET:
			SendClientMessage(playerid, 0x3399FFFF, "?????????? ???? PIN-??? ? ???????? ???");

		case PIN_CODE_STATE_CHECK:
			SendClientMessage(playerid, 0xFFFF00FF, "???????? ??? ??????? PIN-???");

		case PIN_CODE_STATE_CHANGE:
			SendClientMessage(playerid, 0xFFFF00FF, "???????? ????? PIN-???");

		case PIN_CODE_STATE_LOGIN_CHECK:
			SendClientMessage(playerid, 0xFFFFFFFF, "??????? ???????????? ??????????? ???? ?????? ?????????? PIN-????");

		default:
			return ;

	}

	new values[10] = {0, 1, ...};
	new ch[2];
	Shuffle(values);

	new Float: add_pos_x, Float: add_pos_y;
	for(new idx = 0; idx < 10; idx ++)
	{
		add_pos_x = ((idx % 3) * 40.0);
		add_pos_y = ((idx / 3) * 40.0);

		if(idx == 9)
			add_pos_x += 40.0;

		valstr(ch, values[idx]);
		SetPlayerPinCodeValue(playerid, idx, values[idx]);

		pin_code_PTD[playerid][idx] = CreatePlayerTextDraw(playerid, 420.0 + add_pos_x, 170.0 + add_pos_y, ch);
		PlayerTextDrawTextSize(playerid, pin_code_PTD[playerid][idx], 445.0 + add_pos_x, 25.0);
		PlayerTextDrawLetterSize(playerid, pin_code_PTD[playerid][idx], 1.0, 3.0);
		PlayerTextDrawAlignment(playerid, pin_code_PTD[playerid][idx], 1);
		PlayerTextDrawBackgroundColor(playerid, pin_code_PTD[playerid][idx], 0x000000FF);
		PlayerTextDrawBoxColor(playerid, pin_code_PTD[playerid][idx], 0x80808080);
		PlayerTextDrawColor(playerid, pin_code_PTD[playerid][idx], 0xFFFFFFFF);
		PlayerTextDrawFont(playerid, pin_code_PTD[playerid][idx], 1);
		PlayerTextDrawSetOutline(playerid, pin_code_PTD[playerid][idx], 1);
		PlayerTextDrawSetProportional(playerid, pin_code_PTD[playerid][idx], 1);
		PlayerTextDrawSetShadow(playerid, pin_code_PTD[playerid][idx], 2);
		PlayerTextDrawUseBox(playerid, pin_code_PTD[playerid][idx], 1);
		PlayerTextDrawSetSelectable(playerid, pin_code_PTD[playerid][idx], 1);

		PlayerTextDrawShow(playerid, pin_code_PTD[playerid][idx]);
	}
	SelectTextDraw(playerid, 0x0066FFFF);

	SetPlayerPinCodeState(playerid, s_state);
}

stock HidePlayerPinCodePTD(playerid, bool: canel_select = true)
{
	if(GetPlayerPinCodeState(playerid) != PIN_CODE_STATE_NONE)
	{
		SetPlayerPinCodeState(playerid, PIN_CODE_STATE_NONE);

		if(canel_select)
			CancelSelectTextDraw(playerid);

		for(new idx = 0; idx < 10; idx ++)
		{
			PlayerTextDrawHide(playerid, pin_code_PTD[playerid][idx]);
			PlayerTextDrawDestroy(playerid, pin_code_PTD[playerid][idx]);
		}
	}
}

stock ShowCurrentTime(playerid)
{
	new
		hour, minute,
		year, month, day;

	gettime(hour, minute);
	getdate(year, month, day);

	SetPlayerChatBubble(playerid, "?????????(?) ?? ????ù", 0xDD90FFFF, 25.0, 7000);


	new fmt_str[350];

	format(fmt_str, sizeof fmt_str, "~y~%d:%02d~n~~b~~h~%02d.%02d.%d", hour, minute, day, month, year);
	GameTextForPlayer(playerid, fmt_str, 3000, 1);

	format
	(
		fmt_str, sizeof fmt_str,
		"??????ù??ùù ????:\t\t{ffff00}%d %s %d ?.\n"\
		"{FFFFFF}???? ??????:\t\t\t{ffff00}%s\n"\
		"{FFFFFF}ù?????? ????ù:\t\t{ffff00}%d:%02d\n\n"\
		"{FFFFFF}????ù ? ???? ?? ???:\t\t{ffff00}%d ???\n"\
		"{FFFFFF}????ù ? ???? ??????ù:\t{ffff00}%d ? %d ???\n"\
		"{FFFFFF}????ù ? ???? ?????:\t\t{ffff00}%d ? %d ???",
		day,
		GetMonthName(month),
		year,
		GetDayName(GetDayOfWeek(year, month, day)),
		hour,
		minute,
		ConvertUnixTime(GetPlayerData(playerid, P_GAME_FOR_HOUR), CONVERT_TIME_TO_MINUTES),
		ConvertUnixTime(GetPlayerData(playerid, P_GAME_FOR_DAY), CONVERT_TIME_TO_HOURS),
		ConvertUnixTime(GetPlayerData(playerid, P_GAME_FOR_DAY), CONVERT_TIME_TO_MINUTES),
		ConvertUnixTime(GetPlayerData(playerid, P_GAME_FOR_DAY_PREV), CONVERT_TIME_TO_HOURS),
		ConvertUnixTime(GetPlayerData(playerid, P_GAME_FOR_DAY_PREV), CONVERT_TIME_TO_MINUTES)
	);
	Action(playerid, "?????????(a) ?? ????ù");

	return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FF6347}"SERVER_NAME" {ffffff}| ù????? ????ù", fmt_str, "???????", "");
}

stock GetDayOfWeek(year, month, day)
{
    new a = (14 - month) / 12;
    new y = year + 4800 - a;
	new m = month + 12 * a - 3;
	new c_date = day + (153 * m + 2) / 5 + 365 * y + y / 4 - y / 100 + y / 400 - 32045;
	new day_of_week = c_date % 7 + 1;

    return day_of_week;
}

stock UpdateCharity()
{
	if(cache_is_valid(charity_cache_data))
	{
		cache_delete(charity_cache_data);
	}
	new Cache: result;

	result = mysql_query(mysql, "SELECT (SELECT a.name FROM accounts a WHERE a.id = c.uid) as name, SUM(c.money) as total FROM charity c GROUP BY c.uid ORDER BY total DESC LIMIT 25", true);
	charity_cache_data = result;
}

stock Dialog(playerid, dialogid, style, caption[], info[], button1[], button2[])
{
	SetPlayerData(playerid, P_LAST_DIALOG, dialogid);

	return ShowPlayerDialog(playerid, dialogid, style, caption, info, button1, button2);
}

stock abs(value)
{
	return value = -value;
}

stock IsNumeric(dest[], pos=0)
{
	new is_numeric = true;
	do
	{
		switch(dest[pos])
		{
			case '0'..'9': continue;
			default:
			{
				is_numeric = false;
				break;
			}
		}
	}
	while(dest[++pos]);

	return is_numeric;
}

stock valfmt(dest[], value, size = sizeof dest)
{
	new buffer[15 + 1];
	valstr(buffer, value);

	new pos = strlen(buffer);
	while((pos -= 3) > 0)
	{
		strins(buffer, ".", pos);
	}
	format(dest, size, "%s", buffer);
}

stock GetSubnet(dest[], ip[], size = sizeof dest)
{
	new pos, dots;
	do
	{
		if(ip[pos] == '.')
		{
			if(++dots == 2)
			{
				ip[pos] = 0;
				break;
			}
		}
	}
	while(ip[++pos]);

	format(dest, size, "%s", ip);
}

stock GetFamilyChatID(team)
{
	if(TEAM_GOVERNMENT <= team <= TEAM_RADIO)
	{
		return 1;
	}
	else if(TEAM_DPS <= team <= TEAM_FBI)
	{
		return 2;
	}
	else if(TEAM_OPG_ARZAMASKAYA <= team <= TEAM_OPG_LYTKARINSKAYA)
	{
		return team;
	}
	return 0;
}

stock GivePlayerMoneyEx(playerid, money, description[] = "None", bool:save = true, bool:game_text = true)
{
	if (money < 0 && GetPlayerMoneyEx(playerid) < money) return -1;

	new fmt_str[185];
	AddPlayerData(playerid, P_MONEY, +, money);
	GivePlayerMoney(playerid, money);

	format(fmt_str, sizeof fmt_str, "INSERT INTO money_log (uid,uip,time,money,description) VALUES (%d,'%s',%d,%d,'%s')",
		GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), money, description);
	mysql_query(mysql, fmt_str, false);

	if (save)
	{
		format(fmt_str, sizeof fmt_str, "UPDATE accounts SET money=%d WHERE id=%d LIMIT 1",
			GetPlayerMoneyEx(playerid), GetPlayerAccountID(playerid));
		mysql_query(mysql, fmt_str, false);
	}

	if (game_text)
	{
		if (money < 0)
		{
			format(fmt_str, sizeof fmt_str, "?? ????????? %d ??????.", -money);
			ShowNotificationNew(playerid, 0, 5, 0, 0, fmt_str, "");
		}
		else
		{
			format(fmt_str, sizeof fmt_str, "?? ???????? %d ??????.", money);
			ShowNotificationNew(playerid, 1, 5, 0, 0, fmt_str, "");
		}
	}

	return 1;
}

stock GivePlayerDonate(playerid, donate, description[]="None", bool:save=true)
{
	new fmt_str[185];
	AddPlayerData(playerid, P_DONATE_MONEY, +, donate);
	if(donate > 0) AddPlayerData(playerid, P_DONATE_TOTAL, +, donate);

	format(fmt_str, sizeof fmt_str, "INSERT INTO donate_log (uid,uip,time,donate,description) VALUES (%d,'%s',%d,%d,'%s')", GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), donate, description);
	mysql_query(mysql, fmt_str, false);

	if(save)
	{
		UpdatePlayerDatabaseInt(playerid, "donate_current", GetPlayerCurrentDonate(playerid));
		UpdatePlayerDatabaseInt(playerid, "donate_total", GetPlayerTotalDonate(playerid));
	}
	return 1;
}


stock GivePlayerDonateRub(playerid, donate, description[]="None", bool:save=true, bool:game_text=true)
{
	new fmt_str[185];
	
	AddPlayerData(playerid, P_DONATE_RUB, +, donate);

	format(fmt_str, sizeof fmt_str, "INSERT INTO donate_log (uid,uip,time,donate,description) VALUES (%d,'%s',%d,%d,'%s')", GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), donate, description);
	mysql_query(mysql, fmt_str, false);

	if(save)
	{
		UpdatePlayerDatabaseInt(playerid, "rub", GetPlayerDonateRub(playerid));
	}
	if(game_text)
	{
		format(fmt_str, sizeof fmt_str, "~w~%s%d rub", donate < 0 ? ("") : ("+"), donate);
		GameTextForPlayer(playerid, fmt_str, 4000, 1);
	}
	return 1;
}

stock BankLog(playerid, money, description[] = "None")
{
	new fmt_str[185];

	format(fmt_str, sizeof fmt_str, "[BANK] %s", description);

	format(fmt_str, sizeof fmt_str, "INSERT INTO money_log (uid,uip,time,money,description) VALUES (%d,'%s',%d,%d,'%s')", GetPlayerAccountID(playerid), GetPlayerIpEx(playerid), gettime(), money, fmt_str);
	mysql_query(mysql, fmt_str, false);

	return 1;
}

stock SendMessageInLocal(playerid, message[], color, Float: radius = 30.0)
{
	new virtual_world = GetPlayerVirtualWorld(playerid);
	new Float: x, Float: y, Float: z;
	GetPlayerPos(playerid, x, y, z);

	foreach(new idx : Player)
	{
		if(!IsPlayerLogged(idx)) continue;
		if(GetPlayerVirtualWorld(idx) != virtual_world) continue;
		if(!IsPlayerInRangeOfPoint(idx, radius, x, y, z)) continue;

		SendClientMessage(idx, color, message);
	}
	return 1;
}

stock Action(playerid, message[], Float:radius=25.0, bool:bubble=true)
{
	if(bubble)
		SetPlayerChatBubble(playerid, message, 0xDD90FFFF, radius, 7000);

	new fmt_str[128];

	format(fmt_str, sizeof fmt_str, "%s %s", GetPlayerNameEx(playerid), message);
	SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, radius);

	return 1;
}

stock EnablePlayerGPS(playerid, Float: x, Float: y, Float: z, message[] = "????? ???????? ? ??? ?? GPS.") 
{
    SetPlayerGPSInfo(playerid, G_POS_X, x);
    SetPlayerGPSInfo(playerid, G_POS_Y, y);

    SetPlayerCheckpoint(playerid, x, y, z, 3.0, CP_ACTION_TYPE_GPS);

    DrawGPSLineForPlayer(playerid, x, y, z);

    utf8_to_cp1251(message);
    if(strlen(message))
        SendClientMessage(playerid, 0x00FF00FF, message);

    SetPlayerGPSInfo(playerid, G_ENABLED, GPS_STATUS_ON);

    return 1;
}

stock DisablePlayerGPS(playerid)
{
    if(GetPlayerGPSInfo(playerid, G_ENABLED) == GPS_STATUS_ON)
    {
        RemoveGPSMarker(playerid);

        HideGPS(playerid);

        SetPlayerGPSInfo(playerid, G_ENABLED, GPS_STATUS_OFF);
    }
    return 1;
}

stock IsPlayerInRangeOfPlayer(playerid, to_player, Float: distance)
{
	new Float: x, Float: y, Float: z;
	GetPlayerPos(to_player, x, y, z);

	return IsPlayerInRangeOfPoint(playerid, distance, x, y, z);
}

stock GetPlayerMaxStorage(playerid, storage)
{
	new amount;

	switch(storage)
	{
		case STORAGE_METALL: amount = 20;
		case STORAGE_AMMO: amount = 250;
		case STORAGE_DRUGS: amount = 500;
	}

	return GetPlayerData(playerid, P_IMPROVEMENTS) >= 3 ? amount * 2 : amount;
}

stock GetPlayerOwnableCars(playerid)
{
	new count,
		query[70],
		Cache: result;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ownable_cars WHERE owner_id='%d'", GetPlayerAccountID(playerid));
	result = mysql_query(mysql, query, true);

	count = cache_num_rows();

	cache_delete(result);

	return count;
}

stock IsPlayerHasDonations(playerid)
{
	new query[256 + 1];
	new Cache: result;
	new rows;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM `unitpay_payments` WHERE account = '%s' AND status = 1", GetPlayerNameEx(playerid));
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	cache_delete(result);

	if(rows) return 1;

	return 0;
}

stock GetPlayerLastDonation(playerid)
{
	new query[100],
		Cache: result,
		count;

	mysql_format(mysql, query, sizeof query, "SELECT sum FROM `unitpay_payments` WHERE account = '%s' ORDER BY id DESC LIMIT 1", GetPlayerNameEx(playerid));
	result = mysql_query(mysql, query, true);

	if(cache_num_rows())
		count = cache_get_row_int(0, 0);

	cache_delete(result);

	return count;
}

stock GetPlayerDonationCurrency(playerid)
{
	new query[100],
		Cache: result,
		currency[64];

	mysql_format(mysql, query, sizeof query, "SELECT currency FROM `unitpay_payments` WHERE account = '%s' AND activated = 1 ORDER BY id DESC LIMIT 1", GetPlayerNameEx(playerid));
	result = mysql_query(mysql, query, true);

	if(cache_num_rows())
		cache_get_row(0, 0, currency);

	cache_delete(result);

	return currency;
}

stock ShowPlayerDonateDialog(playerid)
{
	new fmt_text[610];

	format
	(
	    fmt_text,
	    sizeof fmt_text,
	    "{FFFFFF}\
	    ? ???? ??????? ?? ?????? ???????????? ??????????????\n\
	    ??????????? ???????. ????? ???????? ? ??? ??????,\n\
	    ?????????? ????????? ???? ??????? ????. ???????? ????\n\
	    ?????????????? ????????????, ? ????? ? ????????\n\
		?????????ù ????? ?? ?????? ?????? ?? ????? ?????:\n\
		{33cc66}"#SERVER_SITE" (?????? \"?????\")\n\n\
		{6699cc}?????????ù:{FFFFFF}\n\
		????? ????????:\t\t\t%d\n\
		ù?????? ?????ù??? ?????:\t\t%d.00 ???.\n\
		????????? ??????????:\t\t%d.00 ???.\n\
		????ù ????? ??????????:\t\t%d.00 ???.\
		",
		GetPlayerAccountID(playerid),
		GetPlayerDonateMoney(playerid),
		GetPlayerLastDonation(playerid),
		GetPlayerTotalDonate(playerid)
	);

	Dialog
	(
	    playerid, DIALOG_DONATE_INFO, DIALOG_STYLE_MSGBOX,
	    "{FFCC00}?????????????? ???????????",
	    fmt_text,
	    "????????", "?????"
	);
	return 1;
}

stock ShowPlayerDonateMenu(playerid)
{
	return 1;
}


stock ShowPlayerAdminDonate(playerid)
{
	if(ISBONUS == 0) return 0;
	new fmt_text[800], fmt_description[32];

	format
	(
		fmt_text,
		sizeof fmt_text,
		"1. ???????? ???? ??????? ?????-????\t\t\t{6699cc} >>\n"\
		"2. ??????? ??????? ??????\t\t{6699cc} >>\n"\
		"3. ??ù?? ???????\t\t{6699cc} {6699cc}%d ???.\n"\
		"4. ???????? ???? ?????-??????\t{6699cc}%d ???.\n"\
		"5. ??????ù '??????????'\t\t{6699cc}%d ???.\n"\
		"6. ??????? ? ????? ????\t\t{6699cc}%d ???.\n"\
		"7. ??????? ??ù ?????????\t\t{6699cc}%d ???.\n"\
		"{FFFF00}????????? ???? ???? ????? ?? \t\t{6699cc}"SERVER_SITE"\n",
		GetDonatePrice(DONATE_PRICE_A_UNWARN),
		GetDonatePrice(DONATE_PRICE_A_SETPASS),
		GetDonatePrice(DONATE_PRICE_A_INVISIBLE),
		GetDonatePrice(DONATE_PRICE_A_PREFIX),
		GetDonatePrice(DONATE_PRICE_A3D_PREFIX)

	);

	format(fmt_description, 32, "{6699cc}??? ??????: %d ??????", GetPlayerDonateRub(playerid));

	Dialog
	(
		playerid, DIALOG_ADONATE_MENU, DIALOG_STYLE_LIST,
		fmt_description,
		fmt_text,
		"???????", "???????"
	);

	return 1;
}

stock ShowPlayerDrubMenu(playerid)
{
    new price = Config[helper_price];
    new fmt_text[800], fmt_description[64];

    if (ISBONUS == 1)
    {
        format(fmt_text, sizeof fmt_text,
            "{99cc00}??????????? ????????? ?????????ù\n"\
            "1. ?????????????? ????? ? ??????? ??????\n"\
            "2. ??????? ???? ????????\t\t\t{6699cc}150 ???\n"\
            "3. ??????? ???????? ??????\t\t{6699cc}100 ??????\n"\
            "4. ???????? ????? ????????????? ????????\t\t{6699cc}?? 100 ???\n"\
            "5. ????????? ?????????? ?????? ??ù ??????????\t{6699cc}100 ???/????\n"\
            "6. ??????? 4-? ???????? ?????? ????????\t\t{6699cc}75 ???\n"\
            "7. ??ù?? ??? ?????????????ù\t\t{6699cc}150 ???\n"\
            "8. ???????? ??ù\t\t{6699cc}50 ???\n"\
            "9. ????????? ???? ??? ?????? ???????ù ???????\t{6699cc}%d ???/1 ??.\n"\
            "10. ??????? VIP ??????????\n"\
            "11. ???????\t\t{6699cc}100 ???\n"\
            "12. ??????? ???? ??????\t\t{6699cc} >>\n"\
            "13. ??????? ???? ??????????????\t\t{6699cc} >>\n"\
            "14. ??????? ??????????ù ? ???????????\t\t{6699cc} >>",
            GetDonatePrice(DONATE_PRICE_SKILLS)
        );

        format(fmt_description, sizeof fmt_description, "{EB4C42}%s{ffffff} | (%d ??????)", SERVER_NAME, GetPlayerDonateRub(playerid));
    }
    else
    {
        format(fmt_text, sizeof fmt_text,
            "{EB4C42}01. {ffffff}??????????? ????????? ?????????ù\n"\
            "{EB4C42}02. {ffffff}?????????????? ????? ? ??????? ??????\n"\
            "{EB4C42}03. {ffffff}??????? ???? ????????\t\t\t{99cc00}150 ??????\n"\
            "{EB4C42}04. {ffffff}??????? ???????? ??????\t\t{99cc00}100 ??????\n"\
            "{EB4C42}05. {ffffff}???????? ????? ????????????? ????????\t\t{99cc00}?? 100 ??????\n"\
            "{EB4C42}06. {ffffff}????????? ?????????? ?????? ??ù ??????????\t{99cc00}100 ??????/????\n"\
            "{EB4C42}07. {ffffff}??????? 4-? ???????? ?????? ????????\t\t{99cc00}75 ??????\n"\
            "{EB4C42}08. {ffffff}??ù?? ??? ?????????????ù\t\t{99cc00}150 ??????\n"\
            "{EB4C42}09. {ffffff}???????? ??ù\t\t{99cc00}50 ??????\n"\
            "{EB4C42}10. {ffffff}????????? ???? ??? ?????? ???????ù ???????\t{99cc00}%d ??????/1 ??\n"\
            "{EB4C42}11. {ffffff}??????? VIP ??????????\n"\
            "{EB4C42}12. {ffffff}???????\t\t{99cc00}100 ??????",
            GetDonatePrice(DONATE_PRICE_SKILLS)
        );

        format(fmt_description, sizeof fmt_description, "{EB4C42}BLACK RUSSIA %d ???", GetPlayerDonateRub(playerid));
    }

    Dialog(playerid, DIALOG_DRUB_MENU, DIALOG_STYLE_LIST, fmt_description, fmt_text, "???????", "???????");
    return 1;
}

stock ShowPlayerDonations(playerid, name)
{
	new query[256],
		fmt_text[1400],
		Cache: result;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM `unitpay_payments` WHERE `account`='%s' AND `status`=0", name);
	result = mysql_query(mysql, query, true);

	if(!cache_num_rows())
	{
			format
			(
				fmt_text, sizeof fmt_text,
				"{FFFFFF}\
				?? ??? ?? ???? ?? ??????ù?? ???? ???????.\n\
				??? ????? ??????? ?? ????? {33cc66}"#SERVER_SITE" {FFFFFF}? ??????? {6699cc}\"?????\".\
				"
			);


			Dialog
			(
				playerid, DIALOG_DONATIONS, DIALOG_STYLE_MSGBOX,
				"{FFCC00}????????? ?????????ù",
				fmt_text,
				"?????", ""
			);

			cache_delete(result);
			return 1;
	}

	format(fmt_text, sizeof(fmt_text), "???? ? ????ù\t\t\t?????\n{FFFFFF}");

	for(new i = 0; i < cache_num_rows(); i++)
	{
	    new tmp_text[128], tmp_date[16];

	    cache_get_field_content(i, "dateComplete", tmp_date);
	    format(tmp_text, sizeof tmp_text, "\n%s\t\t%d.00 ???.", tmp_date, cache_get_field_content_int(i, "sum"));

	    strcat(fmt_text, tmp_text);
	}

	Dialog
	(
	    playerid,
	    DIALOG_DONATIONS,
	    DIALOG_STYLE_MSGBOX,
	    "{FFCC00}20 ????????? ???????? ?????????ù",
	    fmt_text,
	    "?????", ""
	);
	cache_delete(result);
	return 1;
}

stock ShowPlayerConvertDialog(playerid)
{
//    new current_money = GetPVarInt(playerid, "convert_money"),
    //new donate_price = g_doubling[DOUBLING_DONATE] ? GetDonatePrice(DONATE_PRICE_MONEY) * 2 : GetDonatePrice(DONATE_PRICE_MONEY);

    new fmt_text[200];
    format
    (
        fmt_text,
        sizeof fmt_text,
        "{FFFFFF}\
        ??????: {009900}1000?\n\
        {FFFFFF}???????: {009900}%d\n\
  		\n\
        {6666CC}??????? ??????????, ???????\n\
        ?? ?????? ?????????????? ? ??????? ??????:\
        ",
        GetPlayerDonateRub(playerid)
    );

    Dialog(playerid, DIALOG_DONATE_CONVERT, DIALOG_STYLE_INPUT, "{ffcc00}????? ????? (?????????)", fmt_text, "?????", "?????");
}

stock ApplyAnimationEx(playerid, animlib[], animname[], Float:fDelta, loop, lockx, locky, freeze, time, forcesync, anim_type=USE_ANIM_TYPE_NONE)
{
	SetPlayerData(playerid, P_USE_ANIM_TYPE, anim_type);

	if(forcesync == 0)
		forcesync = 1;

	return ApplyAnimation(playerid, animlib, animname, fDelta, loop, lockx, locky, freeze, time, forcesync);
}

stock ResetSkin(playerid)
{
	if(GetPlayerData(playerid, P_OSKIN) && 1 <= GetPlayerTeamEx(playerid) < MAX_ORG)
		SetPlayerSkin(playerid, GetPlayerData(playerid, P_OSKIN));
	else
		SetPlayerSkin(playerid, GetPlayerData(playerid, P_SKIN));
	return 1;
}

stock InvitePlayer(playerid, org_id, give_rang = 1, bool: save = false)
{
	if (!(1 <= give_rang && give_rang <= 10))
		give_rang = 1;

	SetPlayerTeamEx(playerid, org_id);
	SetPlayerData(playerid, P_JOB, give_rang);

	if (!GetPlayerSex(playerid))
		SetPlayerData(playerid, P_OSKIN, g_organization[org_id][O_SKINS][give_rang - 1]);
	else
		SetPlayerData(playerid, P_OSKIN, g_organization[org_id][O_WOMEN_SKIN]);

	if (save)
	{
		new query[128];
		format(query, sizeof query, "UPDATE accounts SET team=%d,org_skin=%d,job=%d WHERE id=%d",
			org_id,
			GetPlayerData(playerid, P_OSKIN),
			give_rang,
			GetPlayerAccountID(playerid));
		mysql_query(mysql, query, false);
	}

	return 1;
}

stock UnInvite(playerid, to_player, reason[] = "")
{
	if(!(1 <= GetPlayerTeamEx(to_player) < MAX_ORG)) return 0;

	new fmt_msg[110];

	if(playerid != to_player)
	{
		format(fmt_msg, sizeof fmt_msg, "%s[%d] ?????? ??? ?? ??????????? \"%s\"", GetPlayerNameEx(playerid), playerid, GetPlayerTeamName(to_player));
		SendClientMessage(to_player, 0xFF6600FF, fmt_msg);

		if(GetPlayerTeamEx(playerid) == GetPlayerTeamEx(to_player))
		{
			format(fmt_msg, sizeof fmt_msg, "?? ??????? %s[%d] ?? ????? ???????????", GetPlayerNameEx(to_player), to_player);
			SendClientMessage(playerid, 0x3399FFFF, fmt_msg);
		}
		else
		{
			format(fmt_msg, sizeof fmt_msg, "?? ??????? %s[%d] ?? ??????????? \"%s\"", GetPlayerNameEx(to_player), to_player, GetPlayerTeamName(to_player));
			SendClientMessage(playerid, 0x3399FFFF, fmt_msg);
		}

		if(GetPlayerTeamEx(to_player) == TEAM_GOVERNMENT && IsValidDynamic3DTextLabel(GetPlayerData(to_player, P_ADVISOR_LABEL)))
		{
			DestroyDynamic3DTextLabel(GetPlayerData(to_player, P_ADVISOR_LABEL));
			SetPlayerData(to_player, P_ADVISOR_LABEL, Text3D: -1);
		}

		format(fmt_msg, sizeof fmt_msg, "?????? %s[acc:%d] ?? ??????????? %s. ???????: %s",
		GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), GetPlayerTeamName(to_player), reason);

		SendLog(playerid, LOG_TYPE_FRACTION, fmt_msg);
	}
	else
	{
		format(fmt_msg, sizeof fmt_msg, "??????? ??????????? %s ?? ???????????? ???????", GetPlayerTeamName(to_player));
		SendLog(to_player, LOG_TYPE_FRACTION, fmt_msg);
	}
	if(!strcmp(g_organization[GetPlayerData(playerid, P_TEAM)][O_LEADER], GetPlayerNameEx(to_player)))
	{
		mysql_format(mysql, sctring, sizeof(sctring), "DELETE FROM `leaders` WHERE account_id = %d", GetPlayerAccountID(to_player));
		mysql_query(mysql, sctring, false);
		g_organization[GetPlayerData(playerid, P_TEAM)][O_LEADER] = EOS;
	}


	InvitePlayer(to_player, 0, 0, true);

	return 1;
}

stock SendPlayerOffer(playerid, to_player, type, value_1 = 0, value_2 = 0)
{
	if(GetPlayerOfferInfo(playerid, O_OUTCOMIG_PLAYER) == INVALID_PLAYER_ID)
	{
		new fmt_str[144];
		switch(type)
		{
			case OFFER_TYPE_HANDSHAKE:
			{
				format(fmt_str, sizeof fmt_str, "????? %s ?????????? ?????? ??? ????", GetPlayerNameEx(playerid));
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????? ????", GetPlayerNameEx(to_player));
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_ACCESSORY:
			{
				new price = GetPVarInt(playerid, "owner_accept_price"),
				acs = GetPVarInt(playerid, "acs_id");

				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? %s ?? %d ???.", GetPlayerNameEx(playerid), accessory[acs][NAME_ACCESSORY], price);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ??ù?? %s ?? %d ???.", GetPlayerNameEx(to_player), accessory[acs][NAME_ACCESSORY], price);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_SHOWVB:
            {
                format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????????? ??? ??????? ?????.", GetPlayerNameEx(playerid));
                SendClientMessage(to_player, 0x3399FFFF, fmt_str);
                ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");
            }
            case OFFER_TYPE_SHOWLIC:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????????? ??? ????????.", GetPlayerNameEx(playerid));
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);
				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");
			}
            case OFFER_TYPE_SHOWPASS:
            {
                format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????????? ??? ????????.", GetPlayerNameEx(playerid));
                SendClientMessage(to_player, 0x3399FFFF, fmt_str);
                ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");
            }
            case OFFER_TYPE_SHOWMED:
			{
			   new fmt_str[128];
			   format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????????? ??? ??????????? ?????.", GetPlayerNameEx(playerid));
			   SendClientMessage(to_player, 0x3399FFFF, fmt_str);
			   ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");
			}
			case OFFER_TYPE_MEDCARD:
			{
			   new doctor = GetPVarInt(playerid, "med_offer_from");
			   new price = GetPVarInt(playerid, "med_offer_price");

			   new fmt_str[128];
 			  format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? ??????????? ???????????? ?? %d ??????.", GetPlayerNameEx(doctor), price);
 			  SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			   ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");
			}
			case OFFER_TYPE_SELL_FUEL_ST:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? ??????????? ??????? ?%d \"%s\" ?? ???? %d ???", GetPlayerNameEx(playerid), value_1, GetFuelStationData(value_1, FS_NAME), value_2);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				SendClientMessage(to_player, 0xFFFFFFFF, "??????? {00CC00}Y {FFFFFF}????? ????????? ?????? ??? {FF6600}N {FFFFFF}??ù ??????");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????? ???? ??????????? ??????? \"%s\" ?? %d ???", GetPlayerNameEx(to_player), GetFuelStationData(value_1, FS_NAME), value_2);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_FILL_CAR:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ????????? ??? ????????? ?? %d ? ?? %d ???", GetPlayerNameEx(playerid), value_1, value_2);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				SendClientMessage(to_player, 0xFFFFFFFF, "??????? {00CC00}Y {FFFFFF}????? ??????????ù ??? {FF6600}N {FFFFFF}??ù ??????");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ???????? ?????????? ?? %d ? ?? %d ???", GetPlayerNameEx(to_player), value_1, value_2);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_REPAIR_CAR:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ???????? ??? ????????? ?? %d ???", GetPlayerNameEx(playerid), value_1);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ??????? ?????? ?????????? ?? %d ???", GetPlayerNameEx(to_player), value_1);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_SELL_BUSINESS:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? ?????? ?%d \"%s\" ?? ???? %d ???", GetPlayerNameEx(playerid), value_1, GetBusinessData(value_1, B_NAME), value_2);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????? ??? ?????? \"%s\" ?? %d ???", GetPlayerNameEx(to_player), GetBusinessData(value_1, B_NAME), value_2);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_BUSINESS_MANAGER:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ????? ??????????? ??? ???????ù??ù (%s)", GetPlayerNameEx(playerid), GetBusinessData(value_1, B_NAME));
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "%s ??????? ??????????? ????? ????? ???????????", GetPlayerNameEx(to_player));
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_SELL_HOME:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? ??? ?%d ?? ???? %d ???", GetPlayerNameEx(playerid), value_1, value_2);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????? ??? ??? ?? ???? %d ???", GetPlayerNameEx(to_player), value_2);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_HOME_RENT_ROOM:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????????ù ? ????? ???? ?%d", GetPlayerNameEx(playerid), value_1);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????????ù ? ????? ???? ?%d", GetPlayerNameEx(to_player), value_1);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_SELL_OWNABLE_CAR:
			{
				new model_id = GetVehicleData(value_2, V_MODELID);
				
				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????? ??? ????????? \"%s\" ?? %d ???", GetPlayerNameEx(to_player), GetVehicleInfo(model_id-400, VI_NAME), value_1);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
				
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? ????????? (??????????? ?????????? ? ??????????) ?? ???? %d ???", GetPlayerNameEx(playerid), value_1);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

					new fmt_text[312];
						    format(fmt_text, sizeof(fmt_text), "{ffffff}????? {ffff00}%s {ffffff}?????????? ??????? ??? ????????? {ffff00}''%s'' {ffffff}?? {ffff00}%d {ffffff}??????\n \n{ffffff}?????????ù ?? ??????????:\n{EB4C42}1. {ffffff}????????? ??????? ???????????? {ffff00}none\n{EB4C42}2. {ffffff}??????: {ffff00}0000.00000?M\n{EB4C42}3. {ffffff}???????: {ffff00}???\n{EB4C42}4. {ffffff}????????: {ffff00}-\n{EB4C42}5. {ffffff}???????? ???? {ffff00}------ ", GetPlayerNameEx(playerid), GetVehicleInfo(model_id-400, VI_NAME), value_1);
                            ShowPlayerDialog(to_player, DIALOG_SELLCARMY, DIALOG_STYLE_MSGBOX, "{ff0000} ???????", fmt_text, "??????", "?????");
                            return 1;
                            
			}
			case OFFER_TYPE_SELL_OWNABLE_CAR2:
			{
				new model_id = GetVehicleData(value_2, V_MODELID);

				new fmt_text[312];
				
				format(fmt_text, sizeof(fmt_text), "{ffffff}????? {ffff00}%s {ffffff}??????? ????????? {ffff00}''%s'' {ffffff}?? {ffff00}%d ???\n \n{ffffff}?????????ù ?? ??????????:\n{EB4C42}1. {ffffff}????????? ??????? ???????????? {ffff00}%d ???\n{EB4C42}2. {ffffff}??????: {ffff00}0000.00000?M\n{EB4C42}3. {ffffff}???????: {ffff00}???\n{EB4C42}4. {ffffff}????????: {ffff00}-\n{EB4C42}5. {ffffff}???????? ???? {ffff00}------ ", GetPlayerNameEx(GetOwnableCarData(value_2, OC_LAST_OWNER_GAME_ID)), GetOwnableCarData(value_2, OC_LAST_PRICE), GetVehicleInfo(model_id - 400, VI_PRICE));
				
		        //format(fmt_text, sizeof(fmt_text), "{ffffff}?? ??????? ??? ?????? ?????? ?????????: {ffff00}%s\n{ffffff}? ??????: {ffff00}%s\n\n{ffffff}?? ????: {ffff00}%d???", GetVehicleName(value_2), GetPlayerNameEx(GetOwnableCarData(value_2, OC_LAST_OWNER_GAME_ID)), GetOwnableCarData(value_2, OC_LAST_PRICE));
                ShowPlayerDialog(playerid, DIALOG_SELLCAR, DIALOG_STYLE_MSGBOX, "{ff0000} ??????? ??????????", fmt_text, "??????", "?????");
			}
			case OFFER_TYPE_INVITE:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ???????? ? ??????????? \"%s\"", GetPlayerNameEx(playerid), GetPlayerTeamName(playerid));

				if(IsTeamSubdivision(GetPlayerTeamEx(playerid)))
					format(fmt_str, sizeof fmt_str, "%s, ????????????? \"%s\"", fmt_str, GetPlayerSubdivisionName(playerid));
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ???????? ? ??????????? \"%s\"", GetPlayerNameEx(to_player), GetPlayerTeamName(playerid));
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_FINVITE:
            {
                format(fmt_str, sizeof fmt_str, "{FFFFFF}%s ?????????? ??? ???????? ? ????? \"%s\"", GetPlayerNameEx(playerid), GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_NAME));
                SendClientMessage(to_player, 0x1E90FFFF, fmt_str);

                ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

                format(fmt_str, sizeof fmt_str, "?? ?????????? ?????? {d8284c}%s {1E90FF}???????? ? ????? \"%s\"", GetPlayerNameEx(to_player), GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_NAME));
                SendClientMessage(playerid, 0x1E90FFFF, fmt_str);
            }
			case OFFER_TYPE_MEDHELP:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? ???? ???????? ??????ù ?? %d ???", GetPlayerNameEx(playerid), value_1);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????? ? ??? ???? ???????? ??????ù ?? %d ???", GetPlayerNameEx(to_player), value_1);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_HEAL:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? ???? ??????ù ?? %d ???", GetPlayerNameEx(playerid), value_1);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);
				
				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????? ? ??? ???? ??????ù ?? %d ???", GetPlayerNameEx(to_player), value_1);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_CHANGE_SEX:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??????? ??? ???????? ?? ????? ???? ?? %d ???", GetPlayerNameEx(playerid), value_1);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ???????? ?? ????? ???? ?? %d ???", GetPlayerNameEx(to_player), value_1);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_SHOW_SKILL:
			{
				format(fmt_str, sizeof fmt_str, "%s ????? ???????? ??? ???? ?????? ???????ù ???????", GetPlayerNameEx(playerid));
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????????? ?? ???? ?????? ???????ù ???????", GetPlayerNameEx(to_player));
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_CASINO_DICE:
			{
				format(fmt_str, sizeof fmt_str, "%s ????? ??????? ? ???? ? ?????. ??????: %d ???.", GetPlayerNameEx(playerid), value_1);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ??????? ? ?????. ??????: %d ???.", GetPlayerNameEx(to_player), value_1);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_GETHERE:
			{
				format(fmt_str, sizeof fmt_str, "%s ????? ??????????????? ??? ? ????", GetPlayerNameEx(playerid));
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ????????? ? %s ?????????? ?? ???????? ??? ? ???", GetPlayerNameEx(to_player));
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_GIVE_CAR_KEY:
			{
				format(fmt_str, sizeof fmt_str, "%s ????? ???? ??? ????? ?? ?????? ??????????", GetPlayerNameEx(playerid));
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? ?????? %s ??ù?? ????? ?? ?????? ??????????", GetPlayerNameEx(to_player));
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_GIVE_MIC:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ???????????ù ? ?????-?????", GetPlayerNameEx(playerid));
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ???????????ù ? ?????-?????", GetPlayerNameEx(to_player));
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_GIVE_LIC:
			{
				new lic_names[3][34] = 
				{
					"???????? ????????? B",
					"???????? ????????? C/D",
					"??????"
				};

				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ?????? ???????? ?? %s ?? %d ???.",
				GetPlayerNameEx(playerid), lic_names[value_1 - 1], value_2);

				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ?????? ? ??? ???????? ?? %s ?? %d ???.",
				GetPlayerNameEx(to_player), lic_names[value_1 - 1], value_2);

				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
			case OFFER_TYPE_JAIL_FREE:
			{
				format(fmt_str, sizeof fmt_str, "%s ?????????? ??? ???????????? ???? ???? ?? %d ???.", GetPlayerNameEx(playerid), value_1);
				SendClientMessage(to_player, 0x3399FFFF, fmt_str);

				ShowNotificationNew(to_player, 4, 10, notifcmdyes, 0, "??????????? ?? ??????", ">");

				format(fmt_str, sizeof fmt_str, "?? ?????????? %s ???????????? ??? ???? ?? %d ???.", GetPlayerNameEx(to_player), value_1);
				SendClientMessage(playerid, 0x3399FFFF, fmt_str);
			}
	
			default: return 1;
		}

		SetPlayerOfferInfo(playerid, O_OUTCOMIG_PLAYER, to_player);

		SetPlayerOfferInfo(to_player, O_INCOMING_PLAYER, playerid);
		SetPlayerOfferInfo(to_player, O_INCOMING_TYPE, type);

		SetPlayerOfferValue(to_player, 0, value_1);
		SetPlayerOfferValue(to_player, 1, value_2);
	}
	else SendClientMessage(playerid, 0xFFFFFFFF, "??????????? {FF9900}/cancel {FFFFFF}????? ???????? ?????????? ???????????");

	return 1;
}

// ------------------------------------------
CMD:yes(playerid, params[])
{
	new offer_id = GetPlayerOfferInfo(playerid, O_INCOMING_PLAYER);
	new offer_type = GetPlayerOfferInfo(playerid, O_INCOMING_TYPE);

	new value_1 = GetPlayerOfferInfo(playerid, O_INCOMING_VALUE)[0];
	new value_2 = GetPlayerOfferInfo(playerid, O_INCOMING_VALUE)[1];

	if(offer_id != INVALID_PLAYER_ID)
	{
		if(IsPlayerConnected(offer_id) && IsPlayerLogged(offer_id))
		{
			if(GetPlayerOfferInfo(offer_id, O_OUTCOMIG_PLAYER) == playerid)
			{
				ClearPlayerOffer(offer_id);
			}
			else offer_type = -1;

			new Float: x, Float: y, Float: z;
			new Float: dist;

			GetPlayerPos(offer_id, x, y, z);

			if(offer_type != OFFER_TYPE_GETHERE)
				dist = GetPlayerDistanceFromPoint(playerid, x, y, z);

			else dist = 5.0;

			if(dist <= 10.0)
			{
				new fmt_str[144];

				switch(offer_type)
				{
					case OFFER_TYPE_SHOW_SKILL:
					{
						ShowPlayerSkills(offer_id, playerid);
						Action(offer_id, "??????? ???? ?????? ???????ù ???????", _, false);
					}

					case OFFER_TYPE_INVITE:
					{
						new team_id = GetPlayerTeamEx(offer_id);

						if((1 <= team_id < MAX_ORG) || !(1 <= GetPlayerTeamEx(playerid) < MAX_ORG))
						{
							InvitePlayer(playerid, team_id, 1, true);

							new fmt_msg[144];
							format(fmt_msg, sizeof fmt_msg, "[R] %s %s ????ù? ?????? %s[%d] ? ???????????", GetPlayerJobAndRankName(offer_id), GetPlayerNameEx(offer_id), GetPlayerNameEx(playerid), playerid);

							if(!GetPlayerTeamEx(playerid))
							{
								SendMessageToJob(GetPlayerJob(playerid), fmt_msg);
								SendClientMessage(playerid, -1, "????????");
							}
							else
							{
								SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
							}

							new join_msg[120];
							format(join_msg, sizeof join_msg, "{FFFFFF}?? ????ù?? ??????????? ??{ffff00} %s {FFFFFF}???????? ? ???????????{ffff00} \"%s\"", GetPlayerNameEx(offer_id), GetPlayerTeamName(offer_id));
							SendClientMessage(playerid, 0x66CC00FF, join_msg);
							SendClientMessage(playerid, 0x3399FFFF, "{FFFFFF}?????????????? {ffff00}/menu {FFFFFF}??ù ??????? ? ???????? ???????????.");

							format(join_msg, sizeof join_msg, "%s ????ù? ???? ??????????? ???????? ? ???????????", GetPlayerNameEx(playerid));
							SendClientMessage(offer_id, 0x66CC00FF, join_msg);

							format(join_msg, sizeof join_msg, "????ù? %s[acc:%d] ? ??????????? %s", GetPlayerNameEx(playerid), GetPlayerAccountID(playerid), GetPlayerTeamName(offer_id));
							SendLog(offer_id, LOG_TYPE_FRACTION, join_msg);

							AddPlayerData(playerid, P_QUEST_EXP_8, +, 1);
							UpdatePlayerDatabaseInt(playerid, "quest_exp_8", GetPlayerData(playerid, P_QUEST_EXP_8));

							if(GetPlayerData(playerid, P_QUEST_EXP_8) == 1)
							{
								SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'???????? ?? ???????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
								SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff}, ????? ?????? ???????????.");
								GivePlayerMoneyEx(playerid, 10000, "?????????? ??????");

								SetPlayerData(playerid, P_QUEST_8, 1);
								UpdatePlayerDatabaseInt(playerid, "quest_8", 1);

								AddPlayerData(playerid, P_TOP_5, +, 1);
								UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
							}
						}
						else SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ? ??????????? ????????? ??????");
					}
					case OFFER_TYPE_SHOWVB:
					{
 					  if (!IsPlayerConnected(offer_id) || !IsPlayerLogged(offer_id))
 					      return SCM(playerid, COLOR_GREY, "????? ??????????.");

					    new nomer = GetPlayerData(offer_id, P_VOENBILET_NUM);

					    new kemdanvb[32];
					    format(kemdanvb, sizeof kemdanvb, "%s", GetPlayerData(offer_id, P_VOENBILET_KEM));

  					 new zvanie[32];
					    format(zvanie, sizeof zvanie, "%s", GetPlayerData(offer_id, P_VOENBILET_ZVANIE));

					    new data[16];
					   format(data, sizeof data, "%s", GetPlayerData(offer_id, P_VOENBILET_DATE));

					   new name_offer[MAX_PLAYER_NAME];
					    GetPlayerName(offer_id, name_offer, sizeof name_offer);

					   new action_show[128];
					    format(action_show, sizeof action_show, "??????? ??????? ????? %s", GetPlayerNameEx(playerid));
					   Action(offer_id, action_show, _, false);

					    new action_view[128];
					    format(action_view, sizeof action_view, "????????????? ??????? ????? %s", GetPlayerNameEx(offer_id));
					    Action(playerid, action_view, _, false);

					    ShowMilitaryCardDialog(playerid, nomer, name_offer, data, kemdanvb, zvanie);
					    ClearPlayerOffer(playerid);
					}
					case OFFER_TYPE_SHOWLIC:
					{
						if (!IsPlayerConnected(offer_id) || !IsPlayerLogged(offer_id))
							return SCM(playerid, COLOR_GREY, "????? ??????????.");

						new action_show[64];
						format(action_show, sizeof action_show, "??????? ???????? %s", GetPlayerNameEx(playerid));
						Action(offer_id, action_show, _, false);

						new action_view[64];
						format(action_view, sizeof action_view, "????????????? ???????? %s", GetPlayerNameEx(offer_id));
						Action(playerid, action_view, _, false);

						ShowLicenseDialog(playerid, offer_id);
						ClearPlayerOffer(playerid);
					}
					case OFFER_TYPE_SHOWPASS:
					{
   					if (!IsPlayerConnected(offer_id) || !IsPlayerLogged(offer_id))
   					    return SCM(playerid, COLOR_GREY, "????? ??????????.");

					   new name[MAX_PLAYER_NAME];
  					 GetPlayerName(offer_id, name, sizeof name);

					   new sex[16];
 					  format(sex, sizeof sex, "%s", GetPlayerSexName(offer_id));

					    new house[32];
  					 format(house, sizeof house, "%s", GetPlayerHouseName(offer_id));

					   new org[32];
   					format(org, sizeof org, "%s", GetPlayerTeamName(offer_id));

					   new rank[32];
					    format(rank, sizeof rank, "%s", GetPlayerJobAndRankName(offer_id));

					   new fmt_text[512];
 					  format(fmt_text, sizeof fmt_text,
  					    "{FFFFFF}??ù:{FF6600}\t\t\t\t\t\t\t\t%s\n"\
  					     "{FFFFFF}???????:{FF6600}\t\t\t\t\t\t%d\n"\
  					     "{FFFFFF}???:{FF6600}\t\t\t\t\t\t\t\t%s\n"\
 					      "{FFFFFF}??????????:{FF6600}\t\t\t%s\n"\
					       "-----------         -----------\n"\
  					     "{FFFFFF}??????????ù:{FF6600}\t%s\n"\
   					    "{FFFFFF}?????????:{FF6600}\t\t\t\t\t%s\n"\
  					     "-----------         -----------\n"\
  					     "{FFFFFF}ù??????:{FF6600}\t\t\t%d\n"\
  					     "{FFFFFF}??????? ???????:{FF6600}\t\t\t%d\n"\
   					    "{FFFFFF}?????????????????:{FF6600}\t\t%d",
    					   name,
   					    GetPlayerLevel(offer_id),
 					      sex,
 					      house,
 					      org,
 					      rank,
   					    GetPlayerPhone(offer_id),
   					    GetPlayerSuspect(offer_id),
   					    GetPlayerData(offer_id, P_LAW_ABIDING)
 					  );

 					  Dialog(playerid, DIALOG_PASSPORT, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{FFFFFF} | ???????", fmt_text, "???????", "");

 					  Action(offer_id, "??????? ???? ???????", _, false);
					    Action(playerid, "????????????? ???????", _, false);

					   ClearPlayerOffer(playerid);
					}
					case OFFER_TYPE_MEDCARD:
					{
 					  new doctor = GetPVarInt(playerid, "med_offer_from");
					   new price = GetPVarInt(playerid, "med_offer_price");

  					 if (GetPlayerMoney(playerid) < price)
   					    return SCM(playerid, COLOR_GREY, "???????????? ???????.");

 					  GivePlayerMoneyEx(playerid, -price);
  					 SetPlayerData(playerid, P_MEDCARD_STATE, 1);
  					 SetTimerEx("FinishMedcardTimer", 600000, false, "i", playerid);

  					 new action_show[128];
   					format(action_show, sizeof action_show, "????? ???????????? %s", GetPlayerNameEx(playerid));
 					  Action(doctor, action_show, _, false);

   					new action_view[128];
   					format(action_view, sizeof action_view, "???????? ???????????? ? %s", GetPlayerNameEx(doctor));
 					  Action(playerid, action_view, _, false);

   					new fmt_doc[128];
  					 format(fmt_doc, sizeof fmt_doc, "%s ?????????ù ?????? ???????????? ?? %d ??????.", GetPlayerNameEx(playerid), price);
   					SCM(doctor, COLOR_BLUE, fmt_doc);

 					  SCM(playerid, COLOR_WHITE, "?? ???????? ????????????. ???????? ????? ?????? ????? 10 ?????.");

  					 DeletePVar(playerid, "med_offer_from");
  					 DeletePVar(playerid, "med_offer_price");
					}
					case OFFER_TYPE_SHOWMED:
					{
					    if (!IsPlayerConnected(offer_id) || !IsPlayerLogged(offer_id))
					       return SCM(playerid, COLOR_GREY, "????? ??????????.");

					   if (GetPlayerData(offer_id, P_MEDCARD) != 1)
  					     return SCM(playerid, COLOR_GREY, "? ?????? ??? ??????????? ?????.");

					    new date[16];
					    format(date, sizeof date, "%s", GetPlayerData(offer_id, P_MEDCARD_DATE));
					    if (!strlen(date) || strlen(date) < 4)
  					     format(date, sizeof date, "?? ???????");

 					  new Float:raw_health;
					    GetPlayerHealth(offer_id, raw_health);
					    if (raw_health <= 0.0 || raw_health > 100.0)
  					     raw_health = 100.0;

					    new health = floatround(raw_health, floatround_floor);

					   new name_offer[MAX_PLAYER_NAME];
					    GetPlayerName(offer_id, name_offer, sizeof name_offer);

					   ShowMedicalCardDialog(playerid, offer_id, name_offer, health, date);
					    ClearPlayerOffer(playerid);
					}
					case OFFER_TYPE_ACCESSORY:
					{
						new price = GetPVarInt(offer_id, "owner_accept_price"),
						acs = GetPVarInt(offer_id, "acs_id"), sql = GetPVarInt(offer_id, "owner_accept_acs_sql"), string[124];

						if(price <= GetPlayerMoneyEx(playerid))
						{

							mysql_format(mysql, string, sizeof string, "UPDATE accessory_inventory SET player = %d WHERE id = %d", GetPlayerAccountID(playerid), sql);
							mysql_query(mysql, string, false);

							if(!mysql_errno())
							{
								GivePlayerMoneyEx(playerid, -price);
								GivePlayerMoneyEx(offer_id, price);

								format(fmt_str, sizeof fmt_str, "?? ???????/???????? %s ????????? %s ?? %d ???.", GetPlayerNameEx(playerid), accessory[acs][NAME_ACCESSORY], price);
								SendClientMessage(offer_id, 0x3399FFFF, fmt_str);
							
								format(fmt_str, sizeof fmt_str, "%s ?????? ??? %s ?? %d ???.", GetPlayerNameEx(offer_id), accessory[acs][NAME_ACCESSORY], price);
								SendClientMessage(playerid, 0x3399FFFF, fmt_str);
							}
						}
						else
						{
							SendClientMessage(playerid, -1, ""USC" ? ??? ???????????? ???????");
							SendClientMessage(offer_id, -1, ""USC" ? ?????? ???????????? ???????");
						}
					}
                    case OFFER_TYPE_FINVITE:
                    {
                        new fam_id = GetPlayerData(offer_id, P_FAMILY);

                        FInvitePlayer(playerid, fam_id, 1, true);

                        new fmt_msg[120];
                        format(fmt_msg, sizeof fmt_msg, "????????ù??! ?? ???????? ? ????? \"%s\"", GetFamilyData(fam_id, F_NAME));

                        SendClientMessage(playerid, 0x32a44bFF, fmt_msg);
                        SendClientMessage(playerid, 0x1E90FFFF, "??????????? {d8284c}/fmenu > ?????? ?? ?????{1E90FF}, ????? ?????? ? ????? ??????????ù?");

                        format(fmt_msg, sizeof fmt_msg, "%s ????ù? ???? ??????????? ???????? ? ?????", GetPlayerNameEx(playerid), value_1);
                        SendClientMessage(offer_id, 0x32a44bFF, fmt_msg);

                        format(fmt_msg, sizeof fmt_msg, "????ù? %s[acc:%d] ? ????? %s", GetPlayerNameEx(playerid), GetPlayerAccountID(playerid), GetPlayerTeamName(offer_id));
                        SendLog(offer_id, LOG_TYPE_FRACTION, fmt_msg);

                        AddPlayerData(playerid, P_QUEST_EXP_7, +, 1);
						UpdatePlayerDatabaseInt(playerid, "quest_exp_7", GetPlayerData(playerid, P_QUEST_EXP_7));

						if(GetPlayerData(playerid, P_QUEST_EXP_7) == 1)
						{
						    SendClientMessage(playerid, COR_SERVER, "{ffffff}?? ??????? ????????? ????? {009900}'???????? ? ?????'. {ffffff}???? ???????: {009900}5000 ???, 1exp");
				                                SendClientMessage(playerid, COR_SERVER, "{ffffff}??????? {009900}/quest{ffffff},??ù ????????? ?????????? ?? ????? ???????");
						    GivePlayerMoneyEx(playerid, 10000, "?????????? ??????");

						    SetPlayerData(playerid, P_QUEST_7, 1);
						    UpdatePlayerDatabaseInt(playerid, "quest_7", 1);
						    
						    AddPlayerData(playerid, P_TOP_5, +, 1);
							UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
						}

                    }
					case OFFER_TYPE_HANDSHAKE:
					{
						if(!(IsPlayerInAnyVehicle(playerid) && IsPlayerInAnyVehicle(offer_id)))
						{
							if(0.5 <= dist <= 1.5)
							{
								new Float: to_x, Float: to_y;
								new Float: angle;

								GetPlayerPos(playerid, to_x, to_y, z);
								angle = GetAngleToPoint(x, y, to_x, to_y);

								SetPlayerFacingAngle(playerid, angle);
								SetPlayerFacingAngle(offer_id, angle + 180.0);

								format(fmt_str, sizeof fmt_str, "?????(?) ???? %s", GetPlayerNameEx(offer_id));
								Action(playerid, fmt_str, _, false);

								ApplyAnimationEx(playerid, "GANGS", "hndshkfa", 4.1, 0, 1, 1, 0, 0, 1);
								ApplyAnimationEx(offer_id, "GANGS", "hndshkfa", 4.1, 0, 1, 1, 0, 0, 1);
							}
							else
							{
								valstr(fmt_str, offer_id);
								callcmd::hi(playerid, fmt_str);
							}
						}
						else SendClientMessage(playerid, 0xCECECEFF, "?? ???? ????? ?? ?????? ?????????ù ? ??????????");
					}
					case OFFER_TYPE_SELL_FUEL_ST:
					{
						if(GetPlayerFuelStation(offer_id) == value_1 && GetPlayerFuelStation(playerid) == -1)
						{
							if(GetPlayerMoneyEx(playerid) >= value_2)
							{
								new Float: f_pos_x = GetFuelStationData(value_1, FS_POS_X);
								new Float: f_pos_y = GetFuelStationData(value_1, FS_POS_Y);
								new Float: f_pos_z = GetFuelStationData(value_1, FS_POS_Z);

								if(IsPlayerInRangeOfPoint(playerid, 10.0, f_pos_x, f_pos_y, f_pos_z) && IsPlayerInRangeOfPoint(offer_id, 10.0, f_pos_x, f_pos_y, f_pos_z))
								{
									format(fmt_str, sizeof fmt_str, "?? ??????? ???? ??? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), value_2);
									SendClientMessage(offer_id, 0x66CC00FF, fmt_str);

									format(fmt_str, sizeof fmt_str, "%s ?????? ??? ??????????? ??????? \"%s\" ?? %d ???", GetPlayerNameEx(offer_id), GetFuelStationData(value_1, FS_NAME), value_2);
									SendClientMessage(playerid, 0x66CC00FF, fmt_str);

									SellFuelStation(offer_id, playerid, value_2);
									SendClientMessage(playerid, 0xFFCD00FF, "????????? ?????????? ?????????? ???? ??????, ??? ????????????? ???????? ?? ????? ? ?????");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "?? ? ???????? ?????? ?????????ù ?ù??? ? ????????? ??????? ?????? ??????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ?????????ù ??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????? ????????? ??????");
					}
					case OFFER_TYPE_FILL_CAR:
					{
						new vehicleid = GetPlayerVehicleID(playerid);
						new offer_vehicleid = GetPlayerVehicleID(offer_id);

						if(IsPlayerDriver(playerid))
						{
							if(GetPlayerJob(offer_id) == JOB_MECHANIC && IsPlayerInJob(offer_id) && IsPlayerInVehicle(offer_id, GetPlayerJobCar(offer_id)))
							{
								if((GetVehicleData(vehicleid, V_FUEL) + float(value_1)) <= 150.0)
								{
									if(GetPlayerMoneyEx(playerid) >= value_2)
									{
										if(GetPlayerJobLoadItems(offer_id) >= value_1)
										{
											GivePlayerMoneyEx(playerid, -value_2, "???????? ?????????? ?? ????????", true, true);

											SetVehicleData(vehicleid, V_FUEL, GetVehicleData(vehicleid, V_FUEL) + float(value_1));
											SetPlayerJobLoadItems(offer_id, GetPlayerJobLoadItems(offer_id) - value_1);

											AddPlayerData(offer_id, P_MECHANIC_FILL_PAY, +, value_2);

											format(fmt_str, sizeof fmt_str, "??????????? %s ???????? ??? ????????? ?? %d ?", GetPlayerNameEx(offer_id), value_1);
											SendClientMessage(playerid, 0x66CC00FF, fmt_str);

											format(fmt_str, sizeof fmt_str, "?? ????????? ????????? %s ?? %d ?", GetPlayerNameEx(playerid), value_1);
											SendClientMessage(offer_id, 0x66CC00FF, fmt_str);

											format(fmt_str, sizeof fmt_str, "~g~+%d rub", value_2);
											GameTextForPlayer(offer_id, fmt_str, 4000, 1);

											format(fmt_str, sizeof fmt_str, "%s{FFFFFF}???????????\n{999999}ù??????: %d ?", GetPlayerData(offer_id, P_JOB_SERVICE_NAME), GetPlayerJobLoadItems(offer_id));
											UpdateVehicleLabel(offer_vehicleid, 0xCC9900FF, fmt_str);
										}
										else SendClientMessage(playerid, 0xCECECEFF, "??? ???????? ????????? ??????");
									}
									else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ????? ????? ????????? ????????????");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "? ???????? ????? ?????????? ??????? ?? ?????????ù");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "??????????? ?????? ?????????ù ? ??????? ??????????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????????? ?? ?????");
					}
					case OFFER_TYPE_REPAIR_CAR:
					{
						new vehicleid = GetPlayerVehicleID(playerid);

						if(IsPlayerDriver(playerid))
						{
							if(GetPlayerJob(offer_id) == JOB_MECHANIC && IsPlayerInJob(offer_id) && IsPlayerInVehicle(offer_id, GetPlayerJobCar(offer_id)))
							{
								if(GetPlayerMoneyEx(playerid) >= value_1)
								{
									GivePlayerMoneyEx(playerid, -value_1, "??????? ?????????? ?? ????????", true, true);
									AddPlayerData(offer_id, P_MECHANIC_REPAIR_PAY, +, value_1);

									RepairVehicle(vehicleid);
									if(IsAOwnableCar(vehicleid)) SetVehicleData(vehicleid, V_HEALTH, 1000.0);

									SetPlayerChatBubble(playerid, "Repair", 0x3399FFFF, 10.0, 2000);
									SetPlayerChatBubble(offer_id, "Repair", 0x3399FFFF, 10.0, 2000);

									format(fmt_str, sizeof fmt_str, "??????????? %s ??????? ??? ????????? ?? %d ???", GetPlayerNameEx(offer_id), value_1);
									SendClientMessage(playerid, 0x66CC00FF, fmt_str);

									format(fmt_str, sizeof fmt_str, "?? ???????? ????????? %s ?? %d ???", GetPlayerNameEx(playerid), value_1);
									SendClientMessage(offer_id, 0x66CC00FF, fmt_str);

									format(fmt_str, sizeof fmt_str, "~g~+%d rub", value_1);
									GameTextForPlayer(offer_id, fmt_str, 4000, 1);
								}
								else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ????? ????? ????????? ????????????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "??????????? ?????? ?????????ù ? ??????? ??????????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????????? ?? ?????");
					}
					case OFFER_TYPE_SELL_BUSINESS:
					{
						if(GetPlayerBusiness(offer_id) == value_1 && GetPlayerBusiness(playerid) == -1)
						{
							if(GetPlayerMoneyEx(playerid) >= value_2)
							{
								new Float: b_pos_x = GetBusinessData(value_1, B_POS_X);
								new Float: b_pos_y = GetBusinessData(value_1, B_POS_Y);
								new Float: b_pos_z = GetBusinessData(value_1, B_POS_Z);

								if(IsPlayerInRangeOfPoint(playerid, 7.0, b_pos_x, b_pos_y, b_pos_z) && IsPlayerInRangeOfPoint(offer_id, 7.0, b_pos_x, b_pos_y, b_pos_z))
								{
									format(fmt_str, sizeof fmt_str, "?? ??????? ???? ?????? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), value_2);
									SendClientMessage(offer_id, 0x66CC00FF, fmt_str);

									format(fmt_str, sizeof fmt_str, "%s ?????? ??? ?????? \"%s\" ?? %d ???", GetPlayerNameEx(offer_id), GetBusinessData(value_1, B_NAME), value_2);
									SendClientMessage(playerid, 0x66CC00FF, fmt_str);

									SellBusiness(offer_id, playerid, value_2);
									SendClientMessage(playerid, 0xFFCD00FF, "????????? ?????????? ?????????? ???? ??????, ??? ????????????? ???????? ?? ????? ? ?????");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "?? ? ???????? ?????? ?????????ù ?ù??? ? ???????? ??????? ?????? ??????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ?????????ù ??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????? ????????? ??????");
					}
					case OFFER_TYPE_BUSINESS_MANAGER:
					{
						if(GetPlayerBusiness(offer_id) == value_1)
						{
							SetPVarInt(playerid, "biz_worker", value_1 + 1);

							format(fmt_str, sizeof fmt_str, "?? ????ù?? ??????????? ?? %s", GetPlayerNameEx(offer_id));
							SendClientMessage(playerid, 0x66CC00FF, fmt_str);

							format(fmt_str, sizeof fmt_str, "%s ????ù? ???? ???????????", GetPlayerNameEx(playerid));
							SendClientMessage(offer_id, 0x66CC00FF, fmt_str);
						}
					}
					case OFFER_TYPE_SELL_HOME:
					{
						if(GetPlayerHouse(offer_id, HOUSE_TYPE_HOME) == value_1 && GetPlayerHouse(playerid) == -1)
						{
							if(GetPlayerMoneyEx(playerid) >= value_2)
							{
								if(IsPlayerInRangeOfHouse(playerid, value_1, 10.0) && IsPlayerInRangeOfHouse(offer_id, value_1, 10.0))
								{
									format(fmt_str, sizeof fmt_str, "?? ??????? ???? ??? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), value_2);
									SendClientMessage(offer_id, 0x66CC00FF, fmt_str);

									format(fmt_str, sizeof fmt_str, "%s ?????? ??? c??? ??? ?? %d ???", GetPlayerNameEx(offer_id), value_2);
									SendClientMessage(playerid, 0x66CC00FF, fmt_str);

									SellHouse(offer_id, playerid, value_2);
									SendClientMessage(playerid, 0xFFCD00FF, "?????ù?????? ??????????? ????????? ??????????, ??? ????????????? ????????? ?? ??? ? ?????");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "?? ? ???????? ?????? ?????????ù ?ù??? ? ????? ??????? ?????? ??????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ?????????ù ??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????? ????????? ??????");
					}
					case OFFER_TYPE_HOME_RENT_ROOM:
					{
						if(GetPlayerHouse(offer_id, HOUSE_TYPE_HOME) == value_1 && GetPlayerHouse(playerid) == -1)
						{
							if(IsPlayerInRangeOfHouse(playerid, value_1, 10.0) && IsPlayerInRangeOfHouse(offer_id, value_1, 10.0))
							{
								new free_room = GetHouseFreeRoom(value_1);
								if(free_room != -1)
								{
									AddHouseRenter(value_1, free_room, playerid);

									format(fmt_str, sizeof fmt_str, "?? ???????? %s ? ????? ????", GetPlayerNameEx(playerid));
									SendClientMessage(offer_id, 0x66CC00FF, fmt_str);

									format(fmt_str, sizeof fmt_str, "%s ??????? ??? ? ????? ????", GetPlayerNameEx(offer_id));
									SendClientMessage(playerid, 0x66CC00FF, fmt_str);

									GameTextForPlayer(offer_id, "~b~~h~Welcome", 4000, 1);
								}
								else SendClientMessage(playerid, 0x999999FF, "??? ??????? ????? ???? ??? ???ù??");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ? ???????????? ?????? ?????????ù ?ù??? ? ????? ? ??????? ?????? ??ù?? ???????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "????????? ??????");
					}
					case OFFER_TYPE_SELL_OWNABLE_CAR:
					{
						if(GetPlayerOwnableCar(offer_id) == value_2 && GetPlayerOwnableCar(playerid) == INVALID_VEHICLE_ID)
						{
							new  Float: car_x, Float: car_y, Float: car_z;
							GetVehiclePos(value_2, car_x, car_y, car_z);

							if(IsPlayerInRangeOfPoint(playerid, 15.0, car_x, car_y, car_z) && IsPlayerInRangeOfPoint(offer_id, 15.0, car_x, car_y, car_z))
							{
								if(GetPlayerMoneyEx(playerid) >= value_1)
								{
									new index = GetVehicleData(value_2, V_ACTION_ID);

									format(fmt_str, sizeof fmt_str, "UPDATE accounts a, ownable_cars oc SET a.money=%d, oc.owner_id=%d WHERE a.id=%d AND oc.id=%d", GetPlayerMoneyEx(playerid)-value_1, GetPlayerAccountID(playerid), GetPlayerAccountID(playerid), GetOwnableCarData(index, OC_SQL_ID));
									mysql_query(mysql, fmt_str, false);

									if(!mysql_errno())
									{
										GivePlayerMoneyEx(playerid, -value_1, "??????? ???? ? ???", false, true);

										GivePlayerMoneyEx(offer_id, value_1, "??????? ???? ? ???", true, true);
										SetPlayerData(offer_id, P_OWNABLE_CAR, INVALID_VEHICLE_ID);

										SetOwnableCarData(index, OC_OWNER_ID, GetPlayerAccountID(playerid));
										SetPlayerData(playerid, P_OWNABLE_CAR, value_2);

										format(fmt_str, sizeof fmt_str, "{FFFFFF}?????{ffff00} %s {FFFFFF}?????? ??? ???? ????????? ??{ffff00} %d ???", GetPlayerNameEx(offer_id), value_1);
										SendClientMessage(playerid, 0x66CC00FF, fmt_str);

										SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}??????????? {ffff00}/car {FFFFFF}????? ?????? ? ??????????ù?");
										SendClientMessage(playerid, 0xFFFFFFFF, "{FFFFFF}??? ???? ???????? ????? ?? ??????????. ??????????? {ffff00} /lock ");

										format(fmt_str, sizeof fmt_str, "?? ??????? ???? ????????? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), value_1);
										SendClientMessage(offer_id, 0x66CC00FF, fmt_str);
									}
									else SendClientMessage(playerid, 0xFF6600FF, "????????? ?????? ? ???? ??????");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ????? ??ù ???????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ? ???????? ?????? ?????????ù ?ù??? ? ??????????? ??????? ?????? ??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "????????? ??????");
					}

					case OFFER_TYPE_MEDHELP:
					{
						if(GetPlayerTeamEx(offer_id) == TEAM_HOSPITAL)
						{
							if(IsPlayerInRangeOfPoint(playerid, 70.0, 1131.1603, -8.5709, 1011.1254))
							{
								if(GetPlayerData(playerid, P_OCCUPIED_BED) != -1)
								{
									if(GetPlayerMoneyEx(playerid) >= value_1)
									{
										GivePlayerMoneyEx(playerid, -value_1, "???? ??????ù (?????)", true, true);
										GivePlayerMoneyEx(offer_id, value_1, "???? ??????ù (??????)", true, true);

										SetPlayerHealthEx(playerid, 100.0);

										new fmt_msg[128];
										format(fmt_msg, sizeof fmt_msg, "??????????? ???????? %s ?????? ???? ???????? ??????ù", GetPlayerNameEx(offer_id));
										SendClientMessage(playerid, 0x66CC00FF, fmt_msg);

										format(fmt_msg, sizeof fmt_msg, "?? ??????? ???? ???????? ??????ù ? ???????? %s", GetPlayerNameEx(playerid));
										SendClientMessage(offer_id, 0x66CC00FF, fmt_msg);

										format(fmt_msg, sizeof fmt_msg, "[R] ??????????? ???????? %s[%d] ?????? ???? ???????? ??????ù ? %s[%d] ?? %d ???.", GetPlayerNameEx(offer_id), offer_id, GetPlayerNameEx(playerid), playerid, value_1);
										SendMessageToTeam(TEAM_HOSPITAL, fmt_msg, 0x99CC99FF, offer_id);

										ClearMedBed(playerid, GetPlayerData(playerid, P_OCCUPIED_BED));
										SetPlayerData(playerid, P_HOSPITAL, false);
										
										AddPlayerData(offer_id, P_PROGRESS_EXP_1, +, 1);
										UpdatePlayerDatabaseInt(offer_id, "ProgressExp1", GetPlayerData(offer_id, P_PROGRESS_EXP_1));

										if(GetPlayerData(offer_id, P_PROGRESS_EXP_1) == 1000)
										{
										    SendClientMessage(offer_id, COR_QUEST, "[?????????ù]: "c_b"?? ??????? ????????? ?????????? "c_i"'????????'. "c_b"???????: "c_s"100 DONATE-RUB");
										    GivePlayerDonateRub(offer_id, 100, "?????????? ?????????ù / ??????ù");

										    SetPlayerData(offer_id, P_PROGRESS_1, 1);
										    UpdatePlayerDatabaseInt(offer_id, "Progress1", 1);
										    
										    AddPlayerData(offer_id, P_TOP_4, +, 1);
											UpdatePlayerDatabaseInt(offer_id, "TOP_Progress", GetPlayerData(offer_id, P_TOP_4));
										}
										
										AddPlayerData(offer_id, P_F_QUEST_EXP_5, +, 1);
										UpdatePlayerDatabaseInt(offer_id, "FracQuestExp5", GetPlayerData(offer_id, P_F_QUEST_EXP_5));

										if(GetPlayerData(offer_id, P_F_QUEST_EXP_5) == 100)
										{
										    SendClientMessage(offer_id, COR_QUEST, "[??????]: "c_b"?? ??????? ????????? ????? "c_i"'???? ??????? ????'. "c_b"???????: "c_s"1 CASE(/opencase)");

									        AddPlayerData(offer_id, P_DONATE_CASE, +, 1);
											UpdatePlayerDatabaseInt(offer_id, "case", GetPlayerData(offer_id, P_DONATE_CASE));

										    SetPlayerData(offer_id, P_F_QUEST_5, 1);
										    UpdatePlayerDatabaseInt(offer_id, "FracQuest5", 1);
										    
										    AddPlayerData(offer_id, P_TOP_5, +, 1);
											UpdatePlayerDatabaseInt(offer_id, "TOP_Quest", GetPlayerData(offer_id, P_TOP_5));
										}
									
									}
									else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ?????, ????? ???????? ???????");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ?? ???????????? ???????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ????????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "????????? ??????");
					}
					case OFFER_TYPE_HEAL:
					{
						new vehicleid = GetPlayerVehicleID(offer_id);

						if(GetPlayerTeamEx(offer_id) == TEAM_HOSPITAL)
						{
							if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_MED_CAR && GetPlayerVehicleID(playerid) == vehicleid)
							{
								if(GetPlayerMoneyEx(playerid) >= value_1)
								{
									GivePlayerMoneyEx(playerid, -value_1, "???? ??????ù (?????) [veh]", true, true);
									GivePlayerMoneyEx(offer_id, value_1, "???? ??????ù (??????) [veh]", true, true);

									SetPlayerHealthEx(playerid, 100.0);

									new fmt_msg[50];
									format(fmt_msg, sizeof fmt_msg, "?? ?????????? ? ???????????? ????????? %s", GetPlayerNameEx(offer_id));
									SendClientMessage(playerid, 0x66CC00FF, fmt_msg);

									format(fmt_msg, sizeof fmt_msg, "?? ???????? ???????? %s", GetPlayerNameEx(playerid));
									SendClientMessage(offer_id, 0x66CC00FF, fmt_msg);
									
									AddPlayerData(offer_id, P_PROGRESS_EXP_1, +, 1);
									UpdatePlayerDatabaseInt(offer_id, "ProgressExp1", GetPlayerData(offer_id, P_PROGRESS_EXP_1));

									if(GetPlayerData(offer_id, P_PROGRESS_EXP_1) == 1000)
									{
									    SendClientMessage(offer_id, COR_QUEST, "[?????????ù]: "c_b"?? ??????? ????????? ?????????? "c_i"'????????'. "c_b"???????: "c_s"100 DONATE-RUB");
									    GivePlayerDonateRub(offer_id, 100, "?????????? ?????????ù / ??????ù");

									    SetPlayerData(offer_id, P_PROGRESS_1, 1);
									    UpdatePlayerDatabaseInt(offer_id, "Progress1", 1);
									    
									    AddPlayerData(offer_id, P_TOP_4, +, 1);
										UpdatePlayerDatabaseInt(offer_id, "TOP_Progress", GetPlayerData(offer_id, P_TOP_4));
									}
									
									AddPlayerData(offer_id, P_F_QUEST_EXP_5, +, 1);
									UpdatePlayerDatabaseInt(offer_id, "FracQuestExp5", GetPlayerData(offer_id, P_F_QUEST_EXP_5));

									if(GetPlayerData(offer_id, P_F_QUEST_EXP_5) == 100)
									{
									    SendClientMessage(offer_id, COR_QUEST, "[??????]: "c_b"?? ??????? ????????? ????? "c_i"'???? ??????? ????'. "c_b"???????: "c_s"1 CASE(/opencase)");

								        AddPlayerData(offer_id, P_DONATE_CASE, +, 1);
										UpdatePlayerDatabaseInt(offer_id, "case", GetPlayerData(offer_id, P_DONATE_CASE));

									    SetPlayerData(offer_id, P_F_QUEST_5, 1);
									    UpdatePlayerDatabaseInt(offer_id, "FracQuest5", 1);
									    
									    AddPlayerData(offer_id, P_TOP_5, +, 1);
										UpdatePlayerDatabaseInt(offer_id, "TOP_Quest", GetPlayerData(offer_id, P_TOP_5));
									}
								}
								else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ?????, ????? ???????? ???????");
							}
							else SendClientMessage(playerid, 0x999999FF, "?? ??? ??????????? ???????? ?????????? ?? ? ?????? ?????? ??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "????????? ??????");
					}
					case OFFER_TYPE_CHANGE_SEX:
					{
						if(GetPlayerTeamEx(offer_id) == TEAM_HOSPITAL)
						{
							if(IsPlayerInRangeOfPoint(playerid, 70.0, 1131.1603, -8.5709, 1011.1254))
							{
								if(GetPlayerData(playerid, P_OCCUPIED_BED) != -1)
								{
									if(GetPlayerMoneyEx(playerid) >= value_1)
									{
										GivePlayerMoneyEx(playerid, -value_1, "????? ???? (?????)", true, true);
										GivePlayerMoneyEx(offer_id, value_1, "????? ???? (??????)", true, true);

										SetPlayerData(playerid, P_SEX, GetPlayerData(playerid, P_SEX) ^ 1);

										new fmt_msg[70];
										format(fmt_msg, sizeof fmt_msg, "??????????? %s ?????? ??? ???????? ?? ????? ????", GetPlayerNameEx(offer_id));
										SendClientMessage(playerid, 0x66CC00FF, fmt_msg);

										format(fmt_msg, sizeof fmt_msg, "???????ù ? ???????? %s ???? ????????? ???????", GetPlayerNameEx(playerid));
										SendClientMessage(offer_id, 0x66CC00FF, fmt_msg);
									}
									else SendClientMessage(playerid, 0x999999FF, "? ??? ???????????? ????? ????? ???????? ????????");
								}
								else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ?? ???????????? ???????");
							}
							else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ????????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "????????? ??????");
					}
					case OFFER_TYPE_CASINO_DICE:
					{
						new biz_id = GetPlayerInBiz(offer_id);

						if(biz_id != -1)
						{
							if(GetBusinessData(biz_id, B_TYPE) == BUSINESS_TYPE_CASINO)
							{
								new player_dice = random(6) + 1,
									offer_dice = random(6) + 1,
									winner,
									fmt_text[90];

								if(player_dice > offer_dice)
									winner = playerid;
								else if(player_dice < offer_dice)
									winner = offer_id;
								else
									winner = -1;

								format(fmt_text, sizeof fmt_text, "? %s ??????? ?????. ?????????: {FFCD00}%d:%d",
								GetPlayerNameEx(offer_id), player_dice, offer_dice);

								Action(playerid, fmt_text, _, false);

								if(winner == -1)
								{
									SetPlayerChatBubble(playerid, "????ù!", 0xFFCD00FF, 20.0, 2000);
									SetPlayerChatBubble(offer_id, "????ù!", 0xFFCD00FF, 20.0, 2000);

									SendClientMessage(playerid, 0xFFCD00FF, "?????? ?????? ??????????, ?? ??????? ??????");
									SendClientMessage(offer_id, 0xFFCD00FF, "?????? ?????? ??????????, ?? ??????? ??????");
								}
								else
								{
									new loser = playerid == winner ? offer_id : playerid,
										winner_dice = playerid == winner ? player_dice : offer_dice,
										loser_dice = playerid == winner ? offer_dice : player_dice;

									new percent = value_1 / 100,
										cash = value_1,
										take_prods = random(5) + 6;

									new query[255];

									if(GetBusinessData(biz_id, B_PRODS) >= take_prods)
									{
										cash -= percent;

										AddBusinessData(biz_id, B_PRODS, -, take_prods);
										AddBusinessData(biz_id, B_BALANCE, +, percent);

										format(query, sizeof query, "UPDATE business SET products=%d, balance=%d WHERE id=%d", GetBusinessData(biz_id, B_PRODS), GetBusinessData(biz_id, B_BALANCE), GetBusinessData(biz_id, B_SQL_ID));
										mysql_query(mysql, query, false);

										mysql_format(mysql, query, sizeof query, "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)", GetBusinessData(biz_id, B_SQL_ID), GetPlayerAccountID(winner), GetPlayerIpEx(winner), gettime(), percent, IsBusinessOwned(biz_id));
										mysql_query(mysql, query, false);
									}

									SendClientMessage(winner, 0x66CC33FF, "????????ù??, ?? ????????!");
									GivePlayerMoneyEx(winner, cash, "???? ? ????? (???????)", true, true);

									SendClientMessage(loser, 0xFF5533FF, "? ?????????, ?? ?????????");
									GivePlayerMoneyEx(loser, -value_1, "???? ? ????? (????????)", true, true);

									format(fmt_text, sizeof fmt_text, "??????: %d", winner_dice);
									SetPlayerChatBubble(winner, fmt_text, 0x66CC33FF, 20.0, 2000);

									format(fmt_text, sizeof fmt_text, "??????: %d", loser_dice);
									SetPlayerChatBubble(loser, fmt_text, 0xFF5533FF, 20.0, 2000);
								}
							}
							else SendClientMessage(playerid, 0x999999FF, "????????? ??????. ?? ?? ? ??????");
						}
						else SendClientMessage(playerid, 0xCECECEFF, "????????? ??????");
					}
					case OFFER_TYPE_GETHERE:
					{
						new Float: player_x,
							Float: player_y,
							Float: player_z;

						GetPlayerPos(offer_id, player_x, player_y, player_z);
						SetPlayerPosEx(playerid, player_x + 1, player_y + 1, player_z, 0.0, GetPlayerInterior(offer_id), GetPlayerVirtualWorld(offer_id), false);

						new fmt_msg[105];
						format(fmt_msg, sizeof fmt_msg, "????????????? %s ???????????? ??? ? ????", GetPlayerNameEx(offer_id));
						SendClientMessage(playerid, -1, fmt_msg);

						format(fmt_msg, sizeof fmt_msg, "?? ??????????????? %s ? ????", GetPlayerNameEx(playerid));
						SendClientMessage(offer_id, -1, fmt_msg);

						format(fmt_msg, sizeof fmt_msg, "[A] ????????????? %s[%d] ?????????????? ? ???? %s[%d]", GetPlayerNameEx(offer_id), offer_id, GetPlayerNameEx(playerid), playerid);
						SendMessageToAdmins(fmt_msg, 0x999999FF);
					}
					case OFFER_TYPE_GIVE_CAR_KEY:
					{
						new vehicleid = GetPlayerOwnableCar(offer_id);

						if(vehicleid != INVALID_VEHICLE_ID)
						{
							new fmt_text[80];

							format(fmt_text, sizeof fmt_text, "%s ????? ??? ????? ?? ?????? ??????????", GetPlayerNameEx(offer_id));
							SendClientMessage(playerid, 0x66CC00FF, fmt_text);

							SendClientMessage(playerid, -1, "??? ???? ???????? ????? ?? ??????????. ??????????? {BBBB00}/lock 4");
							SendClientMessage(playerid, 0xCECECEFF, "????? ?????? ?? ???? ??? ???????? ù? ? ??????? ??? ????????");

							format(fmt_text, sizeof fmt_text, "?? ???? ?????? %s ????? ?? ?????? ??????????", GetPlayerNameEx(playerid));
							SendClientMessage(offer_id, 0x66CC00FF, fmt_text);

							SetPlayerData(playerid, P_ALLOWED_CAR, vehicleid);
						}
						else
						{
							if(GetPlayerOwnableCars(offer_id) == 0)
								SendClientMessage(playerid, 0x999999FF, "? ?????? ??? ??????? ??????????");
							else
								SendClientMessage(playerid, 0x999999FF, "?????? ????????? ?????? ?? ???????? ?? ??????");
						}
					}
					case OFFER_TYPE_GIVE_MIC:
					{
						SetPVarInt(playerid, "radio_mic", 1);

						new fmt_text[128];

						format(fmt_text, sizeof fmt_text, "%s ??? ??? ?????? ? ?????-?????", GetPlayerNameEx(offer_id));
						SendClientMessage(playerid, 0x66CC33FF, fmt_text);

						SendClientMessage(playerid, -1, "??? ??? ??? ????????. ?? ?????? ?????? ? ?????-?????. ???????????: {BBBB00}/u");

						format(fmt_text, sizeof fmt_text, "?? ???? ?????? %s ?????? ? ?????-?????", GetPlayerNameEx(playerid));
						SendClientMessage(offer_id, 0x66CC33FF, fmt_text);

						format(fmt_text, sizeof fmt_text, "[???] %s %s[%d] ????????? %s[%d] ? ?????-?????",
						GetPlayerJobAndRankName(offer_id), GetPlayerNameEx(offer_id), offer_id, GetPlayerNameEx(playerid), playerid);

						SendMessageToTeam(GetPlayerTeamEx(offer_id), fmt_text, 0x99CC99FF, offer_id);
					}
					case OFFER_TYPE_GIVE_LIC:
					{
						new lic_names[3][34] = {
							"???????? ????????? B",
							"???????? ????????? C/D",
							"??????"
						};

						new fmt_text[85];

						switch(value_1)
						{
							case 1: SetPlayerData(playerid, P_DRIVING_LIC, 1);
							case 2: SetPlayerData(playerid, P_DRIVING_LIC, 2);
							case 3: SetPlayerData(playerid, P_WEAPON_LIC, 1);
						}
						UpdatePlayerDatabaseInt(playerid, "driving_lic", GetPlayerData(playerid, P_DRIVING_LIC));
						UpdatePlayerDatabaseInt(playerid, "weapon_lic", GetPlayerData(playerid, P_WEAPON_LIC));

						format(fmt_text, sizeof fmt_text, "%s ?????? ??? ???????? ?? %s ?? %d ??????",
						GetPlayerNameEx(offer_id), lic_names[value_1 - 1], value_2);

						SendClientMessage(playerid, 0x3399FFFF, fmt_text);

						format(fmt_text, sizeof fmt_text, "?? ??????? %s ???????? ?? %s ?? %d ??????",
						GetPlayerNameEx(playerid), lic_names[value_1 - 1], value_2);

						SendClientMessage(offer_id, 0x3399FFFF, fmt_text);
						SendClientMessage(offer_id, 0x3399FFFF, "? ????? ???????? ????????? 10% ?? ????????? ????????");

						new wage = value_2 / 10;

						format(fmt_text, sizeof fmt_text, "??????? ???????? ?? %s ? %s", lic_names[value_1 - 1], GetPlayerNameEx(offer_id));

						GivePlayerMoneyEx(playerid, -value_2, fmt_text, true, true);

						AddPlayerData(offer_id, P_WAGE, +, wage);
						UpdatePlayerDatabaseInt(offer_id, "wage", GetPlayerData(offer_id, P_WAGE));

						format(fmt_text, sizeof fmt_text, "~b~~h~+%d rub", wage);
						GameTextForPlayer(offer_id, fmt_text, 4000, 1);
					}
					case OFFER_TYPE_JAIL_FREE:
					{
						new fmt_text[80];

						format(fmt_text, sizeof fmt_text, "%s ????? ???????????? ???? ????. ?? ???????? ?? ???????", GetPlayerNameEx(offer_id));
						SendClientMessage(playerid, 0x66CC33FF, fmt_text);

						format(fmt_text, sizeof fmt_text, "?? ???????????? ???? %s. ????? ??????? ?? ???????", GetPlayerNameEx(playerid));
						SendClientMessage(offer_id, 0x3399FFFF, fmt_text);

						format(fmt_text, sizeof fmt_text, "????????? ??????: %d ???. 10%% ???? ????? ????????? ? ????? ????????", value_1);
						SendClientMessage(offer_id, 0x3399FFFF, fmt_text);

						GivePlayerMoneyEx(playerid, -value_1, "?????? ????????", true, true);

						if(GetPlayerData(playerid, P_FJAIL) > 0)
							FSinUnjailPlayer(playerid);
						else if(GetPlayerData(playerid, P_JAIL) > 0)
							UnjailPlayer(playerid);

						new wage = value_1 / 10;
						AddPlayerData(offer_id, P_WAGE, +, wage);
						UpdatePlayerDatabaseInt(offer_id, "wage", GetPlayerData(offer_id, P_WAGE));

						AddPlayerData(offer_id, P_PROGRESS_EXP_6, +, 1);
						UpdatePlayerDatabaseInt(offer_id, "ProgressExp6", GetPlayerData(offer_id, P_PROGRESS_EXP_6));

						if(GetPlayerData(offer_id, P_PROGRESS_EXP_6) == 500)
						{
							SendClientMessage(offer_id, COR_QUEST, "[?????????ù]: "c_b"?? ??????? ????????? ?????????? "c_i"'????ù'. "c_b"???????: "c_s"100 DONATE-RUB");
							GivePlayerDonateRub(offer_id, 100, "?????????? ?????????ù / ??????ù");

							SetPlayerData(offer_id, P_PROGRESS_6, 1);
							UpdatePlayerDatabaseInt(offer_id, "Progress6", 1);

							AddPlayerData(offer_id, P_TOP_4, +, 1);
							UpdatePlayerDatabaseInt(offer_id, "TOP_Progress", GetPlayerData(offer_id, P_TOP_4));
						}

						AddPlayerData(offer_id, P_F_QUEST_EXP_1, +, 1);
						UpdatePlayerDatabaseInt(offer_id, "FracQuestExp1", GetPlayerData(offer_id, P_F_QUEST_EXP_1));

						if(GetPlayerData(offer_id, P_F_QUEST_EXP_1) == 40)
						{
							SendClientMessage(offer_id, COR_QUEST, "[??????]: "c_b"?? ??????? ????????? ????? "c_i"'?????????? ???? ?????? ???? ?? ???????'. "c_b"???????: "c_s"1 CASE(/opencase)");

							AddPlayerData(offer_id, P_DONATE_CASE, +, 1);
							UpdatePlayerDatabaseInt(offer_id, "case", GetPlayerData(offer_id, P_DONATE_CASE));

							SetPlayerData(offer_id, P_F_QUEST_1, 1);
							UpdatePlayerDatabaseInt(offer_id, "FracQuest1", 1);

							AddPlayerData(offer_id, P_TOP_5, +, 1);
							UpdatePlayerDatabaseInt(offer_id, "TOP_Quest", GetPlayerData(offer_id, P_TOP_5));
						}
					}

					default:
						SendClientMessage(playerid, 0x999999FF, "? ?????? ?????? ??? ?????? ?? ??????????");
				}
			}
			else SendClientMessage(playerid, 0x999999FF, "????? ??????? ??????");
		}
		else SendClientMessage(playerid, 0x999999FF, "????? ????? ?? ????");

		ClearPlayerOffer(playerid);
	}
	else SendClientMessage(playerid, 0x999999FF, "? ?????? ?????? ??? ?????? ?? ??????????");

	return 1;
}

CMD:no(playerid, params[])
{
	new offer_id = GetPlayerOfferInfo(playerid, O_INCOMING_PLAYER);

	if(offer_id != INVALID_PLAYER_ID)
	{
		if(GetPlayerOfferInfo(offer_id, O_OUTCOMIG_PLAYER) == playerid)
		{
			ClearPlayerOffer(offer_id);

			new fmt_str[64];
			format(fmt_str, sizeof fmt_str, "%s ????????ù ?? ?????? ??????????ù", GetPlayerNameEx(playerid));
			SendClientMessage(offer_id, 0xFF6600FF, fmt_str);

			format(fmt_str, sizeof fmt_str, "?? ?????????? ?? ??????????ù ?????? %s", GetPlayerNameEx(offer_id));
			SendClientMessage(playerid, 0xFF6600FF, fmt_str);

			GameTextForPlayer(offer_id, "~r~no", 4000, 1);
		}
		else SendClientMessage(playerid, 0xFF6600FF, "?? ?????????? ?? ??????????ù ??????");
	}
	else SendClientMessage(playerid, 0x999999FF, "? ?????? ?????? ??? ?????? ?? ??????????");

	ClearPlayerOffer(playerid);
	return 1;
}

CMD:cancel(playerid, params[])
{
	new offer_id = GetPlayerOfferInfo(playerid, O_OUTCOMIG_PLAYER);

	if(offer_id != INVALID_PLAYER_ID)
	{
		if(GetPlayerOfferInfo(offer_id, O_INCOMING_PLAYER) == playerid)
		{
			ClearPlayerOffer(offer_id);

			new fmt_str[64];
			format(fmt_str, sizeof fmt_str, "%s ??????? ???? ???????????", GetPlayerNameEx(playerid));
			SendClientMessage(offer_id, 0xFF6600FF, fmt_str);

			format(fmt_str, sizeof fmt_str, "?? ???????? ???? ??????????? ??ù %s", GetPlayerNameEx(offer_id));
			SendClientMessage(playerid, 0xFF6600FF, fmt_str);
		}
		else SendClientMessage(playerid, 0xFF6600FF, "?? ???????? ???? ????????? ???????????");

		ClearPlayerOffer(playerid);
	}
	else SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???????? ???????????");

	return 1;
}

CMD:hi(playerid, params[])
{
	if(IsPlayerInAnyVehicle(playerid))
		return SendClientMessage(playerid, 0x999999FF, "?????ù ???????????? ? ??????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /hi [id ??????]");

	extract params -> new to_player;

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	new Float: to_x, Float: to_y, Float: z;
	GetPlayerPos(to_player, to_x, to_y, z);

	new Float: dist = GetPlayerDistanceFromPoint(playerid, to_x, to_y, z);
	if(0.5 <= dist <= 1.5)
	{
		SendPlayerOffer(playerid, to_player, OFFER_TYPE_HANDSHAKE);
	}
	else if(dist < 20.0)
	{
		new fmt_str[35];

		new Float: x, Float: y;
		new Float: angle;

		GetPlayerPos(playerid, x, y, z);
		angle = GetAngleToPoint(to_x, to_y, x, y);

		SetPlayerFacingAngle(playerid, angle);

		format(fmt_str, sizeof fmt_str,"????? ????? %s", GetPlayerNameEx(to_player));
		Action(playerid, fmt_str, _, false);

		ApplyAnimationEx(playerid, "PED", "endchat_03", 4.1, 0, 1, 1, 0, 0, 1);
	}
	else SendClientMessage(playerid, 0x999999FF, "?? ?????????? ??????? ?????? ?? ??????");

	return 1;
}

CMD:me(playerid, params[])
{
	if(IsPlayerMuted(playerid))
		return SendClientMessage(playerid, 0xFF6600FF, "?? ?? ?????? ???????????? ???");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /me [?????]");

	return Action(playerid, params);
}

CMD:do(playerid, params[])
{
	if(IsPlayerMuted(playerid))
		return SendClientMessage(playerid, 0xFF6600FF, "?? ?? ?????? ???????????? ???");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /do [?????]");

	new fmt_str[128];
	SetPlayerChatBubble(playerid, params, 0xDD90FFFF, 25.0, 5000);

	format(fmt_str, sizeof fmt_str, "%s (%s)", params, GetPlayerNameEx(playerid));
	SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);

	return 1;
}

CMD:try(playerid, params[])
{
	if(IsPlayerMuted(playerid))
		return SendClientMessage(playerid, 0xFF6600FF, "?? ?? ?????? ???????????? ???");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /try [?????]");

	new fmt_str[128];

	format(fmt_str, sizeof fmt_str, "%s %s %s", GetPlayerNameEx(playerid), params, !random(3) ? ("{66CC00}| ??????") : ("{FF6600}| ????????"));
	SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);

	return 1;
}

CMD:w(playerid, params[])
{
	if(IsPlayerMuted(playerid))
		return SendClientMessage(playerid, 0xFF6600FF, "?? ?? ?????? ???????????? ???");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /w [?????]");

	new fmt_str[128];
	SetPlayerChatBubble(playerid, params, 0xACCE90FF, 3.0, 5000);

	format(fmt_str, sizeof fmt_str, "%s ??????: %s", GetPlayerNameEx(playerid), params);
	SendMessageInLocal(playerid, fmt_str, 0xACCE90FF, 3.0);

	return 1;
}

CMD:s(playerid, params[])
{
	if(GetPlayerLevel(playerid) < 11)
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ???????????ù ?? 2 ?????ù");

	if(IsPlayerMuted(playerid))
		return SendClientMessage(playerid, 0xFF6600FF, "?? ?? ?????? ???????????? ???");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /s [?????]");

	if(IsAIP(params))
	{
        SendClientMessage(playerid, -1, "?????????ù ? ???????!");
        return false;
    }

	new fmt_str[128];
	SetPlayerChatBubble(playerid, params, 0xFFFFFFFF, 37.0, 5000);

	format(fmt_str, sizeof fmt_str, "%s[%d] ???????: %s", GetPlayerNameEx(playerid), playerid, params);
	SendMessageInLocal(playerid, fmt_str, 0xFFFFFFFF, 37.0);

	ApplyAnimationEx(playerid, "ON_LOOKERS", "shout_01", 4.0, 0, 0, 0, 0, 0, 1);
	return 1;
}

CMD:dev(playerid, params[])
{
	new Float:x, Float:y, Float:z;
	new Float:Angle;
	GetPlayerPos(playerid, x, y, z);
	GetPlayerFacingAngle(playerid, Angle);
	printf("%f,%f,%f,f", x, y, z, Angle);
	return 1;
}


CMD:repaircar(playerid, params[])
{
	if(GetPlayerRepCar(playerid) < 1) return Send(playerid, -1,"? ??? ??? ???. ?????????, ?????? ??? ????? ?? ???");
	
	if(!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid,-1, !"[??????] {FFFFFF}?? ?????? ???? ?? ?????");
	
	SendClientMessage(playerid,-1, !"[?????????ù] {FFFFFF}?? ??????? ???????? ???? ?????????");
	new vehicleid = GetPlayerVehicleID(playerid);
	
	SetVehicleHealth(vehicleid,1000);
	PlayerPlaySound(playerid, 1133, 0.0,0.0,0.0);
	

	RepairVehicle(vehicleid);
	
	AddPlayerData(playerid, P_REPCARID, -, 1);
	UpdatePlayerDatabaseInt(playerid, "repcarid",GetPlayerData(playerid, P_REPCARID));
	return 1;
}
CMD:n(playerid, params[])
{
	if(IsPlayerMuted(playerid))
		return SendClientMessage(playerid, 0xFF6600FF, "?? ?? ?????? ???????????? ???");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /n [???-?? ?????????]");

	if(IsAIP(params))
	{
        SendClientMessage(playerid, -1, "?????????ù ? ???????!");
        return false;
    }

	new fmt_str[128];
	SetPlayerChatBubble(playerid, params, 0x999999FF, 30.0, 5000);

	format(fmt_str, sizeof fmt_str, "(( %s[%d]: %s ))", GetPlayerNameEx(playerid), playerid, params);
	SendMessageInLocal(playerid, fmt_str, 0xCCCC99FF, 30.0);

	return 1;
}

CMD:lic(playerid, params[])
{
	if(!strlen(params))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /lic [id ??????]");

	extract params -> new to_player;

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ???????????.");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0))
		return SendClientMessage(playerid, COLOR_GREY, "????? ??????? ??????.");

	SendClientMessage(playerid, COLOR_BLUE, "?? ?????????? ???????? ???? ????????.");
	SendPlayerOffer(playerid, to_player, OFFER_TYPE_SHOWLIC);
	return 1;
}


CMD:pass(playerid, params[])
{
    extract params -> new to_player; else return SCM(playerid, COLOR_GREY, "???????????: /pass [id ??????]");
    if (!IsPlayerConnected(to_player))
        return SCM(playerid, COLOR_GREY, "ù????? ?????? ???");

    if (!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0))
        return SCM(playerid, COLOR_GREY, "????? ????????ù ??????? ??????");

    SendPlayerOffer(playerid, to_player, OFFER_TYPE_SHOWPASS);
    SCM(playerid, COLOR_BLUE, "?? ?????????? ???????? ???????.");
    return 1;
}

CMD:restart(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	server_restart = true;

	return GameModeExit();
}

CMD:save_pos(playerid)
{
	new Float:POS[4];
	new fmt_str[64];
	GetPlayerPos(playerid, POS[0], POS[1], POS[2]);
	GetPlayerFacingAngle(playerid, POS[3]);

	format(fmt_str, 64, "X: %f Y: %f Z: %f ANGLE: %f", POS[0], POS[1], POS[2], POS[3]);
	SendClientMessage(playerid, -1, fmt_str);
	return 1;
}




CMD:mm(playerid, params[])
{
	Dialog
	(
		playerid, DIALOG_PLAYER_MENU, DIALOG_STYLE_LIST,
		"{DC143C}"SERVER_NAME"{ffffff} | ???? ??????",
		""c_b"1. ??????????\n"\
		"2. ?????? ??????\n"\
		"3. ?????? ?????????\n"\
		"4. ????????? ????????????\n"\
		"5. ??ù?? ? ??????????????\n"\
		"6. ????????ù\n"\
		"7. ??????? ???????\n"\
		"8. ???????? ??ù\n"\
		"9. ?????????????\n"\
		"{FFFFCC}10. ????????ù ?????????\n"\
		"11. ?????????ù\n"\
		"12. ??????",
		"???????", "???????"
	);
	return 1;
}
alias:mm("mn")
//alias:mm("menu");


CMD:gps(playerid, params[])
{
	DisablePlayerGPS(playerid);

	Dialog
	(
		playerid, DIALOG_GPS, DIALOG_STYLE_LIST,
		"{DC143C}"SERVER_NAME"{ffffff} | GPS",
		""c_server"1. "c_b"?????? ?????\n"\
		""c_server"2. "c_b"?????? ??ù ????????\n"\
		""c_server"3. "c_b"???????? ??????\n"\
		""c_server"4. "c_b"??????????????? ???????????\n"\
		""c_server"5. "c_b"?????????? ???????????\n"\
		""c_server"6. "c_b"ù??????????? ????????\n"\
		""c_server"7. "c_b"???????????? ????????\n"\
		""c_server"8. "c_b"ù?????????\n"\
		""c_server"9. "c_b"??????????ù\n"\
		""c_server"10. "c_b"?????\n"\
		""c_server"11. "c_b"???????\n"\
		""c_server"12. "c_b"??????????\n"\
		""c_server"13. "c_b"?ù? ? ??????-??????\n"\
		""c_server"14. "c_b"?????? ? ?????????? ??????\n"\
		""c_server"15. "c_b"???????\n"\
		""c_server"16. "c_b"????? ????????? ????",
		"???????", "???????"
	);
	return 1;
}

CMD:help(playerid, params[])
{
	Dialog
	(
		playerid, DIALOG_HELP, DIALOG_STYLE_LIST,
		"{00CC33}?????? ?? ????",
		help_info_items,
		"???????", "???????"
	);

	return 1;
}

CMD:anim(playerid, params[])
{
	if(IsPlayerInAnyVehicle(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "???????? ?????ù ???????????? ? ??????????");

	if(PreLoadPlayerAnimList(playerid))
		return callcmd::anim(playerid, "");
		
if(UseAnimWerton[playerid] == 1)
	{
     ClearPlayerUseAnim(playerid);
     UseAnimWerton[playerid] = 0;
     return 1;
    }
    
    if(UseAnimWerton[playerid] == 0)
	{
	if(!strlen(params))
	{
		Dialog
		(
			playerid, DIALOG_ANIM_LIST, DIALOG_STYLE_LIST,
			"{9966FF}????????",
			anim_list_items,
			"???????", "???????"
		);
	}
	else
	{
		extract params -> new anim_id;

		if(!SetPlayerAnimation(playerid, anim_id-1))
			return SendClientMessage(playerid, 0xCECECEFF, "??????????? /anim(list) [????? ???????? ?? ??????]");
	}
	return 1;
	}
}

alias:anim("animlist")
alias:e("en")
CMD:e(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);

	if(!IsABike(vehicleid))
	{
		if(!IsPlayerDriver(playerid))
			return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?? ?????");

		
		if(GetVehicleData(vehicleid, V_FUEL) <= 0.0)
			return ShowNotificationNew(playerid, 0, 5, 0, 0, "? ?????? ???? ??? ???????", "");

	    engine = (GetVehicleParam(vehicleid, V_ENGINE) ^ VEHICLE_PARAM_ON);
		SetVehicleParam(vehicleid, V_ENGINE, engine);
	}
	return 1;
}
alias:l("lights")
CMD:l(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);

	if(!IsABike(vehicleid))
	{
		if(!IsPlayerDriver(playerid))
			return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?? ?????");

		lights = (GetVehicleParam(vehicleid, V_LIGHTS) ^ VEHICLE_PARAM_ON);
		SetVehicleParam(vehicleid, V_LIGHTS, lights);
	}
	return 1;
}

CMD:sl(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);

	if(!IsABike(vehicleid))
	{
		if(!IsPlayerDriver(playerid))
			return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?? ?????");

		new limit = (GetVehicleData(vehicleid, V_LIMIT) ^ VEHICLE_PARAM_ON);
		SetVehicleData(vehicleid, V_LIMIT, limit);
	}
	return 1;
}

CMD:b(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);

	if(IsModelHasBootAndBonnet(GetVehicleModel(vehicleid)))
	{
		if(!IsPlayerDriver(playerid))
			return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?? ?????");

		Dialog
		(
			playerid, DIALOG_OPEN_HOOD_OR_TRUNK, DIALOG_STYLE_MSGBOX,
			" ",
			"\t{CC9900}?????????ù ????",
			"?????", "????????"
		);
	}
	return 1;
}

CMD:i(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);

	if(!IsABike(vehicleid))
	{
		if(!IsPlayerDriver(playerid))
			return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?? ?????");

		new stationid = GetNearestFuelStation(playerid, 10.0);
		if(stationid != -1)
		{
			FuelStationFillCar(playerid, vehicleid, stationid);
		}
		else SendClientMessage(playerid, 0xCECECEFF, "?????????? ??? ??????????? ???????");
	}
	return 1;
}

CMD:alarm(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);

	if(!IsABike(vehicleid))
	{
		if(!IsPlayerDriver(playerid))
			return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?? ?????");

		alarm = (GetVehicleData(vehicleid, V_ALARM) ^ VEHICLE_PARAM_ON);
		SetVehicleData(vehicleid, V_ALARM, alarm);
	}
	return 1;
}

CMD:charity(playerid, params[])
{
	new Cache: result;
	new rows;
	new money;
	new fmt_str[75];
	new string[1024];

	cache_set_active(charity_cache_data);
	rows = cache_num_rows();

	string = "?????\t\t??ù\n\n{FFFFFF}";
	for(new idx; idx < rows; idx ++)
	{
		cache_get_row(idx, 0, fmt_str);
		money = cache_get_row_int(idx, 1);

		format(fmt_str, sizeof fmt_str, "%d ???\t\t%s\n", money, fmt_str);
		strcat(string, fmt_str);
	}
	cache_set_active(Cache:0); //unset active cache

	format(fmt_str, sizeof fmt_str, "SELECT SUM(money) as money FROM charity WHERE uid=%d LIMIT 1", GetPlayerAccountID(playerid));
	result = mysql_query(mysql, fmt_str, true);

	money = cache_get_row_int(0, 0);
	cache_delete(result);

	format(fmt_str, sizeof fmt_str, "\n{999999}????? ????? ?????????????: %d ???", money);
	strcat(string, fmt_str);

	return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{00CC00}ù?? 25 ???????????????", string, "???????", "");
}

CMD:bank(playerid, params[])
{
	//if(GetPlayerLevel(playerid) < 4)
	//	return SendClientMessage(playerid, 0x999999FF, "???????????ù ???????????????? ??????? ????? ? 4 ?????ù");
	if(IsPlayerInRangeOfPoint(playerid, 35.0, 2902.8274,2509.2036,1051.0000))
	{
		ShowPlayerBankDialog(playerid);
		SetPlayerPos(playerid, 2906.47,2499.32,1051.04,354.50);
	}
	else SendClientMessage(playerid, 0xCECECEFF, "?? ?? ? ?????");

	return 1;
}
CMD:time(playerid, params[])
{
    new
		hour, minute, second,
		year, month, day;
		
    gettime(hour, minute, second);
	getdate(year, month, day);

	//new fmt_str[999];
	
    //format(fmt_str, sizeof fmt_str, "~y~%d:%02d:%02d~n~~b~~h~%02d.%02d.%d", hour, minute, second, day, month, year);
	//GameTextForPlayer(playerid, fmt_str, 3000, 1);

	new fmt_msg[999];
	if(GetPlayerData(playerid, P_WARN_TIME) > 0)
	{
		format(fmt_msg, sizeof fmt_msg, "????ù ?? ??ù??ù ?????????????ù: %d ????", ((GetPlayerData(playerid, P_WARN_TIME) - gettime()) / 86400) + 1);
		SendClientMessage(playerid, 0x66CC00FF, fmt_msg);
	}
    if(GetPlayerData(playerid, P_FMUTE) > 0)
	{
		format(fmt_msg, sizeof fmt_msg, "????ù ?? ????????????? ????????? ????: %d:%02d", floatround(GetPlayerData(playerid, P_FMUTE) / 60) /* % 60 */, (GetPlayerData(playerid, P_FMUTE) % 60));
		SendClientMessage(playerid, 0x32a44bFF, fmt_msg);
	}
	if(GetPlayerData(playerid, P_MUTE) > 0)
	{
		format(fmt_msg, sizeof fmt_msg, "????ù ?? ????????????? ????: %d:%02d", floatround(GetPlayerData(playerid, P_MUTE) / 60) /* % 60 */, (GetPlayerData(playerid, P_MUTE) % 60));
		SendClientMessage(playerid, 0x66CC00FF, fmt_msg);
	}

	if(GetPlayerData(playerid, P_JAIL) > 0)
	{
		format(fmt_msg, sizeof fmt_msg, "????ù ?? ????? ?????????ù: %d:%02d", floatround(GetPlayerData(playerid, P_JAIL) / 60) /* % 60 */, (GetPlayerData(playerid, P_JAIL) % 60));
		SendClientMessage(playerid, 0x66CC00FF, fmt_msg);
	}
	
	if(GetPlayerData(playerid, P_FJAIL) > 0)
	{
		format(fmt_msg, sizeof fmt_msg, "????ù ?? ????? ?????????ù: %d:%02d", floatround(GetPlayerData(playerid, P_FJAIL) / 60) /* % 60 */, (GetPlayerData(playerid, P_FJAIL) % 60));
		SendClientMessage(playerid, 0x66CC00FF, fmt_msg);
	}
	
	ShowTime(playerid);
	ShowCurrentTime(playerid);

	return 1;
}

CMD:id(playerid, params[])
{
	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /id [??ù ??? ????? ????? ??????]");

	new fmt_str[64];
	new count;

	foreach(new idx : Player)
	{
		if(!IsPlayerLogged(idx)) continue;

		if(strfind(GetPlayerNameEx(idx), params, true) != -1)
		{
			count ++;

			format(fmt_str, sizeof fmt_str, "%d. %s {66CC66}id %d", count, GetPlayerNameEx(idx), idx);
			SendClientMessage(playerid, 0xFFFFFFFF, fmt_str);

			if(count >= 5)
			{
				SendClientMessage(playerid, 0x999999FF, "???????? ?????? 5 ??????????");
				break;
			}
		}
	}
	if(!count)
		SendClientMessage(playerid, 0x999999FF, "?????????? ?? ???????");

	return 1;
}

CMD:buyf(playerid, params[])
{
	new factory_fuels = GetRepositoryData(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F, R_AMOUNT);

	if(!IsPlayerInAnyVehicle(playerid))
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ?? ??????????? ? ??????? ??????????");

	new modelid;
	new vehicleid = GetPlayerJobCar(playerid);

	if(vehicleid != INVALID_VEHICLE_ID)
		modelid = GetVehicleData(vehicleid, V_MODELID);

	if(IsPlayerInRangeOfPoint(playerid, 20.0, 2710.3369,-2383.5164,17.9063))  // ??ù ??????
	{
		if(GetPlayerTempJob(playerid) != TEMP_JOB_FACTORY_TRUCKER || modelid != 514)
			return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ????????? ? ?????? ???????? ?????? ??? ???ù?? ?? ?? ?????");
	}
	else if(IsPlayerInRangeOfPoint(playerid, 20.0, 2738.3379,-2273.0725,17.9063))  // ??ù ???
	{
		if(GetPlayerJob(playerid) != JOB_TRUCKER || modelid != 514)
			return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ????????? ??????????? ??????? ??? ???ù?? ?? ?? ?????");
	}
	else
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ?? ???????????");

	new total_litres = GetPlayerJobLoadItems(playerid);

	if(!IsPlayerInVehicle(playerid, vehicleid))
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ?? ??????????? ? ??????? ??????????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0x999999FF, "???????????: /buyf [???-?? ? ??????]");

	if(!IsTrailerAttachedToVehicle(vehicleid))
		return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ?????????? ??????????? ???????? ??ù ???????");

	extract params -> new load_fuel;

	if(!(1 <= load_fuel <= 8000))
		return SendClientMessage(playerid, 0x999999FF, "????? ????????? ?? 1 ?? 8000 ? ???????");

	if(factory_fuels < load_fuel)
		return SendClientMessage(playerid, 0x999999FF, "?? ??????????? ??? ?????? ?????????? ???????");

	if((total_litres + load_fuel) > 8000)
		return SendClientMessage(playerid, 0xCECECEFF, "? ???????? ??????? ?? ?????????ù");

	if(GetPlayerMoneyEx(playerid) < (load_fuel * 10))
		return SendClientMessage(playerid, 0x999999FF, "???????????? ????? ??ù ??????? ?????? ?????????? ???????");

	GivePlayerMoneyEx(playerid, -(load_fuel * 10), "??????? ??????? (??????????)", true, false);

	SetRepositoryData(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F, R_AMOUNT, factory_fuels - load_fuel);
	UpdateRepository(REPOSITORY_TYPE_OIL_FACTORY, REPOSITORY_ACTION_OIL_FACTORY_F);

	SetPlayerJobLoadItems(playerid, total_litres + load_fuel);

	new fmt_str[64];

	format(fmt_str, sizeof fmt_str, "?? ????????? %d ? ??????? ????? ?????????? %d ???", load_fuel, load_fuel * 10);
	SendClientMessage(playerid, 0xFFFF00FF, fmt_str);

	format(fmt_str, sizeof fmt_str, "~g~+ %d litres~n~~b~total %d litres", load_fuel, total_litres + load_fuel);
	GameTextForPlayer(playerid, fmt_str, 2000, 6);

	format(fmt_str, sizeof fmt_str, "???????? ???????\n{FFFFFF}???????? %d / 8000 ?", total_litres + load_fuel);
	UpdateVehicleLabel(vehicleid, 0xFF6600FF, fmt_str);

	return 1;
}

CMD:sellf(playerid, params[])
{
	new modelid;
	new vehicleid = GetPlayerJobCar(playerid);

	if(vehicleid != INVALID_VEHICLE_ID)
		modelid = GetVehicleData(vehicleid, V_MODELID);

	if(GetPlayerTempJob(playerid) != TEMP_JOB_FACTORY_TRUCKER || modelid != 514)
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ????????? ? ?????? ???????? ??????");

	if(!IsPlayerInRangeOfPoint(playerid, 10.0, -1120.4103,2175.6133,38.0294))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????? ??????? ??????");

	new total_litres = GetPlayerJobLoadItems(playerid);

	new factory_fuels = GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL, R_AMOUNT);

	if(!strlen(params))
		return SendClientMessage(playerid, 0x999999FF, "???????????: /sellf [???-?? ? ??????]");

	extract params -> new sell_fuels;

	if(!(1 <= sell_fuels <= 8000))
		return SendClientMessage(playerid, 0x999999FF, "????? ??????? ?? 1 ?? 8000 ? ???????");

	if(vehicleid == INVALID_VEHICLE_ID || !IsTrailerAttachedToVehicle(vehicleid) || total_litres < sell_fuels)
		return SendClientMessage(playerid, 0x999999FF, "? ????? ???? ??? ?????? ?????????? ??????? ??? ???????? ?? ??????????");

	if((factory_fuels + sell_fuels) > 1000000)
		return SendClientMessage(playerid, 0x999999FF, "????? ??????? ?????? ????????");

	GivePlayerMoneyEx(playerid, (sell_fuels * 12), "??????? ??????? (?????)", true, true);

	SetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL, R_AMOUNT, factory_fuels + sell_fuels);
	UpdateRepository(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_FUEL);

	SetPlayerJobLoadItems(playerid, total_litres - sell_fuels);
	AddPlayerData(playerid, P_JOB_WAGE, +, sell_fuels * 2);

	new fmt_str[64];

	format(fmt_str, sizeof fmt_str, "?? ??????? ?????? %d ? ??????? ?? ????? %d ???", sell_fuels, sell_fuels * 12);
	SendClientMessage(playerid, 0x66CC00FF, fmt_str);

	format(fmt_str, sizeof fmt_str, "???? ?????ù ??????? ???????ù?? {FF9900}%d ???", sell_fuels * 2);
	SendClientMessage(playerid, 0x66CC00FF, fmt_str);

	format(fmt_str, sizeof fmt_str, "???????? ???????\n{FFFFFF}???????? %d / 8000 ?", total_litres - sell_fuels);
	UpdateVehicleLabel(vehicleid, 0xFF6600FF, fmt_str);

	return 1;
}

CMD:buyprod(playerid, params[])
{
	if(!(GetPlayerJob(playerid) == JOB_TRUCKER && IsPlayerInJob(playerid)))
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ???????? ??????????????");

	extract params -> new buy_prod_count; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /buyprod [???-??]. ????????? 1 ???????? 24 ???.");

	if(!IsPlayerInRangeOfPoint(playerid, 20.0, -1046.5460,2203.9644,38.2055))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????? ???????? ?????????? ??????");

	else if(!IsPlayerInVehicle(playerid, GetPlayerJobCar(playerid)))
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ?????? ???????? ?????????? ?????? ? ??????? ??????????");

	else if(!(1 <= buy_prod_count <= 10000))
		return SendClientMessage(playerid, 0x999999FF, "????? ????????? ?? 1 ?? 10000 ??. ?????????");

	else if(GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_PROD, R_AMOUNT) < buy_prod_count)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ???????? ?????????? ??? ?????? ?????????? ?????????");

	else if((buy_prod_count + GetPlayerJobLoadItems(playerid)) > 10000)
		return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ??????? ?? ?????????ù, ???????? 10000 ??.");

	if(GetPlayerMoneyEx(playerid) < (buy_prod_count * 24))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????? ????? ??ù ??????? ?????? ?????????? ?????????");

	GivePlayerMoneyEx(playerid, -(buy_prod_count * 24), "??????? ????????? (????. ?????????)", true, true);

	SetPlayerJobLoadItems(playerid, GetPlayerJobLoadItems(playerid) + buy_prod_count);

	SetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_PROD, R_AMOUNT, GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_PROD, R_AMOUNT) - buy_prod_count);
	UpdateRepository(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_PROD);

	new fmt_msg[64];

	format(fmt_msg, sizeof fmt_msg, "?? ?????? %d ????????? ?? ????? %d ???.", buy_prod_count, buy_prod_count * 24);
	SendClientMessage(playerid, 0x66CC00FF, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "ù?????? ???-?? ??????????? ?????????: %d ?? 10000", GetPlayerJobLoadItems(playerid));
	SendClientMessage(playerid, 0xFFFF00FF, fmt_msg);

	return 1;
}

CMD:buym(playerid, params[])
{
	new modelid;
	new vehicleid = GetPlayerJobCar(playerid);

	if(vehicleid != INVALID_VEHICLE_ID)
		modelid = GetVehicleData(vehicleid, V_MODELID);

	if(GetPlayerTempJob(playerid) != TEMP_JOB_FACTORY_TRUCKER || modelid != 406)
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ?????? ???????? ??????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0x999999FF, "???????????: /buym [???-?? ? ??]");

	extract params -> new buy_metal_count;

	new metall_loaded_count = GetPlayerJobLoadItems(playerid);
	new miner_metal = GetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL, R_AMOUNT);

	if(!IsPlayerInRangeOfPoint(playerid, 15.0, 2424.5317,1765.6780,-0.2507) || !IsPlayerInVehicle(playerid, vehicleid))
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ?????? ????? ? ??????? ??????????");

	if(!(1 <= buy_metal_count <= 500))
		return SendClientMessage(playerid, 0x999999FF, "????? ????????? ?? 1 ?? 500 ?? ??????????");

	if(miner_metal < buy_metal_count)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ????? ??? ?????? ?????????? ??????????");

	if((metall_loaded_count + buy_metal_count) > 500)
		return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ??????? ?? ?????????ù");

	if(GetPlayerMoneyEx(playerid) < (buy_metal_count * 15))
		return SendClientMessage(playerid, 0x999999FF, "???????????? ????? ??ù ??????? ?????? ?????????? ??????????");

	GivePlayerMoneyEx(playerid, -(buy_metal_count * 15), "??????? ?????????? (?????????)", true, true);

	SetRepositoryData(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL, R_AMOUNT, miner_metal - buy_metal_count);
	UpdateRepository(REPOSITORY_TYPE_MINER, REPOSITORY_ACTION_MINER_METAL);

	SetPlayerJobLoadItems(playerid, metall_loaded_count + buy_metal_count);

	new fmt_str[64];

	format(fmt_str, sizeof fmt_str, "?? ????????? %d ?? ?????????? ????? ?????????? %d ???", buy_metal_count, buy_metal_count * 15);
	SendClientMessage(playerid, 0xFFFF00FF, fmt_str);

	format(fmt_str, sizeof fmt_str, "???????? ??????????\n{FFFFFF}???????? %d / 500 ??", metall_loaded_count + buy_metal_count);
	UpdateVehicleLabel(vehicleid, 0x3399FFFF, fmt_str);

	return 1;
}

CMD:sellm(playerid, params[])
{
	if(!strlen(params))
		return SendClientMessage(playerid, 0x999999FF, "???????????: /sellm [???-?? ? ??]");

	extract params -> new sell_metal_count;

	if(!IsPlayerInRangeOfPoint(playerid, 20.0, -1043.8157,2205.5217,38.1195))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????? ?????????? ??????");

	if(!(1 <= sell_metal_count <= 500))
		return SendClientMessage(playerid, 0x999999FF, "????? ??????? ?? 1 ?? 500 ?? ??????????");

	new factory_metal = GetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_AMOUNT);

	if((factory_metal + sell_metal_count) > 1_000_000)
		return SendClientMessage(playerid, 0xCECECEFF, "????? ?????????? ?????? ????????");

	new fmt_str[90];

	new modelid;
	new vehicleid = GetPlayerJobCar(playerid);

	if(vehicleid != INVALID_VEHICLE_ID)
		modelid = GetVehicleData(vehicleid, V_MODELID);

	if(GetPlayerTempJob(playerid) == TEMP_JOB_FACTORY_TRUCKER && IsPlayerInVehicle(playerid, vehicleid) && modelid == 406)
	{
		new metall_loaded_count = GetPlayerJobLoadItems(playerid);

		if(metall_loaded_count < sell_metal_count)
			return SendClientMessage(playerid, 0x999999FF, "? ????? ??????? ??? ?????? ?????????? ??????????");

		metall_loaded_count -= sell_metal_count;
		SetPlayerJobLoadItems(playerid, metall_loaded_count);

		format(fmt_str, sizeof fmt_str, "???????? ??????????\n{FFFFFF}???????? %d / 500 ??", metall_loaded_count);
		UpdateVehicleLabel(vehicleid, 0x3399FFFF, fmt_str);

		AddPlayerData(playerid, P_JOB_WAGE, +, sell_metal_count * 3);
		GivePlayerMoneyEx(playerid, (sell_metal_count * 18), "??????? ?????????? ?????? (?????????)", true, true);
	}
	else
	{
		if(GetPlayerData(playerid, P_METALL) < sell_metal_count)
			return SendClientMessage(playerid, 0x999999FF, "? ??? ? ????? ??? ?????? ?????????? ??????????");

		format(fmt_str, sizeof fmt_str, "UPDATE accounts SET money=%d,metall=%d WHERE id=%d LIMIT 1", GetPlayerMoneyEx(playerid) + (sell_metal_count * 18), GetPlayerData(playerid, P_METALL), GetPlayerAccountID(playerid));
		mysql_query(mysql, fmt_str, false);

		if(!mysql_errno())
		{
			AddPlayerData(playerid, P_METALL, -, sell_metal_count);
			GivePlayerMoneyEx(playerid, (sell_metal_count * 18), "??????? ?????????? ??????", false, true);
		}
		else
			return SendClientMessage(playerid, 0xFF6600FF, "?????? ?????????ù, ????????? ??????? {FF0000}(equ-code 13)");

	}
	format(fmt_str, sizeof fmt_str, "?? ??????? ?????? %d ?? ?????????? ?? ????? %d ???", sell_metal_count, sell_metal_count * 18);
	SendClientMessage(playerid, 0x66CC00FF, fmt_str);

	format(fmt_str, sizeof fmt_str, "???? ?????ù ??????? ???????ù?? {FF9900}%d ???", sell_metal_count * 3);
	SendClientMessage(playerid, 0x66CC00FF, fmt_str);

	SetRepositoryData(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL, R_AMOUNT, factory_metal + sell_metal_count);
	UpdateRepository(REPOSITORY_TYPE_FACTORY, REPOSITORY_ACTION_FACTORY_METAL);

	return 1;
}

CMD:takem(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_ARMY) return SendClientMessage(playerid, 0x999999FF, "?? ?? ??????????????");

	extract params -> new take_metal_count; else return SendClientMessage(playerid, 0x999999FF, "???????????: /takem [???-?? ? ??]");

	if(take_metal_count <= 0) return SendClientMessage(playerid, 0x999999FF, "???????? ?????????? ??????????");

	new army_metal = GetRepositoryData(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL, R_AMOUNT);

	if(!IsPlayerInRangeOfPoint(playerid, 15.0, 2883.7095,1447.6533,1050.9984))
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ?????? ???????? ?????");

	if(army_metal < take_metal_count)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ???????? ????? ??? ?????? ?????????? ??????????");

	if((GetPlayerData(playerid, P_METALL) + take_metal_count) > GetPlayerMaxStorage(playerid, STORAGE_METALL))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????? ?????? ? ????? ??????? ?????????? (???????? 20 ??)");

	AddPlayerData(playerid, P_METALL, +, take_metal_count);
	UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

	SetRepositoryData(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL, R_AMOUNT, army_metal - take_metal_count);
	UpdateRepository(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL);

	new fmt_str[128];

	format(fmt_str, sizeof fmt_str, "%s[%d] ??ù?(?) ?? ??????? ?????? {00cc33}%d ?? ??????????", GetPlayerNameEx(playerid), playerid, take_metal_count);
	SendMessageToTeam(TEAM_ARMY, fmt_str, 0x3399FFFF);

	return 1;
}

CMD:putm(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_ARMY) return SendClientMessage(playerid, 0x999999FF, "?? ?? ??????????????");

	extract params -> new put_metal_count; else return SendClientMessage(playerid, 0x999999FF, "???????????: /putm [???-?? ? ??]");

	if(put_metal_count <= 0) return SendClientMessage(playerid, 0x999999FF, "???????? ?????????? ??????????");

	new army_metal = GetRepositoryData(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL, R_AMOUNT);

	if(!IsPlayerInRangeOfPoint(playerid, 15.0, 2883.7095,1447.6533,1050.9984))
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ?????? ???????? ?????");

	if(GetPlayerData(playerid, P_METALL) < put_metal_count)
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ?????? ?????????? ??????????");

	AddPlayerData(playerid, P_METALL, -, put_metal_count);
	UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

	SetRepositoryData(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL, R_AMOUNT, army_metal + put_metal_count);
	UpdateRepository(REPOSITORY_TYPE_ARMY, REPOSITORY_ACTION_ARMY_METAL);

	new fmt_str[128];

	format(fmt_str, sizeof fmt_str, "%s[%d] ???????(?) ?? ??????? ????? {00cc33}%d ?? ??????????", GetPlayerNameEx(playerid), playerid, put_metal_count);
	SendMessageToTeam(TEAM_ARMY, fmt_str, 0x3399FFFF);

	return 1;
}

CMD:givemet(playerid, params[])
{
	extract params -> new to_player, give_metall_count; else return SendClientMessage(playerid, 0x999999FF, "???????????: /givemet [id ??????] [???-?? ? ??]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(give_metall_count <= 0) return SendClientMessage(playerid, 0x999999FF, "???????? ?????????? ??????????");

	if(give_metall_count > GetPlayerData(playerid, P_METALL))
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ?????? ?????????? ??????????");

	new fmt_text[80];

	if((GetPlayerData(to_player, P_METALL) + give_metall_count) > GetPlayerMaxStorage(to_player, STORAGE_METALL))
	{
		format(fmt_text, sizeof fmt_text, "????? ?? ????? ?????? ? ????? ??????? ?????????? (???????? %d ??)", GetPlayerMaxStorage(to_player, STORAGE_METALL));
		SendClientMessage(playerid, 0xCECECEFF, fmt_text);
	}

	AddPlayerData(playerid, P_METALL, -, give_metall_count);
	UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

	AddPlayerData(to_player, P_METALL, +, give_metall_count);
	UpdatePlayerDatabaseInt(to_player, "metall", GetPlayerData(to_player, P_METALL));

	format(fmt_text, sizeof fmt_text, "~b~-%d metall", give_metall_count);
	GameTextForPlayer(playerid, fmt_text, 4000, 1);

	format(fmt_text, sizeof fmt_text, "~b~+%d metall", give_metall_count);
	GameTextForPlayer(to_player, fmt_text, 4000, 1);

	format(fmt_text, sizeof fmt_text, "?? ???????? ????????? ?????? %s (%d ??.)", GetPlayerNameEx(to_player), give_metall_count);
	SendClientMessage(playerid, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "????? %s ??????? ??? ????????? (%d ??.)", GetPlayerNameEx(playerid), give_metall_count);
	SendClientMessage(to_player, 0x3399FFFF, fmt_text);

	return 1;
}


CMD:givemycoins(playerid, params[])
{
	if (GetPlayerData(playerid, P_TOTALHOUR) < 30) {
		SendClientMessage(playerid, 0x999999FF, "????? ???????? 30 ?????, ????? ?????????? ?????");
		return 1;
	}

	extract params -> new to_player, give; else return SendClientMessage(playerid, 0x999999FF, "???????????: /givemycoins [id ??????] [???-??]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(give <= 0) return SendClientMessage(playerid, 0x999999FF, "???????? ??????????");

	if(give > GetPlayerData(playerid, P_COINS))
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ?????? ?????????? ??????");

	new fmt_text[80];

	AddPlayerData(playerid, P_COINS, -, give);
	UpdatePlayerDatabaseInt(playerid, "coins", GetPlayerData(playerid, P_COINS));

	AddPlayerData(to_player, P_COINS, +, give);
	UpdatePlayerDatabaseInt(to_player, "coins", GetPlayerData(to_player, P_COINS));

	format(fmt_text, sizeof fmt_text, "~b~-%d coin", give);
	GameTextForPlayer(playerid, fmt_text, 4000, 1);

	format(fmt_text, sizeof fmt_text, "~b~+%d coin", give);
	GameTextForPlayer(to_player, fmt_text, 4000, 1);

	format(fmt_text, sizeof fmt_text, "?? ???????? ?????? ?????? %s ? ?????????? %d", GetPlayerNameEx(to_player), give);
	SendClientMessage(playerid, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "????? %s ??????? ??? ?????? ? ?????????? %d", GetPlayerNameEx(playerid), give);
	SendClientMessage(to_player, 0x3399FFFF, fmt_text);

	return 1;
}

CMD:givepatr(playerid, params[])
{
	extract params -> new to_player, give_ammo_count; else return SendClientMessage(playerid, 0x999999FF, "???????????: /givepatr [id ??????] [???-?? ????????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(give_ammo_count <= 0) return SendClientMessage(playerid, 0x999999FF, "???????? ?????????? ????????");

	if(give_ammo_count > GetPlayerData(playerid, P_AMMO))
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ?????? ?????????? ????????");

	new fmt_text[80];

	if((GetPlayerData(to_player, P_AMMO) + give_ammo_count) > GetPlayerMaxStorage(to_player, STORAGE_AMMO))
	{
		format(fmt_text, sizeof fmt_text, "????? ?? ????? ?????? ? ????? ??????? ???????? (???????? %d ??)", GetPlayerMaxStorage(to_player, STORAGE_AMMO));
		SendClientMessage(playerid, 0xCECECEFF, fmt_text);
	}

	AddPlayerData(playerid, P_AMMO, -, give_ammo_count);
	UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

	AddPlayerData(to_player, P_AMMO, +, give_ammo_count);
	UpdatePlayerDatabaseInt(to_player, "ammo", GetPlayerData(playerid, P_AMMO));

	format(fmt_text, sizeof fmt_text, "~b~-%d patr.", give_ammo_count);
	GameTextForPlayer(playerid, fmt_text, 4000, 1);

	format(fmt_text, sizeof fmt_text, "~b~+%d patr.", give_ammo_count);
	GameTextForPlayer(to_player, fmt_text, 4000, 1);

	format(fmt_text, sizeof fmt_text, "?? ???????? ??????? ?????? %s (%d ??.)", GetPlayerNameEx(to_player), give_ammo_count);
	SendClientMessage(playerid, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "????? %s ??????? ??? ??????? (%d ??.)", GetPlayerNameEx(playerid), give_ammo_count);
	SendClientMessage(to_player, 0x3399FFFF, fmt_text);

	return 1;
}

CMD:givedrugs(playerid, params[])
{
	extract params -> new to_player, give_drugs_count; else return SendClientMessage(playerid, 0x999999FF, "???????????: /givedrugs [id ??????] [???-?? ? ?]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(give_drugs_count <= 0) return SendClientMessage(playerid, 0x999999FF, "???????? ?????????? ??????????");

	if(give_drugs_count > GetPlayerData(playerid, P_DRUGS))
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ?????? ?????????? ??????????");

	new fmt_text[80];

	if((GetPlayerData(to_player, P_DRUGS) + give_drugs_count) > GetPlayerMaxStorage(to_player, STORAGE_DRUGS))
	{
		format(fmt_text, sizeof fmt_text, "????? ?? ????? ?????? ? ????? ??????? ?????????? (???????? %d ?)", GetPlayerMaxStorage(to_player, STORAGE_DRUGS));
		SendClientMessage(playerid, 0xCECECEFF, fmt_text);
	}

	AddPlayerData(playerid, P_DRUGS, -, give_drugs_count);
	UpdatePlayerDatabaseInt(playerid, "drugs", GetPlayerData(playerid, P_DRUGS));

	AddPlayerData(to_player, P_DRUGS, +, give_drugs_count);
	UpdatePlayerDatabaseInt(to_player, "drugs", GetPlayerData(playerid, P_DRUGS));

	format(fmt_text, sizeof fmt_text, "~b~-%d g.", give_drugs_count);
	GameTextForPlayer(playerid, fmt_text, 4000, 1);

	format(fmt_text, sizeof fmt_text, "~b~+%d g.", give_drugs_count);
	GameTextForPlayer(to_player, fmt_text, 4000, 1);

	format(fmt_text, sizeof fmt_text, "?? ???????? ??????? ????????? %s (%d ?.)", GetPlayerNameEx(to_player), give_drugs_count);
	SendClientMessage(playerid, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "????? %s ??????? ??? ????????? (%d ?.)", GetPlayerNameEx(playerid), give_drugs_count);
	SendClientMessage(to_player, 0x3399FFFF, fmt_text);

	return 1;
}

CMD:o(playerid, params[])
{
if(GetPlayerAdminEx(playerid) < 4) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
	
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /msg [?????]");

		if(IsAIP(params))
		{
	   		SendClientMessage(playerid, -1, "?????????ù ? ???????!");
	       	return false;
	    }

		new fmt_str[128];

		format(fmt_str, sizeof fmt_str, "????????????? %s: %s", GetPlayerNameEx(playerid), params);
		SendClientMessageToAll(0xFFCD00FF, fmt_str);

		SendLog(playerid, LOG_TYPE_OOC_CHAT, params);
	}

	return 1;
}

alias:msg("o")


CMD:ears(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 3) return 1;

	g_admin_ears = g_admin_ears ^ true;

	new fmt_text[70];

	format(fmt_text, sizeof fmt_text, "?? %s ????????? SMS", g_admin_ears ? "????????" : "?????????");
	SendClientMessage(playerid, 0x3399FFFF, fmt_text);

	if(GetPlayerAdminEx(playerid) <= 5)
	{
		format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] %s ????????? SMS", GetPlayerNameEx(playerid), playerid, g_admin_ears ? "???????" : "????????");
		SendMessageToAdmins(fmt_text, 0x999999FF);
	}

	format(fmt_text, sizeof fmt_text, "%s ????????? SMS", g_admin_ears ? "???????" : "????????");

	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:event(playerid, params[])
{
    new pname[MAX_PLAYER_NAME];
    GetPlayerName(playerid, pname, sizeof(pname));

    if(GetPlayerAdminEx(playerid) >= 2 || strcmp(pname, "", true) == 0)
	{
		if(!mp[MP_CREATE])
		{
			Dialog
			(
				playerid, DIALOG_EVENT_CREATE, DIALOG_STYLE_INPUT,
				"{FF0000}"SERVER_NAME" {FFFFFF}| ???????? ???????ù??ù",
				"{FFFFFF}??ù ???????ù ???????ù??ù ??????? ??? ???????? ? ????? ?????\n"\
				"? ????? ?????????, ????? ???ù???.\n\n"\
				"{FFFFFF}??????: {FFFFFF}?ù??, 50000\n\n"\
				"{FFFFFF}- ????????: ?? 3 ?? 32 ???????? (???????/????????? ?????, ?????)\n"\
				"- ????? ?????: ?????? ?????, ?? ????? 0",
				"?????", "??????"
			);
		}
		else
		{
new fmt_str[1026];

format(fmt_str, sizeof fmt_str, \
    "{FFFF00}01. {FFFFFF} ???????? ???????ù??ù: {ffff00}%s\n"\
    "{FFFF00}02. {FFFFFF} ???? ???????ù??ù: {ffff00}%d ??????? ??????\n"\
    "{FFFF00}03. {FFFFFF} ??? ???????ù??ù - /mp\n"\
    "{FFFF00}04. {FFFFFF} %s ???????? ?? ???????ù???\n"\
    "{FFFF00}05. {FFFFFF} ????????? ???????ù??? ? ?????? ????\n"\
    "{FFFF00}06. {FFFFFF} ?????? ???? ?????????? ???????ù??ù ?????\n"\
    "{FFFF00}07. {FFFFFF} ?????? ???? ?????????? ???????ù??ù ????????\n"\
    "{FFFF00}08. {FFFFFF} ?????? ???? ?????????? ???????ù??ù ?????\n"\
    "{FFFF00}09. {FFFFFF} ?????? ???? ?????????? ???????ù??ù ?????\n"\
    "{FFFF00}10. {FFFFFF} ?????? ???? ?????????? ???????ù??ù ?????????\n"\
    "{FFFF00}11. {FFFFFF} ?????????? ???? ?????????? ???????ù??ù\n"\
    "{FFFF00}12. {FFFFFF} ??????????? ???? ?????????? ???????ù??ù\n"\
    "{FFFF00}13. {FFFFFF} ??????????? ???? ?????????? ???????ù??ù", 
    mp[MP_NAME],
    mp[MP_PRIZE],
    mp[MP_POS_X] ? ("???????") : ("???????") // ????????? ???????? ??? ???ù???
); // <-- ????????? ????? ? ???ù??? ?????

Dialog(playerid, DIALOG_EVENT_MENU, DIALOG_STYLE_LIST,
    "{FFFF00}" SERVER_NAME " {FFFFFF}| ???? ???????ù???",
    fmt_str,
    "???????",
    "???????"
);

		}
	}
	return 1;
}

CMD:gevent(playerid, params[])
{
	if(!mp[MP_CREATE]) return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????? ???? ???????? ???????ù???");

	if(!mp[MP_POS_X]) return SendClientMessage(playerid, 0xCECECEFF, "?????????? ???????ù??ù ?? ??????????");

	SetPlayerPos(playerid, mp[MP_POS_X], mp[MP_POS_Y], mp[MP_POS_Z]);

	SendClientMessage(playerid, -1, "?? ???? ??????????????? ?? ???????ù???");

	SetPlayerData(playerid, P_LAST_MP, 1);

	return 1;
}

CMD:namelist(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) >= 4)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "?????????: /namelist [id ??????]");

		extract params -> new to_player;

		if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
			return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

		if(!GetPVarInt(to_player, "change_name_status"))
			return SendClientMessage(playerid, 0xCECECEFF, "????? ?? ??????? ?????? ?? ????? ????");

		new player_name[20 + 1];
		GetPVarString(to_player, "change_name", player_name, sizeof(player_name));

		if(ChangePlayerName(to_player, player_name, true))
		{
			Dialog
			(
				to_player, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
				"{FFCD00}??ù ????????",
				"{66FF00}??ù??? ?? ????????? ????? ????????, ????? ??ù ???????????.\n\n"\
				"{FFFFFF}? ????????? ??? ??? ????? ? ???? ??????????? ???? ????? ??ù. ??ù\n"\
				"????? ????? ???????? ??? ? ???? ??????? CRMP. ??????????? ??ù??\n"\
				"?????? ???????? ???? ? ??????? ???.",
				"??", ""
			);
		}
		else SendClientMessage(playerid, 0xFF6600FF, "??? ????? ???? ????????? ??????");

		new fmt_text[75];

		format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????? ??ù??? ?? ????? ????????", GetPlayerNameEx(playerid), playerid);
		SendMessageToAdmins(fmt_text, 0x999999FF);

		DeletePVar(to_player, "change_name");
		DeletePVar(to_player, "change_name_status");

		format(fmt_text, sizeof fmt_text, "??????? ??ù??? ????? ???????? ??ù %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
		SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);
	}

	return 1;
}

CMD:cc(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 4) return 1;

	for(new i = 0; i < 20; i++)
	{
		SendClientMessageToAll(-1, "");
	}
	SendClientMessageToAll(0xDC143CFF, "??? ??? ?????? ??????????????");

	new fmt_text[65];
	format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] ??????? ???", GetPlayerNameEx(playerid), playerid);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, "??????? ???");

	return 1;
}

CMD:leave(playerid, params[])
{
	if(GetPlayerData(playerid, P_IMPROVEMENTS) < 2) return SendClientMessage(playerid, 0x999999FF, "??????????? ????????? \"?????????????\", ????? ????????ù ?? ???????????? ???????");

	if(!GetPlayerTeamEx(playerid)) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "?? ?? ???????? ? ???????????! ");

	new fmt_text[999];

	format
	(
		fmt_text, sizeof fmt_text,
		""SC"???? ??????????ù{ffff00}: \"%s\".\n\n"\
		"{ffffff}?? ????????????? ?????? ???????? ?????? ??????????? ??\n"\
		"{ffffff}???????????? ????????",
		GetTeamName(GetPlayerTeamEx(playerid))
	);

	Dialog(playerid, DIALOG_TEAM_LEAVE, DIALOG_STYLE_MSGBOX, "{FF6347}"SERVER_NAME" {ffffff}| ?????????????", fmt_text, "?????", "??????");

	return 1;
}

CMD:awarn(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 5) return 1;
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /awarn [id ??????] [??????? (????ù????????)]");

	extract params -> new to_player, string:reason[66];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!GetPlayerAdminEx(to_player))
	    return SendClientMessage(playerid, 0xCECECEFF, "????? ?? ù??ù???ù ???????????????");

	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	AddPlayerData(to_player, P_ADMIN_WARN, +, 1);

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[A] %s ????? ?????????????? ?????????????? %s [%d|3]. ???????: %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player), GetPlayerData(to_player, P_ADMIN_WARN), reason);

	SendMessageToAdmins(fmt_msg, 0xFF5533FF);

	new uid = GetPlayerAccountID(to_player);
	new warns = GetPlayerData(to_player, P_ADMIN_WARN);

	format(fmt_msg, sizeof fmt_msg, "????? ????? %s[acc:%d] (%d/3). ???????: %d", GetPlayerNameEx(to_player), uid, warns, reason);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	if(warns >= 3)
	{
		SendClientMessage(to_player, 0xFF5533FF, "??? ????????????????? ??????? ???????????");

		warns = 0;

		SetPlayerData(to_player, P_ADMIN, 0);
		UpdatePlayerDatabaseInt(to_player, "admin", 0);
	}
	else SendClientMessage(to_player, 0xFF5533FF, "??? ????????? 3-?? ?????????????? ?? ?????? ??ù?? ? ????? ??????????????");

	format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET admin_warn=%d WHERE id=%d", warns, uid);
	mysql_query(mysql, fmt_msg, false);

	return 1;
}
CMD:unawarn(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 5) return 1;
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /unawarn [id ??????] [???????]");

	extract params -> new to_player, string: reason[66];
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

    if(!GetPlayerAdminEx(to_player))
	    return SendClientMessage(playerid, 0xCECECEFF, "????? ?? ù??ù???ù ???????????????");

	SetPlayerData(to_player, P_ADMIN_WARN, 				0);

	UpdatePlayerDatabaseInt(to_player, "admin_warn", 	0);

	
	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[A] %s ??ù? ??? ?????????????ù ? ?????????????? %s. ???????: %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player),reason);

	SendMessageToAdmins(fmt_msg, 0xFF5533FF);

	format(fmt_msg, sizeof fmt_msg, "??ù? ??? ?????? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

CMD:setleader(playerid, params[])
{
 if(GetPlayerAdminEx(playerid) < 3 )
 return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
 
 if(sscanf(params, "u", params[0]))
 return SendClientMessage(playerid, 0xFFFFFFFF, ""SC"??????????? /setleader [ID ??????]");
 
 if(!IsPlayerConnected(params[0]))
 return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
 
 new P_TARGET_PLAYER_ID;
 
 g_player[playerid][P_TARGET_PLAYER_ID] = params[0];
 
 Dialog
 (
	playerid, 19464, DIALOG_STYLE_LIST,
	"{ffff00}???? ?????????",
    "{F0E68C}| ????????????? {008000}??????\n\
	{4169E1}| ??? {008000}??????\n\
	{4169E1}| ????? ??????? ?1 (????) {008000}??????\n\
	{4169E1}| ????? ??????? ?2 (?????) {008000}??????\n\
	{8B4513}| ????ù {008000}??????\n\
	{FA8072}| ???????? {008000}??????\n\
	{FF4500}| ??? {008000}??????\n\
	{00BFFF}| ???? {008000}??????\n\
	{32CD32}| ??????????ù ??? {008000}??????\n\
	{7B68EE}| ??????????ù ??? {008000}??????\n\
	{FFD700}| ???????????ù ??? {008000}??????\n\
	{FFFFFF}| ??ù?? ? ?????",
	"???????",
	"?????"
 );
 return 1;
}

CMD:templeader(playerid)
{
  if(GetPlayerAdminEx(playerid) < 3)
 return SendClientMessage(playerid, 0xFFFFFFFF, "{FF0000}| {FFFFFF}???????? ?????? ??????????????? 3-??? ?????ù.");

 Dialog
 (
	playerid, DLG_TEMP_LEADER, DIALOG_STYLE_LIST,
	"{FFFF00}| {FFFFFF}???? ??????",
    "{F0E68C}| ????????????? {008000}??????\n\
	{4169E1}| ??? {008000}??????\n\
	{4169E1}| ????? ??????? ?1 (????) {008000}??????\n\
	{4169E1}| ????? ??????? ?2 (?????) {008000}??????\n\
	{8B4513}| ????ù {008000}??????\n\
	{FA8072}| ???????? {008000}??????\n\
	{FF4500}| ??? {008000}??????\n\
	{00BFFF}| ???? {008000}??????\n\
	{32CD32}| ??????????ù ??? {008000}??????\n\
	{7B68EE}| ??????????ù ??? {008000}??????\n\
	{FFD700}| ???????????ù ??? {008000}??????\n\
	{FFFFFF}| ??ù?? ? ?????",
	"???????",
	"?????"
 );
 return 1;
}

CMD:re(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 1) return 1;

    extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /re [id ??????]");

    if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
        return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");

    if(GetPlayerSecretEx(to_player) >= 1)
        return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ???? ?????????ù ??????????");
        
    if(playerid == to_player)
        return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

    if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
        return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

    if(GetPlayerSpectateData(playerid, S_PLAYER) == -1)
    {
        new Float: x, Float: y, Float: z, Float: a;

        GetPlayerPos(playerid, x, y, z);
        GetPlayerFacingAngle(playerid, a);

        SetPlayerSpectateData(playerid, S_START_POS_X, x);
        SetPlayerSpectateData(playerid, S_START_POS_Y, y);
        SetPlayerSpectateData(playerid, S_START_POS_Z, z);
        SetPlayerSpectateData(playerid, S_START_ANGLE, a);

        SetPlayerSpectateData(playerid, S_START_INTERIOR, GetPlayerInterior(playerid));
        SetPlayerSpectateData(playerid, S_START_VIRTUAL_WORLD, GetPlayerVirtualWorld(playerid));
    }

    StartSpectate(playerid, to_player);
    ShowSpectateGUI(playerid, to_player);

    new fmt_text[999];
    format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ?? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
    SendMessageToAdmins(fmt_text, 0x999999FF);
    
    SendClientMessage(playerid, 0x999999FF, "[A] ??????????? ??????? \"/reoff\", ????? ?????????? ?????? ?? ???????.");

    format(fmt_text, sizeof fmt_text, "?????? ?? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
    SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

    return 1;
}
alias:re("sp")

CMD:reoff(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 1) return 1;

    if(GetPlayerSpectateData(playerid, S_PLAYER) != -1)
    {
        new Node:closeJson = JSON_Object();
        JSON_SetInt(closeJson, "t", -1); // ??? ?????? ???? ???????ù
        JSON_SetBool(closeJson, "isInterfaceVisible", false);
        
        ShowPlayerGUI(playerid, 66, closeJson);
        JSON_Cleanup(closeJson);
        
        StopSpectate(playerid);
    }

    return 1;
}

CMD:weap(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 2) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /weap [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	new fmt_text[625],
		text[45];

	format
	(
		fmt_text,
		sizeof fmt_text,
		"\
		????\t??????\t\t???????\n{FFFFFF}\
		"
	);

	for(new i = 0; i < 13; i++)
	{
		new weapon_id, weapon_ammo;

		GetPlayerWeaponData(to_player, i, weapon_id, weapon_ammo);

		format(text, sizeof text, "\n%d\t%s%s%d", i+1, GetWeaponName(weapon_id), weapon_dialog_tabulation[weapon_id], weapon_ammo);
		strcat(fmt_text, text);
	}

	Dialog
	(
		playerid,
		INVALID_DIALOG_ID,
		DIALOG_STYLE_LIST,
		"{FFCC00}?????ù ? ??????",
		fmt_text,
		"???????",
		""
	);

	format(fmt_text, sizeof fmt_text, "??????? ?????? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:stats(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 1) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /stats [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	ShowPlayerStatsAdmin(to_player, playerid);

	new fmt_text[55];

	format(fmt_text, sizeof fmt_text, "??????? ?????????? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:adonate(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) >= 1)
    {
		ShowPlayerAdminDonate(playerid);
	}
	return 1;
}

CMD:a(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) >= 1)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /a [?????]");

		new fmt_str[128];

		format(fmt_str, sizeof fmt_str, "[%s] %s[%d]: %s", GetPlayerData(playerid, P_PREFIX), GetPlayerNameEx(playerid), playerid, params);
		SendMessageToAdmins(fmt_str, 0x00CCFFFF);

		SendLog(playerid, LOG_TYPE_ADMIN_CHAT, params);
	}

	return 1;
}

CMD:adminsoooooooooooold(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) == 0)
	{
		if(GetPlayerPremium(playerid) == 0)
		    return  SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? VIP ????????.");
	}

	new fmt_text[90],
		count;
	if(GetPlayerAdminEx(playerid) < 1) return 1;
	SendClientMessage(playerid, 0x66CC33FF, "?????????????? ? ????:");
	for(new i; i < MAX_PLAYERS; i ++)
	{
		new admin_lvl = GetPlayerAdminEx(i);

		if(!IsPlayerConnected(i)) continue;
		else if(!IsPlayerLogged(i)) continue;
		else if(!(1 <= admin_lvl <= 13)) continue;

		format(fmt_text, sizeof fmt_text, "%s[%d] (%d lvl)", GetPlayerNameEx(i), i, admin_lvl);

		if(IsPlayerAFK(i))
			format(fmt_text, sizeof fmt_text, "%s {FF0000}AFK [%02d:%02d]", fmt_text, (floatround(GetPlayerData(i, P_AFK_TIME) / 60) % 60), GetPlayerData(i, P_AFK_TIME) % 60);

		else if(GetPlayerSpectateData(i, S_PLAYER) != -1)
			format(fmt_text, sizeof fmt_text, "%s {32a44b}/sp > %d", fmt_text, GetPlayerSpectateData(i, S_PLAYER));

		SendClientMessage(playerid, 0xFFFF00FF, fmt_text);
		count++;
	}
	if(!count) SendClientMessage(playerid, 0xffff00FF, "??? ??????????????? ? ????");

	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, "??????? ?????? ?????????????");

	return 1;
}

CMD:admins(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) == 0 && GetPlayerPremium(playerid) == 0)
        return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? VIP ????????.");

    new fmt_text[150], list[1600] = "???????\t?????????\t?????????ù\n";
    new adminIDs[MAX_PLAYERS], adminCount = 0;

    foreach(new i : Player)
    {
        if(!IsPlayerConnected(i) || !IsPlayerLogged(i)) continue;
        if(GetPlayerAdminEx(i) > 0)
            adminIDs[adminCount++] = i;
    }

    for (new x = 0; x < adminCount - 1; x++)
    {
        for (new y = x + 1; y < adminCount; y++)
        {
            if (GetPlayerAdminEx(adminIDs[x]) < GetPlayerAdminEx(adminIDs[y]))
            {
                new temp = adminIDs[x];
                adminIDs[x] = adminIDs[y];
                adminIDs[y] = temp;
            }
        }
    }

    for (new i = 0; i < adminCount; i++)
    {
        new id = adminIDs[i];
        new prefix[64];
        format(prefix, sizeof prefix, "%s", GetPlayerData(id, P_PREFIX));

        format(fmt_text, sizeof fmt_text, "%s[%d]\t%s (%d)\t{66CC33}? ????\n",
            GetPlayerNameEx(id), id, prefix, GetPlayerAdminEx(id));

        strcat(list, fmt_text);
    }

    Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_TABLIST_HEADERS, "{EB4C42}????????????ù ? ????", list, "???????", "");
    return 1;
}

CMD:members(playerid, params[])
{
    new org_id = GetPlayerTeamEx(playerid);
    if (org_id == 0)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?? ???????? ? ???????????.");

    new fmt_text[160],
        list[sizeof fmt_text * 10 + 100] = "???????\t?????????\t????????\tù??????\n";

    new added[MAX_PLAYERS];

    foreach (new i : Player)
    {
        if (!IsPlayerConnected(i)) continue;
        if (!IsPlayerLogged(i)) continue;
        if (GetPlayerTeamEx(i) != org_id && P_MASCIR[i] != org_id) continue;
        if (added[i]) continue;

        added[i] = true;

        new owarn = 0;
        new rank_name[32];

        if (P_MASCIR[i] == org_id)
        {
            format(rank_name, sizeof rank_name, "%s", GetRankName(org_id, 5));
        }
        else
        {
            format(rank_name, sizeof rank_name, "%s", GetPlayerJobAndRankName(i));
            owarn = GetPlayerData(i, P_OWARN);
        }

        new phone = GetPlayerPhone(i);

        format(fmt_text, sizeof fmt_text,
            "%s[%d]\t%s\t%d/3\t%d\n",
            GetPlayerNameEx(i), i,
            rank_name,
            owarn,
            phone
        );

        strcat(list, fmt_text);
    }

    if (strlen(list) <= strlen("???????\t?????????\t????????\tù??????\n"))
        return SendClientMessage(playerid, COLOR_GREY, "??????????? ??? ? ????!");

    new header[64];
    format(header, sizeof(header), "{%06x}%s{FFFFFF} | ?????? ??????",
        g_organization[org_id][O_COLOR] & 0xFFFFFF,
        g_organization[org_id][O_NAME]
    );

    Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_TABLIST_HEADERS, header, list, "???????", "");
    return 1;
}

CMD:cmembers(playerid, params[])
{
    if (P_MASCIR[playerid] == 0)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?? ?????????? ??? ???????????.");

    new org_id = P_MASCIR[playerid];

    new fmt_text[160],
        list[sizeof fmt_text * 10 + 100] = "???????\t?????????\t????????\tù??????\n";

    new added[MAX_PLAYERS];

    foreach (new i : Player)
    {
        if (!IsPlayerConnected(i)) continue;
        if (!IsPlayerLogged(i)) continue;
        if (GetPlayerTeamEx(i) != org_id) continue;
        if (added[i]) continue;

        added[i] = true;

        new rank_name[32];
        format(rank_name, sizeof rank_name, "%s", GetPlayerJobAndRankName(i));

        new owarn = GetPlayerData(i, P_OWARN);
        new phone = GetPlayerPhone(i);

        format(fmt_text, sizeof fmt_text,
            "%s[%d]\t%s\t%d/3\t%d\n",
            GetPlayerNameEx(i), i,
            rank_name,
            owarn,
            phone
        );

        strcat(list, fmt_text);
    }

    if (strlen(list) <= strlen("???????\t?????????\t????????\tù??????\n"))
        return SendClientMessage(playerid, COLOR_GREY, "??????????? ??? ? ????!");

    new header[64];
    format(header, sizeof(header), "{%06x}%s{FFFFFF} | ?????? ??????",
        g_organization[org_id][O_COLOR] & 0xFFFFFF,
        g_organization[org_id][O_NAME]
    );

    Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_TABLIST_HEADERS, header, list, "???????", "");
    return 1;
}

CMD:leaders(playerid, params[])
{
    new fmt_text[128],
        list[sizeof fmt_text * 20 + 100] = "{FFFFFF}??????????ù\t?????????\t??ù\tù??????\n";

    foreach(new i : Player)
    {
        if(!IsPlayerConnected(i)) continue;
        if(!IsPlayerLogged(i)) continue;
        if(!GetPlayerTeamEx(i)) continue;

        new job = GetPlayerJob(i);
        if(job != 9 && job != 10) continue;

        format(fmt_text, sizeof fmt_text,
            "{FFFFFF}%s\t{FFFFFF}%s\t{FFFFFF}%s[%d]\t{FFFFFF}%d\n",
            GetTeamName(GetPlayerTeamEx(i)),
            GetPlayerJobAndRankName(i),
            GetPlayerNameEx(i), i,
            GetPlayerPhone(i)
        );

        strcat(list, fmt_text);
    }

    Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_TABLIST_HEADERS, "{FFCD00}?????? ??????", list, "???????", "");

    return 1;
}

CMD:admlist(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	new query[115],
		Cache: result,
		rows,
		admin,
		day_prev,
		day_last,
		name[21],
		last_login,
		last_date[6],
		list[sizeof query * 25 + 60] = "??ù\t\t\t????\t? ???? ?????\t? ???? ??????ù\t??????\t????????? ????\n{FFFFFF}";

	mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE admin > 0 ORDER BY last_login ASC");
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	for(new i; i < rows; i ++)
	{
		new day_time[4];

		admin = cache_get_field_content_int(i, "admin");
		day_prev = cache_get_field_content_int(i, "game_for_day_prev");
		day_last = cache_get_field_content_int(i, "game_for_day");

		day_time[0] = ConvertUnixTime(day_prev, CONVERT_TIME_TO_HOURS);
		day_time[1] = ConvertUnixTime(day_prev, CONVERT_TIME_TO_MINUTES);

		day_time[2] = ConvertUnixTime(day_last, CONVERT_TIME_TO_HOURS);
		day_time[3] = ConvertUnixTime(day_last, CONVERT_TIME_TO_MINUTES);

		last_login = cache_get_field_content_int(i, "last_login");
		timestamp_to_date(last_login, last_date[2], last_date[1], last_date[0], last_date[3], last_date[4], last_date[5]);


		cache_get_field_content(i, "name", name);

		new fix_tabulation[21] = "                    ";

		format
		(
			query, sizeof query,
			"\n{FFFFFF}%s%s\t%d ??.\t%s%d ? %d ???\t%s%d ? %d ???\t\t%s\t%02d.%02d.%d ? %02d:%02d:%02d\n",
			name,
			fix_tabulation[strlen(name)],
			admin,
			day_time[0] >= 3 ? day_time[0] > 3 ? "{66CC33}" : "{FFCD00}" : "{FF5533}",
			day_time[0],
			day_time[1],
			day_time[2] >= 3 ? day_time[0] > 3 ? "{66CC33}" : "{FFCD00}" : "{FF5533}",
			day_time[2],
			day_time[3],
			IsPlayerConnected(GetPlayerID(name)) ? "{66CC33}Online" : "{FF5533}Offline",
			last_date[0], last_date[1], last_date[2],
			last_date[3], last_date[4], last_date[5]
		);

		strcat(list, query);
	}

	cache_delete(result);

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FFCD00}?????? ?????????????", list, "???????", "");

	return 1;
}



CMD:get(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 2 ) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /get [??ù ??????]");

	if(!(3 <= strlen(params) <= 20))
		return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");

	extract params -> new string: name[21];

	new query[100];
	new Cache: result, user_id;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE name='%e' LIMIT 1", name);
	result = mysql_query(mysql, query);

	if(cache_num_rows())
		user_id = cache_get_field_content_int(0, "id");

	if(!cache_num_rows() || !user_id)
		return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????"), cache_delete(result);

	new reg_ip[16],
		last_ip[16],
		reg_date[6],
		reg_time = cache_get_field_content_int(0, "reg_time"),
		game_for_day = cache_get_field_content_int(0, "game_for_day"),
		game_for_day_prev = cache_get_field_content_int(0, "game_for_day_prev"),
		car_slots = cache_get_field_content_int(0, "car_slots");

	cache_get_field_content(0, "reg_ip", reg_ip);
	cache_get_field_content(0, "last_ip", last_ip);

	timestamp_to_date(reg_time, reg_date[2], reg_date[1], reg_date[0], reg_date[3], reg_date[4], reg_date[5]);

	new fmt_text[512];

	format
	(
		fmt_text, sizeof fmt_text,
		"\
		????? ????????:\t\t%d\n\
		????????:\t\t\t%d\n\
		???. ???? ????:\t\t%d\n\
		???????:\t\t\t%d\n\
		IP ????? (???????.):\t\t%s\n\
		IP ????? (??????.):\t\t%s\n\
		???? ? ????ù ???????????:\t\%02d.%02d.%d ? %02d:%02d:%02d\n\
		?????:\t\t\t\t%d (?????: %d)\n\
		? ???? ??????ù:\t\t%d ? %d ???\n\
		? ???? ?????:\t\t\t%d ? %d ???\n\n\
		????? ??ù ??????????:\t%d\n\
		",
		user_id,
		cache_get_field_content_int(0, "money"),
		cache_get_field_content_int(0, "bank"),
		cache_get_field_content_int(0, "level"),
		reg_ip,
		last_ip,
		reg_date[0], reg_date[1], reg_date[2],
		reg_date[3], reg_date[4], reg_date[5],
		cache_get_field_content_int(0, "donate_current"),
		cache_get_field_content_int(0, "donate_total"),
		ConvertUnixTime(game_for_day, CONVERT_TIME_TO_HOURS),
		ConvertUnixTime(game_for_day, CONVERT_TIME_TO_MINUTES),
		ConvertUnixTime(game_for_day_prev, CONVERT_TIME_TO_HOURS),
		ConvertUnixTime(game_for_day_prev, CONVERT_TIME_TO_MINUTES),
		car_slots
	);

	cache_delete(result);

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ownable_cars WHERE owner_id=%d", user_id);
	result = mysql_query(mysql, query, true);

	if(cache_num_rows())
	{
		for(new idx; idx < cache_num_rows(); idx ++)
		{
			new id = cache_get_field_content_int(idx, "id"),
				modelid = cache_get_field_content_int(idx, "model_id"),
				Float: x = cache_get_field_content_float(idx, "pos_x"),
				Float: y = cache_get_field_content_float(idx, "pos_y"),
				Float: z = cache_get_field_content_float(idx, "pos_z"),
				Float: health = cache_get_field_content_float(idx, "health"),
				number[7];

			cache_get_field_content(idx, "number", number);

			format(query, sizeof query, "\n%s [%d] - %s (%.1f, %.1f, %.1f) HP: %.1f", GetVehicleInfo(modelid - 400, VI_NAME), id, number, x, y, z, health);
			strcat(fmt_text, query);
		}
	}

	cache_delete(result);

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, name, fmt_text, "???????", "");

	format(fmt_text, sizeof fmt_text, "??????? ?????????? ?? ???????? %s[acc:%d]", name, user_id);
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}

CMD:money(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 3) return 1;

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /money [??ù ??????]");

	if(!(3 <= strlen(params) <= 20))
		return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");

	extract params -> new string: name[21];

	new query[90];
	new Cache: result, user_id;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE name='%e' LIMIT 1", name);
	result = mysql_query(mysql, query);

	if(cache_num_rows())
		user_id = cache_get_field_content_int(0, "id");

	if(!cache_num_rows() || !user_id)
		return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????"), cache_delete(result);

	new player_cash = cache_get_field_content_int(0, "money"),
		player_bank = cache_get_field_content_int(0, "bank"),
		player_wage = cache_get_field_content_int(0, "wage"),
		player_business = cache_get_field_content_int(0, "business"),
		player_fuel_st = cache_get_field_content_int(0, "fuel_st"),
		bank_accounts_money,
		fmt_text[310];

	cache_delete(result);

	mysql_format(mysql, query, sizeof query, "SELECT * FROM bank_accounts WHERE uid='%d'", user_id);
	result = mysql_query(mysql, query);

	if(cache_num_rows())
	{
		for(new i = 0; i < cache_num_rows(); i++)
			bank_accounts_money += cache_get_field_content_int(i, "balance");
	}

	cache_delete(result);

	format
	(
		fmt_text, sizeof fmt_text,
		"\
		???????? ??????:\t\t\t%d ???\n\
		???.?????????? ????:\t\t\t%d ???\n\
		????????? ?/? ????:\t\t\t%d ???\n\n\
		?? ???? ???. ????. ??????:\t\t%d ???\n\n\
		",
		player_cash, player_bank, player_wage, bank_accounts_money
	);

	if(player_business != -1)
	{
		mysql_format(mysql, query, sizeof query, "SELECT balance FROM business WHERE owner_id='%d' LIMIT 1", user_id);
		result = mysql_query(mysql, query);

		format(query, sizeof query, "?? ????? ???????:\t\t\t%d ???\n", cache_get_row_int(0, 0));
		strcat(fmt_text, query);

		cache_delete(result);
	}
	else strcat(fmt_text, "??? ???????\n");
	cache_delete(result);
	if(player_fuel_st != -1)
	{
		mysql_format(mysql, query, sizeof query, "SELECT balance FROM fuel_stations WHERE owner_id='%d' LIMIT 1", user_id);
		result = mysql_query(mysql, query);

		format(query, sizeof query, "?? ????? ???:\t\t\t\t%d ???", cache_get_row_int(0, 0));
		strcat(fmt_text, query);

		cache_delete(result);
	}
	else strcat(fmt_text, "??? ???");

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, name, fmt_text, "???????", "");

	format(fmt_text, sizeof fmt_text, "??????? ?????????? ? ??????? %s[acc:%d]", params, user_id);
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}

CMD:getlog(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	if(!strlen(params))
	{
		SendClientMessage(playerid, 0xCECECEFF, "???????????: /getlog [??ù ??????] [????????????? ????] [???-?? ????]");
		SendClientMessage(playerid, 0xCECECEFF, "??????????????:");
		SendClientMessage(playerid, 0xCECECEFF, "1 - ????????????????? ???");
		SendClientMessage(playerid, 0xCECECEFF, "2 - ?????? ?? ???????");
		SendClientMessage(playerid, 0xCECECEFF, "3 - ????????????????? ???????ù");
		SendClientMessage(playerid, 0xCECECEFF, "4 - ?????? ????????????????? ????");
		SendClientMessage(playerid, 0xCECECEFF, "5 - ?????? ????????? ????");
		SendClientMessage(playerid, 0xCECECEFF, "6 - ??? ????????ù");
		SendClientMessage(playerid, 0xCECECEFF, "7 - ????????ù ? ????? ???");
		SendClientMessage(playerid, 0xCECECEFF, "8 - ???????/?????? ? ??????");
		SendClientMessage(playerid, 0xCECECEFF, "9 - ???????ù ?? ????? ??????/??????????ù");
		SendClientMessage(playerid, 0xCECECEFF, "10 - ???????ù ???????? ??????????????");

		return 1;
	}

	extract params -> new string:name[21], log_id, time_limit;

	if(!(LOG_TYPE_ADMIN_CHAT <= log_id <= LOG_TYPE_SUPERADMIN_ACTION))
		return SendClientMessage(playerid, 0x999999FF, "???????? ?????????????");

	if(!(0 <= time_limit <= 30))
		return SendClientMessage(playerid, 0x999999FF, "?????????? ???? ?? 1 ?? 30. ??????????? 0 ??ù ??????????ù ???? ????????");

	if(!(3 <= strlen(name) <= 20))
		return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");

	new query[144];
	new Cache: result,
		rows,
		user_id,
		admin;

	mysql_format(mysql, query, sizeof query, "SELECT id, admin FROM accounts WHERE name='%e' LIMIT 1", name);
	result = mysql_query(mysql, query);

	rows = cache_num_rows();

	if(rows)
	{
		user_id = cache_get_row_int(0, 0);
		admin = cache_get_row_int(0, 1);
	}

	cache_delete(result);

	if(rows && user_id)
	{
		if(GetPlayerAdminEx(playerid) >= admin)
		{
			mysql_format(mysql, query, sizeof query, "SELECT * FROM action_log WHERE acc_id=%d AND type=%d", user_id, log_id);

			new fmt_text[35];

			if(time_limit)
			{
				format(fmt_text, sizeof fmt_text, " AND time >= %d", gettime() - (time_limit * 86400));
				strcat(query, fmt_text);
			}

			result = mysql_query(mysql, query, true);

			rows = cache_num_rows();

			if(rows)
			{
				new log_name[10][37] =
				{
					"????????????????? ???",
					"?????? ?? ???????",
					"????????????????? ???????ù",
					"?????? ????????????????? ????",
					"?????? ????????? ????",
					"??? ????????ù",
					"????????ù ? ????? ???",
					"???????/?????? ? ??????",
					"???????ù ?? ????? ??????/??????????ù",
					"???????ù ???????? ??????????????"
				};

				format(query, sizeof query, "????????? ?????? ?? ????????? \"%s\" ??ù ?????? %s", log_name[log_id - 1], name);

				if(time_limit)
				{
					format(fmt_text, sizeof fmt_text, " ?? ????????? %d ??.", time_limit);
					strcat(query, fmt_text);
				}

				SendClientMessage(playerid, 0x66CC33FF, query);

				for(new idx; idx < rows; idx ++)
				{
					new desc[144],
						time[6],
						uip[17];

					cache_get_field_content(idx, "description", desc);
					cache_get_field_content(idx, "uip", uip);

					timestamp_to_date(cache_get_field_content_int(idx, "time"), time[2], time[1], time[0], time[3], time[4], time[5]);

					format
					(
						query, sizeof query,
						"#%d | %02d.%02d.%d ? %02d:%02d:%02d | %s | %s",
						cache_get_field_content_int(idx, "id"),
						time[0], time[1], time[2], time[3], time[4], time[5],
						uip, desc
					);

					SendClientMessage(playerid, 0xFFCD00FF, query);
				}

				format(query, sizeof query, "????? ?????????? ???????: %d", rows);
				SendClientMessage(playerid, 0x66CC33FF, query);
			}
			else SendClientMessage(playerid, 0x999999FF, "?????? ? ???? ?????? ?? ?????? ?????????? ?? ???????");

			cache_delete(result);
		}
		else SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ????????????? ???? ?????????????? ???? ??? ??????");
	}
	else SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");

	return 1;
}

CMD:lip(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /lip [IP ?????]");

	new query[130],
		fmt_text[2300],
		Cache: result,
		rows;

	mysql_format(mysql, query, sizeof query, "SELECT name, reg_ip FROM accounts WHERE reg_ip = '%s' OR last_ip = '%s'", params, params);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	if(rows)
	{
		new l_acc_count;

		format(fmt_text, sizeof fmt_text, "IP: %s\n", params);

		for(new idx; idx < rows; idx ++)
		{
			new name[21],
				ip[17];

			cache_get_row(idx, 0, name);
			cache_get_row(idx, 1, ip);

			new bool: is_reg = false;

			if(!strcmp(ip, params, true))
				is_reg = true;

			else
				l_acc_count ++;

			format
			(
				query, sizeof query,
				"\n{FFFFFF}%d. %s - %s %s",
				idx + 1,
				name,
				is_reg ? "Reg" : "Last",
				IsPlayerConnected(GetPlayerID(name)) ? "{66CC33}[online]" : "{888888}[offline]"
			);

			strcat(fmt_text, query);
		}

		format(query, sizeof query, "{FF9900}??????? ?????????: %d / %d", l_acc_count, rows);

		Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, query, fmt_text, "???????", "");
	}
	else SendClientMessage(playerid, 0x999999FF, "?????? IP ????? ?? ?????? ? ???? ??????");

	cache_delete(result);

	return 1;
}

CMD:kick(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;
	

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /kick [id ??????] [??????? (????ù????????)]");

	extract params -> new to_player;

	if(!IsPlayerConnected(to_player)) return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
	
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	new reason[31];
	sscanf(params, "{d}s[30]", reason);

	if(AntiSliv(playerid, "/kick")) return true;
	
	AddAdminStat(playerid, "kicks_total", P_KICKS_TOTAL);
	AddAdminStat(playerid, "kicks_today", P_KICKS_TODAY);

	new fmt_msg[200];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ?????? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));

	if(strlen(reason) > 0)
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);

	SendClientMessageToAll(0xFF5533FF, fmt_msg);
	
	SendClientMessage(to_player, 0xCECECEFF, fmt_msg, sizeof fmt_msg, "{CC6600}??? ????????? ?? ??????? ?????? ?????");
	Kick:(playerid);
		
	format(fmt_msg, sizeof fmt_msg, "?????? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	Kick:(playerid, "?????? ??????? ??????????.", 3000);

	return 1;
}


CMD:skick(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 2) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /skick [id ??????]");

	if(!IsPlayerConnected(to_player)) return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
	
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	new fmt_msg[128];

	AddAdminStat(playerid, "kicks_total", P_KICKS_TOTAL);
	AddAdminStat(playerid, "kicks_today", P_KICKS_TODAY);

	if(GetPlayerAdminEx(playerid) < 2)
	{
		format(fmt_msg, sizeof fmt_msg, "[A] ????????????? %s[%d] ?????? %s[%d] ??? ??????? ????", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
		SendMessageToAdmins(fmt_msg, 0x999999FF);
	}

	format(fmt_msg, sizeof fmt_msg, "??? ???? ?????? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	Kick(to_player);
	return 1;
}

CMD:mute(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 1) return 1;
	

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /mute [id ??????] [????ù ? ???????] [??????? (????ù????????)]");

	extract params -> new to_player, mute_time, string: reason[30];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!(1 <= mute_time <= 360)) return SendClientMessage(playerid, 0xCECECEFF, "????ù ?????? ???? ?? ?????? 1 ? ?? ?????? 360 ?????");
	if(GetPlayerData(to_player, P_MUTE) > 0) return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ???? ???");
	
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	if(AntiSliv(playerid, "/mute")) return true;
	
	AddAdminStat(playerid, "mutes_total", P_MUTES_TOTAL);
	AddAdminStat(playerid, "mutes_today", P_MUTES_TODAY);

	new fmt_msg[128];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ????? ?????????? ???? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player), mute_time);

	if(strlen(reason))
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);

	SendClientMessageToAll(0xFF5533FF, fmt_msg);

	SetPlayerData(to_player, P_MUTE, mute_time * 60);
	UpdatePlayerDatabaseInt(to_player, "mute", mute_time * 60);

	SendClientMessage(to_player, 0xCECECEFF, "????ù ?? ????????ù ???? ????: {CCCC00}/time");

	format(fmt_msg, sizeof fmt_msg, "????? %s[acc:%d] ?????????? ???? ?? %d ???. ???????: %s",
	GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), mute_time, reason);

	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

CMD:unmute(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 1) return 1;

	extract params -> new to_player, string: reason[30]; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /unmute [id ??????] [???????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	else if(GetPlayerData(to_player, P_MUTE) <= 0) return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ????");
	//else if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??ù?? ??????? ? ?????? ???ù");

	new fmt_msg[128];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ??ù? ??? ? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));

	if(strlen(reason))
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);

	SendClientMessageToAll(0xFF5533FF, fmt_msg);

	SendClientMessage(to_player, 0x66CC00FF, "?????? ? ??? ????????????");

	format(fmt_msg, sizeof fmt_msg, "????????????? ??? %s[acc:%d]. ???????: %s",
	GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), reason);

	SetPlayerData(to_player, P_MUTE, 0);
	UpdatePlayerDatabaseInt(to_player, "mute", 0);


	format(fmt_msg, sizeof fmt_msg, "??ù? ?????????? ???? ? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

CMD:jail(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;
	

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /jail [id ??????] [????ù ? ???????] [??????? (????ù????????)]");

	extract params -> new to_player, jail_time, string: reason[30];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
		
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	if(!(1 <= jail_time <= 360)) return SendClientMessage(playerid, 0xCECECEFF, "????ù ?????? ???? ?? ?????? 1 ? ?? ?????? 360 ?????");
	if(GetPlayerData(to_player, P_JAIL) > 0) return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ??? ????? ? ??????");
	//else if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ????????? ??????? ?????? ????");

	if(AntiSliv(playerid, "/jail")) return true;
	
	AddAdminStat(playerid, "jails_total", P_JAILS_TOTAL);
	AddAdminStat(playerid, "jails_today", P_JAILS_TODAY);

	new fmt_msg[128];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ??????? ? ?????? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player), jail_time);

	if(strlen(reason))
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);

	SendClientMessageToAll(0xFF5533FF, fmt_msg);

	SendClientMessage(to_player, 0xCECECEFF, "????ù ?? ????????ù ?????????ù: {CCCC00}/time");

	FSinJailPlayer(to_player, jail_time);
	
	SetPlayerData(to_player, P_SUSPECT, 0);
	UpdatePlayerDatabaseInt(to_player, "suspect", 0);

	format(fmt_msg, sizeof fmt_msg, "??????? ? ?????? %s[acc:%d] ?? %d ???. ???????: %s",
	GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), jail_time, reason);

	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

CMD:unjail(playerid, params[])
{
	if (TEST_SERVER == 1)
		return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");

	if (GetPlayerAdminEx(playerid) < 1)
		return 1;

	extract params -> new to_player, string:reason[30]; else
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /unjail [id ??????] [???????]");

	if (!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	new bool:isFsin = GetPlayerData(to_player, P_FJAIL) > 0;
	new bool:isJail = GetPlayerData(to_player, P_JAIL) > 0;

	if (!isFsin && !isJail)
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ????? ? ??????");

	new fmt_msg[128];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ???????? ?? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));
	if (strlen(reason))
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);

	SendClientMessageToAll(0xFF5533FF, fmt_msg);
	SendClientMessage(to_player, 0x66CC00FF, "??? ????????? ? ??????");

	format(fmt_msg, sizeof fmt_msg, "???????? ? ?????? %s[acc:%d]. ???????: %s",
		GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), reason);

	if (isFsin)
		FSinUnjailPlayer(to_player);
	else
		UnjailPlayer(to_player);

	format(fmt_msg, sizeof fmt_msg, "???????? ?? ?????? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

CMD:getcam(playerid, params[])
{
						new
                        Float:fPX, Float:fPY, Float:fPZ,
                        Float:fVX, Float:fVY, Float:fVZ,
                        Float:object_x, Float:object_y, Float:object_z;

		                const
		                Float:fScale = 5.0;

		                GetPlayerCameraPos(playerid, fPX, fPY, fPZ);
		                GetPlayerCameraFrontVector(playerid, fVX, fVY, fVZ);

		                object_x = fPX + floatmul(fVX, fScale);
		                object_y = fPY + floatmul(fVY, fScale);
		                object_z = fPZ + floatmul(fVZ, fScale);

		                format(sctring, sizeof(sctring), "CameraPos: %f,%f,%f | LookAt: %f,%f,%f",fPX,fPY,fPZ,object_x,object_y,object_z);
		                print(sctring);
		                SendClientMessage(playerid, -1, sctring);
						return 1;
}
CMD:ban(playerid, params[])
{
	if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");

	if(GetPlayerAdminEx(playerid) < 7 ) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
	
    
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /ban [id ??????] [???? ? ??ù?] [??????? (????ù????????)]");

	extract params -> new to_player, ban_time, string:reason[30];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
		
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	new max_days = GetPlayerAdminEx(playerid) > 4 ? 365 : 30;

	new fmt_msg[999];

	if(!(1 <= ban_time <= max_days))
	{
		format(fmt_msg, sizeof fmt_msg, ""SC"???? ???? ????? ???? ?? 1 ?? %d ????", max_days);

		return SendClientMessage(playerid, 0xCECECEFF, fmt_msg);
	}

	if(GetPlayerAdminEx(to_player) > GetPlayerAdminEx(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, ""SC"?????ù ???????? ?????????????? ???? ?? ?????");
	//if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, ""SC"?????ù ???????? ?????? ???ù");

	if(AntiSliv(playerid, "/ban")) return true;
	
	AddAdminStat(playerid, "bans_total", P_BANS_TOTAL);
	AddAdminStat(playerid, "bans_today", P_BANS_TODAY);

	format(fmt_msg, sizeof fmt_msg, "????????????? %s ???????????? ?????? %s ?? %d ????", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player), ban_time);

	if(strlen(reason) > 0)
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);

	SendClientMessageToAll(0xFF5533FF, fmt_msg);


	if(!strlen(reason)) reason = "None";

	format(fmt_msg, sizeof fmt_msg, "??????? %s[acc:%d] ?? %d ????. ??????? %s", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), reason);

	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_msg);

	AddBan(GetPlayerAccountID(to_player), gettime(), ban_time, reason, GetPlayerNameEx(playerid));
	return 1;
}

CMD:unban(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 4 ) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new string: player_name[21];

	if(!strlen(player_name)) return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /unban [??? ?????? ???????]");

	new query[80],
		Cache: result,
		rows,
		uid,
		uip[16];

	mysql_format(mysql, query, sizeof query, "SELECT id, last_ip FROM accounts WHERE name='%s'", player_name);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	if(rows)
	{
		uid = cache_get_row_int(0, 0);
		cache_get_row(0, 1, uip);
	}

	cache_delete(result);

	if(!rows || !uid) return SendClientMessage(playerid, 0x999999FF, ""SC"????? ? ????? ?????? ?? ??????");

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ban_list WHERE user_id=%d", uid);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	cache_delete(result);

	if(!rows) return SendClientMessage(playerid, 0x999999FF, ""SC"??????? ?????? ?? ????????????");

	mysql_format(mysql, query, sizeof query, "DELETE FROM ban_list WHERE user_id=%d", uid);
	mysql_query(mysql, query, false);

	format(query, sizeof query, "unbanip %s", uip);
	SendRconCommand(query);

	SendRconCommand("reloadbans");

	format(query, sizeof query, "????????????? %s ????????????? ?????? %s", GetPlayerNameEx(playerid), player_name);
	

	SendClientMessageToAll(0xFF5533FF, query);

	format(query, sizeof query, "???????? %s[acc:%d]", player_name, uid);
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, query);

	return 1;
}

CMD:setskin(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new to_player, skin_id; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /setskin [id ??????] [id ?????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
	if(TEST_SERVER == 1)
	{
	    if(playerid != to_player) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????? ??????? ????? ???????????? ?? ù??ù ??????? ?????? ?? ????????? ? ????!");
	}
	
	if(GetPlayerData(to_player, P_JAIL) > 0 || GetPlayerData(to_player, P_FJAIL) > 0)
{
	SendClientMessage(playerid, COLOR_GREY, "?????ù ??????? ?????? ??????, ?????ù?????ù ??? ???????????.");
	return 1;
}

	if(!(1 <= skin_id <= 20000)) return SendClientMessage(playerid, 0xCECECEFF, ""SC"ID ????? ?? 1 ?? 20000");


	SetPlayerData(to_player, P_SKIN, skin_id);
	UpdatePlayerDatabaseInt(to_player, "skin", skin_id);

	SetPlayerSkinInit(to_player);

	new fmt_text[999];
	
    format(fmt_text, sizeof fmt_text, "{1E90FF}?? ?????? ???? ?%d ?????? %s[%d]", skin_id, GetPlayerNameEx(to_player), to_player);
	SendClientMessage(playerid, -1, fmt_text);
	
	format(fmt_text, sizeof fmt_text, "{1E90FF}??? ??? ????? ???? ?%d ??????????????? %s[%d]", skin_id, GetPlayerNameEx(playerid), playerid);
	SendClientMessage(to_player, -1, fmt_text);	
	
	format(fmt_text, sizeof fmt_text, "{FF5533}[A] %s[%d] ????? %s[%d] ???? ?%d", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, skin_id);
	SendMessageToAdmins(fmt_text, 0xCECECEFF);	

	format(fmt_text, sizeof fmt_text, "????????? %s[acc:%d] ???? %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), skin_id);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}


CMD:offban(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 3 ) return 1;

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /offban [??? ??????] [???-?? ????] [??????? (????ù????????)]");

	extract params -> new string: player_name[21], days, string: reason[30];

	if(!(1 <= days <= 365)) return SendClientMessage(playerid, 0x999999FF, "?????????? ???? ?? 1 ?? 365");

	if(IsPlayerConnected(GetPlayerID(player_name))) return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ????????ù ?? ???????");

	new query[144],
		Cache: result,
		rows,
		uid,
		admin,
		uip[16];

	mysql_format(mysql, query, sizeof query, "SELECT id, admin, last_ip FROM accounts WHERE name='%s'", player_name);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	if(rows)
	{
		uid = cache_get_row_int(0, 0);
		admin = cache_get_row_int(0, 1);
		cache_get_row(0, 2, uip);
	}

	cache_delete(result);

	if(!rows || !uid) return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");

	if(GetPlayerAdminEx(playerid) < admin) return SendClientMessage(playerid, 0x999999FF, "?????ù ???????? ?????????????? ???? ?? ?????");

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ban_list WHERE user_id=%d", uid);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	cache_delete(result);

	if(rows) return SendClientMessage(playerid, 0x999999FF, "??????? ?????? ??? ????????????");
	
	if(GetPlayerAdminEx(playerid) < admin)
    return SendClientMessage(playerid, 0x999999FF, "?????ù ???????? ?????????????? ???? ??? ?? ??????");

	if(AntiSliv(playerid, "/offban")) return true;

	format(query, sizeof query, "????????????? %s ??????? ??????? ?????? %s ?? %d ????", GetPlayerNameEx(playerid), player_name, days);

	if(strlen(reason) > 0)
		format(query, sizeof query, "%s. ???????: %s", query, reason);

	if(!strlen(reason)) reason = "None";

	SendClientMessageToAll(0xFF5533FF, query);

	format(query, sizeof query, "??????? ??????? %s[acc:%d] ?? %d ????. ???????: %s", player_name, uid, days, reason);
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, query);

	format(reason, sizeof reason, "[OFFLINE]%s", reason);
	
	AddAdminStat(playerid, "bans_total", P_BANS_TOTAL);
	AddAdminStat(playerid, "bans_today", P_BANS_TODAY);

	AddBan(uid, gettime(), days, uip, reason, GetPlayerNameEx(playerid));

	return 1;
}

CMD:delacc(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new string:name[21], string:reason[30]; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /delacc [??ù ??????] [???????]");

	new query[128],
		Cache: result,
		admin,
		rows;

	mysql_format(mysql, query, sizeof query, "SELECT admin FROM accounts WHERE name='%s' LIMIT 1", name);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	if(rows)
	{
		admin = cache_get_row_int(0, 0);

		if(admin && GetPlayerAdminEx(playerid) < 5)
		{
			SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ??????? ??????? ?????????????? ???? ??? ??????");

			cache_delete(result);

			format(query, sizeof query, "????????ù ??????? ??????? %s", name);
			SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, query);

			return 1;
		}

		mysql_format(mysql, query, sizeof query, "DELETE FROM accounts WHERE name='%s' LIMIT 1", name);
		mysql_query(mysql, query, false);

		format(query, sizeof query, "????????????? %s ??????? ????????? ?????? %s", GetPlayerNameEx(playerid), name);

		if(strlen(reason) > 0)
		{
			new fmt_text[45];

			format(fmt_text, sizeof fmt_text, ". ???????: %s", reason);
			strcat(query, fmt_text);
		}

		SendClientMessageToAll(0xFF5533FF, query);

		format(query, sizeof query, "?????? ??????? %s. ???????: %s", name, reason);
		SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, query);
	}
	else SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");

	cache_delete(result);

	return 1;
}

CMD:skin(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new to_player, skin_id; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /skin [id ??????] [id ?????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
	if(TEST_SERVER == 1)
	{
	    if(playerid != to_player) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????? ??????? ????? ???????????? ?? ù??ù ??????? ?????? ?? ????????? ? ????!");
	}
	
	if(GetPlayerData(to_player, P_JAIL) > 0 || GetPlayerData(to_player, P_FJAIL) > 0)
{
	SendClientMessage(playerid, COLOR_GREY, "?????ù ??????? ?????? ??????, ?????ù?????ù ??? ???????????.");
	return 1;
}

	if(!(-1 <= skin_id <= 20000) || skin_id == 0) return SendClientMessage(playerid, 0x999999FF, ""SC"ID ????? ?? 1 ?? 20000");

	if(skin_id != -1)
		SetPlayerSkin(to_player, skin_id);
	else
		SetPlayerSkin(to_player, GetPlayerSkinEx(to_player));

	new fmt_text[999];

	format(fmt_text, sizeof fmt_text, "{1E90FF}?? ?????? ?????? %s[%d] ???? %s", GetPlayerNameEx(to_player), to_player, skin_id != -1 ? "?????????" : "???????");
	SendClientMessage(playerid, -1, fmt_text);
	
	format(fmt_text, sizeof fmt_text, "{1E90FF}????????????? %s[%d] ????? ??? %s ????", GetPlayerNameEx(playerid), playerid, skin_id != -1 ? "?????????" : "???????");
	SendClientMessage(to_player, -1, fmt_text);	

	if(skin_id != -1)
		format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????? %s[%d] ????????? ???? ?%d", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, skin_id);
	else
		format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????? %s[%d] ??????? ????", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	format(fmt_text, sizeof fmt_text, "????? %s[acc:%d] ???? %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), skin_id);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:house(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4) return 1;

	extract params -> new house_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /house [????? ????]");

	if(!(0 <= house_id <= g_house_loaded-1)) return SendClientMessage(playerid, 0xCECECEFF, "??????? ???? ?? ?????????? ?? ???????");

	new Float: x,
		Float: y,
		Float: z,
		Float: angle;

	if(GetHouseData(house_id, H_ENTRACE) != -1)
	{
		EnterPlayerToEntrance(playerid, GetHouseData(house_id, H_ENTRACE));

		x = GetHouseData(house_id, H_POS_X);
		y = GetHouseData(house_id, H_POS_Y);
		z = GetHouseData(house_id, H_POS_Z);
	}
	else
	{
		x = GetHouseData(house_id, H_EXIT_POS_X);
		y = GetHouseData(house_id, H_EXIT_POS_Y);
		z = GetHouseData(house_id, H_EXIT_POS_Z);
		angle = GetHouseData(house_id, H_EXIT_ANGLE);
	}
	SetPlayerPosEx(playerid, x, y, z, angle);

	new fmt_text[35];

	format(fmt_text, sizeof fmt_text, "?? ????????????????? ? ???? ?%d", house_id);
	SendClientMessage(playerid, -1, fmt_text);

	format(fmt_text, sizeof fmt_text, " ? ???? %d", house_id);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:biz(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4) return 1;

	extract params -> new biz_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /biz [????? ???????]");

	if(!(0 <= biz_id <= g_business_loaded-1)) return SendClientMessage(playerid, 0xCECECEFF, "??????? ??????? ?? ?????????? ?? ???????");

	SetPlayerPosEx
	(
		playerid,
		GetBusinessData(biz_id, B_EXIT_POS_X),
		GetBusinessData(biz_id, B_EXIT_POS_Y),
		GetBusinessData(biz_id, B_EXIT_POS_Z),
		GetBusinessData(biz_id, B_EXIT_ANGLE)
	);

	new fmt_text[35];

	format(fmt_text, sizeof fmt_text, "?? ????????????????? ? ??????? ?%d", biz_id);
	SendClientMessage(playerid, -1, fmt_text);

	format(fmt_text, sizeof fmt_text, "ù??????????????ù ? ??????? %d", biz_id);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:fuelstation(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4) return 1;

	extract params -> new fs_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /fuelstation [????? ???]");

	if(!(0 <= fs_id <= g_fuel_station_loaded-1)) return SendClientMessage(playerid, 0xCECECEFF, "?????? ??? ?? ?????????? ?? ???????");

	SetPlayerPosEx
	(
		playerid,
		GetFuelStationData(fs_id, FS_POS_X),
		GetFuelStationData(fs_id, FS_POS_Y),
		GetFuelStationData(fs_id, FS_POS_Z),
		0.0
	);

	new fmt_text[35];

	format(fmt_text, sizeof fmt_text, "?? ????????????????? ? ??? ?%d", fs_id);
	SendClientMessage(playerid, -1, fmt_text);

	format(fmt_text, sizeof fmt_text, "ù??????????????ù ? ??? %d", fs_id);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:inter(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 1 ) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new to_player, interior; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /inter [id ??????] [????????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
	if(TEST_SERVER == 1)
	{
	    if(playerid != to_player) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????? ??????? ????? ???????????? ?? ù??ù ??????? ?????? ?? ????????? ? ????!");
	}

	SetPlayerInterior(to_player, interior);

	new fmt_msg[999];
	
	new fmt_text[999];
	
	format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ????????? %s[%d] ???????? %d", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, interior);
	SendMessageToAdmins(fmt_msg, 0x999999FF);
		
    format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ?????????? %s[%d] ???????? %d", GetPlayerNameEx(to_player), to_player, interior);
    SendClientMessage(playerid, 0x66CC00FF, fmt_msg);	

	format(fmt_msg, sizeof fmt_msg, "{1E90FF}????????????? %s[%d] ????????? ??? ???????? %d", GetPlayerNameEx(playerid), playerid, interior);
	SendClientMessage(to_player, 0x66CC00FF, fmt_msg);	

	LinkVehicleToInterior(GetPlayerData(to_player, P_BUY_CAR), interior);

	format(fmt_text, sizeof fmt_text, "????????? %s[acc:%d] ???????? %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), interior);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:world(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4 ) return 1;

	extract params -> new to_player, world; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /world [id ??????] [????.???]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
	if(TEST_SERVER == 1)
	{
	    if(playerid != to_player) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????? ??????? ????? ???????????? ?? ù??ù ??????? ?????? ?? ????????? ? ????!");
	}

	SetPlayerVirtualWorld(to_player, world);

	new fmt_text[110];

	format(fmt_text, sizeof fmt_text, "?? ?????????? %s[%d] ????.??? %d", GetPlayerNameEx(to_player), to_player, world);
	SendClientMessage(playerid, -1, fmt_text);

	format(fmt_text, sizeof fmt_text, "%s[%d] ????????? ??? ????.??? %d", GetPlayerNameEx(playerid), playerid, world);
	SendClientMessage(to_player, -1, fmt_text);

	if(GetPlayerAdminEx(playerid) <= 5)
	{
		format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] ????????? %s[%d] ????.??? ?%d", GetPlayerNameEx(playerid), playerid,
		GetPlayerNameEx(to_player), to_player, world);
		SendMessageToAdmins(fmt_text, 0x999999FF);
	}

	format(fmt_text, sizeof fmt_text, "????????? %s[acc:%d] ????.??? %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), world);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:warn(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 7) return 1;
	
    
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /warn [id ??????] [??????? (????ù????????)]");

	extract params -> new to_player, string:reason[66];

	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	//if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ?????? ?????????????? ?????? ????");

	if(AntiSliv(playerid, "/warn")) return true;
	
	AddAdminStat(playerid, "warns_total", P_WARNS_TOTAL);
	AddAdminStat(playerid, "warns_today", P_WARNS_TODAY);

	AddPlayerData(to_player, P_WARN, +, 1);
	SetPlayerData(to_player, P_WARN_TIME, gettime() + (86400 * 10));

	new fmt_msg[128];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ????? ?????????????? ?????? %s [%d|3]", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player), GetPlayerData(to_player, P_WARN));

	if(strlen(reason) > 0)
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);

	SendClientMessageToAll(0xFF5533FF, fmt_msg);

	InvitePlayer(to_player, 0, 0, true);

	new uid = GetPlayerAccountID(to_player);
	new warns = GetPlayerData(to_player, P_WARN);
	new warns_time = GetPlayerData(to_player, P_WARN_TIME);

	format(fmt_msg, sizeof fmt_msg, "????? ???? %s[acc:%d] (%d/3). ???????: %d", GetPlayerNameEx(to_player), uid, warns, reason);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	if(warns >= 3)
	{
		SendClientMessage(to_player, 0xFF5533FF, "??????? ???????????? ?? 10 ????");

		warns =
		warns_time = 0;

		AddBan(uid, gettime(), 10, GetPlayerIpEx(to_player), "???????? 3 ?????", GetPlayerNameEx(playerid));
	}
	else Kick:(to_player);

	format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET warn=%d,warn_time=%d WHERE id=%d", warns, warns_time, uid);
	mysql_query(mysql, fmt_msg, false);

	return 1;
}

CMD:unwarn(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 2) return 1;
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /warn [id ??????] [??????? (????ù????????)]");

	extract params -> new to_player, string: reason[66];
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	SetPlayerData(to_player, P_WARN, 		0);
	SetPlayerData(to_player, P_WARN_TIME, 	0);

	UpdatePlayerDatabaseInt(to_player, "warn", 		0);
	UpdatePlayerDatabaseInt(to_player, "warn_time", 	0);

	new fmt_msg[128];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ??ù? ??? ?????????????ù ? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));

	if(strlen(reason) > 0)
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);

	SendClientMessageToAll(0xFF5533FF, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "??ù? ??? ????? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

CMD:spawn(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 7) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
	
	extract params -> new to_player, string: reason[30]; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /spawn [id ??????] [???????]");
	
	if(TEST_SERVER == 1)
	{
	    if(playerid != to_player) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?? ù??ù ??????? ?????? ??????? ????? ???????????? ?????? ?? ????????? ? ????!");
	}
	
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	SpawnPlayer(to_player);

	AddAdminStat(playerid, "spawns_total", P_SPAWNS_TOTAL);
	AddAdminStat(playerid, "spawns_today", P_SPAWNS_TODAY);

	new fmt_msg[999];
	//format(fmt_msg, sizeof fmt_msg, "????????????? %s ????????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));

	if(strlen(reason))
		format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);
	
		format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ????????? %s[%d]. ???????: %s ", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, reason);
		SendMessageToAdmins(fmt_msg, 0x999999FF);
		
    	format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ?????????? %s[%d]. ???????: %s ", GetPlayerNameEx(to_player), to_player, reason);
    	SendClientMessage(playerid, 0x66CC00FF, fmt_msg);	

	format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ???? ?????????? ??????????????? %s[%d]. ???????: %s ", GetPlayerNameEx(playerid), playerid, reason);
	SendClientMessage(to_player, 0x66CC00FF, fmt_msg);
	
	InfoAstats[3] += 1;

	format(fmt_msg, sizeof fmt_msg, "????????? %s[acc:%d]. ???????: %s",
	GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), reason);
	return 1;
}

CMD:spcar(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 3) return 1;

	extract params -> new vehicleid; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /spcar [id ????]");

	if(IsPlayerInAnyVehicle(playerid) && vehicleid == 0) vehicleid = GetPlayerVehicleID(playerid);

	if(!IsValidVehicle(vehicleid)) return SendClientMessage(playerid, 0xCECECEFF, "??????? ?????????? ?? ?????????? ?? ???????");

	SetVehicleToRespawn(vehicleid);

	new fmt_msg[100];

	if(GetPlayerAdminEx(playerid) <= 5)
	{
		format(fmt_msg, sizeof fmt_msg, "[A] ????????????? %s[%d] ??????????? ???? [?%d]", GetPlayerNameEx(playerid), playerid, vehicleid);
		SendMessageToAdmins(fmt_msg, 0x999999FF);
	}

	format(fmt_msg, sizeof fmt_msg, "??????????? ???? ?%d", vehicleid);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

CMD:tplist(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 1) return 1;

	ShowTeleportList(playerid);

	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, "?????????? ???? ??????????");

	return 1;
}

CMD:tp(playerid, params[])
{
  if(GetPlayerAdminEx(playerid)< 1) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
  callcmd::gps(playerid);

  return 1;
}



alias:goto("g")
CMD:goto(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 2) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /goto [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");

    if(GetPlayerSecretEx(to_player) >= 1)
	    return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ???? ?????????ù ??????????");

	new Float: x, Float: y, Float: z, interior, virtual_world;
	GetPlayerPos(to_player, x, y, z);
	interior = GetPlayerInterior(to_player);
	virtual_world = GetPlayerVirtualWorld(to_player);

	SetPlayerPosEx(playerid, x + 1, y + 1, z, 0.0, interior, virtual_world, false);
   player_state_pickup[playerid] = 0;
	SetPlayerInHouse(playerid, GetPlayerInHouse(to_player));
	SetPlayerInBiz(playerid, GetPlayerInBiz(to_player));

	new fmt_msg[999];
    format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ???????????????ù ? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
    SendMessageToAdmins(fmt_msg, 0x999999FF);
    
	format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ??????? ????????????????? ? ?????? %s[%d]", GetPlayerNameEx(to_player), to_player);
	SendClientMessage(playerid, 0x66CC00FF, fmt_msg);    
	
	format(fmt_msg, sizeof fmt_msg, "{1E90FF}????????????? %s[%d] ??????? ? ??? ???????????????ù.", GetPlayerNameEx(playerid), playerid);
	SendClientMessage(to_player, 0x66CC00FF, fmt_msg);	

	format(fmt_msg, sizeof fmt_msg, "ù??????????????ù ? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

alias:gethere("gh")

CMD:gethere(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 2) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /gethere [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");

	if(GetPlayerSecretEx(to_player) >= 1)
		return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ???? ?????????ù ??????????");

	if(GetPlayerAdminEx(to_player) > GetPlayerAdminEx(playerid))
	{
		SendClientMessage(playerid, 0x66CC33FF, "?? ????????? ??????????????? ? ???? ?????????????? ???? ??????, ?? ?????? ??????????? ???? ????????");
		SendPlayerOffer(playerid, to_player, OFFER_TYPE_GETHERE);
	}
	else
	{
		new Float: x, Float: y, Float: z;
		GetPlayerPos(playerid, x, y, z);
		SetPlayerPosEx(to_player, x + 1, y + 1, z, 0.0, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), false);
        player_state_pickup[to_player] = 0;
        
		SetPlayerInHouse(to_player, GetPlayerInHouse(playerid));
		SetPlayerInBiz(to_player, GetPlayerInBiz(playerid));

		new fmt_msg[999];
		format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ?????????????? ? ???? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
		SendMessageToAdmins(fmt_msg, 0x999999FF);
		
		format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ??????? ??????????????? %s[%d] ? ????", GetPlayerNameEx(to_player), to_player);
		SendClientMessage(playerid, -1, fmt_msg);		
		
	    format(fmt_msg, sizeof fmt_msg, "{1E90FF}????????????? %s[%d] ??????? ?????????????? ??? ? ????.", GetPlayerNameEx(playerid), playerid);
    	SendClientMessage(to_player, 0x66CC00FF, fmt_msg);

		format(fmt_msg, sizeof fmt_msg, "ù????????????? ? ???? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
		SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);
	}

	return 1;
}

CMD:vtp(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 1) return 1;

	extract params -> new to_vehicleid; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /vtp [id ??????????]");
	if(!IsValidVehicle(to_vehicleid)) return SendClientMessage(playerid, 0xCECECEFF, "??????? ?????????? ?? ?????????? ?? ???????");

	new Float: x, Float: y, Float: z;
	GetVehiclePos(to_vehicleid, x, y, z);

	SetPlayerPosEx(playerid, x + 1, y + 1, z, 0.0, false);

	SendClientMessage(playerid, -1, "?? ???? ???????????????");

	new fmt_msg[105];

	format(fmt_msg, sizeof fmt_msg, "ù??????????????ù ? ???? ?%d", to_vehicleid);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	if(GetPlayerAdminEx(playerid) <= 5)
	{
		format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ???????????????ù ? ???? ?%d", GetPlayerNameEx(playerid), playerid, to_vehicleid);
		SendMessageToAdmins(fmt_msg, 0x999999FF);
	}

	return 1;
}

CMD:vget(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 1) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new vehicleid; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /vget [id ??????????]");
	if(!IsValidVehicle(vehicleid)) return SendClientMessage(playerid, 0xCECECEFF, "??????? ?????????? ?? ?????????? ?? ???????");

	new Float: x, Float: y, Float: z;
	GetPlayerPos(playerid, x, y, z);

	SetVehiclePos(vehicleid, x + 2.0, y + 2.0, z);

	new fmt_msg[999];

	format(fmt_msg, sizeof fmt_msg, "ù??????????????ù ? ???? ???? ?%d", vehicleid);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ?????????????? ? ???? ???? ?%d", GetPlayerNameEx(playerid), playerid, vehicleid);
	SendMessageToAdmins(fmt_msg, 0x999999FF);
	
	SendClientMessage(playerid, -1, "{1E90FF}?? ??????????????? ???? ? ????");	

	return 1;
}

CMD:getv(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 1) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /getv [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");

	if(GetPlayerOwnableCar(to_player) == INVALID_VEHICLE_ID)
		return SendClientMessage(playerid, 0x999999FF, ""SC"? ?????? ??? ??????? ??????????");

	new fmt_text[999],
		Float: x,
		Float: y,
		Float: z;

	GetPlayerPos(to_player, x, y, z);

	SetVehiclePos(GetPlayerOwnableCar(to_player), x + 2.0, y + 2.0, z);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????????????? ? %s[%d] ??? ?????? ?????????", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
	SendMessageToAdmins(fmt_text, 0x999999FF);
	
	format(fmt_text, sizeof fmt_text, "{1E90FF}?? ??????????????? ? %s[%d] ??? ?????? ?????????", GetPlayerNameEx(to_player), to_player);
	SendClientMessage(playerid, -1, fmt_text);	
	
	format(fmt_text, sizeof fmt_text, "{1E90FF}????????????? %s[%d] ?????????????? ? ??? ??? ?????? ?????????", GetPlayerNameEx(playerid), playerid);
	SendClientMessage(to_player, -1, fmt_text);	

	format(fmt_text, sizeof fmt_text, "ù??????????????ù ? %s[acc:%d] ??? ????", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:flip(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 1) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

    extract params -> new target_player; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /flip [id ??????]");

    if(!IsPlayerConnected(target_player) || !IsPlayerLogged(target_player))
        return ShowNotificationNew(playerid, 2, 5, 2, 0, "ù????? ?????? ???.");

    if(!IsPlayerInAnyVehicle(target_player))
        return ShowNotificationNew(playerid, 2, 5, 2, 0, "????? ?? ? ???????????? ????????.");

    new vehicleid = GetPlayerVehicleID(target_player);
    new Float:angle;

    GetVehicleZAngle(vehicleid, angle);
    SetVehicleZAngle(vehicleid, angle);

    new Float:x, Float:y, Float:z;
    GetVehiclePos(vehicleid, x, y, z);
    SetVehiclePos(vehicleid, x, y, z + 0.5);

    new fmt_msg[128];
    format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ?????????? ????????? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(target_player), target_player);
    SendMessageToAdmins(fmt_msg, 0x999999FF);

    format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ??????????? ????????? ?????? %s[%d]", GetPlayerNameEx(target_player), target_player);
    SendClientMessage(playerid, -1, fmt_msg);

    format(fmt_msg, sizeof fmt_msg, "{1E90FF}????????????? %s[%d] ?????????? ??? ?????????", GetPlayerNameEx(playerid), playerid);
    SendClientMessage(target_player, 0x66CC00FF, fmt_msg);

    format(fmt_msg, sizeof fmt_msg, "?????????? ????????? %s[acc:%d]", GetPlayerNameEx(target_player), GetPlayerAccountID(target_player));
    SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

    return 1;
}

CMD:setfuel(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 3) return 1;

	extract params -> new vehicleid, fuel; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /setfuel [id ??????????] [???-?? ???????]");

	if(!IsValidVehicle(vehicleid)) return SendClientMessage(playerid, 0xCECECEFF, "??????? ?????????? ?? ?????????? ?? ???????");

	if(!(0 <= fuel <= 150)) return SendClientMessage(playerid, 0x999999FF, "?????????? ??????? ?? 0 ?? 150");

	SetVehicleData(vehicleid, V_FUEL, fuel);

	new fmt_text[80];

	format(fmt_text, sizeof fmt_text, "?? ?????????? %d ??????? ? ù? ?%d", fuel, vehicleid);
	SendClientMessage(playerid, -1, fmt_text);

	if(GetPlayerAdminEx(playerid) >= 5)
	{
		format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? %d ??????? ? ù? ?%d", GetPlayerNameEx(playerid), playerid, fuel, vehicleid);
		SendMessageToAdmins(fmt_text, 0x999999FF);
	}

	format(fmt_text, sizeof fmt_text, "????????? %d ??????? ? ???? ?%d", fuel, vehicleid);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:settime(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 7) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new time; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /settime [????ù (0-23)]");

	if(!(0 <= time <= 23)) return SendClientMessage(playerid, 0x999999FF, ""SC"????ù ?? 0 ?? 23 ?????");

	SetWorldTime(time);

	new fmt_text[999];

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? ????ù ?? ??????? ?? %02d:00", GetPlayerNameEx(playerid), playerid, time);
	SendMessageToAdmins(fmt_text, 0x999999FF);
	
	format(fmt_text, sizeof fmt_text, "{1E90FF}?? ??????? ?????????? ????ù ?? ??????? ?? %02d:00", time);
	SendClientMessage(playerid, -1, fmt_text);	

	return 1;
}

CMD:setweather(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 2) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new weather; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /setweather [?????? (0-20)]");

	if(!(-1 <= weather <= 20))
	{
		SendClientMessage(playerid, 0x999999FF, ""SC"?????? ?? 0 ?? 20");
		SendClientMessage(playerid, 0x999999FF, ""SC"?????????????: 1, 3, 8, 9, 18");

		return 1;
	}
	
	if(weather != -1)
		SetWeather(weather);	

	new fmt_text[999];

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? ?????? ?? ??????? ?? %d", GetPlayerNameEx(playerid), playerid, weather);
	SendMessageToAdmins(fmt_text, 0x999999FF);
	
	format(fmt_text, sizeof fmt_text, "{1E90FF}?? ??????? ?????????? ?????? ?? ??????? ?? %d", weather);
	SendClientMessage(playerid, -1, fmt_text);

	return 1;
}

CMD:payday(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	OnPayDay();

	new fmt_text[50];

	SendClientMessage(playerid, -1, "?? ???????? PayDay");

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????????? PayDay", GetPlayerNameEx(playerid), playerid);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, "??????????? PayDay");

	return 1;
}

CMD:gzcolor(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4) return 1;

	extract params -> new gang_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /gzcolor [id ?????] (0-????????ù ????, 1-??????????ù ???, 2-??????????ù ???, 3-???????????ù ???)");

	if(!(0 <= gang_id <= 3))
		return SendClientMessage(playerid, 0x999999FF, "?????: 0-????????ù ????, 1-??????????ù ???, 2-??????????ù ???, 3-???????????ù ???");

	new gang_zone_id = -1;

	for(new idx; idx < g_gang_zones_loaded; idx ++)
	{
		if(!IsPlayerInDynamicArea(playerid, GetGangZoneData(idx, GZ_AREA))) continue;

		gang_zone_id = idx;
		break;
	}

	if(gang_zone_id == -1)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ?? ?????? ??????????");

	//SetGangZoneData(gang_zone_id, GZ_GANG, gang_id);
	//SaveGangZone(gang_zone_id);

	//GangZoneShowForAll(GetGangZoneData(gang_zone_id, GZ_ZONE), gang_zone_colors[ GetGangZoneData(gang_zone_id, GZ_GANG) ]);

	new fmt_text[75];

	SendClientMessage(playerid, -1, "?? ???????? ?????, ????????? ?????? ???????????");

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????? ????? ? ?????????? ?%d ?? %d", GetPlayerNameEx(playerid), playerid, gang_zone_id, gang_id);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	format(fmt_text, sizeof fmt_text, "??????? ????? ? ?????????? ?%d ?? %d", gang_zone_id, gang_id);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:sellproperty(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	SellDebtorsProperty();

	new fmt_text[75];

	SendClientMessage(playerid, -1, "?? ???????????? ??????? ????????? ?????????");

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????????? ??????? ????????? ?????????", GetPlayerNameEx(playerid), playerid);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, "?????????? ??????? ????????? ?????????");

	return 1;
}

CMD:setprods(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	extract params -> new biz_id, amount; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /setprods [id ???????] [???-??]");

	if(!(0 <= amount <= 10000))
		return SendClientMessage(playerid, 0x999999FF, "?????????? ????????? ?? 0 ?? 10000");

	if(!(0 <= biz_id <= g_business_loaded - 1))
		return SendClientMessage(playerid, 0x999999FF, "??????? ??????? ?? ?????????? ?? ???????");

	SetBusinessData(biz_id, B_PRODS, amount);

	new fmt_text[90];

	format(fmt_text, sizeof fmt_text, "UPDATE business SET products=%d WHERE id=%d", GetBusinessData(biz_id, B_PRODS), GetBusinessData(biz_id, B_SQL_ID));
	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ?????????? %d ????????? ? ??????? ?%d", amount, biz_id);
	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? %d ????????? ? ??????? ?%d", GetPlayerNameEx(playerid), playerid, amount, biz_id);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	return 1;
}

CMD:fullprods(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	extract params -> new amount; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /fullprods [???-??]");

	if(!(0 <= amount <= 10000))
		return SendClientMessage(playerid, 0x999999FF, "?????????? ????????? ?? 0 ?? 10000");

	for(new biz_id; biz_id < g_business_loaded - 1; biz_id ++)
		SetBusinessData(biz_id, B_PRODS, amount);

	new fmt_text[90];

	format(fmt_text, sizeof fmt_text, "UPDATE business SET products=%d", amount);
	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ?????????? %d ????????? ?? ???? ????????", amount);
	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? %d ????????? ?? ???? ????????", GetPlayerNameEx(playerid), playerid, amount);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	return 1;
}

CMD:setfuels(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	extract params -> new fs_id, amount; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /setfuels [id ???] [???-??]");

	if(!(0 <= amount <= 10000))
		return SendClientMessage(playerid, 0x999999FF, "?????????? ??????? ?? 0 ?? 10000");

	if(!(0 <= fs_id <= g_fuel_station_loaded-1))
		return SendClientMessage(playerid, 0x999999FF, "?????? ??? ?? ?????????? ?? ???????");

	SetFuelStationData(fs_id, FS_FUELS, amount);

	new fmt_text[90];

	format(fmt_text, sizeof fmt_text, "UPDATE fuel_stations SET fuels=%d WHERE id=%d", GetFuelStationData(fs_id, FS_FUELS), GetFuelStationData(fs_id, FS_SQL_ID));
	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ?????????? %d ??????? ? ??? ?%d", amount, fs_id);
	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? %d ??????? ? ??? ?%d", GetPlayerNameEx(playerid), playerid, amount, fs_id);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	return 1;
}

CMD:fullfuels(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	extract params -> new amount; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /fullfuels [???-??]");

	if(!(0 <= amount <= 10000))
		return SendClientMessage(playerid, 0x999999FF, "?????????? ??????? ?? 0 ?? 10000");

	for(new fs_id; fs_id < g_fuel_station_loaded - 1; fs_id ++)
		SetFuelStationData(fs_id, FS_FUELS, amount);

	new fmt_text[90];

	format(fmt_text, sizeof fmt_text, "UPDATE fuel_stations SET fuels=%d", amount);
	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ?????????? %d ??????? ?? ???? ???", amount);
	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? %d ??????? ?? ???? ???", GetPlayerNameEx(playerid), playerid, amount);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	return 1;
}

CMD:addbiz(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new type, price, rent_price; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /addbiz [???] [?????????] [???? ??????]");

	new fmt_text[320];

	if(!(1 <= type <= 11) && type != 13)
		return SendClientMessage(playerid, 0x999999FF, "ù??? ????????: 1-24/7, 2-????, 3-?????????? ????., 4-?????????., 5-??????, 6-?????, 7-?????????, 8-??????, 9-??????? ????? 10 - ù????? ????? 11-??????? ?????ù 13 - ??????? ???????????");

	if(price < 1) return SendClientMessage(playerid, 0x999999FF, "????????? ??????? ?? ????? ???? ?????? 1");

	if(rent_price < 1) return SendClientMessage(playerid, 0x999999FF, "????????? ?????? ?? ????? ???? ?????? 1");

	new Cache: result,
		idx = g_business_loaded;

	GetPlayerPos(playerid, g_business[idx][B_POS_X], g_business[idx][B_POS_Y], g_business[idx][B_POS_Z]);

	SetBusinessData(idx, B_PRICE,			price);
	SetBusinessData(idx, B_RENT_PRICE,		rent_price);
	SetBusinessData(idx, B_TYPE,			type);

	SetBusinessData(idx, B_INTERIOR,		type-1);



	format
	(
		fmt_text, sizeof fmt_text,
		"INSERT INTO business \
		(type, price, rent_price, x, y, z, interior)\
		VALUES ('%d', '%d', '%f', '%f', '%f', '%f', '%d')",
		type, price, rent_price,
		GetBusinessData(idx, B_POS_X),
		GetBusinessData(idx, B_POS_Y),
		GetBusinessData(idx, B_POS_Z),
		type-1
	);

	result = mysql_query(mysql, fmt_text, true);

	SetBusinessData(idx, B_SQL_ID, 		cache_insert_id());
	
	cache_delete(result);

	g_business_loaded ++;

	CreatePickup(1318, 23, GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), GetBusinessData(idx, B_POS_Z), 0, PICKUP_ACTION_TYPE_BIZ_ENTER, idx);

	UpdateBusinessLabel(idx);

	new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];
	GetCityName(GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), city);
	GetAreaName(GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), area);
	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ?????? ?%d (%s / %s)", GetPlayerNameEx(playerid), playerid, idx, city, area);

	SendMessageToAdmins(fmt_text, 0x66CC33FF);

	SendClientMessage(playerid, 0x3399FFFF, "??????????? {FFFF00}/bsetexitpos{3399FF}, ????? ????????? ???????? ???????");

	return 1;
}

CMD:editbizdata(playerid, params[])
{
    if (TEST_SERVER == 1)
        return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");

    if (GetPlayerAdminEx(playerid) < 7)
        return 1;

    new bizid, type, price, rent_price, new_id;
    if (sscanf(params, "ddddD(0)", bizid, type, price, rent_price, new_id))
        return SendClientMessage(playerid, 0xCECECEFF, "???????????: /editbizdata [id] [???] [?????????] [???? ??????] [????? id (???.)]");

    if(!(1 <= type <= 11) && type != 13)
		return SendClientMessage(playerid, 0x999999FF, "ù??? ????????: 1-24/7, 2-????, 3-?????????? ????., 4-?????????., 5-??????, 6-?????, 7-?????????, 8-??????, 9-??????? ????? 10 - ù????? ????? 11-??????? ?????ù 13 - ??????? ???????????");

    if (price < 1 || rent_price < 1)
        return SendClientMessage(playerid, 0x999999FF, "????????? ? ?????? ?????? ???? ?????? 0");

    if (bizid < 0 || bizid >= g_business_loaded)
        return SendClientMessage(playerid, 0x999999FF, "?????? ? ????? ID ?? ??????");

    if (new_id > 0)
    {
        if (new_id >= g_business_loaded)
            return SendClientMessage(playerid, 0x999999FF, "?????? ? ????? ID ?? ??????");

        // ????? ???? ?????? ????? ?????????
        new temp_data[sizeof(g_business[])];
        for (new i = 0; i < sizeof(g_business[]); i++)
            temp_data[i] = g_business[bizid][i];

        for (new i = 0; i < sizeof(g_business[]); i++)
        {
            g_business[bizid][i] = g_business[new_id][i];
            g_business[new_id][i] = temp_data[i];
        }

        // ????? SQL ID
        new temp_sql_id = GetBusinessData(bizid, B_SQL_ID);
        SetBusinessData(bizid, B_SQL_ID, GetBusinessData(new_id, B_SQL_ID));
        SetBusinessData(new_id, B_SQL_ID, temp_sql_id);

        UpdateBusinessLabel(bizid);
        UpdateBusinessLabel(new_id);

        new msg[128];
        format(msg, sizeof msg, "{00ff00}| {ffffff}??????? ID %d ? %d ???? ??????? ???????? ???????", bizid, new_id);
        SendClientMessage(playerid, -1, msg);

        format(msg, sizeof msg, "[A] %s[%d] ?????ù? ??????? ID %d ? %d", GetPlayerNameEx(playerid), playerid, bizid, new_id);
        SendMessageToAdmins(msg, 0x66CC33FF);
        return 1;
    }

    // ??????????? ??????????????
    SetBusinessData(bizid, B_TYPE, type);
    SetBusinessData(bizid, B_PRICE, price);
    SetBusinessData(bizid, B_RENT_PRICE, rent_price);
    SetBusinessData(bizid, B_INTERIOR, type - 1);

    new query[256];
    format(query, sizeof query,
        "UPDATE business SET type='%d', price='%d', rent_price='%d', interior='%d' WHERE id='%d'",
        type, price, rent_price, type - 1, GetBusinessData(bizid, B_SQL_ID)
    );
    mysql_query(mysql, query, true);

    UpdateBusinessLabel(bizid);

    format(query, sizeof query, "[A] %s[%d] ??????? ?????? ?%d: ??? %d, ???? %d$, ?????? %d$", GetPlayerNameEx(playerid), playerid, bizid, type, price, rent_price);
    SendMessageToAdmins(query, 0x66CC33FF);

    SendClientMessage(playerid, 0x3399FFFF, "?????? ??????? ????????");
    return 1;
}

CMD:delbiz(playerid, params[])
{
	if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new idx; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /delbiz [ID ???????]");

	if(idx < 0 || idx >= g_business_loaded)
		return SendClientMessage(playerid, 0x999999FF, "????????? ?????? ?? ??????????");

	new Cache: result;
	new fmt_text[256];

	format(fmt_text, sizeof fmt_text, "DELETE FROM business WHERE id = '%d'", GetBusinessData(idx, B_SQL_ID));
	result = mysql_query(mysql, fmt_text, true);
	cache_delete(result);

	// ???????? 3D Label, ???? ?? ??? ??????
	Delete3DTextLabel(g_business[idx][B_LABEL]);

	// ??????? ????????? ?????? ???????
	SetBusinessData(idx, B_SQL_ID, 			0);
	SetBusinessData(idx, B_TYPE, 			0);
	SetBusinessData(idx, B_PRICE, 			0);
	SetBusinessData(idx, B_RENT_PRICE, 		0);
	SetBusinessData(idx, B_POS_X, 			0.0);
	SetBusinessData(idx, B_POS_Y, 			0.0);
	SetBusinessData(idx, B_POS_Z, 			0.0);
	SetBusinessData(idx, B_INTERIOR, 		0);

	new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];
	GetCityName(GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), city);
	GetAreaName(GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), area);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ?????? ?%d (%s / %s)", GetPlayerNameEx(playerid), playerid, idx, city, area);
	SendMessageToAdmins(fmt_text, 0xFF4444FF);

	SendClientMessage(playerid, 0x3399FFFF, "?? ??????? ??????.");

	return 1;
}

CMD:bsetexitpos(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new biz_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /bsetexitpos [id ???????]");

	if(!(0 <= biz_id <= g_business_loaded - 1)) return SendClientMessage(playerid, 0x999999FF, "??????? ??????? ?? ?????????? ?? ???????");

	GetPlayerPos(playerid, g_business[biz_id][B_EXIT_POS_X], g_business[biz_id][B_EXIT_POS_Y], g_business[biz_id][B_EXIT_POS_Z]);
	GetPlayerFacingAngle(playerid, g_business[biz_id][B_EXIT_ANGLE]);

	new fmt_text[144];

	format
	(
		fmt_text, sizeof fmt_text,
		"UPDATE business SET exit_x='%f', exit_y='%f', exit_z='%f', exit_angle='%f' WHERE id=%d",
		GetBusinessData(biz_id, B_EXIT_POS_X),
		GetBusinessData(biz_id, B_EXIT_POS_Y),
		GetBusinessData(biz_id, B_EXIT_POS_Z),
		GetBusinessData(biz_id, B_EXIT_ANGLE),
		GetBusinessData(biz_id, B_SQL_ID)
	);

	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ??????? ???????? ?????????? ?????? ? ??????? ?%d", biz_id);

	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	return 1;
}

CMD:bsetpos(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new biz_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /bsetpos [id ???????]");

	if(!(0 <= biz_id <= g_business_loaded - 1)) return SendClientMessage(playerid, 0x999999FF, "??????? ??????? ?? ?????????? ?? ???????");

	GetPlayerPos(playerid, g_business[biz_id][B_POS_X], g_business[biz_id][B_POS_Y], g_business[biz_id][B_POS_Z]);

	new fmt_text[144];

	format
	(
		fmt_text, sizeof fmt_text,
		"UPDATE business SET x='%f', y='%f', z='%f' WHERE id=%d",
		GetBusinessData(biz_id, B_POS_X),
		GetBusinessData(biz_id, B_POS_Y),
		GetBusinessData(biz_id, B_POS_Z),
		GetBusinessData(biz_id, B_SQL_ID)
	);

	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ??????? ???????? ?????????? ????? ? ??????? ?%d (%s)", biz_id, GetBusinessData(biz_id, B_NAME));
	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	SendClientMessage(playerid, -1, "?? ???????? ???????????? /bsetexitpos id ??ù ????????ù ????????? ??????");
	UpdateBusinessLabel(biz_id);
	return 1;
}

CMD:addfuelst(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new price, rent_price; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /addfuelst [?????????] [???? ??????]");

	if(price < 1) return SendClientMessage(playerid, 0xCECECEFF, "????????? ???????????? ?? ????? ???? ?????? 1");

	if(rent_price < 1) return SendClientMessage(playerid, 0xCECECEFF, "????????? ???????????? ?? ????? ???? ?????? 1");

	new Cache: result,
		idx = g_fuel_station_loaded;

	GetPlayerPos(playerid, g_fuel_station[idx][FS_POS_X], g_fuel_station[idx][FS_POS_Y], g_fuel_station[idx][FS_POS_Z]);

	new fmt_text[256];

	format
	(

		fmt_text, sizeof fmt_text,
		"INSERT INTO `fuel_stations`\
		(`price`,`rent_price`,`fuels`, `fuel_price`, `buy_fuel_price`, `balance`, `x`, `y`, `z`)\
		VALUES('%d','%d','100','50','50','100000','%f','%f','%f')",
		price, rent_price,
		GetFuelStationData(idx, FS_POS_X),
		GetFuelStationData(idx, FS_POS_Y),
		GetFuelStationData(idx, FS_POS_Z)
	);


	result = mysql_query(mysql, fmt_text, true);

	SetFuelStationData(idx, FS_SQL_ID, 		cache_insert_id());

	cache_delete(result);

	g_fuel_station_loaded ++;

	SetFuelStationData(idx, FS_LABEL, CreateDynamic3DTextLabel("????????????", 0xFFFF00FF, GetFuelStationData(idx, FS_POS_X), GetFuelStationData(idx, FS_POS_Y), GetFuelStationData(idx, FS_POS_Z) + 0.3, 6.50));

	UpdateFuelStationLabel(idx);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ???????? ?%d", GetPlayerNameEx(playerid), playerid, idx);

	SendMessageToAdmins(fmt_text, 0x66CC33FF);
	return 1;
}

CMD:addhouse(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new type, price, rent_price; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /addhouse [???] [?????????] [???? ??????]");

	new fmt_text[300];

	if(!(0 <= type <= sizeof g_house_type - 1))
	{
		SendClientMessage(playerid, 0x999999FF, "ù??? ?????:");

		for(new i; i < sizeof g_house_type; i ++)
		{
			format(fmt_text, sizeof fmt_text, "%d. %s", i, GetHouseTypeInfo(i, HT_NAME));

			SendClientMessage(playerid, 0xCECECEFF, fmt_text);
		}

		return 1;
	}

	if(price < 1) return SendClientMessage(playerid, 0x999999FF, "????????? ???? ?? ????? ???? ?????? 1");

	if(rent_price < 1) return SendClientMessage(playerid, 0x999999FF, "????????? ?????? ?? ????? ???? ?????? 1");

	new Cache: result,
		idx = g_house_loaded;

	GetPlayerPos(playerid, g_house[idx][H_POS_X], g_house[idx][H_POS_Y], g_house[idx][H_POS_Z]);

	SetHouseData(idx, H_PRICE,			price);
	SetHouseData(idx, H_RENT_PRICE,		rent_price);
	SetHouseData(idx, H_TYPE,			type);

	SetHouseData(idx, H_ENTRACE,		-1);

	format
	(
		fmt_text, sizeof fmt_text,
		"INSERT INTO houses \
		(type, price, rent_price, x, y, z)\
		VALUES ('%d', '%d', '%f', '%f', '%f', '%f')",
		type, price, rent_price,
		GetHouseData(idx, H_POS_X),
		GetHouseData(idx, H_POS_Y),
		GetHouseData(idx, H_POS_Z)
	);

	result = mysql_query(mysql, fmt_text, true);

	SetHouseData(idx, H_SQL_ID, 		cache_insert_id());

	cache_delete(result);

	g_house_loaded ++;

	UpdateHouse(idx);

	new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];
	GetCityName(GetHouseData(idx, H_POS_X), GetHouseData(idx, H_POS_Y), city);
	GetAreaName(GetHouseData(idx, H_POS_X), GetHouseData(idx, H_POS_Y), area);
	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ??? ?%d (%s / %s)", GetPlayerNameEx(playerid), playerid, idx, city, area);

	SendMessageToAdmins(fmt_text, 0x66CC33FF);

	SendClientMessage(playerid, 0x3399FFFF, "??????????? {FFFF00}/setexitpos ? /setcarpos{3399FF}, ????? ????????? ???????? ????");

	return 1;
}

CMD:edithousedata(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
    if(GetPlayerAdminEx(playerid) < 7) return 1;

    extract params -> new houseid, type, price, rent_price;  else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /edithousedata [ID ????] [???] [?????????] [???? ??????]");

    if(!(0 <= houseid < g_house_loaded))
        return SendClientMessage(playerid, 0x999999FF, "??? ? ????? ID ?? ??????");

    if(!(0 <= type < sizeof g_house_type))
    {
        SendClientMessage(playerid, 0x999999FF, "???????? ??? ????. ????????? ????:");

        new fmt_text[128];
        for(new i; i < sizeof g_house_type; i++)
        {
            format(fmt_text, sizeof fmt_text, "%d. %s", i, GetHouseTypeInfo(i, HT_NAME));
            SendClientMessage(playerid, 0xCECECEFF, fmt_text);
        }

        return 1;
    }

    if(price < 1) return SendClientMessage(playerid, 0x999999FF, "????????? ???? ?? ????? ???? ?????? 1");
    if(rent_price < 1) return SendClientMessage(playerid, 0x999999FF, "????????? ?????? ?? ????? ???? ?????? 1");

    SetHouseData(houseid, H_TYPE, type);
    SetHouseData(houseid, H_PRICE, price);
    SetHouseData(houseid, H_RENT_PRICE, rent_price);

    new fmt_text[300];
    format(fmt_text, sizeof fmt_text,
        "UPDATE houses SET type = '%d', price = '%d', rent_price = '%d' WHERE id = '%d'",
        type, price, rent_price, GetHouseData(houseid, H_SQL_ID)
    );

    new Cache: result = mysql_query(mysql, fmt_text, true);
    cache_delete(result);

    UpdateHouse(houseid);

    format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????? ????????? ???? ?%d (???: %d, ????: %d, ??????: %d)",
        GetPlayerNameEx(playerid), playerid, houseid, type, price, rent_price);

    SendMessageToAdmins(fmt_text, 0x66CC33FF);
    SendClientMessage(playerid, 0x3399FFFF, "????????? ???? ??????? ?????????");

    return 1;
}

CMD:sethousepos(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
    if(GetPlayerAdminEx(playerid) < 7) return 1;

    extract params -> new houseid; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sethousepos [ID ????]");

    if(!(0 <= houseid < g_house_loaded))
        return SendClientMessage(playerid, 0x999999FF, "??? ? ????? ID ?? ??????");

    new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);

    SetHouseData(houseid, H_POS_X, x);
    SetHouseData(houseid, H_POS_Y, y);
    SetHouseData(houseid, H_POS_Z, z);

    new fmt_text[300];
    format(fmt_text, sizeof fmt_text,
        "UPDATE houses SET x = '%f', y = '%f', z = '%f' WHERE id = '%d'",
        x, y, z, GetHouseData(houseid, H_SQL_ID)
    );

    new Cache: result = mysql_query(mysql, fmt_text, true);
    cache_delete(result);

    UpdateHouse(houseid);

    format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????? ??????? ???? ?%d", GetPlayerNameEx(playerid), playerid, houseid);
    SendMessageToAdmins(fmt_text, 0x66CC33FF);

    SendClientMessage(playerid, 0x3399FFFF, "??????ù ???? ??????? ?????????");

    return 1;
}

CMD:setexitpos(playerid, params[])
{
    if(TEST_SERVER == 14) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new house_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /setexitpos [id ????]");

	if(!(0 <= house_id <= g_house_loaded - 1)) return SendClientMessage(playerid, 0x999999FF, "??????? ???? ?? ?????????? ?? ???????");

	GetPlayerPos(playerid, g_house[house_id][H_EXIT_POS_X], g_house[house_id][H_EXIT_POS_Y], g_house[house_id][H_EXIT_POS_Z]);
	GetPlayerFacingAngle(playerid, g_house[house_id][H_EXIT_ANGLE]);

	new fmt_text[144];

	format
	(
		fmt_text, sizeof fmt_text,
		"UPDATE houses SET exit_x='%f', exit_y='%f', exit_z='%f', exit_angle='%f' WHERE id=%d",
		GetHouseData(house_id, H_EXIT_POS_X),
		GetHouseData(house_id, H_EXIT_POS_Y),
		GetHouseData(house_id, H_EXIT_POS_Z),
		GetHouseData(house_id, H_EXIT_ANGLE),
		GetHouseData(house_id, H_SQL_ID)
	);

	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ??????? ???????? ?????????? ?????? ? ???? ?%d", house_id);

	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	return 1;
}

CMD:setcarpos(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new house_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /setcarpos [id ????]");

	if(!(0 <= house_id <= g_house_loaded - 1)) return SendClientMessage(playerid, 0x999999FF, "??????? ???? ?? ?????????? ?? ???????");

	GetPlayerPos(playerid, g_house[house_id][H_CAR_POS_X], g_house[house_id][H_CAR_POS_Y], g_house[house_id][H_CAR_POS_Z]);
	GetPlayerFacingAngle(playerid, g_house[house_id][H_CAR_ANGLE]);

	new fmt_text[144];

	format
	(
		fmt_text, sizeof fmt_text,
		"UPDATE houses SET car_x='%f', car_y='%f', car_z='%f', car_angle='%f' WHERE id=%d",
		GetHouseData(house_id, H_CAR_POS_X),
		GetHouseData(house_id, H_CAR_POS_Y),
		GetHouseData(house_id, H_CAR_POS_Z),
		GetHouseData(house_id, H_CAR_ANGLE),
		GetHouseData(house_id, H_SQL_ID)
	);

	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ??????? ???????? ?????????? ?????? ???? ? ???? ?%d", house_id);

	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	return 1;
}

CMD:getname(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 3) return 1;

	extract params -> new user_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /getname [????? ????????]");

	new name[21],
		fmt_text[120];

	format(name, sizeof name, "%s", GetPlayerNameBySqlID(user_id));

	if(strcmp(name, "none", true))
	{
		format(fmt_text, sizeof fmt_text, "??ù: %s / ????? ????????: %d", name, user_id);

		SendClientMessage(playerid, 0x3399FFFF, fmt_text);
	}
	else SendClientMessage(playerid, 0x999999FF, "?????? ??????? ?? ?????? ? ???? ??????");

	return 1;
}

CMD:slap(playerid, params[])
{
    if (GetPlayerAdminEx(playerid) < 7)
        return SendClientMessage(playerid, 0xFF5533FF, "??????: ? ??? ??? ???? ???????????? ??? ???????");

    extract params -> new to_player, set_code, string:reason[30]; else {
        SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /slap [id ??????] [0 - ?????, 1 - ????] [???????]");
        return 1;
    }

    if (!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
        return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???.");

    if (GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
        return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

    new Float:x, Float:y, Float:z;
    GetPlayerPos(to_player, x, y, z);

    new fmt_text[999], fmt_msg[999];

    switch (set_code)
    {
        case 0: // ?????
        {
            SetPlayerPos(to_player, x, y, z + 5.0);
            PlayerPlaySound(to_player, 1130, 0.0, 0.0, 0.0);

            format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? ?????? %s[%d]. ???????: %s", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, reason);
            SendMessageToAdmins(fmt_text, 0x999999FF);

            format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ?????????? ?????? %s[%d]. ???????: %s", GetPlayerNameEx(to_player), to_player, reason);
            SendClientMessage(playerid, -1, fmt_msg);

            format(fmt_text, sizeof fmt_text, "{1E90FF}????????????? %s[%d] ????????? ???. ???????: %s", GetPlayerNameEx(playerid), playerid, reason);
            SendClientMessage(to_player, -1, fmt_text);
        }
        case 1: // ????
        {
            SetPlayerPos(to_player, x, y, z - 5.0);
            PlayerPlaySound(to_player, 1130, 0.0, 0.0, 0.0);

            format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????? ?????? %s[%d]. ???????: %s", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, reason);
            SendMessageToAdmins(fmt_text, 0x999999FF);

            format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ???????? ?????? %s[%d]. ???????: %s", GetPlayerNameEx(to_player), to_player, reason);
            SendClientMessage(playerid, -1, fmt_msg);

            format(fmt_text, sizeof fmt_text, "{1E90FF}????????????? %s[%d] ??????? ???. ???????: %s", GetPlayerNameEx(playerid), playerid, reason);
            SendClientMessage(to_player, -1, fmt_text);
        }
        default:
            return SendClientMessage(playerid, 0xFF6600FF, "??????: ??????? ?????? ??? (0 - ?????, 1 - ????)");
    }

    return 1;
}

CMD:hp(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 2) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new to_player, health; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /hp [id ??????] [?????????? ???????ù]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");

	else if(GetPlayerAdminEx(playerid) == 1 && to_player != playerid)
		return SendClientMessage(playerid, 0x999999FF, "??????????????? 1-?? ?????ù ???????? ????????? ?????? ?????? ?????ù ???????ù");
	
	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	else if(!(0 <= health <= 100)) return SendClientMessage(playerid, 0x999999FF, ""SC"??????? ???????ù ?? 0 ?? 100");

	SetPlayerData(to_player, P_HEALTH, health);
	SetPlayerHealthEx(to_player, health);

	if(GetPlayerData(to_player, P_HOSPITAL))
		SetPlayerData(to_player, P_HOSPITAL, false);

	new fmt_msg[999];
	format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ??????? ??????? ???????ù %s[%d] ?? %d", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, health);
	SendMessageToAdmins(fmt_msg, 0x999999FF);
	
	format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ???????? %s[%d] ??????? ???????ù", GetPlayerNameEx(to_player), to_player);
	SendClientMessage(playerid, -1, fmt_msg);	
	
	format(fmt_msg, sizeof fmt_msg, "{1E90FF}????????????? %s[%d] ??????? ??? ??????? ???????ù", GetPlayerNameEx(playerid), playerid);
	SendClientMessage(to_player, -1, fmt_msg);	

	format(fmt_msg, sizeof fmt_msg, "????????? %s[acc:%d] ??????? ???????ù ?? %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), health);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

CMD:spcars(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4) return 1;

	new delay;
	if(sscanf(params, "d", delay))
	    return SendClientMessage(playerid, -1, "?????????????: /spcars [????ù ? ????????: 10-60]");

	if(delay < 10 || delay > 60)
	    return SendClientMessage(playerid, -1, "????ù ?????? ???? ?? 10 ?? 60 ??????.");

	new fmt_text[128];
	format(fmt_text, sizeof fmt_text,
	    "????????????? %s ??????????? ??????? ?????ù???? ????. ???? ?????ù??? ????????? ???????? ????? %d ??????.",
	    GetPlayerNameEx(playerid), delay);
	SendClientMessageToAll(0xFFCC00FF, fmt_text);

	format(fmt_text, sizeof fmt_text,
	    "[A] ????????????? %s[%d] ???????? ?????? ???????? ?????ù???? ?????????? (%d ???)",
	    GetPlayerNameEx(playerid), playerid, delay);
	SendMessageToAdmins(fmt_text, 0x999999FF);


	new admin_id = playerid; // ????????ù ?????????ù, ????? ?? ???????? ?????? ??????? GetPlayerNameEx

	SetTimerEx("spcars_respawn", delay * 1000, false, "i", admin_id);
	return 1;
}

forward spcars_respawn(admin_id);
public spcars_respawn(admin_id)
{
	new vehicles_count = 0;

	for(new i = 1; i < MAX_VEHICLES; i++)
	{
	    if(!IsValidVehicle(i)) continue;
	    if(IsVehicleOccupied(i)) continue;
	    if(IsTrailerAttachedToAnyVehicle(i)) continue;

	    SetVehicleToRespawn(i);
	    vehicles_count++;
	}

	new fmt_text[128];
	format(fmt_text, sizeof fmt_text,
	    ""SC"???? ?????ù??? ????????? ??? ??????????? ??????????????. ?????: %d ??.",
	    vehicles_count);
	SendClientMessageToAll(0x33AAFFFF, fmt_text);

	format(fmt_text, sizeof fmt_text,
	    "[A] ????????????? %s[%d] ???????? ??????? ?????ù???? ?????????? (%d ????)",
	    GetPlayerNameEx(admin_id), admin_id, vehicles_count);
	SendMessageToAdmins(fmt_text, 0x999999FF);

	SendLog(admin_id, LOG_TYPE_ADMIN_ACTION, "??????????? ???? ?????ù??? ????????? (/spcars) ");
}

CMD:givegun(playerid, params[])
{
    if (GetPlayerAdminEx(playerid) < 3) return 1;
    if (TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");

    new to_player, weapon_id, weapon_ammo;
    if (sscanf(params, "iii", to_player, weapon_id, weapon_ammo))
        return SendClientMessage(playerid, 0xCECECEFF, "???????????: /givegun [id ??????] [id ?????ù] [???-?? ????????]");

    if (!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
        return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

    if (weapon_id < 1 || weapon_id > 46 || (weapon_id >= 19 && weapon_id <= 21))
        return SendClientMessage(playerid, 0x999999FF, "ID ?????ù ?? 1 ?? 46, ????? 19ñ21");

    if (weapon_ammo < 1 || weapon_ammo > 1000)
        return SendClientMessage(playerid, 0x999999FF, "?????????? ???????? ?? 1 ?? 1000");

    // ?????? ?????ù
    GivePlayerWeapon(to_player, weapon_id, weapon_ammo);
    SetPlayerArmedWeapon(to_player, weapon_id);

    //????: ????????????? ????????????? ???????
    SetPlayerAmmo(to_player, weapon_id, weapon_ammo);

    // ??????????ù
    new fmt_text[128];
    format(fmt_text, sizeof fmt_text, "????????????? %s[%d] ????? ??? %s ? %d ????.", GetPlayerNameEx(playerid), playerid, GetWeaponName(weapon_id), weapon_ammo);
    SendClientMessage(to_player, -1, fmt_text);

    format(fmt_text, sizeof fmt_text, "?? ?????? ?????? %s[%d] %s ? %d ????.", GetPlayerNameEx(to_player), to_player, GetWeaponName(weapon_id), weapon_ammo);
    SendClientMessage(playerid, -1, fmt_text);

    if (GetPlayerAdminEx(playerid) <= 5)
    {
        format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] ????? %s[%d] %s [%d ????]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, GetWeaponName(weapon_id), weapon_ammo);
        SendMessageToAdmins(fmt_text, 0x999999FF);
    }

    format(fmt_text, sizeof fmt_text, "????? %s[acc:%d] %s[%d ????]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), GetWeaponName(weapon_id), weapon_ammo);
    SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

    return 1;
}

CMD:agivelic(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	extract params -> new to_player, license; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /agivelic [id ??????] [???] (1-??????? ??????? 2-???????????????? ??????? 3-?? ??????)");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	new fmt_text[144];

	switch(license)
	{
		case 1:
		{
			SetPlayerData(to_player, P_DRIVING_LIC, GetPlayerData(to_player, P_DRIVING_LIC) ^ 1);
			UpdatePlayerDatabaseInt(to_player, "driving_lic", GetPlayerData(to_player, P_DRIVING_LIC));

			format(fmt_text, sizeof fmt_text, "????????????? %s[%d] %s ???????? ?? ???????? ???????? ?????ù", GetPlayerNameEx(playerid), playerid, GetPlayerData(to_player, P_DRIVING_LIC) ? "????? ???" : "?????? ? ???");
			SendClientMessage(to_player, 0x3399FFFF, fmt_text);

			format(fmt_text, sizeof fmt_text, "?? %s %s[%d] ???????? ?? ???????? ???????? ?????ù", GetPlayerData(to_player, P_DRIVING_LIC) ? "??????" : "??????? ?", GetPlayerNameEx(to_player), to_player);
			SendClientMessage(playerid, 0x66CC00FF, fmt_text);

			format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] %s %s[%d] ???????? ?? ???????? ???????? ?????ù", GetPlayerNameEx(playerid), playerid, GetPlayerData(to_player, P_DRIVING_LIC) ? "?????" : "?????? ?", GetPlayerNameEx(to_player), to_player);
			SendMessageToAdmins(fmt_text, 0x999999FF);
		}
		case 2:
		{
			SetPlayerData(to_player, P_DRIVING_LIC, GetPlayerData(to_player, P_DRIVING_LIC) == 2 ? 0 : 2);
			UpdatePlayerDatabaseInt(to_player, "driving_lic", GetPlayerData(to_player, P_DRIVING_LIC));

			format(fmt_text, sizeof fmt_text, "????????????? %s[%d] %s ???????? ?? ???????? ????????????????? ?????ù", GetPlayerNameEx(playerid), playerid, GetPlayerData(to_player, P_DRIVING_LIC) == 2 ? "????? ???" : "?????? ? ???");
			SendClientMessage(to_player, 0x3399FFFF, fmt_text);

			format(fmt_text, sizeof fmt_text, "?? %s %s[%d] ???????? ?? ???????? ????????????????? ?????ù", GetPlayerData(to_player, P_DRIVING_LIC) == 2 ? "??????" : "??????? ?", GetPlayerNameEx(to_player), to_player);
			SendClientMessage(playerid, 0x66CC00FF, fmt_text);

			format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] %s %s[%d] ???????? ?? ???????? ????????????????? ?????ù", GetPlayerNameEx(playerid), playerid, GetPlayerData(to_player, P_DRIVING_LIC) == 2 ? "?????" : "?????? ?", GetPlayerNameEx(to_player), to_player);
			SendMessageToAdmins(fmt_text, 0x999999FF);
		}
		case 3:
		{
			SetPlayerData(to_player, P_WEAPON_LIC, GetPlayerData(to_player, P_WEAPON_LIC) ^ 1);
			UpdatePlayerDatabaseInt(to_player, "weapon_lic", GetPlayerData(to_player, P_WEAPON_LIC));

			format(fmt_text, sizeof fmt_text, "????????????? %s[%d] %s ???????? ?? ??????", GetPlayerNameEx(playerid), playerid, GetPlayerData(to_player, P_WEAPON_LIC) ? "????? ???" : "?????? ? ???");
			SendClientMessage(to_player, 0x3399FFFF, fmt_text);

			format(fmt_text, sizeof fmt_text, "?? %s %s[%d] ???????? ?? ??????", GetPlayerData(to_player, P_WEAPON_LIC) ? "??????" : "??????? ?", GetPlayerNameEx(to_player), to_player);
			SendClientMessage(playerid, 0x66CC00FF, fmt_text);

			format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] %s %s[%d] ???????? ?? ??????", GetPlayerNameEx(playerid), playerid, GetPlayerData(to_player, P_WEAPON_LIC) ? "?????" : "?????? ?", GetPlayerNameEx(to_player), to_player);
			SendMessageToAdmins(fmt_text, 0x999999FF);
		}
		default: return SendClientMessage(playerid, 0xCECECEFF, "???????????: /agivelic [id ??????] [???] (1-??????? ??????? 2-???????????????? ??????? 3-?? ??????)");
	}

	format(fmt_text, sizeof fmt_text, "????? %s[acc:%d] ???????? %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), license);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:setskills(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new to_player, set_code, set_value; else {

	    SendClientMessage(playerid, 0xCECECEFF, "?????????????: /setskills [id ??????] [?????] [????????]");
	    SendClientMessage(playerid, 0xCECECEFF, "???? ???????:");
		SendClientMessage(playerid, 0xCECECEFF, "1 - Colt 45");
	    SendClientMessage(playerid, 0xCECECEFF, "2 - SD Pistol");
	    SendClientMessage(playerid, 0xCECECEFF, "3 - Desert Eagle");
	    SendClientMessage(playerid, 0xCECECEFF, "4 - Shotgun");
	    SendClientMessage(playerid, 0xCECECEFF, "5 - MP5");
	    SendClientMessage(playerid, 0xCECECEFF, "6 - AK47");
	    SendClientMessage(playerid, 0xCECECEFF, "7 - M4");
	    SendClientMessage(playerid, 0xCECECEFF, "8 - Sniper Rifle");
		SendClientMessage(playerid, 0xCECECEFF, "9 - Sawnoff");
		SendClientMessage(playerid, 0xCECECEFF, "10 - Combat SG");
		SendClientMessage(playerid, 0xCECECEFF, "11 - Micro Uzi");
	    SendClientMessage(playerid, 0x999999FF, "12 - ????");
	    return 1;
	}

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!(0 <= set_value <= 100)) return SendClientMessage(playerid, 0x999999FF, "???????? ?????? ?? 0 ?? 100");

	new tmp_skill_name[32], query[128];

	switch(set_code)
	{
		case 1:
	    {
	        SetPlayerData(to_player, P_SKILL_COLT, set_value);
			tmp_skill_name = "Colt 45";
			UpdatePlayerDatabaseInt(to_player, "skill_colt", set_value);
	    }
	    case 2:
	    {
	        SetPlayerData(to_player, P_SKILL_SDPISTOL, set_value);
			tmp_skill_name = "SD Pistol";
			UpdatePlayerDatabaseInt(to_player, "skill_sdpistol", set_value);
	    }
	    case 3:
	    {
	        SetPlayerData(to_player, P_SKILL_DEAGLE, set_value);
			tmp_skill_name = "Desert Eagle";
			UpdatePlayerDatabaseInt(to_player, "skill_deagle", set_value);
	    }
	    case 4:
	    {
	        SetPlayerData(to_player, P_SKILL_SHOTGUN, set_value);
			tmp_skill_name = "Shotgun";
			UpdatePlayerDatabaseInt(to_player, "skill_shotgun", set_value);
	    }
	    case 5:
	    {
	        SetPlayerData(to_player, P_SKILL_MP5, set_value);
			tmp_skill_name = "MP5";
			UpdatePlayerDatabaseInt(to_player, "skill_mp5", set_value);
	    }
	    case 6:
	    {
	        SetPlayerData(to_player, P_SKILL_AK47, set_value);
			tmp_skill_name = "AK47";
			UpdatePlayerDatabaseInt(to_player, "skill_ak47", set_value);
	    }
	    case 7:
	    {
	        SetPlayerData(to_player, P_SKILL_M4, set_value);
			tmp_skill_name = "M4";
			UpdatePlayerDatabaseInt(to_player, "skill_m4", set_value);
	    }
	    case 8:
	    {
	        SetPlayerData(to_player, P_SKILL_SNIPER_RIFLE, set_value);
			tmp_skill_name = "Sniper Rifle";
			UpdatePlayerDatabaseInt(to_player, "skill_sniper_rifle", set_value);
	    }
		case 9:
	    {
	        SetPlayerData(to_player, P_SKILL_SAWNOFF, set_value);
			tmp_skill_name = "Sawnoff";
			UpdatePlayerDatabaseInt(to_player, "skill_sawnoff", set_value);
	    }
		case 10:
	    {
	        SetPlayerData(to_player, P_SKILL_COMBAT_SG, set_value);
			tmp_skill_name = "Combat SG";
			UpdatePlayerDatabaseInt(to_player, "skill_combat_sg", set_value);
	    }
		case 11:
	    {
	        SetPlayerData(to_player, P_SKILL_MICRO_UZI, set_value);
			tmp_skill_name = "Micro Uzi";
			UpdatePlayerDatabaseInt(to_player, "skill_micro_uzi", set_value);
	    }
	    case 12:
	    {
	        SetPlayerData(to_player, P_POWER, set_value);
			tmp_skill_name = "????";
			UpdatePlayerDatabaseInt(to_player, "power", set_value);
	    }
	    default: return SendClientMessage(playerid, 0x999999FF, "??????? ?????? ??? ??????");
	}

	SetPlayerSkillsInit(to_player);

	format(query, sizeof query, "????????????? %s ??????? ??? ??????? ?????? %s ?? %d", GetPlayerNameEx(playerid), tmp_skill_name, set_value);
	SendClientMessage(to_player, 0x3399FFFF, query);

	format(query, sizeof query, "?? ???????? ?????? %s ??????? ?????? %s ?? %d", GetPlayerNameEx(to_player), tmp_skill_name, set_value);
	SendClientMessage(playerid, 0x66CC00FF, query);

	if(GetPlayerAdminEx(playerid) <= 5)
	{
		format(query, sizeof query, "[A] ????????????? %s[%d] ??????? %s[%d] ??????? ?????? %s ?? %d", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, tmp_skill_name, set_value);
		SendMessageToAdmins(query, 0x999999FF);
	}

	format(query, sizeof query, "??????? %s[acc:%d] ??????? ?????? %s ?? %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), tmp_skill_name, set_value);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, query);

	return 1;
}

CMD:admdown(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /admdown [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!GetPlayerAdminEx(to_player))
		return SendClientMessage(playerid, 0x999999FF, "????? ?? ?????????????");

	if(GetPlayerAdminEx(to_player) == 1)
		return SendClientMessage(playerid, 0x999999FF, "?????ù ???????? ?? 0 ?????ù. ??????????? /deladmin ??ù ??ù??ù");

	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	AddPlayerData(to_player, P_ADMIN, -, 1);
	UpdatePlayerDatabaseInt(to_player, "admin", GetPlayerAdminEx(to_player));

	new fmt_text[128];

	format(fmt_text, sizeof fmt_text, "??????? ????????????? %s[%d] ??????? ??? ??????? ?????????????? ?? %d",
	GetPlayerNameEx(playerid), playerid, GetPlayerAdminEx(to_player));

	SendClientMessage(to_player, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] ??????? ??????? ?????????????? %s[%d] ?? %d",
	GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, GetPlayerAdminEx(to_player));

	SendMessageToAdmins(fmt_text, 0xFF5533FF);

	format(fmt_text, sizeof fmt_text, "??????? %s[acc:%d] ?? ???. ?????ù %d",
	GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), GetPlayerAdminEx(to_player));

	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}

CMD:admup(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /admup [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!GetPlayerAdminEx(to_player))
		return SendClientMessage(playerid, 0x999999FF, "????? ?? ?????????????");

	if(GetPlayerAdminEx(to_player) > 4)
		return SendClientMessage(playerid, 0x999999FF, "?????ù ???????? ?????? ???? ?? 4 ?????ù");

	if(GetPlayerAdminEx(to_player) >= GetPlayerAdminEx(playerid))
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ???????? ??????? ? ???????? ??????????????");

	AddPlayerData(to_player, P_ADMIN, +, 1);
	UpdatePlayerDatabaseInt(to_player, "admin", GetPlayerAdminEx(to_player));

	new fmt_text[128];

	format(fmt_text, sizeof fmt_text, "????????????? %s[%d] ??????? ??? ??????? ?????????????? ?? %d",
	GetPlayerNameEx(playerid), playerid, GetPlayerAdminEx(to_player));

	SendClientMessage(to_player, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????? ??????? ?????????????? %s[%d] ?? %d",
	GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, GetPlayerAdminEx(to_player));

	SendMessageToAdmins(fmt_text, 0xFF5533FF);

	format(fmt_text, sizeof fmt_text, "??????? %s[acc:%d] ?? ???. ?????ù %d",
	GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), GetPlayerAdminEx(to_player));

	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}

CMD:deladmin(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /deladmin [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!GetPlayerAdminEx(to_player))
		return SendClientMessage(playerid, 0x999999FF, "????? ?? ?????????????");

	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	SetPlayerData(to_player, P_ADMIN, 0);
	UpdatePlayerDatabaseInt(to_player, "admin", 0);

	new fmt_text[128];

	format(fmt_text, sizeof fmt_text, "??????? ????????????? %s[%d] ??ù? ??? ? ????? ??????????????", GetPlayerNameEx(playerid), playerid);
	SendClientMessage(to_player, 0xFF5533FF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] ??ù? %s[%d] ? ????? ??????????????",
	GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);

	SendMessageToAdmins(fmt_text, 0xFF5533FF);

	format(fmt_text, sizeof fmt_text, "??ù? %s[acc:%d] ? ????? ??????????????", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}

CMD:setadmin(playerid, params[])
{
    new P_TARGET_PLAYER_ID;
    if(GetPlayerAdminEx(playerid) < 5)
        return SendClientMessage(playerid, 0xFFFFFFFF, "{FF0000}| {FFFFFF}???????? ?????? ??????? ?????????????.");

    extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "{ffff00}| {ffffff}???????????: {ffff00}/setadmin {ffffff}[id ??????]");

    if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
        return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

    if(playerid == to_player)
        return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

    if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
        return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

    g_player[playerid][P_TARGET_PLAYER_ID] = to_player;

    Dialog(playerid, DIALOG_SHABLON_CATEGORY, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{ffffff} | ???????? ??????",
    "{EB4C42}1.{FFFFFF}??????? ?????????????\n\
    {EB4C42}2.{FFFFFF}??????? ????ù???\n\
    {EB4C42}3.{FFFFFF}??????? ??????? ????ù???\n\
    {EB4C42}4.{FFFFFF}??????? ù??. ????????????\n\
    {EB4C42}5.{FFFFFF}??????? ??????? ?????????????\n\
    {EB4C42}6.{FFFFFF}??????? ?????? ù??????????ù", // ???????? ????? ????ù
    "???????", "???????");

    return 1;
}

CMD:sendcmd(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	extract params -> new to_player, string:c_command[20], string:c_params[128]; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sendcmd [id ??????] [???????] [?????????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	new fmt_text[144];

	if(strfind(c_command, "w        	") != -1
	|| strfind(c_command, "ban") != -1
	|| strfind(c_command, "offban") != -1
	|| strfind(c_command, "unban") != -1
	|| strfind(c_command, "unwarn") != -1
	|| strfind(c_command, "permban") != -1
	|| strfind(c_command, "jail") != -1
	|| strfind(c_command, "unjail") != -1
	|| strfind(c_command, "mute") != -1
	|| strfind(c_command, "unmute") != -1
	|| strfind(c_command, "warn") != -1)
	{
		//format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????ù ???????????? ?? ????? %s[%d] ???: /%s %s",
		//GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, c_command, c_params);

		SendMessageToAdmins(fmt_text, 0x999999FF, 5);

		return 1;
	}

	format(fmt_text, sizeof fmt_text, "cmd_%s", c_command);

	CallLocalFunction(fmt_text, "is", to_player, c_params);

	format(fmt_text, sizeof fmt_text, "???????? ?? ????? %s[acc:%d] ???: /%s %s", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), c_command, c_params);
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}


CMD:givecash(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4) return 1;

	extract params -> new to_player, cash; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /givecash [id ??????] [c????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!(-10_000_000 <= cash <= 10_000_000)) return SendClientMessage(playerid, 0xCECECEFF, "????? ???????? ?? 10.000.000 ?????? ?? ???? ???");

	new reason[144];
	format(reason, sizeof reason, "?????? ????? ?? ?????? %s", GetPlayerNameEx(playerid));
	GivePlayerMoneyEx(to_player, cash, reason, true, true);

	format(reason, sizeof reason, "????????????? %s ????? ??? %d ??????", GetPlayerNameEx(playerid), cash);
	SendClientMessage(to_player, 0xFFFFFFFF, reason);

	format(reason, sizeof reason, "[A] %s[%d] ????? ?????? %s[%d] ???-?? %d ???, ? ????? ? ?????? %d ???", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, cash, GetPlayerMoneyEx(to_player));
	SendMessageToAdmins(reason, 0x999999FF);

	format(reason, sizeof reason, "????? %s[acc:%d] %d ???", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), cash);
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, reason);

	return 1;
}
alias:givecash("givemoney")


CMD:givedonate(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	extract params -> new to_player, donate; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /givedonate [id ??????] [c????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!(-1 <= donate <= 10_000)) return SendClientMessage(playerid, 0xCECECEFF, "????? ???????? ?? 1 ?? 10000 ?????? ?? ???? ???");

	new reason[144];
	format(reason, sizeof reason, "?????? ?????? ?? ?????? %s", GetPlayerNameEx(playerid));
	GivePlayerDonateRub(to_player, donate, reason, true, true);

	format(reason, sizeof reason, "????????????? %s ????? ??? %d ??????", GetPlayerNameEx(playerid), donate);
	SendClientMessage(to_player, 0xFFFFFFFF, reason);

	format(reason, sizeof reason, "[A] %s[%d] ????? ?????-????? %s[%d] ? ???-?? %d ???, ? ????? ? ?????? %d ???",
	GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, donate, GetPlayerDonateRub(to_player));
	SendMessageToAdmins(reason, 0x999999FF);

	format(reason, sizeof reason, "????? %s[acc:%d] %d ??????", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), donate);
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, reason);

	return 1;
}

CMD:doubling(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	Dialog
	(
		playerid, DIALOG_SET_DOUBLING, DIALOG_STYLE_LIST,
		"{FFCC00}????????",
		"\
		1. ???????? ??????\n\
		2. ???????? ????? ?????\n\
		3. ???????? ???????? ?? ???????????\
		",
		"?????", "??????"
	);

	return 1;
}

CMD:setstats(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	extract params -> new to_player, set_code, set_value; else {

		SendClientMessage(playerid, 0xCECECEFF, "?????????????: /setstats [id ??????] [???] [????????]");
		SendClientMessage(playerid, 0xCECECEFF, "???: 1 - ??????? | 2 - ??????");

		return 1;
	}

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	new fmt_msg[128];

	switch(set_code)
	{
		case 1:
		{
			if(!(1 <= set_value <= 25)) return SendClientMessage(playerid, 0xFF6600FF, "??????? ?? 1 ?? 25");

			SetPlayerData(to_player, P_LEVEL, set_value);

			SetPlayerScore(to_player, set_value);

			format(fmt_msg, sizeof fmt_msg, "????????????? %s ??????? ??? ??????? ?? %d", GetPlayerNameEx(playerid), set_value);
			SendClientMessage(to_player, 0x3399FFFF, fmt_msg);

			format(fmt_msg, sizeof fmt_msg, "?? ???????? ?????? %s ??????? ?? %d", GetPlayerNameEx(to_player), set_value);
			SendClientMessage(playerid, 0x3399FFFF, fmt_msg);
		}
		case 2:
		{
			//if(!(0 <= set_value <= 6)) return SendClientMessage(playerid, 0xFF6600FF, "?? ?????? ?? 0 ?? 6");
			SetPlayerData(to_player, P_JOB, set_value);

			format(fmt_msg, sizeof fmt_msg, "????????????? %s ????????? ??? ?????? %s", GetPlayerNameEx(playerid), GetPlayerJobAndRankName(to_player));
			SendClientMessage(to_player, 0x3399FFFF, fmt_msg);

			format(fmt_msg, sizeof fmt_msg, "?? ?????????? ?????? %s ?????? %s", GetPlayerNameEx(to_player), GetPlayerJobAndRankName(to_player));
			SendClientMessage(playerid, 0x66CC00FF, fmt_msg);
		}
		default: return SendClientMessage(playerid, 0xFF6600FF, "??????: ??????? ?????? ???");
	}

	mysql_format(mysql, fmt_msg, sizeof fmt_msg, "UPDATE accounts SET level=%d,job=%d WHERE id=%d", GetPlayerLevel(to_player), GetPlayerJob(to_player), GetPlayerAccountID(to_player));
	mysql_query(mysql, fmt_msg, false);

	return 1;
}

CMD:pay(playerid, params[])
{
	extract params -> new to_player, cash; else return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /pay [id ??????] [?????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0))
		return SendClientMessage(playerid, 0x999999FF, ""USC"????? ????????ù ?????? ?? ???");

	new fmt_text[75],
		max_money = 50000;

	if(!(1 <= cash <= max_money))
	{
		format(fmt_text, sizeof fmt_text, ""USC"????? ?????? ???? ?? 1 ?? %d ??????", max_money);

		SendClientMessage(playerid, 0xCECECEFF, fmt_text);
		return 1;
	}

	format(fmt_text, sizeof fmt_text, "+%d", cash);
	SetPlayerChatBubble(to_player, fmt_text, 0x00CC00FF, 10.0, 5000);

	format(fmt_text, sizeof fmt_text, "-%d", cash);
	SetPlayerChatBubble(playerid, fmt_text, 0xFF6600FF, 10.0, 5000);

	format(fmt_text, sizeof fmt_text, "???????? ????? ?? %s", GetPlayerNameEx(playerid));
	GivePlayerMoneyEx(to_player, cash, fmt_text, true, true);

	format(fmt_text, sizeof fmt_text, "???????? ????? ?????? %s", GetPlayerNameEx(to_player));
	GivePlayerMoneyEx(playerid, -cash, fmt_text, true, true);

	format(fmt_text, sizeof fmt_text, "%s ??????? ??? ?????? %d ???", GetPlayerNameEx(playerid), cash);
	SendClientMessage(to_player, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "?? ???????? ?????? %s ?????? %d ???", GetPlayerNameEx(to_player), cash);
	SendClientMessage(playerid, 0x3399FFFF, fmt_text);

	Action(playerid, "?????? ??????? ? ??????? ??????", _, false);

	return 1;
}

CMD:agm(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 1)
        return ShowNotificationDefault(playerid, 2, 5, 2, 0, "? ??? ??? ??????? ? ????????????? ?????? ???????");

    new fmt_msg[128];
    if(GetPVarInt(playerid, "agm") == 0)
    {
        SetPVarInt(playerid, "agm", 1);
        SetPlayerHealth(playerid, 1000.0); // ?????? ??????? ????????

        // ????????? ?????? ????-???????????
        new timerid = SetTimerEx("AGM_HealthRestore", 500, true, "i", playerid);
        SetPVarInt(playerid, "agm_timer", timerid);

        SendClientMessage(playerid, -1, ""SC"?? ??????? {FFFF00}???????? {FFFFFF}???????????????? ??????????");
        format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ??????? ???????????????? ??????????", GetPlayerNameEx(playerid), playerid);
        SendMessageToAdmins(fmt_msg, 0x999999FF);
    }
    else
    {
        SetPVarInt(playerid, "agm", 0);
        SetPlayerHealth(playerid, 100.0);

        KillTimer(GetPVarInt(playerid, "agm_timer"));
        DeletePVar(playerid, "agm_timer");

        SendClientMessage(playerid, -1, ""SC"?? ??????? {FFFF00}????????? {FFFFFF}???????????????? ??????????");
        format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ???????? ???????????????? ??????????", GetPlayerNameEx(playerid), playerid);
        SendMessageToAdmins(fmt_msg, 0x999999FF);
    }
    return 1;
}

forward AGM_HealthRestore(playerid);
public AGM_HealthRestore(playerid)
{
    if(!IsPlayerConnected(playerid)) return;

    if(GetPVarInt(playerid, "agm") == 1)
    {
        new Float:hp;
        GetPlayerHealth(playerid, hp);

        if(hp < 100.0)
        {
            SetPlayerHealth(playerid, 100.0);
        }
    }
}

CMD:infocont(playerid)
{
	new stringcont[200];
	format(stringcont, sizeof(stringcont), "\
	{FFFFFF}??????????? ? ?????\t\t%d\n\
	{FFFF00}?????????? ??????ù???ù ?????? PayDay",
	cont1+cont3);
	ShowPlayerDialog(playerid, 0, DIALOG_STYLE_MSGBOX, "{4488FC}>> {FFFFFF}????", stringcont, "???ù???", "");
}
CMD:add_cont(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;
	SendClientMessage(playerid,-1, !"[?????????ù] {FFFFFF}?? ????????? ??????? ?????????");
	SendClientMessage(playerid,-1, !"[?????????ù] {FFFFFF}?? ????????? ??????? ?????????");
	cont1 +=5;
	SendClientMessageToAll(0xFFCD00FF, "{ffff00}[??????????] {FFFFFF}????? 10 ????? ???????ù ????? ?? ??????????(/gps-??????????ù)");
	cont3 +=5;
	return true;
}
CMD:az(playerid)
{
 if(GetPlayerAdminEx(playerid) < 1) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
 SetPlayerPos(playerid,294.680053,2139.920410,1765.466308);
 SetPlayerVirtualWorld(playerid,1);
 SetPlayerInterior(playerid,1);
    SendClientMessage(playerid,-1, !""SC"?? ???? ??????? ??????????????? ? ???? ?????????????.");
    SendClientMessage(playerid,-1, !""SC"????????????? ???ù??? ? ?? ????????? ? ?? ??????????.");
 return true;
}
CMD:debug(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;
	new string[32];
	format(string, sizeof(string), "Your virtual world: %i, %i", GetPlayerVirtualWorld(playerid),GetPlayerInterior(playerid));
	SendClientMessage(playerid, 0xFFFFFFFF, string);
	return 1;
}



CMD:apanel(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 7) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	Dialog
	(
		playerid, DIALOG_ADMIN_PANEL, DIALOG_STYLE_LIST,
		"{DC143C}"SERVER_NAME" {FFFFFF} -> ?????????? ????????.",
		"\
		{888888}| {FFFFFF} ?????? ???????????????\n\
		{888888}| {FFFFFF} ?????? ???????\n\
		{888888}| {FFFFFF} ù?????????? ???????\t\t\t{EB4C42}[1 ???]\n\
		{888888}| {FFFFFF} Whitelist\n\
		{888888}| {FFFFFF} ????????? ??????? ???????\t\t{EB4C42}[????]\n\
		{888888}| {FFFFFF} ????? ????? ??????(timer)\t\t{EB4C42}[??????? ??????]\n\
		{888888}| {FFFFFF}????? ????????\t\t\t{EB4C42}[ù???????]",
		"?????", "??????"
	);

	return 1;
}

CMD:sethelper(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
    if(GetPlayerAdminEx(playerid) < 3) return 1;

    extract params -> new to_player, level; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sethelper [id ??????] [???????: 1 ??? 2]");

    if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
        return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

    if(level < 1 || level > 2)
        return SendClientMessage(playerid, 0x999999FF, "??????? ?????? ???? 1 ??? 2");

    if(GetPlayerHelperEx(to_player))
        return SendClientMessage(playerid, 0x999999FF, "????? ??? ù??ù???ù ??????? ?????????");

    SetPlayerData(to_player, P_HELPER, level);
    UpdatePlayerDatabaseInt(to_player, "helper", level);

    new fmt_text[128], rank_text[32];
    rank_text = (level == 1) ? "????? ????????? 1-?? ?????ù" : "??????? ????? ?????????";

    format(fmt_text, sizeof fmt_text, "{1E90FF}?? ???? ????????? ?? ???? %s ??????????????? %s[%d]", rank_text, GetPlayerNameEx(playerid), playerid);
    SendClientMessage(to_player, 0x999999FF, fmt_text);

    format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] ???????? %s[%d] ?? ???? %s",
        GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, rank_text);
    SendMessageToAdmins(fmt_text, 0x999999FF);

    format(fmt_text, sizeof fmt_text, "???????? %s[acc:%d] ?? ???? %s", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), rank_text);
    SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

    return 1;
}

CMD:delhelper(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 3 ) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /delhelper [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!GetPlayerHelperEx(to_player))
		return SendClientMessage(playerid, 0x999999FF, "????? ?? ????? ?????????");
		
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	SetPlayerData(to_player, P_HELPER, 0);
	UpdatePlayerDatabaseInt(to_player, "helper", 0);

	new fmt_text[128];

	format(fmt_text, sizeof fmt_text, "??????? ????????????? %s[%d] ??ù? ??? ? ????? ????? ??????????", GetPlayerNameEx(playerid), playerid);
	SendClientMessage(to_player, 0xFF5533FF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] ??ù? %s[%d] ? ????? ????? ??????????",
	GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);

	SendMessageToAdmins(fmt_text, 0xFF5533FF);

	format(fmt_text, sizeof fmt_text, "??ù? %s[acc:%d] ? ????? ????? ??????????", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}

CMD:offdeladmin(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /offdeladmin [??? ??????]");

	extract params -> new string: player_name[21];

	if(IsPlayerConnected(GetPlayerID(player_name))) return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ????????ù ?? ???????");

	new query[144],
		Cache: result,
		rows,
		uid,
		//admin,
		uip[16];

	mysql_format(mysql, query, sizeof query, "SELECT id, admin, last_ip FROM accounts WHERE name='%s'", player_name);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	if(rows)
	{
		uid = cache_get_row_int(0, 0);
	//	admin = cache_get_row_int(0, 1);
		cache_get_row(0, 2, uip);
	}

	cache_delete(result);

	if(!rows || !uid) return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");


	cache_delete(result);


	format(query, sizeof query, "????????????? %s ??ù? %s ? ????? ??????????????[??????]", GetPlayerNameEx(playerid), player_name);

	SendMessageToAdmins(query, 0xFF5533FF);

	new id = GetPlayerID(player_name);
	if (id != INVALID_PLAYER_ID) {
		SetPlayerData(id, P_ADMIN, 0);
		UpdatePlayerDatabaseInt(id, "admin", 0);
	}
	mysql_format(mysql, query, sizeof query, "UPDATE `accounts` SER `admin`=0 WHERE `id`=%i LIMIT 1", uid);
	mysql_query(mysql, query, false);
	return 1;
}

CMD:offdelhelper(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 3) return 1;

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /offdelhelper [??? ??????]");

	extract params -> new string: player_name[21];

	if(IsPlayerConnected(GetPlayerID(player_name))) return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ????????ù ?? ???????");

	new query[144],
		Cache: result,
		rows,
		uid,
		//admin,
		uip[16];

	mysql_format(mysql, query, sizeof query, "SELECT id, admin, last_ip FROM accounts WHERE name='%s'", player_name);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	if(rows)
	{
		uid = cache_get_row_int(0, 0);
		//admin = cache_get_row_int(0, 1);
		cache_get_row(0, 2, uip);
	}

	cache_delete(result);

	if(!rows || !uid) return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");


	cache_delete(result);


	format(query, sizeof query, "????????????? %s ??ù? %s ? ????? ????? ??????????[??????]", GetPlayerNameEx(playerid), player_name);

	SendMessageToAdmins(query, 0xFF5533FF);

	new id = GetPlayerID(player_name);
	if (id != INVALID_PLAYER_ID) {
		SetPlayerData(id, P_HELPER, 0);
		UpdatePlayerDatabaseInt(id, "helper", 0);
	}
	mysql_format(mysql, query, sizeof query, "UPDATE `accounts` SER `helper`=0 WHERE `id`=%i LIMIT 1", uid);
	mysql_query(mysql, query, false);
	return 1;
}

CMD:topmoney(playerid)
{
	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY money DESC LIMIT 10");
	mysql_tquery(mysql, string, "TopMoney", "d",playerid);

	return 1;
}

public: TopMoney(playerid)
{
	new name[24], cash,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			cash = 0;
			cache_get_field_content(i, "name", name, mysql);
			cash = cache_get_field_content_int(i, "money", mysql);
			format(string, sizeof(string), "%s\n"c_b"???: "c_server"%s\t "c_b"| \t"c_b"?????: "c_server"%d", string, name, cash);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "ù?? 10 ??????? ?? ???????", string, "???????", "");

	return 1;
}

CMD:history(playerid, params[])
{
	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /history [??ù ??????]");

	if(!(3 <= strlen(params) <= 20))
		return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");

	extract params -> new string: name[21];

	new query[128];
	new Cache: result, user_id;

	mysql_format(mysql, query, sizeof query, "SELECT id FROM accounts WHERE name='%e' LIMIT 1", name);
	result = mysql_query(mysql, query);

	if(cache_num_rows())
		user_id = cache_get_row_int(0, 0);

	cache_delete(result);

	if(!user_id)
		return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ?????? ?? ??????");

	format(query, sizeof query, "SELECT name FROM change_names WHERE owner_id=%d ORDER BY id DESC LIMIT 45", user_id);
	mysql_tquery(mysql, query, "ShowChangeNameHistory", "is", playerid, name);

	return 1;
}

CMD:call(playerid, params[])
{
	if(!GetPlayerPhone(playerid))
		return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");

	if(GetPlayerPhoneCall(playerid, PC_INCOMING_PLAYER) != INVALID_PLAYER_ID || GetPlayerPhoneCall(playerid, PC_OUTCOMING_PLAYER) != INVALID_PLAYER_ID)
		return SendClientMessage(playerid, 0x999999FF, "????????? ??????? ????????");

	if(!GetPlayerPhoneCall(playerid, PC_ENABLED))
		return SendClientMessage(playerid, 0x999999FF, "??? ??????? ????????");

	if(GetPlayerData(playerid, P_PHONE_BALANCE) >= 5)
	{
		new number;
		if(sscanf(params, "d", number))
		{
			Dialog
			(
				playerid, DIALOG_PHONE_CALL, DIALOG_STYLE_INPUT,
				"{FFCD00}???????? ?????",
				"{6699CC}?????? ??????????????? ?????:\n\n\
				{FFFFFF}??????ù\t\t\t{66CC00}02\n\
				{FFFFFF}?????ù ??????\t\t{66CC00}03\n\
				{FFFFFF}ù????\t\t\t\t{66CC00}555\n\
				{FFFFFF}???????\t\t\t{66CC00}090\n\
				{FFFFFF}???????? ??ù??\t\t{66CC00}111",
				"?????????", "??????"
			);
			return 1; // (TODO)
		}

		switch(number)
		{
			case 02: return 1;
			case 03: return 1;
			case 555: return 1;
			case 090: return 1;
			case 111:
			{
				new fmt_str[175];
				SetPlayerPhoneUseState(playerid, true);

				format
				(
					fmt_str, sizeof fmt_str,
					"{FFFFFF}????????????! ?? ????????? ?????????.\n"\
					"?? ????? ?????? ?????????? ???????? {00FF00}%d ???\n\n"\
					"{FFFFFF}????????? ??? ????? ? ????? ?????????.\n"\
					"????? ???????!",
					GetPlayerData(playerid, P_PHONE_BALANCE)
				);
				Dialog(playerid, DIALOG_PHONE_CALL_BALANCE, DIALOG_STYLE_MSGBOX, "{FFCD00}???????? ??????? ??ù??", fmt_str, "??", "??????");
			}

			default:
			{
				new subscriber = GetPlayerIDByPhone(number);

				if(number < 1)
					return SendClientMessage(playerid, 0x999999FF, "?????? ????? ?? ????????????ù");

				if(subscriber == INVALID_PLAYER_ID)
					return SendClientMessage(playerid, 0xCECECEFF, "????????? ???? ????? ?? ????????????ù");

				if(subscriber == playerid || GetPlayerPhoneCall(subscriber, PC_INCOMING_PLAYER) != INVALID_PLAYER_ID || GetPlayerPhoneCall(subscriber, PC_OUTCOMING_PLAYER) != INVALID_PLAYER_ID)
					return SendClientMessage(playerid, 0x999999FF, "??????? ???ù?");

				if(!GetPlayerPhoneCall(subscriber, PC_ENABLED))
					return SendClientMessage(playerid, 0x999999FF, "ù?????? ???????? ??? ???? ???????");

				SetPlayerPhoneCall(playerid, PC_OUTCOMING_PLAYER, subscriber);
				SetPlayerPhoneCall(subscriber, PC_INCOMING_PLAYER, playerid);

				new fmt_str[90];

				format(fmt_str, sizeof fmt_str, "{FFFFFF}?????ù??? ?????? | ?????:{ffff00}%d {FFFFFF}| ???????? ?????? ?? %s", number, GetPlayerNameEx(subscriber));
				SendClientMessage(playerid, 0x66CC00FF, fmt_str);

				format(fmt_str, sizeof fmt_str, "{FFFFFF}????ù??? ?????? | ?????:{ffff00}%d {FFFFFF}| ????????{ffff00} %s", GetPlayerPhone(playerid), GetPlayerNameEx(playerid));
				SendClientMessage(subscriber, 0x3399FFFF, fmt_str);

				SendClientMessage(subscriber, 0xFFFFFFFF, "??????????? {ffff00}/p {FFFFFF}????? ???????? ??? {ffff00}/h {FFFFFF}????? ????????? ?????.");
				SetPlayerPhoneUseState(playerid, true);
			}
		}
	}
	else
	{
		SendClientMessage(playerid, 0xCECECEFF, "?? ????? ???????????? ???????");
		SendClientMessage(playerid, 0xCECECEFF, "????????? ????????? ??????? ????? ? ????? ?????????");
	}

	return 1;
}
alias:call("c")

CMD:p(playerid, params[])
{
	if(GetPlayerPhoneCall(playerid, PC_TIME) != -1) return 1;

	new caller = GetPlayerPhoneCall(playerid, PC_INCOMING_PLAYER);
	if(caller != INVALID_PLAYER_ID)
	{
		SetPlayerPhoneCall(caller, PC_TIME, 0);
		SetPlayerPhoneCall(playerid, PC_TIME, 0);

		new fmt_str[64];
		format(fmt_str, sizeof fmt_str, "{FFFFFF}?? ???????? ?? ?????? {ffff00} %s", GetPlayerNameEx(caller));
		SendClientMessage(playerid, 0xDD90FFFF, fmt_str);

		format(fmt_str, sizeof fmt_str, "{ffff00} %s {FFFFFF}??????? ?? ??? ??????", GetPlayerNameEx(playerid));
		SendClientMessage(caller, 0xDD90FFFF, fmt_str);

		SetPlayerPhoneUseState(playerid, true, false);
	}
	else SendClientMessage(playerid, 0xCECECEFF, "??? ????ù??? ???????");

	return 1;
}

CMD:h(playerid, params[])
{
	new caller = GetPlayerPhoneCall(playerid, PC_INCOMING_PLAYER);
	new call_to = GetPlayerPhoneCall(playerid, PC_OUTCOMING_PLAYER);

	if(call_to != INVALID_PLAYER_ID)
	{
		if(GetPlayerPhoneCall(call_to, PC_INCOMING_PLAYER) == playerid)
		{
			ClearPlayerPhoneCall(call_to);
			SendClientMessage(call_to, 0xFF9944FF, "{ffff00}| {FFFFFF}?????? ???????");

			SetPlayerPhoneUseState(call_to, false);
		}
		SendClientMessage(playerid, 0xFF9944FF, "{ffff00}| {FFFFFF}?????? ???????");
	}
	else if(caller != INVALID_PLAYER_ID)
	{
		if(GetPlayerPhoneCall(caller, PC_OUTCOMING_PLAYER) == playerid)
		{
			ClearPlayerPhoneCall(caller);
			SendClientMessage(caller, 0xFF9944FF, "{ffff00}| {FFFFFF}?????? ???????");

			SetPlayerPhoneUseState(caller, false);
		}
		if(GetPlayerPhoneCall(playerid, PC_TIME) != -1)
		{
			SendClientMessage(playerid, 0xFF9944FF, "{ffff00}| {FFFFFF}?????? ???????");
		}
		else SendClientMessage(playerid, 0xFF9944FF, "{ffff00}| {FFFFFF}?? ????????? ????ù??? ?????");
	}
	else return 1;

	ClearPlayerPhoneCall(playerid);
	SetPlayerPhoneUseState(playerid, false);

	return 1;
}

CMD:sms(playerid, params[])
{
	if(!GetPlayerPhone(playerid))
		return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");

	if(!GetPlayerPhoneCall(playerid, PC_ENABLED))
		return SendClientMessage(playerid, 0x999999FF, "??? ??????? ????????");

	if(GetPlayerData(playerid, P_PHONE_BALANCE) >= 5)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sms [????? ????????] [?????????]");

		extract params -> new number, string:message[66];

		if(IsAIP(message))
		{
	   		SendClientMessage(playerid, -1, "?????????ù ? ???????!");
	       	return false;
	    }

		if(number < 550)
			return SendClientMessage(playerid, 0x999999FF, "?????? ????? ?? ????????????ù");

		new subscriber = GetPlayerIDByPhone(number);

		if(subscriber != INVALID_PLAYER_ID)
		{
			if(!GetPlayerPhoneCall(subscriber, PC_ENABLED))
				return SendClientMessage(playerid, 0x999999FF, "?? ??????ù ????????? ?????????. ù?????? ???????? ??????????");

			if(!strlen(message))
				return SendClientMessage(playerid, 0xCECECEFF, "??????? ????????? ??ù ????????");

			if(strlen(message) > 64)
				return SendClientMessage(playerid, 0xCECECEFF, "??????? ??????? ?????????");

			AddPlayerData(playerid, P_PHONE_BALANCE, -, 5);
			GameTextForPlayer(playerid, "SMS ~n~~y~-5 rub", 4000, 1);

			new fmt_str[128];

			format(fmt_str, sizeof fmt_str, "SMS: %s | ???????????: %s [?.%d]", message, GetPlayerNameEx(playerid), GetPlayerPhone(playerid));
			SendClientMessage(subscriber, 0xFFFF00FF, fmt_str);
			SetPlayerChatBubble(subscriber, "SMS <<", 0xFFFF00FF, 5.0, 1500);

			format(fmt_str, sizeof fmt_str, "SMS: %s | ??????????: %s [?.%d]", message, GetPlayerNameEx(subscriber), GetPlayerPhone(subscriber));
			SendClientMessage(playerid, 0xFFFF00FF, fmt_str);
			SetPlayerChatBubble(playerid, "SMS >>", 0xFFFF00FF, 5.0, 1500);

			format(fmt_str, sizeof fmt_str, "UPDATE accounts SET phone_balance=%d WHERE id=%d LIMIT 1", GetPlayerData(playerid, P_PHONE_BALANCE), GetPlayerAccountID(playerid));
			mysql_tquery(mysql, fmt_str, "", "");

			if(g_admin_ears)
			{
				format(fmt_str, sizeof fmt_str, "[A] SMS: %s | ?? %s[%d] ? %s[%d]", message, GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(subscriber), subscriber);
				SendMessageToAdmins(fmt_str, 0xFFFF00FF);
			}

			format(fmt_str, sizeof fmt_str, "??ù %s[acc:%d]: %s", GetPlayerNameEx(subscriber), GetPlayerAccountID(subscriber), message);
			SendLog(playerid, LOG_TYPE_SMS_CHAT, fmt_str);
		}
		else SendClientMessage(playerid, 0x999999FF, "ù?????? ????????ù ??? ???? ???????");
	}
	else
	{
		SendClientMessage(playerid, 0xCECECEFF, "?? ????? ???????????? ???????");
		SendClientMessage(playerid, 0xCECECEFF, "????????? ????????? ??????? ????? ? ????? ?????????");
	}
	return 1;
}

CMD:eject(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);

	if(!vehicleid || !IsPlayerDriver(playerid))
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????? ?? ????? ??????????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0x999999FF, "???????????: /eject [id ??????]");

	extract params -> new to_player;

	if(vehicleid != GetPlayerVehicleID(to_player) || playerid == to_player)
		return SendClientMessage(playerid, 0x999999FF, "????? ?????? ?????? ? ????? ??????????");

	RemovePlayerFromVehicle(to_player);

	new fmt_str[64];
	format(fmt_str, sizeof fmt_str, "%s ??????? ??? ?? ?????? ??????????", GetPlayerNameEx(playerid));
	SendClientMessage(to_player, 0x3399FFFF, fmt_str);

	format(fmt_str, sizeof fmt_str, "?? ???????? %s ?? ?????? ??????????", GetPlayerNameEx(to_player));
	SendClientMessage(playerid, 0x3399FFFF, fmt_str);

	return 1;
}

CMD:book(playerid, params[])
{
	if(!GetPlayerPhone(playerid))
		return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");

	return ShowPlayerPhoneBook(playerid);
}

CMD:add(playerid, params[])
{
	if(!GetPlayerPhone(playerid))
		return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /add [id ??????] [????? ????????]");

	extract params -> new to_player, string: number[10];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!IsPlayerPhoneBookInit(playerid))
		InitPlayerPhoneBook(playerid);

	if(GetPlayerPhoneBookContacts(playerid) >= MAX_PHONE_BOOK_CONTACTS)
		return SendClientMessage(playerid, 0xCECECEFF, "???????ù ?????? ?????????. ??????? ???????? ????????");

	if((3 <= strlen(number) <= 9) && IsNumeric(number) && strval(number) > 0)
		return AddPhoneBookContact(playerid, GetPlayerNameEx(to_player), number);

	SetPVarString(playerid, "add_contact_name", GetPlayerNameEx(to_player));
	new fmt_str[64 + 1];

	format(fmt_str, sizeof fmt_str, "{FFFFFF}??????? ????? ???????? ??ù ???????? %s", GetPlayerNameEx(to_player));
	return Dialog(playerid, DIALOG_PHONE_BOOK_ADD_CONTACT, DIALOG_STYLE_INPUT, "{FFCD00}?????????? ?????? ????????", fmt_str, "????????", "??????");
}

CMD:buyfuelst(playerid, params[])
{
	if(GetPlayerFuelStation(playerid) != -1)
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???? ????????. ????? ?????? ?????? ?????????? ??????? ??????");

	new stationid = GetNearestFuelStation(playerid, 10.0);
	if(stationid != -1)
	{

//		if(!PlayerTotalOnline(playerid, 5))
//			return SendClientMessage(playerid, 0x999999FF, "??ù ??????? ??????? ?????????? ???????? 5 ?????");

		SetPVarInt(playerid, "buy_fuel_st", stationid);

		new fmt_str[256];
		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}????????:\t\t\t{339999}%s\n"\
			"{FFFFFF}?????????:\t\t\t{6699FF}%d ???\n"\
			"{FFFFFF}????? ?? ??????:\t\t{6699FF}%d ??? ? ????\n\n"\
			"{669966}?? ??????? ??? ?????? ?????? ??? ?????????",
			GetFuelStationData(stationid, FS_NAME),
			GetFuelStationData(stationid, FS_PRICE),
			GetFuelStationData(stationid, FS_RENT_PRICE)
		);
		Dialog(playerid, DIALOG_FUEL_STATION_BUY, DIALOG_STYLE_MSGBOX, "{33AACC}??????? ??????????? ???????", fmt_str, "??", "???");
	}
	else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ???? ?ù??? ? ?????????, ??????? ?????? ??????");

	return 1;
}

CMD:fuelst(playerid, params[])
{
	new stationid = GetPlayerFuelStation(playerid);
	if(stationid != -1)
	{
		new fmt_str[1024];
		new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];
		GetCityName(GetFuelStationData(stationid, FS_POS_X), GetFuelStationData(stationid, FS_POS_Y), city);
		GetAreaName(GetFuelStationData(stationid, FS_POS_X), GetFuelStationData(stationid, FS_POS_Y), area);
		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}????????:\t\t\t\t{339999}%s\n"\
			"{FFFFFF}????? ????????:\t\t\t%d\n"\
			"????????:\t\t\t\t%s\n"\
			"????? / ???????:\t\t\t%s\n"\
			"?????:\t\t\t\t\t%s\n"\
			"??????? ?????????:\t\t\t%d\n"\
			"?????????? ???????:\t\t\t{66CC00}%d {FFFFFF}?? {EB4C42}%d\n"\
			"{FFFFFF}???? ???????:\t\t\t92:50|95:50|98:50|100:50|?ù:50\n"\
			"?????????ù ????:\t\t\t%d ??? ?? 1 ?\n"\
			"?????? ???:\t\t\t%d ???\n"\
			"??? ?????????? ??:\t\t\t{66CC00}%d {FFFFFF}?? {EB4C42}30 {FFFFFF}????\n"\
			"???. ?????????:\t\t\t%d ???\n"\
			"?????? ??????????:\t\t\t%d ??? ? ????\n"\
			"???????? ????:\t\t\t%s\n"\
			"??????:\t\t\t\t\t%s\n\n"\
			"{669966}??ù ???????ù ?????? ?????????ù ??????????? ????????\n"\
			"??????? ?????? \"????????\"",
			GetFuelStationData(stationid, FS_NAME),
			stationid,
			GetFuelStationData(stationid, FS_OWNER_NAME),
			city,
			area,
			GetFuelStationData(stationid, FS_IMPROVEMENTS),
			GetFuelStationData(stationid, FS_FUELS),
			GetFuelStationMaxFuel(stationid),
			GetFuelStationData(stationid, FS_BUY_FUEL_PRICE),
			GetFuelStationData(stationid, FS_BALANCE),
			GetFuelStationData(stationid, FS_RENT_DATE) <= gettime() ? 0 :
			GetElapsedTime(GetFuelStationData(stationid, FS_RENT_DATE), gettime(), CONVERT_TIME_TO_DAYS),
			GetFuelStationData(stationid, FS_PRICE),
			GetFuelStationData(stationid, FS_IMPROVEMENTS) < 4 ? GetFuelStationData(stationid, FS_RENT_PRICE) : GetFuelStationData(stationid, FS_RENT_PRICE) / 2,
			GetFuelStationData(stationid, FS_IMPROVEMENTS) < 4 ? ("????????ù") : ("?? ????????ù"),
			GetFuelStationData(stationid, FS_LOCK_STATUS) ? ("{CC3333}??????ù ???????") : ("{66CC33}??????ù ???????")
		);
		Dialog(playerid, DIALOG_FUEL_STATION_INFO, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{ffffff} -> ?????????ù ? ????????", fmt_str, "????????", "??????");
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????");

	return 1;
}

CMD:sellfuelst(playerid, params[])
{
	new stationid = GetPlayerFuelStation(playerid);
	if(stationid != -1)
	{
		Dialog
		(
			playerid, DIALOG_FUEL_STATION_SELL, DIALOG_STYLE_MSGBOX,
			"{FFCD00}??????? ??????????? ???????",
			"{FFFFFF}?? ??????? ??? ?????? ??????? ???? ??????????? ??????? ????????????\n\n"\
			"??? ????? ?????????? ?? ????????? ?? ??????? 30%\n"\
			"ù???? ????? ?????????? 60% ?? ????????? ????????? ?????????\n\n"\
			"???? ?? ?????? ??????? ??????????? ??????? ??????? ??????,\n"\
			"??????????? ??????? /sellmyfuelst",
			"??", "???"
		);
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????");

	return 1;
}

CMD:sellmyfuelst(playerid, params[])
{
	new stationid = GetPlayerFuelStation(playerid);
	if(stationid != -1)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sellmyfuelst [id ??????] [?????????]");

		extract params -> new to_player, price;

		if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
			return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

		if(price < 1)
			return SendClientMessage(playerid, 0xCECECEFF, "??????? ????????? ???????");

		new Float: f_pos_x = GetFuelStationData(stationid, FS_POS_X);
		new Float: f_pos_y = GetFuelStationData(stationid, FS_POS_Y);
		new Float: f_pos_z = GetFuelStationData(stationid, FS_POS_Z);

		if(GetPlayerMoneyEx(to_player) < price)
			return SendClientMessage(playerid, 0xCECECEFF, "? ?????????ù ??? ?????? ?????????? ???????");

		if(!(IsPlayerInRangeOfPoint(playerid, 10.0, f_pos_x, f_pos_y, f_pos_z) && IsPlayerInRangeOfPoint(to_player, 10.0, f_pos_x, f_pos_y, f_pos_z)))
			SendClientMessage(playerid, 0xCECECEFF, "?? ? ?????????? ?????? ?????????ù ?ù??? ? ????????? ??????? ?????? ???????");

		SendPlayerOffer(playerid, to_player, OFFER_TYPE_SELL_FUEL_ST, stationid);
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????");

	return 1;
}

CMD:fuel(playerid, params[])
{
	new fmt_str[41];
	new string[40 * (MAX_FUEL_STATIONS+2) + 1] = "? ???\t\t????????? 1 ?\t\t? ???????\t\t???????? ???\n\n{FFFFFF}";

	for(new idx; idx < g_fuel_station_loaded; idx ++)
	{
		format(fmt_str, sizeof fmt_str, "%d\t\t\t%d ???\t\t%d ?\t\t%s\n", idx, GetFuelStationData(idx, FS_FUEL_PRICE), GetFuelStationData(idx, FS_FUELS), GetFuelStationData(idx, FS_NAME));
		strcat(string, fmt_str);
	}
	return Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_LIST, "{FFCD00}??????????? ???????", string, "???????", "");
}

CMD:buyrepaircar(playerid, params[])
{
    ShowPlayerBuyRepairCarDialog(playerid, GetNearestFuelStation(playerid, 10.0));
}

CMD:buyfuel(playerid, params[])
{
	ShowPlayerBuyJerricanDialog(playerid, GetNearestFuelStation(playerid, 10.0));

	return 1;
}

CMD:fill(playerid, params[])
{
	if(GetPlayerJob(playerid) != JOB_MECHANIC)
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "?????????????: /fill [id ??????] [???-?? ???????] [?????????]");

	extract params -> new to_player, fill_fuel_count, fill_price;

	if(!IsPlayerConnected(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 15.0))
		return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	if(!IsPlayerDriver(to_player))
		return SendClientMessage(playerid, 0x999999FF, "?????? ?????? ?????????ù ?? ?????");

	if(1 <= GetPlayerJobLoadItems(playerid) <= fill_fuel_count)
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ?????? ?????????? ???????");

	if(!(1 <= fill_price <= 1500))
		return SendClientMessage(playerid, 0xCECECEFF, "????????? ?????? ???? ?? 1500 ??????");

	if(GetPlayerMoneyEx(to_player) < fill_price)
		return SendClientMessage(playerid, 0xCECECEFF, "? ??????? ??? ? ????? ??????? ?????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_FILL_CAR, fill_fuel_count, fill_price);
	return 1;
}

CMD:repair(playerid, params[])
{
	if(GetPlayerJob(playerid) != JOB_MECHANIC)
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????????");

	if(!IsPlayerInJob(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ???????? ?????????????");

	new job_car = GetPlayerJobCar(playerid);
	if(!IsPlayerInVehicle(playerid, job_car) || GetVehicleData(job_car, V_ACTION_ID) == VEHICLE_ACTION_ID_NONE)
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ???????? ????????????? ? ?????????ù ? ??????? ??????????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "?????????????: /repair [id ??????] [?????????]");

	extract params -> new to_player, repair_price;

	if(!IsPlayerConnected(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 15.0))
		return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	if(!IsPlayerDriver(to_player))
		return SendClientMessage(playerid, 0x999999FF, "?????? ?????? ?????????ù ?? ?????");

	new Float: vehicle_health;
	GetVehicleHealth(GetPlayerVehicleID(to_player), vehicle_health);
	if(vehicle_health < 350.0 && !IsPlayerInRangeOfPoint(playerid, 80.0, 1180.0962,2500.5166,12.4769)) return SendClientMessage(playerid, 0xCECECEFF, "ù???????? ??????? ????? ?????? ?????????, ???????? ??? ?? ???ù??? ????????????? {CCCC00}(/gps)");

	if(!(1 <= repair_price <= 8000))
		return SendClientMessage(playerid, 0xCECECEFF, "????????? ?????? ???? ?? 8000 ??????");

	if(GetPlayerMoneyEx(to_player) < repair_price)
		return SendClientMessage(playerid, 0xCECECEFF, "? ??????? ??? ? ????? ??????? ?????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_REPAIR_CAR, repair_price);
	return 1;
}

CMD:getfuel(playerid, params[])
{
	if(GetPlayerJob(playerid) != JOB_MECHANIC)
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????????");

	if(!IsPlayerInJob(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ???????? ?????????????");

	new job_car = GetPlayerJobCar(playerid);
	if(!IsPlayerInVehicle(playerid, job_car) || GetVehicleData(job_car, V_ACTION_ID) == VEHICLE_ACTION_ID_NONE)
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ???????? ????????????? ? ?????????ù ? ??????? ??????????");

	new stationid = GetNearestFuelStation(playerid, 10.0);
	if(stationid != -1)
	{
		SetPVarInt(playerid, "nearest_fuel_st", stationid);

		if(IsFuelStationOwned(stationid))
		{
			if(GetFuelStationData(stationid, FS_FUELS) < 10)
				return SendClientMessage(playerid, 0xFF6600FF, "????????? ???? ??? ?????");
		}

		new fmt_str[150];
		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}ù?????? ?? ???:\t\t%d/10000 ?\n"\
			"????????? 1 ?????:\t%d ???\n\n"\
			"??????? ???-?? ???????, ??????? ?????? ????????\n"\
			"(????? ?????? ???? ??????? 10)",
			GetFuelStationData(stationid, FS_FUELS),
			GetFuelStationData(stationid, FS_FUEL_PRICE)
		);
		Dialog(playerid, DIALOG_FUEL_STATION_BUY_FUEL_M, DIALOG_STYLE_INPUT, "{FFCD00}??????? ???????", fmt_str, "??????", "??????");
	}
	else SendClientMessage(playerid, 0xCECECEFF, "?????????? ??? ??????????? ???????");

	return 1;
}

CMD:rentcar(playerid, params[])
{
	if(GetPlayerRentCar(playerid) != INVALID_VEHICLE_ID && playerid == rent_cars_data[GetPlayerRentCar(playerid) - first_rent_car_id][rent_car_tenant_id])
		return SendClientMessage(playerid, 0xFF6600FF, "??????????? /unrent ????? ????????? ??????? ??????? ??????");

	new vehicleid = GetPlayerVehicleID(playerid);
	if(GetVehicleData(vehicleid, V_ACTION_TYPE) != VEHICLE_ACTION_TYPE_RENT_CAR)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ???? ? ??????, ??????? ????? ??????????");

	SetPlayerData(playerid, P_RENT_CAR, vehicleid);
	rent_cars_data[vehicleid - first_rent_car_id][rent_car_tenant_id] = playerid;

	Dialog(playerid, -1, DIALOG_STYLE_MSGBOX, " ", " ", " ", " ");

	SendClientMessage(playerid, 0x66CC00FF, "?? ??ù?? ????????? ? ??????");
	SendClientMessage(playerid, -1, "??????????? {00CC66}/lock 2 {FFFFFF}??ù ???????ù ? ???????ù ??????");
	SendClientMessage(playerid, -1, "????? ????????? ??????? ?????? ??????? {00CC66}/unrent");
	SendClientMessage(playerid, 0x999999FF, "???? ?? ???????? ? ???????? ??? ????????? ?????????");
	SendClientMessage(playerid, 0x999999FF, "ù? ??????? ????? ??????????. ???? ?? ?? ???????? ?????????");
	SendClientMessage(playerid, 0x999999FF, "ù? ??? ????? ?????????? ?????? ????? ? ?? ?????ù??? ???");

	TogglePlayerControllable(playerid, true);

	return 1;
}

CMD:unrent(playerid, params[])
{
	new vehicleid = GetPlayerRentCar(playerid);
	if(!(vehicleid != INVALID_VEHICLE_ID && playerid == rent_cars_data[vehicleid - first_rent_car_id][rent_car_tenant_id]))
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???????? ?????? ??????????");

	if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
		RemovePlayerFromVehicle(playerid);

	SetPlayerData(playerid, P_RENT_CAR, INVALID_VEHICLE_ID);
	rent_cars_data[vehicleid - first_rent_car_id][rent_car_tenant_id] = INVALID_PLAYER_ID;

	SendClientMessage(playerid, 0xFFFF00FF, "??????? ?????? ?????????? ??????????");
	return 1;
}

CMD:unfcar(playerid)
{
    new vehicleid = GetPlayerData(playerid, P_FRACTION_CAR);
	if (vehicleid == INVALID_VEHICLE_ID) {
		return;
	}
    if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_ORG_CAR)
    {
        SetPlayerData(playerid, P_FRACTION_CAR, INVALID_VEHICLE_ID);
        DestroyDeliveryVehicle(vehicleid);
        SendClientMessage(playerid, -1, ""SC"?? ??????? ?????????!");
    }
    else
    	SendClientMessage(playerid, -1, ""USC"?? ?? ????? ?????????");
}

CMD:business(playerid, params[])
{
	new businessid = GetPlayerBusiness(playerid);
	if(businessid != -1)
	{
		static const
			music_name[6][9] = {"????????", "???? 1", "???? 2", "???? 3", "???? 4", "???? 5"};

		if(GetBusinessData(businessid, B_ENTER_MUSIC) > sizeof music_name - 1)
		{
			SetBusinessData(businessid, B_ENTER_MUSIC, sizeof music_name - 1);
		}

		new fmt_str[1024];
		new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];
		GetCityName(GetBusinessData(businessid, B_POS_X), GetBusinessData(businessid, B_POS_Y), city);
		GetAreaName(GetBusinessData(businessid, B_POS_X), GetBusinessData(businessid, B_POS_Y), area);
		format
		(
			fmt_str, sizeof fmt_str,
			"{FFFFFF}????????:\t\t\t\t{339999}%s\n"\
			"{FFFFFF}????? ???????:\t\t\t%d\n"\
			"????????:\t\t\t\t%s\n"\
			"????? / ???????:\t\t\t%s\n"\
			"?????:\t\t\t\t\t%s\n"\
			"????? ?? ????:\t\t\t%d ???\n"\
			"?????????? ?????????:\t\t{66CC00}%d {FFFFFF}?? {EB4C42}%d\n"\
			"????????? 1 ????????:\t\t%d ???\n"\
			"??????? ?????????:\t\t\t%d\n"\
			"?????? ???????ù??ù:\t\t\t%d ???\n"\
			"?????? ????????? ??:\t\t{66CC00}%d {FFFFFF}?? {EB4C42}30 {FFFFFF}????\n"\
			"{FFFFFF}???? ??? ?????:{EB4C42}\t\t\t{%s}%s\n"\
			"{FFFFFF}???. ?????????:\t\t\t%d ???\n"\
			"?????? ????????ù:\t\t\t%d ??? ? ????\n"\
			"ù?? ??????:\t\t\t\t%s\n"\
			"??????:\t\t\t\t\t%s\n\n"\
			"{669966}??ù ???????ù ?????? ?????????ù ????? ????????\n"\
			"??????? ?????? \"????????\"",
			GetBusinessData(businessid, B_NAME),
			businessid,
			GetBusinessData(businessid, B_OWNER_NAME),
			city,
			area,
			GetBusinessData(businessid, B_ENTER_PRICE),
			GetBusinessData(businessid, B_PRODS),
			GetBusinessMaxProd(businessid),
			GetBusinessData(businessid, B_PROD_PRICE),
			GetBusinessData(businessid, B_IMPROVEMENTS),
			GetBusinessData(businessid, B_BALANCE),
			GetBusinessData(businessid, B_RENT_DATE) <= gettime() ? 0 :
			GetElapsedTime(GetBusinessData(businessid, B_RENT_DATE), gettime(), CONVERT_TIME_TO_DAYS),
			!GetBusinessData(businessid, B_ENTER_MUSIC) ? ("FF3333") : ("33CC00"),
			music_name[GetBusinessData(businessid, B_ENTER_MUSIC)],
			GetBusinessData(businessid, B_PRICE),
			GetBusinessData(businessid, B_IMPROVEMENTS) < 3 ? (GetBusinessData(businessid, B_RENT_PRICE)) : (GetBusinessData(businessid, B_RENT_PRICE) / 2),
			GetBusinessData(businessid, B_IMPROVEMENTS) < 3 ? ("?????ù") : ("???????ù"),
			GetBusinessData(businessid, B_LOCK_STATUS) ? ("{CC3333}?????? ??????") : ("{66CC33}?????? ??????")
		);
		Dialog(playerid, DIALOG_BIZ_INFO, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{ffffff} -> ?????????ù ? ???????", fmt_str, "????????", "??????");
		
		//CreateBusinessMenuTextDraws(playerid);
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???????");

	return 1;
}


CMD:sellbiz(playerid, params[])
{
	new businessid = GetPlayerBusiness(playerid);
	if(businessid != -1)
	{
		Dialog
		(
			playerid, DIALOG_BIZ_SELL, DIALOG_STYLE_MSGBOX,
			"{DC143C}"SERVER_NAME" -> {ffffff}  ??????? ???????",
			"{FFFFFF}?? ??????? ??? ?????? ??????? ???? ?????? ????????????\n\n"\
			"{ffffff}??? ????? ?????????? {32CD32} 70 {ffffff}????????? ?? ????????? ?????? ???????.\n"\
			"{ffffff}??? ????? ?????????? {32CD32} 60 {ffffff}????????? ?? ????????? ????? ?????????.\n\n"\
			"{ffffff}???? ?? ?????? ??????? ?????? ??????? ??????,\n"\
			"{ffffff}??????????? ??????? {1E90FF} /sellmybiz",
			"??", "??????"
		);
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???????");

	return 1;
}

CMD:bizmusic(playerid, params[])
{
	new businessid = GetPlayerBusiness(playerid);
	if(businessid != -1)
	{
		if(GetBusinessData(businessid, B_IMPROVEMENTS) >= 4)
		{
			new fmt_str[13 + 1];
			new string[(sizeof fmt_str - 1) * (sizeof g_business_sound) + 1];

			string = "1. ????????\n";
			for(new idx = 1; idx <= sizeof g_business_sound; idx ++)
			{
				format(fmt_str, sizeof fmt_str, "%d. ???? ?%d\n", idx + 1, idx);
				strcat(string, fmt_str);
			}
			Dialog(playerid, DIALOG_BIZ_ENTER_MUSIC, DIALOG_STYLE_LIST, "{FFCD00}???? ??? ????? ? ??????", string, "???????", "???????");
		}
		else SendClientMessage(playerid, 0xCECECEFF, "??ù ????????????? ???? ??????? ????????? 4 ??????? ????????ù ???????");
	}
	else SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???????");

	return 1;
}

CMD:manager(playerid, params[])
{
	new businessid = GetPlayerBusiness(playerid);
	if(businessid != -1)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /manager [id ??????]");

		extract params -> new to_player;

		if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
			return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

		if(!IsPlayerInRangeOfPlayer(playerid, to_player, 10.0))
			return SendClientMessage(playerid, 0xCECECEFF, "????? ????????ù ??????? ??????");

		SendPlayerOffer(playerid, to_player, OFFER_TYPE_BUSINESS_MANAGER, businessid);
	}
	else SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???????");

	return 1;
}

CMD:buy(playerid, params[])
{
	new businessid = GetPlayerInBiz(playerid),
		fmt_price[1024];
	if(businessid != -1)
	{
		if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_SHOP_24_7))
		{
			Dialog
			(
				playerid, DIALOG_BIZ_SHOP_24_7, DIALOG_STYLE_LIST,
				"{0099FF}??????? 24/7",
                "1. ??????? \t\t{00CC00}300 ???\n"\
                "2. ????????\t\t\t{00CC00}2500 ???\n"\
                "3. ????? ??????\t\t{00CC00}150 ???\n"\
                "4. ?????????? ?????\t\t{00CC00}400 ???\n"\
                "5. ?????\t\t\t{00CC00}110 ???\n"\
                "6. ????????? ???????\t{00CC00}2100 ???\n"\
				"7. ???????? ?????\t\t{00CC00}450 ???\n"\
				"8. ????????? ???? ????????",
				"??????", "??????"
			);
		}
		else if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_CELL_SALON))
		{
			Dialog
			(
				playerid, DIALOG_BIZ_CELL_SALON, DIALOG_STYLE_LIST,
				"{FFCD00}??????? ?????",
				"1. ????????? ???????\t{00CC00}2100 ???\n"\
				"2. ???????? ?????\t\t{00CC00}450 ???\n"\
				"3. ???????? ???? ????????\t{00CC00}200 ???\n"\
				"4. ????????? ???? ????????",
				"??????", "??????"
			);
		}
		else if(IsPlayerInBuyPosBiz(playerid, businessid, BUSINESS_TYPE_SHOP_GUN))
		{
		    
		    if(GetPlayerWeaponLic(playerid) != 1) return Send(playerid,-1,"? ??? ??? ???????? ?? ??????, ???????? ?? ????? ? ????????? ? ?????.");
		    
  		    format(fmt_price, sizeof fmt_price,
			"{ffff00}1. {FFFFFF}??????????\t{ffff00}5000 ???.\n"\
			"{ffff00}2. {FFFFFF}Desert Eagle\t{ffff00}50000 ???.\n"\
			"{ffff00}3. {FFFFFF}??-74\t{ffff00}60000 ???.\n"\
			"{ffff00}4. {FFFFFF}??-47\t\t{ffff00}60000 ???.\n"\
			"{ffff00}5. {FFFFFF}Shotgun\t\t{ffff00}40000 ???.\n"\
			"{ffff00}6. {FFFFFF}Sniper Rifle\t\t{ffff00}30000 ???.\n"\
			);

			Dialog
			(
				playerid, DIALOG_BIZ_SHOP_GUN, DIALOG_STYLE_LIST,
				"??????? ?????ù",
				fmt_price,
				"??????", "??????"
			);
		}
		else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ???? ? ??????????? ????????/??????? ??????");
	}
	else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ???? ? ??????????? ????????/??????? ??????");

	return 1;
}

CMD:healme(playerid, params[])
{
	if(GetPlayerData(playerid, P_MED_CHEST) <= 0)
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ? ????? ???????");

	AddPlayerData(playerid, P_MED_CHEST, -, 1);
	UpdatePlayerDatabaseInt(playerid, "healme", GetPlayerData(playerid, P_MED_CHEST));
	SetPlayerHealthEx(playerid, 60.0, true);

	GameTextForPlayer(playerid, "~b~+60 hp", 4000, 1);
	SendClientMessage(playerid, 0x3399FFFF, "?? ???????????? ???????. ???????? ????????? ?? 60 ??????");

	ApplyAnimationEx(playerid, "ped", "gum_eat", 4.0, 0, 0, 0, 0, 0, 1);

	return 1;
}

CMD:present(playerid, params[])
{
	if(!IsPlayerHaveWeapon(playerid, WEAPON_FLOWER))
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ??????");

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /present [id ??????]");

	extract params -> new to_player;

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 3.0))
		return SendClientMessage(playerid, 0xCECECEFF, "????? ??????? ??????");

	if(IsPlayerHaveWeapon(to_player, WEAPON_FLOWER))
		return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ???? ????? ??????");

	new fmt_str[64];

	new Float: angle;
	new Float: to_x, Float: to_y;
	new Float: x, Float: y, Float: z;

	GetPlayerPos(playerid, x, y, z);
	GetPlayerPos(to_player, to_x, to_y, z);

	angle = GetAngleToPoint(to_x, to_y, x, y);

	SetPlayerFacingAngle(playerid, angle);
	SetPlayerFacingAngle(to_player, angle + 180.0);

	ApplyAnimationEx(playerid, "DEALER", "DEALER_DEAL", 4.0, 0, 0, 0, 0, 0, 0);
	ApplyAnimationEx(to_player, "DEALER", "DEALER_DEAL", 4.0, 0, 0, 0, 0, 0, 0);

	format(fmt_str, sizeof fmt_str, "%s ???????(?) ?? ??? ?????", GetPlayerNameEx(to_player));
	SendClientMessage(playerid, 0x3399FFFF, fmt_str);

	format(fmt_str, sizeof fmt_str, "%s ???????(?) ??? ?????", GetPlayerNameEx(playerid));
	SendClientMessage(to_player, 0x3399FFFF, fmt_str);

	SetTimerEx("PresentFlowersToPlayer", 1500, false, "ii", playerid, to_player);
	return 1;
}

CMD:mask(playerid, params[])
{
	if(GetPlayerData(playerid, P_MASK) != 1)
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ? ????? ?????");

	SetPlayerData(playerid, P_MASK, 600 + 1);
	SetPlayerColorEx(playerid, 0x00000000);

	ApplyAnimationEx(playerid, "SHOP", "ROB_Shifty", 4.0, 0, 0, 0, 0, 0, 0);
	SetPlayerChatBubble(playerid, "???????? ?????", 0xFF9900FF, 15.0, 5000);

	GameTextForPlayer(playerid, "~b~~h~invisible on", 2500, 4);
	SendClientMessage(playerid, 0x3399FFFF, "???? ????????????????? ?? GPS ?????? ?? 10 ?????");

	return 1;
}

CMD:dis(playerid)
{
    if(GetPlayerTeamEx(playerid) != TEAM_FBI) return SendClientMessage(playerid, 0x999999FF, "???????? ?????? ???!");
    
	SetPlayerColorEx(playerid, 0x00000000);


	ShowNotificationNew(playerid, 1, 5, 0, 0, "?? ??????? ???????? ??????????, ??? ?? ????? ????? ?? ??????", "");
	SendClientMessage(playerid, 0x3399FFFF, "?? ??????? ???????????????!");

	return 1;
}

CMD:offdis(playerid)
{
    if(GetPlayerTeamEx(playerid) != TEAM_FBI) return SendClientMessage(playerid, 0x999999FF, "???????? ?????? ???!");
    
    ShowNotificationNew(playerid, 1, 5, 0, 0, "?? ??????? ????????? ??????????, ??? ????? ????? ?? ??????", "");
    SetPlayerColorEx(playerid, GetPlayerTeamColor(playerid));
    
    return 1;
}


CMD:home(playerid, params[])
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
	if(houseid != -1)
	{
		new fmt_str[1024];
		new entranceid = GetHouseData(houseid, H_ENTRACE);
		new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];

		format(fmt_str, sizeof fmt_str, "{FFFFFF}ù?? / ????????:\t\t\t{339999}%s\n", GetHouseData(houseid, H_NAME));
		if(entranceid != -1)
		{
			GetCityName(GetEntranceData(entranceid, E_POS_X), GetEntranceData(entranceid, E_POS_Y), city);
			GetAreaName(GetEntranceData(entranceid, E_POS_X), GetEntranceData(entranceid, E_POS_Y), area);
			format
			(
				fmt_str, sizeof fmt_str,
				"%s{FFFFFF}????? ????????:\t\t\t%d\n"\
				"????? ????????:\t\t\t%d\n"\
				"????? / ???????:\t\t\t%s\n"\
				"?????:\t\t\t\t\t%s\n",
				fmt_str,
				entranceid + 1,
				GetHouseData(houseid, H_FLAT_ID) + 1,
				city,
				area
			);
		}
		else
		{
			GetCityName(GetHouseData(houseid, H_POS_X), GetHouseData(houseid, H_POS_Y), city);
			GetAreaName(GetHouseData(houseid, H_POS_X), GetHouseData(houseid, H_POS_Y), area);
			format
			(
				fmt_str, sizeof fmt_str,
				"%s{FFFFFF}????? ????:\t\t\t\t%d\n"\
				"????? / ???????:\t\t\t%s\n"\
				"?????:\t\t\t\t\t%s\n",
				fmt_str,
				houseid,
				city,
				area
			);
		}

		format
		(
			fmt_str, sizeof fmt_str,
			"%s?????????:\t\t\t\t{888888}%d {FFFFFF}???\n"\
			"??? ??????? ??:\t\t\t{EB4C42}%d {FFFFFF}?? {66CC00}30 {FFFFFF}????\n"\
			"?????????? ??????:\t\t\t%d\n"\
			"??????? ?????????:\t\t\t%d\n"\
			"?????? ????????? ????:\t\t{FF3333}???\n"\
			"{FFFFFF}??????????:\t\t\t\t%d ??? ? ????\n"\
			"ù?? ??????????:\t\t\t%s\n"\
			"??????:\t\t\t\t\t%s\n\n"\
			"{669966}??ù ???????ù ?????? ?????????ù ????? ?????\n"\
			"??????? ?????? \"????????\"",
			fmt_str,
			GetHouseData(houseid, H_PRICE),
			GetHouseData(houseid, H_RENT_DATE) <= gettime() ? 0 :
			GetElapsedTime(GetHouseData(houseid, H_RENT_DATE), gettime(), CONVERT_TIME_TO_DAYS),
			GetHouseTypeInfo(GetHouseData(houseid, H_TYPE), HT_ROOMS),
			GetHouseData(houseid, H_IMPROVEMENTS),
			GetHouseData(houseid, H_IMPROVEMENTS) < 4 ? (GetHouseData(houseid, H_RENT_PRICE)) : (GetHouseData(houseid, H_RENT_PRICE) / 2),
			GetHouseData(houseid, H_IMPROVEMENTS) < 4 ? ("??????ù") : ("?????????ù"),
			GetHouseData(houseid, H_LOCK_STATUS) ? ("{CC3333}??? ??????") : ("{66CC33}??? ??????")
		);
		Dialog(playerid, DIALOG_HOUSE_INFO, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{ffffff} -> ?????????ù ? ????", fmt_str, "????????", "??????");
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????");

	return 1;
}

CMD:sellhome(playerid, params[])
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
	if(houseid != -1)
	{
		Dialog
		(
			playerid, DIALOG_HOUSE_SELL, DIALOG_STYLE_MSGBOX,
			"{DC143C}"SERVER_NAME" -> {ffffff}  ??????? ????",
			"{FFFFFF}?? ??????? ??? ?????? ??????? ???? ??? ????????????\n\n"\
			"{ffffff}??? ????? ?????????? {32CD32} 70 {ffffff}????????? ?? ????????? ????????????.\n"\
			"{ffffff}??? ????? ?????????? {32CD32} 60 {ffffff}????????? ?? ????????? ????? ?????????.\n\n"\
			"{ffffff}???? ?? ?????? ??????? ?????? ??????? ??????,\n"\
			"{ffffff}??????????? ??????? {1E90FF} /sellmyhome",
			"??", "???"
		);
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????");

	return 1;
}

CMD:sellmyhome(playerid, params[])
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
	if(houseid != -1)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sellmyhome [id ??????] [?????????]");

		extract params -> new to_player, price;

		new house_price = GetHouseData(houseid, H_PRICE);

		if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
			return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

		if(GetPlayerHouse(to_player) != -1)
			return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ???? ???");

		if(!((house_price / 3) <= price <= (house_price * 3)))
			return SendClientMessage(playerid, 0xCECECEFF, "????????? ?? ?????? ???? ?????? ??? ??????? ? 3 ???? ?? ????????? ????");

		if(GetPlayerMoneyEx(to_player) < price)
			return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ????? ?????");

		if(!(IsPlayerInRangeOfHouse(playerid, houseid, 10.0) && IsPlayerInRangeOfHouse(to_player, houseid, 10.0)))
			return SendClientMessage(playerid, 0xCECECEFF, "?? ? ?????????? ?????? ?????????ù ????? ???? ??????? ?????? ???????");

		SendPlayerOffer(playerid, to_player, OFFER_TYPE_SELL_HOME, houseid, price);
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????");

	return 1;
}

CMD:live(playerid, params[])
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
	if(houseid != -1)
	{
		new type = GetHouseData(houseid, H_TYPE);
		new rooms = GetHouseTypeInfo(type, HT_ROOMS);

		if(GetHouseRentersCount(houseid) >= rooms)
			return SendClientMessage(playerid, 0x999999FF, "??? ??????? ?????? ???? ??? ???ù??");

		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /live [id ??????]"); // [???-?? ????] [???? (????ù????????)]

		extract params -> new to_player, days, price;

		if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
			return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

		if(GetPlayerHouse(to_player) != -1)
			return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ???? ???");

		if(!(300 <= price <= 10_000))
			return SendClientMessage(playerid, 0xCECECEFF, "???? ?????? ?????? ???? ?? 300 ?? 10000 ???");

		else if(!(1 <= days <= 30))
			return SendClientMessage(playerid, 0xCECECEFF, "???-?? ???? ?????? ?????? ???? ?? 0 ?? 30");

		if(GetPlayerMoneyEx(to_player) < price)
			return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ????? ?????");
		
		if(!(IsPlayerInRangeOfHouse(playerid, houseid, 10.0) && IsPlayerInRangeOfHouse(to_player, houseid, 10.0)))
			return SendClientMessage(playerid, 0xCECECEFF, "?? ? ????????? ?????? ?????????ù ????? ???? ??????? ?????? ????? ? ??????");

		SendPlayerOffer(playerid, to_player, OFFER_TYPE_HOME_RENT_ROOM, houseid);
	}
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????");

	return 1;
}

CMD:liveout(playerid, params[])
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_ROOM);
	if(houseid != -1)
	{
		Dialog
		(
			playerid, DIALOG_HOUSE_EVICT, DIALOG_STYLE_MSGBOX,
			"{FF9900}????????? ?? ????",
			"{FFFFFF}?? ????????????? ?????? ?????????ù ?? ?????",
			"??", "???"
		);
	}
	else SendClientMessage(playerid, 0x999999FF, "?? ????? ?? ??????????");

	return 1;
}

CMD:makestore(playerid, params[])
{
	new houseid = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
	if(houseid != -1)
	{
		if(GetHouseData(houseid, H_IMPROVEMENTS) >= 5)
		{
			if(GetPlayerInHouse(playerid) == houseid)
			{
				new type = GetHouseData(houseid, H_TYPE);
				if(IsPlayerInRangeOfPoint(playerid, 50.0, GetHouseTypeInfo(type, HT_ENTER_POS_X), GetHouseTypeInfo(type, HT_ENTER_POS_Y), GetHouseTypeInfo(type, HT_ENTER_POS_Z)))
				{
					Dialog
					(
						playerid, DIALOG_HOUSE_MOVE_STORE, DIALOG_STYLE_MSGBOX,
						"{FFCD00}????",
						"{FFFFFF}?? ?????? ?????????? ???? ? ???? ??????",
						"??", "???"
					);
				}
				else SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ???ù ? ????");
			}
			else SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ???ù ? ????");
		}
		else SendClientMessage(playerid, 0x999999FF, "????????? 5 ??????? ????????? ??ù ????");
	}
	else SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ?????????? ????????????");

	return 1;
}

CMD:use(playerid, params[])
{
	new house_id = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);

	if(house_id == -1) return SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ?????????? ????????????");

	if(GetPlayerInHouse(playerid) != house_id) return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ????? ????");

	if(GetHouseData(house_id, H_IMPROVEMENTS) < 5) return SendClientMessage(playerid, 0x999999FF, "????????? 5 ??????? ????????? ??ù ????");

	if(!IsPlayerInRangeOfPoint(playerid, 3.0, GetHouseData(house_id, H_STORE_X), GetHouseData(house_id, H_STORE_Y), GetHouseData(house_id, H_STORE_Z)))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????? ?????");

	Dialog
	(
		playerid, DIALOG_HOUSE_STORE, DIALOG_STYLE_LIST,
		"{FFCC00}????",
		"1. ???????? ?????????\n\
		2. ???????? ?????????\n\
		3. ???????? ??????\n\
		4. ???????? ??????\n\
		{99FF99}5. ??ù?? ?????????\n\
		{99FF99}6. ??ù?? ?????????\n\
		{99FF99}7. ??ù?? ??????\n\
		{99FF99}8. ??ù?? ??????",
		"?????", "???????"
	);

	return 1;
}

CMD:homelock(playerid, params[])
{
	new hotel_id = GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL);
	new room_id = GetPlayerData(playerid, P_HOUSE_ROOM);

	if(hotel_id != -1)
	{
		if(GetHotelData(hotel_id, room_id, H_STATUS))
		{
			SetHotelData(hotel_id, room_id, H_STATUS, false);

			GameTextForPlayer(playerid, "~g~~h~OùKPëùO", 2000, 4);
			SendClientMessage(playerid, 0x66CC00FF, "????? ??????");
		}
		else
		{
			SetHotelData(hotel_id, room_id, H_STATUS, true);

			GameTextForPlayer(playerid, "~r~~h~ùAKPëùO", 2000, 4);
			SendClientMessage(playerid, 0xFF6600FF, "????? ??????");
		}

		new query[64];
		format(query, sizeof query, "UPDATE hotels SET status=%d WHERE id=%d LIMIT 1", GetHotelData(hotel_id, room_id, H_STATUS), GetHotelData(hotel_id, room_id, H_SQL_ID));
		mysql_query(mysql, query, false);
	}
	else SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ????? ? ?????????");

	return 1;
}

CMD:exit(playerid, params[])
{
	if(GetPlayerInHouse(playerid) != -1)
	{
		new houseid = GetPlayerInHouse(playerid);
		if(GetHouseData(houseid, H_IMPROVEMENTS) > 5)
		{
			Dialog
			(
				playerid, DIALOG_ACTION_EXIT_HOUSE, DIALOG_STYLE_LIST,
				"{FFCC00}?????",
				"1. ?????\n\
				2. ?????",
				"?????", "???????"
			);
		}
		else
			ExitPlayerFromHouse(playerid, 3.0);
	}
	else if(GetPlayerData(playerid, P_IN_HOTEL_ROOM) != -1)
	{
		ExitPlayerFromHotelRoom(playerid);
	}
	else if(!GetPlayerInterior(playerid))
	{
		SendClientMessage(playerid, 0xCECECEFF, "?? ?? ? ?????????");
	}

	return 1;
}

CMD:lift(playerid, params[])
{
	new entranceid = GetPlayerInEntrance(playerid);
	if(entranceid != -1)
	{
		new floor = GetPlayerInEntranceFloor(playerid);
		if(floor != -1)
		{
			if(!floor)
			{
				if(!IsPlayerInRangeOfPoint(playerid, 1.5, 30.5405, 1403.6593, 1508.4163))
					return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ????? ?????");
			}
			else
			{
				if(!IsPlayerInRangeOfPoint(playerid, 1.5, 11.1776, 1377.5216, 1508.4163))
					return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ????? ?????");
			}
			ShowPlayerEntranceFloorsLift(playerid, entranceid, floor);
		}
	}
	else SendClientMessage(playerid, 0xCECECEFF, "?? ?? ? ????????");

	return 1;
}

CMD:lock(playerid, params[])
{
if(player_sell_ownable_car[playerid] == false)
                         	{
    if(GetPlayerOwnableCar(playerid) == INVALID_VEHICLE_ID)
    {
        if(GetPlayerOwnableCars(playerid) == 0)
        return SendClientMessage(playerid, 0x999999FF, ""USC"? ??? ??? ??????? ??????????");
        else
        return SendClientMessage(playerid, 0x999999FF, ""USC"??? ?????? ????????? ?? ???????? ?? ??????");
    }
    new Float: x, Float: y, Float: z;
    GetVehiclePos(GetPlayerOwnableCar(playerid), x, y, z);

    if(IsPlayerInRangeOfPoint(playerid, 10.0, x, y, z))
    {
        ToggleLock(playerid, GetPlayerOwnableCar(playerid));
    }
    else SendClientMessage(playerid, 0x999999FF, ""USC"?? ?????? ???ù?? ?ù??? ? ???????????");
    return true;
    }
    else return 1;
}
alias:lock("lc")

CMD:key(playerid, params[])
{
	if(IsPlayerInAnyVehicle(playerid))
	{
		if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID || GetPlayerAllowedCar(playerid) != INVALID_VEHICLE_ID)
		{
			new vehicleid = GetPlayerVehicleID(playerid);
			if(!IsABike(vehicleid))
			{
				if(vehicleid == GetPlayerOwnableCar(playerid) || vehicleid == GetPlayerAllowedCar(playerid))
				{
					new index = GetVehicleData(vehicleid, V_ACTION_ID);
					new bool: status = GetOwnableCarData(index, OC_KEY_IN);

					if(status)
					{
						if(GetVehicleParam(vehicleid, V_ENGINE) == VEHICLE_PARAM_ON)
						{
							SetVehicleParam(vehicleid, V_ENGINE, VEHICLE_PARAM_OFF);
						}
						Action(playerid, "??????? ???? ?? ????? ????????ù", _, false);
					}
					else Action(playerid, "??????? ???? ? ????? ????????ù", _, false);

					SetOwnableCarData(index, OC_KEY_IN, status ^ true);
				//	SpeedometrKeyStatusInit(playerid, vehicleid);
				}
				else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ??????/?????????? ??????????");
			}
		}
		else
		{
			if(GetPlayerOwnableCars(playerid) == 0)
				SendClientMessage(playerid, 0x999999FF, "? ??? ??? ???????/??????????? ??????????");
			else
				SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
		}
	}
	else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ??????????");

	return 1;
}

CMD:getmycar(playerid, params[])
{
	new vehicleid = GetPlayerOwnableCar(playerid);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		new price = 300;
		new i_have_home = (GetPlayerHouse(playerid, HOUSE_TYPE_HOME) != -1 || GetPlayerHouse(playerid, HOUSE_TYPE_HOTEL) != -1);

		if(GetPlayerGPSInfo(playerid, G_ENABLED) == GPS_STATUS_OFF)
		{
			if(GetPlayerMoneyEx(playerid) >= price || i_have_home)
			{
				if(!i_have_home)
					GivePlayerMoneyEx(playerid, -price, "????? ù? ?? GPS", true, true);

				new Float: x, Float: y, Float: z;
				GetVehiclePos(vehicleid, x, y, z);

				EnablePlayerGPS(playerid, x, y, z, "?????????????? ?????? ?????????? ???????? ?? GPS");
				return 1;
			}
			else SendClientMessage(playerid, 0x999999FF, "???????????? ?????");
		}
		else SendClientMessage(playerid, 0xCECECEFF, "?? ????? GPS ??? ???????? ?????");
	}
	else
	{
		if(GetPlayerOwnableCars(playerid) == 0)
			SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
		else
			SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
	}

	return 0;
}

CMD:sellcar(playerid, params[])
{
	new vehicleid = GetPlayerOwnableCar(playerid);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		new model_id = GetVehicleData(vehicleid, V_MODELID);
		if(model_id)
		{
			new fmt_str[999];

			new price = GetVehicleInfo(model_id-400, VI_PRICE);
			new percent = price * 50 / 100;

			format
			(
				fmt_str, sizeof fmt_str,
				""SC"ù??????????? ????????:\t{ffff00}%s (?%d)\n"\
				""SC"????????? ???????:\t{ffff00}%d\n\n"\
				"{FFFFFF}?? ?????? ??????? ???? ???????????? ???????? ??????\n"\
				"??????? ? ??????? ???????: {ffff00}\"/sellmycar\".\n\n"\
				"{FFFFFF}?? ???????, ??? ?????? ??????????? ??????? ????\n"\
				"???????????? ?????????",
				GetVehicleName(vehicleid),
				model_id,
				price,
				price - percent
			);
			Dialog(playerid, DIALOG_OWNABLE_CAR_SELL, DIALOG_STYLE_MSGBOX, "{FF6347}"SERVER_NAME" -> {ffffff}??????? ??????????", fmt_str, "??", "??????");
		}
	}
	else
	{
		if(GetPlayerOwnableCars(playerid) == 0)
			ShowNotificationDefault(playerid, 2, 5, 2, 1, "? ??? ??? ??????? ??????????");
		else
			ShowNotificationDefault(playerid, 2, 5, 2, 1, "??? ?????? ????????? ?? ???????? ?? ???????");
	}

	return 1;
}

CMD:sellmycar(playerid, params[])
{
	new vehicleid = GetPlayerOwnableCar(playerid);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sellmycar [id ??????] [?????????]");

		extract params -> new to_player, price;

		new model_id = GetVehicleData(vehicleid, V_MODELID);
		if(model_id)
		{
			new car_price = GetVehicleInfo(model_id-400, VI_PRICE);

			if(!IsPlayerConnected(to_player) || to_player == playerid)
				return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

			if((GetPlayerOwnableCars(to_player) + 1) > GetPlayerCarSlots(to_player))
				return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ????????? ?????? ??ù ??????????");

			if(GetPlayerOwnableCar(to_player) != INVALID_VEHICLE_ID)
				return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?????? ????????? ??? ?????? ????????? ? ??????? {888888}(/car > 7)");

			if(!(3000 <= price <= (car_price * 2)))
				return SendClientMessage(playerid, 0xCECECEFF, "????????? ????? ???? ?? 3000 ?????? ? ?? ?????? ? 2 ???? ???. ????????? ù?");

			if(GetPlayerMoneyEx(to_player) < price)
				return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ????? ?????");

			new  Float: car_x, Float: car_y, Float: car_z;
			GetVehiclePos(vehicleid, car_x, car_y, car_z);

			if(IsPlayerInRangeOfPoint(playerid, 15.0, car_x, car_y, car_z) && IsPlayerInRangeOfPoint(to_player, 15.0, car_x, car_y, car_z))
			{
				SendPlayerOffer(playerid, to_player, OFFER_TYPE_SELL_OWNABLE_CAR, price, vehicleid);
			}
			else SendClientMessage(playerid, 0xCECECEFF, "?? ? ?????????? ?????? ?????????ù ????? ù?");
		}
	}
	else
	{
		if(GetPlayerOwnableCars(playerid) == 0)
			SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
		else
			SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
	}

	return 1;
}

CMD:allow(playerid, params[])
{
	new vehicleid = GetPlayerOwnableCar(playerid);
	if(vehicleid == INVALID_VEHICLE_ID)
	{
		if(GetPlayerOwnableCars(playerid) == 0)
			return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
		else
			return SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
	}

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /allow [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	new fmt_text[71];

	if(GetPlayerAllowedCar(to_player) == vehicleid)
	{
		format(fmt_text, sizeof fmt_text, "?? ??????? ? %s ????? ?? ?????? ??????? ??????????", GetPlayerNameEx(to_player));
		SendClientMessage(playerid, 0x3399FFFF, fmt_text);

		format(fmt_text, sizeof fmt_text, "%s ?????? ? ??? ????? ?? ?????? ??????? ??????????", GetPlayerNameEx(playerid));
		SendClientMessage(to_player, 0xFF5533FF, fmt_text);

		SetPlayerData(to_player, P_ALLOWED_CAR, INVALID_VEHICLE_ID);
	}
	else
	{
		if(!IsPlayerInRangeOfPlayer(playerid, to_player, 10.0)) return SendClientMessage(playerid, 0xCECECEFF, "????? ????????ù ??????? ??????");

		SendPlayerOffer(playerid, to_player, OFFER_TYPE_GIVE_CAR_KEY);
	}

	return 1;
}

CMD:park(playerid, params[])
{
	if(!IsPlayerInAnyVehicle(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ??????????");

	new vehicleid = GetPlayerOwnableCar(playerid);
	if(vehicleid == INVALID_VEHICLE_ID)
	{
		if(GetPlayerOwnableCars(playerid) == 0)
			return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");
		else
			return SendClientMessage(playerid, 0x999999FF, "??? ?????? ????????? ?? ???????? ?? ??????");
	}

	if(vehicleid != GetPlayerVehicleID(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????? ??????????");

	new green_zone_id = GetPVarInt(playerid, "player_in_green_zone") - 1;

	if(green_zone_id != -1)
	{
		if(!g_green_zones[green_zone_id][GZ_ALLOW_PARK])
		{
			new fmt_text[144];

			format(fmt_text, sizeof fmt_text, "?? ?????????? {FFFF00}'%s' {3399FF}???????? ??????? ?????????? ?????????. ???????? ?????? ????? ??ù ????????", g_green_zones[green_zone_id][GZ_NAME]);
			SendClientMessage(playerid, 0x3399FFFF, fmt_text);

			return 1;
		}
	}

	new index = GetVehicleData(vehicleid, V_ACTION_ID);

	GetVehiclePos(vehicleid, GetOwnableCarData(index, OC_POS_X), GetOwnableCarData(index, OC_POS_Y), GetOwnableCarData(index, OC_POS_Z));
	GetVehicleZAngle(vehicleid, GetOwnableCarData(index, OC_ANGLE));

	SaveOwnableCar(vehicleid);
	return SendClientMessage(playerid, 0x66CC00FF, "??? ????????? ??????? ???????????");
}

CMD:car(playerid, params[])
{
	if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
	{
		Dialog
		(
			playerid, DIALOG_OWNABLE_CAR, DIALOG_STYLE_LIST,
			"{FFCD00}??????? ?????????ù ???????????",
			"1. {669900}??????? {FFFFFF}??? {FF3300}??????? {FFFFFF}?????????\n"\
			"2. ???????? ????????? ?? GPS {FF6600}(300 ???)\n"\
			"3. ?????????? ?????????\n"\
			"4. ????????? ?? ?????????\n"\
			"5. ??ù?? ???????? ?????\n"\
			"6. ????????? ?????????ù\n"\
			"{888888}7. ????????? ????????? ? ???????\n"\
			"8. ???????? ????\n"\
			"9. ???????? ???? ? ?????",
			"???????", "???????"
		);
	}
	else
	{
		new fmt_text[740],
			Cache: result,
			id;

		mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM ownable_cars WHERE owner_id='%d'", GetPlayerAccountID(playerid));
		result = mysql_query(mysql, fmt_text, true);

		new rows = cache_num_rows();

		if(!rows)
			SendClientMessage(playerid, 0x999999FF, "? ??? ??? ??????? ??????????");

		else
		{
			if(rows == 1)
			{
				id = cache_get_field_content_int(0, "id");

				ShowOwnableCarLoadDialog(playerid, id);
			}
			else
			{
				new query[60],
					model_id,
					car_number[7], count_rows;

				if(rows >= 11)
				{
					count_rows = 10;
				}
				else count_rows = rows;

				format(fmt_text, sizeof fmt_text, "");

				for(new i = 0; i < count_rows; i ++)
				{
					id = cache_get_field_content_int(i, "id");
					model_id = cache_get_field_content_int(i, "model_id") - 400;
					cache_get_field_content(i, "number", car_number);

					format(query, sizeof query, "{FFFFFF}%d. %s {888888}[%s]\n", i + 1, GetVehicleInfo(model_id, VI_NAME), car_number);
					strcat(fmt_text, query);
					SetPlayerListitemValue(playerid, i, id);
				}


				if(rows >= 11)
				{
					new buttom[21], buttom_1[21];
					format(buttom, sizeof buttom, "????????ù ????????");
					strcat(fmt_text, buttom);
					SetPVarInt(playerid, "count_list", 1);
                    SetPVarInt(playerid, "up_count", 10);
					SetPVarInt(playerid, "down_count", 11);
				}


				Dialog
				(
					playerid, DIALOG_OWNABLE_CAR_LIST, DIALOG_STYLE_LIST,
					"{FFCD00}???????? ?????????",
					fmt_text,
					"???????", "???????"
				);
			}
		}

		cache_delete(result);
	}
	return 1;
}

CMD:trunk(playerid, params[])
{
	if(GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
	{
		new vehicleid;
		new Float: x, Float: y, Float: z;
		new Float: angle, Float: distance;

		while((++vehicleid) < MAX_VEHICLES)
		{
			if(!GetVehicleData(vehicleid, V_MODELID)) continue;

			GetCoordVehicle(vehicleid, VEHICLE_COORD_TYPE_BOOT, x, y, z, angle, distance);
			if(!IsPlayerInRangeOfPoint(playerid, 1.0, x, y, z)) continue;

			ShowTrunkDialog(playerid, vehicleid, false);
			break;
		}
	}
	return 1;
}


CMD:delvehall(playerid)
{
    if(GetPlayerAdminEx(playerid) < 4) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

    new total_car = 0;
    for(new i = 0; i < MAX_VEHICLES; i++)
    {
        if(GetVehicleData(i, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_ADMIN_CAR)
        {
            DestroyDeliveryVehicle(i);
            total_car ++;
        }

    }

    format(sctring, sizeof(sctring), ""SC"?? ??????? {00ff00}%i {FFFFFF}??????????? ????????? ?? ???????!", total_car);
    SendClientMessage(playerid, -1, sctring);
    format(sctring, sizeof(sctring), "[A] %s[%d] ?????? ???? ????????? ????????? ?? ???????. (%i ??)",GetPlayerNameEx(playerid), playerid, total_car);
    SendMessageToAdmins(sctring, 0x999999FF);
    return 1;
}

CMD:veh(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4 ) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

	extract params -> new model_id, color_1, color_2; else return SendClientMessage(playerid, 0xCECECEFF, "{ffff00}|{ffffff} ???????????: /veh [id ??????] [???? 1] [???? 2] [?????? ??ù ??????? (?? ??ù????????)]");

	if(!(400 <= model_id <= 30000)) return SendClientMessage(playerid, 0xCECECEFF, "{ffff00}|{ffffff}??????????? ?????? ?? 400 ?? 2591");

	new status;

	sscanf(params, "{d}{d}{d}d", status);

	if(!(0 <= status <= 1))
		return SendClientMessage(playerid, 0x999999FF, "{ffff00}|{ffffff}?????? ??????? ? ??????????: 0 - ??? ???????, 1 - ???????? ?????? ??????");

	new Float: x,
		Float: y,
		Float: z,
		Float: a;

	GetPlayerPos(playerid, x, y, z);
	GetPlayerFacingAngle(playerid, a);

	new vehicleid = CreateVehicle(model_id, x, y, z, a, color_1, color_2, -1, 0, VEHICLE_ACTION_TYPE_ADMIN_CAR, status);

	// ????????ù ?????????? ????????? ????? ? ??????? "X777XX 88"
	new plate_number[9], plate_region[4];
	GenerateRandomPlate(plate_number, plate_region);

	// ????????? ????????? ?????
	SetVehicleNumberPlateEx(vehicleid, 2, plate_number, plate_region);

	PutPlayerInVehicle(playerid, vehicleid, 0);
	SetTimerEx("ShowEngineNotification", 1000, false, "i", playerid);

	new fmt_text[999];

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ????????? (%d, %d, %d) [?????: %s %s]",
	GetPlayerNameEx(playerid), playerid, model_id, color_1, color_2, plate_number, plate_region);
    SendMessageToAdmins(fmt_text, 0x999999FF);

	format(fmt_text, sizeof fmt_text, "?????? ????????? (%d, %d, %d)", model_id, color_1, color_2);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

stock GenerateRandomPlate(number[], region[])
{
	// ????? ??ù ????????? ????? (??????? ???????)
	new letters[] = "?????????ù??";

	// ????????ù ?????? ?????
	number[0] = letters[random(sizeof(letters)-1)];

	// ????????ù ???? ????
	number[1] = '0' + random(10);
	number[2] = '0' + random(10);
	number[3] = '0' + random(10);

	// ????????ù ???? ????
	number[4] = letters[random(sizeof(letters)-1)];
	number[5] = letters[random(sizeof(letters)-1)];
	number[6] = EOS; // ????? ??????

	// ????????ù ??????? (??? ?????)
	region[0] = '0' + random(10);
	region[1] = '0' + random(10);
	region[2] = EOS; // ????? ??????
}
CMD:coord(playerid)
{
	new Float:x, Float:y, Float:z; // ??????????
	GetPlayerPos(playerid, x, y, z); // ?????????? ??????????
	printf("%f,%f,%f.", x, y, z);
	return true;
}
CMD:pos(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) == 0) return 1;

	new Float: x, Float: y, Float: z, interior, virtual_world;

	if(sscanf(params, "P<,>fff", x, y, z))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /pos [x y z]");

	sscanf(params, "P<,>{fff}dd", interior, virtual_world);

	return SetPlayerPosEx(playerid, x, y, z, interior, virtual_world);
}

CMD:d(playerid, params[])
{
	if(!GetPlayerTeamEx(playerid)) return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ? ??????????ù?");
	else if(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??ù ??????????? ???. ???????????");
	else if(IsPlayerMuted(playerid) > 0) return SendClientMessage(playerid, 0xFF6600FF, "?????? ? ??? ????????????. ????ù ?? ?????????????: {66CC33}/time");	
	if(!IsWorkDayStarted(playerid)) return 1;
	else if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /d [?????]");


	new fmt_msg[144];

	format(fmt_msg, sizeof fmt_msg, "[D] %s %s[%d]: %s", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), playerid, params);

	if(IsAIP(params))
	{
      	SendClientMessage(playerid, -1, "?????????ù ? ???????!");
       	return false;
    }

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(!GetPlayerTeamEx(i)) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		SendClientMessage(i, 0xFF9999FF, fmt_msg);
	}

	SetPlayerChatBubble(playerid, "??????(?) ???-?? ? ????? ???????????", 0xDD99FFAA, 10.0, 4000);

	return 1;
}

CMD:r(playerid, params[])
{
	if(!(GetPlayerTeamEx(playerid) || GetPlayerJob(playerid))) return SendClientMessage(playerid, 0xCECECEFF, "?? ????? ?? ?????????/?? ???????? ? ??????????ù?");
	else if(IsPlayerMuted(playerid) > 0) return SendClientMessage(playerid, 0xCECECEFF, "?????? ? ??? ????????????. ????ù ?? ?????????????: {66CC33}/time");	
	if(!IsWorkDayStarted(playerid)) return 1;
	else if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /r [?????]");


	new fmt_msg[144];

	format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d]: %s", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), playerid, params);

	if(!GetPlayerTeamEx(playerid))
		SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
	else
	    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

	SetPlayerChatBubble(playerid, "??????(?) ???-?? ? ?????", 0xDD99FFAA, 10.0, 4000);
	return 1;
}

CMD:rn(playerid, params[])
{
	if(!(GetPlayerTeamEx(playerid) || GetPlayerJob(playerid))) return SendClientMessage(playerid, 0xCECECEFF, "?? ????? ?? ?????????/?? ???????? ? ??????????ù?");
	// else if(TEAM_GANG_GROVE <= GetPlayerTeamEx(playerid) <= TEAM_GANG_AZTECAS) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??ù ??????????? ???. ???????????");
	else if(IsPlayerMuted(playerid) > 0) return SendClientMessage(playerid, 0xCECECEFF, "?????? ? ??? ????????????. ????ù ?? ?????????????: {66CC33}/time");	
	if(!IsWorkDayStarted(playerid)) return 1;
	else if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /rn [?????]");


	new fmt_msg[144];

	format(fmt_msg, sizeof fmt_msg, "(( [R] %s %s[%d]: %s ))", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), playerid, params);

	if(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)
		SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
	else
		SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _);

	SetPlayerChatBubble(playerid, "??????(?) ???-?? ? ?????", 0xDD99FFAA, 10.0, 4000);
	return 1;
}


CMD:gnews(playerid, params[])
{
	if(!(TEAM_GOVERNMENT <= GetPlayerTeamEx(playerid) <= TEAM_FBI)) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
	if(!(9 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");
	if(IsPlayerMuted(playerid) > 0) return SendClientMessage(playerid, 0xFF6600FF, "?????? ? ??? ????????????. ????ù ?? ?????????????: {66CC33}/time");	
	if(!IsWorkDayStarted(playerid)) return 1;
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /gnews [?????]");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!IsWorkDayStarted(playerid)) return 1;

	if(IsAIP(params))
	{
      	SendClientMessage(playerid, -1, "?????????ù ? ???????!");
       	return false;
    }

	new fmt_msg[170 + 1];
	format(fmt_msg, sizeof fmt_msg, "???.???????: %s[%d]: %s", GetPlayerNameEx(playerid), playerid, params);
	SendClientMessageToAll(0x4466CCFF,  fmt_msg);

	return 1;
}
alias:gnews("gov")

CMD:invite(playerid, params[])
{
    if (!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG))
        return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");

    if (!(9 <= GetPlayerJob(playerid) <= 10))
        return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");	
        
	if(!IsWorkDayStarted(playerid)) return 1;

    if (!strlen(params))
        return SendClientMessage(playerid, 0xCECECEFF, "???????????: /invite [id ??????]");

    extract params -> new to_player;
    if (!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
        return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

    if (1 <= GetPlayerTeamEx(to_player) < MAX_ORG)
        return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ??? ??????? ? ???????????");

    if (GetPlayerData(to_player, P_WARN))
        return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ???? ?????????????ù");

    if (!IsPlayerInRangeOfPlayer(playerid, to_player, 10.0))
        return SendClientMessage(playerid, 0xCECECEFF, "????? ????????ù ??????? ??????");
       
    if (GetPlayerData(to_player, P_MEDCARD) != 1)
	    return SendClientMessage(playerid, COLOR_GREY, "? ?????? ??? ??????????? ?????.");

    new team = GetPlayerTeamEx(playerid);
    if (team == TEAM_PPS || team == TEAM_FBI || team == TEAM_DPS || team == TEAM_FSIN)
    {
        if (GetPlayerData(to_player, P_VOENBILET_NUM) == 0)
            return SendClientMessage(playerid, 0x999999FF, "? ?????? ???? ???????? ??????");
    }

    SendPlayerOffer(playerid, to_player, OFFER_TYPE_INVITE);
    return 1;
}

CMD:uninvite(playerid, params[])
{
	if(!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
	if(!(9 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /uninvite [id ??????] [???????]");


	extract params -> new to_player, string:reason[32];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!(1 <= strlen(reason) <= 32))
		return SendClientMessage(playerid, 0xCECECEFF, "??????? ??????? ?????????ù");

	if(GetPlayerTeamEx(to_player) != GetPlayerTeamEx(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ???????????");

	if(GetPlayerJob(to_player) >= GetPlayerJob(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??????? ??????? ??????????ù/?????? ???????????");

	// }

	EndWorkDayUval(to_player);
	UnInvite(playerid, to_player, reason);

	return 1;
}

CMD:rang(playerid, params[])
{
	if(!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
	if(!(9 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /rang [id ??????] [+/-]");

	
	extract params -> new to_player, string:give_rang[2];
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(GetPlayerTeamEx(to_player) != GetPlayerTeamEx(playerid)) return SendClientMessage(playerid, 0x999999FF, "???? ????? ?? ??????? ? ????? ???????????");
	if(GetPlayerJob(to_player) >= 10) return SendClientMessage(playerid, 0x999999FF, "?????ù ???????? ??? ???????? ?????? ???????????");

	new current_rang = GetPlayerJob(to_player);

	new fmt_msg[75];
	if(give_rang[0] == '+')
	{
		if((current_rang + 1) >= GetPlayerJob(playerid)) return SendClientMessage(playerid, 0x999999FF, "?????ù ???????? ?????? ?????? ?????");

		GetPlayerJob(to_player)++;
		format(fmt_msg, sizeof fmt_msg, "??? ???? ? ??????????? ??? ??????? ?? %d (%s)", GetPlayerJob(to_player), GetPlayerJobAndRankName(to_player));
		SendClientMessage(to_player, 0x3399FFFF, fmt_msg);
	}
	else if(give_rang[0] == '-')
	{
		if((current_rang - 1) < 1) return SendClientMessage(playerid, 0x999999FF, "?????ù ???????? ???? 1 ?????");

		GetPlayerJob(to_player)--;
		format(fmt_msg, sizeof fmt_msg, "??? ???? ? ??????????? ??? ??????? ?? %d (%s)", GetPlayerJob(to_player), GetPlayerJobAndRankName(to_player));
		SendClientMessage(to_player, 0x3399FFFF, fmt_msg);
	}
	else return SendClientMessage(playerid, 0xCECECEFF, "??????? ????????: '+' ????? ???????? ??? '-' ????? ????????");

	if(GetPlayerTeamEx(to_player) == TEAM_GOVERNMENT && IsValidDynamic3DTextLabel(GetPlayerData(to_player, P_ADVISOR_LABEL)))
	{
		DestroyDynamic3DTextLabel(GetPlayerData(to_player, P_ADVISOR_LABEL));
		SetPlayerData(to_player, P_ADVISOR_LABEL, Text3D: -1);
	}

	if(!GetPlayerSex(to_player))
	{
		SetPlayerData(playerid, P_OSKIN, GetTeamData(GetPlayerTeamEx(to_player), O_SKINS)[GetPlayerJob(to_player)-1]);
		ResetSkin(to_player);
	}

	format(fmt_msg, sizeof fmt_msg, "?? %s ???? %s[%d] ?? %d (%s)", (give_rang[0] == '+') ? ("????????") : ("????????"),  GetPlayerNameEx(to_player), to_player, GetPlayerJob(to_player), GetPlayerJobAndRankName(to_player));
	SendClientMessage(playerid, 0x3399FFFF, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET org_skin=%d,job=%d WHERE id=%d", GetPlayerData(to_player, P_OSKIN), GetPlayerJob(to_player), GetPlayerAccountID(to_player));
	mysql_query(mysql, fmt_msg, false);

	format(fmt_msg, sizeof fmt_msg, "%s %s[acc:%d] ?? %d (%s)", (give_rang[0] == '+') ? ("???????") : ("???????"),  GetPlayerNameEx(to_player), to_player, GetPlayerJob(to_player), GetPlayerJobAndRankName(to_player));

	SendLog(playerid, LOG_TYPE_FRACTION, fmt_msg);

	return 1;
}

CMD:changeskin(playerid, params[])
{
    if (!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG))
        return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");

    if (!(9 <= GetPlayerJob(playerid) <= 10))
        return SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");

	
	if(!IsWorkDayStarted(playerid)) return 1;

    if (!strlen(params))
        return SendClientMessage(playerid, 0xCECECEFF, "???????????: /changeskin [id ??????]");


    extract params -> new to_player;

    if (!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
        return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

    if (GetPlayerTeamEx(to_player) != GetPlayerTeamEx(playerid))
        return SendClientMessage(playerid, 0x999999FF, "???? ????? ?? ??????? ? ????? ???????????");


    new team_id = GetPlayerTeamEx(playerid);
    new fmt_str[64], text[1024];
    new old_skin = -1, count;

    SetPVarInt(playerid, "change_team_skin_playerid", to_player);

    // ?????????
    strcat(text, "{EB4C42}????? | {FFFFFF}ID ?????\t\t???\n");

    for (new i = 0; i < 9; i++)
    {
        new skin = GetTeamData(team_id, O_SKINS)[i];

        if (skin == old_skin) continue;
        old_skin = skin;

        SetPlayerListitemValue(playerid, count, i);
        count++;

        new gender_tag[24];
        if (i < 5)
            format(gender_tag, sizeof gender_tag, "{EB4C42}[ ??? ]");
        else
            format(gender_tag, sizeof gender_tag, "{00FF00}[ ??? ]");

        format(fmt_str, sizeof fmt_str, "{EB4C42}%d | {FFFFFF}%d\t\t%s\n", count, skin, gender_tag);
        strcat(text, fmt_str);
    }

    Dialog(playerid, DIALOG_TEAM_CHANGE_SKIN, DIALOG_STYLE_TABLIST_HEADERS, "{EB4C42}???????? ????????? ??ù ??????:", text, "??", "??????");
    return 1;
}

CMD:showall(playerid, params[])
{
    if (!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG))
        return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
    if (!(9 <= GetPlayerJob(playerid) <= 10))
        return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");


    new query[128];
    format(query, sizeof query,
        "SELECT name, job, owarn, last_login FROM accounts WHERE team = %d ORDER BY job DESC",
        GetPlayerTeamEx(playerid)
    );

    mysql_tquery(mysql, query, "ShowOrgAllPlayers", "i", playerid);
    return 1;
}

forward ShowOrgAllPlayers(playerid);
public ShowOrgAllPlayers(playerid)
{
    new rows = cache_get_row_count();
    if (rows == 0)
        return SendClientMessage(playerid, COLOR_GREY, "??????????? ??? ? ???? ??????.");

    new fmt_text[160], list[4096] = "???????\t????\t????????\t????????? ????\n";

    for (new i = 0; i < rows; i++)
    {
        new name[24];
        new rank = cache_get_field_content_int(i, "job");
        new owarn = cache_get_field_content_int(i, "owarn");
        new last_login = cache_get_field_content_int(i, "last_login");

        cache_get_field_content(i, "name", name, sizeof name);

        new year, month, day, hour, minute, second;
        UnixToDate(last_login, year, month, day, hour, minute, second);

        new date_str[32];
        format(date_str, sizeof date_str, "%02d-%02d-%d", day, month, year);

        format(fmt_text, sizeof fmt_text,
            "%s\t%d\t%d/3\t%s\n",
            name,
            rank,
            owarn,
            date_str
        );

        strcat(list, fmt_text);
    }

    new org_id = GetPlayerTeamEx(playerid);
    new header[64];
    format(header, sizeof header, "{%06x}%s{FFFFFF} | ?????? ???????????",
        g_organization[org_id][O_COLOR] & 0xFFFFFF,
        g_organization[org_id][O_NAME]
    );

    ShowPlayerDialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_TABLIST_HEADERS, header, list, "???????", "");
    return 1;
}

CMD:find(playerid, params[])
{
	if(!(GetPlayerTeamEx(playerid) || GetPlayerJob(playerid))) return SendClientMessage(playerid, 0xCECECEFF, "?? ????? ?? ?????????/?? ???????? ? ??????????ù?");

	ShowTeamStructureDialog(playerid, GetPlayerTeamEx(playerid));
	return 1;
}

stock ShowTeamStructureDialog(playerid, teamid)
{
	new string[1500];
	new fmt_str[40];

	if(teamid)
	{
		string = "???????\t????\tù??????\t??ù\n\n{FFFFFF}";

		for(new i; i < MAX_PLAYERS; i ++)
		{
			if(!IsPlayerConnected(i)) continue;
			else if(!IsPlayerLogged(i)) continue;
			else if(GetPlayerTeamEx(i) != teamid) continue;

			format(fmt_str, sizeof fmt_str, "%d\t\t%d\t%d\t\t%s", GetPlayerLevel(i), GetPlayerJob(i), GetPlayerPhone(i), GetPlayerNameEx(i));
			strcat(string, fmt_str);

			if(IsPlayerAFK(i))
				strcat(string, "-AFK");

			strcat(string, "\n");
		}

		if(IsTeamSubdivision(teamid))
			Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FFCC00}????? ????????????ù online", string, "???????", "");
		else
			Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FFCC00}????? ??????????? online", string, "???????", "");
	}
	else
	{
		string = "???????\tù??????\t??ù\n\n{FFFFFF}";

		for(new i; i < MAX_PLAYERS; i ++)
		{
			if(!IsPlayerConnected(i)) continue;
			else if(!IsPlayerLogged(i)) continue;
			else if(GetPlayerJob(i) != GetPlayerJob(playerid)) continue;

			format(fmt_str, sizeof fmt_str, "%d\t%d%s%s", GetPlayerLevel(i), GetPlayerPhone(i), GetPlayerPhone(i) > 0 ? ("\t") : ("\t\t"), GetPlayerNameEx(i));
			strcat(string, fmt_str);

			if(IsPlayerAFK(i))
				strcat(string, "-AFK");

			if(IsPlayerInJob(i))
				strcat(string, " *");

			strcat(string, "\n");
		}

		Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FFCC00}?????????? online", string, "???????", "");
	}
	return 1;
}

CMD:leadersooooooooold(playerid, params[])
{
	new fmt_text[75],
		list[sizeof fmt_text * 10 + 50] = "??????????ù - ????????? - ??ù - ù??????{FFFFFF}\n";

	foreach(new i : Player)
	{
		if(!IsPlayerConnected(i)) continue;
		else if(!IsPlayerLogged(i)) continue;
		else if(!GetPlayerTeamEx(i)) continue;
		else if(GetPlayerJob(i) != 10) continue;

		format(fmt_text, sizeof fmt_text, "\n%s - %s - %s[%d] - %d", GetTeamName(GetPlayerTeamEx(i)), GetPlayerJobAndRankName(i), GetPlayerNameEx(i), i, GetPlayerPhone(i));
		strcat(list, fmt_text);
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{FFCD00}?????? ??????", list, "???????", "");

	return 1;
}

CMD:liclist(playerid, params[])
{
 new fmt_text[78],
  list[sizeof fmt_text * 10 + 50] = "??????????ù - ????????? - ??ù - ù??????{FFFFFF}\n";

 foreach(new i : Player)
 {
  if(!IsPlayerConnected(i)) continue;
  else if(!IsPlayerLogged(i)) continue;
  else if(GetPlayerTeamEx(i) != TEAM_GOVERNMENT) continue;
  else if(GetPlayerJob(i) != 6) continue;

  format(fmt_text, sizeof fmt_text, "\n????????????? - ???????? - %s[%d] - ???. %d", GetPlayerNameEx(i), i, GetPlayerPhone(i));
  strcat(list, fmt_text);
 }

 Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_LIST, "{FFCD00}????????? ??????", list, "???????", "");

 return 1;
}

CMD:debtorsell(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT) return SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ??????????? ?????????????");
	if(GetPlayerJob(playerid) < 8) return SendClientMessage(playerid, 0xCECECEFF, "??????? ???????? ??????????? ????????????? ? 8 ?????");

	if(!IsWorkDayStarted(playerid)) return 1;

	Dialog
	(
		playerid, DIALOG_DEBTOR_SELL_LIST, DIALOG_STYLE_LIST,
		"???????? ????????",
		"1. ???????? ???????? ?? ????ù\n\
		2. ??????? ???????ù??? ? ????????\n\
		3. ??????? ??? ? ????????",
		"?????", "???????"
	);
	return 1;
}

CMD:debtorlist(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT) return SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ??????????? ?????????????");
	if(GetPlayerJob(playerid) < 8) return SendClientMessage(playerid, 0xCECECEFF, "??????? ???????? ??????????? ????????????? ? 8 ?????");

	if(!IsWorkDayStarted(playerid)) return 1;

	Dialog
	(
		playerid, DIALOG_DEBTORLIST, DIALOG_STYLE_LIST,
		"???????? ??? ?????????????",
		"1. ?????\n\
		2. ???????ù??ù\n\
		3. ??????????? ???????",
		"???????", "???????"
	);
	return 1;
}

stock ShowDebtorListDialog(playerid, type)
{
	new
		fmt_str[36 + 1],
		text[((sizeof fmt_str) * 20) + 1],
		cur_time = gettime(),
		idx,
		count;

	if(type == 0)
	{
		for(idx = 0, count = 0; idx < g_house_loaded; idx ++)
		{
			if(count > 20) break;
			if(GetHouseData(idx, H_OWNER_ID) < 1) continue;
			if((((GetHouseData(idx, H_RENT_DATE) - cur_time) / 86400) + 1) > 0) continue;
			if(GetHouseData(idx, H_EVICTION)) continue;

			SetPlayerListitemValue(playerid, count, idx);
			count ++;

			if(GetHouseData(idx, H_TYPE))
			{
				format(fmt_str, sizeof fmt_str, "??. %d ???. %d (%s)\n", idx % 6 + 1, GetHouseData(idx, H_ENTRACE) + 1, "????????????ù ???.");
			}
			else
			{
				format(fmt_str, sizeof fmt_str, "%d (%s)\n", idx, "????????????ù ???.");
			}
			strcat(text, fmt_str);
		}
		if(!count) return SendClientMessage(playerid, 0xCECECEFF, "????????? ?? ?????? ?????? ?? ????? ???");

		Dialog(playerid, DIALOG_DEBTORLIST_HOUSE, DIALOG_STYLE_LIST, "{FFCC00}????? ?????????", text, "????????", "?????");
	}
	else if(type == 1)
	{
		for(idx = 0, count = 0; idx < g_business_loaded; idx ++)
		{
			if(count > 20) break;
			if(GetBusinessData(idx, B_OWNER_ID) < 1) continue;
			if((((GetBusinessData(idx, B_RENT_DATE) - cur_time) / 86400) + 1) > 0) continue;
			if(GetBusinessData(idx, B_EVICTION)) continue;

			SetPlayerListitemValue(playerid, count, idx);
			count ++;

			format(fmt_str, sizeof fmt_str, "%d (%s)\n", idx, "????????????ù ???.");
			strcat(text, fmt_str);
		}
		if(!count) return SendClientMessage(playerid, 0xCECECEFF, "????????? ?? ?????? ?????? ?? ???????ù??ù ???");

		Dialog(playerid, DIALOG_DEBTORLIST_BIZ, DIALOG_STYLE_LIST, "{FFCC00}???????ù??ù ?????????", text, "????????", "?????");
	}
	else
	{
		for(idx = 0, count = 0; idx < g_fuel_station_loaded; idx ++)
		{
			if(count > 20) break;
			if(GetFuelStationData(idx, FS_OWNER_ID) < 1) continue;
			if((((GetFuelStationData(idx, FS_RENT_DATE) - cur_time) / 86400) + 1) > 0) continue;
			if(GetFuelStationData(idx, FS_EVICTION)) continue;

			SetPlayerListitemValue(playerid, count, idx);
			count ++;

			format(fmt_str, sizeof fmt_str, "%d (%s)\n", idx, "????????????ù ???.");
			strcat(text, fmt_str);
		}
		if(!count) return SendClientMessage(playerid, 0xCECECEFF, "????????? ?? ?????? ?????? ?? ??? ???");

		Dialog(playerid, DIALOG_DEBTORLIST_FUEL_ST, DIALOG_STYLE_LIST, "{FFCC00}??????????? ??????? ?????????", text, "????????", "?????");
	}

	return 1;
}

stock SellDebtorsProperty()
{
	new cur_time = gettime(),
		query[180];

	for(new i; i < g_house_loaded; i ++)
	{
		if(!GetHouseData(i, H_EVICTION)) continue;
		if(GetHouseData(i, H_RENT_DATE) < cur_time) continue;

		format(query, sizeof query, "UPDATE houses SET owner_id='0',lock='0',eviction='0' WHERE id='%d'", GetHouseData(i, H_SQL_ID));
		mysql_query(mysql, query, false);

		new owner_player = GetPlayerIDBySqlID(GetHouseData(i, H_OWNER_ID));
		if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
			SetPlayerData(owner_player, P_HOUSE, -1);
			SetPlayerData(owner_player, P_HOUSE_ROOM, -1);
			SetPlayerData(owner_player, P_HOUSE_TYPE, -1);
			mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `house`=-1,`house_room`=-1,`house_type`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
			mysql_query(mysql, query, false);
		} else {
			mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `house`=-1,`house_room`=-1,`house_type`=-1 WHERE `id`=%d LIMIT 1", GetHouseData(i, H_OWNER_ID));
			mysql_query(mysql, query, false);
		}
		SetHouseData(i, H_OWNER_ID, 0);
		SetHouseData(i, H_IMPROVEMENTS,		0);

		SetHouseData(i, H_EVICTION, 0);

		SetHouseData(i, H_RENT_DATE,		0);
		SetHouseData(i, H_LOCK_STATUS,		false);

		UpdateHouse(i);

		HouseHealthInit(i);
		HouseStoreInit(i);
	}

	for(new i; i < g_business_loaded; i ++)
	{
		if(!GetBusinessData(i, B_EVICTION)) continue;
		if(GetBusinessData(i, B_RENT_DATE) < cur_time) continue;

		format(query, sizeof query, "UPDATE business SET owner_id='0',products='0',prod_price='0',lock='0',eviction='0' WHERE id='%d'", GetBusinessData(i, B_SQL_ID));
		mysql_query(mysql, query, false);

		new owner_player = GetPlayerIDBySqlID(GetBusinessData(i, B_OWNER_ID));
		if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
			SetPlayerData(owner_player, P_BUSINESS, -1);
			mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `business`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
			mysql_query(mysql, query, false);
		} else {
			mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `business`=-1 WHERE `id`=%d LIMIT 1", GetBusinessData(i, B_OWNER_ID));
			mysql_query(mysql, query, false);
		}

		SetBusinessData(i, B_OWNER_ID, 0);
		SetBusinessData(i, B_IMPROVEMENTS, 		0);

		SetBusinessData(i, B_EVICTION, 0);

		SetBusinessData(i, B_PRODS, 			0);
		SetBusinessData(i, B_PROD_PRICE,		0);

		SetBusinessData(i, B_BALANCE,			0);
		SetBusinessData(i, B_RENT_DATE,			0);
		SetBusinessData(i, B_ENTER_MUSIC,		0);
		SetBusinessData(i, B_LOCK_STATUS,		false);

		BusinessHealthPickupInit(i);

		format(query, sizeof query, "DELETE FROM business_gps WHERE bid=%d", i);
		mysql_query(mysql, query, false);

		g_business_gps_init = false;

		//format(query, sizeof query, "UPDATE business_profit SET view=0 WHERE bid=%d AND view=1", GetBusinessData(i, B_SQL_ID));
		//mysql_query(mysql, query, false);

		CallLocalFunction("UpdateBusinessLabel", "i", i);
	}

	for(new i; i < g_fuel_station_loaded; i ++)
	{
		if(!GetFuelStationData(i, FS_EVICTION)) continue;
		if(GetFuelStationData(i, FS_RENT_DATE) < cur_time) continue;

		format(query, sizeof query, "UPDATE fuel_stations SET owner_id='0',fuels='1000',fuel_price='3',lock='0',eviction='0' WHERE id='%d'", GetFuelStationData(i, FS_SQL_ID));
		mysql_query(mysql, query, false);

		new owner_player = GetPlayerIDBySqlID(GetFuelStationData(i, FS_OWNER_ID));
		if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
			SetPlayerData(owner_player, P_FUEL_ST, -1);
			format(query, sizeof query, "UPDATE accounts SET `fuel_st`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
			mysql_query(mysql, query, false);
		} else {
			format(query, sizeof query, "UPDATE accounts SET `fuel_st`=-1 WHERE `id`=%d LIMIT 1", GetFuelStationData(i, FS_OWNER_ID));
			mysql_query(mysql, query, false);
		}

		SetFuelStationData(i, FS_OWNER_ID, 0);
		SetFuelStationData(i, FS_IMPROVEMENTS, 0);

		SetFuelStationData(i, FS_EVICTION, 0);

		SetFuelStationData(i, FS_FUELS, 		1000);
		SetFuelStationData(i, FS_FUEL_PRICE,	3);
		SetFuelStationData(i, FS_BUY_FUEL_PRICE,0);

		SetFuelStationData(i, FS_BALANCE,		0);
		SetFuelStationData(i, FS_RENT_DATE,		0);
		SetFuelStationData(i, FS_LOCK_STATUS,	false);

		//format(query, sizeof query, "UPDATE fuel_stations_profit SET view=0 WHERE fid=%d AND view=1",  GetFuelStationData(i, FS_SQL_ID));
		//mysql_query(mysql, query, false);

		CallLocalFunction("UpdateFuelStationLabel", "i", i);
	}

	return 1;
}

stock SellDebtorsHotels()
{
	new cur_time = gettime();
	new query[200];

	mysql_format(mysql, query, sizeof query, "UPDATE accounts a,hotels h SET a.house=-1,a.house_room=0,a.house_type=-1,h.owner_id=0,h.rent_time=0,h.status=1 WHERE a.id=h.owner_id AND h.rent_time < %d", cur_time);
	mysql_query(mysql, query, false);

	new hotel_owner_playerid;

	for(new h_id, r_id; h_id < MAX_HOTELS; h_id ++)
	{
		for(r_id = 0; r_id < MAX_HOTEL_ROOMS; r_id ++)
		{
			if(GetHotelData(h_id, r_id, H_RENT_DATE) < cur_time) continue;

			GetPlayerID(GetHotelData(h_id, r_id, H_OWNER_NAME), hotel_owner_playerid);

			SetHotelData(h_id, r_id, H_OWNER_ID, 0);
			SetHotelData(h_id, r_id, H_RENT_DATE, 0);

			if(IsPlayerConnected(hotel_owner_playerid) && IsPlayerLogged(hotel_owner_playerid))
			{
				if(GetPlayerHouse(hotel_owner_playerid, HOUSE_TYPE_HOTEL) == h_id)
				{
					SetPlayerData(hotel_owner_playerid, P_HOUSE, 		-1);
					SetPlayerData(hotel_owner_playerid, P_HOUSE_ROOM, 	-1);
					SetPlayerData(hotel_owner_playerid, P_HOUSE_TYPE, 	-1);

					SendClientMessage(hotel_owner_playerid, 0xFF6600FF, "?? ???? ???????? ?? ????????? ?? ???????? ?????");
				}
			}
		}
	}
	return 1;
}

CMD:smenu(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) != 5) return SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ?????????? ?????????????");

	if(!IsWorkDayStarted(playerid)) return 1;

	Dialog
	(
		playerid, DIALOG_ADVISOR_MENU, DIALOG_STYLE_LIST,
		"{33CC66}???? ?????????",
		"1. ????????/?????? ???????\n\
		2. ????????/?????? ????? ???????????\n\
		3. ???????? ?????? ???????????",
		"???????", "???????"
	);
	return 1;
}

CMD:givelic(playerid, params[])
{
	if (
    GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT ||
    (GetPlayerJob(playerid) != 6 && GetPlayerJob(playerid) < 9)
)
    return SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ?????? ??????????");
   
   if(!IsWorkDayStarted(playerid)) return 1;

	if(!strlen(params))
	{
		SendClientMessage(playerid, 0xCECECEFF, "???????????: /givelic [id ??????] [????????????? ????????] [????]");
		SendClientMessage(playerid, 0x999999FF, "???????????? ????????: 1 - ???. ????? ???????? ?????ù | 2 - ???. ????? ????????????????? ?????ù | 3 - ?? ??????");
		return 1;
	}

	extract params -> new to_player, lic_id, price;

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0))
		return SendClientMessage(playerid, 0x999999FF, "????? ??????? ??????");

	if(!(1 <= lic_id <= 3)) return SendClientMessage(playerid, 0x999999FF, "???????? ????????????? ????????");

	switch(lic_id)
{
	case 1:
		if(GetPlayerData(to_player, P_DRIVING_LIC) >= 1)
			return SendClientMessage(playerid, 0x999999FF, "? ?????? ??? ???? ??????ù ???????ù (???. B)");

	case 2:
		if(GetPlayerData(to_player, P_DRIVING_LIC) == 2)
			return SendClientMessage(playerid, 0x999999FF, "? ?????? ??? ???? ???????????????ù ???????ù (???. C/D)");

	case 3:
		if(GetPlayerData(to_player, P_WEAPON_LIC) == 1)
			return SendClientMessage(playerid, 0x999999FF, "? ?????? ??? ???? ???????ù ?? ??????");
}
    
	new lic_price_limits[3][2] =
	{
		{1000, 	10000},
		{10000, 30000},
		{30000, 50000}
	};

	if(!(lic_price_limits[lic_id - 1][0] <= price <= lic_price_limits[lic_id - 1][1]))
	{
		new fmt_text[60];

		format(fmt_text, sizeof fmt_text, "????????? ???????? ?????? ???? ?? %d ?? %d ??????",
		lic_price_limits[lic_id - 1][0], lic_price_limits[lic_id - 1][1]);

		SendClientMessage(playerid, 0x999999FF, fmt_text);

		return 1;
	}

	if(GetPlayerMoneyEx(to_player) < price)
		return SendClientMessage(playerid, 0x999999FF, "? ?????? ??? ????? ????? ?????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_GIVE_LIC, lic_id, price);

	return 1;
}

CMD:setlic(playerid, params[])
{
     
	if(GetPlayerAdminEx(playerid) < 1) return 1;
	
	SetPlayerData(playerid, P_DRIVING_LIC, 2);
				
	SetPlayerData(playerid, P_WEAPON_LIC, 1);
				

	return 1;
}

CMD:free(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT || GetPlayerJob(playerid) != 7) return SendClientMessage(playerid, 0x999999FF, "??????ù ???????? ?????? ?????????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player, price; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /free [id ??????] [????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0))
		return SendClientMessage(playerid, 0x999999FF, "????? ??????? ??????");

	if(!GetPlayerData(to_player, P_JAIL))
		return SendClientMessage(playerid, 0x999999FF, "????? ?? ????????ù ? ??????");

	if(!(500 <= price <= 50000))
		return SendClientMessage(playerid, 0x999999FF, "????????? ?????? ???? ?? 500 ?? 50.000 ??????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_JAIL_FREE, price);

	return 1;
}

CMD:medhelp(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL) return SendClientMessage(playerid, 0x999999FF, "?? ?? ??????????? ????????");
	if(!IsPlayerInRangeOfPoint(playerid, 99.0, 1497.072631,2500.594726,2501.000000)) return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ????????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "?????????????: /medhelp [id ??????] [????????? ??????ù]");

	
	extract params -> new to_player, price;

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "??????? ??????? ??????");
	if(GetPlayerData(to_player, P_OCCUPIED_BED) == -1) return SendClientMessage(playerid, 0x999999FF, "???? ????? ?? ????? ? ????????");
	if(!(100 <= price <= 5000)) return SendClientMessage(playerid, 0xCECECEFF, "????????? ??????ù ?????? ???? ?? 100 ?? 5000 ??????");
	if(GetPlayerMoneyEx(to_player) < price) return SendClientMessage(playerid, 0x999999FF, "? ???????? ??? ? ????? ??????? ?????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_MEDHELP, price);
	return 1;
}

CMD:medbed(playerid, params[])
{
    if(IsPlayerInRangeOfPoint(playerid, 100.0, 1484.458862,2494.261474,2501.000000))
    {
        if(GetPlayerHealthEx(playerid) >= 75)
        {
            return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ?????????? ? ???????");
        }
        new bedid = -1;

        for(new i; i < sizeof g_med_bed_pos; i++)
        {
            if(!IsPlayerInRangeOfPoint(playerid, 2.5, g_med_bed_pos[i][0], g_med_bed_pos[i][1], g_med_bed_pos[i][2])) continue;
            bedid = i;
            break;
        }

        if(bedid == -1) return 1;
        else if(GetPlayerData(playerid, P_OCCUPIED_BED) != -1) return SendClientMessage(playerid, 0xCECECEFF, "?? ??? ???ù?? ?????");
        else if(g_med_bed_used[bedid]) return SendClientMessage(playerid, 0xCECECEFF, "??? ????? ???ù??");

        else
        {
            SetPlayerData(playerid, P_OCCUPIED_BED, bedid);

            g_med_bed_used[bedid] = true;
           
           gPlayerInMedBed[playerid] = true;

            new fmt_msg[200];

            format(fmt_msg, sizeof fmt_msg, "{ffff00}´ ???ù??ù ?????????ù ????? ª\n \n{ffff00}|{ffffff}????? ?????: {ffff00}%d\n{ffffff}???????: {ffff00}%s\n \n{ffffff}????????? ????? ??ù ?????????????ù\n? ?????????? ??????", bedid + 1, GetPlayerNameEx(playerid));
            UpdateDynamic3DTextLabelText(g_med_bed_label[bedid], 0xFFFFFFFF, fmt_msg);

            format(fmt_msg, sizeof fmt_msg, "?? ???ù?? ????? ?%d. ? ??????????? ?? ?????ù??ù ???????ù ??????? ????? ???ù?? ????ù", bedid + 1);
            SendClientMessage(playerid, 0x32a44bFF, fmt_msg);

            SendClientMessage(playerid, -1, "????? ?????????ù ????????? ? ????? ??? ??????? ?? ??????? ????????");
        }
        SetTimer("HospitalTreatment", (random(5) + 1) * 1000, false);
    }

    return 1;
}

CMD:out(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL) return SendClientMessage(playerid, 0x999999FF, "?? ?? ??????????? ????????");
	if(!IsPlayerInRangeOfPoint(playerid, 99.0, 2038.0170,1419.8960,999.1563)) return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ????????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /out [id ??????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");
	if(GetPlayerData(to_player, P_OCCUPIED_BED) == -1) return SendClientMessage(playerid, 0x999999FF, "????? ?????? ?????????ù ?? ???????");

	ClearMedBed(to_player, GetPlayerData(playerid, P_OCCUPIED_BED));
	SetPlayerData(to_player, P_HOSPITAL, false);

	SetPlayerChatBubble(to_player, "???????", 0x66CC00FF, 10.0, 2000);

	new fmt_msg[60];
	format(fmt_msg, sizeof fmt_msg, "??????????? ???????? %s ??????? ??? ?? ????????", GetPlayerNameEx(playerid));
	SendClientMessage(to_player, 0x3399FFFF, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "?? ???????? %s ?? ????????", GetPlayerNameEx(to_player));
	SendClientMessage(playerid, 0x3399FFFF, fmt_msg);
	return 1;
}

CMD:heal(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL) return SendClientMessage(playerid, 0x999999FF, "?? ?? ??????????? ????????");	
	if(!IsWorkDayStarted(playerid)) return 1;
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "?????????????: /heal [id ??????] [???? ?? ???????]");

	
	extract params -> new to_player, price;

	new vehicleid = GetPlayerVehicleID(playerid);

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(playerid)) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(GetVehicleData(vehicleid, V_ACTION_TYPE) != VEHICLE_ACTION_TYPE_MED_CAR || GetPlayerVehicleID(to_player) != vehicleid) return SendClientMessage(playerid, 0x999999FF, "?? ??? ??? ??????? ?????????? ?? ? ?????? ?????? ??????");
	if(!(0 <= price <= 5000)) return SendClientMessage(playerid, 0xCECECEFF, "????????? ??????ù ?????? ???? ?? 0 ?? 5000 ??????");
	if(GetPlayerMoneyEx(to_player) < price) return SendClientMessage(playerid, 0x999999FF, "? ???????? ??? ? ????? ??????? ?????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_HEAL, price);
	return 1;
}

CMD:changesex(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL) return SendClientMessage(playerid, 0x999999FF, "?? ?? ??????????? ????????");
	if(!IsPlayerInRangeOfPoint(playerid, 99.0, 2038.0170,1419.8960,999.1563)) return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ????????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "?????????????: /changesex [id ??????] [????????? ????????]");

	
	extract params -> new to_player, price;

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");
	if(GetPlayerData(to_player, P_OCCUPIED_BED) == -1) return SendClientMessage(playerid, 0xCECECEFF, "????? ?????? ?????????ù ?? ???????????? ???????");
	if(!(500000 <= price <= 1000000)) return SendClientMessage(playerid, 0xCECECEFF, "????????? ???????? ?????? ???? ?? 500000 ?? 1000000 ??????");
	if(GetPlayerMoneyEx(to_player) < price) return SendClientMessage(playerid, 0x999999FF, "? ???????? ??? ? ????? ??????? ?????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_CHANGE_SEX, price);
	return 1;
}

CMD:cuff(playerid, params[])
{
	if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FSIN)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /cuff [id ??????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	if(GetPlayerData(to_player, P_CUFFED)) return SendClientMessage(playerid, 0x999999FF, "????? ??? ??????? ? ?????????");
	
	if(GetPlayerData(to_player, P_SUSPECT) == 0 && GetPlayerData(to_player, P_FJAIL) == 0)
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ù??ù???ù ????????????");

	SetPlayerSpecialAction(to_player, SPECIAL_ACTION_CUFFED);
	SetPlayerAttachedObject(to_player, A_OBJECT_SLOT_HAND, 19418, A_OBJECT_BONE_RIGHT_HAND, -0.011, 0.028, -0.022, -15.600012, -33.699977, -81.700035, 0.891999, 1.00, 1.168);
	SetPlayerData(to_player, P_CUFFED, true);
	
	TogglePlayerControllable(to_player, false);
	
	SetPVarInt(playerid, "cufferid", 1);

	new fmt_str[90];

	format(fmt_str, sizeof fmt_str, "%s %s ????? ?? %s ?????????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));
	SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);

	return 1;
}

CMD:uncuff(playerid, params[])
{
	if((GetPlayerTeamEx(playerid) < TEAM_DPS || GetPlayerTeamEx(playerid) > TEAM_FSIN))
	return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /uncuff [id ??????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	if(!GetPlayerData(to_player, P_CUFFED)) return SendClientMessage(playerid, 0x999999FF, "????? ?? ??????? ? ?????????");

	SetPlayerSpecialAction(to_player, SPECIAL_ACTION_NONE);
	RemovePlayerAttachedObject(to_player, A_OBJECT_SLOT_HAND);
	SetPlayerData(to_player, P_CUFFED, false);
	
	TogglePlayerControllable(to_player, true);
	
	DeletePVar(playerid, "cufferid");

	new fmt_str[90];

	format(fmt_str, sizeof fmt_str, "%s %s ??ù? ? %s ?????????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));
	SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);

	return 1;
}

CMD:putpl(playerid, params[])
{
    if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
    if(!IsWorkDayStarted(playerid)) return 1;

    extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /putpl [id ??????]");

    if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
    if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");
    if(!GetPlayerData(to_player, P_CUFFED)) return SendClientMessage(playerid, 0x999999FF, "????? ?? ??????? ? ?????????");

    new vehicle_id = GetPlayerVehicleID(playerid);
    if(!vehicle_id) return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ??????????");

    new bool:is_there_some_free_places;
    for(new i = 2; i <= 3; i++) // ?????? ?????
    {
        if(IsVehicleSeatOccupied(vehicle_id, i)) continue;
        PutPlayerInVehicle(to_player, vehicle_id, i);
        is_there_some_free_places = true;
        break;
    }
    if(!is_there_some_free_places) return SendClientMessage(playerid, 0x999999FF, "?????? ????? ?????? ?????????ù ???ù??");

    // ????????? ?????????ù
    if(g_IsFollowing[to_player]) StopFollowing(to_player);

    new fmt_str[90];
    format(fmt_str, sizeof fmt_str, "%s %s ??????? %s ? ??????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));
    SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);

    return 1;
}


CMD:search(playerid, params[])
{
	if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /search [id ??????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	new fmt_text[110],
		bool: some_is_found;

	format(fmt_text, sizeof fmt_text, "%s %s ???????? ????? ? %s", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));
	SendMessageInLocal(playerid, fmt_text, 0xDD90FFFF, 25.0);

	if(GetPlayerData(to_player, P_DRUGS))
	{
		format(fmt_text, sizeof fmt_text, "? %s[%d] ?????????? %d ? ??????????", GetPlayerData(to_player, P_DRUGS));
		SendClientMessage(playerid, 0xFFFF00FF, fmt_text);

		some_is_found = true;
	}
	if(GetPlayerData(to_player, P_AMMO))
	{
		format(fmt_text, sizeof fmt_text, "? %s[%d] ?????????? %d ????????", GetPlayerData(to_player, P_AMMO));
		SendClientMessage(playerid, 0xFFFF00FF, fmt_text);

		some_is_found = true;
	}

	if(!some_is_found) SendClientMessage(playerid, 0xFFFF00FF, "?????? ?? ???????");

	return 1;
}

CMD:su(playerid, params[])
{
    if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
    if(GetPlayerJob(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ? 6-?? ?????.");
    if(!IsWorkDayStarted(playerid)) return 1;

    new criminalid, wanted_level;
    new message[66];
    if(sscanf(params, "dds[66]", criminalid, wanted_level, message))
        return SendClientMessage(playerid, 0xCECECEFF, "???????????: /su [id] [??????? ???????] [???????]");

    if(!IsPlayerConnected(criminalid) || !IsPlayerLogged(criminalid) || criminalid == playerid)
        return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

    if(!strlen(message))
        return SendClientMessage(playerid, 0x999999FF, "??????? ???????");
       
    if(GetPlayerData(criminalid, P_JAIL) > 0 || GetPlayerData(criminalid, P_FJAIL) > 0)
        return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??? ???????????. ?????? ??????? ??????????");

    if(wanted_level < 1 || wanted_level > 6)
        return SendClientMessage(playerid, 0x999999FF, "??????? ??????? ?????? ???? ?? 1 ?? 6");

    new current_wanted = GetPlayerSuspect(criminalid);
    if(current_wanted >= 6)
        return SendClientMessage(playerid, 0x999999FF, "????? ????? ???????????? ??????? ???????");

    new final_wanted = current_wanted + wanted_level;
    if(final_wanted > 6) final_wanted = 6;

    SetPlayerData(criminalid, P_SUSPECT, final_wanted);
    SetPlayerSuspectInit(criminalid);
    UpdatePlayerDatabaseInt(criminalid, "suspect", final_wanted);

    new fmt_text[255];
    format(fmt_text, sizeof fmt_text, "%s ???ù??? ??? ? ??????. ???????: %s. ù?????? ??????? ??????? %d",
        GetPlayerNameEx(playerid), message, final_wanted);
    SendClientMessage(criminalid, 0x3399FFFF, fmt_text);

    format(fmt_text, sizeof fmt_text, "?? ???ù???? %s ? ??????. ???????: %s. ù?????? ??????? ??????? %d",
        GetPlayerNameEx(criminalid), message, final_wanted);
    SendClientMessage(playerid, 0x3399FFFF, fmt_text);

    format(fmt_text, sizeof fmt_text, "%s %s[%d] ???ù??? %s[%d] ? ?????? [%d/6], ???????: %s",
        GetPlayerJobAndRankName(playerid),
        GetPlayerNameEx(playerid),
        playerid,
        GetPlayerNameEx(criminalid),
        criminalid,
        final_wanted,
        message);
    SendMessageToPoliceTeam(fmt_text, COLOR_GOLD);

    AddPlayerData(playerid, P_PROGRESS_EXP_3, +, 1);
    UpdatePlayerDatabaseInt(playerid, "ProgressExp3", GetPlayerData(playerid, P_PROGRESS_EXP_3));

    if(GetPlayerData(playerid, P_PROGRESS_EXP_3) == 500)
    {
        SendClientMessage(playerid, COR_QUEST, "[?????????ù]: "c_b"?? ??????? ????????? ?????????? "c_i"'??????ù ?2'. "c_b"???????: "c_s"100 DONATE-RUB");
        GivePlayerDonateRub(playerid, 100, "?????????? ?????????ù / ??????ù");
        SetPlayerData(playerid, P_PROGRESS_3, 1);
        UpdatePlayerDatabaseInt(playerid, "Progress3", 1);
        AddPlayerData(playerid, P_TOP_4, +, 1);
        UpdatePlayerDatabaseInt(playerid, "TOP_Progress", GetPlayerData(playerid, P_TOP_4));
    }

    return 1;
}

CMD:clear(playerid, params[])
{
    if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
    if(GetPlayerJob(playerid) < 3) return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ? 3-?? ?????.");
    if(!IsWorkDayStarted(playerid)) return 1;

    extract params -> new criminalid; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /clear [id ??????]");

    if(!IsPlayerConnected(criminalid) || !IsPlayerLogged(criminalid) || criminalid == playerid)
        return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

    if(!GetPlayerSuspect(criminalid))
        return SendClientMessage(playerid, 0x999999FF, "????? ?? ????? ???????");

    SetPlayerData(criminalid, P_SUSPECT, 0);
    SetPlayerSuspectInit(criminalid);
    UpdatePlayerDatabaseInt(criminalid, "suspect", 0);

    new fmt_text[255];
    format(fmt_text, sizeof fmt_text, "%s ?????? ??? ?? ???? ?????????????", GetPlayerNameEx(playerid));
    SendClientMessage(criminalid, 0x3399FFFF, fmt_text);

    format(fmt_text, sizeof fmt_text, "?? ??????? %s ?? ???? ?????????????", GetPlayerNameEx(criminalid));
    SendClientMessage(playerid, 0x3399FFFF, fmt_text);

    format(fmt_text, sizeof fmt_text, "%s %s[%d] ?????? %s[%d] ?? ???? ????????????? ?????",
        GetPlayerJobAndRankName(playerid),
        GetPlayerNameEx(playerid),
        playerid,
        GetPlayerNameEx(criminalid),
        criminalid);
    SendMessageToPoliceTeam(fmt_text, COLOR_GOLD);

    return 1;
}

CMD:arrest(playerid, params[])
{
    if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
    if(!IsWorkDayStarted(playerid)) return 1;

    extract params -> new criminalid; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /arrest [id ??????]");

    if(!IsPlayerConnected(criminalid) || !IsPlayerLogged(criminalid) || criminalid == playerid)
        return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

    if(!GetPlayerData(criminalid, P_CUFFED))
        return SendClientMessage(playerid, 0x999999FF, "????? ?? ? ??????????");

    if(!IsPlayerInRangeOfPoint(playerid, 10.0, 2576.0847,-2416.1118,22.4946) ||
       !IsPlayerInRangeOfPoint(criminalid, 10.0, 2576.0847,-2416.1118,22.4946))
        return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ?????ù ????????ù ??????? ?2");

    JailPlayer(criminalid, GetPlayerSuspect(criminalid) * 5);

    SetPlayerData(criminalid, P_SUSPECT, 0);
    UpdatePlayerDatabaseInt(criminalid, "suspect", 0);
    SetPlayerData(criminalid, P_CUFFED, false);
    SetPlayerSuspectInit(criminalid);

    new fmt_text[128];
    format(fmt_text, sizeof fmt_text, "?? ????????? ??????????? %s[%d] ? ????????? ??? ??? ??????", GetPlayerNameEx(criminalid), criminalid);
    SendClientMessage(playerid, 0x3399FFFF, fmt_text);

    format(fmt_text, sizeof fmt_text, "%s %s[%d] ???????? ??? ? ???????? ??? ??????", GetPlayerJobAndRankName(playerid),
        GetPlayerNameEx(playerid), playerid);
    SendClientMessage(criminalid, 0x3399FFFF, fmt_text);

    format(fmt_text, sizeof fmt_text, "%s %s[%d] ???????? %s[%d] ??? ??????",
        GetPlayerJobAndRankName(playerid),
        GetPlayerNameEx(playerid),
        playerid,
        GetPlayerNameEx(criminalid),
        criminalid);
    SendMessageToPoliceTeam(fmt_text, COLOR_GOLD);

    SendClientMessage(criminalid, 0xCECECEFF, "????ù ?? ????????ù ?????????ù: {CCCC00}/time");

    AddPlayerData(playerid, P_PROGRESS_EXP_4, +, 1);
    UpdatePlayerDatabaseInt(playerid, "ProgressExp4", GetPlayerData(playerid, P_PROGRESS_EXP_4));

    if(GetPlayerData(playerid, P_PROGRESS_EXP_4) == 500)
    {
        SendClientMessage(playerid, COR_QUEST, "[?????????ù]: "c_b"?? ??????? ????????? ?????????? "c_i"'??????ù ?3'. "c_b"???????: "c_s"100 DONATE-RUB");
        GivePlayerDonateRub(playerid, 100, "?????????? ?????????ù / ??????ù");

        SetPlayerData(playerid, P_PROGRESS_4, 1);
        UpdatePlayerDatabaseInt(playerid, "Progress4", 1);

        AddPlayerData(playerid, P_TOP_4, +, 1);
        UpdatePlayerDatabaseInt(playerid, "TOP_Progress", GetPlayerData(playerid, P_TOP_4));
    }

    AddPlayerData(playerid, P_F_QUEST_EXP_3, +, 1);
    UpdatePlayerDatabaseInt(playerid, "FracQuestExp3", GetPlayerData(playerid, P_F_QUEST_EXP_3));

    if(GetPlayerData(playerid, P_F_QUEST_EXP_3) == 40)
    {
        SendClientMessage(playerid, COR_QUEST, "[??????]: "c_b"?? ??????? ????????? ????? "c_i"'??????????? ?????? ???? ? ??????'. "c_b"???????: "c_s"1 CASE(/opencase)");

        AddPlayerData(playerid, P_DONATE_CASE, +, 1);
        UpdatePlayerDatabaseInt(playerid, "case", GetPlayerData(playerid, P_DONATE_CASE));

        SetPlayerData(playerid, P_F_QUEST_3, 1);
        UpdatePlayerDatabaseInt(playerid, "FracQuest3", 1);

        AddPlayerData(playerid, P_TOP_5, +, 1);
        UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
    }

    return 1;
}

CMD:m(playerid, params[])
{
	if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /m [?????]");


	new fmt_text[128];

	format(fmt_text, sizeof fmt_text, "<< %s %s[%d]: %s >>", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), playerid, params);
	SendMessageInLocal(playerid, fmt_text, 0xFFFF00FF, 60.0);

	return 1;
}

CMD:takelic(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_DPS) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????");
	if(GetPlayerJob(playerid) < 3) return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ? 3-?? ?????.");
	if(!IsWorkDayStarted(playerid)) return 1;

	extract params -> new to_player, string:message[66]; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /takelic [id ??????] [???????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");
	if(!strlen(message)) return SendClientMessage(playerid, 0x999999FF, "??????? ???????");
	if(!GetPlayerData(to_player, P_DRIVING_LIC)) return SendClientMessage(playerid, 0x999999FF, "? ?????? ??? ????");

	new fmt_text[128];
	format(fmt_text, sizeof fmt_text, "%s[%d] ?????? ? ??? ?????. ???????: %s", GetPlayerNameEx(playerid), playerid, message);
	SendClientMessage(to_player, 0x3399FFFF, fmt_text);
	format(fmt_text, sizeof fmt_text, "?? ??????? ? %s[%d] ?????. ???????: %s", GetPlayerNameEx(to_player), to_player, message);
	SendClientMessage(playerid, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "%s %s[%d] ?????? ? %s[%d] %s ?????, ???????: %s",
	GetPlayerJobAndRankName(playerid),
	GetPlayerNameEx(playerid),
	playerid,
	GetPlayerNameEx(to_player),
	to_player,
	GetPlayerData(to_player, P_DRIVING_LIC) == 2 ? "????." : "???????",
	message);
	SendMessageToPoliceTeam(fmt_text, COLOR_GOLD);

	SetPlayerData(to_player, P_DRIVING_LIC, 0);
	UpdatePlayerDatabaseInt(to_player, "driving_lic", 0);

	return 1;
}

CMD:wanted(playerid, params[])
{
	if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");

	new fmt_text[40],
		fmt_list[1024] = "??????\t??ù{FFFFFF}\n";

	foreach(new i : Player)
	{
		if(!GetPlayerSuspect(i)) continue;
		format(fmt_text, sizeof fmt_text, "\n%d\t\t%s", GetPlayerSuspect(i), GetPlayerNameEx(i));
		strcat(fmt_list, fmt_text);
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "{ffcd00}?????? ?????????????", fmt_list, "???????", "");

	return 1;
}


CMD:ticket(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_DPS) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????");
	if(GetPlayerJob(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ? 6-?? ?????.");
	if(!IsWorkDayStarted(playerid)) return 1;

	extract params -> new to_player, amount, string:message[64]; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /ticket [id ??????] [????? ??????] [???????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");
	if(!(1 <= amount <= 50000)) return SendClientMessage(playerid, 0x999999FF, "????? ?????? ????? ???? ?? 1 ?? 50.000 ??????");
	if(!strlen(message)) return SendClientMessage(playerid, 0x999999FF, "??????? ???????");

	CreateTicket(to_player, amount, GetPlayerNameEx(playerid), message);

	new fmt_text[128];
	format(fmt_text, sizeof fmt_text, "%s[%d] ??????? ??? ????? ? ??????? %d ???. ???????: %s", GetPlayerNameEx(playerid), playerid, amount, message);
	SendClientMessage(to_player, 0x3399FFFF, fmt_text);
	format(fmt_text, sizeof fmt_text, "?? ???????? %s[%d] ????? ? ??????? %d ???. ???????: %s", GetPlayerNameEx(to_player), to_player, amount, message);
	SendClientMessage(playerid, 0x3399FFFF, fmt_text);

	format(fmt_text, sizeof fmt_text, "%s %s[%d] ??????? %s[%d] ????? (%d ???), ???????: %s",
	GetPlayerJobAndRankName(playerid),
	GetPlayerNameEx(playerid),
	playerid,
	GetPlayerNameEx(to_player),
	to_player,
	amount,
	message);
	SendMessageToPoliceTeam(fmt_text, COLOR_GOLD);

	new Cache:result, id;
	result = mysql_query(mysql, "SELECT id FROM tickets ORDER BY id DESC LIMIT 1", true);
	id = cache_get_row_int(0, 0);
	cache_delete(result);

	new day, month, year;
	getdate(year, month, day);
	format(fmt_text, sizeof fmt_text, "????? ??????: #%d | ????: %02d-%02d-%d", id, day, month, year);
	SendClientMessage(playerid, 0xFFCD00FF, fmt_text);

	AddPlayerData(playerid, P_PROGRESS_EXP_2, +, 1);
	UpdatePlayerDatabaseInt(playerid, "ProgressExp2", GetPlayerData(playerid, P_PROGRESS_EXP_2));

	if(GetPlayerData(playerid, P_PROGRESS_EXP_2) == 500)
	{
	    SendClientMessage(playerid, COR_QUEST, "[?????????ù]: "c_b"?? ??????? ????????? ?????????? "c_i"'??????ù ?1'. "c_b"???????: "c_s"100 DONATE-RUB");
	    GivePlayerDonateRub(playerid, 100, "?????????? ?????????ù / ??????ù");
	    SetPlayerData(playerid, P_PROGRESS_2, 1);
	    UpdatePlayerDatabaseInt(playerid, "Progress2", 1);
	    AddPlayerData(playerid, P_TOP_4, +, 1);
	    UpdatePlayerDatabaseInt(playerid, "TOP_Progress", GetPlayerData(playerid, P_TOP_4));
	}

	return 1;
}

CMD:delticket(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_DPS) return SendClientMessage(playerid, 0x999999FF, "?? ?? ????????? ?????");
	if(GetPlayerJob(playerid) < 3) return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ? 3-?? ?????.");
	if(!IsWorkDayStarted(playerid)) return 1;

	extract params -> new ticket_id; else return SendClientMessage(playerid, 0xCECECEFF, "/delticket [????? ??????]");

	new query[144], Cache:result, rows, uid, reason[64], player_name[21], status, amount;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM tickets WHERE id=%d", ticket_id);
	result = mysql_query(mysql, query, true);
	rows = cache_num_rows();

	if(!rows) {
		cache_delete(result);
		return SendClientMessage(playerid, 0x999999FF, "????? ? ????? ??????? ?? ??????");
	}

	uid = cache_get_field_content_int(0, "uid");
	status = cache_get_field_content_int(0, "status");
	amount = cache_get_field_content_int(0, "amount");
	cache_get_field_content(0, "description", reason);
	cache_delete(result);

	if(status) return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ??????? ??? ?????????? ?????");

	mysql_format(mysql, query, sizeof query, "SELECT name FROM accounts WHERE id=%d", uid);
	result = mysql_query(mysql, query, true);
	cache_get_row(0, 0, player_name);
	cache_delete(result);

	mysql_format(mysql, query, sizeof query, "DELETE FROM tickets WHERE id=%d", ticket_id);
	mysql_query(mysql, query, false);

	format(query, sizeof query, "?? ??????? ????? #%d ?? ???? ?????? ?????", ticket_id);
	SendClientMessage(playerid, 0x66CC33FF, query);

	format(query, sizeof query, "%s %s[%d] ?????? ????? #%d (%s, %s, %d ???) ?? ???? ?????? ?????",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		playerid,
		ticket_id,
		player_name,
		reason,
		amount);
	SendMessageToPoliceTeam(query, COLOR_GOLD);

	return 1;
}

CMD:tickets(playerid, params[])
{
	new query[128],
		Cache: result,
		rows;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM tickets WHERE uid=%d", GetPlayerAccountID(playerid));
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	SendClientMessage(playerid, 0x66CC33FF, "?????? ???????:");

	if(!rows)
		SendClientMessage(playerid, 0xFFCD00FF, "?????? ???????????");

	else
	{
		new paid_tickets;

		for(new idx; idx < rows; idx ++)
		{
			new id = cache_get_field_content_int(idx, "id"),
				amount = cache_get_field_content_int(idx, "amount"),
				status = cache_get_field_content_int(idx, "status"),
				desc[64],
				issuer[32];

			cache_get_field_content(idx, "description", desc);
			cache_get_field_content(idx, "issuer", issuer);

			format(query, sizeof query, "#%d | %d ??? | %s | ?????: %s | %s", id, amount, desc, issuer, status ? "{66CC33}???????" : "{FF5533}?? ???????");
			SendClientMessage(playerid, 0xFFCD00FF, query);

			if(status) paid_tickets ++;
		}

		format(query, sizeof query, "????? ?????????? ???????: %d | ????????: %d | ?? ????????: %d", rows, paid_tickets, rows-paid_tickets);
		SendClientMessage(playerid, 0x66CC33FF, query);
	}

	cache_delete(result);

	return 1;
}

CMD:ptickets(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_DPS) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /ptickets [id ??????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	new query[128],
		Cache: result,
		rows;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM tickets WHERE uid=%d", GetPlayerAccountID(to_player));
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	SendClientMessage(playerid, 0x66CC33FF, "?????? ???????:");

	if(!rows)
		SendClientMessage(playerid, 0xFFCD00FF, "?????? ???????????");

	else
	{
		new paid_tickets;

		for(new idx; idx < rows; idx ++)
		{
			new id = cache_get_field_content_int(idx, "id"),
				amount = cache_get_field_content_int(idx, "amount"),
				status = cache_get_field_content_int(idx, "status"),
				desc[64],
				issuer[32];

			cache_get_field_content(idx, "description", desc);
			cache_get_field_content(idx, "issuer", issuer);

			format(query, sizeof query, "#%d | %d ??? | %s | ?????: %s | %s", id, amount, desc, issuer, status ? "{66CC33}???????" : "{FF5533}?? ???????");
			SendClientMessage(playerid, 0xFFCD00FF, query);

			if(status) paid_tickets ++;
		}

		format(query, sizeof query, "????? ?????????? ???????: %d | ????????: %d | ?? ????????: %d", rows, paid_tickets, rows-paid_tickets);
		SendClientMessage(playerid, 0x66CC33FF, query);
	}

	cache_delete(result);

	return 1;
}


CMD:makegun(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_ARMY && !(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA))
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ???????????? ???");
		
	if(!IsWorkDayStarted(playerid)) return 1;

	extract params -> new weapon_id, weapon_ammo;

	if(!(1 <= weapon_id <= 7))
	{
		Dialog
		(
			playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
			"????????? ??????",
			"{66CCCC}\
			ID\t????????\t\t?????????\n\n\
			{FFFFFF}1.\tSilenced 9mm\t\t3\n\
			2.\tDesert Eagle\t\t6\n\
			3.\tShotgun\t\t8\n\
			4.\tMP5\t\t\t9\n\
			5.\tAK47\t\t\t10\n\
			6.\tM4\t\t\t10\n\
			7.\tCountry Rifle\t\t11\n\n\
			??ù ?????????ù ???????? ? ?????????? ??????\n\
			?????????? ??????? ??? ? ?????\
			",
			"???????", ""
		);

		SendClientMessage(playerid, 0xCECECEFF, "???????????: /makegun [id ?????ù] [???-?? ????????]");

		return 1;
	}

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /makegun [id ?????ù] [???-?? ????????]");
	if(weapon_ammo <= 0) return SendClientMessage(playerid, 0xCECECEFF, "???????? ?????????? ????????");

	enum TEMP_GUN_INFO
	{
		GUN_ID,
		GUN_METAL,
		GUN_NAME[16]
	};

	new temp_gun[7][TEMP_GUN_INFO] =
	{
		{23, 3, 	"Silenced 9mm"},
		{24, 6, 	"Desert Eagle"},
		{25, 8, 	"Shotgun"},
		{29, 9, 	"MP5"},
		{30, 10, 	"AK47"},
		{31, 10, 	"M4"},
		{33, 11, 	"Country Rifle"}
	};

	if(weapon_id != GetPlayerWeapon(playerid) && GetPlayerData(playerid, P_METALL) < temp_gun[weapon_id-1][GUN_METAL])
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ??????? ?????????? ??????????");
	if(GetPlayerData(playerid, P_AMMO) < weapon_ammo)
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ??????? ?????????? ????????");

	new fmt_text[128];

	if(GetPlayerWeapon(playerid) == temp_gun[weapon_id-1][GUN_ID])
	{
		format(fmt_text, sizeof fmt_text, "??????? ? %s %d ????????", temp_gun[weapon_id-1][GUN_NAME], weapon_ammo);

		Action(playerid, fmt_text, _, false);
	}
	else
	{
		new w_id, w_ammo;

		for(new i; i < 13; i++)
		{
			GetPlayerWeaponData(playerid, i, w_id, w_ammo);

			if(w_id == temp_gun[weapon_id-1][GUN_ID])
			{
				GivePlayerWeapon(playerid, w_id, -w_ammo);
				break;
			}
		}

		AddPlayerData(playerid, P_METALL, -, temp_gun[weapon_id-1][GUN_METAL]);
		UpdatePlayerDatabaseInt(playerid, "metall", GetPlayerData(playerid, P_METALL));

		format(fmt_text, sizeof fmt_text, "?????? %s ?? ?????????? ? %d ????????", temp_gun[weapon_id-1][GUN_NAME], weapon_ammo);

		Action(playerid, fmt_text, _, false);
	}

	GivePlayerWeapon(playerid, temp_gun[weapon_id-1][GUN_ID], weapon_ammo);

	AddPlayerData(playerid, P_AMMO, -, weapon_ammo);
	UpdatePlayerDatabaseInt(playerid, "ammo", GetPlayerData(playerid, P_AMMO));

	return 1;
}

CMD:close(playerid, params[])
{
	if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA))
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ???????????? ???");

	if(GetPlayerJob(playerid) < 8)
		return SendClientMessage(playerid, 0x999999FF, "????????? ??? ????????? ????? ????? ? 8-??? ?????");
		
	if(!IsWorkDayStarted(playerid)) return 1;

	new repository = GetPlayerTeamEx(playerid) - TEAM_OPG_ARZAMASKAYA,
		fmt_text[70];

	SetGangRepositoryData(repository, GR_LOCK, GetGangRepositoryData(repository, GR_LOCK) ^ true);

	UpdateGangRepository(repository);

	format(fmt_text, sizeof fmt_text, "[????????] ????? ??? %s ??????? %s[%d]",
	GetGangRepositoryData(repository, GR_LOCK) ? "??????" : "??????", GetPlayerNameEx(playerid), playerid);

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_text, GetGangRepositoryData(repository, GR_LOCK) ? 0x66CC00FF : 0xFF6600FF);

	return 1;
}

CMD:tie(playerid, params[])
{
	if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA))
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ???????????? ???");
			
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /tie [id ??????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0xCECECEFF, "????? ????????ù ??????? ??????");

	if(GetPlayerData(to_player, P_CUFFED)) return SendClientMessage(playerid, 0xCECECEFF, "????? ??? ??ù???/??????? ? ?????????");

	SetPlayerSpecialAction(to_player, SPECIAL_ACTION_CUFFED);
	//SetPlayerAttachedObject(to_player, A_OBJECT_SLOT_HAND, 19418, A_OBJECT_BONE_RIGHT_HAND, -0.011, 0.028, -0.022, -15.600012, -33.699977, -81.700035, 0.891999, 1.00, 1.168);
	SetPlayerData(to_player, P_CUFFED, true);

	TogglePlayerControllable(to_player, false);

	new fmt_str[90];

	format(fmt_str, sizeof fmt_str, "%s ??ù??? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));
	SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);

	return 1;
}

CMD:untie(playerid, params[])
{
	if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA))
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ???????????? ???");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /untie [id ??????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) return SendClientMessage(playerid, 0xCECECEFF, "????? ????????ù ??????? ??????");

	if(!GetPlayerData(to_player, P_CUFFED)) return SendClientMessage(playerid, 0xCECECEFF, "????? ?? ???ù???");

	//if(GetPlayerData(to_player, P_FOLLOWED_BY) != INVALID_PLAYER_ID) return SendClientMessage(playerid, 0xCECECEFF, "??????????? ????? ?????? ?? ????? (/follow)");

	SetPlayerSpecialAction(to_player, SPECIAL_ACTION_NONE);

	SetPlayerData(to_player, P_CUFFED, false);

	TogglePlayerControllable(to_player, true);

	new fmt_str[90];

	format(fmt_str, sizeof fmt_str, "%s ????ù??? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));
	SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);

	return 1;
}

CMD:capture(playerid, params[])
{
	if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA))
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ???????????? ???");

	if(GetPlayerJob(playerid) < 6)
		return SendClientMessage(playerid, 0x999999FF, "?????????????? ?????? ?????????? ????? ?????? ? 6-??? ?????");
		
	if(!IsWorkDayStarted(playerid)) return 1;

	if(g_capture[C_STATUS])
		return SendClientMessage(playerid, 0x999999FF, "????????? ????????ù ???????? ???????");

	new gang_id = (GetPlayerTeamEx(playerid) - TEAM_OPG_ARZAMASKAYA) + 1;

	if(g_capture[C_WAIT_TIME][gang_id - 1] > gettime())
		return SendClientMessage(playerid, 0x999999FF, "? ??????? ?????????? ?????? ??????? ??? ?? ?????? 1 ???");

	new gang_zone_id = -1;

	for(new idx; idx < g_gang_zones_loaded; idx ++)
	{
		if(!IsPlayerInDynamicArea(playerid, GetGangZoneData(idx, GZ_AREA))) continue;

		gang_zone_id = idx;
		break;
	}

	if(gang_zone_id == -1)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ?? ??????????? ???-?? ??????????");

	new gang_zone_team = GetGangZoneData(gang_zone_id, GZ_GANG);

	if(!gang_zone_team)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ?? ??????????? ???-?? ??????????");

	if(gang_zone_team == gang_id)
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ????????? ???? ??????????");

	if(g_capture[C_WAIT_TIME][gang_zone_team - 1] > gettime())
		return SendClientMessage(playerid, 0x999999FF, "?????, ??? ?????????? ?? ?????? ?????????, ??? ?? ??????? ? ?????????? ??????? (?? ?????? 1 ???)");

	new gang_players[2];

	foreach(new idx : Player)
	{
		if(GetPlayerTeamEx(idx) == GetPlayerTeamEx(playerid)) gang_players[0] ++;
		else if(GetPlayerTeamEx(idx) == (gang_zone_team - 1) + TEAM_OPG_ARZAMASKAYA) gang_players[1] ++;
		else continue;
	}

	if(gang_players[0] < MIN_PLAYERS_FOR_CAPTURE)
		return SendClientMessage(playerid, 0x999999FF, "? ????? ????? ?????? ???? ?? ????? 5-?? ????? ??ù ???????");

	if(gang_players[1] < MIN_PLAYERS_FOR_CAPTURE)
		return SendClientMessage(playerid, 0x999999FF, "? ?????, ?????????? ??????? ?? ?????? ?????????, ?????? ???? ?? ????? 5-?? ????? ??ù ???????");

	StartCapture(playerid, gang_zone_id, gang_id, gang_zone_team);

	return 1;
}

stock StartCapture(playerid, gang_zone_id, attack_team, protect_team)
{
	// Time: 9:53~n~~w~Zhopa OPG__~r~~h~10~n~~w~Super-Analnaya OPG__~r~~h~5
	if(g_capture[C_STATUS]) return 0;

	new fmt_text[128],
		gps_icons[3] = {62, 61, 60};

	format(fmt_text, sizeof fmt_text, "%s ?????? ?????? ?????????? ? %s",
	GetTeamName( (attack_team + TEAM_OPG_ARZAMASKAYA) - 1), GetTeamName( (protect_team + TEAM_OPG_ARZAMASKAYA) - 1));

	SendMessageToGang(fmt_text, 0xFF5533FF);

	format(fmt_text, sizeof fmt_text, "%s %s[%d] ??????????? ??????",
	GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), playerid);

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_text, 0xFF5533FF);

	foreach(new idx : Player)
	{
		if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(idx) <= TEAM_OPG_LYTKARINSKAYA)) continue;

		TextDrawShowForPlayer(playerid, capture_TD[0]);
		TextDrawShowForPlayer(playerid, capture_TD[1]);

		format(fmt_text, sizeof fmt_text, "????? ???????? ?? GPS. ??????? ????????????? ????????? ?????, ????? %s ??????????",
		GetPlayerTeamEx(idx) == ((attack_team + TEAM_OPG_ARZAMASKAYA) - 1) ? "?????????" : "????????? ????");

		SendClientMessage(idx, 0xFFFF00FF, fmt_text);

		SetPlayerMapIcon
		(
			idx, 97,
			GetGangZoneData(gang_zone_id, GZ_MIN_X) + 50.0,
			GetGangZoneData(gang_zone_id, GZ_MIN_Y) + 50.0,
			0.0,
			gps_icons[ GetPlayerTeamEx(idx) - TEAM_OPG_ARZAMASKAYA ],
			0xFFFFFFFF,
			MAPICON_GLOBAL
		);
	}

	//GangZoneFlashForAll(GetGangZoneData(gang_zone_id, GZ_ZONE), gang_zone_colors[attack_team]);

	g_capture[C_STATUS] = true;

	g_capture[C_GANG_ZONE] = gang_zone_id;

	g_capture[C_ATTACK_TEAM] = attack_team;
	g_capture[C_PROTECT_TEAM] = protect_team;

	g_capture[C_ATTACKER_KILLS] = 0;
	g_capture[C_PROTECTOR_KILLS] = 0;

	g_capture[C_TIME] = 7 * 60;

	UpdateCaptureTextDraw();

	return 1;
}

stock EndCapture()
{
	if(!g_capture[C_STATUS]) return 0;

	new fmt_text[90],
		attack_team = (g_capture[C_ATTACK_TEAM] + TEAM_OPG_ARZAMASKAYA) - 1,
		protect_team = (g_capture[C_PROTECT_TEAM] + TEAM_OPG_ARZAMASKAYA) - 1;
		//gang_zone_id = g_capture[C_GANG_ZONE];

	if(g_capture[C_ATTACKER_KILLS] > g_capture[C_PROTECTOR_KILLS])
		format(fmt_text, sizeof fmt_text, "%s ????????? ?????????? ? %s", GetTeamName(attack_team), GetTeamName(protect_team));

	else
		format(fmt_text, sizeof fmt_text, "??????? %s ????????? ?????????? ? %s ???????????", GetTeamName(attack_team), GetTeamName(protect_team));

	SendMessageToGang(fmt_text, 0xFF5533FF);

	//new gz_index = GetGangZoneData(gang_zone_id, GZ_ZONE);

	//GangZoneStopFlashForAll(gz_index);

	if(g_capture[C_ATTACKER_KILLS] > g_capture[C_PROTECTOR_KILLS])
	{
		//SetGangZoneData(gang_zone_id, GZ_GANG, g_capture[C_ATTACK_TEAM]);
		//SaveGangZone(gang_zone_id);

		//GangZoneShowForAll(gz_index, gang_zone_colors[ GetGangZoneData(gang_zone_id, GZ_GANG) ]);

		UpdateGangRepository(g_capture[C_ATTACK_TEAM] - 1);
		UpdateGangRepository(g_capture[C_PROTECT_TEAM] - 1);
	}

	TextDrawHideForAll(capture_TD[0]);
	TextDrawHideForAll(capture_TD[1]);

	g_capture[C_STATUS] = false;

	g_capture[C_GANG_ZONE] = -1;

	g_capture[C_ATTACK_TEAM] =
	g_capture[C_PROTECT_TEAM] = -1;

	g_capture[C_ATTACKER_KILLS] =
	g_capture[C_PROTECTOR_KILLS] = 0;

	g_capture[C_TIME] = 0;

	g_capture[C_WAIT_TIME][attack_team - 1] =
	g_capture[C_WAIT_TIME][protect_team - 1] = gettime() + 3600;

	foreach(new idx : Player)
		RemovePlayerMapIcon(idx, 97);

	return 1;
}

stock UpdateCaptureTextDraw()
{
	new fmt_text[128];

	format
	(
		fmt_text, sizeof fmt_text,
		"????ù: %d:%02d~n~"\
		"~w~%s__~r~~h~%d~n~"\
		"~w~%s__~r~~h~%d",
		g_capture[C_TIME] / 60,
		g_capture[C_TIME] % 60,
		GetTeamName( (g_capture[C_ATTACK_TEAM] + TEAM_OPG_ARZAMASKAYA) - 1 ),
		g_capture[C_ATTACKER_KILLS],
		GetTeamName( (g_capture[C_PROTECT_TEAM] + TEAM_OPG_ARZAMASKAYA) - 1 ),
		g_capture[C_PROTECTOR_KILLS]
	);

	TextDrawSetString(capture_TD[1], fmt_text);

	foreach(new idx : Player)
	{
		if(!IsPlayerConnected(idx)) continue;
		if(!IsPlayerLogged(idx)) continue;
		if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(idx) <= TEAM_OPG_LYTKARINSKAYA)) continue;

		TextDrawShowForPlayer(idx, capture_TD[0]);
		TextDrawShowForPlayer(idx, capture_TD[1]);
	}
}

stock IsPlayerInPoliceTeam(playerid)
{
	if(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI) return true;
	return false;
}

stock IsPlayerInPoliceCar(playerid)
{
	new vehicleid = GetPlayerVehicleID(playerid);
	if(VEHICLE_ACTION_TYPE_DPS_CAR <= GetVehicleData(vehicleid, V_ACTION_TYPE) <= VEHICLE_ACTION_TYPE_FBI_CAR) return true;
	return false;
}

stock GenerateCarNumber()
{
	static const chars[11] = {'A', 'B', 'C', 'E', 'H', 'K', 'M', 'O', 'P', 'T', 'X'};
	new number[6];

	number[0] = chars[random(sizeof chars)];
	number[1] = random('9' - '0') + '0';
	number[2] = random('9' - '0') + '0';
	number[3] = random('9' - '0') + '0';

	if(number[1] == number[2] && number[2] == number[3] && number[3] == '0')
		number[3] = random('9' - '0') + '1';

	number[4] = chars[random(sizeof chars)];
	number[5] = chars[random(sizeof chars)];

	return number;
}

stock IsACarNumber(text[])
{
	new length = strlen(text);

	if(length != 6)
	{
		return 0;
	}

	for(new i; i < length; i ++)
	{
		switch(i)
		{
			case 0, 4, 5:
			{
				switch(text[i])
				{
					case 'A', 'B', 'C', 'E', 'H', 'K', 'M', 'O', 'P', 'T', 'X': continue;
					default: return 0;
				}
			}
			case 1..3:
			{
				switch(text[i])
				{
					case '0'..'9': continue;
					default: return 0;
				}
			}
		}
	}

	if(text[1] == text[2] && text[2] == text[3] && text[3] == '0')
	{
		return 0;
	}

	return 1;
}

stock GetCarNumberPrice(number[])
{
	if(strlen(number) != 6) return 0;

	new chars[4],
		price = GetDonatePrice(DONATE_PRICE_CAR_NUMBER);

	format(chars, sizeof chars, "%c%c%c", number[0], number[4], number[5]);

	if(!strcmp(chars, "amp", true)) price += 800;
	else if(!strcmp(chars, "ooo", true)) price += 700;
	else if(!strcmp(chars, "aaa", true)) price += 700;
	else if(!strcmp(chars, "ekx", true)) price += 600;
	else if(!strcmp(chars, "xam", true)) price += 600;
	else if(!strcmp(chars, "bop", true)) price += 300;
	else if(!strcmp(chars, "xep", true)) price += 200;
	else if(!strcmp(chars, "hax", true)) price += 200;
	else if(!strcmp(chars, "bbb", true)) price += 700;
	else if(!strcmp(chars, "ttt", true)) price += 700;
	else
	{
		if(chars[0] == chars[1] && chars[0] != chars[2]) price += 50;
		else if(chars[0] == chars[1] && chars[0] == chars[2]) price += 200;
		else if(chars[0] == chars[2] && chars[0] != chars[1]) price += 100;
	}

	if(number[1] == 0 && number[1] == 0) price += 200;
	else if(number[1] == number[2] && number[1] != number[3]) price += 150;
	else if(number[1] == number[2] && number[1] == number[3]) price += 250;

	return price;
}

CMD:checknumber(playerid, params[])
{
	extract params -> new string: number[7]; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /checknumber [?????]");

	if(strlen(number) != 6) return SendClientMessage(playerid, 0x999999FF, "????? ?????? ?????? ???? 6 ????????");

	new fmt_text[90];
	format(fmt_text, sizeof fmt_text, "????????? ?????????? ???? ??????: %d ??????", GetCarNumberPrice(number));
	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	return 1;
}

CMD:skill(playerid, params[])
{
	extract params -> new to_player; else return SendClientMessage(playerid, 0x999999FF, "???????????: /skill [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(to_player == playerid)
	{
		ShowPlayerSkills(playerid);
		return Action(playerid, "????????????? ???? ?????? ???????ù ???????", _, false);
	}

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0))
		return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_SHOW_SKILL);

	return 1;
}

CMD:creategift(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	new query[128],
		Cache: result,
		Float: X,
		Float: Y,
		Float: Z,
		idx = g_gift_loaded;

	GetPlayerPos(playerid, X, Y, Z);

	mysql_format(mysql, query, sizeof query, "INSERT INTO gift (x, y, z) VALUES (%f, %f, %f)", X, Y, Z);
	result = mysql_query(mysql, query, true);

	SetGiftData(idx, G_SQL_ID, 		cache_insert_id());

	SetGiftData(idx, G_POS_X,		X);
	SetGiftData(idx, G_POS_Y,		Y);
	SetGiftData(idx, G_POS_Z,		Z);

	CreatePickup
	(
		1279,
		23,
		X, Y, Z,
		-1,
		PICKUP_ACTION_TYPE_GIFT,
		idx
	);

	g_gift_loaded++;

	cache_delete(result);

	SendClientMessage(playerid, 0x32a44bFF, "?? ??????? ???????!");

	return 1;
}

CMD:donat(playerid, params[])
{
  new fmt_str[500];
 
 format
 (
   fmt_str, sizeof(fmt_str),
   "{FFFFFF}? ???? ??????? ?? ?????? ???????????? ??????????????\n"\
   "??????????? ???????. ????? ???????? ? ??? ??????,\n"\
   "?????????? ????????? ???? ??????? ????. ???????? ????\n"\
   "?????????????? ????????????, ? ????? ? ????????\n"\
   "?????????ù ????? ?? ?????? ?????? ?? ????? ?????:\n"\
   "{32CD32}"SERVER_SITE" (?????? ?????)\n\n"\
   "{1E90FF}?????????ù:\n"\
   "{FFFFFF}????? ????????:  %d\n"\
   "{FFFFFF}ù?????? ?????ù??? ?????:  %d BC\n"\
   "{FFFFFF}????????? ??????????: %d BC\n"\
   "{FFFFFF}????ù ????? ??????????: %d BC\n",
   GetPlayerAccountID(playerid),
   GetPlayerDonateRub(playerid),
   GetPlayerLastDonation(playerid),
   GetPlayerTotalDonate(playerid)
  );
  return Dialog(playerid, DIALOG_DINFO, DIALOG_STYLE_MSGBOX, "{FF0000}?????????ù", fmt_str, "?????", "?????");
}

CMD:setspawnpos(playerid)
{
    if(GetPlayerData(playerid, P_FAMILY) && GetPlayerData(playerid, P_FAMILY_RANK) == 10)
    {
        Dialog
        (
            playerid, DIALOG_FAMILY_SPAWN_SET, DIALOG_STYLE_MSGBOX,
            "????????? ?????",
            "?? ????????????? ?????? ?????????? ????? ?????? ????? ?????\n\
            ?? ?? ????? ??? ?? ???????????",
            "?????", "??????"
        );
    }
    return 1;
}

CMD:fleave(playerid, params[])
{
    //if(GetPlayerData(playerid, P_IMPROVEMENTS) < 2) return SendClientMessage(playerid, 0xCECECEFF, "??????????? ????????? \"?????????????\", ????? ????????ù ?? ???????????? ???????");



    new fmt_text[210];

    format
    (
        fmt_text, sizeof fmt_text,
        "{FFFFFF}?? ???????? ? ????? {ffff00} \"%s\".\n"\
        "{FFFFFF}???? ?? ?????????, ?? ?????ù??? ??? ???? ?????????ù ? ???, ????? ??? ????.\n\n"\
        "?? ???????, ??? ?????? ???????? ??????",
        GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_NAME)
    );

    Dialog(playerid, DIALOG_FAMILY_LEAVE, DIALOG_STYLE_MSGBOX, "{FF0000}????? ?? ?????.", fmt_text, "????", "??????");

    return 1;
}

CMD:fmenu(playerid, params[])
{


	Dialog
	(
		playerid, DIALOG_FAMILY_MENU, DIALOG_STYLE_LIST,
		"{ff0000}?????? ?????",
		""c_server"1 "c_b"???ù?????ù\n"\
		""c_server"2 "c_b"?????????ù\n"\
		""c_server"3 "c_b"????????? ?????\n"\
		""c_server"4 "c_b"?????????? ??????\n"\
		""c_server"5 "c_b"?????\n"\
		""c_server"6 "c_b"????????\n"\
		""c_server"7 "c_b"????????ù\n"\
		""c_server"8 "c_b"??????? ?????\n"\
		""c_server"9 "c_b"???????? ????\n"\
		""c_server"10 "c_b"{ffff00}???????? ?????",
		"?????", "?????"
	);
	return 1;
}
alias:fmenu("fm")

CMD:dice(playerid, params[])
{
	if(GetPlayerInBiz(playerid) == -1)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ??????");

	if(GetBusinessData(GetPlayerInBiz(playerid), B_TYPE) != BUSINESS_TYPE_CASINO)
		return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ? ??????");

	if(!IsPlayerInRangeOfAnyCasinoTable(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?????? ?????????ù ????? ?????????? ?????");

	extract params -> new to_player, money; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /dice [id ??????] [?????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 4.0))
		return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	if(!(1 <= money <= 1_000_000))
		return SendClientMessage(playerid, 0x999999FF, "????? ?????? ???? ?? ????? 1.000.000 ??????");

	if(GetPlayerMoneyEx(playerid) < money)
		return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ?????? ?????????? ?????");

	if(GetPlayerMoneyEx(to_player) < money)
		return SendClientMessage(playerid, 0x999999FF, "? ?????? ??? ?????? ?????????? ?????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_CASINO_DICE, money);

	return 1;
}

CMD:ad(playerid, params[])
{
	if(!GetPlayerPhone(playerid))
		return SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????, ?? ???????? ????? ? ???? ??ù?????ù");

	new fmt_text[144];

	if(IsAIP(params))
	{
   		SendClientMessage(playerid, -1, "?????????ù ? ???????!");
       	return false;
    }

	for(new idx; idx < g_advert_created; idx ++)
	{
		if(GetAdvertData(idx, A_CREATOR) != playerid) continue;

		format(fmt_text, sizeof fmt_text, "???? ???ù?????? ??? ????????ù ? ??????? ??? {00CC99}??????? %d", GetAdvertIndexInQueue(idx));
		SendClientMessage(playerid, 0xCECECEFF, fmt_text);

		
		if(idx)
			SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ???????? ??? ?????????? {FF9900}? ??????? ??????? /up. {CECECE}?????? ????? {33CCFF}2000 ???");
		

		return 1;
	}

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /ad [????? ???ù?????ù]");

	if(GetPlayerMoneyEx(playerid) < ADVERT_SEND_PRICE)
		return SendClientMessage(playerid, 0x999999FF, "??ù ???????? ???ù?????ù ?????????? ????? 250 ???");

	SendAdvert(playerid, params);

	GivePlayerMoneyEx(playerid, -250, "???????? ???ù?????ù", true, true);

	format(fmt_text, sizeof fmt_text, "ù????: %s", params);
	SendClientMessage(playerid, 0x00CC99FF, fmt_text);

	SendClientMessage(playerid, -1, "???? ???ù?????? ???? ????????? ? ??????? ??ù ??????????");
	SendClientMessage(playerid, -1, "??????????? ?? ??ù??, ? ????????? ?????? ???ù?????? ????? ??????? ?? ???????");
	// SendClientMessage(playerid, -1, "?? ?????? ???????? ??? ?????????? {FF9900}? ??????? ??????? /up. {FFFFFF}?????? ????? {33CCFF}2000 ???");

	return 1;
}

CMD:edit(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_RADIO) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
	
	if(!IsWorkDayStarted(playerid)) return 1;

	if(!g_advert_created) return SendClientMessage(playerid, 0xCECECEFF, "??? ???ù?????? ??ù ?????????????ù");

	new fmt_text[360],
		bool: ad_is_found;

	for(new idx; idx < g_advert_created; idx ++)
	{
		if(GetAdvertData(idx, A_EDIT) || GetAdvertData(idx, A_CREATOR) == INVALID_PLAYER_ID) continue;

		format
		(
			fmt_text, sizeof fmt_text,
			"{FFFFFF}???????????: %s\n\nù????:\n{FFCD00}%s\n\n"\
			"{FFFFFF}??ù ?????????????ù ???ù?????ù ??????? ????? ????? ? ??????? '?????????'.\n"\
			"???? ?????????????? ???ù?????? ?? ?????, ???????? ???? ??????.",
			GetPlayerNameEx(GetAdvertData(idx, A_CREATOR)), GetAdvertData(idx, A_TEXT)
		);

		Dialog(playerid, DIALOG_ADVERT_EDIT, DIALOG_STYLE_INPUT, "{00CC00}?????????ù ???ù?????ù", fmt_text, "?????????", "?????????");

		SetAdvertData(idx, A_EDIT, true);

		SetPVarInt(playerid, "advert_id", idx);

		ad_is_found = true;

		break;
	}

	if(!ad_is_found) return SendClientMessage(playerid, 0xCECECEFF, "??? ???ù?????? ??ù ?????????????ù");

	return 1;
}

CMD:t(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_RADIO) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /t [?????]");


	new fmt_text[144];

	format(fmt_text, sizeof fmt_text, "[???] %s: %s", GetPlayerNameEx(playerid), params);
	SendClientMessageToAll(0x6666FFFF, fmt_text);

	return 1;
}

CMD:u(playerid, params[])
{
	if(!GetPVarInt(playerid, "radio_mic")) return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????????? ? ?????-?????");

	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /u [?????]");

	new fmt_text[144];

	format(fmt_text, sizeof fmt_text, "[???] ????? %s: %s", GetPlayerNameEx(playerid), params);
	SendClientMessageToAll(0x6666FFFF, fmt_text);

	return 1;
}

CMD:givemic(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_RADIO) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /givemic [id ??????]");


	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!GetPVarInt(to_player, "radio_mic"))
		SendPlayerOffer(playerid, to_player, OFFER_TYPE_GIVE_MIC);

	else
	{
		new fmt_text[128];

		format(fmt_text, sizeof fmt_text, "%s %s[%d] ???????? ??? ?? ?????-?????",
		GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), playerid);

		SendClientMessage(to_player, 0xFF5533FF, fmt_text);

		format(fmt_text, sizeof fmt_text, "?? ????????? %s[%d] ?? ?????-?????", GetPlayerNameEx(to_player), to_player);
		SendClientMessage(playerid, 0x3399FFFF, fmt_text);

		format(fmt_text, sizeof fmt_text, "[???] %s %s[%d] ???????? %s[%d] ?? ?????-?????",
		GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);

		SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_text, 0x99CC99FF, playerid);

		SetPVarInt(to_player, "radio_mic", 0);
	}

	return 1;
}

CMD:startgangzones(playerid, params[])
{
	new gang_zone[100][4] =
	{
		{-2667, 149, -2567, 249},
		{-2567, 149, -2467, 249},
		{-2467, 149, -2367, 249},
		{-2367, 149, -2267, 249},
		{-2267, 149, -2167, 249},
		{-2167, 149, -2067, 249},
		{-2167, 49, -2067, 149},
		{-2267, 49, -2167, 149},
		{-2367, 49, -2267, 149},
		{-2467, 49, -2367, 149},
		{-2567, 49, -2467, 149},
		{-2667, 49, -2567, 149},
		{-2667, -51, -2567, 49},
		{-2567, -51, -2467, 49},
		{-2467, -51, -2367, 49},
		{-2367, -51, -2267, 49},
		{-2267, -51, -2167, 49},
		{-2167, -51, -2067, 49},
		{-2167, -151, -2067, -51},
		{-2267, -151, -2167, -51},
		{-2367, -151, -2267, -51},
		{-2467, -151, -2367, -51},
		{-2567, -151, -2467, -51},
		{-2667, -151, -2567, -51},
		{-2667, -251, -2567, -151},
		{-2567, -251, -2467, -151},
		{-2467, -251, -2367, -151},
		{-2367, -251, -2267, -151},
		{-2267, -251, -2167, -151},
		{-2167, -251, -2067, -151},
		{1974, 2007, 2074, 2107},
		{1874, 2007, 1974, 2107},
		{1774, 2007, 1874, 2107},
		{1674, 2007, 1774, 2107},
		{1574, 2007, 1674, 2107},
		{1574, 2107, 1674, 2207},
		{1674, 2107, 1774, 2207},
		{1774, 2107, 1874, 2207},
		{1874, 2107, 1974, 2207},
		{1974, 2107, 2074, 2207},
		{1974, 2207, 2074, 2307},
		{1874, 2207, 1974, 2307},
		{1774, 2207, 1874, 2307},
		{1674, 2207, 1774, 2307},
		{1574, 2207, 1674, 2307},
		{1574, 2307, 1674, 2407},
		{1674, 2307, 1774, 2407},
		{1774, 2307, 1874, 2407},
		{1874, 2307, 1974, 2407},
		{1974, 2307, 2074, 2407},
		{1974, 2407, 2074, 2507},
		{1874, 2407, 1974, 2507},
		{1774, 2407, 1874, 2507},
		{1674, 2407, 1774, 2507},
		{1574, 2407, 1674, 2507},
		{1574, 2507, 1674, 2607},
		{1674, 2507, 1774, 2607},
		{1774, 2507, 1874, 2607},
		{1874, 2507, 1974, 2607},
		{1974, 2507, 2074, 2607},
		{1751, -311, 1851, -211},
		{1751, -411, 1851, -311},
		{1651, -411, 1751, -311},
		{1651, -311, 1751, -211},
		{1551, -311, 1651, -211},
		{1551, -411, 1651, -311},
		{1451, -411, 1551, -311},
		{1451, -311, 1551, -211},
		{981, -265, 1081, -165},
		{981, -365, 1081, -265},
		{981, -465, 1081, -365},
		{881, -465, 981, -365},
		{881, -365, 981, -265},
		{881, -265, 981, -165},
		{781, -265, 881, -165},
		{781, -365, 881, -265},
		{781, -465, 881, -365},
		{681, -465, 781, -365},
		{681, -365, 781, -265},
		{681, -265, 781, -165},
		{581, -265, 681, -165},
		{581, -365, 681, -265},
		{581, -465, 681, -365},
		{481, -465, 581, -365},
		{481, -365, 581, -265},
		{481, -265, 581, -165},
		{381, -265, 481, -165},
		{381, -365, 481, -265},
		{381, -465, 481, -365},
		{281, -365, 381, -265},
		{2401, -330, 2501, -230},
		{2501, -330, 2601, -230},
		{2501, -230, 2601, -130},
		{2501, -130, 2601, -30},
		{2401, -230, 2501, -130},
		{2401, -130, 2501, -30},
		{2301, -230, 2401, -130},
		{2601, -330, 2701, -230},
		{2601, -230, 2701, -130},
		{2201, -230, 2301, -130}
	};

	for(new i; i < sizeof gang_zone; i ++)
	{
		new query[110];

		mysql_format(mysql, query, sizeof query, "INSERT INTO gang_zones (min_x, min_y, max_x, max_y) VALUES (%d, %d, %d, %d)", gang_zone[i][0], gang_zone[i][1], gang_zone[i][2], gang_zone[i][3]);
		mysql_query(mysql, query, false);
	}

	LoadGangZones();

	ShowGangZonesForPlayer(playerid);

	return 1;
}


stock CreateGreenZones()
{
	for(new idx; idx < sizeof g_green_zones; idx ++)
		g_green_zones[idx][GZ_AREA] = CreateDynamicSphere
		(
			g_green_zones[idx][GZ_X], g_green_zones[idx][GZ_Y],
			g_green_zones[idx][GZ_Z], g_green_zones[idx][GZ_SIZE]
		);

	return 1;
}


stock ShowPlayerGreenZoneText(playerid)
{
	ShowZona(playerid);
	return 1;
}

stock HidePlayerGreenZoneText(playerid)
{
    // -- this is old real russia & fuss rp
	//TextDrawHideForPlayer(playerid, green_zone_TD[0]);

	// -- this is new client (fix) zone
	HideZona(playerid);
	return 1;
}


stock IsPlayerUseForbiddenSoftware(playerid)
{
	static const forbidden_soft_keys[][43 + 1] =
	{
		"5E1C1837D2C54B24EAAED18C3F96D9EA51A2A481003", // RakSAMP v0.5-0.3c
		"381356A6B4349449E8F818B06B405A4FBBE9F8DDDAB", // RakSAMP v0.5-0.3d
		"354A1F8D95B8384F9C365E2D7418C7EC06CD6EE2928", // RakSAMP v0.5-0.3eR2
		"38E4952825700FE3B8476C3F72D976E7447905BA45D" // BabaShura 2.6/2.7 (0.3e)
	};

	new player_key[64 + 1];

	gpci(playerid, player_key, sizeof(player_key));

	for(new i = 0; i < sizeof(forbidden_soft_keys); i++)
	{
		if(strcmp(player_key, forbidden_soft_keys[i]) == 0)
		{
			return 1;
		}
	}

	return 0;
}

CMD:setlights(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) != 6) return 1;

	new Float: x,
		Float: y;

	if(IsPlayerInAnyVehicle(playerid))
	{
		new vehicleid = GetPlayerVehicleID(playerid);

		if(player_test_label[playerid][0] == Text3D: INVALID_3DTEXT_ID)
		{
			for(new idx; idx < 4; idx ++)
			{
				GetVehicleTurnSignalPos(vehicleid, idx + 1, x, y);

				player_test_label[playerid][idx] = CreateDynamic3DTextLabel(IntToString(idx), 0xFFCC33FF, x, y, 0.0, 10.0, _, vehicleid);
			}
		}
		else
		{
			for(new idx; idx < 4; idx ++)
			{
				DestroyDynamic3DTextLabel(player_test_label[playerid][idx]);

				player_test_label[playerid][idx] = Text3D: INVALID_3DTEXT_ID;
			}
		}
	}
	else SendClientMessage(playerid, -1, "u r not in a vehicle");

	return 1;
}


CMD:getvehspeed(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 3) return 1;

	extract params -> new vehicleid; else return SendClientMessage(playerid, -1, "/getvehspeed [vehicleid]");

	new Float: speed = GetVehicleSpeed(vehicleid);

	new fmt_text[24];

	format(fmt_text, sizeof fmt_text, "vehicle speed: %f", speed);
	SendClientMessage(playerid, 0xFF5533FF, fmt_text);

	return 1;
}

CMD:pedaltype(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) != 6) return 1;

	new pedal_name[3][] = {"none", "gas", "brake"};

	new pedal_type = player_press_pedal[playerid];

	SendClientMessage(playerid, -1, pedal_name[pedal_type]);

	return 1;
}

CMD:createpromo(playerid, params[])
{
	Dialog
	(
		playerid, DIALOG_PROMO_CREATE, DIALOG_STYLE_INPUT,
		"{ff0000}???????? ?????????",
		"{FFFF00}???????? {FFFFFF}- ?????????? ????? ????????,??????ù???? ??? ? ????????,????????????? ??? ???????? ???????? ??????????????.\n"\
		"???????? ???????? ?? {FFFF00}10 ???????{FFFFFF},? ?????????? ???????? ?? ?????? ???????? ?????? ?????.\n"\
		"?? ?????? ???????ù?????? ??????? {FFFF00}???? ????????{FFFFFF},??? ??????? ??? ?? ????????.\n\n"\
		"?????? ????? ???????,??? ?????????? ???????? ? ????????? ???????ù?? ??? ?????????\n"\
		"{FFFF00}1 ?????? {FFFFFF}- 10.000.000 ?????? ??? 2000 ?????-??????\n"\
		"{FFFF00}?? 2 ???????? ?? 3 ???????? {FFFFFF}- 7.000.000 ?????? ??? 1.000 ?????-??????\n"\
		"{FFFF00}{FFFF00}?? 3 ???????? ?? 5 ???????? {FFFFFF}- 6.000.000 ??????.\n"\
		"{FFFF00}?? 5 ???????? ?? 7 ???????? {FFFFFF}- 3.000.000 ??????.\n"\
		"{FFFF00}?? 7 ???????? {FFFFFF}- 1.000.000 ??????.\n"\
		"?? ?????? ???????????? {FFFF00}???????? ? ?????????,@ ? ?????\n\n"\
		"{FFFFFF}??ù ???????ù ????????? ??????? ? ???? ???? ???????? ????? ????????.",
		"?????", "?????"
	);

	return 1;
}

CMD:ytpromo(playerid, params[])
{
    if(GetPlayerData(playerid, P_YTPROMO_ACTIVATE) == 1) return Send(playerid, COR_RED, "[??????]: "c_b"?????????? ???????? ????? ???????????? ?????? ???? ???!");
    
	Dialog
	(
		playerid, DIALOG_YTPROMO_ACTIVATE, DIALOG_STYLE_INPUT,
		"{FF0000}????????",
		"{FFFFFF}??????? ???????? ??ù ???? ????? ???????? ????:",
		"??????", "?????"
	);

	return 1;
}
CMD:promos(playerid, params[])
{
	Dialog
	(
		playerid, DIALOG_PROMO_ACTIVATE, DIALOG_STYLE_INPUT,
		"{FF0000}????????",
		"{FFFFFF}??????? ???????? ??ù ???? ????? ???????? ????:",
		"?????", "??????"
	);

	return 1;
}
stock ShowPlayerBuyLeadDialog(playerid)
{
//	if(GetPlayerTeamEx(playerid) && GetPlayerJob(playerid) == 10 || GetPlayerData(playerid, P_ADMIN))
//		return SendClientMessage(playerid, -1, "?? ?? ?????? ?????? ??????? ?????? ??? ?? ??? ????? ??? ?????????????!");

    new count, fmt_str[512];
    for(new i = 1; i < MAX_ORG; i++)
    {
    	if(g_organization[i][O_PRICE] != 0 && !strlen(g_organization[i][O_LEADER]))
    	{
    		SetPlayerListitemValue(playerid, count, i);
    		count++;
    		format(fmt_str, sizeof(fmt_str), "%s%s\t{FFFF00}%d {FFFFFF}??????\n", fmt_str, g_organization[i][O_NAME], g_organization[i][O_PRICE]);
    	}
    }
    if(count == 0) return SendClientMessage(playerid, -1, ""USC"? ?????? ?????? ??? ????????? ???????.");
    return Dialog(playerid, DIALOG_DRUB_BUYLEAD, DIALOG_STYLE_LIST, "{FFFF00}?????? ????????? ?????? ?????????", fmt_str, "??????", "?????");

}
stock ShowPlayerBuyZamDialog(playerid)
{
	if(GetPlayerTeamEx(playerid) && GetPlayerJob(playerid) == 10 || GetPlayerData(playerid, P_ADMIN))
		return SendClientMessage(playerid, -1, ""USC"?? ?? ?????? ?????? 9 ???? ?????? ??? ?? ??? ????? ??? ?????????????!");

    new count, fmt_str[512];
    for(new i = 1; i < MAX_ORG; i++)
    {
		SetPlayerListitemValue(playerid, count, i);
		count++;
		format(fmt_str, sizeof(fmt_str), "%s%s\t{FFFF00}%d {FFFFFF}??????\n", fmt_str, g_organization[i][O_NAME], GetDonatePrice(DONATE_PRICE_ZAM));

		Dialog(playerid, DIALOG_DRUB_BUYZAM, DIALOG_STYLE_LIST, "{FFFF00}??????? ??????????ù", fmt_str, "??????", "?????");
    }
    return 1;
}
stock ShowPlayerBuyAdminDialog(playerid)
{
	if(GetPlayerAdminEx(playerid) >= 6)
		return SendClientMessage(playerid, -1, ""USC"? ??? ??? ???????????? ??????? ????? ????");

	new fmt_str[512];

	for(new i = GetPlayerAdminEx(playerid); i < 11; i++)
    {
        format(fmt_str, sizeof(fmt_str), "%s{ffffff}%i ???????\t{FFFF00}%i {FFFFFF}??????\n",fmt_str, i + 1, ((i + 1) - GetPlayerAdminEx(playerid)) * Config[admin_price]);
    }
    strcat(fmt_str, "12 ???????\t{FFFF00} 2500{FFFFFF} ??????");

    return Dialog(playerid, DIALOG_DRUB_BUYADMIN, DIALOG_STYLE_LIST, "{FFFF00}??????? ????? ????", fmt_str, "??????", "?????");
    

}
stock AdminAuthorization(playerid)
{
	if(GetPlayerData(playerid, P_ADMIN) && !GetPlayerData(playerid, P_ADMIN_LOGGED) && GetPlayerData(playerid, P_APASS) != 0)
	{
		return Dialog(playerid, DIALOG_ADMIN_LOGIN, DIALOG_STYLE_INPUT,
			"{FF6347}"SERVER_NAME" {ffffff}| ??????????ù",
			"{ffffff}??ù ????, {ffffff}?????{ffffff} ?????????? ?????? - ??????? ???? ??????????\n{FFFFFF}?????? ?? ?????? ?????????????? ? ?????????? ???? ????:",
			"??????", "");
	}
	else if(GetPlayerData(playerid, P_APASS) == 0)
	{
		return Dialog(playerid, DIALOG_ADMIN_REG, DIALOG_STYLE_INPUT,
			"{FF6347}"SERVER_NAME" {ffffff}| ?????????? ??????",
			"{FFFFFF}??ù ????, ????? ?????????? ?????? - ?????????? ? ???????\n{FFFFFF}?????? ?? ?????? ?????????????? ? ?????????? ???? ????.\n\n{FFFFFF}?????? ?????? ???? ?? 4-? ????.\n",
			"??????", "");
	}
}
stock GiveFamilyMoneyEx(fam_id, money)
{

    new fmt_str[185];
    AddFamilyData(fam_id, F_MONEY, +, money);

    format(fmt_str, sizeof fmt_str, "UPDATE family SET money=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_MONEY), fam_id);
    mysql_query(mysql, fmt_str, false);
    return 1;
}
stock FInvitePlayer(playerid, fam_id, give_rang = 1, bool: save = false)
{
    if(!(1 <= give_rang <= 10))
        give_rang = 1;


    SetPlayerData(playerid, P_FAMILY, fam_id);
    SetPlayerData(playerid, P_FAMILY_RANK, give_rang);

    if(save)
    {
        new query[80];

        format(query, sizeof query, "UPDATE accounts SET family=%d,family_rank=%d WHERE id=%d",\
            GetPlayerData(playerid, P_FAMILY), GetPlayerData(playerid, P_FAMILY_RANK), GetPlayerAccountID(playerid));
        mysql_query(mysql, query, false);
    }

    return 1;
}
stock FUnInvite(playerid, to_player, reason[] = "")
{
    new fmt_msg[110];

    if(playerid != to_player)
    {
        format(fmt_msg, sizeof fmt_msg, "%s[%d] ?????? ??? ?? ????? \"%s\"", GetPlayerNameEx(playerid), playerid, GetFamilyData(GetPlayerData(to_player, P_FAMILY), F_NAME));
        SendClientMessage(to_player, 0xCECECEFF, fmt_msg);

        if(GetPlayerTeamEx(playerid) == GetPlayerTeamEx(to_player))
        {
            format(fmt_msg, sizeof fmt_msg, "?? ??????? %s[%d] ?? ????? ?????", GetPlayerNameEx(to_player), to_player);
            SendClientMessage(playerid, 0x1E90FFFF, fmt_msg);
        }
        else
        {
            format(fmt_msg, sizeof fmt_msg, "?? ??????? %s[%d] ?? ????? \"%s\"", GetPlayerNameEx(to_player), to_player, GetFamilyData(GetPlayerData(to_player, P_FAMILY), F_NAME));
            SendClientMessage(playerid, 0x1E90FFFF, fmt_msg);
        }

        format(fmt_msg, sizeof fmt_msg, "?????? %s[acc:%d] ?? ????? %s. ???????: %s",
        GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), GetFamilyData(GetPlayerData(to_player, P_FAMILY), F_NAME), reason);

        SendLog(playerid, LOG_TYPE_FRACTION, fmt_msg);
    }
    else
    {
        format(fmt_msg, sizeof fmt_msg, "??????? ????? %s ?? ???????????? ???????", GetPlayerTeamName(to_player));
        SendLog(to_player, LOG_TYPE_FRACTION, fmt_msg);
    }

    FInvitePlayer(to_player, 0, 0, true);

    return 1;
}
public: LoadFamily()
{
    new idx;
    //new query[85];
    new Cache: result, rows;

    result = mysql_query(mysql, "SELECT * FROM family", true);
    rows = cache_num_rows();

    if(rows > 200)
    {
        rows = 200;
        print("[Family]: DB rows > 200");
    }


    for(idx = 0; idx < rows; idx ++)
    {
        SetFamilyData(idx+1, F_SQL_ID,        cache_get_field_content_int(idx, "id"));

        cache_get_field_content(idx, "name", g_family[idx+1][F_NAME], mysql, 64);

        SetFamilyData(idx+1, F_USER_ID,       cache_get_field_content_int(idx, "u_id"));
        SetFamilyData(idx+1, F_TIME,          cache_get_field_content_int(idx, "time"));
        SetFamilyData(idx+1, F_COLOR,         cache_get_field_content_int(idx, "color"));
        SetFamilyData(idx+1, F_LEVEL,         cache_get_field_content_int(idx, "level"));
        SetFamilyData(idx+1, F_EXP,           cache_get_field_content_int(idx, "exp"));
        SetPlayerData(playerid, P_FAMILY_NAME, 	cache_get_field_content_int(0, "name"));

        cache_get_field_content(idx, "rank1", g_family[idx+1][F_RANK1], mysql, 32);
        cache_get_field_content(idx, "rank2", g_family[idx+1][F_RANK2], mysql, 32);
        cache_get_field_content(idx, "rank3", g_family[idx+1][F_RANK3], mysql, 32);
        cache_get_field_content(idx, "rank4", g_family[idx+1][F_RANK4], mysql, 32);
        cache_get_field_content(idx, "rank5", g_family[idx+1][F_RANK5], mysql, 32);
        cache_get_field_content(idx, "rank6", g_family[idx+1][F_RANK6], mysql, 32);
        cache_get_field_content(idx, "rank7", g_family[idx+1][F_RANK7], mysql, 32);
        cache_get_field_content(idx, "rank8", g_family[idx+1][F_RANK8], mysql, 32);
        cache_get_field_content(idx, "rank9", g_family[idx+1][F_RANK9], mysql, 32);
        cache_get_field_content(idx, "rank10", g_family[idx+1][F_RANK10], mysql, 32);

        g_family[idx+1][F_SPAWN_POSITION][0] = cache_get_field_content_float(idx, "pos_x");
        g_family[idx+1][F_SPAWN_POSITION][1] = cache_get_field_content_float(idx, "pos_y");
        g_family[idx+1][F_SPAWN_POSITION][2] = cache_get_field_content_float(idx, "pos_z");
        g_family[idx+1][F_SPAWN_POSITION][3] = cache_get_field_content_float(idx, "pos_fa");

        g_family[idx+1][F_SPAWN_IV][0] =    cache_get_field_content_int(idx, "inter");
        g_family[idx+1][F_SPAWN_IV][1] =    cache_get_field_content_int(idx, "world");

        SetFamilyData(idx+1, F_MONEY,         cache_get_field_content_int(idx, "money"));
        SetFamilyData(idx+1, F_DRUGS,         cache_get_field_content_int(idx, "drugs"));
        SetFamilyData(idx+1, F_TREE,          cache_get_field_content_int(idx, "tree"));
        SetFamilyData(idx+1, F_METAL,         cache_get_field_content_int(idx, "metal"));
        SetFamilyData(idx+1, F_AMMO,          cache_get_field_content_int(idx, "ammo"));
        SetFamilyData(idx+1, F_HOUSE_ID,      cache_get_field_content_int(idx, "house_id"));
        SetFamilyData(idx+1, F_OCKIFARMA,          cache_get_field_content_int(idx, "ochki"));
        SetFamilyData(idx+1, F_OCZAVOD,          cache_get_field_content_int(idx, "ochki1"));
        SetFamilyData(idx+1, F_VISHARZ,          cache_get_field_content_int(idx, "ochki2"));
        SetFamilyData(idx+1, F_VISHKAR,          cache_get_field_content_int(idx, "ochki3"));
        SetFamilyData(idx+1, F_VISBUS,          cache_get_field_content_int(idx, "ochki4"));
        
        SetFamilyData(idx+1, F_TAKE_MONEY,	cache_get_field_content_int(idx, "r_TakeMoney"));
		SetFamilyData(idx+1, F_TAKE_DRUGS,	cache_get_field_content_int(idx, "r_TakeDrugs"));
		SetFamilyData(idx+1, F_TAKE_METALL,	cache_get_field_content_int(idx, "r_TakeMetall"));
		SetFamilyData(idx+1, F_TAKE_AMMO,		cache_get_field_content_int(idx, "r_TakeAmmo"));
		SetFamilyData(idx+1, F_RANG_INV,		cache_get_field_content_int(idx, "r_Inv"));
		SetFamilyData(idx+1, F_RANG_UNINV,		cache_get_field_content_int(idx, "r_UnInv"));
		SetFamilyData(idx+1, F_RANG_MUTE,		cache_get_field_content_int(idx, "r_Mute"));
		SetFamilyData(idx+1, F_RANG_UNMUTE,		cache_get_field_content_int(idx, "r_UnMute"));
		SetFamilyData(idx+1, F_RANG_WARN,		cache_get_field_content_int(idx, "r_Warn"));
		SetFamilyData(idx+1, F_RANG_UNWARN,		cache_get_field_content_int(idx, "r_UnWarn"));
		SetFamilyData(idx+1, F_RANG_GIVER,		cache_get_field_content_int(idx, "r_GiveRang"));
		
		SetFamilyData(idx+1, F_FAMILY_CARS,		cache_get_field_content_int(idx, "family_cars"));

        // -------------------------
    }
    g_family_loaded = rows;
    cache_delete(result);

    printf("[Family]: ????? : %d", g_family_loaded);
	//LoadFamilyCars();
}
stock GetFamilyRang(fam_id, rang_id)
{
    new fmt_rank[32];

    switch(rang_id)
    {
        case 1: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK1]);
        case 2: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK2]);
        case 3: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK3]);
        case 4: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK4]);
        case 5: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK5]);
        case 6: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK6]);
        case 7: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK7]);
        case 8: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK8]);
        case 9: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK9]);
        case 10: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK10]);
        default: format(fmt_rank, sizeof fmt_rank, "%s", g_family[fam_id][F_RANK1]);
    }

    return fmt_rank;
}

stock ShowPayFamilyDialog(playerid)
{
    Dialog
    (
        playerid, DIALOG_PAY_FAMILY, DIALOG_STYLE_INPUT,
        "???? ?????",
        "{FFFFFF} ??????? ????? ??????? ?????? ??ù?? ? ????? ?????",
        "??ù??", "?????"
    );
    return 1;
}

stock ShowChangeRangDialog(playerid)
{
    new fmt_text[1086],
        query[1086],
        fam_id = GetPlayerData(playerid, P_FAMILY);

    format(fmt_text, sizeof fmt_text, "");

    format(query, sizeof query, "{%s}1. %s\n", !strcmp(g_family[fam_id][F_RANK1], "?????") ? ("FFFFFF") : ("32a44b"), g_family[fam_id][F_RANK1]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}2. %s\n", !strcmp(g_family[fam_id][F_RANK2], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK2]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}3. %s\n", !strcmp(g_family[fam_id][F_RANK3], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK3]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}4. %s\n", !strcmp(g_family[fam_id][F_RANK4], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK4]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}5. %s\n", !strcmp(g_family[fam_id][F_RANK5], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK5]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}6. %s\n", !strcmp(g_family[fam_id][F_RANK6], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK6]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}7. %s\n", !strcmp(g_family[fam_id][F_RANK7], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK7]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}8. %s\n", !strcmp(g_family[fam_id][F_RANK8], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK8]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}9. %s\n", !strcmp(g_family[fam_id][F_RANK9], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK9]);
    strcat(fmt_text, query);
    format(query, sizeof query, "{%s}10. %s\n", !strcmp(g_family[fam_id][F_RANK10], "?????") ? ("FFFFFF") : ("32a44b"),g_family[fam_id][F_RANK10]);
    strcat(fmt_text, query);

    Dialog
    (
        playerid, DIALOG_FAMILY_RANG, DIALOG_STYLE_LIST,
        "???????? ????? ?????",
        fmt_text,
        "???????", "??????"
    );
}
public: ShowFamilyAllPlayers(playerid)
{
    new rows = cache_num_rows();

    new p_name[21];
    new lvl, family_rank;

    new fmt_str[33];
    new text[1290] = "???????\t????\t??ù\n\n{FFFFFF}";

    new idx, j = rows;
    if(j > 45)
        j = 45;

    for(idx = 0; idx < j; idx ++)
    {
        cache_get_row(idx, 0, p_name);
        lvl = cache_get_row_int(idx, 1);
        family_rank = cache_get_row_int(idx,2);

        format(fmt_str, sizeof fmt_str, "%d\t%d\t%s\n", lvl, family_rank, p_name);
        strcat(text, fmt_str);
    }

    format(fmt_str, sizeof fmt_str, "???????? %d/%d ???????", idx, rows);
    Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, fmt_str, text, "???????", "");
    return 1;
}
stock ShowFamilyInfo(playerid)
{
    new fmt_text[450],
        fam_id = GetPlayerData(playerid, P_FAMILY);

    format(fmt_text, sizeof fmt_text,
    "{FFFFFF}????????: [%s]\n\
    ????? ?????: %d\n\
     ????????ù: [%d (%d/500)]\n\
     ?????????? ?????: ?????\n\
     \t\t\t\n\
      ????????? ??????: ?????\n\
      ????????? ?????ù: ?????\n\
      ????????? ???????: ?????\n\
      \t\t\t\n\
      ?????: %s/20000000 ??????\n\
      ??????????: %d ??.\n\
      ?????: ?????\n\
      ??????? ? ????????: ?????\n\
      ???????????: ?????\n\
      ????????:  %f/20000", 
     GetFamilyData(fam_id, F_NAME),
     GetFamilyData(fam_id, F_USER_ID),
     GetFamilyData(fam_id, F_LEVEL),
     GetFamilyData(fam_id, F_MONEY),
     GetFamilyData(fam_id, F_METAL),
     GetFamilyData(fam_id, F_AMMO));
      

    Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "?????????ù ?????", fmt_text, "???????", "");
}
stock CreateRentBike()
{
    for(new idx; idx < sizeof rent_bike; idx ++)
    {
    CreatePickup(19131, 23, rent_bike[idx][0], rent_bike[idx][1], rent_bike[idx][2], -1, PICKUP_ACTION_RENT_BIKE, idx);//19134
        CreateDynamic3DTextLabel("{ffff00}?????????? ???????????", 0x3399FFFF, rent_bike[idx][0], rent_bike[idx][1], rent_bike[idx][2]  + 1.4, 10.0);
    }
    return 1;
}
stock ShowPlayerBuyCommandDialog(playerid)
{
	if(GetPlayerAdminEx(playerid) < 9)
		return SendClientMessage(playerid, -1, "??????? ??????? ?????? ???????? ? 9-??? ?????ù ??????????????");

	new big_fmt[568], description[64];
	for(new i; i < sizeof(g_admin_cmd_buy); i ++)
	{
		if(g_player[playerid][CMD_ACCESS][i] != '1') description = "{dd2e13}?? ???????";
            else description = "{23dc1b}???????";

		format(big_fmt, sizeof(big_fmt), "%s[%d] %s\t\t%s\t%d ???\n",big_fmt, i+1, g_admin_cmd_buy[i][CMD_NAME], description, g_admin_cmd_buy[i][CMD_PRICE]);
	}
	Dialog
	(
		playerid, DIALOG_BUY_CMD, DIALOG_STYLE_LIST,
		"??????? ??????? ???????",
		big_fmt,
		"?????", "??????"
	);
	return 1;
}
stock GetPlayerAdminCMDAllow(playerid, CMD_id)
{
	if(GetPlayerAdminEx(playerid) < 1) return false;
	
    return (g_player[playerid][CMD_ACCESS][CMD_id]  == '1');
}

stock IsBusinessNoEnter(action_id) //??????????
{
if(GetBusinessData(action_id, B_TYPE) == 20) return 1;
	switch(GetBusinessData(action_id, B_SQL_ID))
	{
		case 31, 32, 33:
		{
			return 1;
		}
	}
	return 0;
}

stock IsBusinessNoBuy(action_id) // ?????????
{
	switch(GetBusinessData(action_id, B_SQL_ID))
	{
		case 31,32,33:
		{
			return 1;
		}
	}
	return 0;
}


CMD:drugs(playerid, params[])
{
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /drugs [???-?? ?????]");
	
	extract params -> new drugs;
	
	if(!(1 <= drugs <= 3)) return SendClientMessage(playerid, 0xCECECEFF, "?????????? ????? ?? 1 ?? 3");

	new fmt_msg[512];

	if(GetPlayerData(playerid, P_DRUGS) < drugs) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ??????? ??????????");

	AddPlayerData(playerid, P_DRUGS, -, drugs);

	new Float:health;
    ApplyAnimation(playerid,"SMOKING","M_smk_drag",4.1,0,0,0,0,0);
	GetPlayerHealth(playerid, health);
	SetPlayerHealthEx(playerid, health + (drugs*20.0));

	SetPlayerWeather(playerid, -68);

	SetTimerEx("DrugEffectGone", 40000, false, "i", playerid);

	Action(playerid, "??????????? ?????????", _, false);

	format(fmt_msg, sizeof fmt_msg, "?? ???????????? %d ?????(?) ??????????. ???? ???????? (%d)", drugs, GetPlayerData(playerid, P_HEALTH));
	SendClientMessage(playerid, 0x32a44bFF, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET drugs=%d WHERE id=%d", GetPlayerData(playerid, P_DRUGS), GetPlayerAccountID(playerid));
	mysql_query(mysql, fmt_msg, false);

	return 1;
}
forward FTIMERSEC(playerid);
public FTIMERSEC(playerid)
{
if(GetPVarInt(playerid, "FermaGarelpva")==1)
{
if(minferma>=0)
{
new fmt_text[120];
sicferma--;

TextDrawHideForPlayer(playerid, zakaz3_TD[2]);
format(fmt_text, sizeof(fmt_text), "%d",sicferma);
TextDrawSetString(zakaz3_TD[2], fmt_text); 
TextDrawShowForPlayer(playerid, zakaz3_TD[2]); 

if(sicferma==1)
{
minferma--;
sicferma=59;
if(GetPVarInt(playerid, "FermaGarelpva")==1)
{
TextDrawHideForPlayer(playerid, zakaz3_TD[3]);
format(fmt_text, sizeof(fmt_text), "%d:",minferma);
TextDrawSetString(zakaz3_TD[3], fmt_text); 
TextDrawShowForPlayer(playerid, zakaz3_TD[3]); 
}
}
if(minferma==0 && sicferma==0)
{
KillTimer(timersecfer);
}
}
}
}
forward FTIMERSECVI(playerid);
public FTIMERSECVI(playerid)
{
if(GetPVarInt(playerid, "Zavodpva")==1)
{
if(minzavod>=0)
{
new fmt_text[120];
siczavod--;

TextDrawHideForPlayer(playerid, zakaz3_TD[2]);
format(fmt_text, sizeof(fmt_text), "%d",siczavod);
TextDrawSetString(zakaz3_TD[2], fmt_text); 
TextDrawShowForPlayer(playerid, zakaz3_TD[2]); 

if(siczavod==1)
{
minzavod--;
siczavod=59;
TextDrawHideForPlayer(playerid, zakaz3_TD[3]);
format(fmt_text, sizeof(fmt_text), "%d:",minzavod);
TextDrawSetString(zakaz3_TD[3], fmt_text); 
TextDrawShowForPlayer(playerid, zakaz3_TD[3]); 

}
if(minzavod==0 && siczavod==0)
{
KillTimer(timerzavod);
}
}
}
}
forward ARZERSECVI(playerid);
public ARZERSECVI(playerid)
{
if(GetPVarInt(playerid, "Arzpva")==1)
{
if(minvish>=0)
{
new fmt_text[120];
sicvish--;

TextDrawHideForPlayer(playerid, zakaz3_TD[2]);
format(fmt_text, sizeof(fmt_text), "%d",sicvish);
TextDrawSetString(zakaz3_TD[2], fmt_text); 
TextDrawShowForPlayer(playerid, zakaz3_TD[2]); 

if(sicvish==1)
{
minvish--;
sicvish=59;
TextDrawHideForPlayer(playerid, zakaz3_TD[3]);
format(fmt_text, sizeof(fmt_text), "%d:",minvish);
TextDrawSetString(zakaz3_TD[3], fmt_text); 
TextDrawShowForPlayer(playerid, zakaz3_TD[3]); 
}
if(minvish==0 && sicvish==0)
{
KillTimer(timerarz);
}
}
}
}
//?????????? ????? ? ???? ??????
//forward FERMAGAREL();
//??????? ????????? ???


forward FERMAGAREL();
public FERMAGAREL()
{
for(new i=0;i<MAX_PLAYERS;i++)
{
new playerid=i;
if(GetPVarInt(playerid, "FermaGarelpva")==1)
{
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    
    // ?????????? ????? ?????? ? ???? ??????
    SetPlayerData(playerid, P_OHFAM, GetPlayerData(playerid, P_OHFAM) + 1);
    UpdatePlayerDatabaseInt(playerid, "ocfam", GetPlayerData(playerid, P_OHFAM));
    AddFamilyData(fam_id, F_OCKIFARMA, +, 1);
  
  format(fmt_text, sizeof(fmt_text), "UPDATE family SET ochki=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_OCKIFARMA), fam_id);
    mysql_query(mysql, fmt_text, false);
    
    // ????????? ????? ????? ??????
    new Cache: result;
    mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family WHERE id=%d LIMIT 1", fam_id);
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ?????
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }
    
    // ????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki FROM family ORDER BY ochki DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ??????
        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text);
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]);
    }
    else
    {
        cache_delete(result);
    }
    }
    }
    }
    forward ZAVODBUSAEVO();
public ZAVODBUSAEVO()
{
for(new i=0;i<MAX_PLAYERS;i++)
{
new playerid=i;
if(GetPVarInt(playerid, "Zavodpva")==1)
{
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    
    // ?????????? ????? ?????? ? ???? ??????
    SetPlayerData(playerid, P_OHZAVOD, GetPlayerData(playerid, P_OHZAVOD) + 1);
    UpdatePlayerDatabaseInt(playerid, "oczav", GetPlayerData(playerid, P_OHZAVOD));
    AddFamilyData(fam_id, F_OCZAVOD, +, 1);
  
  format(fmt_text, sizeof(fmt_text), "UPDATE family SET ochki1=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_OCZAVOD), fam_id);
    mysql_query(mysql, fmt_text, false);
    
    // ????????? ????? ????? ??????
    new Cache: result;
    mysql_format(mysql, query, sizeof query, "SELECT ochki1 FROM family WHERE id=%d LIMIT 1", fam_id);
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki1");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ?????
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }
    
    // ????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki1 FROM family ORDER BY ochki1 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki1");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ??????
        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text);
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]);
    }
    else
    {
        cache_delete(result);
    }
    }
    }
    }
    forward ARZVISHKA();
public ARZVISHKA()
{
for(new i=0;i<MAX_PLAYERS;i++)
{
new playerid=i;
if(GetPVarInt(playerid, "Arzpva")==1)
{
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    
    // ?????????? ????? ?????? ? ???? ??????
    SetPlayerData(playerid, P_OHARZ, GetPlayerData(playerid, P_OHARZ) + 1);
    UpdatePlayerDatabaseInt(playerid, "ocarz", GetPlayerData(playerid, P_OHARZ));
    AddFamilyData(fam_id, F_VISHARZ, +, 1);
  
  format(fmt_text, sizeof(fmt_text), "UPDATE family SET ochki2=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_VISHARZ), fam_id);
    mysql_query(mysql, fmt_text, false);
    
    // ????????? ????? ????? ??????
    new Cache: result;
    mysql_format(mysql, query, sizeof query, "SELECT ochki2 FROM family WHERE id=%d LIMIT 1", fam_id);
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki2");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ?????
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }
    
    // ????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki2 FROM family ORDER BY ochki2 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki1");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ??????
        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text);
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]);
    }
    else
    {
        cache_delete(result);
    }
    }
    }
    }
    forward KARAKVISHKA();
public KARAKVISHKA()
{
for(new i=0;i<MAX_PLAYERS;i++)
{
new playerid=i;
if(GetPVarInt(playerid, "Karakpva")==1)
{
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    
    // ?????????? ????? ?????? ? ???? ??????
    SetPlayerData(playerid, P_OHKAR, GetPlayerData(playerid, P_OHKAR) + 1);
    UpdatePlayerDatabaseInt(playerid, "ockar", GetPlayerData(playerid, P_OHKAR));
    AddFamilyData(fam_id, F_OCKIFARMA, +, 1);
  
  format(fmt_text, sizeof(fmt_text), "UPDATE family SET ochki3=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_VISHKAR), fam_id);
    mysql_query(mysql, fmt_text, false);
    
    // ????????? ????? ????? ??????
    new Cache: result;
    mysql_format(mysql, query, sizeof query, "SELECT ochki3 FROM family WHERE id=%d LIMIT 1", fam_id);
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki3");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ?????
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }
    
    // ????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki3 FROM family ORDER BY ochki3 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki3");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ??????
        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text);
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]);
    }
    else
    {
        cache_delete(result);
    }
    }
    }
    }
    forward GARELVISHKA();
public GARELVISHKA()
{
for(new i=0;i<MAX_PLAYERS;i++)
{
new playerid=i;
if(GetPVarInt(playerid, "Garelpva")==1)
{
    new query[128];
    new fmt_text[128];
    new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;
    
    // ?????????? ????? ?????? ? ???? ??????
    SetPlayerData(playerid, P_OHBUS, GetPlayerData(playerid, P_OHBUS) + 1);
    UpdatePlayerDatabaseInt(playerid, "ocbus", GetPlayerData(playerid, P_OHBUS));
    AddFamilyData(fam_id, F_VISBUS, +, 1);
  
  format(fmt_text, sizeof(fmt_text), "UPDATE family SET ochki4=%d WHERE id=%d LIMIT 1", GetFamilyData(fam_id, F_VISBUS), fam_id);
    mysql_query(mysql, fmt_text, false);
    
    // ????????? ????? ????? ??????
    new Cache: result;
    mysql_format(mysql, query, sizeof query, "SELECT ochki4 FROM family WHERE id=%d LIMIT 1", fam_id);
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new ochki = cache_get_field_content_int(0, "ochki4");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ?????
        PlayerTextDrawHide(playerid, zakaz3_PTD[playerid][0]);
        format(fmt_text, sizeof(fmt_text), "%d", ochki);
        PlayerTextDrawSetString(playerid, zakaz3_PTD[playerid][0], fmt_text);
        PlayerTextDrawShow(playerid, zakaz3_PTD[playerid][0]);
    }
    else
    {
        cache_delete(result);
    }
    
    // ????????? ????? ??????
    mysql_format(mysql, query, sizeof query, "SELECT ochki4 FROM family ORDER BY ochki4 DESC LIMIT 1");
    result = mysql_query(mysql, query, true);
    
    if (cache_num_rows(result))
    {
        new lider_ochki = cache_get_field_content_int(0, "ochki4");
        cache_delete(result);

        // ?????????? ?????-????? ??ù ????? ??????
        TextDrawHideForPlayer(playerid, zakaz3_TD[1]);
        format(fmt_text, sizeof(fmt_text), "%d", lider_ochki);
        TextDrawSetString(zakaz3_TD[1], fmt_text);
        TextDrawShowForPlayer(playerid, zakaz3_TD[1]);
    }
    else
    {
        cache_delete(result);
    }
    }
    }
    }
forward DrugEffectGone(playerid);
public DrugEffectGone(playerid)
{
    new time[3];
    new pogoda;

    gettime(time[0], time[1], time[2]);
    SetPlayerTime(playerid, time[0], time[1]);
    SetPlayerWeather(playerid, pogoda);
    SetPlayerDrunkLevel(playerid, 0);
    return 1;
}

stock CreateQuestPickup()
{
	for(new idx; idx < sizeof quest_pos; idx ++)
	{
		CreatePickup(1276, 23, quest_pos[idx][0], quest_pos[idx][1], quest_pos[idx][2], -1, PICKUP_ACTION_QUEST_MENU, idx);
		CreateDynamic3DTextLabel(""c_i"??????", COR_SERVER, quest_pos[idx][0], quest_pos[idx][1], quest_pos[idx][2] + 0.7, 9.5);
	}
}
stock GromovLohAndPidr(playerid)
{
	Dialog(playerid,0,DIALOG_STYLE_MSGBOX,"","????? ????? ?? ????????,\n?? ????? ?????? ?????,\n?? ???ù? ? ?????? ???ù!\n? 23 ??????ù!","????ù??","");
	return 1;
}
stock ShowPlayerQuest23(playerid)
{
	Dialog(playerid,0,DIALOG_STYLE_MSGBOX,"","??????ù ????? ????,\n? ???ù ??ù ???ù ???? ???? ???????? ??ù ???????? ????? ??????.\n\n???? ???????? ?? ??? ????????? ?? ???????? ????\n???????: 15 DRUB","????ù??","??????");
	return 1;
}

stock ShowPlayerQuestMenuFrac(playerid)
{
	new fmt_text[700];

	format
	(
		fmt_text,
		sizeof fmt_text,
		""c_server"[1] "c_b"?????????? ???? ??????? ???? ?? ???????| %s\n"\
		""c_server"[2] "c_b"?? ????? ???? | %s\n"\
		""c_server"[3] "c_b"??????????? ??????? ???? ? ?????? | %s\n"\
		""c_server"[4] "c_b"???????????ù ?? ??ù?? | %s\n"\
		""c_server"[5] "c_b"???? ??????? ???? | %s",
		GetPlayerData(playerid, P_F_QUEST_1) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
		GetPlayerData(playerid, P_F_QUEST_2) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
		GetPlayerData(playerid, P_F_QUEST_3) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
		GetPlayerData(playerid, P_F_QUEST_4) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
		GetPlayerData(playerid, P_F_QUEST_5) ? ("{32CD32}?????????") : ("{F81414}?? ?????????")
	);

	Dialog
	(
		playerid, DIALOG_ACTION_F_QUEST, DIALOG_STYLE_LIST,
		"??????",
		fmt_text,
		"???????", "???????"
	);

	return 1;
}

stock ShowPlayerQuestMenu(playerid)
{
	new fmt_text[990];

	format
	(
		fmt_text,
		sizeof fmt_text,
		""c_server"1. "c_b"?????? ??????\t\t\t\t%s\n"\
		""c_server"2. "c_b"???????? ???????????? ?????\t\t\t\t{32CD32}????????\n"\
		""c_server"7. "c_b"???? ?????????ù\t\t\t\t%s\n"\
		""c_server"3. "c_b"?????????? ???????\t\t\t\t%s\n"\
		""c_server"4. "c_b"ùù????ù ????????ù\t\t\t\t%s\n"\
		""c_server"5. "c_b"?????????ù ?? ??????????? ??????\t\t\t\t{32CD32}????????\n"\
		""c_server"6. "c_b"???????? ?? ???????\t\t\t\t{32CD32}????????\n"\
		""c_server"7. "c_b"???????? ? ?????\t\t\t\t{32CD32}????????\n"\
		""c_server"8. "c_b"?????????? ?????? ??????????\t\t\t\t{32CD32}????????\n"\
		""c_server"9. "c_b"?????? ????????/???\t\t\t\t{32CD32}????????\n"\
		""c_server"10. "c_b"???????? 10 ???????\t\t\t\t{32CD32}????????\n"\
		""c_server"11. "c_b"???? ?????ù??!\t\t\t\t%s\n"\
		""c_server"12. "c_b"????????? ??????\t\t\t\t%s\n"\
		""c_server"13. "c_b"?????????? ??????\t\t\t\t%s\n"\
		""c_server"14. "c_b"?????? ?? ????? ???????\t\t\t\t%s\n"\
		""c_server"15. "c_b"???????\t\t\t\%s",
		GetPlayerData(playerid, P_QUEST_1) ? ("{EB4C42}?????????") : ("{32CD32}????????"),
		GetPlayerData(playerid, P_QUEST_2) ? ("{EB4C42}?????????") : ("{32CD32}????????"),
		GetPlayerData(playerid, P_QUEST_3) ? ("{EB4C42}?????????") : ("{32CD32}????????"),
		GetPlayerData(playerid, P_QUEST_4) ? ("{EB4C42}?????????") : ("{32CD32}????????"),
		GetPlayerData(playerid, P_QUEST_5) ? ("{EB4C42}?????????") : ("{32CD32}????????"),
		GetPlayerData(playerid, P_QUEST_6) ? ("{EB4C42}?????????") : ("{32CD32}????????"),
		GetPlayerData(playerid, P_QUEST_7) ? ("{EB4C42}?????????") : ("{32CD32}????????"),
		GetPlayerData(playerid, P_QUEST_8) ? ("{EB4C42}?????????") : ("{32CD32}????????")
	);

	Dialog
	(
		playerid, DIALOG_ACTION_QUEST, DIALOG_STYLE_LIST,
		"{DC143C}"SERVER_NAME"{ffffff} | ??????",
		fmt_text,
		"???????", "???????"
	);

	return 1;
}

CMD:quest(playerid)
{
	ShowPlayerQuestMenu(playerid);
}

CMD:vleave(playerid, params[])
{
	if(GetPlayerData(playerid, P_IMPROVEMENTS) < 2) return SendClientMessage(playerid, 0x999999FF, "??????????? ????????? \"?????????????\", ????? ????????ù ?? ???????????? ???????");

	if(!GetPlayerTeamEx(playerid)) return ShowNotificationDefault(playerid, 2, 5, 2, 1, "?? ?? ???????? ? ???????????");

	new fmt_text[999];

	format
	(
		fmt_text, sizeof fmt_text,
		""SC"???? ??????????ù{ffff00}: \"%s\".\n\n"\
		"{ffffff}?? ????????????? ?????? ???????? ?????? ??????????? ??\n"\
		"{ffffff}???????????? ????????",
		GetTeamName(GetPlayerTeamEx(playerid))
	);

	Dialog(playerid, DIALOG_TEAM_LEAVE, DIALOG_STYLE_MSGBOX, "{FF6347}"SERVER_NAME" {ffffff}| ?????????????", fmt_text, "?????", "??????");

	return 1;
}

CMD:unj(playerid)
{
	if(!GetPlayerPremium(playerid) || GetPlayerData(playerid, P_UNJ)) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? VIP, ??? ?? ??? ??????????????? ???????? ?????");
    if(GetPlayerPremium(playerid) == 2)
	{
		SetPlayerData(playerid, P_JAIL ,GetPlayerData(playerid, P_JAIL) / 2);
	}
	else if(GetPlayerPremium(playerid) == 3)
	{
		SetPlayerData(playerid, P_JAIL ,GetPlayerData(playerid, P_JAIL) / 3);
	}
    SetPlayerData(playerid, P_UNJ, 1);
    UpdatePlayerDatabaseInt(playerid, "unj", GetPlayerData(playerid, P_UNJ));
    SendClientMessage(playerid, 0xCECECEFF, "?? ????????? ???? ??????!");
	return 1;
}


CMD:togphone(playerid, params[])
{
	if(!GetPlayerPhone(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");
	if(!GetPlayerPremium(playerid))
	    return   SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? VIP ????????.");

	if(GetPlayerPhoneCall(playerid, PC_INCOMING_PLAYER) != INVALID_PLAYER_ID || GetPlayerPhoneCall(playerid, PC_OUTCOMING_PLAYER) != INVALID_PLAYER_ID)
		return SendClientMessage(playerid, 0xCECECEFF, "????????? ??????? ????????");

	if(GetPlayerPhoneCall(playerid, PC_ENABLED))
	{
		SetPlayerPhoneCall(playerid, PC_ENABLED, false);
		SendClientMessage(playerid, 0xCECECEFF, "ù?????? ????????");
	}
	else
	{
		SetPlayerPhoneCall(playerid, PC_ENABLED, true);
		SendClientMessage(playerid, 0x32a44bFF, "ù?????? ???????");
	}
	return 1;
}

CMD:v(playerid, params[])
{
	if(GetPlayerPremium(playerid) < 1) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? VIP ???????? ");
	else if(IsPlayerMuted(playerid) > 0) return SendClientMessage(playerid, 0xCECECEFF, "?????? ? ??? ????????????. ????ù ?? ?????????????: {66CC33}/time");
	else if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /v [?????]");

	new fmt_msg[144];



	format(fmt_msg, sizeof fmt_msg, "[VIP Platinum] %s[%d]: %s", GetPlayerNameEx(playerid), playerid, params);

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(!GetPlayerPremium(i)) continue;
        if(!GetPlayerData(i, P_PREMIUM_CHAT)) continue;

		SendClientMessage(i, COLOR_YELLOW , fmt_msg);
	}
	return 1;
}

CMD:voff(playerid, params[])
{
	if(GetPlayerPremium(playerid) < 1) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? VIP ???????? ");
	if(GetPlayerData(playerid, P_PREMIUM_CHAT))
	{
		SendClientMessage(playerid,-1,"?? ????????? VIP ???");
		SetPlayerData(playerid, P_PREMIUM_CHAT, 0);
		return 1;
	}
	if(!GetPlayerData(playerid, P_PREMIUM_CHAT))
	{
		SendClientMessage(playerid,-1,"?? ???????? VIP ???");
		SetPlayerData(playerid, P_PREMIUM_CHAT, 1);
		return 1;
	}
	return 1;
}

stock SendMessageToYouTubers(message[], color, y_level = 1)
{
    if(y_level < 1)
        y_level = 1;

    new count;
    foreach(new playerid : Player)
    {
        if(!IsPlayerLogged(playerid)) continue;
        if(GetPlayerYouTubeEx(playerid) < y_level) continue;

        SendClientMessage(playerid, color, message);
        count ++;
    }
    return count;
}

CMD:yhelp(playerid, params[])
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	new fmt_str[350 + 1];

	format
	(
		fmt_str, sizeof fmt_str,
		"{6666CC}/yz -{FFFFFF} ???????? ? ??????????-????{6666CC}\n\
		/yre -{FFFFFF} ?????? ?? ???????{6666CC}\n\
		/yreoff -{FFFFFF} ????????? ?????? ?? ???????{6666CC}\n\
		/y -{FFFFFF}  ?????????? ???{6666CC}\n\
		/yhp -{FFFFFF} ???????????? ???? ??{6666CC}\n\
		/yveh -{FFFFFF} ?????????? ?????????{6666CC}\n\
		/yskin -{FFFFFF} ?????? ???? ????????? ????{6666CC}\n\
		/sptext -{FFFFFF} ?????? ????? ?? ??????{6666CC}\n\
		\n\
		?????? ????????? ?? ????? ?? ?????");

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????? ????????", fmt_str, "???????", "");
	return 1;
}

CMD:ythelp(playerid, params[])
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	new fmt_str[350 + 1];

	format
	(
		fmt_str, sizeof fmt_str,
		"{6666CC}/yz -{FFFFFF} ???????? ? ?????-????{6666CC}\n\
		/yre -{FFFFFF} ?????? ?? ???????{6666CC}\n\
		/yreoff -{FFFFFF} ????????? ?????? ?? ???????{6666CC}\n\
		/y -{FFFFFF}  ?????????? ???{6666CC}\n\
		/yhp -{FFFFFF} ???????????? ???? ??{6666CC}\n\
		/yveh -{FFFFFF} ?????????? ?????????{6666CC}\n\
		/yskin -{FFFFFF} ?????? ???? ????????? ????{6666CC}\n\
		/sptext -{FFFFFF} ?????? ????? ?? ??????{6666CC}\n\
		\n\
		?????? ????????? ?? ????? ?? ?????");

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????? ????????", fmt_str, "???????", "");
	return 1;
}

CMD:yz(playerid)
{
    if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	SetPlayerPos(playerid,294.680053,2139.920410,1765.466308);
    SetPlayerVirtualWorld(playerid,1);
    SetPlayerInterior(playerid,1);
    SendClientMessage(playerid,-1, !""SC"?? ???? ??????? ??????????????? ? ???? ?????????????.");
    SendClientMessage(playerid,-1, !""SC"????????????? ???ù??? ? ?? ????????? ? ?? ??????????.");
 return true;
}


CMD:yreoff(playerid, params[])
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	if(GetPlayerSpectateData(playerid, S_PLAYER) != -1)
	{
		StopSpectateY(playerid);

		SendClientMessage(playerid, -1,"?? ????????? ?????? ?? ???????");
	}

	return 1;
}

CMD:yre(playerid, params[])
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /yre [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

    if(GetPlayerAdminEx(to_player) < 1)
		return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??????? ?? ???????????????");

	if(GetPlayerSpectateData(playerid, S_PLAYER) == -1)
	{
		new Float: x,
			Float: y,
			Float: z,
			Float: a,
			skin = GetPlayerSkin(playerid);

		GetPlayerPos(playerid, x, y, z);
		GetPlayerFacingAngle(playerid, a);

		SetPlayerSpectateData(playerid, S_START_POS_X, x);
		SetPlayerSpectateData(playerid, S_START_POS_Y, y);
		SetPlayerSpectateData(playerid, S_START_POS_Z, z);
		SetPlayerSpectateData(playerid, S_START_ANGLE, a);

		SetPlayerSpectateData(playerid, S_START_INTERIOR, GetPlayerInterior(playerid));
		SetPlayerSpectateData(playerid, S_START_VIRTUAL_WORLD, GetPlayerVirtualWorld(playerid));

		SetSpawnInfo(playerid, 0, skin, x, y, z, a, 0, 0, 0, 0, 0, 0);
	}

	StartSpectateY(playerid, to_player);

	new fmt_text[90];

	format(fmt_text, sizeof fmt_text, "[Y] ?????? %s[%d] ????? ??????? ?? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
	SendMessageToYouTubers(fmt_text, 0xCECECEFF);

	format(fmt_text, sizeof fmt_text, "?????? ?????? ?? %s[acc:%d]", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);

	return 1;
}

CMD:y(playerid, params[])
{
	if(GetPlayerYouTubeEx(playerid) >= 1)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /y [?????]");

		new fmt_str[128];

		format(fmt_str, sizeof fmt_str, "[YouTube] ?????? %s[%d]: %s", GetPlayerNameEx(playerid), playerid, params);
		SendMessageToYouTubers(fmt_str, 0x99cc00FF);

		SendLog(playerid, LOG_TYPE_ADMIN_CHAT, params);
	}

	return 1;
}

CMD:yskin(playerid, params[])
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	extract params -> new skin_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /skin [id ?????]");

	if(!(-1 <= skin_id <= 299) || skin_id == 0) return SendClientMessage(playerid, 0xCECECEFF, "ID ????? ?? 1 ?? 299");

	if(skin_id != -1)
		SetPlayerSkin(playerid, skin_id);
	else
		SetPlayerSkin(playerid, GetPlayerSkinEx(playerid));

	new fmt_text[100];

	format(fmt_text, sizeof fmt_text, "?? ?????? ???? ???? (ID: %s)", skin_id);
	SendClientMessage(playerid, -1, fmt_text);

	return 1;
}

CMD:yhp(playerid)
{
    if(GetPlayerYouTubeEx(playerid) < 1) return 1;

    SetPlayerData(playerid, P_HEALTH, 100);
	SetPlayerHealthEx(playerid, 100);

	if(GetPlayerData(playerid, P_HOSPITAL))
		SetPlayerData(playerid, P_HOSPITAL, false);

	SendClientMessage(playerid, -1, "?? ???????????? ???? ??");

	return 1;
}

CMD:sptext(playerid, params[])
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	if(!strlen(params))
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sptext [id ??????] [?????]");

	extract params -> new to_player, string: message[144 + 1];

	if(GetPlayerAdminEx(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "?????ù ?????? ?? ??????????????");

	if(!IsPlayerConnected(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	OnPlayerText(to_player,message);

	return true;
}

CMD:yveh(playerid, params[])
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	extract params -> new model_id, color_1, color_2; else return SendClientMessage(playerid, 0xCECECEFF, "{ffff00}|{ffffff} ???????????: /veh [id ??????] [???? 1] [???? 2] [?????? ??ù ??????? (?? ??ù????????)]");

	if(!(400 <= model_id <= 30000)) return SendClientMessage(playerid, 0xCECECEFF, "{ffff00}|{ffffff}??????????? ?????? ?? 400 ?? 2591");

	new status;

	sscanf(params, "{d}{d}{d}d", status);

	if(!(0 <= status <= 1))
		return SendClientMessage(playerid, 0x999999FF, "{ffff00}|{ffffff}?????? ??????? ? ??????????: 0 - ??? ???????, 1 - ???????? ?????? ??????");

	new Float: x,
		Float: y,
		Float: z,
		Float: a;

	GetPlayerPos(playerid, x, y, z);
	GetPlayerFacingAngle(playerid, a);

	new vehicleid = CreateVehicle(model_id, x, y, z, a, color_1, color_2, -1, 0, VEHICLE_ACTION_TYPE_ADMIN_CAR, status);
	PutPlayerInVehicle(playerid, vehicleid, 0);
	SetTimerEx("ShowEngineNotification", 1000, false, "i", playerid);

	new fmt_text[999];

	format(fmt_text, sizeof fmt_text, "[A] ?????? %s[%d] ?????? ????????? ID: %d. ????: %d,%d",
	GetPlayerNameEx(playerid), playerid, model_id, color_1, color_2);

	SendMessageToAdmins(fmt_text, 0xCECECEFF);

	format(fmt_text, sizeof fmt_text, "?????? ????????? (%d, %d, %d)", model_id, color_1, color_2);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_text);
	
	//SendClientMessage(playerid, COLOR_WHITE, "{00CED1}[DEBUG]{FFFFFF} Create Vehicle");

	return 1;
}
stock StartSpectateY(playerid, for_player)
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;

	SetPlayerSpectateData(playerid, S_PLAYER, for_player);

	SetPlayerInterior(playerid, GetPlayerInterior(for_player));
	SetPlayerVirtualWorld(playerid, GetPlayerVirtualWorld(for_player));

	TogglePlayerSpectating(playerid, true);

	if(IsPlayerInAnyVehicle(for_player))
	{
		PlayerSpectateVehicle(playerid, GetPlayerVehicleID(for_player));
	}
	else PlayerSpectatePlayer(playerid, for_player);

	return 1;
}
stock StopSpectateY(playerid)
{
	if(GetPlayerYouTubeEx(playerid) < 1) return 1;
	if(GetPlayerSpectateData(playerid, S_PLAYER) == -1) return 1;

	TogglePlayerSpectating(playerid, false);

	SetPlayerSpectateData(playerid, S_PLAYER, -1);

	SetPlayerPosEx
	(
		playerid,
		GetPlayerSpectateData(playerid, S_START_POS_X),
		GetPlayerSpectateData(playerid, S_START_POS_Y),
		GetPlayerSpectateData(playerid, S_START_POS_Z),
		GetPlayerSpectateData(playerid, S_START_ANGLE),
		GetPlayerSpectateData(playerid, S_START_INTERIOR),
		GetPlayerSpectateData(playerid, S_START_VIRTUAL_WORLD)
	);

	return 1;
}

CMD:setyt(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /setyt [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(GetPlayerYouTubeEx(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "? ?????? ??? ???? ?????????ù ???????");

	SetPlayerData(to_player, P_YOUTUBE, 1);
	UpdatePlayerDatabaseInt(to_player, "youtube", 1);

	new fmt_text[128];

	format(fmt_text, sizeof fmt_text, "%s[%d] ????? ??? ?????????? ???????", GetPlayerNameEx(playerid), playerid);
	SendClientMessage(to_player, 0xFF5533FF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] %s %s[%d] ????? ?????? %s[%d] ?????????? ???????",
	GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);

	SendMessageToAdmins(fmt_text, 0xFF5533FF);

	format(fmt_text, sizeof fmt_text, "???????? %s[acc:%d] ?? ???? ???????", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}

CMD:delyt(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 5) return 1;

	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /delyt [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	SetPlayerData(to_player, P_YOUTUBE, 0);
	UpdatePlayerDatabaseInt(to_player, "youtube", 0);

	new fmt_text[128];

	format(fmt_text, sizeof fmt_text, "%s[%d] ?????? ? ??? ?????????? ???????", GetPlayerNameEx(playerid), playerid);
	SendClientMessage(to_player, 0xFF5533FF, fmt_text);

	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ? ?????? %s[%d] ?????????? ???????",
	GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);

	SendMessageToAdmins(fmt_text, 0xFF5533FF);

	format(fmt_text, sizeof fmt_text, "?????? %s[acc:%d] ???? ???????", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

	return 1;
}

stock RandomReklama(text)
{
	//format(stringer, 85, "{3399FF}>> ?? ??????? ???????????? ????ù ?%d ????ù {FFFF00}RUSSIA-MOBILE.RU{3399FF} <<", Config[sDonPower]);

    switch(text)
    {
    case 0:
        {
            //return 1;
        }
    case 1:
        {

        }
    case 2:
        {

        }
    }
    //SendClientMessageToAll(0xFFCD00ff, "{3399FF}[!]{ffffff} > ???? ? ?? ??????ù?? ?ù???????ù? ?? ????? FORUM.RUSSIA-MOBILE.RU");
    return 1;
}

stock FD(playerid)
{
    mysql_format(mysql, str, 250, "SELECT * FROM `full_dostup` WHERE name = '%s'", GetPlayerNameEx(playerid));
    mysql_query(mysql, str, true);

    if(cache_num_rows())
    	return 1;
    else
    	return 0;
}

CMD:so(playerid, params[])
{
	if(GetPlayerHelperEx(playerid) >= 1)
	{
		if(!strlen(params))
			return SendClientMessage(playerid, 0xCECECEFF, "???????????: /so [?????]");

		new fmt_str[128];

		format(fmt_str, sizeof fmt_str, "[S] ????? ????????? %s[%d]: %s", GetPlayerNameEx(playerid), playerid, params);
		SendMessageToHelpers(fmt_str, 0x99CC00FF);

	}

	return 1;
}



stock ShowPlayerReportMenuDialog(playerid)
{
    if(AntiTimerReport(playerid)) return true;
    new fmt_text[50];

    format
    (
        fmt_text,
        sizeof fmt_text,
        "{B5A8FF}????????? ??????\n"\
        "{B5A8FF}????????? ??????\n"
    );

    Dialog
    (
        playerid, DIALOG_ADMINCALL_MENU, DIALOG_STYLE_LIST,
        "{6666CC}??ù?? ? ??????????????",
        fmt_text,
        "???????", "???????"
    );

    return 1;
}



CMD:vipad(playerid, params[])
{
    if(GetPlayerPremium(playerid) < 1) return Send(playerid,-1,"? ??? ??? VIP ????????");
    

    if(AntiTimerVipad(playerid)) return true;

    if(GetPlayerPhone(playerid) != 0)
	{
		if(GetPlayerMoneyEx(playerid) >= 50000)
		{
			if(!strlen(params))
				return SendClientMessage(playerid, 0xCECECEFF, "???????????: /vipad [?????]");

			extract params -> new string: message[144 + 1];

			if(IsAIP(message))
			{
	       		SendClientMessage(playerid, -1, "?????????ù ? ???????!");
	        	return false;
	    	}

			new fmt_str[128];

			GivePlayerMoneyEx(playerid, -50000, "vip ???ù??", true, true);

			format(fmt_str, sizeof fmt_str, "Truee Russia | "c_b"%s[%d]: %s ù??: %d", GetPlayerNameEx(playerid), playerid, message, GetPlayerPhone(playerid));
			SendClientMessageToAll(0xFF9945FF, fmt_str);
			PlayerPlaySound(playerid, 1085, 0.0, 0.0, 0.0);



		}
		else
			return SendClientMessage(playerid, -1, "? ??? ???????????? ?????, ????? 50.000$");
		
    }
	else SendClientMessage(playerid, 0x999999FF, "? ??? ??? ????????. ??? ????? ?????? ? ??????? ??????");

	return 1;
}

stock SellDebtorsHome()
{
	new query[800];
	for(new i; i < g_house_loaded; i ++)
	{
		if(GetHouseData(i, H_RENT_DATE) < gettime())
		{
		    new owner_id = GetHouseData(i, H_OWNER_ID);

			if(owner_id == 0) continue;


			format(query, sizeof query, "UPDATE accounts a,houses h SET `house`=-1,`house_room`=-1,`house_type`=-1, h.owner_id='0', h.lock='0', h.rent_time='0' WHERE a.id=h.owner_id AND h.id='%d'", GetHouseData(i, H_SQL_ID));
			mysql_query(mysql, query, false);

			new Cache: result, owner_name[21];

			mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE id=%d LIMIT 1", owner_id);
			result = mysql_query(mysql, query);

			if(cache_num_rows())
				cache_get_field_content(0, "name", owner_name, mysql, 21);
			cache_delete(result);

			new owner_player = GetPlayerIDBySqlID(owner_id);
			if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
                SetPlayerData(owner_player, P_HOUSE, -1);
                SetPlayerData(owner_player, P_HOUSE_ROOM, -1);
                SetPlayerData(owner_player, P_HOUSE_TYPE, -1);
                mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `house`=-1,`house_room`=-1,`house_type`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
				mysql_query(mysql, query, false);
			} else {
				mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `house`=-1,`house_room`=-1,`house_type`=-1 WHERE `id`=%d LIMIT 1", owner_id);
				mysql_query(mysql, query, false);
			}
			SetHouseData(i, H_OWNER_ID, 0);
			SetHouseData(i, H_IMPROVEMENTS,		0);

			SetHouseData(i, H_RENT_DATE,		0);
			SetHouseData(i, H_LOCK_STATUS,		false);

			format(query, sizeof query, "UPDATE houses SET `owner_id`=0,`store_x`=0.0,`store_y`=0.0,`store_z`=0.0,`store_metall`=0,`store_drugs`=0,`store_weapon`=0,`store_ammo`=0,`store_skin`=0,`lock`=0 WHERE id=%d", GetHouseData(i, H_SQL_ID));
			mysql_query(mysql, query, false);

			
			UpdateHouse(i);

			HouseHealthInit(i);
			HouseStoreInit(i);

			new fmt_text[256];

			new description[64];

			description = "???? ????";

			format
			(
				fmt_text, sizeof fmt_text,
				"INSERT INTO return_money \
				(uid, money, description, status)\
				VALUES ('%d', '%d', '%s', 0)",
				owner_id,
				GetHouseData(i, H_PRICE) / 2,
				description
			);

			mysql_query(mysql, fmt_text, true);
		}
	}
//	return 1;
}
stock SellDebtorsBusiness()
{
	new query[400];
	for(new i; i < g_business_loaded; i ++)
	{
		if(GetBusinessData(i, B_RENT_DATE) < gettime())
		{
		    new owner_id = GetBusinessData(i, B_OWNER_ID);
		    if(owner_id == 0) continue;

			format(query, sizeof query, "UPDATE accounts a,business b SET a.business=-1,b.owner_id=0,b.products=0,b.prod_price=0,b.lock=0,b.rent_time=0 WHERE a.id=b.owner_id AND b.id=%d", GetBusinessData(i, B_SQL_ID));
			mysql_query(mysql, query, false);

			format(query, sizeof query, "DELETE FROM `business_gps` WHERE id = '%d'", i);
			mysql_query(mysql, query, false);
			new Cache: result, owner_name[21];

			mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE id=%d LIMIT 1", owner_id);
			result = mysql_query(mysql, query);

			if(cache_num_rows())
				cache_get_field_content(0, "name", owner_name, mysql, 21);
			cache_delete(result);

			format(query, sizeof query, "UPDATE accounts a,business b SET a.business=-1,b.owner_id=0,b.name='',b.products=0,b.prod_price=0,b.lock=0 WHERE a.id=%d AND b.id=%d", owner_id, GetBusinessData(i, B_SQL_ID));
			mysql_query(mysql, query, false);
			new owner_player = GetPlayerIDBySqlID(owner_id);
			if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
				SetPlayerData(owner_player, P_BUSINESS, -1);
                mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `business`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
				mysql_query(mysql, query, false);
			} else {
			    mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `business`=-1 WHERE `id`=%d LIMIT 1", owner_id);
				mysql_query(mysql, query, false);
			}
			SetBusinessData(i, B_OWNER_ID, 0);
			SetBusinessData(i, B_IMPROVEMENTS, 		0);

			SetBusinessData(i, B_PRODS, 			0);
			SetBusinessData(i, B_PROD_PRICE,		0);

			SetBusinessData(i, B_BALANCE,			0);
			SetBusinessData(i, B_RENT_DATE,			0);
			SetBusinessData(i, B_ENTER_MUSIC,		0);
			SetBusinessData(i, B_LOCK_STATUS,		false);

			BusinessHealthPickupInit(i);

			format(query, sizeof query, "DELETE FROM business_gps WHERE bid=%d", i);
			mysql_query(mysql, query, false);

			g_business_gps_init = false;

			CallLocalFunction("UpdateBusinessLabel", "i", i);

			new fmt_text[256];

			new description[64];

			description = "???? ???????";

			format
			(
				fmt_text, sizeof fmt_text,
				"INSERT INTO return_money \
				(uid, money, description, status)\
				VALUES ('%d', '%d', '%s', 0)",
				owner_id,
				GetBusinessData(i, B_PRICE) / 2,
				description
			);

			mysql_query(mysql, fmt_text, true);
		}
	}
//	return 1;
}
stock SellDebtorsFuel()
{
	new query[400];
	for(new i; i < g_fuel_station_loaded; i ++)
	{

		if(GetFuelStationData(i, FS_RENT_DATE) < gettime())
		{
			new owner_id = GetFuelStationData(i, FS_OWNER_ID);

			if(owner_id == 0) continue;

			format(query, sizeof query, "UPDATE accounts a,fuel_stations f SET a.fuel_st=-1,f.owner_id=0,f.fuels=1000,f.fuel_price=3,f.lock=0,f.rent_time=0 WHERE a.id=f.owner_id AND f.id=%d", GetFuelStationData(i, FS_SQL_ID));
			mysql_query(mysql, query, false);

			new Cache: result, owner_name[21];

			mysql_format(mysql, query, sizeof query, "SELECT * FROM accounts WHERE id=%d LIMIT 1", owner_id);
			result = mysql_query(mysql, query);

			if(cache_num_rows())
				cache_get_field_content(0, "name", owner_name, mysql, 21);
			cache_delete(result);

			new owner_player = GetPlayerIDBySqlID(owner_id);
			if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
	            SetPlayerData(owner_player, P_FUEL_ST, -1);
				format(query, sizeof query, "UPDATE accounts SET `fuel_st`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
				mysql_query(mysql, query, false);
			} else {
				format(query, sizeof query, "UPDATE accounts SET `fuel_st`=-1 WHERE `id`=%d LIMIT 1", owner_id);
				mysql_query(mysql, query, false);
			}

			SetFuelStationData(i, FS_OWNER_ID, 0);
			SetFuelStationData(i, FS_IMPROVEMENTS, 0);

			SetFuelStationData(i, FS_FUELS, 		1000);
			SetFuelStationData(i, FS_FUEL_PRICE,	3);
			SetFuelStationData(i, FS_BUY_FUEL_PRICE,0);

			SetFuelStationData(i, FS_BALANCE,		0);
			SetFuelStationData(i, FS_RENT_DATE,		0);
			SetFuelStationData(i, FS_LOCK_STATUS,	false);

			CallLocalFunction("UpdateFuelStationLabel", "i", i);

			new fmt_text[256];

			new description[64];

			description = "???? ???";

			format
			(
				fmt_text, sizeof fmt_text,
				"INSERT INTO return_money \
				(uid, money, description, status)\
				VALUES ('%d', '%d', '%s', 0)",
				owner_id,
				GetFuelStationData(i, FS_PRICE) / 10,
				description
			);

			mysql_query(mysql, fmt_text, true);
		}
	}
//	return 1;
}



CMD:slet(playerid)
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	//SendClientMessageToAll(-1,"???? ???? ?????!");
	SellDebtorsHome();
    SellDebtorsFuel();
	SellDebtorsBusiness();

	return 1;
}

stock IsAIP(text[])
{
    new numbers;
    for(new i = 0; i < strlen(text); i++) if('0' <= text[i] <= '9') if(!('0' <= text[i+1] <= '9')) numbers ++;
    if(numbers >= 4) return 1;
    return 0;
}

stock AntiTimerAdminNakaz(playerid)
{
    if(use_commad_time[playerid][adm_nakaz] > gettime())
        return SendClientMessage(playerid, -1, "??????? ????? ???????????? ??? ? 60 ??????");

    use_commad_time[playerid][adm_nakaz] = gettime()+60;
    
    return false;
}

stock AntiTimerVipad(playerid)
{
    if(use_commad_time[playerid][vipad] > gettime())
        return SendClientMessage(playerid, -1, "??????? ????? ???????????? ??? ? 5 ?????");

    use_commad_time[playerid][adm_nakaz] = gettime()+300;

    return false;
}

stock AntiTimerReport(playerid)
{
    if(use_commad_time[playerid][report] > gettime())
        return SendClientMessage(playerid, -1, "??????? ????? ???????????? ??? ? ??????");

    use_commad_time[playerid][adm_nakaz] = gettime()+60;

    return false;
}

stock AntiSliv(playerid, action[])
{
    if(GetPlayerData(playerid, P_ANTISLIV) > gettime())
    {
        SendClientMessage(playerid, -1, "{FFFF00}[!]{FFFFFF} ??????, ???? ????? ???????ù ?????????????!");

      	format(sctring, sizeof(sctring), "{FFFF00}[!]{FFFFFF} %s [%d] ?????????? ?? ???? ???????? (???????? %s)", GetPlayerNameEx(playerid), playerid, action);
      	SendMessageToAdmins(sctring, 0x999999FF);
        return true;
    }
    g_player[playerid][P_ANTISLIV] = gettime() + 15;
    UpdatePlayerDatabaseInt(playerid, "antisliv", GetPlayerData(playerid, P_ANTISLIV));
    return false;
}

public: DonateQiwi(playerid, response_code, data[])
{
    if(response_code == 200)
    {
        SendClientMessage(playerid, -1, "????? ??????!");
        if(strfind(data, "success", true) != -1)
        {
            SendClientMessage(playerid, -1, "????? ???????!");

            new Cache:result;
            mysql_format(mysql, sctring, sizeof(sctring), "SELECT * FROM `payments` WHERE `user_id` = '%d' AND `status` = 1 LIMIT 1", GetPlayerAccountID(playerid));
            result = mysql_query(mysql, sctring, true);
            if(cache_num_rows())
            {

                new sum,id_pay;
                id_pay = cache_get_field_content_int(0, "id");
                sum = cache_get_field_content_int(0, "sum");

                mysql_format(mysql, sctring, sizeof(sctring), "UPDATE `payments` SET `status` = 2 WHERE `id` = '%d'", id_pay);
                mysql_query(mysql, sctring, false);

                format(sctring, sizeof(sctring), "{0099CC}??? ?????? ??????? ???????? ?? {FFD700}%i ??????! (QIWI)", sum);
                SendClientMessage(playerid, -1, sctring);

                if(Config[sDonPower] != 1)
                {
                    format(sctring, sizeof(sctring), "{0099CC}? ?????? ????? (X%d) ?? ??????? ????????? {FFD700}%i ??????!",Config[sDonPower], sum*Config[sDonPower]);
                    SendClientMessage(playerid, -1, sctring);
                }
                GivePlayerDonateRub(playerid, sum*Config[sDonPower], "????? QIWI");
                cache_delete(result);
                return 1;
            }
        }
    }
    else
    {
    	format(sctring, sizeof(sctring), "?????????ù ?? QIWI ?? ???????: (code: %d)", response_code);
        SendClientMessage(playerid, 0x999999FF, sctring);
    }
    return 1;
}


stock PlayerTotalOnline(playerid, count)
{
	if(GetPlayerPremium(playerid) == 0)
	{
		if(GetPlayerData(playerid, P_TOTALHOUR) < count)
			return 0;
		else
			return 1;
	}
	return 1;
}

stock ShowVehicleImproveDialog(playerid = INVALID_PLAYER_ID, vehicle_type = 1) // VEHICLE_TYPE_OWNABLE_CAR)
{
	if(playerid == INVALID_PLAYER_ID)
	    return 0;

	if(!vehicle_type)
	    return 0;

	new vehicleid = GetPlayerOwnableCar(playerid);

	if(vehicleid == INVALID_VEHICLE_ID)
	    return 0;

	new index = GetVehicleData(vehicleid, V_ACTION_ID);

	new pt_engine = GetOwnableCarData(index, OC_PT_ENGINE),
	    pt_brake = GetOwnableCarData(index, OC_PT_BRAKE),
	    pt_stability = GetOwnableCarData(index, OC_PT_STABILITY);

	new fmt_text[128];

	format
	(
	    fmt_text,
	    sizeof fmt_text,
		"{FFFFFF}1. ????????ù ????????ù [%d/5]\n"\
	    "2. ????????ù ????????? ??????? [%d/5]\n"\
	    "3. ????????ù ???????????? [%d/5]",
	    pt_engine, pt_brake, pt_stability
	);

	Dialog(playerid, DIALOG_OWNABLE_CAR_PT, DIALOG_STYLE_LIST, "Performance Tuning", fmt_text, "???????", "??????");

	return 1;
}

stock ShowPerformanceItem(playerid, item_type = PT_ITEM_TYPE_NONE)
{
	if(item_type == PT_ITEM_TYPE_NONE)
		return 0;

    new vehicleid = GetPlayerOwnableCar(playerid);

	if(vehicleid == INVALID_VEHICLE_ID)
	    return 0;

	new index = GetVehicleData(vehicleid, V_ACTION_ID);

	new pt_engine = GetOwnableCarData(index, OC_PT_ENGINE),
	    pt_brake = GetOwnableCarData(index, OC_PT_BRAKE),
	    pt_stability = GetOwnableCarData(index, OC_PT_STABILITY);

	new fmt_text[128],
		fmt_dialog[128 * 5];

	for(new idx; idx < 5; idx ++)
	{
	    // if(GetOwnableCarData(index, OC_PT_ENGINE) > idx)

        format(fmt_text, sizeof fmt_text, "{FFFFFF}%d. ", idx + 1);

		new price,
		    item_level;

		switch(item_type)
		{
			case PT_ITEM_TYPE_ENGINE:
			{
				strcat(fmt_text, engine_ptune[idx]);

				price = engine_ptune_price[idx];
				item_level = pt_engine;
			}
			case PT_ITEM_TYPE_BRAKE:
			{
			    strcat(fmt_text, brake_ptune[idx]);

			    price = brake_ptune_price[idx];
			    item_level = pt_brake;
			}
			case PT_ITEM_TYPE_STABILITY:
			{
			    strcat(fmt_text, stability_ptune[idx]);

			    price = stability_ptune_price[idx];
			    item_level = pt_stability;
			}

			default:
			    return 0;
		}

		if(item_level > idx)
			format(fmt_text, sizeof fmt_text, "%s {FFCD00}[???????????]", fmt_text);

		else
		    format(fmt_text, sizeof fmt_text, "%s {66CC33}[$%d]", fmt_text, price);

		if(idx > 2)
		    strcat(fmt_text, " {EC174F}[VIP Gold]\n");

		else
		    strcat(fmt_text, "\n");

		strcat(fmt_dialog, fmt_text);
	}

	new dialog_title[3][23] = {"????????ù ????????ù", "????????ù ????????", "????????ù ????????????"};

	Dialog(playerid, DIALOG_OWNABLE_CAR_PT_ITEM, DIALOG_STYLE_LIST, dialog_title[item_type - 1], fmt_dialog, "???????", "??????");

	SetPVarInt(playerid, "pt_item_type", item_type);

	return 1;
}

stock ShowPlayerBuyHelper(playerid)
{
    new price = Config[helper_price];


    if(GetPlayerDonateRub(playerid) > price)
	{
        GivePlayerDonateRub(playerid, -price, "??????? support-????");

		SetPlayerData(playerid, P_HELPER, 1);
		UpdatePlayerDatabaseInt(playerid, "helper", 1);

        SendClientMessage(playerid, -1, "??????????? /shelp, ????? ?????? ? ????? ??????????ù?");
	}
	else
	    return SendClientMessage(playerid, -1, "? ??? ???????????? ??????, ????????? ?? ????? ?? ????? {FFCD00}"SERVER_SITE" -> ?????");

	return 1;

}

CMD:fixcar(playerid)
{
	if(GetPlayerAdminEx(playerid) < 1) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
	
	new vehicleid = GetPlayerVehicleID(playerid);

    if(vehicleid == 0)
    {
            SendClientMessage(playerid, -1, ""USC"?? ?????? ?????? ? ??????????");
            return 0;
    }

    // ?????????? ??????? ????? ??????? ??????? ? ???? ????????
    new Float:x, Float:y, Float:z;
    new Float:angle;

    // ???????? ??????? ? ???? ????????
    GetVehiclePos(vehicleid, x, y, z);
    GetVehicleZAngle(vehicleid, angle);

    // ????????????? ??????? ? ???? ????????
    SetVehiclePos(vehicleid, x, y, z + 1.5);
    SetVehicleZAngle(vehicleid, angle);

    SendClientMessage(playerid, -1, ""SC"?? ??????? ????????? ????????? ?? ?????? ? ???????? ???");
        
	RepairVehicle(vehicleid);
	SetVehicleHealth(vehicleid,1000);
	
	return 1;
}



CMD:setplayerhouse(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new to_player, health; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /setplayerhouse [id ??????] [id house]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	else if(!(-1 <= health <= 1000)) return SendClientMessage(playerid, 0xCECECEFF, "????? ???? ?? -1 ?? 1000 ( -1 ???????? )");

	SetPlayerData(to_player, P_HOUSE, health);
	SetPlayerData(playerid, P_HOUSE_ROOM, -1);
	SetPlayerData(playerid, P_HOUSE_TYPE, HOUSE_TYPE_HOME);
	if(health == -1)
	{
	    SetPlayerData(to_player, P_HOUSE, -1);
		SetPlayerData(playerid, P_HOUSE_ROOM, -1);
		SetPlayerData(playerid, P_HOUSE_TYPE, HOUSE_TYPE_NONE);
	}

	new fmt_msg[105];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ??????? ??? ????? ????", GetPlayerNameEx(playerid));
	SendClientMessage(to_player, -1, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "?? ???????? ?????? %s ????? ???? ?? %d", GetPlayerNameEx(to_player),health);
	SendClientMessage(playerid, -1, fmt_msg);
	new query[90];

	format(query, sizeof query, "UPDATE accounts SET house_type=%d,house=%d, WHERE id=%d LIMIT 1", HOUSE_TYPE_HOME, health, GetPlayerAccountID(playerid));
	mysql_query(mysql, query, false);

	if(GetPlayerAdminEx(playerid) <= 5)
	{
		format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ??????? ????? ???? %s[%d] ?? %d", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, health);
		SendMessageToAdmins(fmt_msg, 0xCECECEFF);
	}

	format(fmt_msg, sizeof fmt_msg, "????????? %s[acc:%d] ????? ???? %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), health);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}
CMD:setplayerbiz(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new to_player, health; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /setplayerbiz [id ??????] [id biz]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	else if(!(-1 <= health <= 1000)) return SendClientMessage(playerid, 0xCECECEFF, "????? biz ?? -1 ?? 1000 ( -1 ???????? )");

	SetPlayerData(to_player, P_BUSINESS, health);


	new fmt_msg[105];
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ??????? ??? ????? biz", GetPlayerNameEx(playerid));
	SendClientMessage(to_player, -1, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "?? ???????? ?????? %s ????? biz", GetPlayerNameEx(to_player));
	SendClientMessage(playerid, -1, fmt_msg);
	new query[90];
	mysql_format(mysql, query, sizeof query, "UPDATE accounts SET business=%d WHERE id=%d LIMIT 1", health, GetPlayerAccountID(playerid));
	mysql_query(mysql, query, false);

	if(GetPlayerAdminEx(playerid) <= 5)
	{
		format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ??????? ????? biz %s[%d] ?? %d", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, health);
		SendMessageToAdmins(fmt_msg, 0xCECECEFF);
	}

	format(fmt_msg, sizeof fmt_msg, "????????? %s[acc:%d] ????? biz %d", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), health);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

	return 1;
}

stock ShowFamilyWarehouseMenu(playerid)
{
	new fmt_text[700],
		fam_id = GetPlayerData(playerid, P_FAMILY);

 	format(fmt_text, sizeof fmt_text,
	""c_server"[1] "c_b"???????? ?????? | "c_m"%d$"c_b"\n\
	"c_server"[2] "c_b"???????? ????????? | "c_i"%d ??."c_b"\n\
	"c_server"[3] "c_b"???????? ????????? | "c_i"%d ??."c_b"\n\
	"c_server"[4] "c_b"???????? ??????? | "c_i"%d ??."c_b"\n\
	"c_server"[5] "c_b"??ù?? ?????? | "c_m"%d$"c_b" | ???? ???????: "c_i"%d+\n\
	"c_server"[6] "c_b"??ù?? ????????? | "c_i"%d ??."c_b" | ???? ???????: "c_i"%d+\n\
	"c_server"[7] "c_b"??ù?? ????????? | "c_i"%d ??."c_b" | ???? ???????: "c_i"%d+\n\
	"c_server"[8] "c_b"??ù?? ??????? | "c_i"%d ??."c_b" | ???? ???????: "c_i"%d+",
	GetPlayerData(playerid, P_MONEY),
	GetPlayerData(playerid, P_DRUGS),
	GetPlayerData(playerid, P_METALL),
	GetPlayerData(playerid, P_AMMO),
	GetFamilyData(fam_id, F_MONEY),
	GetFamilyData(fam_id, F_TAKE_MONEY),
	GetFamilyData(fam_id, F_DRUGS),
	GetFamilyData(fam_id, F_TAKE_DRUGS),
	GetFamilyData(fam_id, F_METAL),
	GetFamilyData(fam_id, F_TAKE_METALL),
	GetFamilyData(fam_id, F_AMMO),
	GetFamilyData(fam_id, F_TAKE_AMMO));

	Dialog(playerid, DIALOG_FAMILY_WAREHOUSE, DIALOG_STYLE_LIST, "????? ?????", fmt_text, "?????", "???????");
}

CMD:fvig(playerid, params[])
{
	if(!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
	if(!(9 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /fvig [id ??????] [???????]");


	extract params -> new to_player, string:reason[32];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!(1 <= strlen(reason) <= 32))
		return SendClientMessage(playerid, 0xCECECEFF, "??????? ??????? ????????");

	if(GetPlayerTeamEx(to_player) != GetPlayerTeamEx(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ???????????");

	if(GetPlayerJob(to_player) >= GetPlayerJob(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?????ù ?????? ???????. ???????????/?????? ???????????");
		
		
    AddPlayerData(to_player, P_OWARN, +, 1);

	new fmt_msg[128];

    format(fmt_msg, sizeof fmt_msg, "[ORG]: "c_b"%s[%d] ????? ?????????????? ?????? %s [%d/3]. ???????: %s",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), GetPlayerData(to_player, P_OWARN), reason);

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

	new uid = GetPlayerAccountID(to_player);
	new warns = GetPlayerData(to_player, P_OWARN);

	if(warns >= 3)
	{
		EndWorkDayUval(to_player);
		SendClientMessage(to_player, 0xFF5533FF, "?? ???? ????????? ?? ???????????. ???????: 3/3 ????????.");

		format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET owarn=0,team=0,job=0 WHERE id=%d", uid);
		mysql_query(mysql, fmt_msg, false);
		
		SetPlayerData(to_player, P_OWARN, 0);
		SetPlayerData(to_player, P_TEAM, 0);
		SetPlayerData(to_player, P_JOB, 0);
	}

	format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET owarn=%d WHERE id=%d", warns, uid);
	mysql_query(mysql, fmt_msg, false);


	return 1;
}

CMD:funvig(playerid, params[])
{
	if(!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
	if(!(9 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /funvig [id ??????]");


	extract params -> new to_player;

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
		
    if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??ù?? ???? ? ?????? ???ù");


	if(GetPlayerTeamEx(to_player) != GetPlayerTeamEx(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ???????????");


    AddPlayerData(to_player, P_OWARN, -, 1);

	new fmt_msg[128];

    format(fmt_msg, sizeof fmt_msg, "[ORG]: "c_b"%s[%d] ??ù? ?????????????? ?????? %s [%d/3].",GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), GetPlayerData(to_player, P_OWARN));

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);

	new uid = GetPlayerAccountID(to_player);
	new warns = GetPlayerData(to_player, P_OWARN);

	format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET owarn=%d WHERE id=%d", warns, uid);
	mysql_query(mysql, fmt_msg, false);


	return 1;
}


CMD:fwarn(playerid, params[])
{
    new fam_id = fam_id = GetPlayerData(playerid, P_FAMILY),
	    rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_RANG_WARN);

    if(!GetPlayerData(playerid, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");

	if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ???????? ???????? ??????????????.");


	if(GetPlayerAdminEx(playerid) < 2) return 1;
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /fwarn [id ??????] [??????? (????ù????????)]");

	extract params -> new to_player, string:reason[66];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

    if(GetPlayerData(to_player, P_FAMILY) != GetPlayerData(playerid, P_FAMILY))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ?????");

	if(GetPlayerData(to_player, P_FAMILY_RANK) >= GetPlayerData(playerid, P_FAMILY_RANK))
		return SendClientMessage(playerid, 0xCECECEFF, "?????ù ?????? ??? ???????????/?????? ?????");

	//if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ?????? ?????????????? ?????? ????");

	AddPlayerData(to_player, P_FWARN, +, 1);

	new fmt_msg[128];

    format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ????? ?????????????? ?????? %s [%d|3]. ???????: %s", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), GetPlayerData(to_player, P_FWARN), reason);

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, 0x6699CCFF, fmt_msg);
	}

	new uid = GetPlayerAccountID(to_player);
	new warns = GetPlayerData(to_player, P_FWARN);

	if(warns >= 3)
	{
		SendClientMessage(to_player, 0xFF5533FF, "?? ???? ????????? ?? ?????. ???????: 3 ?????.");

		format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET fwarn=0,family=0,family_rank=1 WHERE id=%d", uid);
		mysql_query(mysql, fmt_msg, false);
		
		SetPlayerData(to_player, P_FWARN, 0);
		SetPlayerData(to_player, P_FAMILY, 0);
	}

	format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET fwarn=%d WHERE id=%d", warns, uid);
	mysql_query(mysql, fmt_msg, false);

	return 1;
}

CMD:funwarn(playerid, params[])
{
    new fam_id = fam_id = GetPlayerData(playerid, P_FAMILY),
	    rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_RANG_UNWARN);

    if(!GetPlayerData(playerid, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");

	if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ??????? ???????? ??????????????.");


	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /warn [id ??????] [??????? (????ù????????)]");

	extract params -> new to_player, string: reason[66];
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(GetPlayerData(to_player, P_FAMILY) != GetPlayerData(playerid, P_FAMILY))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ?????");

    if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??ù?? ???? ? ?????? ???ù");

	SetPlayerData(to_player, P_FWARN, 		0);
	UpdatePlayerDatabaseInt(to_player, "fwarn", 		0);

	new fmt_msg[128];

    format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ??ù? ??? ?????????????ù ? ?????? %s. ???????: %s", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), reason);

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, 0x6699CCFF, fmt_msg);
	}

	return 1;
}

CMD:fmute(playerid, params[])
{
	new fam_id = fam_id = GetPlayerData(playerid, P_FAMILY),
	    rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_RANG_MUTE);

    if(!GetPlayerData(playerid, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");

	if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ???????? ??? ????????? ????.");


	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /fmute [id ??????] [????ù ? ???????] [??????? (????ù????????)]");

	extract params -> new to_player, mute_time, string: reason[30];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

    if(GetPlayerData(to_player, P_FAMILY) != GetPlayerData(playerid, P_FAMILY))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ?????");

	if(GetPlayerData(to_player, P_FAMILY_RANK) >= GetPlayerData(playerid, P_FAMILY_RANK))
		return SendClientMessage(playerid, 0xCECECEFF, "?????ù ?????? ??? ???????????/?????? ?????");

	if(!(1 <= mute_time <= 360)) return SendClientMessage(playerid, 0xCECECEFF, "????ù ?????? ???? ?? ?????? 1 ? ?? ?????? 360 ?????");
	if(GetPlayerData(to_player, P_FMUTE) > 0) return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ???? ???");
//	if(GetPlayerAdminEx(to_player) > GetPlayerAdminEx(playerid)) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ????????? ??????? ?????????????? ???? ?? ?????");
	//else if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ????????? ??????? ?????? ????");

	new fmt_msg[150];

	format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ???????? ??????? ?????? %s ?? %d ?????. ???????: %s", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), mute_time, reason);

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, 0x6699CCFF, fmt_msg);
	}

	SetPlayerData(to_player, P_FMUTE, mute_time * 60);
	UpdatePlayerDatabaseInt(to_player, "fmute", mute_time * 60);

	SendClientMessage(to_player, 0xCECECEFF, "????ù ?? ????????ù ???? ???? ????????? ????: {CCCC00}/time");

	return 1;
}

CMD:funmute(playerid, params[])
{
    new fam_id = fam_id = GetPlayerData(playerid, P_FAMILY),
        rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_RANG_UNMUTE);

    if(!GetPlayerData(playerid, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");

	if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ??????? ??? ????????? ????.");


	extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /funmute [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

    if(GetPlayerData(to_player, P_FAMILY) != GetPlayerData(playerid, P_FAMILY))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ?????");

    if(to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??ù?? ??????? ? ?????? ???ù");

	else if(GetPlayerData(to_player, P_FMUTE) <= 0) return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ????");

	new fmt_msg[100];

	format(fmt_msg, sizeof fmt_msg, "{%06x}[F] %s %s[%d] ??ù? ??????? ? ?????? %s", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id, rang_id), GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player));

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, 0x6699CCFF, fmt_msg);
	}

	SetPlayerData(to_player, P_FMUTE, 0);
	UpdatePlayerDatabaseInt(to_player, "fmute", 0);

	SendClientMessage(to_player, 0x32a44bFF, "?????? ? ??? ????????????");

	return 1;
}

CMD:finvite(playerid, params[])
{
    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_RANG_INV);

	if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ?????????? ????? ? ?????.");

	if(!GetPlayerData(playerid, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");
//	if(!(9 <= GetPlayerData(playerid, P_FAMILY_RANK) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ?????????? ????? ? ??? ??????????ù?");
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /finvite [id ??????]");

	extract params -> new to_player;
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
	if(GetPlayerData(to_player, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ??? ??????? ? ?????");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 10.0)) return SendClientMessage(playerid, 0xCECECEFF, "????? ????????ù ??????? ??????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_FINVITE);
	return 1;
}

CMD:funinvite(playerid, params[])
{
    new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_RANG_UNINV);

	if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ??????ù?? ????? ? ?????.");

	if(!GetPlayerData(playerid, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");
//	if(!(9 <= GetPlayerData(playerid, P_FAMILY_RANK) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ?????????? ????? ? ??? ??????????ù?");
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /funinvite [id ??????] [???????]");

	extract params -> new to_player, string:reason[32];

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!(1 <= strlen(reason) <= 32))
		return SendClientMessage(playerid, 0xCECECEFF, "??????? ??????? ?????????ù");

	if(GetPlayerData(to_player, P_FAMILY) != GetPlayerData(playerid, P_FAMILY))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ?????");

	if(GetPlayerData(to_player, P_FAMILY_RANK) >= GetPlayerData(playerid, P_FAMILY_RANK))
		return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??????? ??????? ??????????ù/?????? ???????????");

	FUnInvite(playerid, to_player, reason);

	return 1;
}

CMD:frang(playerid, params[])
{
	if(!GetPlayerData(playerid, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");

	new rank = GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_RANG_GIVER);

	if(GetPlayerData(playerid, P_FAMILY_RANK) < rank) return Send(playerid, COR_RED, "[??????]: "c_b" ? ??? ?? ?????????? ?????? ???? ? ?????, ????? ?????ù?? ????? ? ?????.");

	//if(!(9 <= GetPlayerData(playerid, P_FAMILY_RANK) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ?????????? ????? ? ??? ??????????ù?");
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /frang [id ??????] [????]");
	extract params -> new to_player, give_rang;
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid) return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");
	if(GetPlayerData(to_player, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ?????");
	if(GetPlayerData(to_player, P_FAMILY_RANK) >= GetPlayerData(playerid, P_FAMILY_RANK)) return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??????? ??????? ??????????ù/?????? ???????????");
	if(1 < give_rang > 9) return SendClientMessage(playerid, 0xCECECEFF, "???? ?? 1 ?? 9");

	new fmt_msg[512];

	SetPlayerData(to_player, P_FAMILY_RANK, give_rang);
	format(fmt_msg, sizeof fmt_msg, "??? ???? ? ????? ??? ??????? ?? %d (%s)", GetPlayerData(to_player, P_FAMILY_RANK), GetFamilyRang(GetPlayerData(to_player, P_FAMILY), GetPlayerData(to_player, P_FAMILY_RANK)));
	SendClientMessage(to_player, 0x1E90FFFF, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "?? ???????? ???? %s[%d] ?? %d (%s)",  GetPlayerNameEx(to_player), to_player, GetPlayerData(to_player, P_FAMILY_RANK), GetFamilyRang(GetPlayerData(to_player, P_FAMILY), GetPlayerData(to_player, P_FAMILY_RANK)));
	SendClientMessage(playerid, 0x1E90FFFF, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "UPDATE accounts SET family_rank=%d WHERE id=%d", GetPlayerData(to_player, P_FAMILY_RANK), GetPlayerAccountID(to_player));
	mysql_query(mysql, fmt_msg, false);

	return 1;
}
CMD:sellmyskin(playerid, params[])
{
	new skinid = GetPlayerData(playerid, P_SKIN);
	if(skinid == 252) return false;
	if(GetPlayerSkin(playerid) == 252) return SendClientMessage(playerid, -1, "{FFFF00}[?????????ù]{FFFFFF} ?? ?? ?????? ??????? ????!");
	if(!strlen(params))
	return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sellmyskin [id ??????] [?????????]");

	extract params -> new to_player, price;
	if(price == 0) return false;
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

   	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0))
		return SendClientMessage(playerid, 0xCECECEFF, "????? ????????ù ?????? ?? ???");

	if(GetPlayerMoneyEx(to_player) < price)
		return SendClientMessage(playerid, 0xCECECEFF, "? ????? ?????? ??? ????? ?????");

	SendPlayerOffer(playerid, to_player, OFFER_TYPE_SELL_SKIN, skinid, price);
	return 1;
}

CMD:f(playerid, params[])
{
	if(GetPlayerData(playerid, P_FAMILY) == 0) return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ? ?????");
	if(IsPlayerFMuted(playerid) > 0) return Send(playerid, -1, "? ??? ??? ????????? ????");
	if(IsPlayerMuted(playerid) > 0) return SendClientMessage(playerid, 0xCECECEFF, "?????? ? ??? ????????????. ????ù ?? ?????????????: {66CC33}/time");
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /f [?????]");

	new fmt_msg[144],
		fam_id = GetPlayerData(playerid, P_FAMILY),
		rang_id = GetPlayerData(playerid, P_FAMILY_RANK) + 1;

	format(fmt_msg, sizeof fmt_msg, "{%06x}[%s] %s %s[%d]: %s", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyData(fam_id, F_NAME), GetFamilyRang(fam_id + 1, rang_id), GetPlayerNameEx(playerid), playerid, params);

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, 0x6699CCFF, fmt_msg);
	}
	return 1;
}
alias:f("fam")

CMD:fn(playerid, params[])
{
	if(GetPlayerData(playerid, P_FAMILY) == 0) return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ? ?????");
	if(IsPlayerMuted(playerid) > 0) return SendClientMessage(playerid, 0xCECECEFF, "?????? ? ??? ????????????. ????ù ?? ?????????????: {66CC33}/time");
	if(IsPlayerFMuted(playerid) > 0) return Send(playerid, -1, "? ??? ??? ????????? ????");
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /fn [?????]");

	new fmt_msg[144],
		fam_id = GetPlayerData(playerid, P_FAMILY) + 1,
		rang_id = GetPlayerData(playerid, P_FAMILY_RANK);

	format(fmt_msg, sizeof fmt_msg, "(( {%06x}OOC: [F] %s %s[%d]: %s ))", family_colors[GetFamilyData(GetPlayerData(playerid, P_FAMILY), F_COLOR)] >>> 8, GetFamilyRang(fam_id + 1, rang_id), GetPlayerNameEx(playerid), playerid, params);

	for(new i; i < MAX_PLAYERS; i ++)
	{
		if(!IsPlayerConnected(i)) continue;
		if(!IsPlayerLogged(i)) continue;
		if(GetPlayerData(i, P_FAMILY) == 0) continue;
		if(GetPlayerData(i, P_ADVISOR_BLOCK_CHAT)) continue;

		if(GetPlayerData(i, P_FAMILY) != GetPlayerData(playerid, P_FAMILY)) continue;

		SendClientMessage(i, 0x6699CCFF, fmt_msg);
	}
	return 1;
}

stock ShowChangeNameDialog(playerid)
{
	if(GetPlayerData(playerid, P_DONATE_RUB) < 100) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ???????????? ??????, ????????ù 100");

	Dialog
	(
		playerid, DIALOG_FAMILY_NCHANGE, DIALOG_STYLE_INPUT,
		"????? ???????ù ?????",
		"{FFFFFF}??????? ????????, ??????? ?? ?????? {ffff00}??????????:",
		"?????", "??????"
	);

	return 1;
}

stock ShowFamilyRangSetMenu(playerid)
{
	new fmt_text[800],
		fam_id = GetPlayerData(playerid, P_FAMILY);

 	format(fmt_text, sizeof fmt_text,
	""c_server"[1] "c_b"??????? /finvite | ???? ???????: "c_i"%d+\n\
	"c_server"[2] "c_b"??????? /funinvite | ???? ???????: "c_i"%d+\n\
	"c_server"[3] "c_b"??????? /fmute | ???? ???????: "c_i"%d+\n\
	"c_server"[4] "c_b"??????? /funmute | ???? ???????: "c_i"%d+\n\
	"c_server"[5] "c_b"??????? /fwarn | ???? ???????: "c_i"%d+\n\
	"c_server"[6] "c_b"??????? /funwarn | ???? ???????: "c_i"%d+\n\
	"c_server"[7] "c_b"??????? /frang | ???? ???????: "c_i"%d+\n\
	"c_server"[8] "c_b"??ù??? ????? ?? ?????? | ???? ???????: "c_i"%d+\n\
	"c_server"[9] "c_b"??ù??? ?????????? ?? ?????? | ???? ???????: "c_i"%d+\n\
	"c_server"[10] "c_b"??ù??? ?????????? ?? ?????? | ???? ???????: "c_i"%d+\n\
	"c_server"[11] "c_b"??ù??? ???????? ?? ?????? | ???? ???????: "c_i"%d+",
	GetFamilyData(fam_id, F_RANG_INV),
	GetFamilyData(fam_id, F_RANG_UNINV),
	GetFamilyData(fam_id, F_RANG_MUTE),
	GetFamilyData(fam_id, F_RANG_UNMUTE),
	GetFamilyData(fam_id, F_RANG_WARN),
	GetFamilyData(fam_id, F_RANG_UNWARN),
	GetFamilyData(fam_id, F_RANG_GIVER),
	GetFamilyData(fam_id, F_TAKE_MONEY),
	GetFamilyData(fam_id, F_TAKE_DRUGS),
	GetFamilyData(fam_id, F_TAKE_METALL),
	GetFamilyData(fam_id, F_TAKE_AMMO));

	Dialog(playerid, DIALOG_FAMILY_SETRANG_MENU, DIALOG_STYLE_LIST, "????????? ???????", fmt_text, "?????", "???????");
}

stock ShowFamilyHelpCommands(playerid)
{
	new fmt_text[800],
		fam_id = GetPlayerData(playerid, P_FAMILY);

 	format(fmt_text, sizeof fmt_text,
	""c_server"/finvite "c_b"- ????ù?? ?????? ? ????? "c_i"| "c_b"???? ???????: "c_server"%d+\n\
	"c_server"/funinvite "c_b"- ??????? ?????? ? ????? "c_i"| "c_b"???? ???????: "c_server"%d+\n\
    "c_server"/fmute "c_b"- ?????? ??? ????????? ???? "c_i"| "c_b"???? ???????: "c_server"%d+\n\
    "c_server"/funmute "c_b"- ??ù?? ??? ????????? ???? "c_i"| "c_b"???? ???????: "c_server"%d+\n\
    "c_server"/fwarn "c_b"- ?????? ???????? ?????????????? "c_i"| "c_b"???? ???????: "c_server"%d+\n\
    "c_server"/funwarn "c_b"- ??ù?? ???????? ?????????????? "c_i"| "c_b"???? ???????: "c_server"%d+\n\
	"c_server"/frang "c_b"- ??????? ?????? ???? ? ????? "c_i"| "c_b"???? ???????: "c_server"%d+\n\
	"c_server"/f "c_b"- ??? ?????\n\
	"c_server"/fn "c_b"- NonRP ??? ?????\n\
	"c_server"/fpark "c_b"- ???????????? ???????? ?????????\n\
	"c_server"/sellfcar "c_b"- ??????? ???????? ?????????",
	GetFamilyData(fam_id, F_RANG_INV),
	GetFamilyData(fam_id, F_RANG_UNINV),
	GetFamilyData(fam_id, F_RANG_MUTE),
	GetFamilyData(fam_id, F_RANG_UNMUTE),
	GetFamilyData(fam_id, F_RANG_WARN),
	GetFamilyData(fam_id, F_RANG_UNWARN),
	GetFamilyData(fam_id, F_RANG_GIVER));

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????? ?????", fmt_text, "???????", "");

}

CMD:setfcolor(playerid)
{

    Dialog
    (
        playerid, DIALOG_COLOR_FAMILY_SET, DIALOG_STYLE_MSGBOX,
        "????? ????? ?????","????????? ????? ????? ????? ???????ù??: "c_m"20 ?????-??????\n\
		\n\
		"c_b"?? ??????? ??? ?????? ??????? ???? ??????",
		"?????", "?????");
}

stock ShowFamilyColorSet(playerid)
{
    if(GetPlayerData(playerid, P_FAMILY_RANK) != 10) return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ???????");

    Dialog
    (
        playerid, DIALOG_FAMILY_COLOR, DIALOG_STYLE_LIST,
        "????? ????? ?????",
		""c_server"[1] "f_2"????????\n\
		"c_server"[2] "f_3"???????\n\
		"c_server"[3] "f_4"ù????-???????\n\
		"c_server"[4] "f_5"??????-???????\n\
		"c_server"[5] "f_6"???? ????\n\
		"c_server"[6] "f_7"??????\n\
		"c_server"[7] "f_8"???????\n\
		"c_server"[8] "f_9"??????????\n\
		"c_server"[9] "f_10"ù????-??????????\n\
		"c_server"[10] "f_11"?????\n\
		"c_server"[11] "f_12"???????????\n\
		"c_server"[12] "f_13"????\n\
		"c_server"[13] "f_14"???????\n\
		"c_server"[14] "f_15"??????\n\
		"c_server"[15] "f_16"?????\n\
		"c_server"[16] "f_17"???? ????",
        "?????", "?????"
    );

    return 1;

}

CMD:addpadik(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	new fmt_text[300];


	new Cache: result,
		idx = g_entrance_loaded;

	GetPlayerPos(playerid, g_entrance[idx][E_POS_X], g_entrance[idx][E_POS_Y], g_entrance[idx][E_POS_Z]);

	SetEntranceData(idx, E_FLOORS,			2);

	//SetEntranceData(idx, _ENTRACE,		-1);

	format
	(
		fmt_text, sizeof fmt_text,
		"INSERT INTO entrances \
		(floors, x, y, z)\
		VALUES ('%d', '%f', '%f', '%f')",
		GetEntranceData(idx, E_FLOORS),
		GetEntranceData(idx, E_POS_X),
		GetEntranceData(idx, E_POS_Y),
		GetEntranceData(idx, E_POS_Z)
	);

	result = mysql_query(mysql, fmt_text, true);

	SetEntranceData(idx, E_SQL_ID, 		cache_insert_id());

	cache_delete(result);

	g_entrance_loaded ++;
	
	new e_houses = 0;

	UpdateEntrance(idx, e_houses);

	new city[MAX_ZONES_NAME + 1], area[MAX_ZONES_NAME + 1];
	GetCityName(GetEntranceData(idx, E_POS_X), GetEntranceData(idx, E_POS_Y), city);
	GetAreaName(GetEntranceData(idx, E_POS_X), GetEntranceData(idx, E_POS_Y), area);
	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ?????? ??????? ?%d (%s / %s)", GetPlayerNameEx(playerid), playerid, idx, city, area);

	SendMessageToAdmins(fmt_text, 0x66CC33FF);

	SendClientMessage(playerid, 0x3399FFFF, "??????????? {FFFF00}/esetexitpos {3399FF}- ????? ?????????? ?????????? ?????? ");

	return 1;
}

CMD:esetexitpos(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return 1;

	extract params -> new house_id; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /esetexitpos [id ????????]");

	if(!(0 <= house_id <= g_entrance_loaded - 1)) return SendClientMessage(playerid, 0x999999FF, "??????? ???????? ?? ?????????? ?? ???????");

	GetPlayerPos(playerid, g_entrance[house_id][E_EXIT_POS_X], g_entrance[house_id][E_EXIT_POS_Y], g_entrance[house_id][E_EXIT_POS_Z]);
	GetPlayerFacingAngle(playerid, g_entrance[house_id][E_EXIT_ANGLE]);

	new fmt_text[144];

	format
	(
		fmt_text, sizeof fmt_text,
		"UPDATE entrances SET exit_x='%f', exit_y='%f', exit_z='%f', exit_angle='%f' WHERE id=%d",
		GetEntranceData(house_id, E_EXIT_POS_X),
		GetEntranceData(house_id, E_EXIT_POS_Y),
		GetEntranceData(house_id, E_EXIT_POS_Z),
		GetEntranceData(house_id, E_EXIT_ANGLE),
		GetEntranceData(house_id, E_SQL_ID)
	);

	mysql_query(mysql, fmt_text, false);

	format(fmt_text, sizeof fmt_text, "?? ??????? ???????? ?????????? ?????? ? ???????? ?%d", house_id);

	SendClientMessage(playerid, 0x66CC33FF, fmt_text);

	return 1;
}

public: LoadFamilyCars()
{
    new rows, vehicleid;
    new Cache: result;

    result = mysql_query(mysql, "SELECT * FROM `family_cars` WHERE 1", true);
    rows = cache_num_rows();

    for(new idx; idx < rows; idx ++)
    {
        SetFamilyCarData(idx, F_SQL_ID,       cache_get_field_content_int(idx, "id"));

        new idm = GetFamilyData(idx, F_SQL_ID);

        SetFamilyCarData(idm, F_OWNER_ID,     cache_get_field_content_int(idx, "owner_id"));

        SetFamilyCarData(idm, F_MODEL_ID,     cache_get_field_content_int(idx, "model_id"));
        SetFamilyCarData(idm, F_COLOR_1,      cache_get_field_content_int(idx, "color_1"));
        SetFamilyCarData(idm, F_COLOR_2,      cache_get_field_content_int(idx, "color_2"));
        SetFamilyCarData(idm, F_RANG,         cache_get_field_content_int(idx, "rang"));

        SetFamilyCarData(idm, F_POS_X,        cache_get_field_content_float(idx, "pos_x"));
        SetFamilyCarData(idm, F_POS_Y,        cache_get_field_content_float(idx, "pos_y"));
        SetFamilyCarData(idm, F_POS_Z,        cache_get_field_content_float(idx, "pos_z"));
        SetFamilyCarData(idm, F_ANGLE,        cache_get_field_content_float(idx, "angle"));

        SetFamilyCarData(idm, OC_FUEL,        cache_get_field_content_float(idx, "fuel"));

        // ----------------------------------------------------------------------------------------
        vehicleid = CreateVehicle
        (
            GetFamilyCarData(idm, F_MODEL_ID),
            GetFamilyCarData(idm, F_POS_X),
            GetFamilyCarData(idm, F_POS_Y),
            GetFamilyCarData(idm, F_POS_Z),
            GetFamilyCarData(idm, F_ANGLE),
            GetFamilyCarData(idm, F_COLOR_1),
            GetFamilyCarData(idm, F_COLOR_2),
            -1,
            0,
            VEHICLE_ACTION_TYPE_FAMILY_CAR,
            GetFamilyData(idx, F_SQL_ID)
        );
        printf("%d, %f %f %f %f %d %d", GetFamilyCarData(idm, F_MODEL_ID), GetFamilyCarData(idm, F_POS_X), GetFamilyCarData(idm, F_POS_Y), GetFamilyCarData(idm, F_POS_Z), GetFamilyCarData(idm, F_ANGLE), GetFamilyCarData(idm, F_COLOR_1), GetFamilyCarData(idm, F_COLOR_2));
        if(vehicleid != INVALID_VEHICLE_ID)
        {
            CreateVehicleLabel(vehicleid, GetFamilyData(GetFamilyCarData(idm, F_OWNER_ID), F_NAME), 0x6666CCEE, 0.0, 0.0, 1.3, 20.0);
            SetVehicleParam(vehicleid, V_LOCK, bool: cache_get_field_content_int(idm, "status"));

            SetVehicleData(vehicleid, V_MILEAGE, cache_get_field_content_float(idm, "mileage"));
        }
    }
    g_family_car_loaded = rows;
    cache_delete(result);

    printf("[FamilyCars]: A??? ?????????: %d", g_family_car_loaded);
}

stock GetFreeFamilyCarID()
{
    for(new idx; idx < sizeof g_ownable_car; idx ++)
    {
        if(GetOwnableCarData(idx, OC_CREATE)) continue;

        return idx;
    }

    return -1;
}

public: SaveFamilyCar(vehicleid)
{
    if(IsAFamilyCar(vehicleid))
    {
        new query[300];
        new index = GetVehicleData(vehicleid, V_ACTION_ID);

        new Float: health;

        GetVehicleHealth(vehicleid, health);

        format
        (
            query, sizeof query,
            "UPDATE family_cars SET "\
            "pos_x=%f,"\
            "pos_y=%f,"\
            "pos_z=%f,"\
            "angle=%f"\
            " WHERE id=%d LIMIT 1",
            GetFamilyCarData(index, F_POS_X),
            GetFamilyCarData(index, F_POS_Y),
            GetFamilyCarData(index, F_POS_Z),
            GetFamilyCarData(index, F_ANGLE),
            index-1
        );
        mysql_query(mysql, query, false);
        print(query);
        return mysql_errno();
    }
    return -1;
}

stock IsAFamilyCar(vehicleid)
{
    if(IsValidVehicleID(vehicleid))
    {
        if(GetVehicleData(vehicleid, V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_FAMILY_CAR)
        {
            return 1;
        }
    }
    return 0;
}

CMD:setfamilycar(playerid)
{
    if(GetPlayerData(playerid, P_FAMILY) && GetPlayerData(playerid, P_FAMILY_RANK) == 10)
    {
        ViewFamilyCar(playerid);
    }
    return 1;
}

CMD:fpark(playerid, params[])
{
	if(!IsPlayerInAnyVehicle(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ??????????");

    new vehicleid = GetPlayerVehicleID(playerid);
    new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

    if(g_family_car[action_id][F_OWNER_ID] == GetPlayerData(playerid, P_FAMILY)+1)
        return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????????? ?????");

	new query[200];
	
	new index = GetVehicleData(vehicleid, V_ACTION_ID);
	
	new idx = GetFamilyCarData(index, F_SQL_ID);

	
	//SetFamilyCarData(idx, F_RANG, input);

	new Float: veh_x,
		Float: veh_y,
		Float: veh_z,
		Float: veh_angle;

	GetVehiclePos(vehicleid, veh_x, veh_y, veh_z);
	GetVehicleZAngle(vehicleid, veh_angle);
	
	SetFamilyCarData(idx, F_POS_X, veh_x);
	SetFamilyCarData(idx, F_POS_Y, veh_y);
	SetFamilyCarData(idx, F_POS_Z, veh_z);
	SetFamilyCarData(idx, F_ANGLE, veh_angle);

    mysql_format(mysql, query, sizeof query, "UPDATE family_cars SET pos_x = '%d', pos_y = '%d', pos_z = '%d', angle = '%d' WHERE id='%d'", veh_x, veh_y, veh_z, veh_angle, GetFamilyCarData(index, F_SQL_ID));
    mysql_query(mysql, query, false);

	SaveFamilyCar(vehicleid);
	SendClientMessage(playerid, 0x66CC00FF, "ù???????? ????? ???????????");
	
	return 1;
}

CMD:fparkk(playerid, params[])
{
	if(!IsPlayerInAnyVehicle(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ??????????");

    new vehicleid = GetPlayerVehicleID(playerid);
    new action_id = GetVehicleData(vehicleid, V_ACTION_ID);

    if(g_family_car[action_id][F_OWNER_ID] == GetPlayerData(playerid, P_FAMILY)+1)
        return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ?????????ù ? ?????????? ?????");

	new green_zone_id = GetPVarInt(playerid, "player_in_green_zone") - 1;

	if(green_zone_id != -1)
	{
		if(!g_green_zones[green_zone_id][GZ_ALLOW_PARK])
		{
			new fmt_text[144];

			format(fmt_text, sizeof fmt_text, "?? ?????????? {FFFF00}'%s' {1E90FF}???????? ??????? ?????????? ?????????. ???????? ?????? ????? ??ù ????????", g_green_zones[green_zone_id][GZ_NAME]);
			SendClientMessage(playerid, 0x1E90FFFF, fmt_text);

			return 1;
		}
	}

	new index = GetVehicleData(vehicleid, V_ACTION_ID);

	GetVehiclePos(vehicleid, GetFamilyCarData(index, F_POS_X), GetFamilyCarData(index, F_POS_Y), GetFamilyCarData(index, F_POS_Z));
	GetVehicleZAngle(vehicleid, GetFamilyCarData(index, F_ANGLE));

//	SetOwnableCarData(index, OC_World, GetPlayerVirtualWorld(playerid));

//	SetOwnableCarData(index, OC_Int, GetPlayerInterior(playerid));

	SaveFamilyCar(vehicleid);
	return SendClientMessage(playerid, 0x66CC00FF, "ù???????? ????? ???????????");
}

stock ViewFamilyCar(playerid)
{
    new fmt_text[640],
            id,
            Cache: result;

    mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM family_cars WHERE owner_id='%d'", GetPlayerData(playerid, P_FAMILY));
    result = mysql_query(mysql, fmt_text, true);

    new rows = cache_num_rows();

    if(!rows)
        SendClientMessage(playerid, 0x999999FF, "? ????? ????? ??? ??????????");

    else
    {
        new query[60],
            model_id,
            rang;

        format(fmt_text, sizeof fmt_text, "");

        for(new i = 0; i < rows; i ++)
        {
            id = cache_get_field_content_int(i, "id");
            model_id = cache_get_field_content_int(i, "model_id") - 400;
            rang = cache_get_field_content_int(i, "rang");

            format(query, sizeof query, "{FFFFFF}%d. %s {888888}\t?????? ? %d ?????\n", i + 1, GetVehicleInfo(model_id, VI_NAME), rang);
            strcat(fmt_text, query);
            SetPVarInt(playerid, "sql_id", id);
            SetPlayerListitemValue(playerid, i, id);
        }

        Dialog
        (
            playerid, DIALOG_FAMILY_CAR_RANG, DIALOG_STYLE_LIST,
            "{FFCD00}ù???????? ?????",
            fmt_text,
            "???????", "???????"
        );
    }
    cache_delete(result);
    return 1;
}

public: ShowBuyCarFamilyAndOwnable(playerid)
{
	Dialog
    (
        playerid, DIALOG_AUTOSALON_CAR_BUY, DIALOG_STYLE_MSGBOX,
        "{DC143C}"SERVER_NAME"{ffffff} | ?????????",
		"{FFFFFF}????????? ??????????? ???????? - ????ù??? ??????\n ???????. ?? ????????????? ?????? ??? ???????????",
		"?????", "??????"
    );

	return 1;
}

CMD:gromov_gay(playerid, params[])
{
	new fmt_str[30];
 	new fam_id = GetPlayerData(playerid, P_FAMILY) + 1;

	format
	(
		fmt_str, sizeof fmt_str,
		"%d",
		GetFamilyData(fam_id, F_FAMILY_CARS)
	);

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "test", fmt_str, "???????", "");
	return 1;
}
//by Dergen and Tima
CMD:binder(playerid)
{
	new string_qm[(128 * 20) + 34];

	format(string_qm, sizeof string_qm,
	""c_server"[1] {FFFFFF}%s\n\
	"c_server"[2] {FFFFFF}%s\n\
	"c_server"[3] {FFFFFF}%s\n\
	"c_server"[4] {FFFFFF}%s\n\
	"c_server"[5] {FFFFFF}%s\n\
	"c_server"[6] {FFFFFF}%s\n\
	"c_server"[7] {FFFFFF}%s\n\
	"c_server"[8] {FFFFFF}%s\n\
	"c_server"[9] {FFFFFF}%s\n\
	"c_server"[10] {FFFFFF}%s\n\
	"c_server"[11] {FFFFFF}%s\n\
	"c_server"[12] {FFFFFF}%s\n\
	"c_server"[13] {FFFFFF}%s\n\
	"c_server"[14] {FFFFFF}%s\n\
	"c_server"[15] {FFFFFF}%s\n\
	"c_server"[16] {FFFFFF}%s\n\
	"c_server"[17] {FFFFFF}%s\n\
	"c_server"[18] {FFFFFF}%s\n\
	"c_server"[19] {FFFFFF}%s\n\
	"c_server"[20] {FFFFFF}%s\n \n\
	{FFBF00}????????? ??? ????????ù\n\
	{FFBF00}?????????????",
	quick_mes[playerid][0][line],
	quick_mes[playerid][1][line],
	quick_mes[playerid][2][line],
	quick_mes[playerid][3][line],
	quick_mes[playerid][4][line],//5
	quick_mes[playerid][5][line],
	quick_mes[playerid][6][line],
	quick_mes[playerid][7][line],
	quick_mes[playerid][8][line],
	quick_mes[playerid][9][line], //10
	quick_mes[playerid][10][line],
	quick_mes[playerid][11][line],
	quick_mes[playerid][12][line],
	quick_mes[playerid][13][line],
	quick_mes[playerid][14][line], //15
	quick_mes[playerid][15][line],
	quick_mes[playerid][16][line],
	quick_mes[playerid][17][line],
	quick_mes[playerid][18][line],
	quick_mes[playerid][19][line]); //20

	return Dialog(playerid, DIALOG_QM, DIALOG_STYLE_LIST, "??????", string_qm, "???????", "???????");
}

editMessage(playerid)
{
    new string_qm[(128 * 20) + 34];

    format(string_qm, sizeof string_qm,
    ""c_server"[1] {FFFFFF}%s\n\
    "c_server"[2] {FFFFFF}%s\n\
    "c_server"[3] {FFFFFF}%s\n\
    "c_server"[4] {FFFFFF}%s\n\
    "c_server"[5] {FFFFFF}%s\n\
    "c_server"[6] {FFFFFF}%s\n\
    "c_server"[7] {FFFFFF}%s\n\
    "c_server"[8] {FFFFFF}%s\n\
    "c_server"[9] {FFFFFF}%s\n\
    "c_server"[10] {FFFFFF}%s\n\
    "c_server"[11] {FFFFFF}%s\n\
    "c_server"[12] {FFFFFF}%s\n\
    "c_server"[13] {FFFFFF}%s\n\
    "c_server"[14] {FFFFFF}%s\n\
    "c_server"[15] {FFFFFF}%s\n\
    "c_server"[16] {FFFFFF}%s\n\
    "c_server"[17] {FFFFFF}%s\n\
    "c_server"[18] {FFFFFF}%s\n\
    "c_server"[19] {FFFFFF}%s\n\
    "c_server"[20] {FFFFFF}%s\n\
    {FFBF00}???????? ???",
    quick_mes[playerid][0][line],
    quick_mes[playerid][1][line],
    quick_mes[playerid][2][line],
    quick_mes[playerid][3][line],
    quick_mes[playerid][4][line],//5
    quick_mes[playerid][5][line],
    quick_mes[playerid][6][line],
    quick_mes[playerid][7][line],
    quick_mes[playerid][8][line],
    quick_mes[playerid][9][line], //10
    quick_mes[playerid][10][line],
    quick_mes[playerid][11][line],
    quick_mes[playerid][12][line],
    quick_mes[playerid][13][line],
    quick_mes[playerid][14][line], //15
    quick_mes[playerid][15][line],
    quick_mes[playerid][16][line],
    quick_mes[playerid][17][line],
    quick_mes[playerid][18][line],
    quick_mes[playerid][19][line] //20
    );

    Dialog(playerid, DIALOG_EDIT_QM, DIALOG_STYLE_LIST, "?????????????", string_qm, "???????", "?????");
    return 1;//save_QuickMessage(playerid);
}

sendQuickMessage(playerid, string_qm[]) //?????????? ??????
{
	if(strfind(string_qm, "??????? ?????", true) != -1)
		return 1; //???? ???? ?? ?????????, ?????????.
	new p_name[ MAX_PLAYER_NAME ];

	strmid(str, string_qm, 0, strlen(string_qm), 255);

	GetPlayerName( playerid, p_name, MAX_PLAYER_NAME );

	if(strfind(str, "/me", true) != -1)
	{
		new macros = strfind(str, "/me ");
		strdel(str, macros, macros + strlen("/me "));
		return callcmd::me(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/do", true) != -1)
	{
		new macros = strfind(str, "/do ");
		strdel(str, macros, macros + strlen("/do "));
		return callcmd::do(playerid, str); //pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/try", true) != -1)
	{
		new macros = strfind(str, "/try ");
		strdel(str, macros, macros + strlen("/try "));
		return callcmd::try(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/todo", true) != -1)
	{
		new macros = strfind(str, "/todo ");
		strdel(str, macros, macros + strlen("/todo "));
		return callcmd::todo(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/f", true) != -1)
	{
		new macros = strfind(str, "/f ");
		strdel(str, macros, macros + strlen("/f "));
		return callcmd::f(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/fn", true) != -1)
	{
		new macros = strfind(str, "/fn ");
		strdel(str, macros, macros + strlen("/fn "));
		return callcmd::fn(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/r", true) != -1)
	{
		new macros = strfind(str, "/r ");
		strdel(str, macros, macros + strlen("/r "));
		return callcmd::r(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/rn", true) != -1)
	{
		new macros = strfind(str, "/rn ");
		strdel(str, macros, macros + strlen("/rn "));
		return callcmd::rn(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/s", true) != -1)
	{
		new macros = strfind(str, "/s ");
		strdel(str, macros, macros + strlen("/s "));
		return callcmd::s(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/n", true) != -1)
	{
		new macros = strfind(str, "/n ");
		strdel(str, macros, macros + strlen("/n "));
		return callcmd::n(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/w", true) != -1)
	{
		new macros = strfind(str, "/w ");
		strdel(str, macros, macros + strlen("/w "));
		return callcmd::w(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/u", true) != -1)
	{
		new macros = strfind(str, "/u ");
		strdel(str, macros, macros + strlen("/u "));
		return callcmd::u(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/gnews", true) != -1)
	{
		new macros = strfind(str, "/gnews ");
		strdel(str, macros, macros + strlen("/gnews "));
		return callcmd::gnews(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/o", true) != -1)
	{
		new macros = strfind(str, "/o ");
		strdel(str, macros, macros + strlen("/o "));
		return callcmd::o(playerid, str);//pc_cmd_me (if pawn.cmd)
	}
	if(strfind(str, "/o", true) != -1)
	{
		new macros = strfind(str, "/o ");
		strdel(str, macros, macros + strlen("/o "));
		return callcmd::o(playerid, str);//pc_cmd_me (if pawn.cmd)
	}

	format(str, sizeof(str), "%s[%d] ???????: {FFFFFF}%s ",p_name, playerid, str);
	ProxDetector(playerid, 30.0, 0xFFFFFFFF, str); str[0] = EOS; return 1;
}

forward load_QuickMessage(playerid);
public load_QuickMessage(playerid)
{
    new query[128];
    new Cache: result;
    mysql_format(mysql, query, sizeof query, "SELECT * FROM quick_message WHERE name= '%s'", GetPlayerNameEx(playerid));
    result = mysql_query(mysql, query);

    printf("query load %s", query);


    if(!cache_num_rows())
    {

        format(query, sizeof query , "INSERT INTO `quick_message` (`name`) VALUES ('%s')", GetPlayerNameEx(playerid));
        mysql_tquery(mysql, query, "", "");

        for(new i = 0; i < 20; i++)
            format(quick_mes[playerid][i][line], 128, "??????? ????? ??ù ???ù ?%d", i+1);

        return SendClientMessage(playerid, -1, "Binder ??????? ?????? ???? ?????!");
    }

    for(new i = 0; i < 20; i++)
    {
            format(query, 12, "text_%d", i+1);
            cache_get_field_content(0, query, quick_mes[playerid][i][line], 128);
    }
    cache_delete(result);
    return SendClientMessage(playerid, -1, "Binder ??????? ????????!");


}
save_QuickMessage(playerid, id_text)
{
    new query_string[256];

    format(query_string, sizeof(query_string), "UPDATE `quick_message` SET `text_%d` = '%s' WHERE name = '%s'",id_text+1, quick_mes[playerid][id_text][line], GetPlayerNameEx(playerid));
   // format(query_string, sizeof(query_string), "UPDATE `quick_message` SET `text_1` = '%s', `text_2` = '%s', `text_3` = '%s', `text_4` = '%s', `text_5` = '%s', `text_6` = '%s', `text_7` = '%s', `text_8` = '%s', `text_9` = '%s', `text_10` = '%s', `text_11` = '%s', `text_12` = '%s', `text_13` = '%s', `text_14` = '%s', `text_15` = '%s', `text_16` = '%s', `text_17` = '%s', `text_18` = '%s', `text_19` = '%s', `text_20` = '%s' WHERE `name` = '%s'", quick_mes[playerid][0][line], quick_mes[playerid][1][line], quick_mes[playerid][2][line], quick_mes[playerid][3][line], quick_mes[playerid][4][line], quick_mes[playerid][5][line],quick_mes[playerid][6][line],quick_mes[playerid][7][line],quick_mes[playerid][8][line],quick_mes[playerid][9][line],quick_mes[playerid][10][line],quick_mes[playerid][11][line],quick_mes[playerid][12][line],quick_mes[playerid][13][line],quick_mes[playerid][14][line],quick_mes[playerid][15][line],quick_mes[playerid][16][line],quick_mes[playerid][17][line],quick_mes[playerid][18][line],quick_mes[playerid][19][line], GetPlayerNameEx(playerid));
    printf("save %s", query_string);
    return mysql_tquery(mysql, query_string, "", "");
}

stock ProxDetector(playerid, Float:max_range, color, const string[], Float:max_ratio = 1.6)
{
	new Float:pos_x,
		Float:pos_y,
		Float:pos_z,
		Float:range,
		Float:range_ratio,
		Float:range_with_ratio,
		clr_r,
		clr_g,
		clr_b,
		Float:color_r,
		Float:color_g,
		Float:color_b;

	if (!GetPlayerPos(playerid, pos_x, pos_y, pos_z)) {
		return 0;
	}
	color_r = float(color >> 24 & 0xFF);
	color_g = float(color >> 16 & 0xFF);
	color_b = float(color >> 8 & 0xFF);
	range_with_ratio = max_range * max_ratio;

#if defined foreach
	foreach (new i : Player) {
#else
	for (new i = GetPlayerPoolSize(); i != -1; i--) {
#endif
		if (!IsPlayerStreamedIn(playerid, i))
		{
			continue;
		}
		range = GetPlayerDistanceFromPoint(i, pos_x, pos_y, pos_z);
		if (range > max_range)
		{
			continue;
		}

		range_ratio = (range_with_ratio - range) / range_with_ratio;
		clr_r = floatround(range_ratio * color_r);
		clr_g = floatround(range_ratio * color_g);
		clr_b = floatround(range_ratio * color_b);

		SendClientMessage(i, (color & 0xFF) | (clr_b << 8) | (clr_g << 16) | (clr_r << 24), string);
	}

	SendClientMessage(playerid, color, string);
	return 1;
}

CMD:todo(playerid, params[])
{
	if(strlen(params) > 95) return SCM(playerid, -1, !"??????? ??????? ????? ? ????????");

	new message[48], action[49];

	if(sscanf(params, "p<*>s[47]s[48]", message, action)) return SCM(playerid, -1, !"??????????? /todo [?????*????????]");

	if(strlen(message) < 2 || strlen(action) < 2) return SCM(playerid, -1, !"??????????? /todo [?????*????????]");
	new string[144];

	format(string, sizeof(string), "- '%s' - {DE92FF}??????(-?) %s[%d], %s", message, GetPlayerNameEx(playerid), playerid, action);
	Action(playerid, string);
	return 1;
}

stock GetNearestBiz(playerid, type, Float: dist = 15.0)
{
	if(dist == 0.0)
		dist = FLOAT_INFINITY;

	new biz_id = -1;
	new Float: my_dist;

	for(new idx; idx < g_business_loaded; idx ++)
	{
	    if(GetBusinessData(idx, B_TYPE) != type) continue;
		my_dist = GetPlayerDistanceFromPoint(playerid, GetBusinessData(idx, B_POS_X), GetBusinessData(idx, B_POS_Y), GetBusinessData(idx, B_POS_Z));
		if(my_dist < dist)
		{
			dist = my_dist,
			biz_id = idx;
		}
	}
	return biz_id;
}

stock ShowTime(playerid)
{
	new
		hour, minute, second,
		year, month, day;

	gettime(hour, minute, second);
	getdate(year, month, day);

	

	new fmt_str[350];

	format(fmt_str, sizeof fmt_str, "~y~%d:%02d:%02d~n~~b~~h~%02d.%02d.%d", hour, minute, second, day, month, year);
	GameTextForPlayer(playerid, fmt_str, 3000, 1);

	return 1;
}

CMD:lmenu(playerid)
{
    if(!(1 <= GetPlayerTeamEx(playerid) <= 8)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");
	if(!(9 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	Dialog(playerid, DIALOG_LEADER_MENU,DIALOG_STYLE_LIST,"?????? ??????",
	""c_s"[1] "c_b"??????? ?????? ???????\n\
	"c_s"[2] "c_b"?????????? ???? ???????????",
	"???????", "???????");
	return 1;
}

CMD:uninviteoff(playerid, params[])
{
	if(!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)) return SendClientMessage(playerid, 0xCECECEFF, "??? ?????????? ?????ù ??????ù");
	if(!(9 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ??????? ??????????? ? ?? ??????????ù?");
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /uninviteoff [??? ??????]");

	extract params -> new string: player_name[21];

	if(IsPlayerConnected(GetPlayerID(player_name))) return SendClientMessage(playerid, 0xCECECEFF, "????? ? ????? ?????? ????????ù ?? ???????");

	new query[144],
		Cache: result,
		rows,
		team,
		rank;

	mysql_format(mysql, query, sizeof query, "SELECT team, job FROM accounts WHERE name='%s'", player_name);
	result = mysql_query(mysql, query, true);

	rows = cache_num_rows();

	if(rows)
	{
		team = cache_get_row_int(0, 0);
		rank = cache_get_row_int(0, 1);
	}

	cache_delete(result);

	if(!rows) return SendClientMessage(playerid, 0xCECECEFF, "????? ? ????? ?????? ?? ??????");

	if(team != GetPlayerTeamEx(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "???? ????? ?? ??????? ? ????? ???????????");

	if(rank >= GetPlayerJob(playerid))
		return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??????? ??????? ??????????ù/?????? ???????????");

	format(query, sizeof query, "?? ??????? ?????? %s ? ????????", player_name);
	SendClientMessage(playerid, 0xFF5533FF, query);

	format(query, sizeof query, "UPDATE accounts SET team=0,org_skin=0,job=0 WHERE name='%s'", player_name);
	mysql_query(mysql, query, false);

	return 1;
}


stock ProxDetectorS(Float:radi, playerid, targetid, spec = 0)
{
	new Float:p[3];

	if(!IsPlayerConnected(playerid)) return false;

	if(!IsPlayerConnected(targetid)) return false;

	if(!spec)
	{
		if(GetPlayerState(playerid) == 9) return false;

		if(GetPlayerState(targetid) == 9) return false;
	}
	if(!GetPlayerPos(targetid, p[0], p[1], p[2])) return false;
	if(!IsPlayerInRangeOfPoint(playerid, radi, p[0], p[1], p[2])) return false;

	return true;
}

stock SpawnDeathMatch(playerid)
{
    
    switch(random(3))
    {
        case 0:
		{
			SetPlayerPos(playerid, 742.591735,1754.569946,1191.398559);
			GivePlayerWeapon(playerid, 24, 999);
			SetPlayerHealth(playerid, 100);// 100 HP
			SetPlayerInterior(playerid, 1);
    		SetPlayerVirtualWorld(playerid, 1);
		}
        case 1:
		{
			SetPlayerPos(playerid, 721.075805,1747.330932,1192.843872);
			SetPlayerHealth(playerid, 100);// 100 HP
    		SetPlayerVirtualWorld(playerid, 1);
            SetPlayerInterior(playerid, 1);
    		GivePlayerWeapon(playerid, 24, 999);
		}
        case 2:
		{
			SetPlayerPos(playerid, 762.154357,1755.301635,1191.429687);
			SetPlayerHealth(playerid, 100);// 100 HP
    		SetPlayerVirtualWorld(playerid, 1);
            SetPlayerInterior(playerid, 1);
    		GivePlayerWeapon(playerid, 24, 999);
		}
        case 3:
		{
			SetPlayerPos(playerid, 775.674072,1751.479370,1191.429687);
			SetPlayerHealth(playerid, 100);// 100 HP
    		SetPlayerVirtualWorld(playerid, 1);
           SetPlayerInterior(playerid, 1);
    		GivePlayerWeapon(playerid, 24, 999);
		}
    }
    
    return 1;
}

CMD:dmzexit(playerid)
{
    if(GetPlayerData(playerid, P_DMZ_STATUS) == 1)
	{
		SetPlayerPos(playerid, 1301.493896,1704.872924,1498.363159);
	    SetPlayerVirtualWorld(playerid, 0);
	    ResetPlayerWeapons(playerid);
	    SetPlayerHealth(playerid, 100);// 100 HP
	    SetPlayerInterior(playerid, 0);

	    SetPlayerData(playerid, P_DMZ_STATUS, 0);
	}
}

CMD:mycoins(playerid)
{
	new fmt_text[80];
    format(fmt_text, sizeof fmt_text, "? ??? %d ?????.", GetPlayerData(playerid, P_COINS));
	SendClientMessage(playerid, 0xFF5533FF, fmt_text);


	return 1;
}

CMD:dmztop(playerid)
{
	new fmt_text[80];
    format(fmt_text, sizeof fmt_text, "? ??? %d ?????? ?? DeathMatch.", GetPlayerData(playerid, P_DMZ_KILL));
	SendClientMessage(playerid, 0xFF5533FF, fmt_text);
		
	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY dmz_kills DESC LIMIT 10");
	mysql_tquery(mysql, string, "TopDMZKills", "d",playerid);

	return 1;
}

public: TopDMZKills(playerid)
{
	new name[24], cash,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			cash = 0;
			cache_get_field_content(i, "name", name, mysql);
			cash = cache_get_field_content_int(i, "dmz_kills", mysql);
			format(string, sizeof(string), "%s\n"c_b"???: "c_server"%s "c_b"Kills: "c_server"%d", string, name, cash);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "ù?? 10 ???????", string, "???????", "");

	return 1;
}

CMD:rewards(playerid)
{
    ShowPlayerProgressFMenu(playerid);
}

stock ShowPlayerProgressFMenu(playerid)
{
	new fmt_text[1000];

	format
	(
		fmt_text,
		sizeof fmt_text,
		""c_server"[1] "c_b"???????? | %s\n"\
		""c_server"[2] "c_b"??????ù ?1 | %s\n"\
		""c_server"[3] "c_b"??????ù ?1 | %s\n"\
		""c_server"[4] "c_b"??????ù ?1 | %s\n"\
		""c_server"[5] "c_b"?????????? | %s\n"\
		""c_server"[6] "c_b"????ù | %s",
		GetPlayerData(playerid, P_PROGRESS_1) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
		GetPlayerData(playerid, P_PROGRESS_2) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
		GetPlayerData(playerid, P_PROGRESS_3) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
		GetPlayerData(playerid, P_PROGRESS_4) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
		GetPlayerData(playerid, P_PROGRESS_5) ? ("{32CD32}?????????") : ("{F81414}?? ?????????"),
        GetPlayerData(playerid, P_PROGRESS_6) ? ("{32CD32}?????????") : ("{F81414}?? ?????????")
	);
	Dialog
	(
		playerid, DIALOG_ACTION_F_PROGRESS, DIALOG_STYLE_LIST,
		"?????????ù | ???????????",
		fmt_text,
		"???????", "???????"
	);

	return 1;
}

CMD:killstop(playerid)
{
	if(!(TEAM_OPG_ARZAMASKAYA <= GetPlayerTeamEx(playerid) <= TEAM_OPG_LYTKARINSKAYA))
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ?????? ???????????? ???");

	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY capt_kills DESC LIMIT 5");
	mysql_tquery(mysql, string, "TopCaptKills", "d",playerid);

	return 1;
}

public: TopCaptKills(playerid)
{
	new name[24], cash,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			cash = 0;
			cache_get_field_content(i, "name", name, mysql);
			cash = cache_get_field_content_int(i, "capt_kills", mysql);
			format(string, sizeof(string), "%s\n"c_b"???: "c_server"%s "c_b"Kills: "c_server"%d", string, name, cash);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "ù?? 5 ???????", string, "???????", "");

	return 1;
}


stock ShowPlayerOpenCase(playerid)
{
    Dialog(playerid,DIALOG_DONATE_CASE,DIALOG_STYLE_MSGBOX,
	"???????? ?????",
	"? ??? ???? ??????????? ???????? VIP-??????, ???? ??ù ??????????, ??????, ????? ????? ? ????? ?????\n"\
	"?? ??????? ??? ?????? ??????? ?????",
	"???????","??????"
	);
}

stock ShowPlayerOpenDonate(playerid)
{
    Dialog(playerid,DIALOG_DONATE_OPEN,DIALOG_STYLE_LIST,
	"?????",
	"1. ???????? ????? ??????? ?? ?????????\n"\
	"2. ?????-????",
	"???????","??????"
	);
}

public: GetPlayerPrise(playerid)
{
	new fmt_text[256];
	
	AddPlayerData(playerid, P_DONATE_CASE, -, 1);
	UpdatePlayerDatabaseInt(playerid, "case", GetPlayerData(playerid, P_DONATE_CASE));
	
    switch(random(15))
	{
		case 0..6:
		{
			new rand = random(10000000);

			GivePlayerMoneyEx(playerid, rand,"???????? ?????", true, true);
			format(fmt_text, sizeof fmt_text, "????????ù??! ?? ????????: %d$", rand);
			SendClientMessage(playerid, 0x66CC00FF, fmt_text);
			return 1;
		}
		case 7..8:
		{
		    new rand = random(15);
		    
		    GivePlayerDonateRub(playerid, rand,"???????? ?????", true, true);
			format(fmt_text, sizeof fmt_text, "????????ù??! ?? ????????: %d DONATE-RUB", rand);
			SendClientMessage(playerid, 0x66CC00FF, fmt_text);
			return 1;
		}
		case 9:
		{
		    AddPlayerData(playerid, P_CAR_SLOTS, +, 1);
			UpdatePlayerDatabaseInt(playerid, "car_slots", GetPlayerData(playerid, P_CAR_SLOTS));
			
			format(fmt_text, sizeof fmt_text, "?? ???????? ???? ??ù ??????????. ù?????? ?????????? ??????: %d",
			GetPlayerData(playerid, P_CAR_SLOTS));
			SendClientMessage(playerid, 0x66CC00FF, fmt_text);
			return 1;
		}
		case 10..13:
		{
		    new rand = random(500) + 300;

		    GivePlayerDonate(playerid, rand,"???????? ?????", true);
			format(fmt_text, sizeof fmt_text, "????????ù??! ?? ????????: %d DONATE-COINS", rand);
			SendClientMessage(playerid, 0x66CC00FF, fmt_text);
		}
		case 14..15:
		{
		    new premium = GetPlayerPremium(playerid);
      		if(!premium)
        	{
         		SetPlayerData(playerid, P_PREMIUM, 1);
         		SetPlayerData(playerid, P_PREMIUM_DATE, gettime() + 3 * 86400);
			}
			else
			{
   				AddPlayerData(playerid, P_PREMIUM_DATE, +, 3 * 86400);
			}

			new prem_day,
   			prem_month,
   			prem_year;

			timestamp_to_date(GetPlayerData(playerid, P_PREMIUM_DATE), prem_year, prem_month, prem_day);

			format(fmt_text, sizeof fmt_text, "?? ??????? ???????? {EC174F} VIP {FFFFFF}?? {EC174F}%02d.%02d.%d", prem_day, prem_month, prem_year);
			SendClientMessage(playerid, -1, fmt_text);
			UpdatePlayerDatabaseInt(playerid, "premium_date", GetPlayerData(playerid, P_PREMIUM_DATE));
			UpdatePlayerDatabaseInt(playerid, "premium", 1);
			return 1;
		}
 	}
	return false;
}

stock ShowPlayerQuestIn8marta(playerid)
{
    
    Dialog
	(
		playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX,
		""c_i"8 ?????",
		""c_b"??????????? ???ù! ??????ù ????????????? ??????? ????! ???????ù ?? ??? ?????????? ?????? ? ????? ?????.\n"\
		"\n"\
		"??? ????????? ????????? ????????? ????????? ?? ???, ?? ??????? ?? ????????: "c_i"'1 ???? ??ù ?????????? ? 30 DONATE-RUB'\n"\
		""c_b"\n"\
		"??? ???? ?????? ???????, ????? ????????? ?????? ???????? ????? ? ?? ????ù ???? ?????ù? ????? ????? ?????? ??ù?? ?? ??????,\n"\
		"????? ? ?????? ??, ????? ??????? ?? ??????? ? ??????? ??????, ????? ???? ???????? ??????? ??????.\n"\
		"\n"\
		""c_s"/gps > ??????????? ????ù",
		"??", ""
	);
	
}

CMD:testt(playerid)
{
     ShowPlayerClientSettings(playerid);
}

CMD:testoff(playerid)
{
    RemovePlayerAttachedObject(playerid, 3);
}

CMD:online(playerid)
{
    new query[70];
    format(query, sizeof query, "[?????????ù]: "c_b"ù?????? ??????: {FFFF00}%d "c_b"???????", Iter_Count(Player));
	SendClientMessage(playerid, COR_SERVER, query);
	return 1;
}

stock ShowPlayerObmenMonet(playerid)
{
	new fmt_str[500];
	
    format
	(
		fmt_str, sizeof fmt_str,
		""c_b"1. ???????ù ?????? (ID: 407) - "c_s"1.000 ????? "c_b"| ???????? "c_s"%d ?? 5\n\
		"c_b"2. ??????? (ID: 431) - "c_s"1.000 ????? "c_b"| ???????? "c_s"%d ?? 5\n\
		"c_b"3. ???????? ???????? (ID: 563) - "c_s"1.000 ????? "c_b"| ???????? "c_s"%d ?? 5\n\
		"c_b"4. ??????????ù ?????? (ID: 597) - "c_s"1.000 ????? "c_b"| ???????? "c_s"%d ?? 5\n\
		"c_b"5. ??????? (ID: 444) - "c_s"3.000 ????? "c_b"| ???????? "c_s"%d ?? 1",
		Cars[car_1],
		Cars[car_2],
		Cars[car_3],
		Cars[car_4],
		Cars[car_5]
	);

	Dialog(playerid, DIALOG_OBMEN_MONET, DIALOG_STYLE_LIST, "????? ?????", fmt_str, "?????ù??", "???????");
	return 1;

}



public: LoadCarObmen()
{
	new Cache: result;

	result = mysql_query(mysql, "SELECT * FROM `car_obmen`", true);

	Cars[car_1] = cache_get_field_content_int(0, "car_1", mysql);
    Cars[car_2] = cache_get_field_content_int(0, "car_2", mysql);
    Cars[car_3] = cache_get_field_content_int(0, "car_3", mysql);
    Cars[car_4] = cache_get_field_content_int(0, "car_4", mysql);
    Cars[car_5] = cache_get_field_content_int(0, "car_5", mysql);


	cache_delete(result);

	printf("[CAR_OBMEN]: Load!");
}

CMD:givecar(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
    if(GetPlayerAdminEx(playerid) < 7) return 1;
    
    extract params -> new to_player, modelid; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /givecar [id ??????] [id ??????????]");

    new color_1 = 15, color_2 = 15;
    
    new Float:POS[3];
    GetPlayerPos(to_player, POS[0],POS[1],POS[2]);

    new Float: pos_x = POS[0];
	new Float: pos_y = POS[1];
	new Float: pos_z = POS[2];
	new Float: angle = 356.7986;

	new query[220],
		Cache: result,
		idx;

	idx = GetFreeOwnableCarID();

	SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(to_player));

	SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
	SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
	SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

	SetOwnableCarData(idx, OC_POS_X, 		pos_x);
	SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
	SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
	SetOwnableCarData(idx, OC_ANGLE, 		angle);

	strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

	SetOwnableCarData(idx, OC_ALARM, 		false);
	SetOwnableCarData(idx, OC_KEY_IN, 		false);

	SetOwnableCarData(idx, OC_CREATE, 		gettime());

	format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(to_player));
	
	new vehicleid = CreateVehicle
	(
		GetOwnableCarData(idx, OC_MODEL_ID),
		GetOwnableCarData(idx, OC_POS_X),
		GetOwnableCarData(idx, OC_POS_Y),
		GetOwnableCarData(idx, OC_POS_Z),
		GetOwnableCarData(idx, OC_ANGLE),
		GetOwnableCarData(idx, OC_COLOR_1),
		GetOwnableCarData(idx, OC_COLOR_2),
		-1,
		0,
		VEHICLE_ACTION_TYPE_OWNABLE_CAR,
		idx
	);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
		//index = GetVehicleData(vehicleid, V_ACTION_ID);
  		format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
    	SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
		SetVehicleParam(vehicleid, V_LOCK, false);
		SetVehicleData(vehicleid, V_MILEAGE, 0.0);
	}

	SetPlayerData(to_player, P_OWNABLE_CAR, vehicleid);

	format
	(
		query, sizeof query,
		"INSERT INTO ownable_cars \
		(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
		VALUES \
		('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
		GetPlayerAccountID(to_player),
		modelid,
		color_1,
		color_2,
		pos_x,
		pos_y,
		pos_z,
		angle,
		gettime()
	);
	result = mysql_query(mysql, query, true);

	SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

	cache_delete(result);

	SendClientMessage(playerid, 0x66CC00FF, "ok");
//	SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}??ù ???????? ?????????? ?????????????? {ffff00} ???? -- ù????????.");
    return 1;
}

CMD:createytpromo(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	Dialog
	(
		playerid, DIALOG_YTPROMO_CREATE, DIALOG_STYLE_INPUT,
		"???????? ????????? ???????",
		"{FFFFFF}??ù ???????ù ????????? ???????\n"\
		"????????? ????????? ? ???? ????:\n\n"\
		"{33CC66}?????????: ???, ù??, ???-??\n\n"\
		"{888888}??????????:\n"\
		"{FFFFFF}- ??? ????? ????????? ?? 1 ?? 30 ????????\n"\
		"- ù?? ?? 0 ?? 3 (0. ??????, 1.?????, 2. ?????-?????, 3. exp)\n"\
		"- ?????????? ?? 1 ?? 10.000.000",
		"?????", "??????"
	);

	return 1;
}
public OnPlayerPickUpDynamicPickup(playerid, pickupid)
{
if (s_autorace_Pos_PickupID[0] == pickupid) {
		TogglePlayerDynamicCP(playerid, s_autorace_Main_CPID, false);
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerInterior(playerid, 0);
		SetPlayerPos(playerid, AUTORACE_ENTER_POS);
		SetPlayerFacingAngle(playerid, AUTORACE_ENTER_F_ANGLE);
		SetCameraBehindPlayer(playerid);
		return 1;
	}
	if (s_autorace_Pos_PickupID[1] == pickupid) {
		
		new
			AutoRaceType:ar_type = s_autorace_Server_Type;

		if (ar_type == t_AutoRaceNone) {
			SendClientMessage(playerid, 0xCECECEFF, "??????????ù ???????");
			return 1;
		}
		if (s_autorace_Server_Stage == s_AutoRaceNone) {
			SendClientMessage(playerid, 0xCECECEFF, "?? ???????? ?? ?????");
			return 1;
		}
		if (s_autorace_Server_Count[_:ar_type] >= s_autorace_Vehicle_Amount[_:ar_type]) {
			SendClientMessage(playerid, 0xCECECEFF, "??????? ????? ??????????");
			return 1;
		}
		if ((p_autorace_Player_Type[playerid] != t_AutoRaceNone)
			&& (p_autorace_Player_State[playerid] != AUTORACE_STATE_NONE)) {
			SendClientMessage(playerid, 0xCECECEFF, "?? ??? ???????????????? ?? ?????");
		} else {
			Dialog_Show::P_AUTORACE(playerid);
		}
		return 1;
	}
	return 1;
}
	
public OnPlayerEnterDynamicRaceCP(playerid, checkpointid)
{
	if (p_autorace_Player_RaceCPID[playerid] == checkpointid) {

		new
			AutoRaceType:ar_type = p_autorace_Player_Type[playerid];

		if ((ar_type != t_AutoRaceNone)
			&& (p_autorace_Player_State[playerid] == AUTORACE_STATE_DRIVER)) {

			new
				ar_racecp = ++p_autorace_Player_RaceCP{playerid};

			DestroyDynamicRaceCP(p_autorace_Player_RaceCPID[playerid]);
			if (ar_racecp == s_autorace_RaceCP_Amount[_:ar_type]) {

				new
					string[128 + 1],
					ar_count = p_autorace_Player_Count{playerid};

				s_autorace_Server_PlayerID[_:ar_type][ar_count] = INVALID_PLAYER_ID;
				p_autorace_Player_Type[playerid] = t_AutoRaceNone;
				p_autorace_Player_State[playerid] = AUTORACE_STATE_NONE;
				p_autorace_Player_Count{playerid} = 0;
				if (p_autorace_Player_VehicleID[playerid] != INVALID_VEHICLE_ID) {
					DestroyDeliveryVehicle(p_autorace_Player_VehicleID[playerid]);
					p_autorace_Player_VehicleID[playerid] = INVALID_VEHICLE_ID;
				}
				p_autorace_Player_RaceCPID[playerid] = INVALID_STREAMER_ID;
				GameTextForPlayer(playerid, "~g~Finish", 5000, 3);
				//SetPlayerVirtualWorld(playerid, AUTORACE_EXIT_WORLD);
				//SetPlayerInterior(playerid, AUTORACE_EXIT_INTERIOR);

				switch (++s_autorace_Server_Places[_:ar_type]) {
					case 1: {
						GivePlayerDonateRub(playerid, 20, "?????? ?? 1 ????? ? ?????");
						format(string, sizeof(string), "[?????????ù]: ?????? ????? ? ????? ??????? %s ? ???????? ???? 20 ????? ??????", GetPlayerNameEx(playerid));
						SendClientMessageToAll(COR_SERVER, string);
					}
					case 2: {
						GivePlayerDonateRub(playerid, 10, "?????? ?? 2 ????? ? ?????");
						format(string, sizeof(string), "[?????????ù]: ?????? ????? ? ????? ??????? %s ? ???????? ???? 10 ????? ??????", GetPlayerNameEx(playerid));
						SendClientMessageToAll(COR_SERVER, string);
					}
					case 3: {
						AddPlayerData(playerid, P_COINS, +, 500);
						UpdatePlayerDatabaseInt(playerid, "coins", GetPlayerData(playerid, P_COINS));
						format(string, sizeof(string), "[?????????ù]: ù????? ????? ? ????? ??????? %s ? ???????? ???? 500 ????? ?????", GetPlayerNameEx(playerid));
						SendClientMessageToAll(COR_SERVER, string);
					}
				}

				SetPlayerPos(playerid, 156.5571,779.7189,11.9949);
				SetCameraBehindPlayer(playerid);
				return 1;
			}

			new
				string[8 + 1];

			format(string, sizeof(string), "~g~%i/%i", ar_racecp, s_autorace_RaceCP_Amount[_:ar_type]);
			GameTextForPlayer(playerid, string, 5000, 3);
			p_autorace_Player_RaceCPID[playerid] = CreateDynamicRaceCP(0, s_autorace_RaceCP_PosS[_:ar_type][ar_racecp][0], s_autorace_RaceCP_PosS[_:ar_type][ar_racecp][1], s_autorace_RaceCP_PosS[_:ar_type][ar_racecp][2],
																		  s_autorace_RaceCP_PosS[_:ar_type][ar_racecp + 1][0], s_autorace_RaceCP_PosS[_:ar_type][ar_racecp + 1][1], s_autorace_RaceCP_PosS[_:ar_type][ar_racecp + 1][2], 6.0, .playerid = playerid, .streamdistance = FLOAT_INFINITY);
			Streamer_Update(playerid, STREAMER_TYPE_RACE_CP);
		}
		return 1;
	}
	return 1;
}


CMD:asellhouse(playerid, params[])
{
	if (GetPlayerAdminEx(playerid) != 6) {
		return 0;
	}
	extract params -> new i; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /asellhouse [id ????]");

	new
		query[180];
	//if(!GetHouseData(i, H_EVICTION)) continue;
	//if(GetHouseData(i, H_RENT_DATE) < cur_time) continue;

	format(query, sizeof query, "UPDATE houses SET owner_id='0',lock='0',eviction='0' WHERE id='%d'", GetHouseData(i, H_SQL_ID));
	mysql_query(mysql, query, false);

	new owner_player = GetPlayerIDBySqlID(GetHouseData(i, H_OWNER_ID));
	if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
		SetPlayerData(owner_player, P_HOUSE, -1);
		SetPlayerData(owner_player, P_HOUSE_ROOM, -1);
		SetPlayerData(owner_player, P_HOUSE_TYPE, -1);
		mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `house`=-1,`house_room`=-1,`house_type`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
		mysql_query(mysql, query, false);
	} else {
		mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `house`=-1,`house_room`=-1,`house_type`=-1 WHERE `id`=%d LIMIT 1", GetHouseData(i, H_OWNER_ID));
		mysql_query(mysql, query, false);
	}
	SetHouseData(i, H_OWNER_ID, 0);
	SetHouseData(i, H_IMPROVEMENTS,		0);

	SetHouseData(i, H_EVICTION, 0);

	SetHouseData(i, H_RENT_DATE,		0);
	SetHouseData(i, H_LOCK_STATUS,		false);

	UpdateHouse(i);

	HouseHealthInit(i);
	HouseStoreInit(i);
	return 1;
}

CMD:asellbiz(playerid, params[])
{
	if (GetPlayerAdminEx(playerid) != 6) {
		return 0;
	}
	extract params -> new i; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /asellbiz [id ???????]");

	new
		query[180];
	//if(!GetBusinessData(i, B_EVICTION)) continue;
	//if(GetBusinessData(i, B_RENT_DATE) < cur_time) continue;

	format(query, sizeof query, "UPDATE business SET owner_id='0',products='0',prod_price='0',lock='0',eviction='0' WHERE id='%d'", GetBusinessData(i, B_SQL_ID));
	mysql_query(mysql, query, false);

	new owner_player = GetPlayerIDBySqlID(GetBusinessData(i, B_OWNER_ID));
	if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
		SetPlayerData(owner_player, P_BUSINESS, -1);
		mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `business`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
		mysql_query(mysql, query, false);
	} else {
		mysql_format(mysql, query, sizeof query, "UPDATE accounts SET `business`=-1 WHERE `id`=%d LIMIT 1", GetBusinessData(i, B_OWNER_ID));
		mysql_query(mysql, query, false);
	}

	SetBusinessData(i, B_OWNER_ID, 0);
	SetBusinessData(i, B_IMPROVEMENTS, 		0);

	SetBusinessData(i, B_EVICTION, 0);

	SetBusinessData(i, B_PRODS, 			0);
	SetBusinessData(i, B_PROD_PRICE,		0);

	SetBusinessData(i, B_BALANCE,			0);
	SetBusinessData(i, B_RENT_DATE,			0);
	SetBusinessData(i, B_ENTER_MUSIC,		0);
	SetBusinessData(i, B_LOCK_STATUS,		false);

	BusinessHealthPickupInit(i);

	format(query, sizeof query, "DELETE FROM business_gps WHERE bid=%d", i);
	mysql_query(mysql, query, false);

	g_business_gps_init = false;
	CallLocalFunction("UpdateBusinessLabel", "i", i);
	return 1;
}

CMD:asellfuel(playerid, params[])
{
	if (GetPlayerAdminEx(playerid) != 6) {
		return 0;
	}
	extract params -> new i; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /asellfuel [id ????????]");

	new
		query[180];
	//if(!GetFuelStationData(i, FS_EVICTION)) continue;
	//if(GetFuelStationData(i, FS_RENT_DATE) < cur_time) continue;

	format(query, sizeof query, "UPDATE fuel_stations SET owner_id='0',fuels='1000',fuel_price='3',lock='0',eviction='0' WHERE id='%d'", GetFuelStationData(i, FS_SQL_ID));
	mysql_query(mysql, query, false);

	new owner_player = GetPlayerIDBySqlID(GetFuelStationData(i, FS_OWNER_ID));
	if(IsPlayerConnected(owner_player) && IsPlayerLogged(owner_player)) {
		SetPlayerData(owner_player, P_FUEL_ST, -1);
		format(query, sizeof query, "UPDATE accounts SET `fuel_st`=-1 WHERE `id`=%d LIMIT 1", GetPlayerAccountID(owner_player));
		mysql_query(mysql, query, false);
	} else {
		format(query, sizeof query, "UPDATE accounts SET `fuel_st`=-1 WHERE `id`=%d LIMIT 1", GetFuelStationData(i, FS_OWNER_ID));
		mysql_query(mysql, query, false);
	}

	SetFuelStationData(i, FS_OWNER_ID, 0);
	SetFuelStationData(i, FS_IMPROVEMENTS, 0);

	SetFuelStationData(i, FS_EVICTION, 0);

	SetFuelStationData(i, FS_FUELS, 		1000);
	SetFuelStationData(i, FS_FUEL_PRICE,	3);
	SetFuelStationData(i, FS_BUY_FUEL_PRICE,0);

	SetFuelStationData(i, FS_BALANCE,		0);
	SetFuelStationData(i, FS_RENT_DATE,		0);
	SetFuelStationData(i, FS_LOCK_STATUS,	false);
	CallLocalFunction("UpdateFuelStationLabel", "i", i);
	return 1;
}

CMD:mtop(playerid)
{
	new fmt_str[3000];
    format
	(
		fmt_str, sizeof fmt_str,
		""c_b"??????? ?????-????? ?? ???? ?? ???????!\n\
		\n\
		?????? ???ù? ??? 1 ?????? ????? ???????? ??????????????, ?????? ??????????????\n\
		????? ?????????? ? ??????? ???????: "c_s"/mpriz\n\
		"c_b"ù?? ??, ?????? ???ù? ?????? ???-??????? ????? ?????ù???ù.\n\
		\n\
		"c_i"1. "c_b"ù??: ???????????? ????? ?? ????????? ???????.\n\
		\t??????????ù ?????? ?? ????????? ???????, ?? ?????? ??????????? ???????? ??????? ?????.\n\
		\t"c_i"?????? ?????: "c_b"???????, ??????, ?????, ???????.\n\
		\n\
		"c_i"2. "c_b"ù??: ???????????? ????? ?? ???. ???????.\n\
		\t??????????ù ?????? ?? ???. ???????, ?? ?????? ??????????? ???????? ??????? ?????.\n\
		\t"c_i"?????? ?????: "c_b"???????? ????????, ù??????, ???????.\n\
		\n\
		"c_i"3. "c_b"ù??: ?????????? PayDay\n\
		\t?????? ????????? PayDay, ??? ????? ???????ù?? +1 ? ????????? ??????? ?????.\n\
		\t"c_i"?????????ù: "c_b"PayDay ?????????? ?????? ???. ???????? ? 11:00, 12:00\n\
		\n\
		"c_i"4. "c_b"ù??: ??????????? ??????????\n\
		\t??????ùù ?????????ù, ?? ?????? ??????????? ???????? ??????? ?????\n\
  		\t"c_s"/reward"c_b"- ?????????ù ? ?????????ù? ? ?????? ??????????.\n\
  		\n\
		"c_i"5. "c_b"ù??: ??????????? ???????\n\
		\t??????ùù ??????, ?? ?????? ??????????? ???????? ??????? ?????.\n\
		\t"c_s"/quest "c_b"- ?????????ù ? ??????? ? ?????? ???????."
	);

	Dialog(playerid, DIALOG_MTOP, DIALOG_STYLE_MSGBOX, ""c_i"ù??: "c_b"?????????ù", fmt_str, "?????", "???????");
	return 1;
}

stock MtopMenu(playerid)
{
    Dialog
	(
		playerid, DIALOG_MTOP_MENU, DIALOG_STYLE_LIST,
		"???? ù??-???????",
		""c_server"1. "c_i"ù??: "c_b"???????????? ????? ?? ????????? ???????\n"\
		""c_server"2. "c_i"ù??: "c_b"???????????? ????? ?? ???. ???????\n"\
		""c_server"3. "c_i"ù??: "c_b"?????????? PayDay\n"\
		""c_server"4. "c_i"ù??: "c_b"??????????? ??????????\n"\
		""c_server"5. "c_i"ù??: "c_b"??????????? ???????\n"\
	    ""c_i"ù?? ?????? ?? ??????? ?? ???????",
		"???????", "???????"
	);
	return 1;
}

CMD:top_salary_new_work(playerid)
{
	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY TOP_SalaryNewWork DESC LIMIT 25");
	mysql_tquery(mysql, string, "TopSalaryNewWork", "d",playerid);

	return 1;
}

CMD:top_salary_gos_work(playerid)
{
	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY TOP_SalaryGosWork DESC LIMIT 25");
	mysql_tquery(mysql, string, "TopSalaryGovWork", "d",playerid);

	return 1;
}

public: TopSalaryNewWork(playerid)
{
	new name[24], top,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			top = 0;
			cache_get_field_content(i, "name", name, mysql);
			top = cache_get_field_content_int(i, "TOP_SalaryNewWork", mysql);
			format(string, sizeof(string), "%s\n"c_b" %s: "c_i"%d", string, name, top);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, ""c_i"ù??: "c_b"???????????? ????? ?? ????????? ???????", string, "???????", "");

	return 1;
}

public: TopSalaryGovWork(playerid)
{
	new name[24], top,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			top = 0;
			cache_get_field_content(i, "name", name, mysql);
			top = cache_get_field_content_int(i, "TOP_SalaryGosWork", mysql);
			format(string, sizeof(string), "%s\n"c_b" %s: "c_i"%d", string, name, top);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, ""c_i"ù??: "c_b"???????????? ????? ?? ???. ???????", string, "???????", "");

	return 1;
}

public: TopPayDay(playerid)
{
	new name[24], top,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			top = 0;
			cache_get_field_content(i, "name", name, mysql);
			top = cache_get_field_content_int(i, "TOP_PayDay", mysql);
			format(string, sizeof(string), "%s\n"c_b" %s: "c_i"%d", string, name, top);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, ""c_i"ù??: "c_b"?????????? PayDay", string, "???????", "");

	return 1;
}

CMD:top_payday(playerid)
{
	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY TOP_PayDay DESC LIMIT 25");
	mysql_tquery(mysql, string, "TopPayDay", "d",playerid);

	return 1;
}

public: TopQuest(playerid)
{
	new name[24], top,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			top = 0;
			cache_get_field_content(i, "name", name, mysql);
			top = cache_get_field_content_int(i, "TOP_Quest", mysql);
			format(string, sizeof(string), "%s\n"c_b" %s: "c_i"%d", string, name, top);
			strcat(string, string, 0);
		}
	}
	
	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, ""c_i"ù??: "c_b"??????????? ???????", string, "???????", "");
	return 1;
}

CMD:top_quest(playerid)
{
	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY TOP_Quest DESC LIMIT 25");
	mysql_tquery(mysql, string, "TopQuest", "d",playerid);

	return 1;
}

CMD:mpriz(playerid)
{
    Top1PlayerAndPriz(playerid);

	return 1;
}

public: Top1PlayerAndPriz(playerid)
{
	new string[400];


	format(string, sizeof(string),
	""c_i"1. "c_b"2000 ?????-??????.\n\
	"c_i"2. "c_b"2000 ?????-??????.\n\
	"c_i"3. "c_b"1500 ?????-??????.\n\
	"c_i"4. "c_b"2000 ?????-??????.\n\
	"c_i"5. "c_b"1000 ?????-??????."
	);

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, ""c_i"ù??: "c_b"???????", string, "???????", "");

	return 1;
}

public: TopProgress(playerid)
{
	new name[24], top,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			top = 0;
			cache_get_field_content(i, "name", name, mysql);
			top = cache_get_field_content_int(i, "TOP_Progress", mysql);
			format(string, sizeof(string), "%s\n"c_b" %s: "c_i"%d", string, name, top);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, ""c_i"ù??: "c_b"??????????? ??????????", string, "???????", "");

	return 1;
}

CMD:top_progress(playerid)
{
	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY TOP_Progress DESC LIMIT 25");
	mysql_tquery(mysql, string, "TopProgress", "d",playerid);

	return 1;
}

CMD:placeboomboxx(playerid, params[])
{
    new string[128], Float:BBCoord[4], pName[MAX_PLAYER_NAME];
    GetPlayerPos(playerid, BBCoord[0], BBCoord[1], BBCoord[2]);
    GetPlayerFacingAngle(playerid, BBCoord[3]);
    SetPVarFloat(playerid, "BBX", BBCoord[0]);
    SetPVarFloat(playerid, "BBY", BBCoord[1]);
    SetPVarFloat(playerid, "BBZ", BBCoord[2]);
    GetPlayerName(playerid, pName, sizeof(pName));
    BBCoord[0] += (2 * floatsin(-BBCoord[3], degrees));
   	BBCoord[1] += (2 * floatcos(-BBCoord[3], degrees));
   	BBCoord[2] -= 1.0;
	//if(Boombox[playerid] == 0) return SCM(playerid, COLOR_WHITE, "You don't have a Boombox - Ask a Admin for one"); // Part of Variable
	if(GetPVarInt(playerid, "PlacedBB")) return SCM(playerid, -1, "?? ??? ????????? ???????");
	foreach(Player, i)
	{
 		if(GetPVarType(i, "PlacedBB"))
   		{
  			if(IsPlayerInRangeOfPoint(playerid, 30.0, GetPVarFloat(i, "BBX"), GetPVarFloat(i, "BBY"), GetPVarFloat(i, "BBZ")))
			{
   				SendClientMessage(playerid, COLOR_WHITE, "?? ?? ?????? ????????? ???? ??????? ? ???? ?????, ??? ??? ? ???? ????? ??? ???? ???????.");
			    return 1;
			}
		}
	}
	new string2[128];
	format(string2, sizeof(string2), "%s ???????? ???????", pName);
	SendNearbyMessage(playerid, 15, string2, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE, COLOR_PURPLE);
	SetPVarInt(playerid, "PlacedBB", 0);
	format(string, sizeof(string), "{FF0000} ??????????\n {FFFFFF}?????????: {FF0000} %s \n {FFFFFF} ??????:\n {ff0000} ????? ?????", pName);
	SetPVarInt(playerid, "BBLabel", _:CreateDynamic3DTextLabel(string, -1, BBCoord[0], BBCoord[1], BBCoord[2]+0.6, 5, .worldid = GetPlayerVirtualWorld(playerid), .interiorid = GetPlayerInterior(playerid)));
	SetPVarInt(playerid, "BBArea", CreateDynamicSphere(BBCoord[0], BBCoord[1], BBCoord[2], 30.0, GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid)));
	SetPVarInt(playerid, "BBInt", GetPlayerInterior(playerid));
	SetPVarInt(playerid, "BBVW", GetPlayerVirtualWorld(playerid));
	ApplyAnimation(playerid,"BOMBER","BOM_Plant",4.0,0,0,0,0,0);
    ApplyAnimation(playerid,"BOMBER","BOM_Plant",4.0,0,0,0,0,0);
	return 1;
}

CMD:boombox(playerid)
{
    if(GetPlayerData(playerid, P_BOOMBOX) == 1)
    {
		Dialog(playerid, DIALOG_BOOMBOX_MENU, DIALOG_STYLE_LIST,"???? BoomBox",
		""c_b"????????? BoomBox\n\
		??????? BoomBox\n\
		???????? BoomBox\n\
		????????? BoomBox",
		"?????", "???????");
	}
	else
	    return Send(playerid,-1,"? ??? ??? ????????");
	    
	return 1;

}

CMD:setboomboxx(playerid, params[])
{
	if(GetPVarType(playerid, "PlacedBB"))
	{
		if(IsPlayerInRangeOfPoint(playerid, 3.0, GetPVarFloat(playerid, "BBX"), GetPVarFloat(playerid, "BBY"), GetPVarFloat(playerid, "BBZ")))
		{
			Dialog(playerid,DIALOG_BOOMBOX,DIALOG_STYLE_LIST,"???? BoomBox",
			""c_b"????????????\n\
			"c_b"????????: "c_s"???? ????\n\
			"c_b"?????????: "c_s"Miyagi & ????????\n\
			"c_b"????????: "c_s"?????",
			/*????\n\
			?????\n\
			Country\n\
			Morgenshtern\n\
			Slava Marlow\n\
			VAVAN\n\
			?????????",*/
			"?????", "???????");
		}
		else
		{
   			return SendClientMessage(playerid, -1, "?? ?????? ?? ?????? BoomBox!");
		}
    }
    else
    {
        SendClientMessage(playerid, -1, "?? ?? ????????? BoomBox!");
	}
	return 1;
}

CMD:placeboomboxxx(playerid, params [])
{

	PickUpBoombox(playerid);

}

stock StopStream(playerid)
{
	DeletePVar(playerid, "pAudioStream");
    StopAudioStreamForPlayer(playerid);
}

stock PlayStream(playerid, url[], Float:posX = 0.0, Float:posY = 0.0, Float:posZ = 0.0, Float:distance = 50.0, usepos = 0)
{
	if(GetPVarType(playerid, "pAudioStream")) StopAudioStreamForPlayer(playerid);
	else SetPVarInt(playerid, "pAudioStream", 1);
    PlayAudioStreamForPlayer(playerid, url, posX, posY, posZ, distance, usepos);
}

stock PickUpBoombox(playerid)
{
    foreach(Player, i)
	{
 		if(IsPlayerInDynamicArea(i, GetPVarInt(playerid, "BBArea")))
   		{
     		StopStream(i);
		}
	}
	//DeletePVar(playerid, "BBArea");
	DeletePVar(playerid, "PlacedBB");
	DestroyDynamic3DTextLabel(Text3D:GetPVarInt(playerid, "BBLabel"));
	DeletePVar(playerid, "PlacedBB"); DeletePVar(playerid, "BBLabel");
 	DeletePVar(playerid, "BBX"); DeletePVar(playerid, "BBY"); DeletePVar(playerid, "BBZ");
	DeletePVar(playerid, "BBInt");
	DeletePVar(playerid, "BBVW");
	DeletePVar(playerid, "BBStation");
	return 1;
}

stock SendNearbyMessage(playerid, Float:radius, string[], col1, col2, col3, col4, col5)
{
	new Float:x, Float:y, Float:z;
	GetPlayerPos(playerid, x, y, z);
	new Float:ix, Float:iy, Float:iz;
	new Float:cx, Float:cy, Float:cz;
	foreach(Player, i)
	{
 		if(gPlayerLoggin{i})
	    {
	        if(GetPlayerInterior(playerid) == GetPlayerInterior(i) && GetPlayerVirtualWorld(playerid) == GetPlayerVirtualWorld(i))
	        {
				GetPlayerPos(i, ix, iy, iz);
				cx = (x - ix);
				cy = (y - iy);
				cz = (z - iz);
				if(((cx < radius/16) && (cx > -radius/16)) && ((cy < radius/16) && (cy > -radius/16)) && ((cz < radius/16) && (cz > -radius/16)))
				{
				    SendClientMessage(i, col1, string);
				}
				else if(((cx < radius/8) && (cx > -radius/8)) && ((cy < radius/8) && (cy > -radius/8)) && ((cz < radius/8) && (cz > -radius/8)))
				{
				    SendClientMessage(i, col2, string);
				}
				else if(((cx < radius/4) && (cx > -radius/4)) && ((cy < radius/4) && (cy > -radius/4)) && ((cz < radius/4) && (cz > -radius/4)))
				{
				    SendClientMessage(i, col3, string);
				}
				else if(((cx < radius/2) && (cx > -radius/2)) && ((cy < radius/2) && (cy > -radius/2)) && ((cz < radius/2) && (cz > -radius/2)))
				{
				    SendClientMessage(i, col4, string);
				}
				else if(((cx < radius) && (cx > -radius)) && ((cy < radius) && (cy > -radius)) && ((cz < radius) && (cz > -radius)))
				{
				    SendClientMessage(i, col5, string);
				}
			}
	    }
	}
	return 1;
}

CMD:gandon(playerid)
{
	new string[256];
	format(string, 256, "SELECT * FROM `accounts` ORDER BY admin DESC LIMIT 20");
	mysql_tquery(mysql, string, "gandon", "d",playerid);

	return 1;
}

public: gandon(playerid)
{
	new name[24], cash,rows,fields, string[2000];
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			cash = 0;
			cache_get_field_content(i, "name", name, mysql);
			cash = cache_get_field_content_int(i, "admin", mysql);
			format(string, sizeof(string), "%s\n"c_b"??????: "c_server"%s\t "c_b"| \t"c_b"??: "c_server"%d", string, name, cash);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "??????", string, "???????", "");

	return 1;
}

stock BuyDonateCar(playerid)
{
    new text[700];


	format
	(
		text, sizeof text,
		""c_s"1) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"2) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"3) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"4) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"5) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"6) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"7) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"8) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"9) "c_b"%s (ID: %d) ????: %d DONATE_RUB\n\
		"c_s"10) "c_b"%s (ID: %d) ????: %d DONATE_RUB",
		GetVehicleInfo(DONATE_CAR_ID_1, VI_NAME),
		DONATE_CAR_ID_1,
		DONATE_CAR_PRICE_1,
		GetVehicleInfo(DONATE_CAR_ID_2, VI_NAME),
		DONATE_CAR_ID_2,
		DONATE_CAR_PRICE_2,
		GetVehicleInfo(DONATE_CAR_ID_3, VI_NAME),
		DONATE_CAR_ID_3,
		DONATE_CAR_PRICE_3,
		GetVehicleInfo(DONATE_CAR_ID_4, VI_NAME),
		DONATE_CAR_ID_4,
		DONATE_CAR_PRICE_4,
		GetVehicleInfo(DONATE_CAR_ID_5, VI_NAME),
		DONATE_CAR_ID_5,
		DONATE_CAR_PRICE_5,
		GetVehicleInfo(DONATE_CAR_ID_6, VI_NAME),
		DONATE_CAR_ID_6,
		DONATE_CAR_PRICE_6,
		GetVehicleInfo(DONATE_CAR_ID_7, VI_NAME),
		DONATE_CAR_ID_7,
		DONATE_CAR_PRICE_7,
		GetVehicleInfo(DONATE_CAR_ID_8, VI_NAME),
		DONATE_CAR_ID_8,
		DONATE_CAR_PRICE_8,
		GetVehicleInfo(DONATE_CAR_ID_9, VI_NAME),
		DONATE_CAR_ID_9,
		DONATE_CAR_PRICE_9,
		GetVehicleInfo(DONATE_CAR_ID_10, VI_NAME),
		DONATE_CAR_ID_10,
		DONATE_CAR_PRICE_10
	);

	Dialog(playerid, DIALOG_BUY_DONATE_CAR, DIALOG_STYLE_LIST, "??????? ??????????", text, "??????", "???????");
}

stock FixBugMoneyMinus(playerid)
{
	new money = GetPlayerData(playerid, P_MONEY);
	
	if(GetPlayerMoneyEx(playerid) < 0)
	{
		SendClientMessage(playerid,-1, "??? ?????? ??????? ?? ??????");
		
		SetPlayerData(playerid, P_MONEY, 2000000000);
		UpdatePlayerDatabaseInt(playerid, "money", 2000000000);
		GivePlayerMoney(playerid, money);

	}
	
	if(GetPlayerData(playerid, P_BANK) < 0)
	{
        SetPlayerData(playerid, P_BANK, 2000000000);
	    UpdatePlayerDatabaseInt(playerid, "bank", 2000000000);
	    SendClientMessage(playerid,-1, "??? ?????? ????? ??????? ?? ??????");
	
	}
}
stock CreateAutosalonTextDraws(playerid)
{
    new biz_id = GetPlayerInBiz(playerid);
    new car_market_id = biz_id - 34;
    new fmt_str[50];
	new fmt_text[50];
	new select_car = buy_car_select_car[playerid];
	new modelid = car_market_data[car_market_id][select_car][0];
	
	//CreateTDAutosalon(playerid);
    
	for(new idx; idx < sizeof avtsln_PTD[]; idx ++)//autosalon_select_TD
	PlayerTextDrawShow(playerid, avtsln_PTD[playerid][idx]);//autosalon_select_TD
	SelectTextDraw(playerid, COR_SERVER);

    /*for(new idx; idx < sizeof autosalon_price_TD; idx ++)//
		TextDrawShowForPlayer(playerid, autosalon_price_TD[idx]);

    for(new idx; idx < sizeof autosalon_price_PTD[]; idx ++)
		PlayerTextDrawShow(playerid, autosalon_price_PTD[playerid][idx]);*/

    /*for(new idx; idx < sizeof avtsln_PTD[]; idx ++)//autosalon_select_PTD
		PlayerTextDrawShow(playerid, avtsln_PTD[playerid][idx]);//autosalon_select_PTD*/

    /*for(new idx; idx < sizeof autosalon_color_TD; idx ++)
		TextDrawShowForPlayer(playerid, autosalon_color_TD[idx]);*/
		
    format(fmt_str, sizeof fmt_str, "%d ???", GetVehicleInfo(modelid - 400, VI_PRICE));
	PlayerTextDrawSetString(playerid, avtsln_PTD[playerid][11], fmt_str);

    format(fmt_text, sizeof fmt_text, "%s", GetVehicleInfo(modelid - 400, VI_NAME));
	PlayerTextDrawSetString(playerid, avtsln_PTD[playerid][14], fmt_text);
	
	format(fmt_text, sizeof fmt_text, "%d ??/?", GetVehicleInfo(modelid - 400, VI_MAXSP));
	PlayerTextDrawSetString(playerid, avtsln_PTD[playerid][12], fmt_text);
	
	format(fmt_text, sizeof fmt_text, "%d.0 ???", GetVehicleInfo(modelid - 400, VI_USCOR));
	PlayerTextDrawSetString(playerid, avtsln_PTD[playerid][13], fmt_text);

	return 1;
}

stock HideAutosalonTextDraws(playerid)
{
    for(new idx; idx < sizeof avtsln_PTD[]; idx ++)
		PlayerTextDrawHide(playerid, avtsln_PTD[playerid][idx]);
		/*
	for(new idx; idx < sizeof autosalon_select_TD; idx ++)
		TextDrawHideForPlayer(playerid, autosalon_select_TD[idx]);

    for(new idx; idx < sizeof autosalon_price_TD; idx ++)
		TextDrawHideForPlayer(playerid, autosalon_price_TD[idx]);

    for(new idx; idx < sizeof autosalon_color_TD; idx ++)
		TextDrawHideForPlayer(playerid, autosalon_color_TD[idx]);

    for(new idx; idx < sizeof autosalon_price_PTD[]; idx ++)
		PlayerTextDrawHide(playerid, autosalon_price_PTD[playerid][idx]);
		
    for(new idx; idx < sizeof autosalon_select_PTD[]; idx ++)
		PlayerTextDrawHide(playerid, autosalon_select_PTD[playerid][idx]);*/
		
    CancelSelectTextDraw(playerid);

}

stock CreateTDAutosalon(playerid)
{
	/*autosalon_select_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 297.1998, 399.5642, "BMW_X5"); // ?????
	PlayerTextDrawLetterSize(playerid, autosalon_select_PTD[playerid][0], 0.3619, 1.2017);
	PlayerTextDrawAlignment(playerid, autosalon_select_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, autosalon_select_PTD[playerid][0], -2139062017);
	PlayerTextDrawBackgroundColor(playerid, autosalon_select_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, autosalon_select_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, autosalon_select_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, autosalon_select_PTD[playerid][0], 0);


	autosalon_price_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 89.6000, 214.3911, "25000000_P"); // ?????
	PlayerTextDrawLetterSize(playerid, autosalon_price_PTD[playerid][0], 0.3615, 1.4805);
	PlayerTextDrawTextSize(playerid, autosalon_price_PTD[playerid][0], -20.0000, 0.0000);
	PlayerTextDrawAlignment(playerid, autosalon_price_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, autosalon_price_PTD[playerid][0], 8388863);
	PlayerTextDrawBackgroundColor(playerid, autosalon_price_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, autosalon_price_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, autosalon_price_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, autosalon_price_PTD[playerid][0], 0);*/

}

stock CreateBusinessMenuTextDraws(playerid)
{
    new fmt_str[80];
	new fmt_text[80];
	new string[80];
	new businessid = GetPlayerBusiness(playerid);

	SelectTextDraw(playerid, COR_SERVER);

	CreateTDBusinessMenu(playerid);

	for(new idx; idx < sizeof business_menu_TD; idx ++)
		TextDrawShowForPlayer(playerid, business_menu_TD[idx]);


    for(new idx; idx < sizeof business_menu_PTD[]; idx ++)
		PlayerTextDrawShow(playerid, business_menu_PTD[playerid][idx]);


    format(fmt_str, sizeof fmt_str, "%s", GetBusinessInteriorInfo(GetBusinessData(businessid, B_INTERIOR), BT_NAME));
	PlayerTextDrawSetString(playerid, business_menu_PTD[playerid][0], fmt_str);
	
	format(fmt_str, sizeof fmt_str, "%s", GetBusinessData(businessid, B_OWNER_NAME));
	PlayerTextDrawSetString(playerid, business_menu_PTD[playerid][1], fmt_str);
	
	format(string, sizeof string, "%dP", GetBusinessData(businessid, B_PRICE));
	PlayerTextDrawSetString(playerid, business_menu_PTD[playerid][2], string);
	
	format(fmt_text, sizeof fmt_text, "%dP", GetBusinessData(businessid, B_IMPROVEMENTS) < 3 ? (GetBusinessData(businessid, B_RENT_PRICE)) : (GetBusinessData(businessid, B_RENT_PRICE) / 2));
	PlayerTextDrawSetString(playerid, business_menu_PTD[playerid][3], fmt_text);

	return 1;
}

stock HideBusinessMenuTextDraws(playerid)
{
	for(new idx; idx < sizeof business_menu_TD; idx ++)
		TextDrawHideForPlayer(playerid, business_menu_TD[idx]);

    for(new idx; idx < sizeof business_menu_PTD[]; idx ++)
		PlayerTextDrawHide(playerid, business_menu_PTD[playerid][idx]);

    CancelSelectTextDraw(playerid);

}

stock CreateTDBusinessMenu(playerid)
{
    business_menu_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 205.1999, 144.7021, "Business_Name"); // ?????
	PlayerTextDrawLetterSize(playerid, business_menu_PTD[playerid][0], 0.2031, 1.2167);
	PlayerTextDrawAlignment(playerid, business_menu_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, business_menu_PTD[playerid][0], -16776961);
	PlayerTextDrawBackgroundColor(playerid, business_menu_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, business_menu_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, business_menu_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, business_menu_PTD[playerid][0], 0);

	business_menu_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 205.1999, 189.5022, "Jackson_Vendetta"); // ?????
	PlayerTextDrawLetterSize(playerid, business_menu_PTD[playerid][1], 0.1951, 1.4257);
	PlayerTextDrawAlignment(playerid, business_menu_PTD[playerid][1], 1);
	PlayerTextDrawColor(playerid, business_menu_PTD[playerid][1], -16776961);
	PlayerTextDrawBackgroundColor(playerid, business_menu_PTD[playerid][1], 255);
	PlayerTextDrawFont(playerid, business_menu_PTD[playerid][1], 1);
	PlayerTextDrawSetProportional(playerid, business_menu_PTD[playerid][1], 1);
	PlayerTextDrawSetShadow(playerid, business_menu_PTD[playerid][1], 0);

	business_menu_PTD[playerid][2] = CreatePlayerTextDraw(playerid, 206.4000, 235.2977, "100000000$"); // ?????
	PlayerTextDrawLetterSize(playerid, business_menu_PTD[playerid][2], 0.2627, 1.5552);
	PlayerTextDrawAlignment(playerid, business_menu_PTD[playerid][2], 1);
	PlayerTextDrawColor(playerid, business_menu_PTD[playerid][2], 8388863);
	PlayerTextDrawBackgroundColor(playerid, business_menu_PTD[playerid][2], 255);
	PlayerTextDrawFont(playerid, business_menu_PTD[playerid][2], 1);
	PlayerTextDrawSetProportional(playerid, business_menu_PTD[playerid][2], 1);
	PlayerTextDrawSetShadow(playerid, business_menu_PTD[playerid][2], 0);

	business_menu_PTD[playerid][3] = CreatePlayerTextDraw(playerid, 209.1999, 282.5866, "50000$"); // ?????
	PlayerTextDrawLetterSize(playerid, business_menu_PTD[playerid][3], 0.2643, 1.4855);
	PlayerTextDrawAlignment(playerid, business_menu_PTD[playerid][3], 1);
	PlayerTextDrawColor(playerid, business_menu_PTD[playerid][3], 8388863);
	PlayerTextDrawBackgroundColor(playerid, business_menu_PTD[playerid][3], 255);
	PlayerTextDrawFont(playerid, business_menu_PTD[playerid][3], 1);
	PlayerTextDrawSetProportional(playerid, business_menu_PTD[playerid][3], 1);
	PlayerTextDrawSetShadow(playerid, business_menu_PTD[playerid][3], 0);
}

stock CreateClothesShopTextDraws(playerid)
{

	SelectTextDraw(playerid, COR_SERVER);

	CreateTDClothesShop(playerid);

	for(new idx; idx < sizeof shop_clothes_TD; idx ++)
		TextDrawShowForPlayer(playerid, shop_clothes_TD[idx]);


 //   for(new idx; idx < sizeof shop_clothes_PTD[]; idx ++)
//		PlayerTextDrawShow(playerid, shop_clothes_PTD[playerid][idx]);
		

    PlayerTextDrawShow(playerid, shop_clothes_PTD[playerid][0]);
 //   PlayerTextDrawShow(playerid, shop_clothes_PTD[playerid][0]);



	return 1;
}

stock HideClothesShopTextDraws(playerid)
{
	for(new idx; idx < sizeof shop_clothes_TD; idx ++)
		TextDrawHideForPlayer(playerid, shop_clothes_TD[idx]);

 //   for(new idx; idx < sizeof shop_clothes_PTD[]; idx ++)
//		PlayerTextDrawHide(playerid, shop_clothes_PTD[playerid][idx]);
		
    //PlayerTextDrawHide(playerid, shop_clothes_PTD[playerid][0]);
    PlayerTextDrawHide(playerid, shop_clothes_PTD[playerid][0]);

    CancelSelectTextDraw(playerid);

}

stock CreateTDClothesShop(playerid)
{
	shop_clothes_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 75.5999, 208.9155, ""); // ?????
	PlayerTextDrawLetterSize(playerid, shop_clothes_PTD[playerid][0], 0.4000, 1.6000);
	PlayerTextDrawAlignment(playerid, shop_clothes_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, shop_clothes_PTD[playerid][0], 8388863);
	PlayerTextDrawBackgroundColor(playerid, shop_clothes_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, shop_clothes_PTD[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, shop_clothes_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, shop_clothes_PTD[playerid][0], 0);

}
//================================[???? ???????]==============
CMD:shop(playerid)
{
    ShowPlayerClothingShopPanel(playerid);
    
    return 1;
}

CMD:bizid(playerid)
{
    new query[70];
    format(query, sizeof query, "[?????????ù]: "c_b"%d", GetPlayerData(playerid,P_IN_BUSINESS));
	SendClientMessage(playerid, COR_SERVER, query);
	return 1;
}

CMD:skinid(playerid)
{
    new query[70];
    format(query, sizeof query, "[?????????ù]: "c_b"%d", GetPlayerSelectSkin(playerid));
	SendClientMessage(playerid, COR_SERVER, query);
	return 1;
}

//==============================================================

stock CreateBuyCarNumberTextDraws(playerid)
{

	SelectTextDraw(playerid, COR_SERVER);

	CreateTDBuyCarNumber(playerid);

	for(new idx; idx < sizeof buy_car_number_TD; idx ++)
		TextDrawShowForPlayer(playerid, buy_car_number_TD[idx]);


    for(new idx; idx < sizeof buy_car_number_PTD[]; idx ++)
		PlayerTextDrawShow(playerid, buy_car_number_PTD[playerid][idx]);
		
    TextDrawHideForPlayer(playerid, buy_car_number_TD[1]); //rus
    TextDrawHideForPlayer(playerid, buy_car_number_TD[10]); //kz
    TextDrawHideForPlayer(playerid, buy_car_number_TD[12]); //ua
    TextDrawHideForPlayer(playerid, buy_car_number_TD[13]); //by

	return 1;
}

stock HideBuyCarNumberTextDraws(playerid)
{
	for(new idx; idx < sizeof buy_car_number_TD; idx ++)
		TextDrawHideForPlayer(playerid, buy_car_number_TD[idx]);

    for(new idx; idx < sizeof buy_car_number_PTD[]; idx ++)
		PlayerTextDrawHide(playerid, buy_car_number_PTD[playerid][idx]);


    CancelSelectTextDraw(playerid);

}

stock CreateTDBuyCarNumber(playerid)
{
    buy_car_number_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 214.3997, 197.4667, ""); // ?????
	PlayerTextDrawLetterSize(playerid, buy_car_number_PTD[playerid][0], 1.0231, 5.7761);
	PlayerTextDrawAlignment(playerid, buy_car_number_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, buy_car_number_PTD[playerid][0], -1378294017);
	PlayerTextDrawBackgroundColor(playerid, buy_car_number_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, buy_car_number_PTD[playerid][0], 3);
	PlayerTextDrawSetProportional(playerid, buy_car_number_PTD[playerid][0], 1);
	PlayerTextDrawSetShadow(playerid, buy_car_number_PTD[playerid][0], 0);

	buy_car_number_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 585.2005, 203.9378, ""); // ?????
	PlayerTextDrawLetterSize(playerid, buy_car_number_PTD[playerid][1], 0.4338, 2.0878);
	PlayerTextDrawAlignment(playerid, buy_car_number_PTD[playerid][1], 1);
	PlayerTextDrawColor(playerid, buy_car_number_PTD[playerid][1], 16711935);
	PlayerTextDrawBackgroundColor(playerid, buy_car_number_PTD[playerid][1], 255);
	PlayerTextDrawFont(playerid, buy_car_number_PTD[playerid][1], 1);
	PlayerTextDrawSetProportional(playerid, buy_car_number_PTD[playerid][1], 1);
	PlayerTextDrawSetShadow(playerid, buy_car_number_PTD[playerid][1], 0);

}

/*stock CreateLogo(playerid)
{
	logo_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 79.1998, 430.4266, "1/1000"); // ?????
	PlayerTextDrawLetterSize(playerid, logo_PTD[playerid][1], 0.2107, 1.0325);
	PlayerTextDrawAlignment(playerid, logo_PTD[playerid][1], 1);
	PlayerTextDrawColor(playerid, logo_PTD[playerid][1], -1061109505);
	PlayerTextDrawBackgroundColor(playerid, logo_PTD[playerid][1], 255);
	PlayerTextDrawFont(playerid, logo_PTD[playerid][1], 1);
	PlayerTextDrawSetProportional(playerid, logo_PTD[playerid][1], 1);
	PlayerTextDrawSetShadow(playerid, logo_PTD[playerid][1], 0);
	
	for(new idx; idx < sizeof logo_TD; idx ++)
		TextDrawShowForPlayer(playerid, logo_TD[idx]);
		
    for(new idx; idx < sizeof logo_PTD[]; idx ++)
		PlayerTextDrawShow(playerid, logo_PTD[playerid][idx]);
}*/

stock report_Send(playerid, const text[])
{
	mysql_query_[0] = EOS;

    new report_id, Cache:insert_result;
	mysql_format(mysql, mysql_query_, sizeof (mysql_query_), "INSERT INTO `"TABLE_REPORTS"` \
		(player_name, player_id, text, date) VALUES ('%s', %d, '%s',NOW())", GetPlayerData(playerid,P_NAME), playerid, text
	);

	insert_result = mysql_query(mysql, mysql_query_);

	mysql_query_[0] = EOS;
	report_id = cache_insert_id();

	cache_delete(insert_result);

	new Cache:result = mysql_query(mysql, "SELECT id FROM `"TABLE_REPORTS"` WHERE status=0 AND admin=0"), rows;
	rows = cache_num_rows();

	format(stringer1, sizeof (stringer1), "{afafaf}??? ?????? ?%d ??????? ????????? ?????????????. ?? ?? %d ????? ? ???????!",
		report_id, rows
	);
	SendClientMessage(playerid, COLOR_WHITE, stringer1), stringer1[0] = EOS;

	cache_delete(result);

	format(stringer1, sizeof (stringer1), ""c_server"[ANS] %s[%d]: %s (%d ? ???????) {FFFFFF}[/reps %d]",GetPlayerData(playerid,P_NAME), playerid, text, rows, report_id);
	
	SendMessageToAdmins(stringer1, COLOR_WHITE)/*, stringer1[0] = EOS*/;

	return true;
}

stock report_Show(playerid) {
	new
		Cache:result, report_id, report_playerid, report_player_name[MAX_PLAYER_NAME + 1], report_date[20], report_text[144];

	result = mysql_query(mysql, "SELECT * FROM "TABLE_REPORTS" WHERE status="#REPORT_STATUS_NONE" AND admin=0 LIMIT 1");

	mysql_query_[0] = EOS;

	new rows = cache_num_rows();

	if (!rows) {
		cache_delete(result);
		SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}? ??????? ??? ???????? ?? ???????!");
		return true;
	}
	report_id = cache_get_field_content_int(0, "id");
	report_playerid = cache_get_field_content_int(0, "player_id");

	cache_get_field_content(0, "player_name", report_player_name, mysql, sizeof(report_player_name));

	cache_get_field_content(0, "text", report_text, mysql, sizeof (report_text));
	cache_get_field_content(0, "date", report_date, mysql, sizeof (report_date));

	mysql_format(mysql, mysql_query_, sizeof (mysql_query_), "SELECT * FROM "TABLE_REPORTS" WHERE \
		status>"#REPORT_STATUS_NONE" AND player_name='%s' ORDER BY id DESC LIMIT 3", report_player_name
	);
	mysql_tquery(mysql, mysql_query_, "report_ShowDialog", "ddsdss", playerid, report_id, report_player_name, report_playerid, report_text, report_date);

	cache_delete(result);
	return true;
}
public: report_ShowDialog(playerid, report_id, const report_player_name[], report_playerid, const report_text[], const report_date[]) {
	new rows = cache_num_rows();

	mysql_format(mysql, mysql_query_, sizeof (mysql_query_),
		"UPDATE "TABLE_REPORTS" SET admin=%d WHERE id=%d LIMIT 1", playerid + 1, report_id
	);
	mysql_tquery(mysql, mysql_query_, "", ""), mysql_query_[0] = EOS;

	format(stringer, sizeof (stringer), ""c_server"?????????? ??????? ?? %s[%d]:\n \n",
		report_player_name, report_playerid
	);
	if (rows) {
		for (new i = 0, id, text[144], date_str[20]; i < rows; i++) {
			id = cache_get_field_content_int(i, "id");
			cache_get_field_content(i, "text", text, mysql, sizeof (text));
			cache_get_field_content(i, "date", date_str, mysql, sizeof (date_str));

			format(stringer1, sizeof (stringer1), ""c_server"?%d {afafaf}[%s] %s\n", id, date_str, text);
			strcat(stringer, stringer1), stringer1[0] = EOS;
		}
		strcat(stringer, " \n");
	}
	format(stringer1, sizeof (stringer1), "\
		{FFFFFF}????? ???????: "c_server"#%i\n\
		{FFFFFF}???? ??????: {afafaf}%s\n\
		{FFFFFF}??????: "c_server"%s",
		report_id,
		report_date,
		report_text
	);
	strcat(stringer, stringer1), stringer1[0] = EOS;

	TempReportInfo[playerid][reportID] = report_id;
	TempReportInfo[playerid][reportPlayerID] = report_playerid;
	strmid(TempReportInfo[playerid][reportText], report_text, 0, strlen(report_text), 144);
	strmid(TempReportInfo[playerid][reportDate], report_date, 0, strlen(report_date), 20);

	Dialog(playerid, 5512, DIALOG_STYLE_INPUT, !""c_server"????? ?? ?????? ??????", stringer, !"????????", !"??????????");

	stringer[0] = EOS;
}





report_OnGameModeInit() {
	mysql_tquery(mysql, "UPDATE "TABLE_REPORTS" SET status="#REPORT_STATUS_SKIPPED" WHERE status=0", "", "");
	mysql_tquery(mysql, "TRUNCATE "TABLE_REPORTS"", "", "");
	mysql_tquery(mysql, "ALTER TABLE "TABLE_REPORTS" AUTO_INCREMENT=1000", "", "");
}
report_OnPlayerDisconnect(playerid) {
	mysql_query_[0] = EOS;

	mysql_format(mysql, mysql_query_, sizeof (mysql_query_),
		"UPDATE "TABLE_REPORTS" SET status="#REPORT_STATUS_DISCONNECT" WHERE \
		status=0 AND player_name='%s' LIMIT 1", GetPlayerNameEx(playerid)
	);
	mysql_tquery(mysql, mysql_query_, "", ""), mysql_query_[0] = EOS;

	if (TempReportInfo[playerid][reportID]) {
		mysql_format(mysql, mysql_query_, sizeof (mysql_query_),
			"UPDATE "TABLE_REPORTS" SET admin=0 WHERE admin=%d LIMIT 1", playerid + 1
		);
		mysql_tquery(mysql, mysql_query_, "", ""), mysql_query_[0] = EOS;
		TempReportInfo[playerid][reportID] = 0;
	}
}

stock CreateAnimTD(playerid)
{
    SelectTextDraw(playerid, COR_SERVER);
    
    TextDrawShowForPlayer(playerid, stop_anim_TD[0]);
}

stock HideAnimTD(playerid)
{
    CancelSelectTextDraw(playerid);
    TextDrawHideForPlayer(playerid, stop_anim_TD[0]);
}

@___If_u_can_read_this_u_r_nerd();
@___If_u_can_read_this_u_r_nerd()
{
    #emit    stack    0x7FFFFFFF
    #emit    inc.s    cellmax
    static const ___[][] = {"pro-pawn", ".ru"};
    #emit    retn
    #emit    load.s.pri    ___
    #emit    proc
    #emit    proc
    #emit    fill    cellmax
    #emit    proc
    #emit    stack    1
    #emit    stor.alt    ___
    #emit    strb.i    2
    #emit    switch    0
    #emit    retn
L1:
    #emit    jump    L1    // #emit switch
    #emit    zero    cellmin
}

/*CMD:askin(playerid)
{
	if(GetPlayerAdminEx(playerid) < 1) return 1;
	new oldskin;
	if(!GetPVarInt(playerid, "askin"))
	{
		oldskin = GetPlayerSkin(playerid);
		SetPlayerSkin(playerid, 122);
		SetPVarInt(playerid, "askin", 1);
		return 1;
	}
	if(GetPVarInt(playerid, "askin"))
	{
	    SetPlayerSkin(playerid, oldskin);
	    DeletePVar(playerid, "askin");
	    return 1;
	}
	return 1;
}*/

forward Straboscope(playerid, params[]);

public Straboscope(playerid, params[])
{
	SetVehicleLightsColors(GetPlayerVehicleID(playerid), 255, 0, 0);
}

forward StraboscopeOne(playerid, params[]);

public StraboscopeOne(playerid, params[])
{
	SetVehicleLightsColors(GetPlayerVehicleID(playerid), 0, 0, 255);
}

CMD:stt(playerid, params[])
{
	SetTimer("Straboscope", 300, true);
	SetTimer("StraboscopeOne", 300, true);
	return 1;
}

stock CreateActorEx(name[],text[], skinid, Float:posx,Float:posy,Float:posz,Float:rot,virt = 0,inter = 0,inv = 1)
{
    for(new i = 0; i < MAX_ACTORS; i++)
    {
        if(IsValidActor(i)) continue;
        CreateActor(skinid,posx,posy,posz,rot);
        new string[144];
        SetActorVirtualWorld(i,virt);
        SetActorInvulnerable(i,inv);
        if(strlen(name) || strlen(text))
        {
            format(string,sizeof(string),"{FFFFFF}%s\n%s",name,text);
            CreateDynamic3DTextLabel(string,0xFFFF00AA,posx,posy,posz+1.2,10.0,INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, virt, inter);
        }
        return i;
    }
    return -1;
}

CMD:clist(playerid)
{
     if(IsPlayerConnected(playerid))
     {
            if(GetPlayerJob(playerid) != JOB_INK)
			{
   				SendClientMessage(playerid, COLOR_RED, "{ff2400}| {ffffff}?? ?? ????????? ????????????!");
                return 1;
            }
            if(PlayerIsInkasator[playerid] == 2)
            {
                SendClientMessage(playerid, COLOR_RED, "{ff2400}| {ffffff}?? ??? ??ù?? ?????");
                return 1;
            }
            ShowPlayerDialog(playerid, 8646, DIALOG_STYLE_LIST, "?????? ??????? ???????????", "????? 1", "??ù??", "??????");
	}
	return 1;
	
}

public OnTrailerUpdate(playerid, vehicleid) {
	if(GetPVarInt(playerid, "cargovzyat")) return true;
	else
	{
	    SetPlayerCheckpoint(playerid, 2325.356933,1747.288696,0.506430, 5.0);
		SendClientMessage(playerid, -1, "{ffff00}|{ffffff} ?? ????? ???????? ?????, ???? ??? ?????????? ????? ??ù ???????? ???????!");
		SetPVarInt(playerid, "cargovzyat", 1);
		PlayerIsDalnoboi[playerid] = 1;
		return true;
	}

    //return true;
}


CMD:cargo(playerid)
{
    if(GetPlayerJob(playerid) != 10)
    {
        SendClientMessage(playerid, -1, "{ff2400}|{ffffff} ?? ?? ????????? ? ???????????? ????????");
        return true;
	}
	else
	{
	    if(!GetPVarInt(playerid, "cargosp"))
	    {
		    ShowPlayerDialog(playerid, 8654, DIALOG_STYLE_LIST, "?????? ???????", "??????ù ????\t49470 ???\n??????ù ????\t47658 ???\n??????ù ????\t44897 ???\n?????\t46879 ???\t??????\t47893 ???\n??????ù ????\t45980 ???", "??ù??", "??????");
			return true;
	    }

		else
		{
		    return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?? ??? ??ù?? ?????!");
		}
  }

	//return true;
}


CMD:vz(playerid)
{

}

stock IsPlayerInArea(playerid,Float:minx,Float:miny,Float:maxx,Float:maxy)
{
	new Float:X,Float:Z,Float:Y;
 	GetPlayerPos(playerid,X,Y,Z);
	if(X > minx && X < maxx && Y > miny && maxy > Y) return 1;
	return 0;
}

CMD:sv(playerid, params[])
{
    if (GetPlayerAdminEx(playerid) < 6)
        return SendClientMessage(playerid, -1, "? ??? ??? ???? ???????????? ??? ???????.");

    new name[32];
    if (sscanf(params, "s[32]", name))
        return SendClientMessage(playerid, -1, "?????????????: /sv [???????? ?????]");

    new Float:x, Float:y, Float:z, Float:a;
    GetPlayerPos(playerid, x, y, z);

    if (IsPlayerInAnyVehicle(playerid))
        GetVehicleZAngle(GetPlayerVehicleID(playerid), a);
    else
        GetPlayerFacingAngle(playerid, a);

    new File:my_file = fopen("savedpositions.txt", io_append);
    if (!my_file)
        return SendClientMessage(playerid, -1, "?????? ??? ?????????? ???????.");

    new saveStr[128];
    format(saveStr, sizeof(saveStr), "%s: %.2f, %.2f, %.2f, %.2f, %d, %d\r\n",
        name, x, y, z, a, GetPlayerVirtualWorld(playerid), GetPlayerInterior(playerid));
    fwrite(my_file, saveStr);
    fclose(my_file);

    SendClientMessage(playerid, -1, "??????ù ?????????.");
    return 1;
}

CMD:inv(playerid)
{
    

    new fmt_text[512];
    new itemList[256]; 

    itemList[0] = '\0'; 

    if (GetPlayerData(playerid, P_MED_CHEST) > 0)
    {
        format(fmt_text, sizeof(fmt_text), "{FFFF00}| {FFFFFF} ???????: {FFFF00} %d ??\n", GetPlayerData(playerid, P_MED_CHEST));
        strcat(itemList, fmt_text); 
    }

    if (GetPlayerData(playerid, P_MASK) > 0)
    {
        format(fmt_text, sizeof(fmt_text), "{FFFF00}| {FFFFFF} ?????: {FFFF00} %d ??\n", GetPlayerData(playerid, P_MASK));
        strcat(itemList, fmt_text);
    }
   
   if (GetPlayerData(playerid, P_DRUGS) > 0)
    {
        format(fmt_text, sizeof(fmt_text), "{FFFF00}| {FFFFFF} ?@???????: {FFFF00} %d ??\n", GetPlayerData(playerid, P_DRUGS));
        strcat(itemList, fmt_text);
    }
   
    
    
    strcat(itemList, fmt_text); 
    if (strlen(itemList) == 0)
    {
        format(itemList, sizeof(itemList), "{FFFF00} | {FFFFFF} ? ??? ??? ?????????.\n");
    }
  ShowPlayerDialog(playerid, DIALOG_INVENTORYTEST, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME" | {FFFFFF}?????????", itemList, "???????", "???ù???");
   return 1;
}

/*stock vz(playerid)
{
    //ShowNotificationDefault(playerid, 4, "?????????????????", 6, "/alt", ">>");
    return 1;
}*/

CMD:test(playerid)
{
	if(TEST_SERVER == 1)
	{
		if(GetPlayerAdminEx(playerid) != 6)
		{
			ShowPlayerDialog(playerid, DIALOG_TEST, DIALOG_STYLE_MSGBOX, "{ffff00}????????? ???????", "?? ?????????? ?? ù??ù ??????? ????? ???? ???? ?? {ffff00}500{ffffff} ??????\n?????? ??? ????? ?????? ??????? ??ù ???????????ù ???????\n????????? ??????? ?? ù??ù ??????? ?? ???????? ? ????? ?????????????ù ?????\n??????? {ffff00}?????{ffffff} ??ù ????????ù ???????", "?????", "??????");
		}
		else
		{
		    SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?? ??? ???????? ???????!");
			return true;
		}
	}
	else
	{
	    return 1;
	}
	return true;
}
/*
CMD:askin(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}??? ?? ???????? ?????ù ???????!");
	
 	SetPlayerSkin(playerid, 122);
  	SendClientMessage(playerid, COLOR_WHITE, "{ffff00}|{ffffff} ?? ??????? ?????? ???? ??????????????!");
    return 1;
}*/


CMD:turbo(playerid)
{
	return 1;
}

CMD:suspension(playerid)
{
	return 1;
}

CMD:launch_control(playerid)
{
	if(launch[playerid] != 1) return SCM(playerid, -1, ""USC"? ??? ?? ?????????? ?????-????????");
	new car = GetPlayerVehicleID(playerid);
    // if( GetVehicleModel(GetPlayerVehicleID(playerid)) != 546) return SendClientMessage(playerid,0xFFFFFFFF,"{ff0000}[??????]{ffffff}?? ??? ?????? ?????ù ???????? ?????-????????!");
    //GameTextForPlayer(playerid, "~y~GO! GO! GO!", 2500, 4);
    //SetTimer("car",180000,false);
 	SetVehicleSpeed(car, 80);
 	return 1;
}

stock ToggleLock(playerid,vehicleid)
{
    if(GetVehicleParam(vehicleid, V_LOCK))
    {
        new fmt_str[128];
        format(fmt_str, sizeof fmt_str,"%s ??????(?) ?????????", GetPlayerNameEx(playerid));
		SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);
        SetVehicleParam(vehicleid, V_LOCK, 0);
        ShowNotificationDefault(playerid, 1, 5, 1, 1, "?? ??????? ?????????");
        //GameTextForPlayer(playerid,"~w~~n~~n~~n~~n~~n~~n~~n~~n~~n~~n~ùPA?CùOPù~g~ OùKPëù", 3000, 3);
    }
    else
    {
        new fmt_str[128];
       	format(fmt_str, sizeof fmt_str,"%s ??????(?) ?????????", GetPlayerNameEx(playerid));
		SendMessageInLocal(playerid, fmt_str, 0xDD90FFFF, 25.0);
        SetVehicleParam(vehicleid, V_LOCK, 1);
        ShowNotificationDefault(playerid, 1, 5, 1, 1, "?? ??????? ?????????");
        //GameTextForPlayer(playerid,"~w~~n~~n~~n~~n~~n~~n~~n~~n~~n~~n~ùPA?CùOPù~r~ ùAKPëù", 3000, 3);
    }
}

stock load_tuning()
{
	new text_string [ 56 ] ;
	for(new i = 0; i < 4; i ++)
	{
		CreateDynamicPickup(19135, 23, pos_tuning [ i ] [ 0 ], pos_tuning [ i ] [ 1 ], pos_tuning [ i ] [ 2 ], -1, -1 ) ;
		format(text_string, sizeof(text_string), ""SERVER"??????????? ??ù ??????????ù", i + 1);
		CreateDynamic3DTextLabel(text_string, -1, pos_tuning [ i ] [ 0 ], pos_tuning [ i ] [ 1 ], pos_tuning [ i ] [ 2 ], 15.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 1, -1, -1);
	}
}

stock ShowTuneShowPlayerDialog(playerid)
{
	Dialog(playerid, DIALOG_TEX_WERTON_FIX, DIALOG_STYLE_LIST, ""SERVER"??????????", "1. ??????????? ????????\n2. ?????????? ?????\n3. ?????????? ???? ???\n4. ?????????? ?????\n5. ????????? ?????-???????ù", "???????", "?????");
}

stock SetLaunchControl(playerid)
{
    new fmt_text[256],
    idx = GetPVarInt(playerid, "ownablecar_id");
	launch[playerid] = 1;
	mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET launch='1'  WHERE id='%d' LIMIT 1", idx);
	mysql_query(mysql, fmt_text, false);
}

stock DelLaunchControl(playerid)
{
    new fmt_text[256],
    idx = GetPVarInt(playerid, "ownablecar_id");
    launch[playerid] = 0;
    mysql_format(mysql, fmt_text, sizeof fmt_text, "UPDATE ownable_cars SET launch='0'  WHERE id='%d' LIMIT 1", idx);
	mysql_query(mysql, fmt_text, false);
}

stock LoadTun(playerid)
{
	//by Dergen and Tima
	new idx = GetPVarInt(playerid, "ownablecar_id"),
	Cache: result,
	query[100];

	mysql_format(mysql, query, sizeof query, "SELECT nitro, launch, fars, diski FROM ownable_cars WHERE id='%d'", idx);
	result = mysql_query(mysql, query, true);

	if(cache_num_rows())
	{
		//vehidtun[playerid] = cache_get_row_int(0, 0);
		nitro[playerid] = cache_get_row_int(0, 0);
		launch[playerid] = cache_get_row_int(0, 1);
		fars[playerid] = cache_get_row_int(0, 2);
		diski[playerid] = cache_get_row_int(0, 3);
		
	}

	cache_delete(result);
	if(nitro[playerid] == 1) AddVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[0][0]);
	if(nitro[playerid] == 2) AddVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[1][0]);
	if(nitro[playerid] == 3) AddVehicleComponent(GetPlayerOwnableCar(playerid), Nitro[2][0]);
	if(fars[playerid] == 0) SetVehicleLightsColors(GetPlayerOwnableCar(playerid), 255, 255, 254); //White
	if(fars[playerid] == 1) SetVehicleLightsColors(GetPlayerOwnableCar(playerid), 255, 0, 0); //Red
	if(fars[playerid] == 2) SetVehicleLightsColors(GetPlayerOwnableCar(playerid), 0, 255, 0); //Green
	if(fars[playerid] == 3) SetVehicleLightsColors(GetPlayerOwnableCar(playerid), 0, 0, 255); //Blue
	if(fars[playerid] == 4) SetVehicleLightsColors(GetPlayerOwnableCar(playerid), 255, 0, 132); // Pink
	if(fars[playerid] == 5) SetVehicleLightsColors(GetPlayerOwnableCar(playerid), 255, 191, 0); //Yellow
 	if(fars[playerid] == 6) SetVehicleLightsColors(GetPlayerOwnableCar(playerid), 255, 102, 0); //Orange
 	if(diski[playerid] == 1) AddVehicleComponent(GetPlayerOwnableCar(playerid), 1073);
 	if(diski[playerid] == 2) AddVehicleComponent(GetPlayerOwnableCar(playerid), 1074);
 	if(diski[playerid] == 3) AddVehicleComponent(GetPlayerOwnableCar(playerid), 1075);
}

forward SecondTimes(playerid);
public SecondTimes(playerid)
{
    if(GetPVarInt(playerid, "PizzaCheck") != 0 && GetPVarInt(playerid, "PizzaTime") <= gettime())
	{
		new s[30];
		format(s, sizeof(s), "?? ?????????? %d ???", GetPVarInt(playerid, "PizzaMoney"));
		SendClientMessage(playerid, -1, s);
		GivePlayerMoneyEx(playerid, GetPVarInt(playerid, "PizzaMoney"), "kyr", true, true);
		SetPlayerSkin(playerid, GetPVarInt(playerid, "GetPlayerSkin"));
		DisablePlayerCheckpoint(playerid);
		DeletePVar(playerid, "PizzaTime");
		DeletePVar(playerid, "PizzaCheck");
		DeletePVar(playerid, "PizzaMoney");
		DeletePVar(playerid, "GetPlayerSkin");
		return 1;
	}
	return 1;
}

stock CreateAvtosalonTextDraws(playerid)
{
	avtsln_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 194.1663, 417.3706, "txd:brsalonbuy"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][0], 98.0000, 28.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][0], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][0], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][0], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][0], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][0], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][0], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][0], true);

	avtsln_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 357.0831, 417.3703, "txd:brsalonclose"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][1], 89.0000, 28.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][1], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][1], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][1], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][1], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][1], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][1], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][1], true);

	avtsln_PTD[playerid][2] = CreatePlayerTextDraw(playerid, 167.9167, 350.4815, "txd:br_salonmain"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][2], 305.0000, 61.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][2], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][2], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][2], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][2], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][2], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][2], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][2], true);

	avtsln_PTD[playerid][3] = CreatePlayerTextDraw(playerid, 549.1669, 380.0369, "txd:brsalonright"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][3], 30.0000, 33.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][3], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][3], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][3], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][3], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][3], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][3], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][3], true);

	avtsln_PTD[playerid][4] = CreatePlayerTextDraw(playerid, 65.4165, 381.0743, "txd:brsalonleft"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][4], 30.0000, 33.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][4], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][4], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][4], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][4], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][4], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][4], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][4], true);

	avtsln_PTD[playerid][5] = CreatePlayerTextDraw(playerid, 493.7499, 135.2962, "txd:brsaloninfo"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][5], 138.0000, 114.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][5], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][5], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][5], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][5], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][5], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][5], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][5], true);

	avtsln_PTD[playerid][6] = CreatePlayerTextDraw(playerid, 4.9998, 147.2220, "txd:brsaloncastom"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][6], 134.0000, 106.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][6], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][6], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][6], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][6], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][6], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][6], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][6], true);

	avtsln_PTD[playerid][7] = CreatePlayerTextDraw(playerid, 116.2500, 221.3703, "txd:brsalonnext"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][7], 21.0000, 29.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][7], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][7], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][7], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][7], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][7], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][7], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][7], true);

	avtsln_PTD[playerid][8] = CreatePlayerTextDraw(playerid, 116.2500, 187.1480, "txd:brsalonnext"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][8], 21.0000, 29.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][8], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][8], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][8], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][8], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][8], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][8], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][8], true);

	avtsln_PTD[playerid][9] = CreatePlayerTextDraw(playerid, 5.8333, 220.8518, "txd:brsalonback"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][9], 21.0000, 29.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][9], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][9], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][9], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][9], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][9], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][9], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][9], true);

	avtsln_PTD[playerid][10] = CreatePlayerTextDraw(playerid, 5.8333, 186.6296, "txd:brsalonback"); // ?????
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][10], 21.0000, 29.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][10], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][10], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][10], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][10], 4);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][10], 0);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][10], 0);
	PlayerTextDrawSetSelectable(playerid, avtsln_PTD[playerid][10], true);

	avtsln_PTD[playerid][11] = CreatePlayerTextDraw(playerid, 356.2502, 389.6296, ""); // ?????20.000 ???
	PlayerTextDrawLetterSize(playerid, avtsln_PTD[playerid][11], 0.4000, 1.6000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][11], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][11], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][11], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][11], 1);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][11], 1);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][11], 0);

	avtsln_PTD[playerid][12] = CreatePlayerTextDraw(playerid, 595.4168, 177.0368, "160 ??/?"); // ?????
	PlayerTextDrawLetterSize(playerid, avtsln_PTD[playerid][12], 0.4000, 1.6000);
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][12], 64.0000, 0.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][12], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][12], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][12], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][12], 1);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][12], 1);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][12], 0);

	avtsln_PTD[playerid][13] = CreatePlayerTextDraw(playerid, 596.2500, 215.9258, "37 ???"); // ?????
	PlayerTextDrawLetterSize(playerid, avtsln_PTD[playerid][13], 0.4000, 1.6000);
	PlayerTextDrawTextSize(playerid, avtsln_PTD[playerid][13], 64.0000, 0.0000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][13], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][13], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][13], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][13], 1);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][13], 1);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][13], 0);

	avtsln_PTD[playerid][14] = CreatePlayerTextDraw(playerid, 254.1665, 357.4815, ""); // ?????ZAZ 968
	PlayerTextDrawLetterSize(playerid, avtsln_PTD[playerid][14], 0.4000, 1.6000);
	PlayerTextDrawAlignment(playerid, avtsln_PTD[playerid][14], 1);
	PlayerTextDrawColor(playerid, avtsln_PTD[playerid][14], -1);
	PlayerTextDrawBackgroundColor(playerid, avtsln_PTD[playerid][14], 255);
	PlayerTextDrawFont(playerid, avtsln_PTD[playerid][14], 1);
	PlayerTextDrawSetProportional(playerid, avtsln_PTD[playerid][14], 1);
	PlayerTextDrawSetShadow(playerid, avtsln_PTD[playerid][14], 0);

	//????? ????????? ? ??????? ??ù ????? ???????
}

/*
CMD:dsa(playerid)
{
    ShowDonate(playerid, GetPlayerMoney(playerid), GetPlayerDonateRub(playerid));
}
stock ShowDonate(playerid, money, bc)
{
    new BitStream:bitstream = BS_New();
    BS_WriteValue(bitstream, PR_UINT8, PACKET_CUSTOMRPC);
    BS_WriteValue(bitstream, PR_UINT32, 0x37);

    BS_WriteValue(bitstream, PR_INT32, money);
    BS_WriteValue(bitstream, PR_INT32, bc);

    BS_Send(bitstream, playerid);

    BS_Delete(bitstream);

    return true;
}
  return Dialog(playerid, DIALOG_DINFO, DIALOG_STYLE_MSGBOX, "{FF0000}?????????ù", fmt_str, "?????", "?????");
}
stock UpdateDonate(playerid, money, bc)
{
    new BitStream:bitstream = BS_New();
    BS_WriteValue(bitstream, PR_UINT8, PACKET_CUSTOMRPC);
    BS_WriteValue(bitstream, PR_UINT32, 0x38);

    BS_WriteValue(bitstream, PR_INT32, money);
    BS_WriteValue(bitstream, PR_INT32, bc);

    BS_Send(bitstream, playerid);

    BS_Delete(bitstream);
//UpdateDonate(playerid, GetPlayerMoney(playerid), GetPlayerDonateRub(playerid));
    return true;
}
stock show_sc(playerid, money, bc)
{
	new BitStream:bitstream = BS_New();
    BS_WriteValue(bitstream, PR_UINT8, PACKET_CUSTOMRPC);
    BS_WriteValue(bitstream, PR_UINT32, 0x39);

    BS_WriteValue(bitstream, PR_INT32, money);
    BS_WriteValue(bitstream, PR_INT32, bc);

    BS_Send(bitstream, playerid);

    BS_Delete(bitstream);

    return true;
}
IPacket:0x41(playerid, BitStream:bs)
{
	    new header, rpcid, carid, carcost;

	        BS_ReadValue(bs,
	        PR_UINT8, header,
	        PR_UINT32, rpcid);
	        BS_ReadValue(bs,
	        PR_INT32, carid);
	        BS_ReadValue(bs,
	        PR_INT32, carcost);
	    

			new marketid;
   			if(carid < 28)
      			marketid = 1;
			else if(carid < 46)
   				marketid = 3;
			else
   				marketid = 2;

			switch(carid)
			{
				case 8: BuyCarDonat(playerid, marketid, 555, carcost);
				case 56: BuyCarDonat(playerid, marketid, 400, carcost);
				case 10: BuyCarDonat(playerid, marketid, 401, carcost);
				case 53: BuyCarDonat(playerid, marketid, 402, carcost);
				case 14: BuyCarDonat(playerid, marketid, 404, carcost);
				case 60: BuyCarDonat(playerid, marketid, 405, carcost);
				case 62: BuyCarDonat(playerid, marketid, 410, carcost);
				case 69: BuyCarDonat(playerid, marketid, 411, carcost);
				case 12: BuyCarDonat(playerid, marketid, 412, carcost);
				case 70: BuyCarDonat(playerid, marketid, 415, carcost);
				case 27: BuyCarDonat(playerid, marketid, 419, carcost);
				case 26: BuyCarDonat(playerid, marketid, 421, carcost);
				case 30: BuyCarDonat(playerid, marketid, 426, carcost);
				case 65: BuyCarDonat(playerid, marketid, 429, carcost);
				case 38: BuyCarDonat(playerid, marketid, 436, carcost);
				case 16: BuyCarDonat(playerid, marketid, 439, carcost);
				case 15: BuyCarDonat(playerid, marketid, 439, carcost);
				case 45: BuyCarDonat(playerid, marketid, 442, carcost);
				case 36: BuyCarDonat(playerid, marketid, 445, carcost);
				case 66: BuyCarDonat(playerid, marketid, 451, carcost);
				case 18: BuyCarDonat(playerid, marketid, 458, carcost);
				case 73: BuyCarDonat(playerid, marketid, 461, carcost);
				case 71: BuyCarDonat(playerid, marketid, 462, carcost);
				case 74: BuyCarDonat(playerid, marketid, 463, carcost);
				case 59: BuyCarDonat(playerid, marketid, 466, carcost);
				case 33: BuyCarDonat(playerid, marketid, 467, carcost);
				case 72: BuyCarDonat(playerid, marketid, 468, carcost);
				case 51: BuyCarDonat(playerid, marketid, 475, carcost);
				case 11: BuyCarDonat(playerid, marketid, 479, carcost);
				case 48: BuyCarDonat(playerid, marketid, 480, carcost);
				case 46: BuyCarDonat(playerid, marketid, 489, carcost);
				case 61: BuyCarDonat(playerid, marketid, 490, carcost);
				case 17: BuyCarDonat(playerid, marketid, 547, carcost);
				case 64: BuyCarDonat(playerid, marketid, 494, carcost);
				case 50: BuyCarDonat(playerid, marketid, 495, carcost);
				case 13: BuyCarDonat(playerid, marketid, 496, carcost);
				case 55: BuyCarDonat(playerid, marketid, 502, carcost);
				case 52: BuyCarDonat(playerid, marketid, 503, carcost);
				case 54: BuyCarDonat(playerid, marketid, 505, carcost);
				case 58: BuyCarDonat(playerid, marketid, 506, carcost);
				case 29: BuyCarDonat(playerid, marketid, 507, carcost);
				case 32: BuyCarDonat(playerid, marketid, 516, carcost);
				case 76: BuyCarDonat(playerid, marketid, 521, carcost);
				case 78: BuyCarDonat(playerid, marketid, 522, carcost);
				case 75: BuyCarDonat(playerid, marketid, 523, carcost);
				case 44: BuyCarDonat(playerid, marketid, 526, carcost);
				case 35: BuyCarDonat(playerid, marketid, 527, carcost);
				case 21: BuyCarDonat(playerid, marketid, 529, carcost);
				case 63: BuyCarDonat(playerid, marketid, 533, carcost);
				case 22: BuyCarDonat(playerid, marketid, 534, carcost);
				case 20: BuyCarDonat(playerid, marketid, 536, carcost);
				case 24: BuyCarDonat(playerid, marketid, 540, carcost);
				case 68: BuyCarDonat(playerid, marketid, 541, carcost);
				case 23: BuyCarDonat(playerid, marketid, 542, carcost);
				case 47: BuyCarDonat(playerid, marketid, 543, carcost);
				case 31: BuyCarDonat(playerid, marketid, 546, carcost);
				case 9: BuyCarDonat(playerid, marketid, 549, carcost);
				case 40: BuyCarDonat(playerid, marketid, 550, carcost);
				case 43: BuyCarDonat(playerid, marketid, 551, carcost);
				case 49: BuyCarDonat(playerid, marketid, 558, carcost);
				case 25: BuyCarDonat(playerid, marketid, 559, carcost);
				case 39: BuyCarDonat(playerid, marketid, 560, carcost);
				case 28: BuyCarDonat(playerid, marketid, 562, carcost);
				case 42: BuyCarDonat(playerid, marketid, 565, carcost);
				case 67: BuyCarDonat(playerid, marketid, 579, carcost);
				case 77: BuyCarDonat(playerid, marketid, 581, carcost);
				case 19: BuyCarDonat(playerid, marketid, 585, carcost);
				case 34: BuyCarDonat(playerid, marketid, 587, carcost);
				case 37: BuyCarDonat(playerid, marketid, 589, carcost);
				case 41: BuyCarDonat(playerid, marketid, 603, carcost);
				case 57: BuyCarDonat(playerid, marketid, 604, carcost);
				case 79: BuyCarDonat(playerid, marketid, 597, carcost);
				case 80: BuyCarDonat(playerid, marketid, 470, carcost);
				case 81: BuyCarDonat(playerid, marketid, 598, carcost);
				case 82: BuyCarDonat(playerid, marketid, 596, carcost);
				case 83: BuySkinDonate(playerid, 122, carcost);
			}

	    return 1;
}

stock BuySkinDonate(playerid, skinid, cost)
{
    if(GetPlayerDonateRub(playerid) < cost)
	{
 		ShowNotificationDefault(playerid, 2, "???????????? BC!", 4, "", "");
		return -1;
	}
	SetPlayerData(playerid, P_SKIN, skinid);
	UpdatePlayerDatabaseInt(playerid, "skin", skinid);
	SetPlayerSkinInit(playerid);
	
	GivePlayerDonateRub(playerid, -cost, "??????? ?????", true, true);
	UpdateDonate(playerid, GetPlayerMoney(playerid), GetPlayerDonateRub(playerid));
	show_sc(playerid, -666, -666);
	return 1;
}

stock BuyCarDonat(playerid, marketid, ownablecar, cost)
{
    new color_1 = 1;
	new color_2 = 1;

	printf("player_cars: %d / player_slots: %d", GetPlayerOwnableCars(playerid), GetPlayerCarSlots(playerid));

	printf("BuyOwnableCar(%d, %d, %d, %d, %d)", playerid, marketid, ownablecar, color_1, color_2);

	if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
	{
 		ShowNotificationDefault(playerid, 2, "??? ????? ??ù ?????????? ???ù??!", 4, "", "");
		return -1;
	}

	if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
	{
	 	ShowNotificationDefault(playerid, 2, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????!", 4, "", "");
	 	return -1;
	}

	new modelid = ownablecar;

	printf("modelid = %d | ownablecar = %d", modelid, ownablecar);

	if(GetPlayerDonateRub(playerid) < cost)
	{
 		ShowNotificationDefault(playerid, 2, "???????????? BC!", 4, "", "");
		return -1;
	}

	GivePlayerDonateRub(playerid, -cost, "??????? ù? ? ??????????", true, true);
	UpdateDonate(playerid, GetPlayerMoney(playerid), GetPlayerDonateRub(playerid));

	new buy_cars_count = cars_after_purchase_count[marketid]++;

	if(buy_cars_count >= 4)
		cars_after_purchase_count[marketid] = 0;

	new Float: pos_x = cars_pos_after_purchase[marketid][buy_cars_count][0];
	new Float: pos_y = cars_pos_after_purchase[marketid][buy_cars_count][1];
	new Float: pos_z = cars_pos_after_purchase[marketid][buy_cars_count][2];
	new Float: angle = cars_pos_after_purchase[marketid][buy_cars_count][3];

	new query[220],
		Cache: result,
		idx;

	idx = GetFreeOwnableCarID();

	SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

	SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
	SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
	SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

	SetOwnableCarData(idx, OC_POS_X, 		pos_x);
	SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
	SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
	SetOwnableCarData(idx, OC_ANGLE, 		angle);

	strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

	SetOwnableCarData(idx, OC_ALARM, 		false);
	SetOwnableCarData(idx, OC_KEY_IN, 		false);

	SetOwnableCarData(idx, OC_CREATE, 		gettime());

	format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
	// ----------------------------------------------------------------------------------------

	new vehicleid = CreateVehicle
	(
		GetOwnableCarData(idx, OC_MODEL_ID),
		GetOwnableCarData(idx, OC_POS_X),
		GetOwnableCarData(idx, OC_POS_Y),
		GetOwnableCarData(idx, OC_POS_Z),
		GetOwnableCarData(idx, OC_ANGLE),
		GetOwnableCarData(idx, OC_COLOR_1),
		GetOwnableCarData(idx, OC_COLOR_2),
		-1,
		0,
		VEHICLE_ACTION_TYPE_OWNABLE_CAR,
		idx
	);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
		//index = GetVehicleData(vehicleid, V_ACTION_ID);
        format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
        SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
		SetVehicleParam(vehicleid, V_LOCK, false);

		SetVehicleData(vehicleid, V_MILEAGE, 0.0);
	}

	SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

	format
	(
		query, sizeof query,
		"INSERT INTO ownable_cars \
		(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
		VALUES \
		('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
		GetPlayerAccountID(playerid),
		modelid,
		color_1,
		color_2,
		pos_x,
		pos_y,
		pos_z,
		angle,
		gettime()
	);
	result = mysql_query(mysql, query, true);

	SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

	cache_delete(result);
	
    launch[playerid] = 0;
    diski[playerid] = 0;
    fars[playerid] = 0;
    nitro[playerid] = 0;
	SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}??ù ???????? ?????????? ??????????????{ffff00} ???? - ù????????.");
	SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}??? ??????????????{ffff00} ?????????.");
	UnloadPlayerOwnableCar(playerid);
	show_sc(playerid, -777, -777);

	AddPlayerData(playerid, P_QUEST_EXP_5, +, 1);
	UpdatePlayerDatabaseInt(playerid, "quest_exp_5", GetPlayerData(playerid, P_QUEST_EXP_5));

	if(GetPlayerData(playerid, P_QUEST_EXP_5) == 1)
	{
	    SendClientMessage(playerid, COR_SERVER, "[??????]: "c_b"?? ??????? ????????? ????? "c_i"'?????? ?????????'. "c_b"???????: "c_m"10000 ???");
	    GivePlayerMoneyEx(playerid, 10000, "?????????? ??????");

	    SetPlayerData(playerid, P_QUEST_5, 1);
	    UpdatePlayerDatabaseInt(playerid, "quest_5", 1);

	    AddPlayerData(playerid, P_TOP_5, +, 1);
		UpdatePlayerDatabaseInt(playerid, "TOP_Quest", GetPlayerData(playerid, P_TOP_5));
	}

	return 1;
}


CMD:openbc(playerid)
{
    OpenLinkForPlayer(playerid, "https://grimrussia.ru");
}

CMD:openrub(playerid)
{
    new fmt_text[200];
    format
    (
        fmt_text,
        sizeof fmt_text,
        "{FFFFFF}\
        ??????: {009900}1000?\n\
        {FFFFFF}???????: {009900}%d\n\
  		\n\
        {6666CC}??????? ??????????, ???????\n\
        ?? ?????? ?????????????? ? ??????? ??????:\
        ",
        GetPlayerDonateRub(playerid)
    );

    Dialog(playerid, DIALOG_DONATE_CONVERT, DIALOG_STYLE_INPUT, "{ffcc00}????? ????? (?????????)", fmt_text, "?????", "?????");
}
CMD:keys(playerid)
{
    ShowNotificationDefault(playerid, 2, "????? ?????ù??ù ? ??????????!", 4, "", "");
}
CMD:bp(playerid)
{
    ShowNotificationDefault(playerid, 2, "BLACK PASS ????????ù ? ??????????!", 4, "", "");
}
CMD:nabori(playerid)
{
    ShowNotificationDefault(playerid, 2, "?????? ?????ù??ù ? ??????????!", 4, "", "");
}
CMD:akss(playerid)
{
   ShowNotificationDefault(playerid, 2, "?????????? ?????ù??ù ? ??????????!", 4, "", "");
}
*/
CMD:changename(playerid)
{
	if(GetPlayerDonateRub(playerid) >= 50)
	{
		Dialog
		(
			playerid, DIALOG_DONATE_CHANGE_NAME, DIALOG_STYLE_INPUT,
			"{FFCD00}????????? ?????",
			"{FFFFFF}??????? ????? ??ù ? ???? ????:",
			"????????", "???????"
		);
	}
	else ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? BC! ");
	return 1;
}

CMD:unnwarn(playerid)
{
    					if(GetPlayerData(playerid, P_WARN))
						{
							if(GetPlayerDonateRub(playerid) >= 100)
							{
								SetPlayerData(playerid, P_WARN, 		0);
								SetPlayerData(playerid, P_WARN_TIME, 	0);

								UpdatePlayerDatabaseInt(playerid, "warn", 		0);
								UpdatePlayerDatabaseInt(playerid, "warn_time", 	0);

								GivePlayerDonateRub(playerid, -100, "??ù??? ??????????????");

								ShowNotificationDefault(playerid, 1, 5, 1, 1, "??? ?????????????ù ??????? ??ù??");
								ShowNotificationDefault(playerid, 1, 5, 1, 1, "ù????? ?? ?????? ?????????ù ? ???????????!");
							
							}
							else
							{
								new fmt_text[80];
							 	ShowNotificationDefault(playerid, 2, 5, 2, 1, "??ù ??ù??ù ???? ?????????????? ?????????? ????? ?? ????? 100 ???!");
							}
						}
						else ShowNotificationDefault(playerid, 2, 5, 2, 1, "?? ????? ???????? ??? ??????????????!");
						
						return 1;

}
CMD:alllic(playerid)
{
						if(GetPlayerData(playerid, P_DRIVING_LIC) == 2 && GetPlayerData(playerid, P_WEAPON_LIC) == 1)
                          ShowNotificationDefault(playerid, 2, 5, 2, 1, "? ??? ??? ???? ??? ????????");

						else
						{
							if(GetPlayerDonateRub(playerid) >= 150)
							{
								SetPlayerData(playerid, P_DRIVING_LIC,	2);
								SetPlayerData(playerid, P_WEAPON_LIC,	1);

								UpdatePlayerDatabaseInt(playerid, "driving_lic", 2);
								UpdatePlayerDatabaseInt(playerid, "weapon_lic", 1);

								GivePlayerDonate(playerid, -150, "??????? ?????? ????????", true);

								ShowNotificationDefault(playerid, 1, 5, 1, 1, "?? ????????? ????? ????????. ???????????:/lic!");
							
							}
							else
							{
								return ShowNotificationDefault(playerid, 2, 5, 2, 1, "??ù ??????? ???? ???????? ?????????? ????? ?? ????? 150 ???!");
							}
						}
						return 1;
}
CMD:powerbuy(playerid)
{
    new fmt_text[400];

						format
						(
							fmt_text, sizeof fmt_text,
							"1. ????\t\t%d%%\n"\
							"2. Colt 45\t%d%%\n"\
							"3. SD Pistol\t%d%%\n"\
							"4. Desert Eagle\t%d%%\n"\
							"5. Shotgun\t%d%%\n"\
							"6. MP5\t\t%d%%\n"\
							"7. AK47\t\t%d%%\n"\
							"8. M4\t\t%d%%\n"\
							"9. Sniper Rifle\t%d%%\n"\
							"10. Sawnoff\t%d%%\n"\
							"11. Combat SG\t%d%%\n"\
							"12. Micro Uzi\t%d%%",
							GetPlayerData(playerid, P_POWER),
							GetPlayerData(playerid, P_SKILL_COLT),
							GetPlayerData(playerid, P_SKILL_SDPISTOL),
							GetPlayerData(playerid, P_SKILL_DEAGLE),
							GetPlayerData(playerid, P_SKILL_SHOTGUN),
							GetPlayerData(playerid, P_SKILL_MP5),
							GetPlayerData(playerid, P_SKILL_AK47),
							GetPlayerData(playerid, P_SKILL_M4),
							GetPlayerData(playerid, P_SKILL_SNIPER_RIFLE),
							GetPlayerData(playerid, P_SKILL_SAWNOFF),
							GetPlayerData(playerid, P_SKILL_COMBAT_SG),
							GetPlayerData(playerid, P_SKILL_MICRO_UZI)
						);

						Dialog(playerid, DIALOG_DONATE_SKILLS, DIALOG_STYLE_LIST, "{FFFF00}???????? ?????", fmt_text, "?????", "??????");
}
CMD:bomboxbuy(playerid)
{
	if(GetPlayerDonateRub(playerid) >= 1000)
						{
						    if(GetPlayerData(playerid, P_BOOMBOX) >= 1) return ShowNotificationDefault(playerid, 2, 5, 2, 1, "? ??? ??? ???? ???????!");

							GivePlayerDonateRub(playerid, -1000, "??????? ????????");

                            ShowNotificationDefault(playerid, 1, 5, 1, 1, "?? ??????? ?????? ???????(/boombox)");

							SetPlayerData(playerid, P_BOOMBOX, 1);
							UpdatePlayerDatabaseInt(playerid, "boombox", 1);
						
						}
						else ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? BC! ");
						
	
	return 1;
						    
}
CMD:buyslot(playerid)
{
						new fmt_text[80];

						if(GetPlayerDonateRub(playerid) < 100)
						{
						    ShowNotificationDefault(playerid, 2, 5, 2, 1, "??ù ??????? ????? ??ù ?????????? ?????????? ????? ?? ????? 100 ???!");
						}
						else
						{
							AddPlayerData(playerid, P_CAR_SLOTS, +, 1);
							UpdatePlayerDatabaseInt(playerid, "car_slots", GetPlayerData(playerid, P_CAR_SLOTS));

							GivePlayerDonateRub(playerid, -100, "??????? ????? ??ù ??????????", true, true);

							format(fmt_text, sizeof fmt_text, ""SC"?? ????????? ?????????? ?????? ??ù ??????????. ù?????? ?????????? ??????: {ffff00}%d", GetPlayerData(playerid, P_CAR_SLOTS));

							ShowNotificationDefault(playerid, 1, 5, 1, 0, fmt_text);
						
						}
						
						return 1;
}
CMD:buynomber(playerid)
{
						if(GetPlayerOwnableCar(playerid) == INVALID_VEHICLE_ID)
						{
							if(GetPlayerOwnableCars(playerid) == 0)
								return ShowNotificationDefault(playerid, 2, 5, 2, 1, "? ??? ??? ??????? ??????????!");
							else
								return ShowNotificationDefault(playerid, 2, 5, 2, 1, "??? ????????? ?? ???????? ?? ??????!");
						}

									Dialog
					(
						playerid, DIALOG_DONATE_BUY_CAR_NUMBER, DIALOG_STYLE_INPUT,
						"{ffcd00}??????? ????? ??ù ??????? ù?",
						"{FFFFFF}\
						??????? ?????, ???????\n\
						?? ?????? ?????????? ?? ?????? ?????????\n\n\
						- ????????? ???????????? ?????, ? ??? ?? ?????: A, B, E, K, M, H, O, P, C, T, X\n\
						- ??? ?????? ?????????? ????/???? ??????????ù ? ?????? - ??? ?? ??????\n\
						- ????? ?????? ???? ? ??????? CNNNCC; ??? C - ?????, ??? N - ?????\n\n\
						{888888}????????: B713EC\
						",
						"?????", "??????"
					);
				
					return 1;

}
CMD:buyphonenum(playerid)
{
						if(GetPlayerDonateRub(playerid) >= 70)
						{
							Dialog
							(
								playerid, DIALOG_DONATE_BUY_NUMBER, DIALOG_STYLE_INPUT,
								"{FFCD00}??????? 4-? ???????? ?????? ????????",
								"{FFFFFF}??????? ?????, ???????\n"\
								"?? ?????? ?? ??????????:",
								"?????", "??????"
							);

							return 1;
						}
						else
						{

							ShowNotificationDefault(playerid, 2, 5, 2, 0, "???????????? BC! ");
						}
					
						return 1;
}



CMD:vipsilv(playerid)
{
    Dialog
						(
							playerid,
							DIALOG_DONATE_VIP_HELP,
							DIALOG_STYLE_MSGBOX,
							"?????????ù",
							"{CD7F32}______________________ SILVER VIP ______________________\n\
							{FFFF00}1{FFFFFF} /togphone - ????????? ???????\n\
							{FFFF00}1{FFFFFF} /admins - ???????? ??????????????? ??????\n\n\
							{C0C0C0}______________________ GOLD VIP ______________________\n\
							{FFFF00}1{FFFFFF} ??? ??????????? SILVER VIP \n\
							{FFFF00}2{FFFFFF} VIP ???  /v | /voff \n\
							{FFFF00}3{FFFFFF} ??? ? ????? ????? ? 2 ???? ????????? ????????? ? ?????? (/unj) \n\
							{FFFF00}4{FFFFFF} +1 ???? ?????????? ? ??????? \n\
							{FFD700}______________________ PLATINUM VIP ______________________\n\
							{FFFF00}1{FFFFFF} ??? ??????????? SILVER VIP \n\
							{FFFF00}2{FFFFFF} ??? ??????????? GOLD VIP \n\
							{FFFF00}3{FFFFFF} ??? ? ????? ????? ? 3 ???? ????????? ????????? ? ?????? (/unj)\n\
							{FFFF00}4{FFFFFF} +2 ????? ?????????? ? ???????\n\
							{FFFF00}4{FFFFFF} /vleave - ?????????? ?? ??????? ? ????? ????ù!\n\
							{FFFF00}5{FFFFFF} ?????? ?????? PayDay + 1 EXP ? 1000? ? ????????\n\
							??????ù ??????? ??????, ?? ????????? ??????? ? ????????",
							"?????","??????");
}

CMD:vipgld(playerid)
{
    Dialog
						(
							playerid,
							DIALOG_DONATE_VIP_HELP,
							DIALOG_STYLE_MSGBOX,
							"?????????ù",
							"{CD7F32}______________________ SILVER VIP ______________________\n\
							{FFFF00}1{FFFFFF} /togphone - ????????? ???????\n\
							{FFFF00}1{FFFFFF} /admins - ???????? ??????????????? ??????\n\n\
							{C0C0C0}______________________ GOLD VIP ______________________\n\
							{FFFF00}1{FFFFFF} ??? ??????????? SILVER VIP \n\
							{FFFF00}2{FFFFFF} VIP ???  /v | /voff \n\
							{FFFF00}3{FFFFFF} ??? ? ????? ????? ? 2 ???? ????????? ????????? ? ?????? (/unj) \n\
							{FFFF00}4{FFFFFF} +1 ???? ?????????? ? ??????? \n\
							{FFD700}______________________ PLATINUM VIP ______________________\n\
							{FFFF00}1{FFFFFF} ??? ??????????? SILVER VIP \n\
							{FFFF00}2{FFFFFF} ??? ??????????? GOLD VIP \n\
							{FFFF00}3{FFFFFF} ??? ? ????? ????? ? 3 ???? ????????? ????????? ? ?????? (/unj)\n\
							{FFFF00}4{FFFFFF} +2 ????? ?????????? ? ???????\n\
							{FFFF00}4{FFFFFF} /vleave - ?????????? ?? ??????? ? ????? ????ù!\n\
							{FFFF00}5{FFFFFF} ?????? ?????? PayDay + 1 EXP ? 1000? ? ????????\n\
							??????ù ??????? ??????, ?? ????????? ??????? ? ????????",
							"?????","??????");
}

CMD:vippltnum(playerid)
{
    Dialog
						(
							playerid,
							DIALOG_DONATE_VIP_HELP,
							DIALOG_STYLE_MSGBOX,
							"?????????ù",
							"{CD7F32}______________________ SILVER VIP ______________________\n\
							{FFFF00}1{FFFFFF} /togphone - ????????? ???????\n\
							{FFFF00}1{FFFFFF} /admins - ???????? ??????????????? ??????\n\n\
							{C0C0C0}______________________ GOLD VIP ______________________\n\
							{FFFF00}1{FFFFFF} ??? ??????????? SILVER VIP \n\
							{FFFF00}2{FFFFFF} VIP ???  /v | /voff \n\
							{FFFF00}3{FFFFFF} ??? ? ????? ????? ? 2 ???? ????????? ????????? ? ?????? (/unj) \n\
							{FFFF00}4{FFFFFF} +1 ???? ?????????? ? ??????? \n\
							{FFD700}______________________ PLATINUM VIP ______________________\n\
							{FFFF00}1{FFFFFF} ??? ??????????? SILVER VIP \n\
							{FFFF00}2{FFFFFF} ??? ??????????? GOLD VIP \n\
							{FFFF00}3{FFFFFF} ??? ? ????? ????? ? 3 ???? ????????? ????????? ? ?????? (/unj)\n\
							{FFFF00}4{FFFFFF} +2 ????? ?????????? ? ???????\n\
							{FFFF00}4{FFFFFF} /vleave - ?????????? ?? ??????? ? ????? ????ù!\n\
							{FFFF00}5{FFFFFF} ?????? ?????? PayDay + 1 EXP ? 1000? ? ????????\n\
							??????ù ??????? ??????, ?? ????????? ??????? ? ????????",
							"?????","??????");
}

CMD:voice(playerid)
{
    SvAttachSpeakerToStream(lstream[playerid], playerid);
    SvAttachSpeakerToStream(gstream, playerid);
    SvDetachSpeakerFromStream(lstream[playerid], playerid);
    SvDetachSpeakerFromStream(gstream, playerid);
}

CMD:vipchat(playerid, params[])

{

	if(GetPlayerPremium(playerid) < 1) return SendClientMessage(playerid, 0xCECECEFF, " ??? ?????????? ??? ?? ???????? ");

	else if(IsPlayerMuted(playerid) > 0) return SendClientMessage(playerid, 0xCECECEFF, "?????? ? ??? ????????????. ????ù ?? ?????????????: {66CC33}/time");

	else if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, "???????????: /v [?????]");



	new fmt_msg[144];







	format(fmt_msg, sizeof fmt_msg, "[VIP] %s[%d]: %s", GetPlayerNameEx(playerid), playerid, params);



	for(new i; i < MAX_PLAYERS; i ++)

	{

		if(!IsPlayerConnected(i)) continue;

		if(!IsPlayerLogged(i)) continue;

		if(!GetPlayerPremium(i)) continue;

        if(!GetPlayerData(i, P_PREMIUM_CHAT)) continue;



		SendClientMessage(i, 0xEC174FFF, fmt_msg);

	}

	return 1;

}

CMD:el(playerid, params[])
{
    new carid = GetPlayerVehicleID(playerid);
    if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
    {
     switch(Povorotnk[0][carid])
     {
      case false:
       {
          Povorotnk[0][carid] = true;
          Povor[0] = CreateObject(19294, 0.0, 0.0, 0.0, 0.0,0.0, 0.0,100.0);
          Povor[1] = CreateObject(19294, 0.0, 0.0, 0.0, 0.0,0.0, 0.0,100.0);
          AttachObjectToVehicle(Povor[0], carid, 0.9, 2.5, 0.1, 0.0, 0.0, 0.0);
          AttachObjectToVehicle(Povor[1], carid, 0.9, -2.7, 0.1, 0.0, 0.0, 0.0);
           }
            case true:
            {
       Povorotnk[0][carid] = false;
           DestroyObject(Povor[0]);
           DestroyObject(Povor[1]);
            }
     }
 }
}

CMD:ql(playerid, params[])
{
    new carid = GetPlayerVehicleID(playerid);
    if(GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
      {
       switch(Povorotnk[1][carid])
       {
       case false:
        {
         Povorotnk[1][carid] = true;
         Povor[2] = CreateObject(19294, 0.0, 0.0, 0.0, 0.0,0.0, 0.0,100.0);
         Povor[3] = CreateObject(19294, 0.0, 0.0, 0.0, 0.0,0.0,  0.0,100.0);
           AttachObjectToVehicle(Povor[2], carid, -0.9, 2.5, 0.1, 0.0, 0.0, 0.0);
              AttachObjectToVehicle(Povor[3], carid, -0.9, -2.7, 0.1, 0.0, 0.0, 0.0);
          }
       case true:
        {
           Povorotnk[1][carid] = false;
         DestroyObject(Povor[2]);
         DestroyObject(Povor[3]);
   }
  }
 }
}

CMD:askin(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 1)
        return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

    if(!strcmp(params, "1", true))
    {
        SetPlayerSkin(playerid, 122); // ??????? ????
        SendClientMessage(playerid, 0x00FF00FF, ""SC"?? ??????? {FFFF00}?????? {FFFFFF}??????? {FFFF00}???? ??????????????.");
        return 1;
    }
    else if(!strcmp(params, "2", true))
    {
        SetPlayerSkin(playerid, 11943); // ??????? ????
        SendClientMessage(playerid, 0x00FF00FF, ""SC"?? ??????? {FFFF00}?????? {FFFFFF}???? {FFFF00}??????????????.");
        return 1;
    }
    else if(!strcmp(params, "3", true))
    {
        SetPlayerSkin(playerid, GetPlayerSkinEx(playerid)); // ??????? ???????? ?????
        SendClientMessage(playerid, 0x00FF00FF, ""SC"?? ??????? {FFFF00}?????? {FFFFFF}???? {FFFF00}??????????????.");
        return 1;
    }
    else
    {
        SendClientMessage(playerid, COLOR_RED, ""SC"???????????: /askin [1 - ???????, 2 - ???????, 3 - ??ù??]");
        return 1;
    }
}

stock ShowFamilyy(playerid, num, num2)
{
    new BitStream:bitstream = BS_New();
    BS_WriteValue(bitstream, PR_UINT8, PACKET_CUSTOMRPC);
    BS_WriteValue(bitstream, PR_UINT32, 0x51); //37 ???? ???

    BS_WriteValue(bitstream, PR_INT32, num);
    BS_WriteValue(bitstream, PR_INT32, num2);

    BS_Send(bitstream, playerid);

    BS_Delete(bitstream);

    return true;
}

CMD:stageinfo(playerid)
 {
   ShowPlayerDialog(playerid, 6263, DIALOG_STYLE_LIST, "???? ?? ???????", "{FFFF00}1 lvl stage - {FFFFFF}50.000 ??????\n{FFFF00}2 lvl stage - {FFFFFF}150.000 ??????\n{FFFF00}3 lvl stage - {FFFFFF}250.000 ??????", "??");
   }
   

public AutoRestart()
{
        new string[128];
        new h, m, s;
        gettime(h, m, s); // ?????? ????ù
        
        if(h == 5 && m == 00) // ???? 19 ??? 00 ????? (????? ???????? ????ù ?? ????)
        {
                format(string, sizeof(string), "{ffff00}|{ffffff} ????????? ??????, ????????? ???????ù!"); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(0xFFFFFF, string); // ??????? ????????? ? ????? ???

				format(string, sizeof(string), "{ffff00}|{ffffff} ????? ?????{ffff00} ???{ffffff} ????? ?????????? ?????????????? ??????? ???????"); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(0xFFFFFF, string); // ??????? ????????? ? ????? ???

				format(string, sizeof(string), "{ffff00}|{ffffff} ????? ???????????? ?????? ??????? ???????????ù ? ??????? ??????."); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(0xFFFFFF, string); // ??????? ????????? ? ????? ???
        
				format(string, sizeof(string), "{ffff00}|{ffffff} ?????? ???????ù ?? ?????????????? ??????????."); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(0xFFFFFF, string); // ??????? ????????? ? ????? ???
		}
				if(h == 4 && m == 40) // ???? 19 ??? 30 ????? (????? ???????? ????ù ?? ????)
        {
                format(string, sizeof(string), "{ffff00}|{ffffff} ????????? ??????, ????????? ???????ù!"); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(0xFFFFFF, string); // ??????? ????????? ? ????? ???

				format(string, sizeof(string), "{ffff00}|{ffffff} ????? ?????{ffff00} 30 ?????{ffffff} ????? ?????????? ?????????????? ??????? ???????"); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(0xFFFFFF, string); // ??????? ????????? ? ????? ???

				format(string, sizeof(string), "{ffff00}|{ffffff} ????? ???????????? ?????? ??????? ???????????ù ? ??????? ??????."); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(0xFFFFFF, string); // ??????? ????????? ? ????? ???
        
				format(string, sizeof(string), "{ffff00}|{ffffff} ?????? ???????ù ?? ?????????????? ??????????."); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(0xFFFFFF, string); // ??????? ????????? ? ????? ???
		}
        if(h == 5 && m == 10) // ???? 20 ??? 00 ????? (????? ???????? ????ù ?? ????)
        {
                // SaveAccounts(); // ???????? ??? ??????? ?? ??????? ?????????ù ? ??? ? ???? (? ??????? ????? ??????? ???????? ????? ?? ????? (??? ??? ????? ????????))
                format(string, sizeof(string), "{ffff00}|{ffffff} ??????? ???????? ???????..."); // ù???, ???????ù???? ? ???
                SendClientMessageToAll(COLOR_WHITE, string); // ??????? ????????? ? ????? ???
                SendRconCommand("gmx"); // ?????? ???????
        }
}

CMD:aaks(playerid, params[]) 
{
        extract params -> new to_player, modelid, bone, index; else return SendClientMessage(playerid, 0x999999FF, "???????????: /aaks [id ??????] [???? ????] [????? ????/bones] [???? ?????]");
        SetPlayerAttachedObject(to_player, index, modelid, bone);
        return 1;
}



CMD:setvinil(playerid, params[]) 
{

    extract params -> new idvinila; else return SendClientMessage(playerid, 0x999999FF, "???????????: /setvinil [id ??????]");

    new vehicleid = GetPlayerVehicleID(playerid);
    if (vehicleid == 0)
        return SendClientMessage(playerid, -1, "??????: ?? ?? ?????? ????????????? ????????.");
        
     // ??????? ????????? ?????????? ????????? ??ù ???????? ù?, ????????ù ??????????? ??????? (??. ????).
    new num_paintjobs = GetNumberOfPaintjobsForVehicle(GetVehicleModel(vehicleid));
    if (num_paintjobs == 0)
        return SendClientMessage(playerid, -1, "??????: ??ù ???????? ????????????? ???????? ??? ????????? ?????????.");
    
    ChangeVehiclePaintjob(vehicleid, idvinila);
    

}


stock GetNumberOfPaintjobsForVehicle(vehiclemodel)
{
    switch(vehiclemodel)
    {
        case 483:
            return 1;
        case 575:
            return 2;
        case 534, 535, 536, 558, 559, 560, 561, 562, 565, 567, 576,611,612,613:
            return 3;
    }
    return 0;
}


stock LoadTextDraw()
{
	bj_fon = TextDrawCreate(0.000000, 0.000000, "blackjack:brbj");
	TextDrawLetterSize(bj_fon, 0.000000, 0.000000);
	TextDrawTextSize(bj_fon, 640.000000, 448.000000);
	TextDrawAlignment(bj_fon, 1);
	TextDrawColor(bj_fon, -1);
	TextDrawSetShadow(bj_fon, 0);
	TextDrawSetOutline(bj_fon, 0);
	TextDrawFont(bj_fon, 4);

	bj_play = TextDrawCreate(268.399932, 389.773345, "blackjack:brbjplay");
	TextDrawLetterSize(bj_play, 0.000000, 0.000000);
	TextDrawTextSize(bj_play, 96.799949, 36.586669);
	TextDrawAlignment(bj_play, 1);
	TextDrawColor(bj_play, -1);
	TextDrawSetShadow(bj_play, 0);
	TextDrawSetOutline(bj_play, 0);
	TextDrawFont(bj_play, 4);
	TextDrawSetSelectable(bj_play, true);

	bj_double = TextDrawCreate(16.600013, 389.773345, "blackjack:brbjdouble");
	TextDrawLetterSize(bj_double, 0.000000, 0.000000);
	TextDrawTextSize(bj_double, 96.799949, 36.586669);
	TextDrawAlignment(bj_double, 1);
	TextDrawColor(bj_double, -1);
	TextDrawSetShadow(bj_double, 0);
	TextDrawSetOutline(bj_double, 0);
	TextDrawFont(bj_double, 4);
	TextDrawSetSelectable(bj_double, true);

	bj_stop = TextDrawCreate(121.600059, 389.773345, "blackjack:brbjstop");
	TextDrawLetterSize(bj_stop, 0.000000, 0.000000);
	TextDrawTextSize(bj_stop, 96.799949, 36.586669);
	TextDrawAlignment(bj_stop, 1);
	TextDrawColor(bj_stop, -1);
	TextDrawSetShadow(bj_stop, 0);
	TextDrawSetOutline(bj_stop, 0);
	TextDrawFont(bj_stop, 4);
	TextDrawSetSelectable(bj_stop, true);

	bj_take = TextDrawCreate(420.800231, 389.773345, "blackjack:brbjtake");
	TextDrawLetterSize(bj_take, 0.000000, 0.000000);
	TextDrawTextSize(bj_take, 96.799949, 36.586669);
	TextDrawAlignment(bj_take, 1);
	TextDrawColor(bj_take, -1);
	TextDrawSetShadow(bj_take, 0);
	TextDrawSetOutline(bj_take, 0);
	TextDrawFont(bj_take, 4);
	TextDrawSetSelectable(bj_take, true);

	bj_exit = TextDrawCreate(526.200256, 389.773345, "blackjack:brbjexit");
	TextDrawLetterSize(bj_exit, 0.000000, 0.000000);
	TextDrawTextSize(bj_exit, 96.799949, 36.586669);
	TextDrawAlignment(bj_exit, 1);
	TextDrawColor(bj_exit, -1);
	TextDrawSetShadow(bj_exit, 0);
	TextDrawSetOutline(bj_exit, 0);
	TextDrawFont(bj_exit, 4);
	TextDrawSetSelectable(bj_exit, true);

	bj_dealer_score = TextDrawCreate(259.000030, 388.280212, "blackjack:brbjscore");
	TextDrawLetterSize(bj_dealer_score, 0.000000, 0.000000);
	TextDrawTextSize(bj_dealer_score, 115.999938, 51.520008);
	TextDrawAlignment(bj_dealer_score, 1);
	TextDrawColor(bj_dealer_score, -1);
	TextDrawSetShadow(bj_dealer_score, 0);
	TextDrawSetOutline(bj_dealer_score, 0);
	TextDrawFont(bj_dealer_score, 4);


	bj_help = TextDrawCreate(16.799999, 123.200004, "textures:button");
	TextDrawLetterSize(bj_help, 0.000000, 0.000000);
	TextDrawTextSize(bj_help, 104.000000, 36.586654);
	TextDrawAlignment(bj_help, 1);
	TextDrawColor(bj_help, -1);
	TextDrawSetShadow(bj_help, 0);
	TextDrawSetOutline(bj_help, 0);
	TextDrawFont(bj_help, 4);
	TextDrawSetSelectable(bj_help, true);


	new str[] = "You succeeded";
	utf8_to_cp1251(str);
	bj_text_bet[0] = TextDrawCreate(320.800018, 71.680015, str);
	TextDrawLetterSize(bj_text_bet[0], 0.405198, 1.458132);
	TextDrawAlignment(bj_text_bet[0], 2);
	TextDrawColor(bj_text_bet[0], -65281);
	TextDrawSetShadow(bj_text_bet[0], 0);
	TextDrawSetOutline(bj_text_bet[0], 1);
	TextDrawBackgroundColor(bj_text_bet[0], 51);
	TextDrawFont(bj_text_bet[0], 1);
	TextDrawSetProportional(bj_text_bet[0], 1);
	
	new str1[] = "made a bet";
	utf8_to_cp1251(str1);
	bj_text_bet[1] = TextDrawCreate(320.200042, 86.120002, str1);
	TextDrawLetterSize(bj_text_bet[1], 0.405198, 1.458132);
	TextDrawAlignment(bj_text_bet[1], 2);
	TextDrawColor(bj_text_bet[1], -65281);
	TextDrawSetShadow(bj_text_bet[1], 0);
	TextDrawSetOutline(bj_text_bet[1], 1);
	TextDrawBackgroundColor(bj_text_bet[1], 51);
	TextDrawFont(bj_text_bet[1], 1);
	TextDrawSetProportional(bj_text_bet[1], 1);

	new str2[] = "Time to game start";
	utf8_to_cp1251(str2);
	bj_text_start_time = TextDrawCreate(315.999969, 215.040039, str2);
	TextDrawLetterSize(bj_text_start_time, 0.581197, 2.563199);
	TextDrawAlignment(bj_text_start_time, 2);
	TextDrawColor(bj_text_start_time, -1);
	TextDrawSetShadow(bj_text_start_time, 0);
	TextDrawSetOutline(bj_text_start_time, 1);
	TextDrawBackgroundColor(bj_text_start_time, 51);
	TextDrawFont(bj_text_start_time, 1);
	TextDrawSetProportional(bj_text_start_time, 1);
}

stock LoadPlayerTextDrawBJ(playerid)
{
	new str[] = "0 ??b";
	utf8_to_cp1251(str);
	bj_bet[playerid] = CreatePlayerTextDraw(playerid, 19.200004, 58.240013, str);
	PlayerTextDrawLetterSize(playerid, bj_bet[playerid], 0.291599, 1.510398);
	PlayerTextDrawAlignment(playerid, bj_bet[playerid], 1);
	PlayerTextDrawColor(playerid, bj_bet[playerid], -1);
	PlayerTextDrawSetShadow(playerid, bj_bet[playerid], 0);
	PlayerTextDrawSetOutline(playerid, bj_bet[playerid], 1);
	PlayerTextDrawBackgroundColor(playerid, bj_bet[playerid], 51);
	PlayerTextDrawFont(playerid, bj_bet[playerid], 1);
	PlayerTextDrawSetProportional(playerid, bj_bet[playerid], 1);

	new str1[] = "0 ??b";
	utf8_to_cp1251(str1);
	bj_money[playerid] = CreatePlayerTextDraw(playerid, 19.200004, 92.093315, str1);
	PlayerTextDrawLetterSize(playerid, bj_money[playerid], 0.291599, 1.510398);
	PlayerTextDrawAlignment(playerid, bj_money[playerid], 1);
	PlayerTextDrawColor(playerid, bj_money[playerid], -1);
	PlayerTextDrawSetShadow(playerid, bj_money[playerid], 0);
	PlayerTextDrawSetOutline(playerid, bj_money[playerid], 1);
	PlayerTextDrawBackgroundColor(playerid, bj_money[playerid], 51);
	PlayerTextDrawFont(playerid, bj_money[playerid], 1);
	PlayerTextDrawSetProportional(playerid, bj_money[playerid], 1);


	bj_dealer_point[playerid] = CreatePlayerTextDraw(playerid, 317.599853, 405.440093, "21");
	PlayerTextDrawLetterSize(playerid, bj_dealer_point[playerid], 0.364398, 1.719465);
	PlayerTextDrawAlignment(playerid, bj_dealer_point[playerid], 2);
	PlayerTextDrawColor(playerid, bj_dealer_point[playerid], -1);
	PlayerTextDrawSetShadow(playerid, bj_dealer_point[playerid], 0);
	PlayerTextDrawSetOutline(playerid, bj_dealer_point[playerid], 1);
	PlayerTextDrawBackgroundColor(playerid, bj_dealer_point[playerid], 51);
	PlayerTextDrawFont(playerid, bj_dealer_point[playerid], 1);
	PlayerTextDrawSetProportional(playerid, bj_dealer_point[playerid], 1);


	bj_members_name[playerid][0] = CreatePlayerTextDraw(playerid, 19.600006, 197.626632, "Wendy_Knyazev");
	PlayerTextDrawLetterSize(playerid, 			bj_members_name[playerid][0], 0.286798, 1.390933);
	PlayerTextDrawAlignment(playerid, 			bj_members_name[playerid][0], 1);
	PlayerTextDrawColor(playerid, 				bj_members_name[playerid][0], -1);
	PlayerTextDrawSetShadow(playerid, 			bj_members_name[playerid][0], 0);
	PlayerTextDrawSetOutline(playerid, 			bj_members_name[playerid][0], 1);
	PlayerTextDrawBackgroundColor(playerid, 	bj_members_name[playerid][0], 51);
	PlayerTextDrawFont(playerid, 				bj_members_name[playerid][0], 1);
	PlayerTextDrawSetProportional(playerid, 	bj_members_name[playerid][0], 1);


	bj_members_name[playerid][1] = CreatePlayerTextDraw(playerid, 147.200286, 40.586555, "Wendy_Knyazev");
	PlayerTextDrawLetterSize(playerid, 			bj_members_name[playerid][1], 0.286798, 1.390933);
	PlayerTextDrawAlignment(playerid, 			bj_members_name[playerid][1], 1);
	PlayerTextDrawColor(playerid, 				bj_members_name[playerid][1], -1);
	PlayerTextDrawSetShadow(playerid, 			bj_members_name[playerid][1], 0);
	PlayerTextDrawSetOutline(playerid, 			bj_members_name[playerid][1], 1);
	PlayerTextDrawBackgroundColor(playerid, 	bj_members_name[playerid][1], 51);
	PlayerTextDrawFont(playerid, 				bj_members_name[playerid][1], 1);
	PlayerTextDrawSetProportional(playerid, 	bj_members_name[playerid][1], 1);

	bj_members_name[playerid][2] = CreatePlayerTextDraw(playerid, 397.800445, 40.586555, "Wendy_Knyazev");
	PlayerTextDrawLetterSize(playerid, 			bj_members_name[playerid][2], 0.286798, 1.390933);
	PlayerTextDrawAlignment(playerid, 			bj_members_name[playerid][2], 1);
	PlayerTextDrawColor(playerid, 				bj_members_name[playerid][2], -1);
	PlayerTextDrawSetShadow(playerid,		 	bj_members_name[playerid][2], 0);
	PlayerTextDrawSetOutline(playerid, 			bj_members_name[playerid][2], 1);
	PlayerTextDrawBackgroundColor(playerid, 	bj_members_name[playerid][2], 51);
	PlayerTextDrawFont(playerid, 				bj_members_name[playerid][2], 1);
	PlayerTextDrawSetProportional(playerid, 	bj_members_name[playerid][2], 1);

	bj_members_name[playerid][3] = CreatePlayerTextDraw(playerid, 496.600280, 197.626632, "Wendy_Knyazev");
	PlayerTextDrawLetterSize(playerid, 			bj_members_name[playerid][3], 0.286798, 1.390933);
	PlayerTextDrawAlignment(playerid, 			bj_members_name[playerid][3], 1);
	PlayerTextDrawColor(playerid, 				bj_members_name[playerid][3], -1);
	PlayerTextDrawSetShadow(playerid, 			bj_members_name[playerid][3], 0);
	PlayerTextDrawSetOutline(playerid, 			bj_members_name[playerid][3], 1);
	PlayerTextDrawBackgroundColor(playerid, 	bj_members_name[playerid][3], 51);
	PlayerTextDrawFont(playerid, 				bj_members_name[playerid][3], 1);
	PlayerTextDrawSetProportional(playerid, 	bj_members_name[playerid][3], 1);







	bj_card_table[playerid][1][0] = CreatePlayerTextDraw(playerid, 2.999999, 206.079971, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][1][0], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][1][0], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][1][0], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][1][0], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][1][0], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][1][0], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][1][0], 4);

	bj_card_table[playerid][1][1] = CreatePlayerTextDraw(playerid, 22.999999, 206.079971, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][1][1], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][1][1], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][1][1], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][1][1], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][1][1], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][1][1], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][1][1], 4);

	bj_card_table[playerid][1][2] = CreatePlayerTextDraw(playerid, 42.999999, 206.079971, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][1][2], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][1][2], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][1][2], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][1][2], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][1][2], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][1][2], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][1][2], 4);

	bj_card_table[playerid][1][3] = CreatePlayerTextDraw(playerid, 62.999999, 206.079971, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][1][3], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][1][3], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][1][3], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][1][3], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][1][3], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][1][3], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][1][3], 4);





	bj_card_table[playerid][2][0] = CreatePlayerTextDraw(playerid, 129.999999, 46.559913, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][2][0], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][2][0], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][2][0], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][2][0], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][2][0], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][2][0], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][2][0], 4);

	bj_card_table[playerid][2][1] = CreatePlayerTextDraw(playerid, 149.999999, 46.559913, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][2][1], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][2][1], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][2][1], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][2][1], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][2][1], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][2][1], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][2][1], 4);

	bj_card_table[playerid][2][2] = CreatePlayerTextDraw(playerid, 169.999999, 46.559913, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][2][2], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][2][2], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][2][2], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][2][2], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][2][2], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][2][2], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][2][2], 4);

	bj_card_table[playerid][2][3] = CreatePlayerTextDraw(playerid, 189.999999, 46.559913, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][2][3], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][2][3], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][2][3], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][2][3], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][2][3], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][2][3], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][2][3], 4);





	bj_card_table[playerid][3][0] = CreatePlayerTextDraw(playerid, 380.999999, 46.559913, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][3][0], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][3][0], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][3][0], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][3][0], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][3][0], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][3][0], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][3][0], 4);

	bj_card_table[playerid][3][1] = CreatePlayerTextDraw(playerid, 400.999999, 46.559913, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][3][1], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][3][1], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][3][1], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][3][1], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][3][1], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][3][1], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][3][1], 4);

	bj_card_table[playerid][3][2] = CreatePlayerTextDraw(playerid, 420.999999, 46.559913, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][3][2], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][3][2], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][3][2], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][3][2], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][3][2], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][3][2], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][3][2], 4);

	bj_card_table[playerid][3][3] = CreatePlayerTextDraw(playerid, 440.999999, 46.559913, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][3][3], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][3][3], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][3][3], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][3][3], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][3][3], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][3][3], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][3][3], 4);




	bj_card_table[playerid][4][0] = CreatePlayerTextDraw(playerid, 481.000000, 206.079971, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][4][0], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][4][0], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][4][0], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][4][0], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][4][0], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][4][0], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][4][0], 4);

	bj_card_table[playerid][4][1] = CreatePlayerTextDraw(playerid, 502.000000, 206.079971, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][4][1], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][4][1], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][4][1], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][4][1], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][4][1], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][4][1], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][4][1], 4);

	bj_card_table[playerid][4][2] = CreatePlayerTextDraw(playerid, 523.000000, 206.079971, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][4][2], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][4][2], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][4][2], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][4][2], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][4][2], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][4][2], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][4][2], 4);

	bj_card_table[playerid][4][3] = CreatePlayerTextDraw(playerid, 544.000000, 206.079971, "blackjack:cardscard");
	PlayerTextDrawLetterSize(playerid, bj_card_table[playerid][4][3], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_card_table[playerid][4][3], 90.400009, 117.226631);
	PlayerTextDrawAlignment(playerid, bj_card_table[playerid][4][3], 1);
	PlayerTextDrawColor(playerid, bj_card_table[playerid][4][3], -1);
	PlayerTextDrawSetShadow(playerid, bj_card_table[playerid][4][3], 0);
	PlayerTextDrawSetOutline(playerid, bj_card_table[playerid][4][3], 0);
	PlayerTextDrawFont(playerid, bj_card_table[playerid][4][3], 4);



	bj_panel_info[playerid] = CreatePlayerTextDraw(playerid, 155.146667, 249.386703, "blackjack:bjyouturn");
	PlayerTextDrawLetterSize(playerid, bj_panel_info[playerid], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, bj_panel_info[playerid], 326.133239, 106.026657);
	PlayerTextDrawAlignment(playerid, bj_panel_info[playerid], 1);
	PlayerTextDrawColor(playerid, bj_panel_info[playerid], -1);
	PlayerTextDrawSetShadow(playerid, bj_panel_info[playerid], 0);
	PlayerTextDrawSetOutline(playerid, bj_panel_info[playerid], 0);
	PlayerTextDrawFont(playerid, bj_panel_info[playerid], 4);
	
}

alias:freeze("fz")
CMD:freeze(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 1)
    return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
  
    if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /unfreeze [id ??????]");

    extract params -> new to_player;
 
    if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
    return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
   
	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");
 
    TogglePlayerControllable(to_player, 0); 
 
    new fmt_msg[999];
  
    format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ????????? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
    SendMessageToAdmins(fmt_msg, 0x999999FF);
  
    format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ?????????? %s[%d]", GetPlayerNameEx(to_player), to_player);
    SendClientMessage(playerid, -1, fmt_msg);
  
    format(fmt_msg, sizeof fmt_msg, "{1E90FF}????????????? %s[%d] ????????? ?????? ?????????.", GetPlayerNameEx(playerid), playerid);
    SendClientMessage(to_player, -1, fmt_msg);
  
    return true;
}

alias:unfreeze("unfz")
CMD:unfreeze(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 1)
    return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

    if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /unfreeze [id ??????]");

    extract params -> new to_player;

    if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
    return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
 
    TogglePlayerControllable(to_player, 1); 
 
    new fmt_msg[999];
 
    format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ?????????? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
    SendMessageToAdmins(fmt_msg, 0x999999FF); 
 
    format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ??????????? %s[%d]", GetPlayerNameEx(to_player), to_player);
    SendClientMessage(playerid, -1, fmt_msg);
 
    format(fmt_msg, sizeof fmt_msg, "{1E90FF}????????????? %s[%d] ?????????? ?????? ?????????.", GetPlayerNameEx(playerid), playerid);
    SendClientMessage(to_player, -1, fmt_msg);
 
    return true;
}

stock Showmenus(playerid,menus)
{
    new BitStream:bitstream = BS_New();
    BS_WriteValue(bitstream, PR_UINT8, PACKET_CUSTOMRPC);
    BS_WriteValue(bitstream, PR_UINT32, 0x84); 

    BS_WriteValue(bitstream, PR_INT32, menus);

    BS_Send(bitstream, playerid);

    BS_Delete(bitstream);

    return true;
}

CMD:menus(playerid)
{
 Showmenus(playerid,84);
}

CMD:arules(playerid)
{
    if(GetPlayerAdminEx(playerid)< 1) return SendClientMessage(playerid, -1, "{FFFF00}| {ffffff}??? ?? ???????? ?????ù ???????!");
    Dialog
      (
		playerid, DIALOG_NG, DIALOG_STYLE_MSGBOX,
		"{F81414}BLACK RUSSIA | {FFFFFF}??????? ???????",
		"{FF0000}?????????ù? ???????????????:\n\
		{FFFFFF}-???????? ?? ?????? ??????\n\
        {FFFFFF}-??????? ?? ??????????? ????\n\
        {FFFFFF}-??????? ?? ?????? ????????\n\
        {FFFFFF}-???????? ???????\n\
        {FFFFFF}-??????? ??????? ?? ?????\n\n\
        {FF0000}??????????????? ?????????:\n\
        {FFFFFF}-??????????? ? ??????\n\
        {FFFFFF}-???????????? ?????????ù ??????????????\n\
        {FFFFFF}-???????? ????????? ? ????????\n\
        {FFFFFF}-????????ù???ù ???????\n\
        {FFFFFF}-???ù?? ????? ???? ??? ? ????ù???????\n\
        {FFFFFF}-????????? ???????ù ???????????????\n\
        {FFFFFF}-???????????? ??????? ??????? ? ???????\n\
        {FFFFFF}-?????? ????? ???? ??????????ù!\n\
        {FFFFFF}-???????? ?????.?????? ??? ???????\n\n\
        {FFA500}????????ù:\n\
        {FFFFFF}-DM - /jail ?? 5 ???\n\
        {FFFFFF}-Dm in zz - /jail 10-30 ???\n\
        {FFFFFF}-MG - ??? ?? 5-10 ???\n\
        {FFFFFF}-??? - 10-20 ????? ????\n\
        {FFFFFF}-????(????) - ??? ?? 10-30 ????.\n\
        {FFFFFF}-??????/???? ? ?????? - 5-15??? ????\n\
        {FFFFFF}-?heat - ??? 5-30\n\
        {FFFFFF}-??????? - /banpc 30 ????.\n\
        {FFFFFF}-?????? -  /jail 10-20???.\n\
        {FFFFFF}-Non rp cop - /warn ??? /jail 15-30 ?????.",
        "????????", "");
        return 1;
}

CMD:wf(playerid, params[])
{
 new string[32];
 format(string, sizeof(string), "??? ??????????? ???: %d", GetPlayerVirtualWorld(playerid));
 SendClientMessage(playerid,0xFFFFFFFF,string);
 return 1;
}
cmd:menuhud(playerid)
{
	Dialog
	(
	playerid,DIALOG_MENUHUD,DIALOG_STYLE_LIST,
	"Powerful Russia | ?????????",
	"1. ?????? ???\n\
	2. ???????? ???\n\
	3. ?????? ???\n\
	4. ???????? ???",
	"???????","???????"
	);
	return 1;
}

CMD:helpers(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) == 0 && GetPlayerPremium(playerid) == 0)
        return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? VIP ????????.");

    new fmt_text[128], list[1024] = "???????\t?????????\t?????????ù\n";
    new helperIDs[MAX_PLAYERS], helperCount = 0;

    foreach(new i : Player)
    {
        if(!IsPlayerConnected(i) || !IsPlayerLogged(i)) continue;

        new Helper = GetPlayerHelperEx(i);
        if(Helper == 0) continue;

        helperIDs[helperCount++] = i;
    }

    for (new x = 0; x < helperCount - 1; x++)
    {
        for (new y = x + 1; y < helperCount; y++)
        {
            if (GetPlayerHelperEx(helperIDs[x]) < GetPlayerHelperEx(helperIDs[y]))
            {
                new temp = helperIDs[x];
                helperIDs[x] = helperIDs[y];
                helperIDs[y] = temp;
            }
        }
    }

    for (new i = 0; i < helperCount; i++)
    {
        new id = helperIDs[i];
        new Helper = GetPlayerHelperEx(id);
        new rank_text[32];

        if (Helper == 1) rank_text = "????? ????????? (1)";
        else if (Helper == 2) rank_text = "??????? ????? ????????? (2)";
        else continue;

        format(fmt_text, sizeof fmt_text, "%s[%d]\t%s\t{66CC33}? ????\n",
            GetPlayerNameEx(id), id, rank_text);
        strcat(list, fmt_text);
    }

    Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_TABLIST_HEADERS, "{DC143C}"SERVER_NAME"{ffffff} | ????????? ? ????", list, "???????", "");
    return 1;
}

CMD:tehnical(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 7) return ShowNotificationDefault(playerid, 2, 5, 2, 1, "??? ???????.");
    whitelist = true;
    SendClientMessage(playerid, 0xCECECEFF, "?? ??????? ??????? ?????? ?? ??????????? ??????!");
    SendClientMessageToAll(COLOR_RED, "????????!");
    SendClientMessageToAll(COLOR_RED, "?????? ?????? ?? ??????????? ??????!");
    return 1;
}

CMD:tehnicaloff(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 7) return ShowNotificationDefault(playerid, 2, 5, 2, 1, "??? ???????.");
    whitelist = false;
    SendClientMessageToAll(0xCECECEFF, "{00FF00}?????? ????? ?????? ??ù ?????.");
    return 1;
}



CMD:inforestart(playerid)
{
    if(GetPlayerAdminEx(playerid)< 6) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
    new fmt_msg[999];
    format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ??????????????? ?????? ? ???????? ???????.", GetPlayerNameEx(playerid), playerid);
    SendMessageToAdmins(fmt_msg, 0x999999FF);
for(new i = 0; i < 20; i++)
	{
		SendClientMessageToAll(-1, "");
	}    
    SendClientMessageToAll(COLOR_RED, "{FF5533}????????? ??????, ????? 1 ?????? ??????? ??????????? ??????? ???????.");
    SendClientMessageToAll(COLOR_RED, "{FF5533}????????? ??????, ????? 1 ?????? ??????? ??????????? ??????? ???????.");
    SendClientMessageToAll(COLOR_RED, "{FF5533}????????? ??????, ????? 1 ?????? ??????? ??????????? ??????? ???????.");
    return 1;
}

CMD:tskin(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 4) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}??? ?? ???????? ?????ù ???????!");

 	SetPlayerSkin(playerid, 303);
  	SendClientMessage(playerid, COLOR_WHITE, "{ffff00}|{ffffff} ?? ??????? ?????? ???? ???????!");
    return 1;
    ShowNotificationDefault(playerid, 1, 5, 1, 1, "{FF6347}?????? ????, {FFFFFF}????????? {7FFF00}??????");
}

CMD:setap(playerid, params[])
{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
    if(GetPlayerAdminEx(playerid) < 7) return 1;

    extract params -> new to_player; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /sethelper [id ??????]");

    if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player) || to_player == playerid)
        return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

    if(GetPlayerHelperEx(to_player))
        return SendClientMessage(playerid, 0x999999FF, "????? ??? ????? ?? ????? ????? ??????????");

    SetPlayerData(to_player, P_HELPER, 2);
    UpdatePlayerDatabaseInt(to_player, "helper", 2);

    new fmt_text[128];

    format(fmt_text, sizeof fmt_text, "{1E90FF}?? ???? ????????? ?? ???? ???????? ????? ?????????? ???????????????", GetPlayerNameEx(playerid), playerid);
    SendClientMessage(to_player, 0xFF5533FF, fmt_text);

    format(fmt_text, sizeof fmt_text, "[A] ????????????? %s[%d] ???????? %s[%d] ?? ???? ????ù???? ????? ??????????",
    GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);

    SendMessageToAdmins(fmt_text, 0xFF5533FF);

    format(fmt_text, sizeof fmt_text, "???????? %s[acc:%d] ?? ???? ????ù???? ????? ??????????", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player));
    SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_text);

    return 1;
}

CMD:hc(playerid, params[])
{
    new level = GetPlayerHelperEx(playerid);
    if(level >= 1)
    {
        if(!strlen(params))
            return SendClientMessage(playerid, 0xCECECEFF, "???????????: /hc [?????]");

        new fmt_str[128], rank_text[32];
        rank_text = (level == 1) ? "????? ????????? (1)" : "??. ????? ????????? (2)";

        format(fmt_str, sizeof fmt_str, "{009933}*%s {FFFFFF}%s[%d]: %s", rank_text, GetPlayerNameEx(playerid), playerid, params);
        SendMessageToHelpers(fmt_str, 0x99CC00FF);
    }

    return 1;
}

CMD:hhelp(playerid)
{
    if(GetPlayerHelperEx(playerid) < 1) return 1;

  Dialog
    (
        playerid, DIALOG_HHELP, DIALOG_STYLE_MSGBOX,
        "{DC143C}"SERVER_NAME"{ffffff} | ??????? ????? ??????????",
        "{ffff00}- ?????? ???????\n\
         \n\
        {EB4C42}/ask{ffffff} - ????? ?? ?????? ??????.\n\
        {EB4C42}/hstats{ffffff} - ???? ??????????\n\
        {EB4C42}/hhelp{ffffff} -?????? ?????? ?????????\n\
        {EB4C42}/helpers{ffffff} -?????? ??????????\n\
        {EB4C42}/hc {808080}[?????]{ffffff} - ??? ??????????",
        "?????"
    );
 return 1;
}

CMD:topfam(playerid)
{
new fmt_text[75],
  list[sizeof fmt_text * 10 + 50] = "???????? ???? - ?????{FFFFFF}\n";
  Dialog(playerid, DIALOG_HELPERLIST, DIALOG_STYLE_MSGBOX, "{FFCD00}ù?? 5 ???", list, "???????", "");
  }

new timer_strobocop[MAX_VEHICLES];
new bool:status_strobocop[MAX_VEHICLES];
new count_strobrscop[MAX_VEHICLES];
new panels, tires;

CMD:strob(playerid)
{
    if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return true;
    new vehicleid = GetPlayerVehicleID(playerid);
    count_strobrscop[vehicleid] = 0;
    if(!status_strobocop[vehicleid])
    {
        timer_strobocop[vehicleid] = SetTimerEx("function_strobocop",200,true,"i",vehicleid);
        status_strobocop[vehicleid] = true;
        return true;
    }
    KillTimer(timer_strobocop[vehicleid]);
    status_strobocop[vehicleid] = false;
    GetVehicleDamageStatus(vehicleid, panels, doors, lights, tires);
    UpdateVehicleDamageStatus(vehicleid, panels, doors, 0, tires);
    return true;
}

forward function_strobocop(vehicleid);
public function_strobocop(vehicleid)
{
    GetVehicleDamageStatus(vehicleid, panels, doors, lights, tires);
    switch(count_strobrscop[vehicleid])
    {
        case 0: UpdateVehicleDamageStatus(vehicleid, panels, doors, 1, tires), count_strobrscop[vehicleid] = 1;
        case 1: UpdateVehicleDamageStatus(vehicleid, panels, doors, 4, tires), count_strobrscop[vehicleid] = 2;
        case 2: UpdateVehicleDamageStatus(vehicleid, panels, doors, 65,tires), count_strobrscop[vehicleid] = 3;
        case 3: UpdateVehicleDamageStatus(vehicleid, panels, doors, 68,tires), count_strobrscop[vehicleid] = 0;
    }
    return true;
}



CMD:hstats(playerid)
{
if(GetPlayerHelperEx(playerid) < 1) return 1;

 new fmt_text[978];
 format(fmt_text, sizeof(fmt_text),
 "{FFFFFF}?????????? ????? ??????????: {FFFF00}%s\n"\
 "{FFFFFF}????????? ???????????????: {FFFF00} %s \n"\
 "{FFFFFF}???? ? ????ù ??????: {FFFF00}2024-30-01 17:46:32\n"\
 "{FFFFFF}????????? ????: {FFFF00}2024-23-09 22:06:32\n"\
 " \n"\
 "{ffff00}| {FFFFFF}?????????? ??????? {ffff00}| {FFFFFF}????ù ? ???? {ffff00}| {FFFFFF}????ù ? ???\n"\
 " \n"\
 "{ffffff}6?. ?????: {FFFF00} %d {ffffff}??? {ffffff}| 00:00 | 00:00\n"\
 "5?. ?????: {FFFF00} 0 {ffffff}??? {ffffff}| 00:00 | 00:00\n"\
 "4?. ?????: {FFFF00} 0 {ffffff}??? {ffffff}| 00:00 | 00:00\n"\
 "3?. ?????: {FFFF00} 0 {ffffff}??? {ffffff}| 00:00 | 00:00\n"\
 "?????????: {FFFF00} 0 {ffffff}??? {ffffff}| 00:00 | 00:00\n"\
 "?????: {FFFF00} 0 {ffffff}??? {ffffff}| 00:00 | 00:00\n"\
 "??????ù: {FFFF00} 0 {ffffff}??? {ffffff}| 00:00 | 00:00\n"\
 " \n"\
 " \n"\
 "????? ???????: %d {ffff00} | {FFFFFF}????? ? ???? - 52:12 {ffff00} | {ffffff} ????? ??? - 0:00\n",
 GetPlayerNameEx(playerid),
 GetPlayerNameEx(playerid), playerid,
 InfoHstats[0]
);
ShowPlayerDialog(playerid, 8193, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ?????????? ????? ??????????", fmt_text, "???????", "");
return 1;
}

CMD:givevb(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_ARMY)
		return SendClientMessage(playerid, COLOR_GREY, "?? ?? ???????? ? ?????.");

	if(GetPlayerJob(playerid) < 9)
		return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 9-?? ?????.");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	if(!strlen(params))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /givevb [id ??????]");


	extract params -> new to_player;

	if(to_player == playerid)
		return SendClientMessage(playerid, COLOR_GREY, "?????ù ?????? ????? ????.");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ???????????.");

	if(GetPlayerTeamEx(to_player) != TEAM_ARMY)
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????? ? ?????.");

	if(GetPlayerJob(to_player) < 3)
		return SendClientMessage(playerid, COLOR_GREY, "????? ?????? ????? ???? ?? 3 ? ????.");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 10.0))
		return SendClientMessage(playerid, COLOR_GREY, "????? ??????? ??????.");

	new voen_num = GetNextMilitaryID();

	new kem_dal[32];
	format(kem_dal, sizeof kem_dal, "%s", GetPlayerNameEx(playerid));

	new zvanie[32];
	format(zvanie, sizeof zvanie, "%s", GetPlayerJobAndRankName(to_player));

	new date[16];
	GetFormattedDate(date);

	UpdatePlayerDatabaseInt(to_player, "voenbilet", 1);
	UpdatePlayerDatabaseInt(to_player, "nomerbilet", voen_num);
	UpdatePlayerDatabaseString(to_player, "kemdanvb", kem_dal);
	UpdatePlayerDatabaseString(to_player, "zvaniebilet", zvanie);
	UpdatePlayerDatabaseString(to_player, "databilet", date);

	SetPlayerData(to_player, P_VOENBILET, 1);
	SetPlayerData(to_player, P_VOENBILET_NUM, voen_num);
	format(GetPlayerData(to_player, P_VOENBILET_KEM), 32, "%s", kem_dal);
	format(GetPlayerData(to_player, P_VOENBILET_ZVANIE), 32, "%s", zvanie);
	format(GetPlayerData(to_player, P_VOENBILET_DATE), 16, "%s", date);

	new fmt_sos[144];
	format(fmt_sos, sizeof fmt_sos, "%s %s ????? ??????? ????? ??????? %s",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		GetPlayerNameEx(to_player)
	);

	if(!GetPlayerTeamEx(playerid))
	{
		SendMessageToJob(GetPlayerJob(playerid), fmt_sos);
		SendClientMessage(playerid, -1, "????????");
	}
	else
	{
		SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_sos, 0x33CC66FF);
	}

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "%s %s ????? ??? ??????? ????? {FFFFFF}({FFFF00}/showvb {FFFFFF}??ù ?????????)",
		GetPlayerJobAndRankName(playerid),
		kem_dal
	);
	SendClientMessage(to_player, COLOR_BLUE, fmt_msg);

	return 1;
}

CMD:showvb(playerid, params[])
{
    if(GetPlayerData(playerid, P_VOENBILET) != 1)
        return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ???????? ??????.");

    if(!strlen(params)) return SendClientMessage(playerid, COLOR_GREY, "???????????: /showvb [id ??????]");

    extract params -> new to_player;

    if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ???????????.");
    if(!IsPlayerInRangeOfPlayer(playerid, to_player, 10.0)) return SendClientMessage(playerid, COLOR_GREY, "????? ??????? ??????.");

    SendClientMessage(playerid, COLOR_BLUE, "?? ?????????? ???????? ??????? ?????.");
    SendPlayerOffer(playerid, to_player, OFFER_TYPE_SHOWVB);
    return 1;
}

CMD:base(playerid, params[])
{
   if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");
   
	new fmt_text[125], list[sizeof(fmt_text)*10];

	for(new i = 0; i < MAX_PLAYERS; i++)
	{
		if(!IsPlayerConnected(i)) continue;
		else if(!IsPlayerLogged(i)) continue;
		else if(!GetPlayerSuspect(i)) continue;
        
		format(fmt_text, sizeof fmt_text, "{FFFFFF}#%d. {FFFF00}%s[%d]{FFFFFF} - ??????? ???????: {FFFF00}%d\n", i+1, GetPlayerNameEx(i), i, GetPlayerSuspect(i));
		strcat(list, fmt_text);
		SetPlayerListitemValue(playerid, i, i);
	}

	Dialog(playerid, DIALOG_PBASE, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{ffffff} | ?????? ????????????", list, "?????", "???????");

	return 1;
}



CMD:med(playerid, params[])
{
    if (GetPlayerData(playerid, P_MEDCARD) != 1)
        return SCM(playerid, COLOR_GREY, "? ??? ??? ??????????? ?????.");

    if (!strlen(params))
        return SCM(playerid, COLOR_GREY, "???????????: /med [id ??????]");

    extract params -> new to_player;

    if (!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
        return SCM(playerid, COLOR_GREY, "????? ?? ???????????.");

    if (!IsPlayerInRangeOfPlayer(playerid, to_player, 10.0))
        return SCM(playerid, COLOR_GREY, "????? ??????? ??????.");

    SCM(playerid, COLOR_BLUE, "?? ?????????? ???????? ??????????? ?????.");
    SendPlayerOffer(playerid, to_player, OFFER_TYPE_SHOWMED);
    return 1;
}




CMD:permban(playerid, params[])

{
    if(TEST_SERVER == 1) return SendClientMessage(playerid, -1, "{ff2400}| {ffffff}?????ù ??????? ?? ???????? ?? ù??ù ???????!");
	if(GetPlayerAdminEx(playerid) < 7) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
	if(!strlen(params)) return SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /permban [ID ??????] [???????]");
	extract params -> new to_player, string:reason[30];
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
	return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
	new ban_time = 9999;
	new fmt_msg[999];
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");
	if(AntiSliv(playerid, "/permban")) return true;
	format(fmt_msg, sizeof fmt_msg, "????????????? %s ???????? ???????????? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(to_player));
	if(strlen(reason) > 0)
	format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, reason);
	SendClientMessageToAll(0xFF5533FF, fmt_msg);
	if(!strlen(reason)) reason = "None";
	format(fmt_msg, sizeof fmt_msg, "??????? %s[acc:%d] ????????. ??????? %s", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), reason);
	SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_msg);
	
    AddAdminStat(playerid, "bans_total", P_BANS_TOTAL);
	AddAdminStat(playerid, "bans_today", P_BANS_TODAY);
	
	AddBan(GetPlayerAccountID(to_player), gettime(), ban_time, reason, GetPlayerNameEx(playerid));

	return 1;

}


stock LoadSvetfor()
{
    for(new i; i < sizeof SvetforsPos; i++)
    {
        CreateObject(931, SvetforsPos[i][0], SvetforsPos[i][1], SvetforsPos[i][2], 0,0,SvetforsPos[i][3]);
        
        if(SvetforsType[i] == 1)
        {
            SvetforsColor[i] = CreateObject(930, SvetforsPos[i][0], SvetforsPos[i][1], SvetforsPos[i][2], 0,0,SvetforsPos[i][3]);
            SetTimerEx("SvetforsChangeColor", 25000, false, "ddd", i, 1, 0);
        }
        else
        {
            SvetforsColor[i] = CreateObject(928, SvetforsPos[i][0], SvetforsPos[i][1], SvetforsPos[i][2], 0,0,SvetforsPos[i][3]);
            SetTimerEx("SvetforsChangeColor", 25000, false, "ddd", i, 3, 0);
        }
    }
}

forward SvetforsChangeColor(i, type, step);
public SvetforsChangeColor(i, type, step)
{
    switch(type)
    {
        case 1:
        {
            DestroyObject(SvetforsColor[i]);
            SvetforsColor[i] = CreateObject(929, SvetforsPos[i][0], SvetforsPos[i][1], SvetforsPos[i][2], 0,0,SvetforsPos[i][3]);
            SetTimerEx("SvetforsChangeColor", 3000, false, "ddd", i, 2, 1);
        }
        case 2:
        {
            DestroyObject(SvetforsColor[i]);
            if(step == 1)
            {
                SvetforsColor[i] = CreateObject(928, SvetforsPos[i][0], SvetforsPos[i][1], SvetforsPos[i][2], 0,0,SvetforsPos[i][3]);
                SetTimerEx("SvetforsChangeColor", 25000, false, "ddd", i, 3, 0);
            }
            else
            {
                SvetforsColor[i] = CreateObject(930, SvetforsPos[i][0], SvetforsPos[i][1], SvetforsPos[i][2], 0,0,SvetforsPos[i][3]);
                SetTimerEx("SvetforsChangeColor", 25000, false, "ddd", i, 1, 0);
            }
        }
        case 3:
        {
            DestroyObject(SvetforsColor[i]);
            SvetforsColor[i] = CreateObject(929, SvetforsPos[i][0], SvetforsPos[i][1], SvetforsPos[i][2], 0,0,SvetforsPos[i][3]);
            SetTimerEx("SvetforsChangeColor", 3000, false, "ddd", i, 2, 2);
        }
    }
}


CMD:rem(playerid, params[])
{
   if(!IsPlayerDriver(playerid)) return SendClientMessage(playerid, COLOR_WHITE, ""USC"?? ?????? ?????????ù ? ??????????");
   Action(playerid, "?????????? ?????? ????????????");
   ShowNotificationDefault(playerid, 1, 5, 1, 1, "?? ??????? ??????????? ?????? ????????????");
}

CMD:remoff(playerid, params[])
{
   if(!IsPlayerDriver(playerid)) return SendClientMessage(playerid, COLOR_WHITE, ""USC"?? ?????? ?????????ù ? ??????????");
   Action(playerid, "????????? ?????? ????????????");
   ShowNotificationDefault(playerid, 1, 5, 1, 1, "?? ??????? ?????????? ?????? ????????????");
}

CMD:delveh(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 4) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
    if(!IsPlayerInAnyVehicle(playerid)) return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ????? ?????????ù");
    if(GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return true;
    if(GetVehicleData(GetPlayerVehicleID(playerid), V_ACTION_TYPE) == VEHICLE_ACTION_TYPE_ADMIN_CAR)
    {
	    RemovePlayerFromVehicle(playerid);
	    n_veh_DestroyVehicle(GetPlayerVehicleID(playerid));
	    SendClientMessage(playerid, 0xCECECEFF, ""SC"?? ??????? ????????? ?????????");
	
	    new fmt_msg[999];
	
    	format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ?????? ????????? ?????????", GetPlayerNameEx(playerid), playerid);
    	SendMessageToAdmins(fmt_msg, 0x999999FF);
	}
	return true;
}

CMD:reset_cash(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
	//else if(admin_logged[playerid] == false) return SendClientMessage(playerid, 0x999999FF, "?? ?? ??????????????, ??ù ????? ??????????? /alogin");

	extract params -> new to_player, cash; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /reset_cash [ID ??????] [c????]");
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
		
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	new reason[999];
	new fmt_msg[999];
	format(reason, sizeof reason, "{1E90FF}????????????? %s[%d] ??????? ??? ??????", GetPlayerNameEx(playerid), playerid);
	GivePlayerMoneyEx(to_player, -cash, reason, true, true);
	SendClientMessage(to_player, 0x66CC00FF, reason);
	
    format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ??????? ?????? ?????? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
    SendMessageToAdmins(fmt_msg, 0x999999FF);	

	format(reason, sizeof reason, "{1E90FF}?? ???????? %s %d ??????", GetPlayerNameEx(to_player), cash);
	SendClientMessage(playerid, 0x66CC00FF, reason);

	format(reason, sizeof reason, "??????? %s[%d] %d ???", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), cash);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, reason);
	return 1;
}

CMD:reset_donate(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
	//else if(admin_logged[playerid] == false) return SendClientMessage(playerid, 0x999999FF, "?? ?? ??????????????, ??ù ????? ??????????? /alogin");

	extract params -> new to_player, donate; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /reset_donate [ID ??????] [c????]");
	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");
		
	if(playerid == to_player)
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

	if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(to_player))
    return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

	new reason[999];
	new fmt_msg[999];
	format(reason, sizeof reason, "{1E90FF}????????????? %s[%d] ??????? ??? ?????", GetPlayerNameEx(playerid), playerid);
	GivePlayerDonateRub(to_player, -donate, reason, true, true);
	SendClientMessage(to_player, 0x66CC00FF, reason);
	
    format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ??????? ????? ?????? %s[%d]", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player);
    SendMessageToAdmins(fmt_msg, 0x999999FF);		

	format(reason, sizeof reason, "{1E90FF}?? ???????? %s %d ??????", GetPlayerNameEx(to_player), donate);
	SendClientMessage(playerid, 0x66CC00FF, reason);

	format(reason, sizeof reason, "??????? %s[%d] %d ??????", GetPlayerNameEx(to_player), GetPlayerAccountID(to_player), donate);
	SendLog(playerid, LOG_TYPE_ADMIN_ACTION, reason);
	return 1;
}

CMD:givevip(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
	extract params -> new to_player, premium, days; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /givevip [ID ??????] [??????? ???????-????????] [????ù (? ??ù?)]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???. ");

	if(!(1 <= premium <= 3)) return SendClientMessage(playerid, 0x999999FF, "??????? ???????-???????? ?? 1 ?? 3 (????? ????????, ??????????? ???-?? ????: 0)");

	if(!(0 <= days <= 30)) return SendClientMessage(playerid, 0x999999FF, "?????????? ???? ?? 0 ?? 30");

	new fmt_msg[999];

	new premium_rank[3][17] =
	{
		"{C0C0C0}Silver",
		"{FFD700}Gold",
		"{E5E4E2}Platinum"
	};

	SetPlayerData(to_player, P_PREMIUM, premium);
	SetPlayerData(to_player, P_PREMIUM_TIME, gettime() + days * 86400);

	UpdatePlayerDatabaseInt(to_player, "premium", premium);
	UpdatePlayerDatabaseInt(to_player, "premium_time", gettime() + days * 86400);

	format(fmt_msg, sizeof fmt_msg, "%s ????? ??? %s {3399FF}???????-??????? ?? %d ??.", GetPlayerNameEx(playerid), premium_rank[premium - 1], days);
	SendClientMessage(to_player, 0x3399FFFF, fmt_msg);

	format(fmt_msg, sizeof fmt_msg, "?? ?????? %s %s {3399FF}???????-??????? ?? %d ??.", GetPlayerNameEx(to_player), premium_rank[premium - 1], days);
	SendClientMessage(playerid, 0x3399FFFF, fmt_msg);


	return 1;
}

CMD:epoints(playerid)
{
	if(GetPlayerAdminEx(playerid) < 1) return 0;

	new fmt_str[300];

	format(str, sizeof str, "{DC143C}"SERVER_NAME"{ffffff} | ??????: {EB4C42}%d", GetPlayerData(playerid, P_ACOINS));
	 
	Dialog
		(
			playerid, DIALOG_ADMSHOP, DIALOG_STYLE_LIST, 
			str, 		
			"{EB4C42} #1 {FFFFFF}??????????ù ??????\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
			"{EB4C42} #2 {FFFFFF}???????ù ??????\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
			"{EB4C42} #3 {FFFFFF}??? ???????\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
			"{EB4C42} #4 {FFFFFF}?????\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
			"{EB4C42} #5 {FFFFFF}?????????? ??????????(? ??????????)\t\t\t\t\t {888888} ??????? ??ù ?????????????ù",
			"???????", "???????"
		);
}
CMD:giveepoints(playerid, params[])
{
	if(GetPlayerAdminEx(playerid) < 6) return 1;

	extract params -> new to_player, acoins; else return SendClientMessage(playerid, 0xCECECEFF, "???????????: /giveepoints [id ??????] [c????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, 0xCECECEFF, "ù????? ?????? ???");

	if(!(-1 <= acoins <= 100_000)) return SendClientMessage(playerid, 0xCECECEFF, "????? ???????? ?? 1 ?? 10000 ?????? ?? ???? ???");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player))
		return SendClientMessage(playerid, -1, ""USC" ????? ?? ? ????!");
		
	new fmt_text[999];
	
    format(fmt_text, sizeof fmt_text, "{FFFFFF}????????????? {ffff00}%s {FFFFFF}????? ??? {ffff00}%d {FFFFFF}?????(-??) ??????.", GetPlayerNameEx(playerid), acoins);
	SendClientMessage(to_player, -1, fmt_text);
	
	format(fmt_text, sizeof fmt_text, "{FFFFFF}????? ????????? ????? ?????????????? ??????????? ????????: {ffff00}/epoints");
	SendClientMessage(to_player, -1, fmt_text);	
	
	format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????? ????? ??ù ?????? %s[%d] ???-?? %d ??????, ? ????? ? ?????? %d ??????", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(to_player), to_player, acoins, GetPlayerMoneyEx(to_player));
	SendMessageToAdmins(fmt_text, 0xCECECEFF);	

    AddPlayerData(playerid, P_ACOINS, +, acoins);
	UpdatePlayerDatabaseInt(playerid, "acoins", GetPlayerData(to_player, P_ACOINS) - 450);
	return 1;
}

stock GivePlayerCar(playerid, modelid, color_1, color_2)
{

		if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
		{
			SendClientMessage(playerid, 0x3399FFFF, "??? ????? ??ù ?????????? ???ù??. ?? ?????? ????????? ??: {FFFF00}/menu > ?????????????");
			return -1;
		}
		
		if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
		{
			SendClientMessage(playerid, 0x999999FF, "??ù ??????? ?????????? ????? ????????? ??? ??????????? ????????? ? ???????");
			return -1;
		}

		new buy_cars_count = cars_after_purchase_count[2]++;

		if(buy_cars_count >= 4)
			cars_after_purchase_count[2] = 0;

		new Float: pos_x = cars_pos_after_purchase[2][buy_cars_count][0];
		new Float: pos_y = cars_pos_after_purchase[2][buy_cars_count][1];
		new Float: pos_z = cars_pos_after_purchase[2][buy_cars_count][2];
		new Float: angle = cars_pos_after_purchase[2][buy_cars_count][3];

		new query[220],
			Cache: result,
			idx;

		idx = GetFreeOwnableCarID();

		SetOwnableCarData(idx, OC_OWNER_ID, 	GetPlayerAccountID(playerid));

		SetOwnableCarData(idx, OC_MODEL_ID, 	modelid);
		SetOwnableCarData(idx, OC_COLOR_1, 		color_1);
		SetOwnableCarData(idx, OC_COLOR_2, 		color_2);

		SetOwnableCarData(idx, OC_POS_X, 		pos_x);
		SetOwnableCarData(idx, OC_POS_Y, 		pos_y);
		SetOwnableCarData(idx, OC_POS_Z, 		pos_z);
		SetOwnableCarData(idx, OC_ANGLE, 		angle);

		strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

		SetOwnableCarData(idx, OC_ALARM, 		false);
		SetOwnableCarData(idx, OC_KEY_IN, 		false);

		SetOwnableCarData(idx, OC_CREATE, 		gettime());

		format(g_ownable_car[idx][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));
		// ----------------------------------------------------------------------------------------

		new vehicleid = CreateVehicle
		(
			GetOwnableCarData(idx, OC_MODEL_ID),
			GetOwnableCarData(idx, OC_POS_X),
			GetOwnableCarData(idx, OC_POS_Y),
			GetOwnableCarData(idx, OC_POS_Z),
			GetOwnableCarData(idx, OC_ANGLE),
			GetOwnableCarData(idx, OC_COLOR_1),
			GetOwnableCarData(idx, OC_COLOR_2),
			-1,
			0,
			VEHICLE_ACTION_TYPE_OWNABLE_CAR,
			idx
		);
		if(vehicleid != INVALID_VEHICLE_ID)
		{
			//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
			//index = GetVehicleData(vehicleid, V_ACTION_ID);
			format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
			SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
			SetVehicleParam(vehicleid, V_LOCK, false);

			SetVehicleData(vehicleid, V_MILEAGE, 0.0);
		}

		SetPlayerData(playerid, P_OWNABLE_CAR, vehicleid);

		format
		(
			query, sizeof query,
			"INSERT INTO ownable_cars \
			(owner_id,model_id,color_1,color_2,pos_x,pos_y,pos_z,angle,create_time) \
			VALUES \
			('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
			GetPlayerAccountID(playerid),
			modelid,
			color_1,
			color_2,
			pos_x,
			pos_y,
			pos_z,
			angle,
			gettime()
		);
		result = mysql_query(mysql, query, true);

		SetOwnableCarData(idx, OC_SQL_ID, cache_insert_id());

		cache_delete(result);
		
		launch[playerid] = 0;
		diski[playerid] = 0;
		fars[playerid] = 0;
		nitro[playerid] = 0;
		SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}??ù ???????? ?????????? ??????????????{ffff00} ???? - ù????????.");
	    SendClientMessage(playerid, 0x66CC00FF, "{FFFFFF}??? ??????????????{ffff00} ?????????.");
		UnloadPlayerOwnableCar(playerid);

		return 1;
}

stock ShowPlayerPromoActive(playerid)
{
	Dialog
	(
		playerid, DIALOG_PROMO_ACTIVATE, DIALOG_STYLE_INPUT,
		"{ff0000}????????",
		"{FFFFFF}??????? ???????? ??????? ? ???? ????:",
		"?????", "??????"
	);
}

stock ShowPlayerYtPromoActive(playerid)
{
    if(GetPlayerData(playerid, P_YTPROMO_ACTIVATE) == 1) return Send(playerid, COR_RED, "[??????]: "c_b"?????????? ???????? ????? ???????????? ?????? ???? ???!");

	Dialog
	(
		playerid, DIALOG_YTPROMO_ACTIVATE, DIALOG_STYLE_INPUT,
		"{ff0000}?????????? ???????",
		"{FFFFFF}??????? ???????? ??????? ? ???? ????:",
		"?????", "??????"
	);
}

stock ShowPlayerPromoCreate(playerid)
{
	Dialog
	(
		playerid, DIALOG_V2PROMO_CREATE, DIALOG_STYLE_INPUT,
		"{ff0000}???????? ?????????",
		"{ffff00}???????? {FFFFFF}- ?????????? ????? ??????, ??????ù???? ??? ? ????????, ????????????? ??? ???????? ???????? ??????????????\n"\
		"?? ?????? ???????ù?????? ??????? {ffff00}???? ????????{FFFFFF}, ??? ??????? ??? ?? ????????.\n\n"\
		"{ffff00}?????????: {FFFFFF}???????? ?????? ?????????\n\n"\
		"{ffff00}??????????:\n"\
		"{FFFFFF}- ??? ????? ????????? ?? 1 ?? 30 ????????\n"\
		"- ù?? ?????? ?????(??ù????????, ????? ???????? ??????) 0\n"\
		"- ?????????? ?? 25.000 ?? 50.000\n"\
		"- ?????????? ????????????? ?? 1 ?? 500\n"\
		"- ??????? ????? ???????? ??????? ??? ???????? ?????????????? ?? 3 ?? 8\n"\
		"?? ?????? ???????????? {ffff00}???????? ? ????????, # ? ?????.\n\n"\
		"{FFFFFF}???????? ????????? ????? {ffff00}3.000.000 {FFFFFF}??????.\n\n"\
        "{FFFFFF}??ù ???????ù ????????? ??????? ? ???? ???? ???????? ????? ??????.\n",
		"?????", "??????"
	);
}


CMD:promo(playerid, params[])
{
	Dialog
	(
		playerid, DIALOG_ACT_PROMO, DIALOG_STYLE_LIST,
		"{FF0000} ????????",
		"{EB4C42} #1.    {FFFFFF}???????????? ????????\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
		"{EB4C42} #2. {FFFFFF}??????? ???????\t\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
		"{EB4C42} #3. {FFFFFF}??????? ????????\t\t\t\t\t\t\t {888888} ??????? ??ù ?????????????ù\n"\
		"{EB4C42} #4. {FFFFFF}??????? ?????\t\t\t\t\t\t\t {888888} ??????? ??ù ?????????????ù",
		"?????", "?????"
	);
	return 1;
}

CMD:testikpromo(playerid, params[])
{
Dialog
	(
		playerid, DIALOG_V2PROMO_CREATE, DIALOG_STYLE_INPUT,
		"{ff0000}???????? ?????????",
		"{ffff00}???????? {FFFFFF}- ?????????? ????? ??????, ??????ù???? ??? ? ????????, ????????????? ??? ???????? ???????? ??????????????\n"\
		"?? ?????? ???????ù?????? ??????? {ffff00}???? ????????{FFFFFF}, ??? ??????? ??? ?? ????????.\n\n"\
		"{ffff00}?????????: {FFFFFF}???????? ?????? ?????????\n\n"\
		"{ffff00}??????????:\n"\
		"{FFFFFF}- ??? ????? ????????? ?? 1 ?? 30 ????????\n"\
		"- ù?? ?????? ?????(??ù????????, ????? ???????? ??????) 0\n"\
		"- ?????????? ?? 25.000 ?? 50.000\n"\
		"- ?????????? ????????????? ?? 1 ?? 500\n"\
		"- ??????? ????? ???????? ??????? ??? ???????? ?????????????? ?? 3 ?? 8\n"\
		"?? ?????? ???????????? {ffff00}???????? ? ????????, # ? ?????.\n\n"\
		"{FFFFFF}???????? ????????? ????? {ffff00}3.000.000 {FFFFFF}??????.\n\n"\
        "{FFFFFF}??ù ???????ù ????????? ??????? ? ???? ???? ???????? ????? ??????.\n",
		"?????", "??????"
	);
	return 1;
}

CMD:checkpromo(playerid, params[])
{
    	ShowPlayerDialog(playerid, 69976, DIALOG_STYLE_MSGBOX, "{ff0000} #Back2br","{FFFFFF}?????????? ?????????\t\t{ff0000} #back2br\n  \n{FFFFFF}????? ?????????? ????????? ??????? ?????????, ??? ???????? ????? {ff0000}0 {FFFFFF}??? ? ?? ???????? {ff0000}0 {FFFFFF}??????!","?????");

}

CMD:Telegram(playerid, params[])
{
    ShowPlayerDialog(playerid, 66777, DIALOG_STYLE_MSGBOX, "{ff0000} ????ù??? ? ??????????","{FFFFFF}??? ????? ?????? ??? {ffff00}72616 {FFFFFF}? ????????? ????\n????? 5 ??????? ? ??? ????? ?????? ???\n???? ????? ?? ?????????, ????????? ?? ??????: t.me admConnect_bot\n \n ????? ???????? ????ù??? ??????? ?????? '{ffff00}?????'","?????");

}

CMD:Promocomplete(playerid, params[])
{
    	ShowPlayerDialog(playerid, 66543, DIALOG_STYLE_MSGBOX, "{DC143C}"SERVER_NAME"{ffffff} | ????????ù ?????????"," \n?? ??????? ???????????? ???????? {ffff00} #Back2br\n \n{ffffff}?? ???????? ???????:\n{EB4C42}1. {ffffff}?????????? {ffff00}Bugatti Divo {ffffff}?? {ffff00}999 {ffffff}?.\n{EB4C42} 2. {ffff00} VIP Platinum {ffffff}?? {ffff00}999 {ffffff}?.\n \n??????? ???? ????? ???????? ?? ??????? ??????ù - /promo -> ??????? ?????'","???????");

}






stock GetPromoPriz(playerid, code[])
{
    new query[144], Cache:result;
    
  
    mysql_format(mysql, query, sizeof query, "SELECT * FROM promocode WHERE code = '%s'", code);
    
   
    result = mysql_query(mysql, query, true);
    

    new rows = cache_num_rows(result);
    
    

    
    if (rows > 0)
    {
        new amount[32], paydays[32]; 
        new amountValue; 
        new paydaysValue;   
        
        amountValue = cache_get_field_content_int(0, "amount");
        paydaysValue = cache_get_field_content_int(0, "paydays");

        new fmt_e[210];
format(fmt_e, sizeof fmt_e, "{FFFF00}%s\n \n {FFFFFF}?? ???????? ???????:\n{EB4C42}1. {FFFFFF}??????ù ?????? {FFFF00}%d\n \n{FFFFFF}??????? ???? ????? ????????-/promo-??????? ?????!\n \n???ù???? ???? ?? {ffff00}BLACK RUSSIA", code, amountValue, paydaysValue);
        
cache_delete(result);

        return fmt_e; 
    }
  
}

CMD:bankomat(playerid, params[])
{
	Dialog
	(
		playerid, DIALOG_ATM, DIALOG_STYLE_LIST,
		"{FFCD00}????????",
		"1. ??ù?? ? ??????????? ?????\n"\
		"2. ???????? ?? ?????????? ????\n"\
		"3. ?????? ??????????? ?????\n"\
		"4. ??ù?? ?? ????? ???????ù??ù\n"\
		"5. ???????? ?? ???? ???????ù??ù\n"\
		"6. ????????? ????????? ???????\n"\
		"7. ??????????? ???????\n"\
		"8. ?????? ??????\n"\
		"9. ???????????????????",
		"???????", "?????"
	);
	return 1;
}


CMD:starthalloween(playerid)
{
    if(g_HalloweenQuestActive == 0)
    {
        g_HalloweenQuestActive = 1;
        g_PlayerQuestStatus[playerid] = 0;

        // ???ù??ù?? ??????
        new message[128];
        format(message, sizeof(message), "?? ??????? ?????? Halloween ?????");
        SendClientMessage(playerid, COLOR_WHITE, message); // ???????? ???? ??ù ????????ù
        CreateVehicle(466, -707.802062,101.233436,16.304492, 0.0);
        SetPlayerCheckpoint(playerid, -707.802062,101.233436,16.304492);
        if(!IsPlayerPassenger(playerid))
        {
        SetPlayerCheckpoint(playerid, -226.964385,452.922241,12.885372);
        Dialog
        (
        playerid, 12459, DIALOG_STYLE_MSGBOX, "??????",
        "?????????? %s! ?????? ? ?????? ? ???????ù? ?? ?????!",
        "???????", "???????" );
        
       } 
        
    }
    else
    {
        new message[128];
        format(message, sizeof(message), "?? ??? ?????? ?????");
        SendClientMessage(playerid, COLOR_RED, message); // ???????? ???? ??ù ????????ù
    }
}

CMD:startquest(playerid)
{
if (g_PlayerQuestState[playerid] == QUEST_NOT_STARTED) 
{
            g_PlayerQuestState[playerid] = QUEST_IN_PROGRESS;
            ShowPlayerDialog(playerid, DIALOG_START_QUEST, DIALOG_STYLE_MSGBOX, 
                             "??????: ??????! ??? ????? ??????. ?????? ?? ???? ????.", 
                             "???ù?", "??????");
        } else
 {
            SendClientMessage(playerid, COLOR_RED, "?? ??? ?????? ?????!");
        }
        return 1;
    }
    
 /*public: timerinko(playerid)
{
	new fmt_str[100];
	if(inko[playerid] >= 3 || inko[napinko[playerid]] >= 3)
	{
		if(GetPlayerVehicleID(playerid) != vehidinko[playerid])
		{
			secinko[playerid] -= 1;
			format(fmt_str, sizeof fmt_str, "~y~%d", secinko[playerid]);
			GameTextForPlayer(playerid, fmt_str, 1000, 3);
			if(secinko[playerid] < 1)
			{
				DestroyDeliveryVehicle(vehidinko[playerid]);
				SendClientMessage(playerid, 0xFFFF00, "?? ?? ?????? ????????ù ? ????. ??????? ???? ???????.");
				inko[playerid] = 0;
				napinko[playerid] = -1;
				inko[napinko[playerid]] = 0;
				napinko[napinko[playerid]] = -1;
			}
		}
		else return secinko[playerid] = 90;
	} */
/*	else if(inko[playerid] == 5)
	{
		if(GetPlayerVehicleID(playerid) != vehidinko[playerid])
		{
			secinko[playerid] -= 1;
			format(fmt_str, sizeof fmt_str, "~y~%d", secinko[playerid]);
			GameTextForPlayer(playerid, fmt_str, 1000, 3);
			if(secinko[playerid] < 1)
			{
				DestroyDeliveryVehicle(vehidinko[playerid]);
				SendClientMessage(playerid, 0xFFFF00, "?? ?? ?????? ????????ù ? ????. ??????? ???? ???????.");
				inko[playerid] = 0;
				napinko[playerid] = -1;
				inko[napinko[playerid]] = 0;
				napinko[napinko[playerid]] = -1;
			}
		}
		else return secinko[playerid] = 90;
	}					
} */
/*public: inkozakaz()
{
	 new rows, query[256], money;
	 
	 mysql_query(mysql, "SELECT * FROM inkozakaz", true);
	 rows = cache_num_rows();
	 
	 if(rows >= 10) return 1; 
	 
	 new rand = random(sizeof(coordraz));
	 new randrang = RandomEx(1, 4);
	 switch(randrang)
	 {
	  case 1: money = 16000;
	 case 2: money = 24000;
	 case 3: money = 32000;
	}
	 
	 mysql_format(mysql, query, sizeof query, "INSERT INTO inkozakaz(x, y, z, money, rang) VALUES(%f, %f, %f, %d, %d)", coordraz[rand][0],coordraz[rand][1],coordraz[rand][2], money, randrang);
	 mysql_query(mysql, query, true);
	 
	 return 1;
}
*/
stock GetPlayerRang(playerid)
{
	new query[128], rang;
	
	mysql_format(mysql, query, sizeof query, "SELECT rang FROM inko WHERE id=%d", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, true);
	
	if(!cache_num_rows()) rang = 0;
	else rang = cache_get_row_int(0, 0);
	
	return rang;
}
stock SetPlayerRang(playerid, rang)
{
	new query[128], work;
	mysql_format(mysql, query, sizeof query, "SELECT * FROM inko WHERE id=%d", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, true);
	
	if(cache_num_rows())
	{
	
		mysql_format(mysql, query, sizeof query, "UPDATE inko SET rang=%d WHERE id=%d", rang, GetPlayerAccountID(playerid));
		mysql_query(mysql, query, true);
	}
	return 1;
}
stock GetPlayerInko(playerid)
{
	new query[128], work;
	
	mysql_format(mysql, query, sizeof query, "SELECT work FROM inko WHERE id=%d", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, true);
	
	if(!cache_num_rows()) work = 0;
	else work = cache_get_row_int(0, 0);
	
	return work;
}
stock SetPlayerInko(playerid, inko)
{
	new query[128];
	
	mysql_format(mysql, query, sizeof query, "SELECT * FROM inko WHERE id=%d", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, true);
	
	if(cache_num_rows())
	{
		mysql_format(mysql, query, sizeof query, "UPDATE inko SET work=%d WHERE id=%d", inko, GetPlayerAccountID(playerid));
		mysql_query(mysql, query, true);
	}
	return 1;
}
stock SetPlayerZakazInko(playerid, zakaz)
{
	new query[128];
	
	mysql_format(mysql, query, sizeof query, "SELECT * FROM inko WHERE id=%d", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, true);
	
	if(cache_num_rows())
	{
		mysql_format(mysql, query, sizeof query, "UPDATE inko SET zakaz=%d WHERE id=%d", zakaz, GetPlayerAccountID(playerid));
		mysql_query(mysql, query, true);
	}
	return 1;
}
stock GetPlayerZakazInko(playerid)
{
	new query[128], zakaz;
	
	mysql_format(mysql, query, sizeof query, "SELECT zakaz FROM inko WHERE id=%d", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, true);
	
	if(cache_num_rows()) zakaz = cache_get_row_int(0, 0);
	else zakaz = 0;
	
	return zakaz;
}
CMD:inkotops(playerid)
{
	new string[256];
	format(string, 256, "SELECT * FROM `inko` ORDER BY zakaz DESC LIMIT 10");
	mysql_tquery(mysql, string, "Topinko", "d",playerid);

	return 1;
}

public: Topinko(playerid)
{
	new name[24], zakaz,rows,fields, string[2000], id;
	cache_get_data(rows, fields);
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			name[0] = EOS;
			// cache_get_field_content(i, "name", name, mysql);
			id = cache_get_field_content_int(i, "id", mysql);
			zakaz = cache_get_field_content_int(i, "zakaz", mysql);
			format(string, sizeof(string), "%s\n"c_b"???: "c_server"%s\t "c_b"| \t"c_b"???????: "c_server"%d", string, GetPlayerNameBySqlID(id), zakaz);
			strcat(string, string, 0);
		}
	}

	Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_MSGBOX, "ù?? ????????????", string, "???????", "");

	return 1;
}
new huyhsusys[MAX_PLAYERS] = 30;
/*cmd:collist(playerid, params[])
{
	if(inko[playerid] < 1) return 1;
	if(napinko[playerid] >= 1) return SendClientMessage(playerid, 0xFFFF00, "| ? ??? ??? ??????ù ????????");
	
	extract params -> new id; else return SendClientMessage(playerid, 0xFFFF00, "| ??????? /collist [????]");
	
	if(inko[id] < 1) return SendClientMessage(playerid, 0xFFFF00, "| ????? ?? ù??ù???ù ????????????");
	if(napinko[id] >= 1) return SendClientMessage(playerid, 0xFFFF00, "| ? ?????? ??? ??????ù ????????");
	
//	napinko[playerid] = id;
	napinko[id] = playerid;
	invnap[id] = 1;
	huyhsusys[id] = 15;
	SetTimerEx("invnnap", 1000, true, "i", id);
	SendClientMessage(playerid, 0xFFFF00, "?? ??????? ??????????? ? ?????????");
	SendClientMessage(id, 0xFFFF00, "??????? /ink ??ù ????ù??ù ??????????ù ? ????????? ? ??????? 15 ??????");
	return 1;
}

public invnnap(playerid)
{
	if(invnap[playerid] == 1)
	{
		huyhsusys[playerid] -= 1;
		if(huyhsusys[playerid] < 1)
		{
			SendClientMessage(napinko[playerid], 0xFFFF00, "???? ??????????? ? ????????? ???? ????????");
			SendClientMessage(playerid, 0xFFFF00, "?? ?? ????ù?? ??????????? ? ?????????");
			napinko[playerid] = -1;
			invnap[playerid] = 0;
			return 1;
		}
	}
	else return 1;
}
	
cmd:ink(playerid)
{
	if(invnap[playerid] == 0) return SendClientMessage(playerid, 0xFFFF00, "??? ?? ???????? ??ù??? ? ?????????");
	if(napinko[napinko[playerid]] >= 0) return SendClientMessage(playerid, 0xFFFF00, "| ? ?????? ??? ??????ù ????????");
//	if(napinko[playerid] >= 0) return SendClientMessage(playerid, 0xFFFF00, "| ? ??? ??? ??????ù ????????");
	invnap[playerid] = 0;
	napinko[napinko[playerid]] = playerid;
	SendClientMessage(playerid, 0xFF0000, "| ????? ??????? ???? ????? ??????????. ????????? ??????????");
	SendClientMessage(napinko[playerid], 0xFF0000, "| ?? ??????? ????? ??????????. ????????? ??????????");
}
cmd:blist(playerid)
{
	if(inko[playerid] < 2) return 1;
	if(inko[napinko[playerid]] < 2) return 1;
	if(napinko[playerid] == -1) return 1;
	if(blist[playerid] == 1 || blist[napinko[playerid]] == 1) return SendClientMessage(playerid, 0xFFFF00, "?? ??? ????? ?????");
	
	new query[128], fmt[1024], rows;
	new money, Float: x, Float: y, Float: z, id, rang;
						
	mysql_query(mysql, "SELECT id, x, y, z, money, rang FROM inkozakaz", true);
	rows = cache_num_rows();
						
	if(rows)
	{
		for(new i; i < rows; i++)
		{
			id = cache_get_row_int(i, 0);
			x = cache_get_row_float(i, 1);
			y = cache_get_row_float(i, 2);
			z = cache_get_row_float(i, 3);
			money = cache_get_row_int(i, 4);
			rang = cache_get_row_int(i, 5);
								
			format(query, sizeof query, "{FFFF00}%d.{FFFFFF}\t%f?.\t%d ???\t? %d ?????\n", i+1, GetPlayerDistanceFromPoint(playerid, x, y, z), money, rang);
			strcat(fmt, query);
			SetPlayerListitemValue(playerid, i, id);
		}
		ShowPlayerDialog(playerid, 2730, DIALOG_STYLE_LIST, "?????? ???????", fmt, "???????", "???????");
	}
	else 
		return SendClientMessage(playerid, 0xFFFF00, "?????? ??????? ????");
}
cmd:isell(playerid)
{
	if(inko[playerid] == 7 && inkwork[playerid] == 2)
	{
		new money = moneyinko[playerid];
	
		new rang1 = GetPlayerZakazInko(playerid)+1;
		new rang2 = GetPlayerZakazInko(napinko[playerid])+1;
		SetPlayerZakazInko(playerid, rang1);
		SetPlayerZakazInko(napinko[playerid], rang2);
		
		GivePlayerMoney(playerid, moneyinko[playerid]);
		GivePlayerMoney(napinko[playerid], moneyinko[napinko[playerid]]);
		
		inko[playerid] = 2;
		inko[napinko[playerid]] = 2;
		
		blist[napinko[playerid]] = 0;
		blist[playerid] = 0;
		
		SendClientMessage(playerid, 0xFFFF00, "?? ??????? ????????? ????? ? ???????? ???????? ????????");
		SendClientMessage(napinko[playerid], 0xFFFF00, "?? ??????? ????????? ????? ? ???????? ???????? ????????");
		
		if(GetPlayerRang(playerid) == 1 && GetPlayerZakazInko(playerid) >= 150)
		{
			SetPlayerRang(playerid, 2);
			SendClientMessage(playerid, 0xFFFF00, "?? ??????? ???????? ???? ??????????? ?? 2");
		}
		else if(GetPlayerRang(playerid) == 2 && GetPlayerZakazInko(playerid) >= 400)
		{
			SetPlayerRang(playerid, 3);
			SendClientMessage(playerid, 0xFFFF00, "?? ??????? ???????? ???? ??????????? ?? 3");
		}
		
		if(GetPlayerRang(napinko[playerid]) == 1 && GetPlayerZakazInko(napinko[playerid]) >= 150)
		{
			SetPlayerRang(napinko[playerid], 2);
			SendClientMessage(napinko[playerid], 0xFFFF00, "?? ??????? ???????? ???? ??????????? ?? 2");
		}
		else if(GetPlayerRang(napinko[playerid]) == 2 && GetPlayerZakazInko(napinko[playerid]) >= 400)
		{
			SetPlayerRang(napinko[playerid], 3);
			SendClientMessage(napinko[playerid], 0xFFFF00, "?? ??????? ???????? ???? ??????????? ?? 3");
		}
	}	
}
	*/

CMD:add_reward(playerid)
{
if(GetPlayerAdminEx(playerid) < 0) return 0;
ShowPlayerDialog(playerid, DIALOG_ADDREWARD, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME" | {FFFFFF}?????? ??????",
"{EB4C42}1. {FFFFFF}??????ù ??????\n\
{EB4C42}2. {FFFFFF}?????? ????? ??????\n\
{EB4C42}3. {FFFFFF}?????? ?????????ù\t\t\t\t\t\t\t\t{708090}(??????? ?? ????????)\n\
{EB4C42}4. {FFFFFF}?????? ?????\n\
{EB4C42}5. {FFFFFF}?????? ????????", 
"???????", "???????"
);
}

CMD:sosososo(playerid)
{
ShowPlayerDialog(playerid, DIALOG_FERMA, DIALOG_STYLE_LIST, "?????????",
"?????????ù ? ??????\n\
?????? / ????????? ??????? ????\n\
?????? ???????????",
"???????", "???????"
); 
}


forward IsPlayerInWater(playerid);
public IsPlayerInWater(playerid)
{
        new Float:FXF_wpos[3];
        GetPlayerPos(playerid,FXF_wpos[0],FXF_wpos[1],FXF_wpos[2]);
        if((FXF_wpos[2] > 0.00) || IsPlayerInZone(playerid,1808.2019,1424.5392,-2230.5024,-2347.7979)) { return 0; }
        else if((FXF_wpos[2] < 0.00) && (FXF_wpos[2] > -1.00)) { return 1; }
        else if(FXF_wpos[2] < -1.00) { return 2; }
        return 0;
}
forward IsPlayerInZone(playerid, Float:minX, Float:minY, Float:maxX, Float:maxY);
public IsPlayerInZone(playerid, Float:minX, Float:minY, Float:maxX, Float:maxY)
{
    new Float:FXF_ZoneX, Float:FXF_ZoneY, Float:FXF_ZoneZ;
    GetPlayerPos(playerid, FXF_ZoneX, FXF_ZoneY, FXF_ZoneZ);
     if((FXF_ZoneX >= minX && FXF_ZoneX <= maxX) && (FXF_ZoneY >= minY && FXF_ZoneY <= maxY) && FXF_ZoneZ <= 500)
    {
        return 1;
    }
     return 0;
 }
 
 
cmd:arecovery(playerid)
{
 if(GetPlayerAdminEx(playerid) < 6) return 1;

    Dialog
 (
	playerid, DIALOG_ARECOVERY, DIALOG_STYLE_LIST,
	"{FF0000}Recovery",
   "{FFFFFF}- ???????? ???????? ?????????????ù\n\
	 {FFFFFF}- ???????? ???? ??ù???\n\
 	{FFFFFF}- ?????? ???????????\n\
	 {FFFFFF}1. ????? ù? (RUS)\n\
	 {FFFFFF}2. ????? ù? (UA)\n\
	 {FFFFFF}3. ????? ù? (KZ)\n\
	 {FFFFFF}4. ????? ù? (BY)\n\
	 {FFFFFF}5. ?????\n\
	 {FFFFFF}6. ??????\n\
 	{FFFFFF}7. ??????????\n\
 	{FFFFFF}8. ????\n\
 	{FFFFFF}9. VIP\n\
     {FFFFFF}10. ????? ?????????ù\n\
     {FFFFFF}11. ????? ???????\n\
     {FFFFFF}12. ???????? ???\n\
     {FFFFFF}13. ???????? ù??????????? ????????\n\
     {FFFFFF}14. ???????? ???????????? ????????",

	 "?????",
	 "???????"
 );
 return 1;
}

cmd:reward(playerid)
{
    Dialog
 (
	playerid, DIALOG_REWARD, DIALOG_STYLE_LIST,
	"{FF0000}?????? ??????(???.1)",
   "{FFFFFF}????????ù ????????\n\
	 {FFFFFF}?????????ù ????????\n\
 	{FFFFFF}-\n\
	 {FFFFFF}1.?????????'???????'(????ù ???????ù: 72?.)",

	 "???????",
	 "???????"
 );
 return 1;
}



CMD:changecolor(playerid, params[])
{
    if(!IsPlayerInAnyVehicle(playerid))
  return SendClientMessage(playerid, -1, ""USC"?? ?????? ???? ?? ?????!");

  extract params -> new color; else return SendClientMessage(playerid, 0xCECECEFF, "{ffff00}|{ffffff} ???????????: /changecolor [id ?????]");

    if(!(0 <= color <= 126)) return SendClientMessage(playerid, 0xCECECEFF, "{ffff00}|{ffffff}??????????? id ????? ?? 0 ?? 126");

    new vehicleid = GetPlayerVehicleID(playerid);

    ChangeVehicleColor(vehicleid, color);

   SendClientMessage(playerid, COLOR_WHITE, "???? ?????? ?????????ù ??????? ???????!");

    return 1;
}



CMD:chudoyra(playerid, params[])
{

 SendClientMessage(playerid, COLOR_WHITE, "{FFFF00}| {FFFFFF}Dragy ??????? ???????");

}

/*cmd:dragy(playerid)
{
    Dialog
 (
	playerid, DIALOG_DRAGY, DIALOG_STYLE_LIST,
	"{FF0000} Dragy",
	"{FFFFFF}??????\n\
   {FFFFFF}????????? ?????\n\
	 {FFFFFF}??? ??????????\n\
	 {FFFFFF}?????? ??????????\n\
	 {FFFFFF}????? ???????????\n\
 	{FFFFFF}?????????",

	 "?????",
	 "?????"
 );
 return 1;
}*/

cmd:ffsgssdds(playerid)
{
    Dialog
 (
	playerid, DIALOG_DRAGYTEST, DIALOG_STYLE_LIST,
	"{FF0000} Dragy",
	"{FFFFFF}1. ????? 100 ??/? \n\
   {FFFFFF}2. ????? 200 ??/? \n\
	 {FFFFFF}3. ????? 300 ??/? \n\
 	{FFFFFF}4. ????? 400 ??/? ",

	 "?????",
	 "?????"
 );
 return 1;
}

cmd:ffsgssddssdf(playerid)
{
    Dialog
 (
	playerid, DIALOG_DRAGYRESULT, DIALOG_STYLE_LIST,
	"{FF0000} Dragy",
	"{FFFFFF}1. ??? ??????????\n\
 	{FFFFFF}2. ????? ??????????",

	 "?????",
	 "?????"
 );
 return 1;
}

cmd:ffsgssddssdfAWDAEWEF(playerid)
{
    Dialog
 (
	playerid, DIALOG_DRAGYRAZGON, DIALOG_STYLE_LIST,
	"{FF0000} Dragy",
	"{FFFFFF}1. ????? 100 ??/? \n\
   {FFFFFF}2. ????? 200 ??/? \n\
	 {FFFFFF}3. ????? 300 ??/? \n\
 	{FFFFFF}4. ????? 400 ??/? ",

	 "?????",
	 "?????"
 );
 return 1;
}

cmd:ffsgssddsaetgadfFxzfz(playerid)
{
    Dialog
 (
	playerid, DIALOG_DRAGYTOPZAEZD, DIALOG_STYLE_LIST,
	"{FF0000} ?????? ??????",
	"{FFFFFF}?382\t\tBugatti Divo\t\t2024-11-2 20:00:...\t\t\0.5\n\
   {FFFFFF}?352\t\tBugatti Chiron\t\t2024-11-2 20:01:...\t\t0.7\n\
	 {FFFFFF}?388\t\tBugatti La Noire\t\t2024-11-2 20:06:...\t\t0.2\n\
 	{FFFFFF}?382\t\tBmw M5 F90\t\t2024-11-2 20:33:...\t\t0.23",

	 "?????",
	 "?????"
 );
 return 1;
}

 

stock bgrodster(playerid)
{
ygygydodo_PTD[playerid][0] = CreatePlayerTextDraw(playerid, 428.6667, 336.4297, "USE"); // ?????
PlayerTextDrawLetterSize(playerid, ygygydodo_PTD[playerid][0], 0.5763, 2.9813);
PlayerTextDrawAlignment(playerid, ygygydodo_PTD[playerid][0], 1);
PlayerTextDrawColor(playerid, ygygydodo_PTD[playerid][0], -1);
PlayerTextDrawBackgroundColor(playerid, ygygydodo_PTD[playerid][0], 255);
PlayerTextDrawFont(playerid, ygygydodo_PTD[playerid][0], 1);
PlayerTextDrawSetProportional(playerid, ygygydodo_PTD[playerid][0], 1);
PlayerTextDrawSetShadow(playerid, ygygydodo_PTD[playerid][0], 0);

ygygydodo_PTD[playerid][1] = CreatePlayerTextDraw(playerid, 464.3333, 335.6001, "/BG"); // ?????
PlayerTextDrawLetterSize(playerid, ygygydodo_PTD[playerid][1], 0.6169, 3.1223);
PlayerTextDrawAlignment(playerid, ygygydodo_PTD[playerid][1], 1);
PlayerTextDrawColor(playerid, ygygydodo_PTD[playerid][1], 16711935);
PlayerTextDrawBackgroundColor(playerid, ygygydodo_PTD[playerid][1], 255);
PlayerTextDrawFont(playerid, ygygydodo_PTD[playerid][1], 1);
PlayerTextDrawSetProportional(playerid, ygygydodo_PTD[playerid][1], 1);
PlayerTextDrawSetShadow(playerid, ygygydodo_PTD[playerid][1], 0);

ygygydodo_PTD[playerid][2] = CreatePlayerTextDraw(playerid, 428.0000, 358.0000, "+10"); // ?????
PlayerTextDrawLetterSize(playerid, ygygydodo_PTD[playerid][2], 0.6446, 3.0767);
PlayerTextDrawAlignment(playerid, ygygydodo_PTD[playerid][2], 1);
PlayerTextDrawColor(playerid, ygygydodo_PTD[playerid][2], 16711935);
PlayerTextDrawBackgroundColor(playerid, ygygydodo_PTD[playerid][2], 255);
PlayerTextDrawFont(playerid, ygygydodo_PTD[playerid][2], 1);
PlayerTextDrawSetProportional(playerid, ygygydodo_PTD[playerid][2], 1);
PlayerTextDrawSetShadow(playerid, ygygydodo_PTD[playerid][2], 0);

ygygydodo_PTD[playerid][3] = CreatePlayerTextDraw(playerid, 466.6667, 356.3407, "rublei"); // ?????
PlayerTextDrawLetterSize(playerid, ygygydodo_PTD[playerid][3], 0.5946, 2.9896);
PlayerTextDrawAlignment(playerid, ygygydodo_PTD[playerid][3], 1);
PlayerTextDrawColor(playerid, ygygydodo_PTD[playerid][3], -1);
PlayerTextDrawBackgroundColor(playerid, ygygydodo_PTD[playerid][3], 255);
PlayerTextDrawFont(playerid, ygygydodo_PTD[playerid][3], 1);
PlayerTextDrawSetProportional(playerid, ygygydodo_PTD[playerid][3], 1);
PlayerTextDrawSetShadow(playerid, ygygydodo_PTD[playerid][3], 0);
}

cmd:bg(playerid)
{
SPD(playerid,DIALOG_BG,DIALOG_STYLE_MSGBOX,"{FFA500}????????????????","{1565C0}?? ?????? ?????????????? ?????? ? ????????\n{FFFFFF}?? ?????? ?????? ?? ?????? ????????: {008000}10 ??????\n{FFFFFF}?? ??? ???????: {008000}600 ??????\n{FFFFFF}?? 24 ????: {008000}14400 ??????\n{FFFFFF}?? 48 ?????: {008000}28800 ??????\n \n{808080}????????ù ????????????????? ????? ? 1-?? ?? 3-?? ???????\n{808080}?? ?????? ???? ?????ù?? ? AFK.??? ???? ??? ???????????\n{808080}?????????? ????? ?? ?????? ????ù.","???????","");
ApplyAnimation(playerid, "INT_HOUSE", "BED_LOOP_L", 4.1, 1, 1, 1, 1, 0, 1);
}

cmd:bgoff(playerid)
{
KillTimer(COLOR_WHITE,"bgrod");
}

forward bgrod(playerid);
public bgrod(playerid)
{
GivePlayerMoney(playerid,10);
bgrodster(playerid);
PlayerTextDrawShow(playerid, ygygydodo_PTD[playerid][0]);
PlayerTextDrawShow(playerid, ygygydodo_PTD[playerid][1]);
PlayerTextDrawShow(playerid, ygygydodo_PTD[playerid][2]);
PlayerTextDrawShow(playerid, ygygydodo_PTD[playerid][3]);

SetTimer("okdadrugoi",1000*7,true);
return 1;
}

forward okdadrugoi(playerid);
public okdadrugoi(playerid)
{
PlayerTextDrawHide(playerid, ygygydodo_PTD[playerid][0]);
PlayerTextDrawHide(playerid, ygygydodo_PTD[playerid][1]);
PlayerTextDrawHide(playerid, ygygydodo_PTD[playerid][2]);
PlayerTextDrawHide(playerid, ygygydodo_PTD[playerid][3]);
KillTimer(COLOR_WHITE,"okdadrugoi");
return 1;
}

stock DialogTAB(playerid, dialogid, style, title[], text[], button[], button2[])
{
  if(style == 5)
  {
     ShowPlayerDialog(playerid, DIALOG_TESTERSKII, DIALOG_STYLE_LIST, "...", "...", "...", "");
  }
  ShowPlayerDialog(playerid, dialogid, style, title, text, button, button2);
  return 1;//tetstdt
}

CMD:airdrop(playerid)
{
    new drop, text[185], list[sizeof text * 10 + 50] = "test\tdtest\n";

    new Float:dist;
    
   format(text, sizeof text, "{FFFFFF}1. ????? 100 ??/?\n", dist);
        strcat(list, text);
 	DialogTAB(playerid, DIALOG_TESTERSKII, DIALOG_QM, "????", text, "???????", "????????");
    return 1;
}

CMD:admin(playerid, params[])
{
    new count = 0;
    new text[185], list[sizeof text * 10 + 50] = "?????????????\t???????\t?????????ù\n";

    // ??????? ???? ??????? ??ù ?????????ù ???????????????
    for(new i = 0; i < MAX_PLAYERS; i++)
    {
        if(!IsPlayerConnected(i)) continue;
        if(!IsPlayerLogged(i)) continue;

        new admin_lvl = GetPlayerAdminEx(i);
        if(admin_lvl < 1 || admin_lvl > 7) continue; // ??????????ù ?????? ?????? ??????????????? ?? 1 ?? 7

        // ?????????????? ?????????? ?? ?????????????? ? ?????????? ? ??????
        format(text, sizeof text, "%s[%d]\t\t\t\t\t%s\t\t\t\t{66CC33}? ????\n",  GetPlayerNameEx(i), i, text);
        strcat(list, text);
        SetPlayerListitemValue(playerid, count++, i); // ????????? ???????ù ??ù listitem
    }

    // ???????? ??????ù ??????????????? ? ????
    if(count == 0)
    {
        SendClientMessage(playerid, 0xffff00FF, "??? ??????????????? ? ????");
        return 1;
    }

    // ????? ??????? ? ??????????? ?? ???????????????
    DialogTAB(playerid, DIALOG_ADMIN, DIALOG_STYLE_TABLIST_HEADERS, "????????????ù ? ????", list, "????????", "???????");
    return 1;
}

/*cmd:changeprop(playerid)
{
    Dialog
 (
	playerid, DIALOG_CHANGEPROP, DIALOG_STYLE_LIST,
	"{DC143C}"SERVER_NAME"{ffffff} | ???????? ??? ?????ù??",
	"{EB4C42}#1.\t\t\t\t{ffffff}???/???????? \t\t\t\t\t{888888}??????? ??ù ?????????????ù\n\
	{EB4C42}#2.\t\t\t\t{ffffff}??????\t\t\t\t\t{888888}??????? ??ù ?????????????ù\n\
	{EB4C42}#3.\t\t\t\t{ffffff}?????\t\t\t\t\t{888888}??????? ??ù ?????????????ù",

	 "???????",
	 "?????"
 );
 return 1;
}*/

cmd:ffsgssddsaetgadfFxzfeqfkjfzrttr(playerid)
{
    Dialog
 (
	playerid, DIALOG_CHANGEPROPOBMEN, DIALOG_STYLE_LIST,
	"{DC143C}"SERVER_NAME"{ffffff} | ???????? ??? ?????ù??",
	"{EB4C42}#38237998\t\t{ffffff}Bugatti Divo\t\t\t\t{888888}??????? ??ù ?????????????ù\n\
   {EB4C42}?352\t\t{ffffff}Bugatti Chiron\t\t{888888}??????? ??ù ?????????????ù\n\
	 {EB4C42}?388\t\t{ffffff}Bugatti La Noire\t\t{888888}??????? ??ù ?????????????ù\n\
 	{EB4C42}?382\t\t{ffffff}Bmw M5 F90\t\t{888888}??????? ??ù ?????????????ù",

	 "???????",
	 "?????"
 );
 return 1;
}

cmd:ffsgssddssdfAWDAEWEFaeokgeijpagdafd(playerid)
{
    Dialog
 (
	playerid, DIALOG_CHANGEPROPTIP, DIALOG_STYLE_LIST,
	"{DC143C}"SERVER_NAME"{ffffff} | ???????? ??? ?????????",
	"{EB4C42}#1.\t\t\t\t{ffffff}???/???????? \t\t\t\t\t{888888}??????? ??ù ?????????????ù\n\
	{EB4C42}#2.\t\t\t\t{ffffff}??????\t\t\t\t\t{888888}??????? ??ù ?????????????ù\n\
	{EB4C42}#3.\t\t\t\t{ffffff}?????\t\t\t\t\t{888888}??????? ??ù ?????????????ù",

	 "???????",
	 "?????"
 );
 return 1;
}

cmd:ffsgssddssdfAWDAEWEFfadfjapo(playerid)
{
    Dialog
 (
	playerid, DIALOG_CHANGEPROPDOPLATA, DIALOG_STYLE_LIST,
	"{DC143C}"SERVER_NAME"{ffffff} | ??????????",
	"1. ??? ???????\n\
	2. ???????????? ??\n\
	3. ??????????? ?????",

	 "???????",
	 "?????"
 );
 return 1;
}

cmd:ffsgssddssdfAWDAEWEFdaksfjoaifj(playerid)
{
    Dialog
 (
	playerid, DIALOG_CHANGEPROPSKOKDP, DIALOG_STYLE_INPUT,
	"{DC143C}"SERVER_NAME"{ffffff} | ?????",
	"??????? ????? ??????? ??? ?????? ????????? ?? ?????",

	 "?????",
	 "?????"
 );
 return 1;
}

cmd:ffsgssddsaetgadfFxzfeq325fkjfzrttr(playerid)
{
    Dialog
 (
	playerid, DIALOG_CHANGEPROPOBMENV, DIALOG_STYLE_LIST,
	"{DC143C}"SERVER_NAME"{ffffff} | ???????? ??? ?????ù??",
	"{EB4C42}#38237998\t\t{ffffff}Bugatti Divo\t\t\t\t{888888}??????? ??ù ?????????????ù\n\
   {EB4C42}?352\t\t{ffffff}Bugatti Chiron\t\t{888888}??????? ??ù ?????????????ù\n\
	 {EB4C42}?388\t\t{ffffff}Bugatti La Noire\t\t{888888}??????? ??ù ?????????????ù\n\
 	{EB4C42}?382\t\t{ffffff}Bmw M5 F90\t\t{888888}??????? ??ù ?????????????ù",

	 "???????",
	 "?????"
 );
 return 1;
}

CMD:reklama(playerid)
{
	if(GetPlayerAdminEx(playerid)< 12) return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");
    new fmt_msg[999];
    format(fmt_msg, sizeof fmt_msg, "[A] %s[%d] ??????????????? ?????? ??ù??????? \"?????????? ??????\".", GetPlayerNameEx(playerid), playerid);

	 SendClientMessageToAll(0xFFFFFFFF, "{FA8072}?????????? ???? | {32CD32}??? ????????? ???????? ?? ?????? ?? ????????? ????? ??? ????? ?????????ù ?{00FA9A} X2{32CD32} ????.");
     SendClientMessageToAll(0xFFFFFFFF, "{FA8072}?????????? ???? | {32CD32}?????? 'PayDay' ?? ??????? ?? ?????? ???????? ?{00FA9A} X2{32CD32} ???? ?????? ????? ????? (EXP).");
     SendClientMessageToAll(0xFFFFFFFF, "{FA8072}?????????? ???? | {32CD32}??? ?????????? ??????? ???????? (Black Coin)- ????? ?????????ù ????? ?????????ù ?{00FA9A} X2{32CD32} ????!");
     SendClientMessageToAll(0xFFFFFFFF, "{FA8072}?????????? ???? | {32CD32}????????? ???? ?????? ???????? ???????? ????? ??ù?? ? ????????, ??? ????? ????: {00FA9A}blackrussia.online");
return 1;
}

CMD:cevent(playerid, params[])
{
	SendClientMessage(playerid, -1, "{E4A010} ?? ??????? ???????? ????? ?????????ù ???????ù??ù.");
	SpawnPlayer(playerid);

	SetPlayerData(playerid, P_LAST_MP, 0);

	return 1;
}

CMD:meslist(playerid)
{
 return ShowPlayerDialog(playerid, DIALOG_MCHS_LIST, DIALOG_STYLE_LIST, "?????? ???????", "??? ??????", "????ù??", "?????");
}

CMD:sobes(playerid,params[])//kinder
{
	if(!(1 <= GetPlayerTeamEx(playerid) < MAX_ORG)) return SendClientMessage(playerid, 0x999999FF, "??? ?????????? ?????ù ??????ù");
 	if(!(9 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, 0xCECECEFF, "??????ù ???????? ?????? ?????? ? ??????????ù? ???????????");

	Dialog
	(
	playerid, 5004, DIALOG_STYLE_LIST,
	"{DC143C}"SERVER_NAME"{ffffff} | ?????????? ?? ???????? ?????????????",
	"- ??????????ù ????????\n\
	- ????ù\n\
	- ?????????????\n\
	- ?????\n\
	- ???\n\
	- ????\n\
	- ????\n\
	- ???",
	"???????",
	"???????"
	);
	return 1;
}

CMD:famcar(playerid)
{
	{
	if(GetPlayerData(playerid, P_FAMILY) == 0) return SendClientMessage(playerid, 0xCECECEFF, "?? ?? ???????? ? ?????");
							new fmt_text[640],
								Cache: result,
								id;

							mysql_format(mysql, fmt_text, sizeof fmt_text, "SELECT * FROM family_cars WHERE owner_id='%d'", GetPlayerAccountID(playerid));
							result = mysql_query(mysql, fmt_text, true);

							new rows = cache_num_rows();

							if(rows)
								SendClientMessage(playerid, 0x999999FF, "? ????? ????? ??? ??????????");
								else
								{
									new query[60],
										model_id,
										car_number[7];

									format(fmt_text, sizeof fmt_text, "");

									for(new i = 0; i < rows; i ++)
									{
										id = cache_get_field_content_int(i, "id");
										model_id = cache_get_field_content_int(i, "model_id") - 400;
										cache_get_field_content(i, "number", car_number);

										format(query, sizeof query, "{FFFFFF}%d. %s {888888}[%s]\n", i + 1, GetVehicleInfo(model_id, VI_NAME), car_number);
										strcat(fmt_text, query);
										SetPlayerListitemValue(playerid, i, id);
									}

									Dialog
									(
										playerid, DIALOG_OWNABLE_CAR_LIST, DIALOG_STYLE_LIST,
										"{FFCD00}???????? ?????????",
										fmt_text,
										"???????", "???????"
									);
								}

							cache_delete(result);
							}
							return 1;
						}

#pragma dynamic 6250
#pragma disablerecursion
#pragma warning disable 239
#pragma warning disable 214
#pragma warning disable 202
#pragma warning disable 203
#pragma warning disable 213
#pragma warning disable 234
#pragma warning disable 216
#pragma warning disable 219
#pragma warning disable 209
#pragma warning disable 202
#pragma warning disable 201
#pragma warning disable 225
#pragma warning disable 200
#pragma warning disable 211
#pragma warning disable 204
#pragma warning disable 201
#pragma warning disable 208
#pragma warning disable 215
#pragma warning disable 235
#pragma warning disable 217
#pragma warning disable 212
#pragma warning disable 228
#pragma warning disable 205
#pragma warning disable 207

#pragma dynamic 6250
#pragma warning 0

public spawningwerton(playerid)
{
	// ??????????ù ? ????????????
	SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}??? ??????? ?? ????ù??? ? {ffff00}Telegram{ffffff}. ?????????: {ffff00}t.me/Baze Russiaroleplay.online");
	SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}??? ??????? ?? ????ù??? ? {ffff00}Discord{ffffff}. ??ù ????ù??? ???????????: {ffff00}/mm - ????????? ????????????");
	SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}??? ??????? ?? ????ù??? ? {ffff00}E-Mail{ffffff}. ????? ????ù???? ???????????: {ffff00}/mm - ????????? ????????????");
	SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}??? ??????? ?? ????ù??? ? {FFFF00}?????????{FFFFFF}. ?????????: {FFFF00}vk.com/Baze Russiaroleplay.online");
	SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}??ù ?????????????? ????????????, ?????????? ????????? ?????? ??? ????? ? ????.");
	SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}????????? ?????????, ?? ??????? ??????? ? ???? ??? ????? ?????ù.");

	// ??????????? ??ù ????????
	if (GetPlayerLevel(playerid) < 3)
	{
		SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}???? ?? {FFFF00}?????????? (?? 3-?? ?????ù){FFFFFF}, ?? ????? ?? ?????? ?????????????? ??????.");
		SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}??????????? ??????? {ffff00}/bg{ffffff}, ????? ?????? ??????????????!");
	}
	
	if(!GetPlayerData(playerid, P_ADMIN)) SendClientMessage(playerid, 0xFF0000FF, "? ??? ??? ???????, ??????????? /goadm");

}

CMD:spawningwerton(playerid)
{
	// ?????? ????????? ?????? ??ù ?????? ?????????
	fixspawnwerton(playerid);
	SendClientMessage(playerid, 0xFFFFFFFF, "{FFFF00}| {FFFFFF}???????? ?????????? ? ???????????? ????????...");
	return 1;
}
 
stock fixspawnwerton(playerid)
{
	SetTimerEx("spawningwerton", 200, false, "d", playerid);
}

public tpplayertex(playerid)
{
SetPlayerPos(playerid, 1006.474365,1490.628173,1498.242187);
SetPlayerFacingAngle(playerid, 243.409957);
			ShowTuneShowPlayerDialog(playerid);
			return 1;
}

CMD:lift1(playerid)
{
//TogglePlayerBackground(playerid, 500);  
             SetTimerEx("lift1tp", 1850, false, "d", playerid);
}

public lift1tp(playerid)
{
SetPlayerPos(playerid, 1467.886962,2500.300048,2506.000244);
SetPlayerFacingAngle(playerid, 268.770874);
		SetCameraBehindPlayer(playerid);
ShowNotificationDefault(playerid, 1, 5, 1, 1, "?? ????ù???? ?? ????");
return 1;
}

CMD:lift2(playerid)
{
//TogglePlayerBackground(playerid, 500);  
             SetTimerEx("lift2tp", 1850, false, "d", playerid);
}

public lift2tp(playerid)
{
SetPlayerPos(playerid, 1467.886962,2500.300048,2501.000000);
SetPlayerFacingAngle(playerid, 268.770874);
SetCameraBehindPlayer(playerid);
ShowNotificationDefault(playerid, 1, 5, 1, 1, "?? ?????????? ????");
return 1;
}

forward LoadOwnableCarRent(playerid, oc_id);
public: LoadOwnableCarRent(playerid, oc_id)
{

	new Float:POS[4];
	GetPlayerPos(playerid, POS[0],POS[1],POS[2]);
	GetPlayerFacingAngle(playerid, POS[3]);

	if(g_ownable_car_loaded + 1 > MAX_OWNABLE_CARS)
	{
		print("[OwnableCars]: ?????? ? ????????. ???????? ????? ??????? ?????????? (MAX_OWNABLE_CARS)");
		return -1;
	}

	new query[55],
		Cache: result,
		vehicleid;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ownable_cars WHERE id='%d' LIMIT 1", oc_id);
	result = mysql_query(mysql, query, true);

	new idx = GetFreeOwnableCarID();

	SetOwnableCarData(idx, OC_SQL_ID, 		cache_get_field_content_int(0, "id"));
	SetOwnableCarData(idx, OC_OWNER_ID, 	cache_get_field_content_int(0, "owner_id"));

	SetOwnableCarData(idx, OC_MODEL_ID, 	cache_get_field_content_int(0, "model_id"));
	SetOwnableCarData(idx, OC_COLOR_1, 		cache_get_field_content_int(0, "color_1"));
	SetOwnableCarData(idx, OC_COLOR_2, 		cache_get_field_content_int(0, "color_2"));

	SetOwnableCarData(idx, OC_POS_X, 		cache_get_field_content_float(0, "pos_x"));
	SetOwnableCarData(idx, OC_POS_Y, 		cache_get_field_content_float(0, "pos_y"));
	SetOwnableCarData(idx, OC_POS_Z, 		cache_get_field_content_float(0, "pos_z"));
	SetOwnableCarData(idx, OC_ANGLE, 		cache_get_field_content_float(0, "angle"));

	cache_get_field_content(0, "number", g_ownable_car[idx][OC_NUMBER], mysql, 8);

	SetOwnableCarData(idx, OC_ALARM, 		bool: cache_get_field_content_int(0, "alarm"));
	SetOwnableCarData(idx, OC_KEY_IN, 		bool: cache_get_field_content_int(0, "key_in"));

	SetOwnableCarData(idx, OC_CREATE, 		cache_get_field_content_int(0, "create_time"));
	SetOwnableCarData(idx, OC_VINILCAR, 		cache_get_field_content_int(0, "vinilcar"));

	SetOwnableCarData(idx, OC_PT_BRAKE, 		cache_get_field_content_int(0, "pt_brake"));
	SetOwnableCarData(idx, OC_PT_STABILITY, 	cache_get_field_content_int(0, "pt_stability"));
	SetOwnableCarData(idx, OC_PT_ENGINE, 		cache_get_field_content_int(0, "pt_engine"));
	
	SetOwnableCarData(idx, 	OC_COMFORT_PL,	cache_get_field_content_int(0, "comfort"));
		SetOwnableCarData(idx, 	OC_SPORT,	cache_get_field_content_int(0, "sport"));
		SetOwnableCarData(idx, 	OC_SPORT_PL,	cache_get_field_content_int(0, "sport_plus"));
		SetOwnableCarData(idx, 	OC_DRIFT,	cache_get_field_content_int(0, "drift"));
	
	SetOwnableCarData(idx, OC_LAST_PRICE, 		cache_get_field_content_int(0, "last_price"));
	SetOwnableCarData(idx, OC_LAST_OWNER_GAME_ID, 		cache_get_field_content_int(0, "last_game_owner_id"));

	// cache_get_field_content(0, "owner_name", g_ownable_car[idx][OC_OWNER_NAME], mysql, 21);

	// ----------------------------------------------------------------------------------------

	if(strlen(GetOwnableCarData(idx, OC_NUMBER)) != 6)
		strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

	vehicleid = CreateVehicle
	(
		GetOwnableCarData(idx, OC_MODEL_ID),
		POS[0],
		POS[1],
		POS[2],
		POS[3],
		GetOwnableCarData(idx, OC_COLOR_1),
		GetOwnableCarData(idx, OC_COLOR_2),
		-1,
		0,
		VEHICLE_ACTION_TYPE_OWNABLE_CAR,
		idx
	);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
		//index = GetVehicleData(vehicleid, V_ACTION_ID);
        format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
        SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
		SetVehicleParam(vehicleid, V_LOCK, bool: cache_get_field_content_int(0, "status"));
ownable_car_sell_status[vehicleid] = false;
		SetVehicleData(vehicleid, V_MILEAGE, cache_get_field_content_float(0, "mileage"));

		SetVehicleData(vehicleid, V_LAST_LOAD_TIME, gettime());
		
		//ChangeVehiclePaintjob(vehicleid, GetOwnableCarData(idx, OC_VINILCAR));

		SetVehicleData(vehicleid, V_HEALTH, 1000);

		SetVehicleHealth(vehicleid, 1000);
	}

	cache_delete(result);

	LoadOwnableCarTrunk(vehicleid);

	return 1;
}

forward LoadOwnableCarRentArz(playerid, oc_id);
public: LoadOwnableCarRentArz(playerid, oc_id)
{

	new Float:POS[4];
	GetPlayerPos(playerid, POS[0],POS[1],POS[2]);
	GetPlayerFacingAngle(playerid, POS[3]);

	if(g_ownable_car_loaded + 1 > MAX_OWNABLE_CARS)
	{
		print("[OwnableCars]: ?????? ? ????????. ???????? ????? ??????? ?????????? (MAX_OWNABLE_CARS)");
		return -1;
	}

	new query[55],
		Cache: result,
		vehicleid;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ownable_cars WHERE id='%d' LIMIT 1", oc_id);
	result = mysql_query(mysql, query, true);

	new idx = GetFreeOwnableCarID();

	SetOwnableCarData(idx, OC_SQL_ID, 		cache_get_field_content_int(0, "id"));
	SetOwnableCarData(idx, OC_OWNER_ID, 	cache_get_field_content_int(0, "owner_id"));

	SetOwnableCarData(idx, OC_MODEL_ID, 	cache_get_field_content_int(0, "model_id"));
	SetOwnableCarData(idx, OC_COLOR_1, 		cache_get_field_content_int(0, "color_1"));
	SetOwnableCarData(idx, OC_COLOR_2, 		cache_get_field_content_int(0, "color_2"));

	SetOwnableCarData(idx, OC_POS_X, 		cache_get_field_content_float(0, "pos_x"));
	SetOwnableCarData(idx, OC_POS_Y, 		cache_get_field_content_float(0, "pos_y"));
	SetOwnableCarData(idx, OC_POS_Z, 		cache_get_field_content_float(0, "pos_z"));
	SetOwnableCarData(idx, OC_ANGLE, 		cache_get_field_content_float(0, "angle"));

	cache_get_field_content(0, "number", g_ownable_car[idx][OC_NUMBER], mysql, 8);

	SetOwnableCarData(idx, OC_ALARM, 		bool: cache_get_field_content_int(0, "alarm"));
	SetOwnableCarData(idx, OC_KEY_IN, 		bool: cache_get_field_content_int(0, "key_in"));

	SetOwnableCarData(idx, OC_CREATE, 		cache_get_field_content_int(0, "create_time"));
	SetOwnableCarData(idx, OC_VINILCAR, 		cache_get_field_content_int(0, "vinilcar"));

	SetOwnableCarData(idx, OC_PT_BRAKE, 		cache_get_field_content_int(0, "pt_brake"));
	SetOwnableCarData(idx, OC_PT_STABILITY, 	cache_get_field_content_int(0, "pt_stability"));
	SetOwnableCarData(idx, OC_PT_ENGINE, 		cache_get_field_content_int(0, "pt_engine"));
	
	SetOwnableCarData(idx, OC_LAST_PRICE, 		cache_get_field_content_int(0, "last_price"));
	SetOwnableCarData(idx, OC_LAST_OWNER_GAME_ID, 		cache_get_field_content_int(0, "last_game_owner_id"));

SetOwnableCarData(idx, 	OC_COMFORT_PL,	cache_get_field_content_int(0, "comfort"));
		SetOwnableCarData(idx, 	OC_SPORT,	cache_get_field_content_int(0, "sport"));
		SetOwnableCarData(idx, 	OC_SPORT_PL,	cache_get_field_content_int(0, "sport_plus"));
		SetOwnableCarData(idx, 	OC_DRIFT,	cache_get_field_content_int(0, "drift"));

 /*  SetOwnableCarData(idx, 	OC_COMFORT_PL,	cache_get_field_content_int(0, "comfort"));
		SetOwnableCarData(idx, 	OC_SPORT,	cache_get_field_content_int(0, "sport"));
		SetOwnableCarData(idx, 	OC_SPORT_PL,	cache_get_field_content_int(0, "sport_plus"));
		SetOwnableCarData(idx, 	OC_DRIFT,	cache_get_field_content_int(0, "drift"));

      new wernitro = cache_get_field_content_int(0, "nitro");
		new werlaunch = cache_get_field_content_int(0, "launch");
*/
	// cache_get_field_content(0, "owner_name", g_ownable_car[idx][OC_OWNER_NAME], mysql, 21);

	// ----------------------------------------------------------------------------------------

	if(strlen(GetOwnableCarData(idx, OC_NUMBER)) != 6)
		strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

	vehicleid = CreateVehicle
	(
		GetOwnableCarData(idx, OC_MODEL_ID),
		876.596862, 
		852.374206,
		13.449650,
		159.791625,
		GetOwnableCarData(idx, OC_COLOR_1),
		GetOwnableCarData(idx, OC_COLOR_2),
		-1,
		0,
		VEHICLE_ACTION_TYPE_OWNABLE_CAR,
		idx
	);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
		//index = GetVehicleData(vehicleid, V_ACTION_ID);
        format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
        SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
		SetVehicleParam(vehicleid, V_LOCK, bool: cache_get_field_content_int(0, "status"));

		SetVehicleData(vehicleid, V_MILEAGE, cache_get_field_content_float(0, "mileage"));

     /*   if(wernitro == 1)   AddVehicleComponent(vehicleid, Nitro[0][0]);
	if(wernitro == 2)   AddVehicleComponent(vehicleid, Nitro[1][0]);
	if(wernitro == 3)   AddVehicleComponent(vehicleid, Nitro[2][0]);
	
	if(werlaunch == 1)   launch[vehicleid] = 1;
	if(werlaunch == 0)   launch[vehicleid] = 0;
 */
		SetVehicleData(vehicleid, V_LAST_LOAD_TIME, gettime());
		
		//SetVehicleWheels(GetOwnableCarData(idx, OC_SQL_ID), vehicleid); // ??? ???????? ????????? ???
		ownable_car_sell_status[vehicleid] = false;
		//ChangeVehiclePaintjob(vehicleid, GetOwnableCarData(idx, OC_VINILCAR));

		SetVehicleData(vehicleid, V_HEALTH, 1000);

		SetVehicleHealth(vehicleid, 1000);
	}

	cache_delete(result);

	LoadOwnableCarTrunk(vehicleid);

	return 1;
}
// ?????? ???? ?????
stock CreateRentBikeArz()
{
    for(new idx; idx < sizeof rent_bikearz; idx ++)
    {
        CreatePickup(19131, 23, rent_bikearz[idx][0], rent_bikearz[idx][1], rent_bikearz[idx][2], -1, PICKUP_ACTION_RENT_BIKE_ARZ, idx);//19134
        CreateDynamic3DTextLabel("{ffff00}?????????? ???????????", 0x3399FFFF, rent_bikearz[idx][0], rent_bikearz[idx][1], rent_bikearz[idx][2]  + 1.4, 10.0);
    }
    return 1;
}

forward LoadOwnableCarRentBat(playerid, oc_id);
public: LoadOwnableCarRentBat(playerid, oc_id)
{

	new Float:POS[4];
	GetPlayerPos(playerid, POS[0],POS[1],POS[2]);
	GetPlayerFacingAngle(playerid, POS[3]);

	if(g_ownable_car_loaded + 1 > MAX_OWNABLE_CARS)
	{
		print("[OwnableCars]: ?????? ? ????????. ???????? ????? ??????? ?????????? (MAX_OWNABLE_CARS)");
		return -1;
	}

	new query[55],
		Cache: result,
		vehicleid;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ownable_cars WHERE id='%d' LIMIT 1", oc_id);
	result = mysql_query(mysql, query, true);

	new idx = GetFreeOwnableCarID();

	SetOwnableCarData(idx, OC_SQL_ID, 		cache_get_field_content_int(0, "id"));
	SetOwnableCarData(idx, OC_OWNER_ID, 	cache_get_field_content_int(0, "owner_id"));

	SetOwnableCarData(idx, OC_MODEL_ID, 	cache_get_field_content_int(0, "model_id"));
	SetOwnableCarData(idx, OC_COLOR_1, 		cache_get_field_content_int(0, "color_1"));
	SetOwnableCarData(idx, OC_COLOR_2, 		cache_get_field_content_int(0, "color_2"));

	SetOwnableCarData(idx, OC_POS_X, 		cache_get_field_content_float(0, "pos_x"));
	SetOwnableCarData(idx, OC_POS_Y, 		cache_get_field_content_float(0, "pos_y"));
	SetOwnableCarData(idx, OC_POS_Z, 		cache_get_field_content_float(0, "pos_z"));
	SetOwnableCarData(idx, OC_ANGLE, 		cache_get_field_content_float(0, "angle"));

	cache_get_field_content(0, "number", g_ownable_car[idx][OC_NUMBER], mysql, 8);

	SetOwnableCarData(idx, OC_ALARM, 		bool: cache_get_field_content_int(0, "alarm"));
	SetOwnableCarData(idx, OC_KEY_IN, 		bool: cache_get_field_content_int(0, "key_in"));

	SetOwnableCarData(idx, OC_CREATE, 		cache_get_field_content_int(0, "create_time"));
	SetOwnableCarData(idx, OC_VINILCAR, 		cache_get_field_content_int(0, "vinilcar"));

	SetOwnableCarData(idx, OC_PT_BRAKE, 		cache_get_field_content_int(0, "pt_brake"));
	SetOwnableCarData(idx, OC_PT_STABILITY, 	cache_get_field_content_int(0, "pt_stability"));
	SetOwnableCarData(idx, OC_PT_ENGINE, 		cache_get_field_content_int(0, "pt_engine"));
	
	SetOwnableCarData(idx, 	OC_COMFORT_PL,	cache_get_field_content_int(0, "comfort"));
		SetOwnableCarData(idx, 	OC_SPORT,	cache_get_field_content_int(0, "sport"));
		SetOwnableCarData(idx, 	OC_SPORT_PL,	cache_get_field_content_int(0, "sport_plus"));
		SetOwnableCarData(idx, 	OC_DRIFT,	cache_get_field_content_int(0, "drift"));
	
	SetOwnableCarData(idx, OC_LAST_PRICE, 		cache_get_field_content_int(0, "last_price"));
	SetOwnableCarData(idx, OC_LAST_OWNER_GAME_ID, 		cache_get_field_content_int(0, "last_game_owner_id"));

 /*   SetOwnableCarData(idx, 	OC_COMFORT_PL,	cache_get_field_content_int(0, "comfort"));
		SetOwnableCarData(idx, 	OC_SPORT,	cache_get_field_content_int(0, "sport"));
		SetOwnableCarData(idx, 	OC_SPORT_PL,	cache_get_field_content_int(0, "sport_plus"));
		SetOwnableCarData(idx, 	OC_DRIFT,	cache_get_field_content_int(0, "drift"));

     new wernitro = cache_get_field_content_int(0, "nitro");
		new werlaunch = cache_get_field_content_int(0, "launch");
*/
	// cache_get_field_content(0, "owner_name", g_ownable_car[idx][OC_OWNER_NAME], mysql, 21);

	// ----------------------------------------------------------------------------------------

	if(strlen(GetOwnableCarData(idx, OC_NUMBER)) != 6)
		strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

	vehicleid = CreateVehicle
	(
		GetOwnableCarData(idx, OC_MODEL_ID),
		1783.746582, 
		2506.362304,
		14.610613,
		306.348205,
		GetOwnableCarData(idx, OC_COLOR_1),
		GetOwnableCarData(idx, OC_COLOR_2),
		-1,
		0,
		VEHICLE_ACTION_TYPE_OWNABLE_CAR,
		idx
	);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
		//index = GetVehicleData(vehicleid, V_ACTION_ID);
        format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
        SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
		SetVehicleParam(vehicleid, V_LOCK, bool: cache_get_field_content_int(0, "status"));

		SetVehicleData(vehicleid, V_MILEAGE, cache_get_field_content_float(0, "mileage"));

       /* if(wernitro == 1)   AddVehicleComponent(vehicleid, Nitro[0][0]);
	if(wernitro == 2)   AddVehicleComponent(vehicleid, Nitro[1][0]);
	if(wernitro == 3)   AddVehicleComponent(vehicleid, Nitro[2][0]);
	
	if(werlaunch == 1)   launch[vehicleid] = 1;
	if(werlaunch == 0)   launch[vehicleid] = 0;
*/
        //SetVehicleWheels(GetOwnableCarData(idx, OC_SQL_ID), vehicleid); // ??? ???????? ????????? ???
ownable_car_sell_status[vehicleid] = false;
		SetVehicleData(vehicleid, V_LAST_LOAD_TIME, gettime());
		
		//ChangeVehiclePaintjob(vehicleid, GetOwnableCarData(idx, OC_VINILCAR));

		SetVehicleData(vehicleid, V_HEALTH, 1000);

		SetVehicleHealth(vehicleid, 1000);
	}

	cache_delete(result);

	LoadOwnableCarTrunk(vehicleid);

	return 1;
}

stock CreateRentBikeBat()
{
    for(new idx; idx < sizeof rent_bikebat; idx ++)
    {
        CreatePickup(19131, 23, rent_bikebat[idx][0], rent_bikebat[idx][1], rent_bikebat[idx][2], -1, PICKUP_ACTION_RENT_BIKE_BAT, idx);//19134
        CreateDynamic3DTextLabel("{ffff00}?????????? ???????????", 0x3399FFFF, rent_bikebat[idx][0], rent_bikebat[idx][1], rent_bikebat[idx][2]  + 1.4, 10.0);
    }
    return 1;
}

forward LoadOwnableCarRentLut(playerid, oc_id);
public: LoadOwnableCarRentLut(playerid, oc_id)
{

	new Float:POS[4];
	GetPlayerPos(playerid, POS[0],POS[1],POS[2]);
	GetPlayerFacingAngle(playerid, POS[3]);

	if(g_ownable_car_loaded + 1 > MAX_OWNABLE_CARS)
	{
		print("[OwnableCars]: ?????? ? ????????. ???????? ????? ??????? ?????????? (MAX_OWNABLE_CARS)");
		return -1;
	}

	new query[55],
		Cache: result,
		vehicleid;

	mysql_format(mysql, query, sizeof query, "SELECT * FROM ownable_cars WHERE id='%d' LIMIT 1", oc_id);
	result = mysql_query(mysql, query, true);

	new idx = GetFreeOwnableCarID();

	SetOwnableCarData(idx, OC_SQL_ID, 		cache_get_field_content_int(0, "id"));
	SetOwnableCarData(idx, OC_OWNER_ID, 	cache_get_field_content_int(0, "owner_id"));

	SetOwnableCarData(idx, OC_MODEL_ID, 	cache_get_field_content_int(0, "model_id"));
	SetOwnableCarData(idx, OC_COLOR_1, 		cache_get_field_content_int(0, "color_1"));
	SetOwnableCarData(idx, OC_COLOR_2, 		cache_get_field_content_int(0, "color_2"));

	SetOwnableCarData(idx, OC_POS_X, 		cache_get_field_content_float(0, "pos_x"));
	SetOwnableCarData(idx, OC_POS_Y, 		cache_get_field_content_float(0, "pos_y"));
	SetOwnableCarData(idx, OC_POS_Z, 		cache_get_field_content_float(0, "pos_z"));
	SetOwnableCarData(idx, OC_ANGLE, 		cache_get_field_content_float(0, "angle"));

	cache_get_field_content(0, "number", g_ownable_car[idx][OC_NUMBER], mysql, 8);

	SetOwnableCarData(idx, OC_ALARM, 		bool: cache_get_field_content_int(0, "alarm"));
	SetOwnableCarData(idx, OC_KEY_IN, 		bool: cache_get_field_content_int(0, "key_in"));

	SetOwnableCarData(idx, OC_CREATE, 		cache_get_field_content_int(0, "create_time"));
	SetOwnableCarData(idx, OC_VINILCAR, 		cache_get_field_content_int(0, "vinilcar"));

	SetOwnableCarData(idx, OC_PT_BRAKE, 		cache_get_field_content_int(0, "pt_brake"));
	SetOwnableCarData(idx, OC_PT_STABILITY, 	cache_get_field_content_int(0, "pt_stability"));
	SetOwnableCarData(idx, OC_PT_ENGINE, 		cache_get_field_content_int(0, "pt_engine"));
	
	SetOwnableCarData(idx, OC_LAST_PRICE, 		cache_get_field_content_int(0, "last_price"));
	SetOwnableCarData(idx, OC_LAST_OWNER_GAME_ID, 		cache_get_field_content_int(0, "last_game_owner_id"));

SetOwnableCarData(idx, 	OC_COMFORT_PL,	cache_get_field_content_int(0, "comfort"));
		SetOwnableCarData(idx, 	OC_SPORT,	cache_get_field_content_int(0, "sport"));
		SetOwnableCarData(idx, 	OC_SPORT_PL,	cache_get_field_content_int(0, "sport_plus"));
		SetOwnableCarData(idx, 	OC_DRIFT,	cache_get_field_content_int(0, "drift"));

   /* SetOwnableCarData(idx, 	OC_COMFORT_PL,	cache_get_field_content_int(0, "comfort"));
		SetOwnableCarData(idx, 	OC_SPORT,	cache_get_field_content_int(0, "sport"));
		SetOwnableCarData(idx, 	OC_SPORT_PL,	cache_get_field_content_int(0, "sport_plus"));
		SetOwnableCarData(idx, 	OC_DRIFT,	cache_get_field_content_int(0, "drift"));

     new wernitro = cache_get_field_content_int(0, "nitro");
		new werlaunch = cache_get_field_content_int(0, "launch");
*/
	// cache_get_field_content(0, "owner_name", g_ownable_car[idx][OC_OWNER_NAME], mysql, 21);

	// ----------------------------------------------------------------------------------------

	if(strlen(GetOwnableCarData(idx, OC_NUMBER)) != 6)
		strmid(g_ownable_car[idx][OC_NUMBER], "------", 0, 8, 8);

	vehicleid = CreateVehicle
	(
		GetOwnableCarData(idx, OC_MODEL_ID),
		-2464.267089, 
		196.921752,
		26.042501,
		179.788787,
		GetOwnableCarData(idx, OC_COLOR_1),
		GetOwnableCarData(idx, OC_COLOR_2),
		-1,
		0,
		VEHICLE_ACTION_TYPE_OWNABLE_CAR,
		idx
	);
	if(vehicleid != INVALID_VEHICLE_ID)
	{
		//CreateVehicleLabel(vehicleid, GetOwnableCarData(idx, OC_NUMBER), 0xFFFF00EE, 0.0, 0.0, 1.3, 20.0);
		//index = GetVehicleData(vehicleid, V_ACTION_ID);
        format(g_ownable_car[idx][OC_NUMBER], 12, g_ownable_car[idx][OC_NUMBER]);
        SetVehicleRuNumberPlate(vehicleid, g_ownable_car[idx][OC_NUMBER], "17");
		SetVehicleParam(vehicleid, V_LOCK, bool: cache_get_field_content_int(0, "status"));

		SetVehicleData(vehicleid, V_MILEAGE, cache_get_field_content_float(0, "mileage"));

        //SetVehicleWheels(GetOwnableCarData(idx, OC_SQL_ID), vehicleid); // ??? ???????? ????????? ???
  
        /*if(wernitro == 1)   AddVehicleComponent(vehicleid, Nitro[0][0]);
	if(wernitro == 2)   AddVehicleComponent(vehicleid, Nitro[1][0]);
	if(wernitro == 3)   AddVehicleComponent(vehicleid, Nitro[2][0]);
	
	if(werlaunch == 1)   launch[vehicleid] = 1;
	if(werlaunch == 0)   launch[vehicleid] = 0;*/
  ownable_car_sell_status[vehicleid] = false;
		SetVehicleData(vehicleid, V_LAST_LOAD_TIME, gettime());
		
		//ChangeVehiclePaintjob(vehicleid, GetOwnableCarData(idx, OC_VINILCAR));

		SetVehicleData(vehicleid, V_HEALTH, 1000);

		SetVehicleHealth(vehicleid, 1000);
	}

	cache_delete(result);

	LoadOwnableCarTrunk(vehicleid);

	return 1;
}
// ?????? ???? ?????
stock CreateRentBikeLut()
{
    for(new idx; idx < sizeof rent_bikelut; idx ++)
    {
        CreatePickup(19131, 23, rent_bikelut[idx][0], rent_bikelut[idx][1], rent_bikelut[idx][2], -1, PICKUP_ACTION_RENT_BIKE_LUT, idx);//19134
        CreateDynamic3DTextLabel("{ffff00}?????????? ???????????", 0x3399FFFF, rent_bikelut[idx][0], rent_bikelut[idx][1], rent_bikelut[idx][2]  + 1.4, 10.0);
    }
    return 1;
}



stock ShowPlayerSellCarDialog(playerid)
{
                    ShowPlayerDialog(playerid,8968,DIALOG_STYLE_INPUT,"{993333}"SERVER_NAME"{FFFFFF} | ?????????? ? ??????? ??????????","??? ?????????? ?????? ????, ?? ??????? ?? ??????\n??????? ???? ????????? ? ?????????? ???? ????:","??????","??????");
}

CMD:unsellmycar(playerid) 
{
if(player_sell_ownable_car[playerid] == true)
                         	{
ShowPlayerDialog(playerid,8977,DIALOG_STYLE_MSGBOX,"{993333}"SERVER_NAME"{FFFFFF} | ??ù??? ? ??????? ??????????","?? ??????? ??? ?????? ??ù?? ???? ????????? ? ???????","??","???");
                             }
                             else SendClientMessage(playerid, 0xCECECEFF, "?? ?? ????????? ???? ????????? ?? ???????");
}

public tp_buy(playerid)
{
SetPlayerPos(playerid, 447.955505,985.479675,1001.039978);
		SetPlayerFacingAngle(playerid, 272.468505);
		SetCameraBehindPlayer(playerid);
		SetPlayerVirtualWorld(playerid, 101);
          SetPlayerInterior(playerid, 1);
}

CMD:buycar(playerid) 
{
if(player_sell_ownable_car[playerid] == true)
                         	{
                         SendClientMessage(playerid, 0xCECECEFF, "??????? ???????? ??? ??????? ???? ????????? ? ???????");
                         return 1;
                         }
                         else {
new vehicleid = GetNearestVehicleID(playerid, 5.0);

if(vehicleid != -1)	
{
	     if(ownable_car_sell_status[vehicleid] == true)
                         	{
	        new model_id = GetVehicleData(vehicleid, V_MODELID);
            new to_player = GetOwnableCarData(vehicleid, OC_LAST_OWNER_GAME_ID);
            new price = GetOwnableCarData(vehicleid, OC_LAST_PRICE);
            
			if((GetPlayerOwnableCars(playerid) + 1) > GetPlayerCarSlots(playerid))
				return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ????????? ?????? ??ù ??????????");

			if(GetPlayerOwnableCar(playerid) != INVALID_VEHICLE_ID)
				return SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ????????? ???? ?????? ????????? ? ??????? {888888}(/car > 7)");

			if(GetPlayerMoneyEx(playerid) < GetOwnableCarData(vehicleid, OC_LAST_PRICE))
				return SendClientMessage(playerid, 0xCECECEFF, "? ??? ??? ????? ????? ?????? ???? ?????????");
                
                SendPlayerOffer(playerid, to_player, OFFER_TYPE_SELL_OWNABLE_CAR2, price, vehicleid);
            }
            else  SendClientMessage(playerid, 0xCECECEFF, "??? ?????? ?? ????????ù");
    }
    else SendClientMessage(playerid, 0xCECECEFF, "?? ?????? ????????ù ?ù??? ? ??????????? ??????? ?????? ??????");
}
}


public tpplayertex2(playerid)
{
SetPlayerPos(playerid, 1002.388488,1004.204162,1001.039978);
			SetPlayerFacingAngle(playerid, 269.952667);
			return 1;
}

//Button try
IPacket:0x43(playerid, BitStream:bs)
{
    new header, rpcid, generatedNum;
    BS_ReadValue(bs,
    PR_UINT8, header,
          PR_UINT32, rpcid);
          BS_ReadValue(bs,
          PR_INT32, generatedNum);
          new message[128]; // ??????? ?????? ??ù ????????ù
		  format(message, sizeof(message), "??????????????? ?????: %d", generatedNum); // ??????????? ?????????
		  SendClientMessage(playerid, 0xCECECEFF, message); // ???????ù?? ?????????

      return 1;
}

//Button buy
IPacket:0x44(playerid, BitStream:bs)
{
    new header, rpcid;
    BS_ReadValue(bs,
    PR_UINT8, header,
    PR_UINT32, rpcid);

      return 1;
}

//button exit
IPacket:0x47(playerid, BitStream:bs)
{
    new header, rpcid;
    BS_ReadValue(bs,
    PR_UINT8, header,
    PR_UINT32, rpcid);

    //HideNomera(playerid);

      return 1;
}

#define COLOR_LIGHT_BLUE 0xAAEEFFFF

CMD:giveroulette(playerid, params[])
{
    if (GetPlayerAdminEx(playerid) < 7) 
        return SendClientMessage(playerid, COLOR_RED, "??????? ??????????. ù???????ù ??????? ?????????????? 7 ??? ????.");

    new targetid, amount;
    if (sscanf(params, "ui", targetid, amount)) 
        return SendClientMessage(playerid, COLOR_RED, "?????????????: /giveroulette [ID ??????] [??????????]");

    if (!IsPlayerConnected(targetid)) 
        return SendClientMessage(playerid, COLOR_RED, "????? ?? ??????.");

    if (amount <= 0) 
        return SendClientMessage(playerid, COLOR_RED, "?????????? ?????? ???? ?????? ???ù.");

    player_roulette_bronz[targetid] += amount;
    UpdatePlayerDatabaseInt(targetid, "roulette_bronz", player_roulette_bronz[targetid]);

    new adminName[MAX_PLAYER_NAME], targetName[MAX_PLAYER_NAME], msg[160];
    GetPlayerName(playerid, adminName, sizeof(adminName));
    GetPlayerName(targetid, targetName, sizeof(targetName));

    format(msg, sizeof(msg), "?? ?????? %d ?????. ??????? ?????? %s [%d].", amount, targetName, targetid);
    SendClientMessage(playerid, COLOR_LIGHT_BLUE, msg);

    format(msg, sizeof(msg), "????????????? %s [%d] ????? ??? %d ?????. ???????!", adminName, playerid, amount);
    SendClientMessage(targetid, COLOR_LIGHT_BLUE, msg);

    format(msg, sizeof(msg), "[A] ????????????? %s [%d] ????? %d ?????. ??????? ?????? %s [%d].", adminName, playerid, amount, targetName, targetid);
    SendMessageToAdmins(msg, 0xA9A9A9FF); // ?????-?????

    new logMessage[128];
    format(logMessage, sizeof(logMessage), "????? ????????? ??????? ?????? %s ? ?????????? %d.", targetName, amount);
    SendLog(playerid, LOG_TYPE_ADMIN_ACTION, logMessage);

    return 1;
}

CMD:ask(playerid, params[])
{
	if(GetPlayerHelperEx(playerid) == 0) return SendClientMessage(playerid, 0xFFFFFFFF, "{FF0000}| {FFFFFF}???????? ?????? ??????? ?????????!");

	if(!g_ask_created) return SendClientMessage(playerid, 0xCECECEFF, "{FF0000}| {FFFFFF}??? ????????? ??ù ????????!");

	new fmt_text[360],
		bool: ask_is_found;

	for(new idx; idx < g_ask_created; idx ++)
	{
		if(GetAskData(idx, ASK_EDIT) || GetAskData(idx, ASK_CREATOR) == INVALID_PLAYER_ID) continue;

		format
		(
			fmt_text, sizeof fmt_text,
			"{FFFFFF}?? ??????????? ???????? ?? ?????? ??????: {FFFF00}%s[%d]\n\n"\
			"{FFFF00}|{FFFFFF}ù????: {FFFF00}%s\n\n"\
			"",
			GetPlayerNameEx(GetAskData(idx, ASK_CREATOR)), GetAskData(idx, ASK_CREATOR), GetAskData(idx, ASK_TEXT)
		);

		Dialog(playerid, DIALOG_ASK_EDIT, DIALOG_STYLE_INPUT, "{00FFFF}"SERVER_NAME" | ??????", fmt_text, "?????????", "?????????");
		
		format(fmt_text, sizeof fmt_text, "{FFFFFF}????? ????????? {FFFF00}%s {FFFFFF}??ù??ù ?? ??? ??????.", GetPlayerNameEx(playerid));
		SendClientMessage(GetAskData(idx, ASK_CREATOR), -1, fmt_text);

		SetAskData(idx, ASK_EDIT, true);

		SetPVarInt(playerid, "ask_id", idx);

		ask_is_found = true;

		break;
	}

	if(!ask_is_found) return SendClientMessage(playerid, 0xCECECEFF, "{FF0000}| {FFFFFF}??? ?????????? ????????? ??ù ???????????ù!");

	return 1;
}

CMD:report(playerid)
{

    Dialog
    (
        playerid, DIALOG_REPORT_SELECTOR, DIALOG_STYLE_LIST,
        "{00FFFF}"SERVER_NAME"{ffffff} | ??ù??",
	    "{FFFF00}| {FFFFFF}??ù?? ? ?????????????? {FF0000}(??????)\n\
	    {FFFF00}| {FFFFFF}??ù?? ? ??????????? {FF0000}(??????)",
	    "???????",
	    "???????"
    );
	return 1;
}


CMD:rep(playerid, params[])
{
	if(!GetPlayerAdminEx(playerid)) return SendClientMessage(playerid, 0xFFFFFFFF, "{FF0000}| {FFFFFF}???????? ?????? ????????????? ???????!");

	if(!g_report_created) return SendClientMessage(playerid, 0xCECECEFF, "{FF0000}| {FFFFFF}??? ????????? ??ù ????????!");

	new fmt_text[360],
		bool: rep_is_found;

	for(new idx; idx < g_report_created; idx ++)
	{
		if(GetReportData(idx, REP_EDIT) || GetReportData(idx, REP_CREATOR) == INVALID_PLAYER_ID) continue;

		format
		(
			fmt_text, sizeof fmt_text,
			"{FFFF00}|{FFFFFF}???????????: {FFFF00}%s[%d]\n\n{FFFF00}|{FFFFFF}??????????: {FFFF00}%s \n\n"\
			"{FFFFFF}??? ?????????? ??????????????, ? ????? ?????? ????? ??\n"\
			"?????? ?????? ? ?????????? ???? ????.",
			GetPlayerNameEx(GetReportData(idx, REP_CREATOR)), GetReportData(idx, REP_CREATOR), GetReportData(idx, REP_TEXT)
		);

		Dialog(playerid, DIALOG_REPORT_EDIT, DIALOG_STYLE_INPUT, "{00FFFF}"SERVER_NAME" {FFFFFF}| ??????", fmt_text, "??????", "??????");

		SetReportData(idx, REP_EDIT, true);

		SetPVarInt(playerid, "report_id", idx);

		rep_is_found = true;

		break;
	}

	if(!rep_is_found) return SendClientMessage(playerid, 0xCECECEFF, "{FF0000}| {FFFFFF}??? ?????????? ????????? ??ù ???????????ù!");

	return 1;
}

alias:ans("pm")
CMD:ans(playerid, params[])
{
    if(GetPlayerAdminEx(playerid))
    {
		new targetid, text[81];

		if (sscanf(params, "is[81]", targetid, text) || targetid < 0 ) {
			if (!report_Show(playerid) && strlen(params) > 2) {
				SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}???????????: /ans [playerid / reportid] [????? / ?????]");
			}
			return true;
		}
		if (targetid >= MAX_PLAYERS) {

			new report_id = targetid, status = REPORT_STATUS_ANSWERED, Cache:result;

			mysql_query_[0] = EOS;

			mysql_format(mysql, mysql_query_, sizeof (mysql_query_), "SELECT * FROM "TABLE_REPORTS" \
				WHERE status=0 AND id=%i", report_id
			);
			result = mysql_query(mysql, mysql_query_, true);

			targetid = cache_get_field_content_int(0, "player_id");
			cache_get_field_content(0, "text", TempReportInfo[playerid][reportText], mysql, 144);
			cache_get_field_content(0, "date", TempReportInfo[playerid][reportDate], mysql, 20);

			mysql_query_[0] = EOS;
			new rows = cache_num_rows();

			if(!rows) {
				cache_delete(result);
				SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}?? ?????? ?????? ??? ??? ??? ?????!");
				return true;
			}
			mysql_format(mysql, mysql_query_, sizeof (mysql_query_), "UPDATE "TABLE_REPORTS" SET \
				status=%d, answer='%s' WHERE status=0 AND id=%d", status, text, report_id
			);
			mysql_query(mysql, mysql_query_);

			format(stringer1, sizeof (stringer1), "\
				{FFFFFF}???? ???????: {afafaf}%s\n \n\
				{FFFFFF}??? ?????? ?%d:\n\
				{afafaf}| {afafaf}%s\n \n\
				{FFFFFF}????? ?? ?????????????:\n\
				{afafaf}| "c_server"%s",
				TempReportInfo[playerid][reportDate], report_id, TempReportInfo[playerid][reportText], text
			);
			Dialog(targetid, 0000, DIALOG_STYLE_MSGBOX, ""c_server"????? ?????????????", stringer1, !"???????", !"");

			format(stringer1, sizeof (stringer1), ""c_server"??? ?????? ?%d: {FFFFFF}%s", report_id, TempReportInfo[playerid][reportText]);
			SendClientMessage(targetid, COLOR_YELLOW, stringer1);
			format(stringer1, sizeof (stringer1), ""c_server"{8B4513}????? ?? ?????????????? %s[%d]: {CD853F}%s", GetPlayerNameEx(playerid), playerid, text);
			SendClientMessage(targetid, COLOR_YELLOW, stringer1), stringer1[0] = EOS;

			format(stringer1, sizeof(stringer1), "{CC6633}[A] %s[%d] ??????? ?????? %s[%i]: %s",
				GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid, text
			);
			SendMessageToAdmins(stringer1,0xFfa500AA);

            /*if(PlayerInfo[playerid][pAdmin]) PlayerInfo[playerid][pRepAdm]++;
            else PlayerInfo[playerid][pHotvet] ++;*/

			cache_delete(result);

		} else {
			if (!IsPlayerConnected(targetid))
				return SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}????? ?? ??????");

			if (strlen(text) > 80)
				return SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}?????ù ?????? ?????? 80 ????????!");

			if (targetid == playerid)
				return SendClientMessage(playerid, COLOR_WHITE, !"{afafaf}?????ù ???????? ?????? ????");

			format(stringer1, sizeof(stringer1), ""c_server"{8B4513}????? ?? ?????????????? %s[%d]: {CD853F}%s",
				GetPlayerNameEx(playerid), playerid, text
			);
			SendClientMessage(targetid, 0xffa141FF, stringer1);

			format(stringer1, sizeof(stringer1), "{afafaf}[A] %s[%d] ??????? ?????? %s[%d]: %s",
				GetPlayerNameEx(playerid), playerid, GetPlayerData(targetid, P_NAME), targetid, text
			);
			SendMessageToAdmins(stringer1,0xFfa500AA);

            /*if(PlayerInfo[playerid][pAdmin]) PlayerInfo[playerid][pRepAdm]++;
            else PlayerInfo[playerid][pHotvet] ++;*/

			stringer1[0] = EOS;
		}
	}
	return true;
}



CMD:addfamcar(playerid, params[])
{
    new database_car;
    if(sscanf(params, "d", database_car))
        return SendClientMessage(playerid, COLOR_GREY, "?????????????: /addfamcar [ID ????]");

    new fam_id = GetPlayerIdFamily(playerid);
    if(fam_id == -1)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?? ???????? ? ?????.");

    MoveOwnableCar(playerid, database_car, fam_id);
    return 1;
}

CMD:testf(playerid)
{
new fam_id = GetPlayerIdFamily(playerid);

new msg[64];
format(msg, sizeof(msg), "???? ?????: %d", fam_id);
SendClientMessage(playerid, COLOR_GREY, msg);
}



stock ShowAdminCommandsByLevel(playerid, level)
{
    new dialogStr[2048];
    format(dialogStr, sizeof(dialogStr), "??????? ?????????????? %d ?????ù:\n\n", level);

    switch(level)
    {
        case 1:
        {
            strcat(dialogStr, "/re ó ?????? ?????? ?? ???????\n");
            strcat(dialogStr, "/reoff ó ?????????? ??????\n");
            strcat(dialogStr, "/epoints ó ??????? ??????? epoints\n");
            strcat(dialogStr, "/askin ó ?????? ?????-????\n");
            strcat(dialogStr, "/jail ó ???????? ?????? ? ??????\n");
            strcat(dialogStr, "/unjail ó ?????????? ??????\n");
            strcat(dialogStr, "/mute ó ????????????? ???\n");
            strcat(dialogStr, "/unmute ó ??ù?? ?????????? ????\n");
            strcat(dialogStr, "/flip ó ??????????? ???? ??????\n");
            strcat(dialogStr, "/vtp ó ???????? ? ????\n");
            strcat(dialogStr, "/getv ó ???????? ???? ? ??????\n");
            strcat(dialogStr, "/vget ó ???????? ???? ? ????\n");
            strcat(dialogStr, "/freeze ó ?????????? ??????\n");
            strcat(dialogStr, "/unfreeze ó ??????????? ??????\n");
            strcat(dialogStr, "/astats ó ?????????? ??????????????\n");
            strcat(dialogStr, "/stats ó ?????????? ??????\n");
            strcat(dialogStr, "/slap ó ?????????? ??????\n");
            strcat(dialogStr, "/agm ó ???????????????? ??????????\n");
            strcat(dialogStr, "/tp ó ????????-????\n");
            strcat(dialogStr, "/af ó ?????-?????\n");
            strcat(dialogStr, "/dl ó ?????????ù ?? ????\n");
            strcat(dialogStr, "/az ó ???????? ? ?????-????\n");
        }
        case 2:
        {
            strcat(dialogStr, "/get ó ?????????ù ? ??????\n");
            strcat(dialogStr, "/gethere (/gh) ó ???????? ?????? ? ????\n");
            strcat(dialogStr, "/warn ó ?????? ??????????????\n");
            strcat(dialogStr, "/unwarn ó ??ù?? ??????????????\n");
            strcat(dialogStr, "/weap ó ?????????? ??????\n");
            strcat(dialogStr, "/goto (/g) ó ???????? ? ??????\n");
            strcat(dialogStr, "/event ó ??????? ???????ù???\n");
            strcat(dialogStr, "/hp ó ?????? HP\n");
            strcat(dialogStr, "/skick ó ???? ??????? ??????\n");
            strcat(dialogStr, "/fonline ó ?????????? ??????? ???????????\n");
        }
        case 3:
        {
            strcat(dialogStr, "/sethelper ó ????????? ???????\n");
            strcat(dialogStr, "/delhelper ó ??ù?? ???????\n");
            strcat(dialogStr, "/offdelhelper ó ??ù?? ??????? ???????\n");
            strcat(dialogStr, "/templeader ó ????????? ?????????\n");
            strcat(dialogStr, "/setleader ó ????????? ?? ??????\n");
            strcat(dialogStr, "/offban ó ??? ???????\n");
            strcat(dialogStr, "/ban ó ??? ??????\n");
            strcat(dialogStr, "/money ó ?????? ?????? ??????\n");
            strcat(dialogStr, "/ears ó ????????? SMS\n");
            strcat(dialogStr, "/getvehspeed ó ???????? ????\n");
        }
        case 4:
        {
            strcat(dialogStr, "/permban ó ??? ????????\n");
            strcat(dialogStr, "/inter ó ?????????? ????????\n");
            strcat(dialogStr, "/world ó ?????????? ??????????? ???\n");
            strcat(dialogStr, "/house ó ???????? ? ????\n");
            strcat(dialogStr, "/biz ó ???????? ? ???????\n");
            strcat(dialogStr, "/fuelstation ó ???????? ? ???\n");
            strcat(dialogStr, "/veh ó ??????? ?????????\n");
            strcat(dialogStr, "/skin ó ????????? ????\n");
            strcat(dialogStr, "/o ó ????????? ? ????? ???\n");
            strcat(dialogStr, "/skin ó ?????? ????????? ????\n");
            strcat(dialogStr, "/spcars ó ??????? ????\n");
            strcat(dialogStr, "/cc ó ??????? ????\n");
            strcat(dialogStr, "/delvehall ó ??????? ???? ?????????\n");
            strcat(dialogStr, "/delveh ó ??????? ??????? ????\n");
        }
        case 5:
        {
            strcat(dialogStr, "/shablon ó ?????? ??????\n");
            strcat(dialogStr, "/deladmin ó ??ù?? ??????????????\n");
            strcat(dialogStr, "/offdeladmin ó ??ù?? ???????\n");
            strcat(dialogStr, "/admup ó ???????? ??????????????\n");
            strcat(dialogStr, "/admdown ó ???????? ??????????????\n");
            strcat(dialogStr, "/awarn ó ???????\n");
            strcat(dialogStr, "/unawarn ó ??ù?? ???????\n");
            strcat(dialogStr, "/admlist ó ?????? ?????????????\n");
            strcat(dialogStr, "/setyt ó ?????? ????????\n");
            strcat(dialogStr, "/delyt ó ??ù?? ????????\n");
            strcat(dialogStr, "/agivelic ó ?????? ????????\n");
            strcat(dialogStr, "/sellproperty ó ??????? ?????????\n");
            strcat(dialogStr, "/lip ó ?????????? IP\n");
            strcat(dialogStr, "/getlog ó ???? ??????\n");
            strcat(dialogStr, "/unban ó ????????????? ????????\n");
        }
        case 6:
        {
            strcat(dialogStr, "/restart ó ??????? ???????\n");
            strcat(dialogStr, "/inforestart ó ?????????????? ? ????????\n");
            strcat(dialogStr, "/arecovery ó ?????????????? ?????????\n");
            strcat(dialogStr, "/reset_cash ó ???????? ??????\n");
            strcat(dialogStr, "/reset_donate ó ???????? ?????\n");
            strcat(dialogStr, "/givecash ó ?????? ??????\n");
            strcat(dialogStr, "/givedonate ó ?????? ?????\n");
            strcat(dialogStr, "/givevip ó ?????? VIP\n");
            strcat(dialogStr, "/giveepoints ó ?????? epoints\n");
            strcat(dialogStr, "??????????\n");
            strcat(dialogStr, "/fullfuels ó ????????? ???\n");
            strcat(dialogStr, "/setfuels ó ?????????? ???????\n");
            strcat(dialogStr, "/fullprods ó ????????? ????????\n");
            strcat(dialogStr, "/setprods ó ?????????? ????????\n");
            strcat(dialogStr, "/sendcmd ó ??????? ?? ???? ??????\n");
            strcat(dialogStr, "/add_cont ó ????????? ??????????\n");
            strcat(dialogStr, "/debug ó ?????\n");
            strcat(dialogStr, "/slet ó ???? ?????????\n");
            strcat(dialogStr, "/payday ó ???????????? payday\n");
        }
        case 7:
        {
            strcat(dialogStr, "/apanel ó ?????? ????????????\n");
            strcat(dialogStr, "/delacc ó ??????? ???????\n");
            strcat(dialogStr, "/tehnical ó ???. ??????\n");
            strcat(dialogStr, "/tehnicaloff ó ????????? ???. ??????\n");
            strcat(dialogStr, "/setplayerhouse ó ?????? ???\n");
            strcat(dialogStr, "/setplayerbiz ó ?????? ??????\n");
            strcat(dialogStr, "/addpadik ó ??????? ???????\n");
            strcat(dialogStr, "/esetexitpos ó ????? ?? ????????\n");
            strcat(dialogStr, "/addhouse ó ??????? ???\n");
            strcat(dialogStr, "/sethousepos ó ??????ù ????\n");
            strcat(dialogStr, "/edithousedata ó ????????? ????\n");
            strcat(dialogStr, "/setexitpos ó ????? ?? ????\n");
            strcat(dialogStr, "/setcarpos ó ????? ??????\n");
            strcat(dialogStr, "/addfuelst ó ??????? ???\n");
            strcat(dialogStr, "/addbiz ó ??????? ??????\n");
            strcat(dialogStr, "/editbizdata ó ????????????? ??????\n");
            strcat(dialogStr, "/bsetpos ó ??????????? ??????\n");
            strcat(dialogStr, "/bsetexitpos ó ????? ?? ???????\n");
            strcat(dialogStr, "/delbiz ó ??????? ??????\n");
            strcat(dialogStr, "/givecar ó ?????? ????\n");
            strcat(dialogStr, "/setskills ó ?????????? ??????\n");
            strcat(dialogStr, "/doubling ó x2 ?????\n");
            strcat(dialogStr, "/settime ó ?????????? ????ù\n");
            strcat(dialogStr, "/setap ó ????????? ???????? ???????\n");
        }
    }

    ShowPlayerDialog(playerid, DIALOG_AHELP_COMMANDS, DIALOG_STYLE_MSGBOX, "??????? ? ???????ù", dialogStr, "?????", "???????");
}

stock vorotafrack()
{
    vorotamo = CreateObject(1717,1891.1486,1721.5555,16.4444, 0, 0, 0);
    vorotamo1 = CreateObject(1718,1909.95,1725.28,15.6666, 0, 0, 0);
	army_kpp_cp = CreateDynamicSphere(1910.61, 1728.09, 16.73, 2.0);
	sphereyahik1 = CreateDynamicSphere(1892.18, -1932.83, 34.01, 1.0);
	sphereyahik2 = CreateDynamicSphere(1584.39, 1636.23, 16.07, 1.0);
}

CMD:gotome(playerid, params[])
{
	if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FSIN))
		return SendClientMessage(playerid, 0x999999FF, "?? ?? ???????? ?????????????????? ???????");

	new to_player;
	if(sscanf(params, "u", to_player)) 
		return SendClientMessage(playerid, 0xCECECEFF, "???????????: /gotome [id ??????]");

	if(!IsPlayerConnected(to_player) || !IsPlayerLogged(to_player)) 
		return SendClientMessage(playerid, 0x999999FF, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, to_player, 6.0)) 
		return SendClientMessage(playerid, 0x999999FF, "????? ????????ù ??????? ??????");

	if(!GetPlayerData(to_player, P_CUFFED)) 
		return SendClientMessage(playerid, 0x999999FF, "????? ?? ? ??????????");

	new pname[MAX_PLAYER_NAME], msg[128];
	GetPlayerName(to_player, pname, sizeof pname);

	if(g_IsFollowing[to_player] && g_FollowingTarget[to_player] == playerid)
	{
		StopFollowing(to_player);
		g_IsLeading[playerid] = false;

		format(msg, sizeof msg, "???????? %s ?? ??? ? ????????? ?????????????.", pname);
		Action(playerid, msg);
		SendClientMessage(playerid, 0xDD90FFFF, "?? ????????? ??????.");
		SendClientMessage(to_player, 0xDD90FFFF, "??????????? ???????? ???.");
	}
	else
	{
		StartFollowing(to_player, playerid);
		g_IsLeading[playerid] = true;

		format(msg, sizeof msg, "??ù? %s ?? ???? ? ????? ?? ?????.", pname);
		Action(playerid, msg);
		SendClientMessage(playerid, 0xDD90FFFF, "????? ?????? ??????? ?? ????.");
		SendClientMessage(to_player, 0xDD90FFFF, "?? ???????? ?? ???????????.");
	}

	return 1;
}

cmd:addwhitelist(playerid, params[])
{
     if(GetPlayerAdminEx(playerid) < 7) return 1;
     extract params -> new string: name[21]; else return SCM(playerid, -1, "??????? /addwhitelist [???]");
     
     new query[128];
	new Cache: result, is_name_exist;

	mysql_format(mysql, query, sizeof query, "SELECT name FROM whitelist WHERE name='%s' LIMIT 1", name);
	result = mysql_query(mysql, query);
	
	is_name_exist = cache_num_rows();
	cache_delete(result);

	if(is_name_exist)
	{
		SCM(playerid, -1, "?????? ??? ??? ???? ? ???? ??????");
		return 1;
	}
     mysql_format(mysql, query, sizeof query, "INSERT INTO whitelist(name) VALUES ('%s')", name);
	 result = mysql_query(mysql, query);
}


stock fsinobjects()
{
	spherekalitka1 = CreateDynamicSphere(-1776.79,-2730.72,7.72, 2.0);
	spherekalitka2 = CreateDynamicSphere(-1764.21,-2794.81,7.72, 2.0);
	spherekalitka3 = CreateDynamicSphere(-1684.12,-2812.92,7.72, 2.0);
	spherekalitka4 = CreateDynamicSphere(-1681.46,-2737.83,7.72, 2.0);
    vorotafsinkpp1 = CreateObject(11611, -1827.21, -2634.129, 8.61, 0.0, 0.0, 99.4);
    vorotafsinkpp = CreateObject(11612, -1820.11, -2632.95, 8.61, 0.0, 0.0, -80.5);
    vorotastatik = CreateObject(11614, -1778.2, -2709.2, 10.9, 0.0, 0.0, 142.0);
    vorotki = CreateObject(11615, -1820.49, -2651.36, 10.9, 0.0, 0.0, 99.5);
    kalitka1 = CreateObject(11781, -1776.81,-2731.33, 7.5, 0.0, 0.0, 233.0);
    kalitka2 = CreateObject(11781, -1764.28,-2795.48, 7.5, 0.0, 0.0, 233.0);
    kalitka3 = CreateObject(11781, -1683.55,-2812.77, 7.5, 0.0, 0.0, 51.0);
    kalitka4 = CreateObject(11781, -1681.68, -2737.23, 7.5, 0.0, 0.0, 143.0);
    svidaniedoor = CreateObject(12255, -2023.03, -1800.54, 1501.33, 0.0, 0.0, 0.0);
    svidaniesphere = CreateDynamicSphere(-2023.11,-1799.98,1501.18, 2.0);
}

stock Doorfrack()
{
bolka1 = CreateObject(13320, 1500.70, 2509.14, 2501.10, 0.00, 0.00, 90.00);
bolka2 = CreateObject(13321, 1502.44, 2509.14, 2501.10, 0.00, 0.00, 90.00);
bolka4 = CreateObject(13320, 1514.15, 2500.95, 2501.10, 0.00, 0.00, 0.00);
bolka5 = CreateObject(13321, 1514.15, 2499.23, 2501.10, 0.00, 0.00, 0.00);
bolk1 = CreateDynamicSphere(1500.70, 2509.14, 2501.10, 2.0);
bolk2 = CreateDynamicSphere(1514.15, 2500.99, 2501.10, 2.0);
voenka = CreateDynamicSphere(1796.04, 1732.31, 1493.24, 2.0);
door = CreateDynamicSphere(-1101.11, 1518.66, 1500.15, 2.0);
door1 = CreateDynamicSphere(-1098.70, 1493.35, 1500.14, 2.0);
door2 = CreateDynamicSphere(-1104.93, 1501.24, 1500.15, 2.0);
door3 = CreateDynamicSphere(-1110.83, 1503.10, 1500.15, 2.0);
door4 = CreateDynamicSphere(-1114.47, 1507.76, 1500.25, 2.0);
door5 = CreateDynamicSphere(-1105.18, 1515.19, 1500.14, 2.0);
door6 = CreateDynamicSphere(-1113.73, 1484.76, 1500.14, 2.0);
doorvoen = CreateObject(13460, 1795.92, 1732.29, 1493.28, 0.00, 0.00, 0.00); // ???? ????? ?????
doorf = CreateObject(13460, -1101.12, 1518.60, 1500.18, 0.00, 0.00, 90.00); // ???? ?????
doorf1 = CreateObject(13460, -1098.72, 1493.37, 1500.18, 0.00, 0.00, 0.00); // ????????ù
doorf2 = CreateObject(13459, -1104.93, 1501.30, 1500.18, 0.00, 0.00, 0.00); // ????? ? ??????? ? ??????????
doorf3 = CreateObject(13459, -1110.83, 1503.07, 1500.18, 0.00, 0.00, 0.00); // ???? ? ??????? 2
doorf4 = CreateObject(13460, -1114.52, 1507.87, 1500.18, 0.00, 0.00, -90.00); // ???? 2
doorf5 = CreateObject(13460, -1105.26, 1515.25, 1500.18, 0.00, 0.00, 0.00); // ???? 1
doorf6 = CreateObject(13459, -1114.28, 1485.00, 1500.18, 0.0, 0.0, -90.00); // ???????????
barrier1 = CreateObject(12696,2579.94,-2434.11,21.79, 0, 0, 0); // ???????? ???
barrier2 = CreateObject(1718, -2345.66, -381.10, 29.06, -180.0, 0.0, 90.0);
}

stock utf8_to_cp1251(string[]) {
    new len = strlen(string);
    for (new i = 0; i < len; i++) {
        if (string[i] == 0xD0 && i + 1 < len) {
            if (string[i + 1] >= 0x90 && string[i + 1] <= 0xBF) {
                string[i] = string[i + 1] + 0x30;
                strdel(string, i + 1, i + 2);
                len--;
            }
        }
        else if (string[i] == 0xD1 && i + 1 < len) {
            if (string[i + 1] >= 0x80 && string[i + 1] <= 0x8F) {
                string[i] = string[i + 1] + 0x70;
                strdel(string, i + 1, i + 2);
                len--;
            }
        }
    }
    return 1;
}

stock cp1251_to_utf8(string[]) {
    new len = strlen(string);
    new result[128];
    new i = 0, j = 0;
    while (i < len && j < sizeof(result) - 2) {
        if (string[i] >= 0xC0) {
            result[j++] = 0xD0 + (string[i] >= 0xF0);
            result[j++] = string[i++] - (string[i] >= 0xF0 ? 0x70 : 0x30);
        } else {
            result[j++] = string[i++];
        }
    }
    result[j] = 0;
    format(string, 128, "%s", result);
}

CMD:pr(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
		return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

	if(GetPlayerJob(playerid) < 5)
		return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");

	if(gettime() - g_last_pr[playerid] < 600)
		return SendClientMessage(playerid, COLOR_GREY, "?????????, ????????ù ????? ???????? ?????? ??? ? 10 ?????. ");

	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	new targetid, reason[64];
	if(sscanf(params, "us[64]", targetid, reason))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /pr [id ??????] [???????]");


	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????");

	if(GetPlayerData(targetid, P_FJAIL) <= 0)
		return SendClientMessage(playerid, COLOR_GREY, "????????? ????? ???????? ?????? ??????????? ????.");

	if(GetPlayerData(targetid, P_PR) >= 1)
		return SendClientMessage(playerid, COLOR_GREY, "????? ??? ????? ???????????? ?????????? ?????????.");

	SetPlayerData(targetid, P_PR, GetPlayerData(targetid, P_PR) + 1);
	UpdatePlayerDatabaseInt(targetid, "pr", GetPlayerData(targetid, P_PR));

	AddPlayerData(targetid, P_FJAIL, -, 600);
	UpdatePlayerDatabaseInt(targetid, "fjail", GetPlayerData(targetid, P_FJAIL));

	new msg[144];
	format(msg, sizeof msg, "????????? ???? %s[%d] ????? ??? ????????? ?? ???????: %s.", GetPlayerNameEx(playerid), playerid, reason);
	SendClientMessage(targetid, COLOR_BLUE, msg);

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d] ????? ????????? ???????????? %s[%d] ?? ???????: %s",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		playerid,
		GetPlayerNameEx(targetid),
		targetid,
		reason);

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);
	
	if(GetPlayerData(targetid, P_FJAIL) <= 0)
{
	FSinUnjailPlayer(targetid);

	SendClientMessage(targetid, COLOR_BLUE, "??? ???? ????????. ?? ???? ???????? ?? ??????.");
}

	g_last_pr[playerid] = gettime();
	return 1;
}

CMD:unpr(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
		return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

	if(GetPlayerJob(playerid) < 5)
		return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");
		
	if(gettime() - g_last_unpr[playerid] < 300)
		return SendClientMessage(playerid, COLOR_GREY, "?????????, ????????ù ????? ??????? ?????? ??? ? 5 ?????. ");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	new targetid, reason[64];
	if(sscanf(params, "us[64]", targetid, reason))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /unpr [id ??????] [???????]");


	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????");

	if(GetPlayerData(targetid, P_FJAIL) <= 0)
		return SendClientMessage(playerid, COLOR_GREY, "????????? ????? ??????? ?????? ? ??????????? ????.");

	if(GetPlayerData(targetid, P_PR) <= 0)
		return SendClientMessage(playerid, COLOR_GREY, "? ?????? ??? ?????????.");

	SetPlayerData(targetid, P_PR, GetPlayerData(targetid, P_PR) - 1);
	UpdatePlayerDatabaseInt(targetid, "pr", GetPlayerData(targetid, P_PR));

	AddPlayerData(targetid, P_FJAIL, +, 600);
	UpdatePlayerDatabaseInt(targetid, "fjail", GetPlayerData(targetid, P_FJAIL));

	new msg[144];
	format(msg, sizeof msg, "????????? ???? %s[%d] ??ù? ? ??? ????????? ?? ???????: %s", GetPlayerNameEx(playerid), playerid, reason);
	SendClientMessage(targetid, COLOR_BLUE, msg);

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d] ??ù? ????????? ???????????? %s[%d] ?? ???????: %s",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		playerid,
		GetPlayerNameEx(targetid),
		targetid,
		reason);

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);
	
	g_last_unpr[playerid] = gettime();
	return 1;
}

CMD:mr(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
		return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

	if(GetPlayerJob(playerid) < 5)
		return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");
		
	if(gettime() - g_last_mr[playerid] < 600)
		return SendClientMessage(playerid, COLOR_GREY, "?????????, ???????? ????? ???????? ?????? ??? ? 10 ?????. ");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	new targetid, reason[64];
	if(sscanf(params, "us[64]", targetid, reason))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /mr [id ??????] [???????]");


	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????");

	if(GetPlayerData(targetid, P_FJAIL) <= 0)
		return SendClientMessage(playerid, COLOR_GREY, "??????? ????? ???????? ?????? ??????????? ????.");

	if(GetPlayerData(targetid, P_MR) >= 3)
		return SendClientMessage(playerid, COLOR_GREY, "????? ??? ????? ???????????? ?????????? ?????????.");

	SetPlayerData(targetid, P_MR, GetPlayerData(targetid, P_MR) + 1);
	UpdatePlayerDatabaseInt(targetid, "mr", GetPlayerData(targetid, P_MR));
	
	AddPlayerData(targetid, P_FJAIL, +, 300);
	UpdatePlayerDatabaseInt(targetid, "fjail", GetPlayerData(targetid, P_FJAIL));

	new msg[144];
	format(msg, sizeof msg, "????????? ???? %s[%d] ????? ??? ??????? ?? ???????: %s. ù?????? ?????????? ?????????: %d/3.", GetPlayerNameEx(playerid), playerid, reason, GetPlayerData(targetid, P_MR));
	SendClientMessage(targetid, COLOR_BLUE, msg);

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d] ????? ??????? ???????????? %s[%d] ?? ???????: %s",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		playerid,
		GetPlayerNameEx(targetid),
		targetid,
		reason);
		
	
	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);
		
	if(GetPlayerData(targetid, P_MR) == 3)
{
	SetPlayerData(targetid, P_KARCER, 1);
	UpdatePlayerDatabaseInt(targetid, "karcer", 1);

	new pos = random(sizeof g_karcer_positions);
	new world = 98 + pos;

	SetPlayerVirtualWorld(targetid, world);
	SetPlayerPosEx(targetid,
		g_karcer_positions[pos][0],
		g_karcer_positions[pos][1],
		g_karcer_positions[pos][2],
		1,
		g_karcer_positions[pos][4]);

	SetPlayerFacingAngle(targetid, g_karcer_positions[pos][3]);
	SetPlayerInterior(targetid, 1);
	SetPlayerSkin(targetid, FSIN_SKIN_ID);

	SendClientMessage(targetid, COLOR_BLUE, "?? ???? ????????????? ?????????? ? ?????? ?? ????? ?????, ??? ??? ? ??? 3/3 ?????????.");

	new name[MAX_PLAYER_NAME];
	GetPlayerName(targetid, name, sizeof name);

	new msg[128];
	format(msg, sizeof msg, "[R] ??????????? %s[%d] ??? ????????????? ??????? ? ?????? ??-?? 3/3 ?????????.", name, targetid);
	SendMessageToTeam(GetPlayerTeamEx(playerid), msg, COLOR_RADIO);
}
	
	g_last_mr[playerid] = gettime();
	return 1;
}

CMD:unmr(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
		return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

	if(GetPlayerJob(playerid) < 5)
		return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");

	if(gettime() - g_last_unmr[playerid] < 300)
		return SendClientMessage(playerid, COLOR_GREY, "?????????, ???????? ????? ??????? ?????? ??? ? 5 ?????. ");
	
	if(!IsWorkDayStarted(playerid)) return 1;
	
	new targetid, reason[64];
	if(sscanf(params, "us[64]", targetid, reason))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /unmr [id ??????] [???????]");


	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????");

	if(GetPlayerData(targetid, P_FJAIL) <= 0)
		return SendClientMessage(playerid, COLOR_GREY, "??????? ????? ??????? ?????? ? ??????????? ????.");

	if(GetPlayerData(targetid, P_MR) <= 0)
		return SendClientMessage(playerid, COLOR_GREY, "? ?????? ??? ?????????.");

	SetPlayerData(targetid, P_MR, GetPlayerData(targetid, P_MR) - 1);
	UpdatePlayerDatabaseInt(targetid, "mr", GetPlayerData(targetid, P_MR));

	AddPlayerData(targetid, P_FJAIL, -, 300);
	UpdatePlayerDatabaseInt(targetid, "fjail", GetPlayerData(targetid, P_FJAIL));

	new msg[144];
	format(msg, sizeof msg, "????????? ???? %s[%d] ??ù? ? ??? ??????? ?? ???????: %s. ù?????? ?????????? ?????????: %d/3.", GetPlayerNameEx(playerid), playerid, reason, GetPlayerData(targetid, P_MR));
	SendClientMessage(targetid, COLOR_BLUE, msg);

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d] ??ù? ??????? ???????????? %s[%d] ?? ???????: %s",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		playerid,
		GetPlayerNameEx(targetid),
		targetid,
		reason);

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);

if(GetPlayerData(targetid, P_KARCER) == 1 && GetPlayerData(targetid, P_MR) < 3)
{
	SetPlayerData(targetid, P_KARCER, 0);
	UpdatePlayerDatabaseInt(targetid, "karcer", 0);

	new jail_pos = random(sizeof g_fjail_positions);

	SetPlayerPosEx
	(
		targetid,
		g_fjail_positions[jail_pos][0],
		g_fjail_positions[jail_pos][1],
		g_fjail_positions[jail_pos][2],
		1,
		g_fjail_positions[jail_pos][4]
	);

	SetPlayerFacingAngle(targetid, g_fjail_positions[jail_pos][3]);
	SetPlayerInterior(targetid, 1);
	SetPlayerSkin(targetid, FSIN_SKIN_ID);

	new msg[144];
	format(msg, sizeof msg, "?? ???? ???????? ?? ???????, ??? ??? ??? ??ù?? ???????. ù?????? ???-?? ?????????: %d/3", GetPlayerData(targetid, P_MR));
	SendClientMessage(targetid, COLOR_BLUE, msg);

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[R] ??????????? %s[%d] ??? ??????? ?? ???????, ??? ??? ??? ??ù?? ???????. ù?????? ???-??: %d/3",
		GetPlayerNameEx(targetid),
		targetid,
		GetPlayerData(targetid, P_MR));

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);
}
	
	g_last_unmr[playerid] = gettime();
	return 1;
}

stock IsSpectating(playerid)
{
	return GetPlayerSpectateData(playerid, S_PLAYER) != -1;
}
stock InitPlayerLobby(playerid, lobby, table)
{
    pBJInfo[playerid][pBJTable] = table;

	TextDrawShowForPlayer(playerid, bj_fon);
	TextDrawShowForPlayer(playerid, bj_double);
	TextDrawShowForPlayer(playerid, bj_stop);
	TextDrawShowForPlayer(playerid, bj_play);
	TextDrawShowForPlayer(playerid, bj_take);
	TextDrawShowForPlayer(playerid, bj_exit);

	TextDrawShowForPlayer(playerid, bj_help);

	TextDrawShowForPlayer(playerid, bj_text_start_time);
	TextDrawShowForPlayer(playerid, bj_text_start_timer[lobby]);

	PlayerTextDrawShow(playerid, bj_bet[playerid]);
	PlayerTextDrawSetString(playerid, bj_bet[playerid], "0 ??b");

	new money = GetPlayerMoney(playerid);

	new str[15];
	format(str, sizeof str, "%d ??b", money);
	PlayerTextDrawShow(playerid, bj_money[playerid]);
	PlayerTextDrawSetString(playerid, bj_money[playerid], str);

	//PlayerTextDrawSetString(playerid, bj_bet[playerid], str);

	FreezePlayer(playerid);

	foreach(new i : Player)
	{
	    ShowPlayerNameTagForPlayer(playerid, i, 0);
	}

	if(BlackJackLobby[lobby][Table1Id] < 1000)
	{
	    new name[24];
		GetPlayerName(BlackJackLobby[lobby][Table1Id], name, 24);

		PlayerTextDrawShow(playerid, bj_members_name[playerid][0]);
		PlayerTextDrawSetString(playerid, bj_members_name[playerid][0], name);


		PlayerTextDrawShow(playerid, bj_card_table[playerid][1][0]); PlayerTextDrawShow(playerid, bj_card_table[playerid][1][1]); PlayerTextDrawShow(playerid, bj_card_table[playerid][1][2]); PlayerTextDrawShow(playerid, bj_card_table[playerid][1][3]);

		TextDrawShowForPlayer(playerid, bj_table_ready[lobby][1]);
		TextDrawSetString(bj_table_ready[lobby][1], "NOT READY");
		TextDrawColor(bj_table_ready[lobby][1], -16776961);


		new table1 = BlackJackLobby[lobby][Table1Id];

		GetPlayerName(playerid, name, 24);

		PlayerTextDrawShow(table1, bj_members_name[table1][table-1]);
		PlayerTextDrawSetString(table1, bj_members_name[table1][table-1], name);


		PlayerTextDrawShow(table1, bj_card_table[table1][table][0]); PlayerTextDrawShow(table1, bj_card_table[table1][table][1]); PlayerTextDrawShow(table1, bj_card_table[table1][table][2]); PlayerTextDrawShow(table1, bj_card_table[table1][table][3]);

		TextDrawShowForPlayer(table1, bj_table_ready[lobby][table]);
		TextDrawSetString(bj_table_ready[lobby][table], "NOT READY");
		TextDrawColor(bj_table_ready[lobby][table], -16776961);
	}
	if(BlackJackLobby[lobby][Table2Id] < 1000)
	{
	    new name[24];
		GetPlayerName(BlackJackLobby[lobby][Table2Id], name, 24);

		PlayerTextDrawShow(playerid, bj_members_name[playerid][1]);
		PlayerTextDrawSetString(playerid, bj_members_name[playerid][1], name);


		PlayerTextDrawShow(playerid, bj_card_table[playerid][2][0]); PlayerTextDrawShow(playerid, bj_card_table[playerid][2][1]); PlayerTextDrawShow(playerid, bj_card_table[playerid][2][2]); PlayerTextDrawShow(playerid, bj_card_table[playerid][2][3]);

		TextDrawShowForPlayer(playerid, bj_table_ready[lobby][2]);
		TextDrawSetString(bj_table_ready[lobby][2], "NOT READY");
		TextDrawColor(bj_table_ready[lobby][2], -16776961);



		new table2 = BlackJackLobby[lobby][Table2Id];

		GetPlayerName(playerid, name, 24);

		PlayerTextDrawShow(table2, bj_members_name[table2][table-1]);
		PlayerTextDrawSetString(table2, bj_members_name[table2][table-1], name);


		PlayerTextDrawShow(table2, bj_card_table[table2][table][0]); PlayerTextDrawShow(table2, bj_card_table[table2][table][1]); PlayerTextDrawShow(table2, bj_card_table[table2][table][2]); PlayerTextDrawShow(table2, bj_card_table[table2][table][3]);

		TextDrawShowForPlayer(table2, bj_table_ready[lobby][table]);
		TextDrawSetString(bj_table_ready[lobby][table], "NOT READY");
		TextDrawColor(bj_table_ready[lobby][table], -16776961);
	}
	if(BlackJackLobby[lobby][Table3Id] < 1000)
	{
	    new name[24];
		GetPlayerName(BlackJackLobby[lobby][Table3Id], name, 24);

		PlayerTextDrawShow(playerid, bj_members_name[playerid][2]);
		PlayerTextDrawSetString(playerid, bj_members_name[playerid][2], name);


		PlayerTextDrawShow(playerid, bj_card_table[playerid][3][0]); PlayerTextDrawShow(playerid, bj_card_table[playerid][3][1]); PlayerTextDrawShow(playerid, bj_card_table[playerid][3][2]); PlayerTextDrawShow(playerid, bj_card_table[playerid][3][3]);

		TextDrawShowForPlayer(playerid, bj_table_ready[lobby][3]);
		TextDrawSetString(bj_table_ready[lobby][3], "NOT READY");
		TextDrawColor(bj_table_ready[lobby][3], -16776961);



		new table3 = BlackJackLobby[lobby][Table3Id];

		GetPlayerName(playerid, name, 24);

		PlayerTextDrawShow(table3, bj_members_name[table3][table-1]);
		PlayerTextDrawSetString(table3, bj_members_name[table3][table-1], name);


		PlayerTextDrawShow(table3, bj_card_table[table3][table][0]); PlayerTextDrawShow(table3, bj_card_table[table3][table][1]); PlayerTextDrawShow(table3, bj_card_table[table3][table][2]); PlayerTextDrawShow(table3, bj_card_table[table3][table][3]);

		TextDrawShowForPlayer(table3, bj_table_ready[lobby][table]);
		TextDrawSetString(bj_table_ready[lobby][table], "NOT READY");
		TextDrawColor(bj_table_ready[lobby][table], -16776961);
	}
	if(BlackJackLobby[lobby][Table4Id] < 1000)
	{
	    new name[24];
		GetPlayerName(BlackJackLobby[lobby][Table4Id], name, 24);

		PlayerTextDrawShow(playerid, bj_members_name[playerid][3]);
		PlayerTextDrawSetString(playerid, bj_members_name[playerid][3], name);


		PlayerTextDrawShow(playerid, bj_card_table[playerid][4][0]); PlayerTextDrawShow(playerid, bj_card_table[playerid][4][1]); PlayerTextDrawShow(playerid, bj_card_table[playerid][4][2]); PlayerTextDrawShow(playerid, bj_card_table[playerid][4][3]);

		TextDrawShowForPlayer(playerid, bj_table_ready[lobby][4]);
		TextDrawSetString(bj_table_ready[lobby][4], "NOT READY");
		TextDrawColor(bj_table_ready[lobby][4], -16776961);



		new table4 = BlackJackLobby[lobby][Table4Id];

		GetPlayerName(playerid, name, 24);

		PlayerTextDrawShow(table4, bj_members_name[table4][table-1]);
		PlayerTextDrawSetString(table4, bj_members_name[table4][table-1], name);


		PlayerTextDrawShow(table4, bj_card_table[table4][table][0]); PlayerTextDrawShow(table4, bj_card_table[table4][table][1]); PlayerTextDrawShow(table4, bj_card_table[table4][table][2]); PlayerTextDrawShow(table4, bj_card_table[table4][table][3]);

		TextDrawShowForPlayer(table4, bj_table_ready[lobby][table]);
		TextDrawSetString(bj_table_ready[lobby][table], "NOT READY");
		TextDrawColor(bj_table_ready[lobby][table], -16776961);
	}
	SelectTextDraw(playerid, false);
	return 1;

}

stock ExitPlayerLobby(playerid, lobby, table)
{
    switch(table)
	{
	    case 1: BlackJackLobby[lobby][Table1Id] = 1000;
	    case 2: BlackJackLobby[lobby][Table2Id] = 1000;
	    case 3: BlackJackLobby[lobby][Table3Id] = 1000;
	    case 4: BlackJackLobby[lobby][Table4Id] = 1000;
	}
	pBJInfo[playerid][OnLobby] = false;
	pBJInfo[playerid][pBJLobby] = 10;
	pBJInfo[playerid][pBJBet] = 0;
	pBJInfo[playerid][pBJTakedCard] = 0;

    TextDrawHideForPlayer(playerid, bj_fon);
	TextDrawHideForPlayer(playerid, bj_double);
	TextDrawHideForPlayer(playerid, bj_stop);
	TextDrawHideForPlayer(playerid, bj_play);
	TextDrawHideForPlayer(playerid, bj_take);
	TextDrawHideForPlayer(playerid, bj_exit);
	TextDrawHideForPlayer(playerid, bj_dealer_score);
	PlayerTextDrawHide(playerid, bj_dealer_point[playerid]);
	TextDrawHideForPlayer(playerid, bj_help);
	TextDrawHideForPlayer(playerid, bj_log_text[lobby][0]);
	TextDrawHideForPlayer(playerid, bj_log_text[lobby][1]);

	TextDrawHideForPlayer(playerid, bj_table_ready[lobby][1]);
	TextDrawHideForPlayer(playerid, bj_table_ready[lobby][2]);
	TextDrawHideForPlayer(playerid, bj_table_ready[lobby][3]);
	TextDrawHideForPlayer(playerid, bj_table_ready[lobby][4]);

    PlayerTextDrawHide(playerid, bj_panel_info[playerid]);
    PlayerTextDrawSetString(playerid, bj_panel_info[playerid], "blackjack:brbjyouturn");

	TextDrawHideForPlayer(playerid, bj_dealer_card[lobby][1]);
	TextDrawHideForPlayer(playerid, bj_dealer_card[lobby][2]);
	TextDrawHideForPlayer(playerid, bj_dealer_card[lobby][3]);

	TextDrawHideForPlayer(playerid, bj_text_bet[0]);
	TextDrawHideForPlayer(playerid, bj_text_bet[1]);

	TextDrawHideForPlayer(playerid, bj_text_start_time);
	TextDrawHideForPlayer(playerid, bj_text_start_timer[lobby]);

	PlayerTextDrawHide(playerid, bj_bet[playerid]);
	PlayerTextDrawHide(playerid, bj_money[playerid]);

	PlayerTextDrawHide(playerid, bj_members_name[playerid][0]);
	PlayerTextDrawHide(playerid, bj_members_name[playerid][1]);
	PlayerTextDrawHide(playerid, bj_members_name[playerid][2]);
	PlayerTextDrawHide(playerid, bj_members_name[playerid][3]);

	TextDrawHideForPlayer(playerid, bj_text_point_table[lobby][0]);
	TextDrawHideForPlayer(playerid, bj_text_point_table[lobby][1]);
	TextDrawHideForPlayer(playerid, bj_text_point_table[lobby][2]);
	TextDrawHideForPlayer(playerid, bj_text_point_table[lobby][3]);

    TextDrawHideForPlayer(playerid, bj_result_table[lobby][0]);
    TextDrawHideForPlayer(playerid, bj_result_table[lobby][1]);
    TextDrawHideForPlayer(playerid, bj_result_table[lobby][2]);
    TextDrawHideForPlayer(playerid, bj_result_table[lobby][3]);

	for(new i = 1; i <= 4; i++)
	{
		PlayerTextDrawHide(playerid, bj_card_table[playerid][i][0]);
		PlayerTextDrawHide(playerid, bj_card_table[playerid][i][1]);
		PlayerTextDrawHide(playerid, bj_card_table[playerid][i][2]);
		PlayerTextDrawHide(playerid, bj_card_table[playerid][i][3]);

		PlayerTextDrawSetString(playerid, bj_card_table[playerid][i][0], "blackjack:cardscard");
		PlayerTextDrawSetString(playerid, bj_card_table[playerid][i][1], "blackjack:cardscard");
		PlayerTextDrawSetString(playerid, bj_card_table[playerid][i][2], "blackjack:cardscard");
		PlayerTextDrawSetString(playerid, bj_card_table[playerid][i][3], "blackjack:cardscard");

		new apponent;
	    switch(i)
	    {
	        case 1:
			{
				if(BlackJackLobby[lobby][Table1Id] < 1000) apponent = BlackJackLobby[lobby][Table1Id];
				else apponent = 1000;
			}
	        case 2:
			{
				if(BlackJackLobby[lobby][Table2Id] < 1000) apponent = BlackJackLobby[lobby][Table2Id];
				else apponent = 1000;
			}
	        case 3:
			{
				if(BlackJackLobby[lobby][Table3Id] < 1000) apponent = BlackJackLobby[lobby][Table3Id];
				else apponent = 1000;
			}
	        case 4:
			{
				if(BlackJackLobby[lobby][Table4Id] < 1000) apponent = BlackJackLobby[lobby][Table4Id];
				else apponent = 1000;
			}
	   	}
		if(apponent < 1000)
		{
			PlayerTextDrawHide(apponent, bj_members_name[apponent][table-1]);
			PlayerTextDrawHide(apponent, bj_card_table[apponent][table][0]);
			PlayerTextDrawHide(apponent, bj_card_table[apponent][table][1]);
			PlayerTextDrawHide(apponent, bj_card_table[apponent][table][2]);
			PlayerTextDrawHide(apponent, bj_card_table[apponent][table][3]);

			TextDrawHideForPlayer(apponent, bj_text_point_table[lobby][0]);
			TextDrawHideForPlayer(apponent, bj_text_point_table[lobby][1]);
			TextDrawHideForPlayer(apponent, bj_text_point_table[lobby][2]);
			TextDrawHideForPlayer(apponent, bj_text_point_table[lobby][3]);


		}
	}

	TextDrawHideForPlayer(playerid, bj_text_bj_table[lobby][0]);
	TextDrawHideForPlayer(playerid, bj_text_bj_table[lobby][1]);
	TextDrawHideForPlayer(playerid, bj_text_bj_table[lobby][2]);
	TextDrawHideForPlayer(playerid, bj_text_bj_table[lobby][3]);


	CancelSelectTextDraw(playerid);
	UnFreezePlayer(playerid);

	foreach(new i : Player)
	{
	    ShowPlayerNameTagForPlayer(playerid, i, 1);
	}

    ///PlayerTextDrawHide(BlackJackLobby[lobby][Table1Id], bj_members_name[BlackJackLobby[lobby][Table1Id]][table]);
	///PlayerTextDrawHide(BlackJackLobby[lobby][Table1Id], bj_members_name[playerid][1]);
	///PlayerTextDrawHide(playerid, bj_members_name[playerid][2]);
	///PlayerTextDrawHide(playerid, bj_members_name[playerid][3]);

	//BlackJackLobby[lobby][Table1Id]
	return 1;
}


stock LoadBlackJack()
{
	print("???????? ???? ?????");

    for(new lobby; lobby < MAX_BJ_LOBBY; lobby++)
	{
	    //BlackJackText[lobby+1] = Create3DTextLabel("BLACK-JACK\n{FFFFFF}??ù ?????? ???? ??????? /blackjack", CLRED, BlackJackPos[lobby+1][0], BlackJackPos[lobby+1][1], BlackJackPos[lobby+1][2], 5.0, 0);
		ReloadTable(lobby+1);
    	LoadBJLobbyTimer(lobby+1);
    	LoadBJLobbyPoint(lobby+1);
    	LoadBJLobbyReady(lobby+1);
    	LoadBJLobbyDealerCard(lobby+1);
    	LoadBJTextBlackJack(lobby+1);
    	LoadBJLobbyResult(lobby+1);

        //LoadTextDraw();

		SetTimerEx("TimerSecondUpdateBJ", 1000, true, "d", lobby+1);

		new str[] = "point: 0";
		utf8_to_cp1251(str);
		TextDrawSetString(bj_text_point_table[lobby+1][0], str);
		TextDrawSetString(bj_text_point_table[lobby+1][1], str);
		TextDrawSetString(bj_text_point_table[lobby+1][2], str);
		TextDrawSetString(bj_text_point_table[lobby+1][3], str);

		new str1[] = "Game Start";
		utf8_to_cp1251(str1);
		bj_log_text[lobby+1][0] = TextDrawCreate(317.600189, 145.600067, str1);
		TextDrawLetterSize(bj_log_text[lobby+1][0], 0.375598, 1.599999);
		TextDrawAlignment(bj_log_text[lobby+1][0], 2);
		TextDrawColor(bj_log_text[lobby+1][0], -1);
		TextDrawSetShadow(bj_log_text[lobby+1][0], 0);
		TextDrawSetOutline(bj_log_text[lobby+1][0], 1);
		TextDrawBackgroundColor(bj_log_text[lobby+1][0], 51);
		TextDrawFont(bj_log_text[lobby+1][0], 1);
		TextDrawSetProportional(bj_log_text[lobby+1][0], 1);

		bj_log_text[lobby+1][1] = TextDrawCreate(317.800201, 161.533416, "");
		TextDrawLetterSize(bj_log_text[lobby+1][1], 0.377198, 1.353598);
		TextDrawAlignment(bj_log_text[lobby+1][1], 2);
		TextDrawColor(bj_log_text[lobby+1][1], -65281);
		TextDrawSetShadow(bj_log_text[lobby+1][1], 0);
		TextDrawSetOutline(bj_log_text[lobby+1][1], 1);
		TextDrawBackgroundColor(bj_log_text[lobby+1][1], 51);
		TextDrawFont(bj_log_text[lobby+1][1], 1);
		TextDrawSetProportional(bj_log_text[lobby+1][1], 1);
	}
}
stock LoadBJLobbyTimer(lobby)
{
    BlackJackLobby[lobby][StartTimer] = 60;

    bj_text_start_timer[lobby] = TextDrawCreate(316.199981, 237.693496, "00:60");
	TextDrawLetterSize(bj_text_start_timer[lobby], 0.581197, 2.563199);
	TextDrawAlignment(bj_text_start_timer[lobby], 2);
	TextDrawColor(bj_text_start_timer[lobby], -1);
	TextDrawSetShadow(bj_text_start_timer[lobby], 0);
	TextDrawSetOutline(bj_text_start_timer[lobby], 1);
	TextDrawBackgroundColor(bj_text_start_timer[lobby], 51);
	TextDrawFont(bj_text_start_timer[lobby], 1);
	TextDrawSetProportional(bj_text_start_timer[lobby], 1);
}

stock LoadBJLobbyPoint(lobby)
{
	bj_text_point_table[lobby][0] = TextDrawCreate(76.000015, 306.879913, "point 0");
	TextDrawLetterSize(bj_text_point_table[lobby][0], 0.356397, 1.174399);
	TextDrawAlignment(bj_text_point_table[lobby][0], 2);
	TextDrawColor(bj_text_point_table[lobby][0], -1);
	TextDrawSetShadow(bj_text_point_table[lobby][0], 0);
	TextDrawSetOutline(bj_text_point_table[lobby][0], 1);
	TextDrawBackgroundColor(bj_text_point_table[lobby][0], 51);
	TextDrawFont(bj_text_point_table[lobby][0], 1);
	TextDrawSetProportional(bj_text_point_table[lobby][0], 1);

	bj_text_point_table[lobby][1] = TextDrawCreate(205.799972, 146.599792, "point 0");
	TextDrawLetterSize(bj_text_point_table[lobby][1], 0.356397, 1.174399);
	TextDrawAlignment(bj_text_point_table[lobby][1], 2);
	TextDrawColor(bj_text_point_table[lobby][1], -1);
	TextDrawSetShadow(bj_text_point_table[lobby][1], 0);
	TextDrawSetOutline(bj_text_point_table[lobby][1], 1);
	TextDrawBackgroundColor(bj_text_point_table[lobby][1], 51);
	TextDrawFont(bj_text_point_table[lobby][1], 1);
	TextDrawSetProportional(bj_text_point_table[lobby][1], 1);

	bj_text_point_table[lobby][2] = TextDrawCreate(457.200195, 146.853118, "point 0");
	TextDrawLetterSize(bj_text_point_table[lobby][2], 0.356397, 1.174399);
	TextDrawAlignment(bj_text_point_table[lobby][2], 2);
	TextDrawColor(bj_text_point_table[lobby][2], -1);
	TextDrawSetShadow(bj_text_point_table[lobby][2], 0);
	TextDrawSetOutline(bj_text_point_table[lobby][2], 1);
	TextDrawBackgroundColor(bj_text_point_table[lobby][2], 51);
	TextDrawFont(bj_text_point_table[lobby][2], 1);
	TextDrawSetProportional(bj_text_point_table[lobby][2], 1);

	bj_text_point_table[lobby][3] = TextDrawCreate(560.200500, 307.133239, "point 0");
	TextDrawLetterSize(bj_text_point_table[lobby][3], 0.356397, 1.174399);
	TextDrawAlignment(bj_text_point_table[lobby][3], 2);
	TextDrawColor(bj_text_point_table[lobby][3], -1);
	TextDrawSetShadow(bj_text_point_table[lobby][3], 0);
	TextDrawSetOutline(bj_text_point_table[lobby][3], 1);
	TextDrawBackgroundColor(bj_text_point_table[lobby][3], 51);
	TextDrawFont(bj_text_point_table[lobby][3], 1);
	TextDrawSetProportional(bj_text_point_table[lobby][3], 1);
}

stock LoadBJLobbyReady(lobby)
{
	new str[] = "NOT READY";
	utf8_to_cp1251(str);
	bj_table_ready[lobby][1] = TextDrawCreate(77.600013, 320.319999, str);
	TextDrawLetterSize(bj_table_ready[lobby][1], 0.365199, 1.219199);
	TextDrawAlignment(bj_table_ready[lobby][1], 2);
	TextDrawColor(bj_table_ready[lobby][1], -16776961);
	TextDrawSetShadow(bj_table_ready[lobby][1], 0);
	TextDrawSetOutline(bj_table_ready[lobby][1], 1);
	TextDrawBackgroundColor(bj_table_ready[lobby][1], 51);
	TextDrawFont(bj_table_ready[lobby][1], 1);
	TextDrawSetProportional(bj_table_ready[lobby][1], 1);

	new str1[] = "NOT READY";
	utf8_to_cp1251(str1);
	bj_table_ready[lobby][2] = TextDrawCreate(206.800628, 160.293167, str1);
	TextDrawLetterSize(bj_table_ready[lobby][2], 0.365199, 1.219199);
	TextDrawAlignment(bj_table_ready[lobby][2], 2);
	TextDrawColor(bj_table_ready[lobby][2], -16776961);
	TextDrawSetShadow(bj_table_ready[lobby][2], 0);
	TextDrawSetOutline(bj_table_ready[lobby][2], 1);
	TextDrawBackgroundColor(bj_table_ready[lobby][2], 51);
	TextDrawFont(bj_table_ready[lobby][2], 1);
	TextDrawSetProportional(bj_table_ready[lobby][2], 1);

	new str2[] = "NOT READY";
	utf8_to_cp1251(str2);
	bj_table_ready[lobby][3] = TextDrawCreate(458.200958, 160.293167, str2);
	TextDrawLetterSize(bj_table_ready[lobby][3], 0.365199, 1.219199);
	TextDrawAlignment(bj_table_ready[lobby][3], 2);
	TextDrawColor(bj_table_ready[lobby][3], -16776961);
	TextDrawSetShadow(bj_table_ready[lobby][3], 0);
	TextDrawSetOutline(bj_table_ready[lobby][3], 1);
	TextDrawBackgroundColor(bj_table_ready[lobby][3], 51);
	TextDrawFont(bj_table_ready[lobby][3], 1);
	TextDrawSetProportional(bj_table_ready[lobby][3], 1);

	new str3[] = "NOT READY";
	utf8_to_cp1251(str3);
	bj_table_ready[lobby][4] = TextDrawCreate(561.800598, 320.319999, str3);
	TextDrawLetterSize(bj_table_ready[lobby][4], 0.365199, 1.219199);
	TextDrawAlignment(bj_table_ready[lobby][4], 2);
	TextDrawColor(bj_table_ready[lobby][4], -16776961);
	TextDrawSetShadow(bj_table_ready[lobby][4], 0);
	TextDrawSetOutline(bj_table_ready[lobby][4], 1);
	TextDrawBackgroundColor(bj_table_ready[lobby][4], 51);
	TextDrawFont(bj_table_ready[lobby][4], 1);
	TextDrawSetProportional(bj_table_ready[lobby][4], 1);
}

stock LoadBJLobbyDealerCard(lobby)
{
	bj_dealer_card[lobby][1] = TextDrawCreate(209.799957, 191.399993, "blackjack:cardsas");
	TextDrawLetterSize(bj_dealer_card[lobby][1], 0.000000, 0.000000);
	TextDrawTextSize(bj_dealer_card[lobby][1], 132.000015, 174.719879);
	TextDrawAlignment(bj_dealer_card[lobby][1], 1);
	TextDrawColor(bj_dealer_card[lobby][1], -1);
	TextDrawSetShadow(bj_dealer_card[lobby][1], 0);
	TextDrawSetOutline(bj_dealer_card[lobby][1], 0);
	TextDrawFont(bj_dealer_card[lobby][1], 4);

	bj_dealer_card[lobby][2] = TextDrawCreate(235.600021, 191.653320, "blackjack:cardsas");
	TextDrawLetterSize(bj_dealer_card[lobby][2], 0.000000, 0.000000);
	TextDrawTextSize(bj_dealer_card[lobby][2], 132.000015, 174.719879);
	TextDrawAlignment(bj_dealer_card[lobby][2], 1);
	TextDrawColor(bj_dealer_card[lobby][2], -1);
	TextDrawSetShadow(bj_dealer_card[lobby][2], 0);
	TextDrawSetOutline(bj_dealer_card[lobby][2], 0);
	TextDrawFont(bj_dealer_card[lobby][2], 4);

	bj_dealer_card[lobby][3] = TextDrawCreate(314.200042, 191.906646, "blackjack:cardskd");
	TextDrawLetterSize(bj_dealer_card[lobby][3], 0.000000, 0.000000);
	TextDrawTextSize(bj_dealer_card[lobby][3], 132.000015, 174.719879);
	TextDrawAlignment(bj_dealer_card[lobby][3], 1);
	TextDrawColor(bj_dealer_card[lobby][3], -1);
	TextDrawSetShadow(bj_dealer_card[lobby][3], 0);
	TextDrawSetOutline(bj_dealer_card[lobby][3], 0);
	TextDrawFont(bj_dealer_card[lobby][3], 4);
}

stock LoadBJTextBlackJack(lobby)
{
    bj_text_bj_table[lobby][0] = TextDrawCreate(31.200008, 312.106567, "blackjack:brbjblackjack");
	TextDrawLetterSize(bj_text_bj_table[lobby][0], 0.000000, 0.000000);
	TextDrawTextSize(bj_text_bj_table[lobby][0], 91.199974, 46.293384);
	TextDrawAlignment(bj_text_bj_table[lobby][0], 1);
	TextDrawColor(bj_text_bj_table[lobby][0], -1);
	TextDrawSetShadow(bj_text_bj_table[lobby][0], 0);
	TextDrawSetOutline(bj_text_bj_table[lobby][0], 0);
	TextDrawFont(bj_text_bj_table[lobby][0], 4);

	bj_text_bj_table[lobby][1] = TextDrawCreate(161.000030, 152.079727, "blackjack:brbjblackjack");
	TextDrawLetterSize(bj_text_bj_table[lobby][1], 0.000000, 0.000000);
	TextDrawTextSize(bj_text_bj_table[lobby][1], 91.199974, 46.293384);
	TextDrawAlignment(bj_text_bj_table[lobby][1], 1);
	TextDrawColor(bj_text_bj_table[lobby][1], -1);
	TextDrawSetShadow(bj_text_bj_table[lobby][1], 0);
	TextDrawSetOutline(bj_text_bj_table[lobby][1], 0);
	TextDrawFont(bj_text_bj_table[lobby][1], 4);

	bj_text_bj_table[lobby][2] = TextDrawCreate(412.400238, 152.079727, "blackjack:brbjblackjack");
	TextDrawLetterSize(bj_text_bj_table[lobby][2], 0.000000, 0.000000);
	TextDrawTextSize(bj_text_bj_table[lobby][2], 91.199974, 46.293384);
	TextDrawAlignment(bj_text_bj_table[lobby][2], 1);
	TextDrawColor(bj_text_bj_table[lobby][2], -1);
	TextDrawSetShadow(bj_text_bj_table[lobby][2], 0);
	TextDrawSetOutline(bj_text_bj_table[lobby][2], 0);
	TextDrawFont(bj_text_bj_table[lobby][2], 4);

	bj_text_bj_table[lobby][3] = TextDrawCreate(515.400390, 312.106567, "blackjack:brbjblackjack");
	TextDrawLetterSize(bj_text_bj_table[lobby][3], 0.000000, 0.000000);
	TextDrawTextSize(bj_text_bj_table[lobby][3], 91.199974, 46.293384);
	TextDrawAlignment(bj_text_bj_table[lobby][3], 1);
	TextDrawColor(bj_text_bj_table[lobby][3], -1);
	TextDrawSetShadow(bj_text_bj_table[lobby][3], 0);
	TextDrawSetOutline(bj_text_bj_table[lobby][3], 0);
	TextDrawFont(bj_text_bj_table[lobby][3], 4);
}

stock LoadBJLobbyResult(lobby)
{
//bj_result_table

	bj_result_table[lobby][0] = TextDrawCreate(88.800003, 187.666666, "blackjack:brbjwin");
 	TextDrawLetterSize(		bj_result_table[lobby][0], 0.000000, 0.000000);
	TextDrawTextSize( 		bj_result_table[lobby][0], 69.599975, 34.346652);
	TextDrawAlignment(		bj_result_table[lobby][0], 1);
	TextDrawColor(			bj_result_table[lobby][0], -1);
	TextDrawSetShadow(		bj_result_table[lobby][0], 0);
	TextDrawSetOutline(		bj_result_table[lobby][0], 0);
	TextDrawFont(			bj_result_table[lobby][0], 4);

	bj_result_table[lobby][1] = TextDrawCreate(215.400009, 27.133293, "blackjack:brbjlose");
 	TextDrawLetterSize(		bj_result_table[lobby][1], 0.000000, 0.000000);
	TextDrawTextSize(		bj_result_table[lobby][1], 69.599975, 34.346652);
	TextDrawAlignment(		bj_result_table[lobby][1], 1);
	TextDrawColor(			bj_result_table[lobby][1], -1);
	TextDrawSetShadow(		bj_result_table[lobby][1], 0);
	TextDrawSetOutline(		bj_result_table[lobby][1], 0);
	TextDrawFont(			bj_result_table[lobby][1], 4);

	bj_result_table[lobby][2] = TextDrawCreate(466.800170, 27.133293, "blackjack:brbjmydraw");
	TextDrawLetterSize(		bj_result_table[lobby][2], 0.000000, 0.000000);
	TextDrawTextSize(		bj_result_table[lobby][2], 69.599975, 34.346652);
	TextDrawAlignment(		bj_result_table[lobby][2], 1);
	TextDrawColor(			bj_result_table[lobby][2], -1);
	TextDrawSetShadow(		bj_result_table[lobby][2], 0);
	TextDrawSetOutline(		bj_result_table[lobby][2], 0);
	TextDrawFont(			bj_result_table[lobby][2], 4);

	bj_result_table[lobby][3] = TextDrawCreate(569.000610, 187.666666, "blackjack:brbjmydraw");
	TextDrawLetterSize(		bj_result_table[lobby][3], 0.000000, 0.000000);
	TextDrawTextSize(		bj_result_table[lobby][3], 69.599975, 34.346652);
	TextDrawAlignment(		bj_result_table[lobby][3], 1);
	TextDrawColor(			bj_result_table[lobby][3], -1);
	TextDrawSetShadow(		bj_result_table[lobby][3], 0);
	TextDrawSetOutline(		bj_result_table[lobby][3], 0);
	TextDrawFont(			bj_result_table[lobby][3], 4);


}

stock ReloadTable(lobby)
{
    BlackJackLobby[lobby][Table1Id] = 1000;
    BlackJackLobby[lobby][Table2Id] = 1000;
    BlackJackLobby[lobby][Table3Id] = 1000;
    BlackJackLobby[lobby][Table4Id] = 1000;
}


forward TimerSecondUpdateBJ(lobby);
public TimerSecondUpdateBJ(lobby)
{
	new bool:members;
	if(BlackJackLobby[lobby][Table1Id] < 1000) members = true;
	else if(BlackJackLobby[lobby][Table2Id] < 1000) members = true;
	else if(BlackJackLobby[lobby][Table3Id] < 1000) members = true;
	else if(BlackJackLobby[lobby][Table4Id] < 1000) members = true;

	if(members == true)
	{
		BlackJackLobby[lobby][ActivedLobby] = true;
	    if(BlackJackLobby[lobby][StartedLobby])
	    {
			//SCMBJL(lobby, CLRED, "???? ???ù....");
			switch(BlackJackLobby[lobby][StageLobby])
			{
			    case 1: //????ù?? ????????? ???ù, ????? ????? ??????, ?????? ??????? //timerlobby
			    {

		     		if(BlackJackLobby[lobby][Table1Id] < 1000)
					{
						for(new table; table < 4; table++)
						{
							PlayerTextDrawHide(BlackJackLobby[lobby][Table1Id], bj_card_table[BlackJackLobby[lobby][Table1Id]][table+1][0]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table1Id], bj_card_table[BlackJackLobby[lobby][Table1Id]][table+1][1]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table1Id], bj_card_table[BlackJackLobby[lobby][Table1Id]][table+1][2]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table1Id], bj_card_table[BlackJackLobby[lobby][Table1Id]][table+1][3]);
						}
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_play);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_dealer_score);
						PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_dealer_point[BlackJackLobby[lobby][Table1Id]]);
						PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_dealer_point[BlackJackLobby[lobby][Table1Id]], "0");

						TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_table_ready[lobby][1]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_table_ready[lobby][2]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_table_ready[lobby][3]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_table_ready[lobby][4]);

						TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][0]);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][1]);

						TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_text_point_table[lobby][0]);
						if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_text_point_table[lobby][1]);
						if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_text_point_table[lobby][2]);
						if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_text_point_table[lobby][3]);
					}
					if(BlackJackLobby[lobby][Table2Id] < 1000)
					{
						for(new table; table < 4; table++)
						{
							PlayerTextDrawHide(BlackJackLobby[lobby][Table2Id], bj_card_table[BlackJackLobby[lobby][Table2Id]][table+1][0]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table2Id], bj_card_table[BlackJackLobby[lobby][Table2Id]][table+1][1]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table2Id], bj_card_table[BlackJackLobby[lobby][Table2Id]][table+1][2]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table2Id], bj_card_table[BlackJackLobby[lobby][Table2Id]][table+1][3]);
						}
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_play);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_dealer_score);
						PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_dealer_point[BlackJackLobby[lobby][Table2Id]]);
						PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_dealer_point[BlackJackLobby[lobby][Table2Id]], "0");

						TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_table_ready[lobby][1]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_table_ready[lobby][2]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_table_ready[lobby][3]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_table_ready[lobby][4]);

						TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][0]);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][1]);

						if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_text_point_table[lobby][0]);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_text_point_table[lobby][1]);
						if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_text_point_table[lobby][2]);
						if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_text_point_table[lobby][3]);
					}
					if(BlackJackLobby[lobby][Table3Id] < 1000)
					{
						for(new table; table < 4; table++)
						{
							PlayerTextDrawHide(BlackJackLobby[lobby][Table3Id], bj_card_table[BlackJackLobby[lobby][Table3Id]][table+1][0]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table3Id], bj_card_table[BlackJackLobby[lobby][Table3Id]][table+1][1]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table3Id], bj_card_table[BlackJackLobby[lobby][Table3Id]][table+1][2]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table3Id], bj_card_table[BlackJackLobby[lobby][Table3Id]][table+1][3]);
						}
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_play);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_dealer_score);
						PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_dealer_point[BlackJackLobby[lobby][Table3Id]]);
						PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_dealer_point[BlackJackLobby[lobby][Table3Id]], "0");

						TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_table_ready[lobby][1]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_table_ready[lobby][2]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_table_ready[lobby][3]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_table_ready[lobby][4]);

						TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][0]);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][1]);

						if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_text_point_table[lobby][0]);
						if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_text_point_table[lobby][1]);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_text_point_table[lobby][2]);
						if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_text_point_table[lobby][3]);
					}
					if(BlackJackLobby[lobby][Table4Id] < 1000)
					{
						for(new table; table < 4; table++)
						{
							PlayerTextDrawHide(BlackJackLobby[lobby][Table4Id], bj_card_table[BlackJackLobby[lobby][Table4Id]][table+1][0]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table4Id], bj_card_table[BlackJackLobby[lobby][Table4Id]][table+1][1]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table4Id], bj_card_table[BlackJackLobby[lobby][Table4Id]][table+1][2]);
							PlayerTextDrawHide(BlackJackLobby[lobby][Table4Id], bj_card_table[BlackJackLobby[lobby][Table4Id]][table+1][3]);
						}
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_play);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_dealer_score);
						PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_dealer_point[BlackJackLobby[lobby][Table4Id]]);
						PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_dealer_point[BlackJackLobby[lobby][Table4Id]], "0");

						TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_table_ready[lobby][1]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_table_ready[lobby][2]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_table_ready[lobby][3]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_table_ready[lobby][4]);

						TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][0]);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][1]);

						if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_text_point_table[lobby][0]);
						if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_text_point_table[lobby][1]);
						if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_text_point_table[lobby][2]);
						TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_text_point_table[lobby][3]);
					}

				 	BlackJackLobby[lobby][StageLobby]++; BlackJackLobby[lobby][DealerTurnGived]++; //+???
				}


				case 2: //??????? ?????? ???? ?????????? ? ?????? //timerlobby
				{
				    switch(BlackJackLobby[lobby][DealerTurnGived])
				    {
				        case 1:
						{
							BlackJackLobby[lobby][DealerTurnGived] = 0; SetTimerEx("TimerDealerNext", 2000, false, "d", lobby);
							TextDrawSetString(bj_log_text[lobby][0], "Dealer give card");
							TextDrawColor(bj_log_text[lobby][0], -1);
							TextDrawSetString(bj_log_text[lobby][1], "");
							TextDrawColor(bj_log_text[lobby][1], -65281);

					        new dealer_suit = random(13);
							new dealer_type = random(4);

							BlackJackLobby[lobby][DealerPoint] += BlackJackCard[dealer_suit][dealer_type][Pointscore];
							TextDrawSetString(bj_dealer_card[lobby][1], BlackJackCard[dealer_suit][dealer_type][Cardtexture]);

							if(BlackJackLobby[lobby][Table1Id] < 1000)
							{
								new str[2];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_dealer_point[BlackJackLobby[lobby][Table1Id]], str);
								TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_dealer_card[lobby][1]);
							}
							if(BlackJackLobby[lobby][Table2Id] < 1000)
							{
								new str[2];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_dealer_point[BlackJackLobby[lobby][Table2Id]], str);
								TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_dealer_card[lobby][1]);
							}
							if(BlackJackLobby[lobby][Table3Id] < 1000)
							{
								new str[2];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_dealer_point[BlackJackLobby[lobby][Table3Id]], str);
								TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_dealer_card[lobby][1]);
							}
							if(BlackJackLobby[lobby][Table4Id] < 1000)
							{
								new str[2];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_dealer_point[BlackJackLobby[lobby][Table4Id]], str);
								TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_dealer_card[lobby][1]);
							}
						}
						case 2: BlackJackLobby[lobby][DealerTurnGived]++;
						case 3:
						{
							if(BlackJackLobby[lobby][Table1Id] < 1000)
							{
	                            BlackJackLobby[lobby][DealerTurnGived]++;
								new str[10];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_dealer_point[BlackJackLobby[lobby][Table1Id]], str);

								new suit = random(13);
								new type = random(4);

								BlackJackLobby[lobby][Table1Point] += BlackJackCard[suit][type][Pointscore];

								new str1[] = "point: %d";
								utf8_to_cp1251(str1);
								format(str, sizeof str, str1, BlackJackLobby[lobby][Table1Point]);
								TextDrawSetString(bj_text_point_table[lobby][0], str);
								//BlackJackLobby[lobby][Table1Card][0] = class;
								//BlackJackLobby[lobby][Table1Card][1] = type;

								ShowMembersCardBJL(lobby, 1, 0, suit, type);

							}
							else BlackJackLobby[lobby][DealerTurnGived] = 5;
						}
						case 4: BlackJackLobby[lobby][DealerTurnGived]++;

						case 5:
						{
						    if(BlackJackLobby[lobby][Table2Id] < 1000)
							{
		                      	BlackJackLobby[lobby][DealerTurnGived]++;
								new str[10];

								new suit = random(13);
								new type = random(4);

								BlackJackLobby[lobby][Table2Point] += BlackJackCard[suit][type][Pointscore];

								new str1[] = "point: %d";
								utf8_to_cp1251(str1);
								format(str, sizeof str, str1, BlackJackLobby[lobby][Table2Point]);
								TextDrawSetString(bj_text_point_table[lobby][1], str);
								//BlackJackLobby[lobby][Table1Card][0] = class;
								//BlackJackLobby[lobby][Table1Card][1] = type;

								ShowMembersCardBJL(lobby, 2, 0, suit, type);

							}
							else BlackJackLobby[lobby][DealerTurnGived] = 7;

						}
						case 6: BlackJackLobby[lobby][DealerTurnGived]++;

						case 7:
						{
						    if(BlackJackLobby[lobby][Table3Id] < 1000)
							{
	                            BlackJackLobby[lobby][DealerTurnGived]++;
								new str[10];

								new suit = random(13);
								new type = random(4);

								BlackJackLobby[lobby][Table3Point] += BlackJackCard[suit][type][Pointscore];

								new str1[] = "point: %d";
								utf8_to_cp1251(str1);
								format(str, sizeof str, str1, BlackJackLobby[lobby][Table3Point]);
								TextDrawSetString(bj_text_point_table[lobby][2], str);
								//BlackJackLobby[lobby][Table1Card][0] = class;
								//BlackJackLobby[lobby][Table1Card][1] = type;

								ShowMembersCardBJL(lobby, 3, 0, suit, type);
							}
							else BlackJackLobby[lobby][DealerTurnGived] = 9;
						}
						case 8: BlackJackLobby[lobby][DealerTurnGived]++;

						case 9:
						{
							BlackJackLobby[lobby][DealerTurnGived] = 1; BlackJackLobby[lobby][StageLobby]++;
					 		if(BlackJackLobby[lobby][Table4Id] < 1000)
							{
								new str[10];

								new suit = random(13);
								new type = random(4);

								BlackJackLobby[lobby][Table4Point] += BlackJackCard[suit][type][Pointscore];

								new str1[] = "point: %d";
								utf8_to_cp1251(str1);
								format(str, sizeof str, str1, BlackJackLobby[lobby][Table4Point]);
								TextDrawSetString(bj_text_point_table[lobby][3], str);
								//BlackJackLobby[lobby][Table1Card][0] = class;
								//BlackJackLobby[lobby][Table1Card][1] = type;

								ShowMembersCardBJL(lobby, 4, 0, suit, type);
							}
						}
					}
				}


				case 3: //timerlobby
				{
				    switch(BlackJackLobby[lobby][DealerTurnGived])
				    {
				        case 1:
				        {

							//BlackJackLobby[lobby][DealerPoint] += BlackJackCard[dealer_suit][dealer_type][Pointscore];
							TextDrawSetString(bj_dealer_card[lobby][2], "blackjack:cardscard");

							BlackJackLobby[lobby][DealerTurnGived]++;

							if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_dealer_card[lobby][2]);
							if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_dealer_card[lobby][2]);
							if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_dealer_card[lobby][2]);
							if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_dealer_card[lobby][2]);
						}
						case 2: BlackJackLobby[lobby][DealerTurnGived]++;
						case 3:
						{
							if(BlackJackLobby[lobby][Table1Id] < 1000)
							{
	                            BlackJackLobby[lobby][DealerTurnGived]++;
								new str[10];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_dealer_point[BlackJackLobby[lobby][Table1Id]], str);

								new suit = random(13);
								new type = random(4);

								BlackJackLobby[lobby][Table1Point] += BlackJackCard[suit][type][Pointscore];
								CheckTableBlackJack(lobby, 1);


								new str1[] = "point: %d";
								utf8_to_cp1251(str1);
								format(str, sizeof str, str1, BlackJackLobby[lobby][Table1Point]);
								TextDrawSetString(bj_text_point_table[lobby][0], str);
								//BlackJackLobby[lobby][Table1Card][0] = class;
								//BlackJackLobby[lobby][Table1Card][1] = type;

								ShowMembersCardBJL(lobby, 1, 1, suit, type);
							}
							else BlackJackLobby[lobby][DealerTurnGived] = 5;
						}
						case 4: BlackJackLobby[lobby][DealerTurnGived]++;

						case 5:
						{
						    if(BlackJackLobby[lobby][Table2Id] < 1000)
							{
	                            BlackJackLobby[lobby][DealerTurnGived]++;
								new str[10];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_dealer_point[BlackJackLobby[lobby][Table2Id]], str);

								new suit = random(13);
								new type = random(4);

								BlackJackLobby[lobby][Table2Point] += BlackJackCard[suit][type][Pointscore];
								CheckTableBlackJack(lobby, 2);

								new str1[] = "point: %d";
								utf8_to_cp1251(str1);
								format(str, sizeof str, str1, BlackJackLobby[lobby][Table2Point]);
								TextDrawSetString(bj_text_point_table[lobby][1], str);
								//BlackJackLobby[lobby][Table1Card][0] = class;
								//BlackJackLobby[lobby][Table1Card][1] = type;

								ShowMembersCardBJL(lobby, 2, 1, suit, type);
							}
							else BlackJackLobby[lobby][DealerTurnGived] = 7;

						}
						case 6: BlackJackLobby[lobby][DealerTurnGived]++;

						case 7:
						{
						    if(BlackJackLobby[lobby][Table3Id] < 1000)
							{
		                  		BlackJackLobby[lobby][DealerTurnGived]++;
								new str[10];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_dealer_point[BlackJackLobby[lobby][Table3Id]], str);

								new suit = random(13);
								new type = random(4);

								BlackJackLobby[lobby][Table3Point] += BlackJackCard[suit][type][Pointscore];
								CheckTableBlackJack(lobby, 3);

								new str1[] = "point: %d";
								utf8_to_cp1251(str1);
								format(str, sizeof str, str1, BlackJackLobby[lobby][Table3Point]);
								TextDrawSetString(bj_text_point_table[lobby][2], str);
								//BlackJackLobby[lobby][Table1Card][0] = class;
								//BlackJackLobby[lobby][Table1Card][1] = type;

								ShowMembersCardBJL(lobby, 3, 1, suit, type);
							}
							else BlackJackLobby[lobby][DealerTurnGived] = 9;
						}
						case 8: BlackJackLobby[lobby][DealerTurnGived]++;

						case 9:
						{
							BlackJackLobby[lobby][DealerTurnGived] = 0; BlackJackLobby[lobby][StageLobby]++; BlackJackLobby[lobby][TableTurn]++; //??????? ??????????
					 		if(BlackJackLobby[lobby][Table4Id] < 1000)
							{
		                      	BlackJackLobby[lobby][DealerTurnGived]++;
								new str[10];
								format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);
								PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_dealer_point[BlackJackLobby[lobby][Table4Id]], str);

								new suit = random(13);
								new type = random(4);

								BlackJackLobby[lobby][Table4Point] += BlackJackCard[suit][type][Pointscore];
								CheckTableBlackJack(lobby, 4);

								new str1[] = "point: %d";
								utf8_to_cp1251(str1);
								format(str, sizeof str, str1, BlackJackLobby[lobby][Table4Point]);
								TextDrawSetString(bj_text_point_table[lobby][3], str);
								//BlackJackLobby[lobby][Table1Card][0] = class;
								//BlackJackLobby[lobby][Table1Card][1] = type;

								ShowMembersCardBJL(lobby, 4, 1, suit, type);
							}
						}
					}


				}

				case 4: //timerlobby
				{
				    switch(BlackJackLobby[lobby][TableTurn])
				    {
				        case 1:
				        {
				            if(BlackJackLobby[lobby][Table1Id] < 1000)
				            {
				                if(BlackJackLobby[lobby][Table1Point] == 21 || BlackJackLobby[lobby][Table1Point] > 21) return BlackJackLobby[lobby][TableTurnTime] = 0, BlackJackLobby[lobby][TableTurn]++;
				                if(BlackJackLobby[lobby][TableTurnTime] == 0)
								{
									BlackJackLobby[lobby][TableTurnTime] = 15;
					                PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]], "blackjack:brbjyouturn");
					                PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]]);
									SetTimerEx("TimerHideYouTurn", 2000, false, "d", BlackJackLobby[lobby][Table1Id]);

         							new str[24];
       						 	new str1[] = "Time to left move 00:15";
									utf8_to_cp1251(str1);
									TextDrawSetString(bj_log_text[lobby][0], str1);
									TextDrawColor(bj_log_text[lobby][0], -1);
									GetPlayerName(BlackJackLobby[lobby][Table1Id], str, 24);
									TextDrawSetString(bj_log_text[lobby][1], str);
									TextDrawColor(bj_log_text[lobby][1], -65281);
								}
								else if(BlackJackLobby[lobby][TableTurnTime] == 1)
								{
         							BlackJackLobby[lobby][TableTurnTime]--;
                                    BlackJackLobby[lobby][TableTurn]++;

									new str2[] = "Time Out";
									utf8_to_cp1251(str2);
                                    TextDrawSetString(bj_log_text[lobby][0], str2);
									TextDrawColor(bj_log_text[lobby][0], -1);
								}
								else
								{
         							BlackJackLobby[lobby][TableTurnTime]--;
         							new str[24];
        							new str1[] = "Time to left move 00:%02d";
									utf8_to_cp1251(str1);
         							format(str, sizeof str, str1, BlackJackLobby[lobby][TableTurnTime]);
									TextDrawSetString(bj_log_text[lobby][0], str);
									TextDrawColor(bj_log_text[lobby][0], -1);
								}
				            }
				            else BlackJackLobby[lobby][TableTurn]++;
							//do
				        }
				        case 2:
				        {
				            if(BlackJackLobby[lobby][Table2Id] < 1000)
				            {
				                if(BlackJackLobby[lobby][Table2Point] == 21 || BlackJackLobby[lobby][Table2Point] > 21) return BlackJackLobby[lobby][TableTurnTime] = 0, BlackJackLobby[lobby][TableTurn]++;
				                if(BlackJackLobby[lobby][TableTurnTime] == 0)
								{
									BlackJackLobby[lobby][TableTurnTime] = 15;
					                PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]], "blackjack:brbjyouturn");
					                PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]]);
									SetTimerEx("TimerHideYouTurn", 2000, false, "d", BlackJackLobby[lobby][Table2Id]);

         							new str[24];
        							new str1[] = "Time to left move 00:15";
									utf8_to_cp1251(str1);
									TextDrawSetString(bj_log_text[lobby][0], str1);
									TextDrawColor(bj_log_text[lobby][0], -1);
									GetPlayerName(BlackJackLobby[lobby][Table2Id], str, 24);
									TextDrawSetString(bj_log_text[lobby][1], str);
									TextDrawColor(bj_log_text[lobby][1], -65281);
								}
								else if(BlackJackLobby[lobby][TableTurnTime] == 1)
								{
         							BlackJackLobby[lobby][TableTurnTime]--;
                                    BlackJackLobby[lobby][TableTurn]++;

									new str2[] = "Time Out";
									utf8_to_cp1251(str2);
                                    TextDrawSetString(bj_log_text[lobby][0], str2);
									TextDrawColor(bj_log_text[lobby][0], -1);
								}
								else
								{
         							BlackJackLobby[lobby][TableTurnTime]--;
         							new str[24];
        							new str1[] = "Time to left move 00:%02d";
									utf8_to_cp1251(str1);
         							format(str, sizeof str, str1, BlackJackLobby[lobby][TableTurnTime]);
									TextDrawSetString(bj_log_text[lobby][0], str);
									TextDrawColor(bj_log_text[lobby][0], -1);
								}
				            }
				            else BlackJackLobby[lobby][TableTurn]++;
							//do
				        }
				        case 3:
				        {
				            if(BlackJackLobby[lobby][Table3Id] < 1000)
				            {
				                if(BlackJackLobby[lobby][Table3Point] == 21 || BlackJackLobby[lobby][Table3Point] > 21) return BlackJackLobby[lobby][TableTurnTime] = 0, BlackJackLobby[lobby][TableTurn]++;
				                if(BlackJackLobby[lobby][TableTurnTime] == 0)
								{
									BlackJackLobby[lobby][TableTurnTime] = 15;
					                PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]], "blackjack:brbjyouturn");
					                PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]]);
									SetTimerEx("TimerHideYouTurn", 2000, false, "d", BlackJackLobby[lobby][Table3Id]);

         							new str[24];
        							new str1[] = "Time to left move 00:15";
									utf8_to_cp1251(str1);
									TextDrawSetString(bj_log_text[lobby][0], str1);
									TextDrawColor(bj_log_text[lobby][0], -1);
									GetPlayerName(BlackJackLobby[lobby][Table3Id], str, 24);
									TextDrawSetString(bj_log_text[lobby][1], str);
									TextDrawColor(bj_log_text[lobby][1], -65281);
								}
								else if(BlackJackLobby[lobby][TableTurnTime] == 1)
								{
         							BlackJackLobby[lobby][TableTurnTime]--;
                                    BlackJackLobby[lobby][TableTurn]++;

									new str2[] = "Time Out";
									utf8_to_cp1251(str2);
                                    TextDrawSetString(bj_log_text[lobby][0], str2);
									TextDrawColor(bj_log_text[lobby][0], -1);
								}
								else
								{
         							BlackJackLobby[lobby][TableTurnTime]--;
         							new str[24];
        							new str1[] = "Time to left move 00:%02d";
									utf8_to_cp1251(str1);
         							format(str, sizeof str, str1, BlackJackLobby[lobby][TableTurnTime]);
									TextDrawSetString(bj_log_text[lobby][0], str);
									TextDrawColor(bj_log_text[lobby][0], -1);
								}
				            }
				            else BlackJackLobby[lobby][TableTurn]++;
							//do
				        }
				        case 4:
				        {
				            if(BlackJackLobby[lobby][Table4Id] < 1000)
				            {
				                if(BlackJackLobby[lobby][Table4Point] == 21 || BlackJackLobby[lobby][Table4Point] > 21) return BlackJackLobby[lobby][TableTurnTime] = 0, BlackJackLobby[lobby][TableTurn]++;
				                if(BlackJackLobby[lobby][TableTurnTime] == 0)
								{
									BlackJackLobby[lobby][TableTurnTime] = 15;
					                PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]], "blackjack:brbjyouturn");
					                PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]]);
									SetTimerEx("TimerHideYouTurn", 2000, false, "d", BlackJackLobby[lobby][Table4Id]);

         							new str[24];
        							new str1[] = "Time to left move 00:15";
									utf8_to_cp1251(str1);
									TextDrawSetString(bj_log_text[lobby][0], str);
									TextDrawColor(bj_log_text[lobby][0], -1);
									GetPlayerName(BlackJackLobby[lobby][Table4Id], str, 24);
									TextDrawSetString(bj_log_text[lobby][1], str);
									TextDrawColor(bj_log_text[lobby][1], -65281);
								}
								else if(BlackJackLobby[lobby][TableTurnTime] == 1)
								{
         							BlackJackLobby[lobby][TableTurnTime]--;
                                    BlackJackLobby[lobby][TableTurn]++;

									new str2[] = "Time Out";
									utf8_to_cp1251(str2);
                                    TextDrawSetString(bj_log_text[lobby][0], str2);
									TextDrawColor(bj_log_text[lobby][0], -1);
								}
								else
								{
         							BlackJackLobby[lobby][TableTurnTime]--;
         							new str[24];
        							new str1[] = "Time to left move 00:%02d";
									utf8_to_cp1251(str1);
         							format(str, sizeof str, str1, BlackJackLobby[lobby][TableTurnTime]);
									TextDrawSetString(bj_log_text[lobby][0], str);
									TextDrawColor(bj_log_text[lobby][0], -1);
								}
				            }
				            else BlackJackLobby[lobby][TableTurn]++;
							//do
				        }
				        case 5: { BlackJackLobby[lobby][TableTurn] = 0; BlackJackLobby[lobby][TableTurnTime] = 0; BlackJackLobby[lobby][StageLobby]++; }

				    }
				    //SCMBJL(lobby, CLRED, "DOOOO");
				}

				case 5: //timerlobby //??????? ?????? ????????? ?????
				{
					new str[] = "Dealer open the card";
					utf8_to_cp1251(str);
					TextDrawSetString(bj_log_text[lobby][0], str);
					TextDrawColor(bj_log_text[lobby][0], -1);
					TextDrawSetString(bj_log_text[lobby][1], "");
					TextDrawColor(bj_log_text[lobby][1], -65281);

			        new dealer_suit = random(13);
					new dealer_type = random(4);

					BlackJackLobby[lobby][DealerPoint] += BlackJackCard[dealer_suit][dealer_type][Pointscore];


					TextDrawSetString(bj_dealer_card[lobby][2], BlackJackCard[dealer_suit][dealer_type][Cardtexture]);


					new str1[10];
					format(str1, sizeof str1, "%d", BlackJackLobby[lobby][DealerPoint]);

					if(BlackJackLobby[lobby][Table1Id] < 1000) PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_dealer_point[BlackJackLobby[lobby][Table1Id]], str); TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_dealer_card[lobby][2]);
					if(BlackJackLobby[lobby][Table2Id] < 1000) PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_dealer_point[BlackJackLobby[lobby][Table2Id]], str); TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_dealer_card[lobby][2]);
					if(BlackJackLobby[lobby][Table3Id] < 1000) PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_dealer_point[BlackJackLobby[lobby][Table3Id]], str); TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_dealer_card[lobby][2]);
					if(BlackJackLobby[lobby][Table4Id] < 1000) PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_dealer_point[BlackJackLobby[lobby][Table4Id]], str); TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_dealer_card[lobby][2]);

					if(BlackJackLobby[lobby][DealerPoint] < 16) BlackJackLobby[lobby][StageLobby]++;
					else BlackJackLobby[lobby][StageLobby] = 7;
				}
				case 6:
				{
			        new dealer_suit = random(13);
					new dealer_type = random(4);

					BlackJackLobby[lobby][DealerPoint] += BlackJackCard[dealer_suit][dealer_type][Pointscore];


					TextDrawSetString(bj_dealer_card[lobby][3], BlackJackCard[dealer_suit][dealer_type][Cardtexture]);

					new str1[] = "Dealer takes a card";
					utf8_to_cp1251(str1);
					TextDrawSetString(bj_log_text[lobby][0], str1);
					TextDrawColor(bj_log_text[lobby][0], -1);

					new str[10];
					format(str, sizeof str, "%d", BlackJackLobby[lobby][DealerPoint]);

					if(BlackJackLobby[lobby][Table1Id] < 1000) PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_dealer_point[BlackJackLobby[lobby][Table1Id]], str); TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_dealer_card[lobby][3]);
					if(BlackJackLobby[lobby][Table2Id] < 1000) PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_dealer_point[BlackJackLobby[lobby][Table2Id]], str); TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_dealer_card[lobby][3]);
					if(BlackJackLobby[lobby][Table3Id] < 1000) PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_dealer_point[BlackJackLobby[lobby][Table3Id]], str); TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_dealer_card[lobby][3]);
					if(BlackJackLobby[lobby][Table4Id] < 1000) PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_dealer_point[BlackJackLobby[lobby][Table4Id]], str); TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_dealer_card[lobby][3]);

					BlackJackLobby[lobby][StageLobby]++;
				}
				case 7: //timerlobby //?????????? result
				{
				TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][0]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_log_text[lobby][1]);
				TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][0]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_log_text[lobby][1]);
				TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][0]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_log_text[lobby][1]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][0]);
						TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_log_text[lobby][1]);
					if(BlackJackLobby[lobby][Table1Id] < 1000)
					{
					    if(BlackJackLobby[lobby][DealerPoint] == BlackJackLobby[lobby][Table1Point] || (BlackJackLobby[lobby][DealerPoint] > 21 && BlackJackLobby[lobby][Table1Point] > 21))
					    {
				            PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]], "blackjack:brbjdraw");
					    	PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]]);
				            GivePlayerMoneyEx(BlackJackLobby[lobby][Table1Id], pBJInfo[BlackJackLobby[lobby][Table1Id]][pBJBet]);

					       	TextDrawSetString(bj_result_table[lobby][0], "blackjack:brbjmydraw");
					    }
					    else if(BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table1Point] < 21)
					    {
							if(BlackJackLobby[lobby][DealerPoint] > BlackJackLobby[lobby][Table1Point])
							{
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]], "blackjack:brbjyoulose");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]]);

					            TextDrawSetString(bj_result_table[lobby][0], "blackjack:brbjlose");
							}
							else
							{
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]], "blackjack:brbjyouwin");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]]);
					            HandleBlackjackWin(BlackJackLobby[lobby][Table1Id], pBJInfo[BlackJackLobby[lobby][Table1Id]][pBJBet]);

					            TextDrawSetString(bj_result_table[lobby][0], "blackjack:brbjwin");
							}
					    }

					    else if((BlackJackLobby[lobby][DealerPoint] == 21 && BlackJackLobby[lobby][Table1Point] < 21) || (BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table1Point] > 21))
					    {
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]], "blackjack:brbjyoulose");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]]);

					            TextDrawSetString(bj_result_table[lobby][0], "blackjack:brbjlose");
					    }
					    else if((BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table1Point] == 21) || (BlackJackLobby[lobby][DealerPoint] > 21 && BlackJackLobby[lobby][Table1Point] < 21))
					    {
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]], "blackjack:brbjyouwin");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_panel_info[BlackJackLobby[lobby][Table1Id]]);
					            HandleBlackjackWin(BlackJackLobby[lobby][Table1Id], pBJInfo[BlackJackLobby[lobby][Table1Id]][pBJBet]);

					            TextDrawSetString(bj_result_table[lobby][0], "blackjack:brbjwin");
					    }
					}

					if(BlackJackLobby[lobby][Table2Id] < 1000)
					{
					    if(BlackJackLobby[lobby][DealerPoint] == BlackJackLobby[lobby][Table2Point] || (BlackJackLobby[lobby][DealerPoint] > 21 && BlackJackLobby[lobby][Table2Point] > 21))
					    {
				            PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]], "blackjack:brbjdraw");
					    	PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]]);
				            GivePlayerMoneyEx(BlackJackLobby[lobby][Table2Id], pBJInfo[BlackJackLobby[lobby][Table2Id]][pBJBet]);

					       	TextDrawSetString(bj_result_table[lobby][1], "blackjack:brbjmydraw");
					    }
					    else if(BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table2Point] < 21)
					    {
							if(BlackJackLobby[lobby][DealerPoint] > BlackJackLobby[lobby][Table2Point])
							{
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]], "blackjack:brbjyoulose");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]]);

					            TextDrawSetString(bj_result_table[lobby][1], "blackjack:brbjlose");
							}
							else
							{
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]], "blackjack:brbjyouwin");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]]);
					            HandleBlackjackWin(BlackJackLobby[lobby][Table2Id], pBJInfo[BlackJackLobby[lobby][Table2Id]][pBJBet]);

					            TextDrawSetString(bj_result_table[lobby][1], "blackjack:brbjwin");
							}
					    }

					    else if((BlackJackLobby[lobby][DealerPoint] == 21 && BlackJackLobby[lobby][Table2Point] < 21) || (BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table2Point] > 21))
					    {
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]], "blackjack:brbjyoulose");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]]);

					            TextDrawSetString(bj_result_table[lobby][1], "blackjack:brbjlose");
					    }
					    else if((BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table2Point] == 21) || (BlackJackLobby[lobby][DealerPoint] > 21 && BlackJackLobby[lobby][Table2Point] < 21))
					    {
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]], "blackjack:brbjyouwin");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_panel_info[BlackJackLobby[lobby][Table2Id]]);
					            HandleBlackjackWin(BlackJackLobby[lobby][Table2Id], pBJInfo[BlackJackLobby[lobby][Table2Id]][pBJBet]);

					            TextDrawSetString(bj_result_table[lobby][1], "blackjack:brbjwin");
					    }
					}


					if(BlackJackLobby[lobby][Table3Id] < 1000)
					{
					    if(BlackJackLobby[lobby][DealerPoint] == BlackJackLobby[lobby][Table3Point] || (BlackJackLobby[lobby][DealerPoint] > 21 && BlackJackLobby[lobby][Table3Point] > 21))
					    {
				            PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]], "blackjack:brbjdraw");
					    	PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]]);
				            GivePlayerMoneyEx(BlackJackLobby[lobby][Table3Id], pBJInfo[BlackJackLobby[lobby][Table3Id]][pBJBet]);

					       	TextDrawSetString(bj_result_table[lobby][2], "blackjack:brbjmydraw");
					    }
					    else if(BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table3Point] < 21)
					    {
							if(BlackJackLobby[lobby][DealerPoint] > BlackJackLobby[lobby][Table3Point])
							{
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]], "blackjack:brbjyoulose");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]]);

					            TextDrawSetString(bj_result_table[lobby][2], "blackjack:brbjlose");
							}
							else
							{
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]], "blackjack:brbjyouwin");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]]);
					            HandleBlackjackWin(BlackJackLobby[lobby][Table3Id], pBJInfo[BlackJackLobby[lobby][Table3Id]][pBJBet]);

					            TextDrawSetString(bj_result_table[lobby][2], "blackjack:brbjwin");
							}
					    }

					    else if((BlackJackLobby[lobby][DealerPoint] == 21 && BlackJackLobby[lobby][Table3Point] < 21) || (BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table3Point] > 21))
					    {
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]], "blackjack:brbjyoulose");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]]);

					            TextDrawSetString(bj_result_table[lobby][2], "blackjack:brbjlose");
					    }
					    else if((BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table3Point] == 21) || (BlackJackLobby[lobby][DealerPoint] > 21 && BlackJackLobby[lobby][Table3Point] < 21))
					    {
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]], "blackjack:brbjyouwin");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_panel_info[BlackJackLobby[lobby][Table3Id]]);
					            HandleBlackjackWin(BlackJackLobby[lobby][Table3Id], pBJInfo[BlackJackLobby[lobby][Table3Id]][pBJBet]);

					            TextDrawSetString(bj_result_table[lobby][2], "blackjack:brbjwin");
					    }
					}

					if(BlackJackLobby[lobby][Table4Id] < 1000)
					{
					    if(BlackJackLobby[lobby][DealerPoint] == BlackJackLobby[lobby][Table4Point] || (BlackJackLobby[lobby][DealerPoint] > 21 && BlackJackLobby[lobby][Table4Point] > 21))
					    {
				            PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]], "blackjack:brbjdraw");
					    	PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]]);
				            GivePlayerMoneyEx(BlackJackLobby[lobby][Table4Id], pBJInfo[BlackJackLobby[lobby][Table4Id]][pBJBet]);

					       	TextDrawSetString(bj_result_table[lobby][3], "blackjack:brbjmydraw");
					    }
					    else if(BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table4Point] < 21)
					    {
							if(BlackJackLobby[lobby][DealerPoint] > BlackJackLobby[lobby][Table4Point])
							{
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]], "blackjack:brbjyoulose");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]]);

					            TextDrawSetString(bj_result_table[lobby][3], "blackjack:brbjlose");
							}
							else
							{
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]], "blackjack:brbjyouwin");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]]);
					            HandleBlackjackWin(BlackJackLobby[lobby][Table4Id], pBJInfo[BlackJackLobby[lobby][Table4Id]][pBJBet]);

					            TextDrawSetString(bj_result_table[lobby][3], "blackjack:brbjwin");
							}
					    }

					    else if((BlackJackLobby[lobby][DealerPoint] == 21 && BlackJackLobby[lobby][Table4Point] < 21) || (BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table4Point] > 21))
					    {
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]], "blackjack:brbjyoulose");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]]);

					            TextDrawSetString(bj_result_table[lobby][3], "blackjack:brbjlose");
					    }
					    else if((BlackJackLobby[lobby][DealerPoint] < 21 && BlackJackLobby[lobby][Table4Point] == 21) || (BlackJackLobby[lobby][DealerPoint] > 21 && BlackJackLobby[lobby][Table4Point] < 21))
					    {
					            PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]], "blackjack:brbjyouwin");
						    	PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_panel_info[BlackJackLobby[lobby][Table4Id]]);
					            HandleBlackjackWin(BlackJackLobby[lobby][Table4Id], pBJInfo[BlackJackLobby[lobby][Table4Id]][pBJBet]);

					            TextDrawSetString(bj_result_table[lobby][3], "blackjack:brbjwin");
					    }
     				}


					BlackJackLobby[lobby][StageLobby]++;
				}
				case 8:
				{
     				if(BlackJackLobby[lobby][Table1Id] < 1000)
			 		{
					 	TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_result_table[lobby][0]);
					 	if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_result_table[lobby][1]);
					 	if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_result_table[lobby][2]);
					 	if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_result_table[lobby][3]);
				    }
     				if(BlackJackLobby[lobby][Table2Id] < 1000)
			 		{
					 	if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_result_table[lobby][0]);
					 	TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_result_table[lobby][1]);
					 	if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_result_table[lobby][2]);
					 	if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_result_table[lobby][3]);
				    }
     				if(BlackJackLobby[lobby][Table3Id] < 1000)
			 		{
					 	if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_result_table[lobby][0]);
					 	if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_result_table[lobby][1]);
					 	TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_result_table[lobby][2]);
					 	if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_result_table[lobby][3]);
				    }
     				if(BlackJackLobby[lobby][Table4Id] < 1000)
			 		{
					 	if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_result_table[lobby][0]);
					 	if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_result_table[lobby][1]);
					 	if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_result_table[lobby][2]);
					 	TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_result_table[lobby][3]);
				    }
					BlackJackLobby[lobby][StageLobby]++;
				}
				case 9: BlackJackLobby[lobby][StageLobby]++;
				case 10: BlackJackLobby[lobby][StageLobby]++;
				case 11: //end
				{
					new str[] = "point: 0";
					utf8_to_cp1251(str);
	            	TextDrawSetString(bj_text_point_table[lobby][0], str);
					TextDrawSetString(bj_text_point_table[lobby][1], str);
					TextDrawSetString(bj_text_point_table[lobby][2], str);
					TextDrawSetString(bj_text_point_table[lobby][3], str);

					BlackJackLobby[lobby][Table1Result] = 0;
					BlackJackLobby[lobby][Table2Result] = 0;
					BlackJackLobby[lobby][Table3Result] = 0;
					BlackJackLobby[lobby][Table4Result] = 0;

					BlackJackLobby[lobby][StageLobby]++;
				}
				case 12:
				{
					BlackJackLobby[lobby][StageLobby]++;
					if(BlackJackLobby[lobby][Table1Id] < 1000) { PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_dealer_point[BlackJackLobby[lobby][Table1Id]], "0"); ExitPlayerLobby(BlackJackLobby[lobby][Table1Id], lobby, 1); InitPlayerLobby(BlackJackLobby[lobby][Table1Id], lobby, 1); }
				}
				case 13:
				{
					BlackJackLobby[lobby][StageLobby]++;
					if(BlackJackLobby[lobby][Table2Id] < 1000) { PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_dealer_point[BlackJackLobby[lobby][Table2Id]], "0"); ExitPlayerLobby(BlackJackLobby[lobby][Table2Id], lobby, 2); InitPlayerLobby(BlackJackLobby[lobby][Table2Id], lobby, 2); }
				}
				case 14:
				{
					BlackJackLobby[lobby][StageLobby]++;
					if(BlackJackLobby[lobby][Table3Id] < 1000) { PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_dealer_point[BlackJackLobby[lobby][Table3Id]], "0"); ExitPlayerLobby(BlackJackLobby[lobby][Table3Id], lobby, 3); InitPlayerLobby(BlackJackLobby[lobby][Table3Id], lobby, 3); }
				}
				case 15:
				{
    				BlackJackLobby[lobby][StageLobby] = 0;
					BlackJackLobby[lobby][StartedLobby] = false;
					if(BlackJackLobby[lobby][Table4Id] < 1000) { PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_dealer_point[BlackJackLobby[lobby][Table4Id]], "0"); ExitPlayerLobby(BlackJackLobby[lobby][Table4Id], lobby, 4); InitPlayerLobby(BlackJackLobby[lobby][Table4Id], lobby, 4); }
				}
			}
	    }
		else
	    {
	        if(BlackJackLobby[lobby][StartTimer]-1 == 0)
			{
				BlackJackLobby[lobby][StartedLobby] = true; BlackJackLobby[lobby][StageLobby] = 1; SCMBJL(lobby, CLRED, "???? ????????...");

				printf("???? 1: %d", BlackJackLobby[lobby][Table1Id]);
				printf("???? 2: %d", BlackJackLobby[lobby][Table2Id]);
				printf("???? 3: %d", BlackJackLobby[lobby][Table3Id]);
				printf("???? 4: %d", BlackJackLobby[lobby][Table4Id]);

				new str[15];

			    if(BlackJackLobby[lobby][Table1Id] < 1000) {
					if(!pBJInfo[BlackJackLobby[lobby][Table1Id]][pBJBet]) { SCM(BlackJackLobby[lobby][Table1Id], CYELLOW, "| "CW"?????????? ?????? ????? ?????? ?? ??? ???????? ??????"); ExitPlayerLobby(BlackJackLobby[lobby][Table1Id], lobby, 1); }
					else { GivePlayerMoneyEx(BlackJackLobby[lobby][Table1Id], -pBJInfo[BlackJackLobby[lobby][Table1Id]][pBJBet]); format(str, sizeof str, "%d ??b", playermoney(BlackJackLobby[lobby][Table1Id])); PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_money[BlackJackLobby[lobby][Table1Id]], str); }
				}
			    if(BlackJackLobby[lobby][Table2Id] < 1000) {
					if(!pBJInfo[BlackJackLobby[lobby][Table2Id]][pBJBet]) { SCM(BlackJackLobby[lobby][Table2Id], CYELLOW, "| "CW"?????????? ?????? ????? ?????? ?? ??? ???????? ??????"); ExitPlayerLobby(BlackJackLobby[lobby][Table2Id], lobby, 2); }
					else { GivePlayerMoneyEx(BlackJackLobby[lobby][Table2Id], -pBJInfo[BlackJackLobby[lobby][Table2Id]][pBJBet]); format(str, sizeof str, "%d ??b", playermoney(BlackJackLobby[lobby][Table2Id])); PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_money[BlackJackLobby[lobby][Table2Id]], str); }
				}
			    if(BlackJackLobby[lobby][Table3Id] < 1000) {
					if(!pBJInfo[BlackJackLobby[lobby][Table3Id]][pBJBet]) { SCM(BlackJackLobby[lobby][Table3Id], CYELLOW, "| "CW"?????????? ?????? ????? ?????? ?? ??? ???????? ??????"); ExitPlayerLobby(BlackJackLobby[lobby][Table3Id], lobby, 3); }
					else { GivePlayerMoneyEx(BlackJackLobby[lobby][Table3Id], -pBJInfo[BlackJackLobby[lobby][Table3Id]][pBJBet]); format(str, sizeof str, "%d ??b", playermoney(BlackJackLobby[lobby][Table3Id])); PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_money[BlackJackLobby[lobby][Table3Id]], str); }
				}
			    if(BlackJackLobby[lobby][Table4Id] < 1000) {
					if(!pBJInfo[BlackJackLobby[lobby][Table4Id]][pBJBet]) { SCM(BlackJackLobby[lobby][Table4Id], CYELLOW, "| "CW"?????????? ?????? ????? ?????? ?? ??? ???????? ??????"); ExitPlayerLobby(BlackJackLobby[lobby][Table4Id], lobby, 4); }
					else { GivePlayerMoneyEx(BlackJackLobby[lobby][Table4Id], -pBJInfo[BlackJackLobby[lobby][Table4Id]][pBJBet]); format(str, sizeof str, "%d ??b", playermoney(BlackJackLobby[lobby][Table4Id])); PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_money[BlackJackLobby[lobby][Table4Id]], str); }
				}



				BlackJackLobby[lobby][StartTimer] = 60;

				if(BlackJackLobby[lobby][Table1Id] < 1000) {
					TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_text_start_time);
					TextDrawHideForPlayer(BlackJackLobby[lobby][Table1Id], bj_text_start_timer[lobby]);
				}
				if(BlackJackLobby[lobby][Table2Id] < 1000) {
					TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_text_start_time);
					TextDrawHideForPlayer(BlackJackLobby[lobby][Table2Id], bj_text_start_timer[lobby]);
				}
				if(BlackJackLobby[lobby][Table3Id] < 1000) {
					TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_text_start_time);
					TextDrawHideForPlayer(BlackJackLobby[lobby][Table3Id], bj_text_start_timer[lobby]);
				}
				if(BlackJackLobby[lobby][Table4Id] < 1000) {
					TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_text_start_time);
					TextDrawHideForPlayer(BlackJackLobby[lobby][Table4Id], bj_text_start_timer[lobby]);
				}
			}
		    else
			{
				BlackJackLobby[lobby][StartTimer]--;
			    new timer[6];
				format(timer, sizeof timer, "00:%02d", BlackJackLobby[lobby][StartTimer]);
				TextDrawSetString(bj_text_start_timer[lobby], timer);
			}
	    }
	}
	else
	{ //timerdeath
	    BlackJackLobby[lobby][ActivedLobby] = false;
		BlackJackLobby[lobby][StartedLobby] = false;
		BlackJackLobby[lobby][StartTimer] = 60;
		BlackJackLobby[lobby][StageLobby] = 0;
		BlackJackLobby[lobby][TableTurnTime] = 0;
		BlackJackLobby[lobby][TableTurn] = 0;
	    BlackJackLobby[lobby][DealerPoint] = 0;

		TextDrawSetString(bj_text_start_timer[lobby], "00:60");

		BlackJackLobby[lobby][Table1Point] = 0;
		BlackJackLobby[lobby][Table2Point] = 0;
		BlackJackLobby[lobby][Table3Point] = 0;
		BlackJackLobby[lobby][Table4Point] = 0;

		BlackJackLobby[lobby][Table1Result] = 0;
		BlackJackLobby[lobby][Table2Result] = 0;
		BlackJackLobby[lobby][Table3Result] = 0;
		BlackJackLobby[lobby][Table4Result] = 0;
	}
	return 1;
}

forward TimerDealerNext(lobby);
public TimerDealerNext(lobby)
{
	BlackJackLobby[lobby][DealerTurnGived] = 3;
}

forward TimerHideBetText(playerid);
public TimerHideBetText(playerid)
{
	TextDrawHideForPlayer(playerid, bj_text_bet[0]);
	TextDrawHideForPlayer(playerid, bj_text_bet[1]);
}
forward TimerHideYouTurn(playerid);
public TimerHideYouTurn(playerid) PlayerTextDrawHide(playerid, bj_panel_info[playerid]);



stock SCMBJL(lobby, color, message[]) //SendCLientMessageBlackJackLobby
{
	if(BlackJackLobby[lobby][Table1Id] < 1000) SCM(BlackJackLobby[lobby][Table1Id], color, message);
	if(BlackJackLobby[lobby][Table2Id] < 1000) SCM(BlackJackLobby[lobby][Table2Id], color, message);
	if(BlackJackLobby[lobby][Table3Id] < 1000) SCM(BlackJackLobby[lobby][Table3Id], color, message);
	if(BlackJackLobby[lobby][Table4Id] < 1000) SCM(BlackJackLobby[lobby][Table4Id], color, message);
}

stock CheckTableBlackJack(lobby, table)
{
	switch(table)
	{
	    case 1:
		{
			if(BlackJackLobby[lobby][Table1Point] == 21) GiveTableBlackJack(lobby, BlackJackLobby[lobby][Table1Id], table);
			else if(BlackJackLobby[lobby][Table1Point] > 21) GiveTableLose(lobby, BlackJackLobby[lobby][Table1Id]);
		}
	    case 2:
		{
			if(BlackJackLobby[lobby][Table2Point] == 21) GiveTableBlackJack(lobby, BlackJackLobby[lobby][Table2Id], table);
			else if(BlackJackLobby[lobby][Table2Point] > 21) GiveTableLose(lobby, BlackJackLobby[lobby][Table2Id]);
		}
	    case 3:
		{
			if(BlackJackLobby[lobby][Table3Point] == 21) GiveTableBlackJack(lobby, BlackJackLobby[lobby][Table3Id], table);
			else if(BlackJackLobby[lobby][Table4Point] > 21) GiveTableLose(lobby, BlackJackLobby[lobby][Table3Id]);
		}
	    case 4:
		{
			if(BlackJackLobby[lobby][Table4Point] == 21) GiveTableBlackJack(lobby, BlackJackLobby[lobby][Table4Id], table);
			else if(BlackJackLobby[lobby][Table4Point] > 21) GiveTableLose(lobby, BlackJackLobby[lobby][Table4Id]);
		}
	}

}

stock GiveTableBlackJack(lobby, playerid, table)
{
	if(BlackJackLobby[lobby][Table1Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_text_bj_table[lobby][table-1]);  TextDrawShowForPlayer(BlackJackLobby[lobby][Table1Id], bj_text_bj_table[lobby][table-1]);
	if(BlackJackLobby[lobby][Table2Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_text_bj_table[lobby][table-1]);  TextDrawShowForPlayer(BlackJackLobby[lobby][Table2Id], bj_text_bj_table[lobby][table-1]);
	if(BlackJackLobby[lobby][Table3Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_text_bj_table[lobby][table-1]);  TextDrawShowForPlayer(BlackJackLobby[lobby][Table3Id], bj_text_bj_table[lobby][table-1]);
	if(BlackJackLobby[lobby][Table4Id] < 1000) TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_text_bj_table[lobby][table-1]);  TextDrawShowForPlayer(BlackJackLobby[lobby][Table4Id], bj_text_bj_table[lobby][table-1]);

    PlayerTextDrawSetString(playerid, bj_panel_info[playerid], "blackjack:brbjyoubj");//GivePlayerMoneyEx(BlackJackLobby[lobby][Table1Id], pBJInfo[BlackJackLobby[lobby][Table1Id]][pBJBet]*2);
    BlackJackLobby[lobby][TableTurn]++;
}

stock GiveTableLose(lobby, player)
{
    ShowNewNotification(player, 2, 5, 1, 10, "? ????????? ?? ?????????", "");

    new betAmount = pBJInfo[player][pBJBet];
    new casinoProfit = betAmount * 20 / 100; // 20% ?? ?????????

    new businessid = 38;
    new query[256];

    format(query, sizeof query,
        "UPDATE business SET balance=%d WHERE id=%d LIMIT 1",
        GetBusinessData(businessid, B_BALANCE) + casinoProfit,
        GetBusinessData(businessid, B_SQL_ID)
    );
    mysql_query(mysql, query, false);

    mysql_format(mysql, query, sizeof query,
        "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)",
        GetBusinessData(businessid, B_SQL_ID),
        GetPlayerAccountID(player),
        GetPlayerIpEx(player),
        gettime(),
        casinoProfit,
        IsBusinessOwned(businessid)
    );
    mysql_query(mysql, query, false);
}


stock ShowMembersCardBJL(lobby, table, card, suit, type)
{

	new apponent;
	switch(table)
	{
	    case 1: apponent = BlackJackLobby[lobby][Table1Id];
	    case 2: apponent = BlackJackLobby[lobby][Table2Id];
	    case 3: apponent = BlackJackLobby[lobby][Table3Id];
	    case 4: apponent = BlackJackLobby[lobby][Table4Id];
	}
	new give[MAX_PLAYER_NAME];
	new str[] = "Dealer give a card";
	utf8_to_cp1251(str);
	format(give, sizeof give, "%s", playername(apponent));
	TextDrawSetString(bj_log_text[lobby][0], str);
	TextDrawColor(bj_log_text[lobby][0], -1);
	TextDrawSetString(bj_log_text[lobby][1], give);
	TextDrawColor(bj_log_text[lobby][1], -65281);

	if(BlackJackLobby[lobby][Table1Id] < 1000)
	{
		PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_card_table[BlackJackLobby[lobby][Table1Id]][table][card]);
        PlayerTextDrawSetString(BlackJackLobby[lobby][Table1Id], bj_card_table[BlackJackLobby[lobby][Table1Id]][table][card], BlackJackCard[suit][type][Cardtexture]);
		PlayerTextDrawShow(BlackJackLobby[lobby][Table1Id], bj_card_table[BlackJackLobby[lobby][Table1Id]][table][card]);
	}
	if(BlackJackLobby[lobby][Table2Id] < 1000)
	{
		PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_card_table[BlackJackLobby[lobby][Table2Id]][table][card]);
        PlayerTextDrawSetString(BlackJackLobby[lobby][Table2Id], bj_card_table[BlackJackLobby[lobby][Table2Id]][table][card], BlackJackCard[suit][type][Cardtexture]);
		PlayerTextDrawShow(BlackJackLobby[lobby][Table2Id], bj_card_table[BlackJackLobby[lobby][Table2Id]][table][card]);
	}
	if(BlackJackLobby[lobby][Table3Id] < 1000)
	{
		PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_card_table[BlackJackLobby[lobby][Table3Id]][table][card]);
        PlayerTextDrawSetString(BlackJackLobby[lobby][Table3Id], bj_card_table[BlackJackLobby[lobby][Table3Id]][table][card], BlackJackCard[suit][type][Cardtexture]);
		PlayerTextDrawShow(BlackJackLobby[lobby][Table3Id], bj_card_table[BlackJackLobby[lobby][Table3Id]][table][card]);
	}
	if(BlackJackLobby[lobby][Table4Id] < 1000)
	{
		PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_card_table[BlackJackLobby[lobby][Table4Id]][table][card]);
        PlayerTextDrawSetString(BlackJackLobby[lobby][Table4Id], bj_card_table[BlackJackLobby[lobby][Table4Id]][table][card], BlackJackCard[suit][type][Cardtexture]);
		PlayerTextDrawShow(BlackJackLobby[lobby][Table4Id], bj_card_table[BlackJackLobby[lobby][Table4Id]][table][card]);
	}
}

CMD:blackjack(playerid)
{
	if(pBJInfo[playerid][OnLobby] == false)
	{
		new bool:distance;
		for(new i = 1; i <= MAX_BJ_LOBBY; i++)
		{
			if(CheckPlayerDistanceToPoint(playerid, BlackJackPos[i][0], BlackJackPos[i][1], BlackJackPos[i][2], 5))
		    {
	     		distance = true;
				if(BlackJackLobby[i][StartedLobby] == false)
				{
					if(BlackJackLobby[i][Table1Id] == 1000) 	 { BlackJackLobby[i][Table1Id] = playerid; pBJInfo[playerid][OnLobby] = true; pBJInfo[playerid][pBJLobby] = i; InitPlayerLobby(playerid, i, 1); }
					else if(BlackJackLobby[i][Table2Id] == 1000) { BlackJackLobby[i][Table2Id] = playerid; pBJInfo[playerid][OnLobby] = true; pBJInfo[playerid][pBJLobby] = i; InitPlayerLobby(playerid, i, 2); }
					else if(BlackJackLobby[i][Table3Id] == 1000) { BlackJackLobby[i][Table3Id] = playerid; pBJInfo[playerid][OnLobby] = true; pBJInfo[playerid][pBJLobby] = i; InitPlayerLobby(playerid, i, 3); }
					else if(BlackJackLobby[i][Table4Id] == 1000) { BlackJackLobby[i][Table4Id] = playerid; pBJInfo[playerid][OnLobby] = true; pBJInfo[playerid][pBJLobby] = i; InitPlayerLobby(playerid, i, 4); }
					else SCM(playerid, CLRED, "| "CW"?????? ???? ??? ???ù?.");
				}
				else SCM(playerid, CLRED, "| "CW"?? ???? ????? ??? ???????? ????.");
		    }
		    else continue;
		}
		if(distance == false) SCM(playerid, CLRED, "| "CW"?? ?????????? ??????? ??????!");
	}
	return 1;
}

stock HandleBlackjackWin(playerid, betAmount)
{
    new winAmount = betAmount * 2;
    new casinoProfit = winAmount / 10;
    new playerReward = winAmount - casinoProfit;

    GivePlayerMoneyEx(playerid, playerReward);

    new businessid = 38;
    new query[256];

    format(query, sizeof query,
        "UPDATE business SET balance=%d WHERE id=%d LIMIT 1",
        GetBusinessData(businessid, B_BALANCE) + casinoProfit,
        GetBusinessData(businessid, B_SQL_ID)
    );
    mysql_query(mysql, query, false);

    mysql_format(mysql, query, sizeof query,
        "INSERT INTO business_profit (bid,uid,uip,time,money,view) VALUES (%d,%d,'%e',%d,%d,%d)",
        GetBusinessData(businessid, B_SQL_ID),
        GetPlayerAccountID(playerid),
        GetPlayerIpEx(playerid),
        gettime(),
        casinoProfit,
        IsBusinessOwned(businessid)
    );
    mysql_query(mysql, query, false);

    new msg[64];
    format(msg, sizeof msg, "?? ???????? %d ?????? ? ?????? ????????. ", playerReward);
    SendClientMessage(playerid, 0x00FF00FF, msg); // ??????? ????
}

forward FinishEnteringVehicle(playerid, vehicleid);
public FinishEnteringVehicle(playerid, vehicleid)
{
    IsPlayerEntering[playerid] = false;
    
    // ????????? ????????? ? ?????
    LastVehicle[playerid] = vehicleid;
    LastSeat[playerid] = GetPlayerVehicleSeat(playerid);
    
    // ??????????????
    PutPlayerInVehicle(playerid, vehicleid, LastSeat[playerid]);
    
    // ??ù ?????????? - ????????? ????????
    if(LastSeat[playerid] > 0)
    {
        ApplyAnimation(playerid, "PED", "CAR_SIT", 4.1, 0, 0, 0, 1, 0, 1);
    }
}

stock HidePlayerGUI(playerid, guiid)
{
	new Node:json = JSON_Object(); 
	JSON_SetInt(json, "c", 1);
	new json_str[512];
	JSON_Stringify(json, json_str);
	OnPacketIncoming(playerid, guiid, json_str);
}

stock ShowPlayerGUI(playerid, guiid, Node:json)
{
	JSON_SetInt(json, "o", 1);
	OnPacketIncoming(playerid, guiid, json);
}

stock OnPacketIncoming(playerid, guiid, Node:json)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT8, 252);
	
	BS_WriteValue(bitstream, PR_UINT16, guiid);
	
	new data[1024]; //4294967295
    JSON_Stringify(json, data); 
	
    BS_WriteValue(bitstream, PR_UINT32, strlen(data));
    BS_WriteValue(bitstream, PR_STRING, data);

	PR_SendPacket(bitstream, playerid, PR_HIGH_PRIORITY, PR_RELIABLE);
	BS_Delete(bitstream);
}

CMD:donate(playerid, params[])
{
    new Node:donate_outcoming_json = JSON_Object();
    JSON_SetInt(donate_outcoming_json, "o", 1);
    JSON_SetString(donate_outcoming_json, "nm", GetPlayerNameEx(playerid));
    JSON_SetInt(donate_outcoming_json, "r", GetPlayerMoney(playerid));
	JSON_SetInt(donate_outcoming_json, "d", GetPlayerDonateRub(playerid));
    ShowPlayerGUI(playerid, 22, donate_outcoming_json);
    return 1;
}

stock CreateFractionCar()
{
	for(new i = 0; i < sizeof(g_org_car); i++)
    {
        format(sctring, sizeof(sctring), "{FFFF00}´%sª\n{FFFFFF}????????? ?????, ????? ??????????????ù\n??????????? ???????????", g_org_car[i][O_NAME]);
        CreateDynamic3DTextLabel(sctring, -1, g_org_car[i][O_PICKUP][0], g_org_car[i][O_PICKUP][1], g_org_car[i][O_PICKUP][2], 15.0);
        g_org_car[i][O_PICKUP_ID] = CreatePickup(19131, 23, g_org_car[i][O_PICKUP][0], g_org_car[i][O_PICKUP][1], g_org_car[i][O_PICKUP][2], 0, PICKUP_ACTION_TYPE_ORG_CAR, i);
    }
    printf("????????? ??????? ???? %d ????", sizeof(g_org_car));
}

CMD:fonline(playerid, params[])
{
    if (GetPlayerAdminEx(playerid) < 2)
        return SendClientMessage(playerid, 0xCECECEFF, "?????ù ??????? ???????? ?????? ?????????????.");

    mysql_tquery(mysql, "SELECT team, COUNT(*) AS total FROM accounts WHERE team BETWEEN 1 AND 11 GROUP BY team", "LoadOrgTotals", "i", playerid);
    return 1;
}

forward LoadOrgTotals(playerid);
public LoadOrgTotals(playerid)
{
    new org_names[11][64] = {
        "????????????? ???????",
        "???????ù ?????",
        "????????ù ????????",
        "???",
        "?????",
        "????",
        "???",
        "????",
        "??????????? ???",
        "??????????? ???",
        "???????????? ???"
    };

    new org_colors[11] = {
        0xFFFF00, // ????????????? ó ??????
        0x8B4513, // ???????ù ????? ó ??????????
        0xFF3366, // ???????? ó ??????-???????
        0xFFA500, // ??? ó ?????????
        0x00008B, // ????? ó ?????-?????
        0x00008B, // ???? ó ?????-?????
        0x00008B, // ??? ó ?????-?????
        0xAFEEEE, // ???? ó #AFEEEE
        0x00FF00, // ??????????ù ??? ó ???????
        0x483D8B, // ??????????ù ??? ó #483D8B
        0xFFD700  // ???????????? ??? ó ???????
    };

    new org_total[11];
    new org_online[11];
    new fmt_text[160], list[2048];

    new rows = cache_get_row_count();
    for (new i = 0; i < rows; i++)
    {
        new team = cache_get_field_content_int(i, "team");
        new total = cache_get_field_content_int(i, "total");

        if (1 <= team <= 11)
            org_total[team - 1] = total;
    }

    for (new i = 0; i < MAX_PLAYERS; i++)
    {
        if (!IsPlayerConnected(i)) continue;

        new team = GetPlayerTeamEx(i);
        if (1 <= team <= 11 && IsPlayerLogged(i))
            org_online[team - 1]++;
    }

    strcat(list, "{EB4C42}?????\t{EB4C42}???????????? ???????\t{EB4C42}???-?? ??????? ? ????\t{EB4C42}????? ???-?? ???????\n");

    for (new i = 0; i < 11; i++)
    {
        format(fmt_text, sizeof fmt_text,
            "{EB4C42}%d\t{%06x}%s\t{EB4C42}%d{FFFFFF} ???.\t{EB4C42}%d{FFFFFF} ???.\n",
            i + 1,
            org_colors[i] & 0xFFFFFF,
            org_names[i],
            org_online[i],
            org_total[i]
        );
        strcat(list, fmt_text);
    }

    Dialog(playerid, INVALID_DIALOG_ID, DIALOG_STYLE_TABLIST_HEADERS, "{DC143C}"SERVER_NAME"{FFFFFF} | ?????????? ???????????", list, "???????", "");
    return 1;
}

stock UnixToDate(unix, &year, &month, &day, &hour, &minute, &second)
{
    new timestamp = unix;
    new days = timestamp / 86400;
    new rem = timestamp % 86400;

    hour = rem / 3600;
    rem %= 3600;
    minute = rem / 60;
    second = rem % 60;

    year = 1970;
    while (true)
    {
        new leap = ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0);
        new days_in_year = leap ? 366 : 365;
        if (days >= days_in_year)
        {
            days -= days_in_year;
            year++;
        }
        else break;
    }

    static const month_days[12] = { 31,28,31,30,31,30,31,31,30,31,30,31 };
    month = 0;
    while (month < 12)
    {
        new mdays = month_days[month];
        if (month == 1 && ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0)) mdays++;
        if (days >= mdays)
        {
            days -= mdays;
            month++;
        }
        else break;
    }
    month++;
    day = days + 1;

}

stock ShowSpawnSelectionDialog(playerid)
{
    new dialogText[1024];

    strcat(dialogText, "{EB4C42}Baze Russia RolePlay{FFFFFF} | ???????? ????? ??ù?????ù\n");

    strcat(dialogText, "??????\t{00AA00}????????\t{999999}??????? ??ù ??????\n");

    new lastLogout = GetPlayerData(playerid, P_LAST_LOGOUT);
    new timeNow = gettime();
    if (timeNow - lastLogout <= 300)
        strcat(dialogText, "????????? ????? ??????\t{00AA00}????????\t{999999}??????? ??ù ??????\n");
    else
        strcat(dialogText, "????????? ????? ??????\t{CC6666}??????????\t{999999}????ù ?? ???? ?????\n");

    if (GetPlayerTeamEx(playerid))
        strcat(dialogText, "??????ù\t{00AA00}????????\t{999999}??????? ??ù ??????\n");
    else
        strcat(dialogText, "??????ù\t{CC6666}??????????\t{999999}?? ?? ???????? ? ???????????\n");

    if (GetPlayerHouse(playerid, HOUSE_TYPE_HOME) != -1)
        strcat(dialogText, "???\t{00AA00}????????\t{999999}??????? ??ù ??????\n");
    else
        strcat(dialogText, "???\t{CC6666}??????????\t{999999}? ??? ??? ????\n");

    if (GetPlayerHouse(playerid, HOUSE_TYPE_ROOM) != -1)
        strcat(dialogText, "???????ù\t{00AA00}????????\t{999999}??????? ??ù ??????\n");
    else
        strcat(dialogText, "???????ù\t{CC6666}??????????\t{999999}?? ?? ?????????? ? ????-????\n");

    new fam_id = GetPlayerIdFamily(playerid);
    new house_id = -1;
    if (fam_id != -1)
    {
        house_id = GetFamily(fam_id, family_house);
    }

    if (fam_id != -1 && house_id != -1)
        strcat(dialogText, "??? ?????\t{00AA00}????????\t{999999}??????? ??ù ??????\n");
    else
        strcat(dialogText, "??? ?????\t{CC6666}??????????\t{999999}?? ?? ? ????? / ???? ???? ?????\n");

    ShowPlayerDialog(playerid, DIALOG_SPAWN_SELECT, DIALOG_STYLE_TABLIST_HEADERS, "???????? ?????\t??????\t?????????ù", dialogText, "???????", "");
}

CMD:setfamspawn(playerid)
{
    new fam_id = GetPlayerIdFamily(playerid);
    if(fam_id == -1)
        return SendClientMessage(playerid, -1, "?? ?? ???????? ? ?????");

    if(GetPlayerRangFamily(playerid) < 5)
        return SendClientMessage(playerid, -1, "ù????? ????? ????? ????? ?????????? ????? ??????");

    new house_id = GetPlayerHouse(playerid, HOUSE_TYPE_HOME);
    if(house_id == -1)
        return SendClientMessage(playerid, -1, "? ??? ??? ???? ??? ????????");

    if(GetFamily(fam_id, family_house) == -1)
    {
        Dialog(playerid, DIALOG_FAM_SPAWN_SET, DIALOG_STYLE_MSGBOX,
            "{00CCFF}?????????? ????? ?????? ?????",
            "{FFFFFF}?? ????? ?????? ?????????? ???? ??? ?????? ??ù?????ù ??????",
            "??", "???");
    }
    else
    {
        Dialog(playerid, DIALOG_FAM_SPAWN_REMOVE, DIALOG_STYLE_MSGBOX,
            "{FF9900}??????? ????? ?????? ?????",
            "{FFFFFF}?? ????? ?????? ??????? ????? ??ù?????ù ??????",
            "??", "???");
    }
    return 1;
}

stock FinalizeSpawnState(playerid)
{
	// ?????
	if (GetPlayerData(playerid, P_MASK) >= 2)
	{
		SetPlayerColorInit(playerid);
		SetPlayerData(playerid, P_MASK, 0);
	}
	
	// ?????????
	if (GetPlayerData(playerid, P_HOSPITAL))
	{
		SetPlayerPosEx(playerid,
			1467.027832,
			2500.251464,
			2501.000000,
			269.929351,
			1, 1
		);
		
		SetPlayerHealth(playerid, 15);
	}



	// ??????ù ??????
	else if (GetPlayerData(playerid, P_JAIL))
	{
		new jail_pos = random(sizeof g_jail_positions);
		SetPlayerPosEx(playerid,
			g_jail_positions[jail_pos][0],
			g_jail_positions[jail_pos][1],
			g_jail_positions[jail_pos][2],
			g_jail_positions[jail_pos][3],
			1, 2
		);
	}

	// ????-??????
	else if (GetPlayerData(playerid, P_FJAIL) > 0)
	{
		new jail_pos = random(sizeof g_fjail_positions);
		SetPlayerPosEx(playerid,
			g_fjail_positions[jail_pos][0],
			g_fjail_positions[jail_pos][1],
			g_fjail_positions[jail_pos][2],
			g_fjail_positions[jail_pos][3],
			1,
			g_fjail_positions[jail_pos][4]
		);
		SetPlayerSkin(playerid, FSIN_SKIN_ID);
	}
	
	// ?????? ó ????????????, ??????????? ???
	else if (GetPlayerData(playerid, P_KARCER) == 1)
	{
		new pos = random(sizeof g_karcer_positions);
		new world = 98 + pos;

		SetPlayerVirtualWorld(playerid, world);
		SetPlayerPosEx(playerid,
			g_karcer_positions[pos][0],
			g_karcer_positions[pos][1],
			g_karcer_positions[pos][2],
			1,
			g_karcer_positions[pos][4]
		);
		SetPlayerFacingAngle(playerid, g_karcer_positions[pos][3]);
		SetPlayerInterior(playerid, 1);
		SetPlayerSkin(playerid, FSIN_SKIN_ID);
	}

	

	// ?????????? ó ?????? ?????????
	if (IsSpectating(playerid))
	{
		TogglePlayerSpectating(playerid, true);
		new target = GetPlayerSpectateData(playerid, S_PLAYER);

		if (IsPlayerConnected(target) && IsPlayerLogged(target))
		{
			if (IsPlayerInAnyVehicle(target))
				PlayerSpectateVehicle(playerid, GetPlayerVehicleID(target));
			else
				PlayerSpectatePlayer(playerid, target);
		}
	}
}

forward ShowSpawnDialogDelayed(playerid);
public ShowSpawnDialogDelayed(playerid)
{
	if(IsPlayerConnected(playerid) && IsPlayerLogged(playerid))
	{
		if(PSpawnLocate[playerid] >= 1)
		{
			printf("[SPAWN-DIALOG] ??????? ??????? ??ù ?????? %d (%s) - ???????? ??? ???????????: %d", playerid, GetPlayerNameEx(playerid), PSpawnLocate[playerid]);
			return 1;
		}
		
		TogglePlayerControllable(playerid, false);
		SetPlayerCameraPos(playerid, AUTH_CAMERA_POS);
		SetPlayerCameraLookAt(playerid, AUTH_CAMERA_LOOK);
		SetPlayerPos(playerid, -2793.46,1401.71,64.72,297.95);
		
		ShowSpawnSelectionDialog(playerid);
		
		printf("[SPAWN-DIALOG] ????? ??????? ??ù ?????? %d (%s)", playerid, GetPlayerNameEx(playerid));
		printf("[SPAWN-DIALOG] fam_id: %d, house_id: %d", GetPlayerIdFamily(playerid), GetFamily(GetPlayerIdFamily(playerid), family_house));
		printf("[SPAWN-DIALOG] team_id: %d", GetPlayerTeamEx(playerid));

	}
}

CMD:showspawnpoops(playerid)
{
printf("[DEBUG] fam_id: %d, house_id: %d", GetPlayerIdFamily(playerid), GetPlayerHouse(playerid, HOUSE_TYPE_HOME));
ShowSpawnDialogDelayed(playerid);
}

CMD:gpsme(playerid)
{
    new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);
    EnablePlayerGPS(playerid, x, y, z, "????? ?? ??????? ?????");
    return 1;
}

stock getTimestamp()
{
    new time[32];
    getdate(time[0], time[1], time[2]);
    gettime(time[3], time[4], time[5]);

    format(time, sizeof(time), "%04d-%02d-%02d %02d:%02d:%02d",
        time[0], time[1], time[2], time[3], time[4], time[5]);

    return time;
}

CMD:dismiss(playerid, params[])
{
	new targetid, reason[64];

	if(!IsWorkDayStarted(playerid)) return 1;

	if(sscanf(params, "us[64]", targetid, reason))
		return SendClientMessage(playerid, COLOR_GREY, "?????????????: /dismiss [ID ??????] [???????]");

	if(GetPlayerTeamEx(playerid) != TEAM_FBI || GetPlayerJob(playerid) < 9)
		return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ??????????? ??? ? 9 ?????.");

	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ?????? ??? ?? ???????????.");

	new target_team = GetPlayerTeamEx(targetid);
	if(target_team != TEAM_ARMY && target_team != TEAM_PPS && target_team != TEAM_DPS && target_team != TEAM_FSIN)
		return SendClientMessage(playerid, COLOR_GREY, "????? ??????? ?????????? ?????? ?? ??????????? ???, ?????, ????, ????ù.");

	if(GetPlayerJob(targetid) > 7)
		return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ??????? ?????? ??????????? ? ?????? 7 ? ????.");

	InvitePlayer(targetid, 0, 0, true);

	new fmt_msg[144];

	if(target_team == TEAM_FSIN)
	{
		format(fmt_msg, sizeof fmt_msg,
			"%s %s[%d] ?????? ?????????? ???? %s[%d] ?? ???????: %s",
			GetPlayerJobAndRankName(playerid),
			GetPlayerNameEx(playerid),
			playerid,
			GetPlayerNameEx(targetid),
			targetid,
			reason);

		SendMessageToPoliceTeam(fmt_msg, COLOR_GOLD);
		SendMessageToTeam(TEAM_FSIN, fmt_msg, COLOR_GOLD);
	}
	else
	{
		format(fmt_msg, sizeof fmt_msg,
			"%s %s[%d] ?????? ?????????? ?????????????????? ??????? %s[%d] ?? ???????: %s",
			GetPlayerJobAndRankName(playerid),
			GetPlayerNameEx(playerid),
			playerid,
			GetPlayerNameEx(targetid),
			targetid,
			reason);

		SendMessageToPoliceTeam(fmt_msg, COLOR_GOLD);
	}

	format(fmt_msg, sizeof fmt_msg,
		"%s ??? %s ?????? ??? ?? ??????????? ?? ???????: %s",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		reason);
	SendClientMessage(targetid, COLOR_GOLD, fmt_msg);

	format(fmt_msg, sizeof fmt_msg,
		"?? ??????? %s ?? ??????????? ?? ???????: %s",
		GetPlayerNameEx(targetid),
		reason);
	SendClientMessage(playerid, COLOR_GOLD, fmt_msg);

	return 1;
}

stock GenerateSkinDialog(playerid, org_id)
{
    new text[1024], fmt_str[64], old_skin = -1, count = 0;
    strcat(text, "{EB4C42}????? | {FFFFFF}ID ?????\t\t???\n");

    new skins[9];
    for (new i = 0; i < 9; i++)
        skins[i] = g_organization[org_id][O_SKINS][i];

    new last_male = -1, last_female = -1;

    for (new i = 0; i < 5; i++)
    {
        new skin = skins[i];
        if (skin == last_male) continue;
        last_male = skin;

        SetPlayerListitemValue(playerid, count, i);
        format(fmt_str, sizeof fmt_str, "{EB4C42}%d | {FFFFFF}%d\t\t{EB4C42}[ ??? ]\n", count + 1, skin);
        strcat(text, fmt_str);
        count++;
    }

    for (new i = 5; i < 9; i++)
    {
        new skin = skins[i];
        if (skin == last_female) continue;
        last_female = skin;

        SetPlayerListitemValue(playerid, count, i);
        format(fmt_str, sizeof fmt_str, "{EB4C42}%d | {FFFFFF}%d\t\t{00FF00}[ ??? ]\n", count + 1, skin);
        strcat(text, fmt_str);
        count++;
    }

    return text;
}

CMD:rc(playerid, params[])
{
    if (!(GetPlayerTeamEx(playerid) || GetPlayerJob(playerid)))
        return SendClientMessage(playerid, COLOR_GREY, "?? ????? ?? ?????????");

    if (IsPlayerMuted(playerid))
        return SendClientMessage(playerid, COLOR_GREY, "?????? ? ??? ????????????.");

    if (!strlen(params))
        return SendClientMessage(playerid, COLOR_GREY, "???????????: /rc [?????]");

    new rank_name[32];
    if (P_MASCIR[playerid])
        format(rank_name, sizeof rank_name, "%s", GetRankName(P_MASCIR[playerid], 5));
    else
        format(rank_name, sizeof rank_name, "%s", GetPlayerJobAndRankName(playerid));

    new fmt_msg[144];
    format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d]: %s", rank_name, GetPlayerNameEx(playerid), playerid, params);

    if (P_MASCIR[playerid])
        SendMessageToTeam(P_MASCIR[playerid], fmt_msg, 0x33CC66FF);
    else if (GetPlayerTeamEx(playerid))
        SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
    else
        SendMessageToJob(GetPlayerJob(playerid), fmt_msg);

    SetPlayerChatBubble(playerid, "??????(?) ???-?? ? ?????", 0xDD99FFAA, 10.0, 4000);
    return 1;
}

CMD:rnc(playerid, params[])
{
    if (!(GetPlayerTeamEx(playerid) || GetPlayerJob(playerid)))
        return SendClientMessage(playerid, COLOR_GREY, "?? ????? ?? ?????????");

    if (IsPlayerMuted(playerid))
        return SendClientMessage(playerid, COLOR_GREY, "?????? ? ??? ????????????.");

    if (!strlen(params))
        return SendClientMessage(playerid, COLOR_GREY, "???????????: /rnc [?????]");

    new rank_name[32];
    if (P_MASCIR[playerid])
        format(rank_name, sizeof rank_name, "%s", GetRankName(P_MASCIR[playerid], 5));
    else
        format(rank_name, sizeof rank_name, "%s", GetPlayerJobAndRankName(playerid));

    new fmt_msg[144];
    format(fmt_msg, sizeof fmt_msg, "(( [R] %s %s[%d]: %s ))", rank_name, GetPlayerNameEx(playerid), playerid, params);

    if (P_MASCIR[playerid])
        SendMessageToTeam(P_MASCIR[playerid], fmt_msg, 0x33CC66FF);
    else if (GetPlayerTeamEx(playerid))
        SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
    else
        SendMessageToJob(GetPlayerJob(playerid), fmt_msg);

    SetPlayerChatBubble(playerid, "??????(?) ???-?? ? ????? (OOC)", 0xDD99FFAA, 10.0, 4000);
    return 1;
}

stock GetRankName(org_id, rank)
{
	new fmt_rank[32];

	if (1 <= org_id <= 11 && 1 <= rank <= 10)
	{
		format(fmt_rank, sizeof fmt_rank, rank_names[org_id - 1][rank - 1]);
	}
	else
	{
		fmt_rank[0] = EOS;
	}

	return fmt_rank;
}

stock CheckGateAccess(playerid)
{
    new Float:px, Float:py, Float:pz;
    GetPlayerPos(playerid, px, py, pz);

    // FSIN ??????
    if(IsPlayerInRangeOfPoint(playerid, MAX_GATE_DISTANCE, -1820.64, -2651.21, 7.62))
    {
        if(gateOpened[0]) return SendClientMessage(playerid, COLOR_GREY, "?????? ??? ???????!");
        if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ??????????? ????");
        if(!(4 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, COLOR_GREY, "?????? ????? ????????? ?????? ? 4-?? ?????!");

        gateOpened[0] = true;
        MoveObject(vorotki, -1828.0, -2652.7, 10.9, 3.0, 0.0, 0.0, 99.5);
        SendClientMessage(playerid, COLOR_GREY, "?????? ????????ù ????????????? ????? 5 ??????.");
        SetTimerEx("CloseGate", 6500, false, "i", 0);
        return 1;
    }

    // FSIN ??????? ??????
    if(IsPlayerInRangeOfPoint(playerid, MAX_GATE_DISTANCE, -1823.70, -2633.14, 7.62))
    {
        if(gateOpened[1] || gateOpened[2]) return SendClientMessage(playerid, COLOR_GREY, "?????? ??? ???????!");
        if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ??????????? ????");
        if(!(4 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, COLOR_GREY, "?????? ????? ????????? ?????? ? 4-?? ?????!");

        gateOpened[1] = true;
        gateOpened[2] = true;
        MoveObject(vorotafsinkpp, -1820.11, -2632.95, 8.58, 3.0, 0.0, 0.0, 3.0);
        MoveObject(vorotafsinkpp1, -1827.21, -2634.129, 8.61, 3.0, 0.0, 0.0, 15.0);
        SendClientMessage(playerid, COLOR_GREY, "?????? ????????ù ????????????? ????? 5 ??????.");
        SetTimerEx("CloseGate", 6500, false, "i", 1);
        SetTimerEx("CloseGate", 6500, false, "i", 2);
        return 1;
    }

    // ????ù ????????
    if(IsPlayerInRangeOfPoint(playerid, MAX_GATE_DISTANCE, 1910.21, 1722.28, 16.04))
    {
        if(gateOpened[3]) return SendClientMessage(playerid, COLOR_GREY, "???????? ??? ????ù?!");
        if(GetPlayerTeamEx(playerid) != TEAM_ARMY) return SendClientMessage(playerid, COLOR_GREY, "?? ?? ??????? ? ?????!");
        if(!(3 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, COLOR_GREY, "?????? ????? ????????? ?????? ? 3-?? ?????!");

        gateOpened[3] = true;
        MoveObject(vorotamo1, 1909.95, 1725.28, 15.6666, 3.0, -90.0, 0.0, 0.0);
      
    	new fmt_msg[144];
     
        format(fmt_msg, sizeof fmt_msg, "[R] %s %s ?????? ???????? ?? ?????????? ?????????? ??????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
      
        SendClientMessage(playerid, COLOR_GREY, "???????? ????????ù ????????????? ????? 5 ??????.");
        SetTimerEx("CloseGate", 6500, false, "i", 3);
        return 1;
    }

    // ????ù ???
    if(IsPlayerInRangeOfPoint(playerid, MAX_GATE_DISTANCE, 1891.1486, 1722.2531, 15.9780))
    {
        if(gateOpened[4]) return SendClientMessage(playerid, COLOR_GREY, "?????? ??? ???????!");
        if(GetPlayerTeamEx(playerid) != TEAM_ARMY) return SendClientMessage(playerid, COLOR_GREY, "?? ?? ??????? ? ?????!");
        if(!(3 <= GetPlayerJob(playerid) <= 10)) return SendClientMessage(playerid, COLOR_GREY, "?????? ????? ????????? ?????? ? 3-?? ?????!");

        gateOpened[4] = true;
        MoveObject(vorotamo, 1891.1486, 1714.2531, 16.4444, 3.0);
      
    	new fmt_msg[144];
     
        format(fmt_msg, sizeof fmt_msg, "[R] %s %s ?????? ?????? ?? ?????????? ?????????? ??????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
      
        SendClientMessage(playerid, COLOR_GREY, "?????? ????????ù ????????????? ????? 5 ??????.");
        SetTimerEx("CloseGate", 6500, false, "i", 4);
        return 1;
    }
    // ??? ????????
		if(IsPlayerInRangeOfPoint(playerid, MAX_GATE_DISTANCE, 2580.29, -2436.55, 21.84))
		{
  		 if(gateOpened[5]) return SendClientMessage(playerid, COLOR_GREY, "???????? ??? ????ù?!");

		   new team = GetPlayerTeamEx(playerid);
 		  if(team != TEAM_DPS && team != TEAM_PPS && team != TEAM_FBI && team != TEAM_ARMY && team != TEAM_FSIN)
   		    return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ????????.");

 		  gateOpened[5] = true;
  		 MoveObject(barrier1, 2579.94, -2434.11, 21.79, 3.0, -90.0, 0.0, 0.0);
 		  SendClientMessage(playerid, COLOR_GREY, "???????? ????????ù ????????????? ????? 5 ??????.");
		   SetTimerEx("CloseGate", 6500, false, "i", 5);
		
		   if(GetPlayerTeamEx(playerid) == TEAM_ARMY)
			{
			new fmt_msg[144];
     
      	 format(fmt_msg, sizeof fmt_msg, "[R] %s %s ?????? ???????? ? ??????????? ????", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
			} 
		
		   return 1;
		}
		// ??? ????????
		if(IsPlayerInRangeOfPoint(playerid, MAX_GATE_DISTANCE, -2348.21,-380.68,29.43))
		{
  		 if(gateOpened[6]) return SendClientMessage(playerid, COLOR_GREY, "???????? ??? ????ù?!");

 		  new team = GetPlayerTeamEx(playerid);
 		  if(team != TEAM_DPS && team != TEAM_PPS && team != TEAM_FBI && team != TEAM_ARMY && team != TEAM_FSIN)
  		     return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ????????.");

   		gateOpened[6] = true;
 		  MoveObject(barrier2, -2345.66, -381.10, 29.06, 4.0, -90.0, 0.0, 90.0);
		   SendClientMessage(playerid, COLOR_GREY, "???????? ????????ù ????????????? ????? 5 ??????.");
		   SetTimerEx("CloseGate", 6500, false, "i", 6);
		
		   if(GetPlayerTeamEx(playerid) == TEAM_ARMY)
			{
			new fmt_msg[144];
     
      	 format(fmt_msg, sizeof fmt_msg, "[R] %s %s ?????? ???????? ? ??????????? ???", GetPlayerJobAndRankName(playerid), GetPlayerNameEx(playerid));

				if(!GetPlayerTeamEx(playerid))
					SendMessageToJob(GetPlayerJob(playerid), fmt_msg), SendClientMessage(playerid,-1,"????????");//	SendMessageToJob(GetPlayerJob(playerid), fmt_msg, 0x33CC66FF, _, true);
				else
				    SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
			} 
		
		    return 1;
		}
}

forward CloseGate(gateid);
public CloseGate(gateid)
{
    switch(gateid)
    {
        case 0: // vorotki
        {
            MoveObject(vorotki, -1820.49, -2651.36, 10.9, 3.0, 0.0, 0.0, 99.5);
            gateOpened[0] = false;
            return 1;
        }

        case 1: // vorotafsinkpp
        {
            MoveObject(vorotafsinkpp, -1820.11, -2632.95, 8.58, 3.0, 0.0, 0.0, -80.5);
            gateOpened[1] = false;
            return 1;
        }

        case 2: // vorotafsinkpp1
        {
            MoveObject(vorotafsinkpp1, -1827.21, -2634.129, 8.61, 3.0, 0.0, 0.0, 99.4);
            gateOpened[2] = false;
            return 1;
        }

        case 3: // vorotamo1
        {
            MoveObject(vorotamo1, 1909.95, 1725.28, 15.6666, 3.0, 0.0, 0.0, 0.0);
            gateOpened[3] = false;
            return 1;
        }

        case 4: // vorotamo
        {
            MoveObject(vorotamo, 1891.1486, 1721.5555, 16.4444, 3.0, 0.0, 0.0, 0.0);
            gateOpened[4] = false;
            return 1;
        }
        case 5: // barrier1 ???
		{
 		  MoveObject(barrier1, 2579.94, -2434.11, 21.79, 3.0, 0.0, 0.0, 0.0);
  		 gateOpened[5] = false;
		   return 1;
		}
		case 6: // barrier2 ???
		{
  		 MoveObject(barrier2, -2345.66, -381.10, 29.06, 4.0, -180.0, 0.0, 90.0);
 		  gateOpened[6] = false;
 		  return 1;
		}
    }
    return 1;
}

stock ShowArmyKPPDialog(playerid)
{
    new status_barrier[32], status_gate[32];
    new action_barrier[32], action_gate[32];
    new dialog[512];

    format(status_barrier, sizeof status_barrier, gateOpened[3] ? "{00FF00}??????" : "{FF5555}??????");
    format(status_gate, sizeof status_gate, gateOpened[4] ? "{00FF00}???????" : "{FF5555}???????");

    format(action_barrier, sizeof action_barrier, gateOpened[3] ? "{FF5555}???????ù" : "{FF5555}???????ù");
    format(action_gate, sizeof action_gate, gateOpened[4] ? "{FF5555}???????ù" : "{FF5555}???????ù");
    
    strcat(dialog, "{FF5555}?????\t{FF5555}????????????\t{FF5555}??????\t{FF5555}????????? ????????\n");

    new line1[128], line2[128];
    format(line1, sizeof line1, "{FFFFFF}1.\t????????\t%s\t{FF5555}??????? ??ù %s\n", status_barrier, action_barrier);
    format(line2, sizeof line2, "{FFFFFF}2.\t??????\t%s\t{FF5555}??????? ??ù %s", status_gate, action_gate);

    strcat(dialog, line1);
    strcat(dialog, line2);

    ShowPlayerDialog(playerid, DIALOG_KPP_ARMY, DIALOG_STYLE_TABLIST_HEADERS, "{FF5555}Baze Russia RolePlay{FFFFFF} | ?????????? ???", dialog, "???????", "???????");
}

stock StartKPPHack(playerid)
{
    if(!IsPlayerInRangeOfPoint(playerid, 5.0, 1910.61, 1728.09, 16.73))
        return SendClientMessage(playerid, COLOR_GREY, "?? ??????? ?????? ?? ???.");

    SetPVarInt(playerid, "KPPHackProgress", 0);
    kpp_hack_timer = SetTimerEx("KPPHackProgress", 1000, true, "d", playerid);
}

forward KPPHackProgress(playerid);
public KPPHackProgress(playerid)
{
    if(!IsPlayerInRangeOfPoint(playerid, 5.0, 1910.61, 1728.09, 16.73))
    {
        KillTimer(kpp_hack_timer);
        kpp_hack_timer = -1;
        SendClientMessage(playerid, COLOR_GREY, "????? ???????. ?? ???????? ????.");
        return;
    }

    new progress = GetPVarInt(playerid, "KPPHackProgress");
    progress += 10;
    SetPVarInt(playerid, "KPPHackProgress", progress);

    new msg[64];
    format(msg, sizeof msg, "????? ???: %d", progress);
	strcat(msg, "%%"); // ??????ù?? ???? ???????? ???????
    SendClientMessage(playerid, COLOR_RADIO, msg);

    if(progress >= 100)
    {
        KillTimer(kpp_hack_timer);
        kpp_hack_timer = -1;
        kpp_hacked = true;
        gateOpened[3] = true;
        gateOpened[4] = true;

        MoveObject(vorotamo, 1891.1486, 1714.2531, 16.4444, 3.0);
        MoveObject(vorotamo1, 1909.95, 1725.28, 15.6666, 3.0, -90.0, 0.0, 0.0);

        SendClientMessage(playerid, COLOR_GREY, "??? ????? ???????! ?????? ? ???????? ??????? ?? 10 ?????.");
        SendMessageToTeam(TEAM_ARMY, "[R] ??? ???????, ???-?? ????????ù ?? ?????????? ???????? ?????! ", COLOR_RADIO);
        SetTimer("ResetKPPHack", 600000, false);
    }
}

public ResetKPPHack()
{
    kpp_hacked = false;
    gateOpened[3] = false;
    gateOpened[4] = false;

    MoveObject(vorotamo, 1891.1486, 1721.5555, 16.4444, 3.0, 0.0, 0.0, 0.0);
    MoveObject(vorotamo1, 1909.95, 1725.28, 15.6666, 3.0, 0.0, 0.0, 0.0);

    SendClientMessageToAll(COLOR_GREY, "??? ????? ????????????. ?????????? ????? ????????.");
    SendMessageToTeam(TEAM_ARMY, "[R] ??????? ??? ?????????????, ?????? ? ???????? ???????. ", COLOR_RADIO);
}

CMD:lsklad(playerid)
{
	if (GetPlayerJob(playerid) < 9)
		return SendClientMessage(playerid, -1, "????????????? ????.");

	new idx = GetNearestArmory(playerid);
	if (idx == -1)
		return SendClientMessage(playerid, -1, "?? ?? ?ù??? ?? ???????.");

	switch (g_armory[idx][A_TYPE])
	{
		case ARMORY_TYPE_ARMOR:
		{
			if (GetPlayerTeamEx(playerid) != TEAM_ARMY)
				return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ?? 9 ????? ?????.");
		}
		case ARMORY_TYPE_FSIN:
		{
			if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
				return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ?? 9 ????? ????.");
		}
		case ARMORY_TYPE_SECURITY:
		{
			if (GetPlayerTeamEx(playerid) != TEAM_GOVERNMENT)
				return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ?? 9 ????? ?????????????.");
		}
		case ARMORY_TYPE_POLICE:
		{
			new team = GetPlayerTeamEx(playerid);
			if (team != TEAM_DPS && team != TEAM_PPS)
				return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ?? 9 ????? ????/?????.");
		}
		case ARMORY_TYPE_FSB:
		{
			new team = GetPlayerTeamEx(playerid);
			if (team != TEAM_FBI)
				return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ?? 9 ????? ???.");
		}
		default:
		{
			return SendClientMessage(playerid, -1, "ù?? ?????? ?? ?????????.");
		}
	}

	// ?????? ????? ????????????ù
	g_armory[idx][A_IS_OPEN] = !g_armory[idx][A_IS_OPEN];
	UpdateArmoryLabel(idx);

	SendClientMessage(playerid, -1, g_armory[idx][A_IS_OPEN] ? "?? ??????? ?????." : "?? ??????? ?????.");
	return 1;
}

CMD:addmaterials(playerid, params[])
{
	new amount;
	if (sscanf(params, "d", amount))
		return SendClientMessage(playerid, -1, "?????????: /addmaterials [???-??]");

	new idx = GetNearestArmory(playerid);
	if (idx == -1) return SendClientMessage(playerid, -1, "?? ?? ?ù??? ?? ???????.");

	g_armory[idx][A_MATERIALS] += amount;
	if (g_armory[idx][A_MATERIALS] > 100000) g_armory[idx][A_MATERIALS] = 100000;

	UpdateArmoryDatabaseInt(idx, "materials", g_armory[idx][A_MATERIALS]);

	UpdateArmoryLabel(idx);
	SendClientMessage(playerid, -1, "????????? ?????????.");
	return 1;
}

stock UpdateArmoryLabel(idx)
{
	if (g_armory[idx][A_LABEL] == 0) return;

	new label[256];
	new status[32];

	if (g_armory[idx][A_IS_OPEN])
		format(status, sizeof(status), "{00FF00}??????");
	else
		format(status, sizeof(status), "{FF0000}??????");

	format(label, sizeof(label),
		"{FFFF00} << ????????? ????? >>\n\n\
		{FFFF00}|{FFFFFF} ?????ù???{FFFF00}: %d {FFFFFF} ?? {FFFF00} 100000\n\
		{FFFF00}|{FFFFFF} ??????{FFFF00}: ????? %s",
		g_armory[idx][A_MATERIALS],
		status);

	UpdateDynamic3DTextLabelText(g_armory[idx][A_LABEL], 0xFFD700FF, label);

    UpdateArmoryZagruzkaLabel();
}

stock GetNearestArmory(playerid)
{
	new Float:x, Float:y, Float:z;
	GetPlayerPos(playerid, x, y, z);

	for (new i = 0; i < sizeof g_armory; i++)
	{
		if (IsPlayerInRangeOfPoint(playerid, 5.0, g_armory[i][A_POS_X], g_armory[i][A_POS_Y], g_armory[i][A_POS_Z]))
			return i;
	}
	return -1;
}

forward StartCarryAnimation(playerid);
public StartCarryAnimation(playerid)
{
    ApplyAnimation(playerid, "CARRY", "crry_prtial", 4.1, 1, 1, 1, 1, 1, 0);
    return 1;
}

CMD:adelivery(playerid)
{
    if (GetPlayerTeamEx(playerid) != TEAM_ARMY)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ???????? ?????.");
       
    if(!IsWorkDayStarted(playerid)) return 1;

    new vehicleid = GetPlayerVehicleID(playerid);
    if (vehicleid == INVALID_VEHICLE_ID || GetVehicleModel(vehicleid) != VEHICLE_MODEL_SUPPLY_TRUCK)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ?????????ù ? ?????????? {FFFF00}????? 54115.");

    if (g_delivery_vehicle[vehicleid])
    {
        Dialog(playerid, DIALOG_ADELIVERY_CONFIRM, DIALOG_STYLE_MSGBOX,
            "{FF6666}Baze Russia RolePlay {FFFFFF}| ???????? ??? ???????",
            "{FFFFFF}? ??? ??? ???? ???????ù ???????? ??????????.\n?? ????????????? ?????? ????????? ??????? ?????????",
            "??", "???");
        return 1;
    }

    new dialog[4096], buffer[256];
    strcat(dialog, "{FF6666}#?????\t{FF6666}????????????\t{FF6666}?????ù??? ??????\t{FF6666}????????? ????????\n");

    format(buffer, sizeof(buffer),
        "{FF6666}#1\t{FFFFFF}???????? ?????????? ? ??????? ?????\t{FFFF00} %d {FFFFFF}?? {FFFF00}100000\t{FF6666}???????, ????? ?????? ????????\n",
        g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS]); strcat(dialog, buffer);

    format(buffer, sizeof(buffer),
        "{FF6666}#2\t{FFFFFF}???????? ?????????? ? ???\t{FFFF00} %d {FFFFFF}?? {FFFF00}100000\t{FF6666}???????, ????? ?????? ????????\n",
        g_armory[ARMORY_TYPE_FSB][A_MATERIALS]); strcat(dialog, buffer);

    format(buffer, sizeof(buffer),
        "{FF6666}#3\t{FFFFFF}???????? ?????????? ? ???????\t{FFFF00} %d {FFFFFF}?? {FFFF00}100000\t{FF6666}???????, ????? ?????? ????????\n",
        g_armory[ARMORY_TYPE_POLICE][A_MATERIALS]); strcat(dialog, buffer);

    format(buffer, sizeof(buffer),
        "{FF6666}#4\t{FFFFFF}???????? ?????????? ? ?????????????\t{FFFF00} %d {FFFFFF}?? {FFFF00}100000\t{FF6666}???????, ????? ?????? ????????\n",
        g_armory[ARMORY_TYPE_SECURITY][A_MATERIALS]); strcat(dialog, buffer);

    format(buffer, sizeof(buffer),
        "{FF6666}#5\t{FFFFFF}???????? ?????????? ? ????\t{FFFF00} %d {FFFFFF}?? {FFFF00}100000\t{FF6666}???????, ????? ?????? ????????",
        g_armory[ARMORY_TYPE_FSIN][A_MATERIALS]); strcat(dialog, buffer);

    Dialog(playerid, DIALOG_ADELIVERY_SELECT, DIALOG_STYLE_TABLIST_HEADERS,
        "{FF6666}Baze Russia RolePlay {FFFFFF}| ?????????", dialog, "???????", "?????");

    return 1;
}

stock CreateDeliveryVehicleLabel(vehicleid, target_type)
{
    if (!IsValidVehicle(vehicleid)) return;

    new label[256], org_name[64];

    switch (target_type)
    {
        case ARMORY_TYPE_ARMOR:        org_name = "{FFFF00}\"??????ù ?????\"";
        case ARMORY_TYPE_FSB:          org_name = "{FFFF00}\"???\"";
        case ARMORY_TYPE_POLICE:       org_name = "{FFFF00}\"??????ù\"";
        case ARMORY_TYPE_SECURITY:     org_name = "{FFFF00}\"?????????????\"";
        case ARMORY_TYPE_FSIN:         org_name = "{FFFF00}\"????\"";
        default:                       org_name = "{FF0000}\"??????????\"";
    }

    format(label, sizeof(label),
        "{FFFF00}<<{FFFFFF}???????? ??????????{FFFF00}>>\n\n\
| {FFFFFF}??????????{FFFF00}: %s\n\
{FFFF00}| {FFFFFF}????????? ù????? ? ???????????{FFFF00}: 0 {FFFFFF}?? {FFFF00}10",
        org_name);

    CreateVehicleLabel(vehicleid, label, 0xFFD700FF, 0.0, 0.0, 2.8, 20.0);
}

stock UpdateDeliveryLabel(vehicleid, target_type)
{
    if (!IsValidVehicle(vehicleid)) return;

    new label[256], org_name[64];

    switch (target_type)
    {
        case ARMORY_TYPE_ARMOR:        org_name = "{FFFF00}\"??????ù ?????\"";
        case ARMORY_TYPE_FSB:          org_name = "{FFFF00}\"???\"";
        case ARMORY_TYPE_POLICE:       org_name = "{FFFF00}\"??????ù\"";
        case ARMORY_TYPE_SECURITY:     org_name = "{FFFF00}\"?????????????\"";
        case ARMORY_TYPE_FSIN:         org_name = "{FFFF00}\"????\"";
        default:                       org_name = "{FF0000}\"??????????\"";
    }

    format(label, sizeof(label),
        "{FFFF00}<<{FFFFFF}???????? ??????????{FFFF00}>>\n\n\
| {FFFFFF}??????????{FFFF00}: %s\n\
{FFFF00}| {FFFFFF}????????? ù????? ? ???????????{FFFF00}: %d {FFFFFF}?? {FFFF00}10",
        org_name, g_delivery_boxes[vehicleid]);

    UpdateVehicleLabel(vehicleid, 0xFFD700FF, label);
}

stock AbortDeliveryByVehicle(vehicleid)
{
    if (!IsValidVehicle(vehicleid)) return;
    if (!g_delivery_vehicle[vehicleid]) return;
    if (GetVehicleModel(vehicleid) != VEHICLE_MODEL_SUPPLY_TRUCK) return;

    DestroyVehicleLabel(vehicleid);

    if (g_delivery_load_pickup[vehicleid] != -1)
    {
        DestroyDynamicPickup(g_delivery_load_pickup[vehicleid]);
        g_delivery_load_pickup[vehicleid] = -1;
    }

    if (g_delivery_load_area[vehicleid] != -1)
    {
        DestroyDynamicArea(g_delivery_load_area[vehicleid]);
        g_delivery_load_area[vehicleid] = -1;
    }

    if (g_delivery_unload_pickup[vehicleid] != -1)
    {
        DestroyDynamicPickup(g_delivery_unload_pickup[vehicleid]);
        g_delivery_unload_pickup[vehicleid] = -1;
    }

    if (g_delivery_unload_area[vehicleid] != -1)
    {
        DestroyDynamicArea(g_delivery_unload_area[vehicleid]);
        g_delivery_unload_area[vehicleid] = -1;
    }

    g_delivery_vehicle[vehicleid] = false;
    g_delivery_boxes[vehicleid] = 0;
    g_delivery_target[vehicleid] = -1;
    g_delivery_target_name[vehicleid][0] = EOS;

}

stock DestroyDeliveryVehicle(vehicleid)
{
    AbortDeliveryByVehicle(vehicleid);
    DestroyVehicle(vehicleid);
}

stock ArmoryZagruzkaLabel()
{
    g_armory_zagruzka_label = CreateDynamic3DTextLabel(
        "", 0xFFD700FF,
        1584.39, 1636.23, 18.10, // Z + 0.5
        10.0,
        .streamdistance = 20.0
    );

    UpdateArmoryZagruzkaLabel();
}

stock UpdateArmoryZagruzkaLabel()
{
    if (g_armory_zagruzka_label == 0) return;

    new label[256], status[32];

    if (g_armory[ARMORY_TYPE_ARMOR][A_IS_OPEN])
        format(status, sizeof(status), "{00FF00}??????");
    else
        format(status, sizeof(status), "{FF0000}??????");

    format(label, sizeof(label),
        "{FFFF00}<<????????? ?????>>\n\n\
{FFFF00}|{FFFFFF} ??????????: {FFFF00}%d {FFFFFF}?? {FFFF00}100000\n\
{FFFF00}|{FFFFFF} ??????: ????? %s",
        g_armory[ARMORY_TYPE_ARMOR][A_MATERIALS],
        status);

    UpdateDynamic3DTextLabelText(g_armory_zagruzka_label, 0xFFD700FF, label);
}

forward StopPlayerAnimation(playerid);
public StopPlayerAnimation(playerid)
{
    ClearAnimations(playerid);
    return 1;
}

CMD:loadboxes(playerid)
{
    if (GetPlayerTeamEx(playerid) != TEAM_ARMY)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ???????? ?????.");
       
    if(!IsWorkDayStarted(playerid)) return 1;

    new vehicleid = GetPlayerVehicleID(playerid);
    if (vehicleid == INVALID_VEHICLE_ID || GetVehicleModel(vehicleid) != VEHICLE_MODEL_SUPPLY_TRUCK)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ?????????ù ? ?????????? ????? 54115.");

    new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);

    new bool:near_yuzhny = IsPlayerInRangeOfPoint(playerid, 40.0, 1902.11, -1950.09, 32.01);
    new bool:near_armory = IsPlayerInRangeOfPoint(playerid, 40.0, 1576.12, 1648.28, 16.0);

    if (!near_yuzhny && !near_armory)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ?????????ù ?ù??? ?? ??????? ??ù ?????? ????????.");

    new target_type = g_delivery_target[vehicleid];

    if (target_type == ARMORY_TYPE_ARMOR && near_armory)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ? ??????? ????? ?? ?? ?????? ?????????.");

    if (target_type != ARMORY_TYPE_ARMOR && near_yuzhny)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ?? ?????? ?????? ???????? ?????? ??ù ???????? ? ??????? ?????.");

    RemovePlayerFromVehicle(playerid);
    SendClientMessage(playerid, -1, "?? ?????? ????????, ???????ù????? ?? ù?????? ?? ?????.");

    new Float:veh_x, Float:veh_y, Float:veh_z, Float:veh_angle;
    GetVehiclePos(vehicleid, veh_x, veh_y, veh_z);
    GetVehicleZAngle(vehicleid, veh_angle);

    new Float:offset_x = floatcos(veh_angle - 90.0, degrees) * 5.5;
	new Float:offset_y = floatsin(veh_angle - 90.0, degrees) * 5.5;

    new Float:pickup_x = veh_x + offset_x;
    new Float:pickup_y = veh_y + offset_y;
    new Float:pickup_z = veh_z;

    g_delivery_load_pickup[vehicleid] = CreateDynamicPickup(
        2969, 23,
        pickup_x, pickup_y, pickup_z,
        -1, -1, -1, 20.0
    );

    g_delivery_load_area[vehicleid] = CreateDynamicSphere(
        pickup_x, pickup_y, pickup_z,
        1.5, -1, -1, -1
    );

    return 1;
}

CMD:unloadboxes(playerid)
{
    if (GetPlayerTeamEx(playerid) != TEAM_ARMY)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ???????? ?????.");
       
    if(!IsWorkDayStarted(playerid)) return 1;

    new vehicleid = GetPlayerVehicleID(playerid);
    if (vehicleid == INVALID_VEHICLE_ID || GetVehicleModel(vehicleid) != VEHICLE_MODEL_SUPPLY_TRUCK)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ?????????ù ? ?????????? ????? 54115.");

    new target_type = g_delivery_target[vehicleid];
    if (target_type == -1)
        return SendClientMessage(playerid, COLOR_GREY, "? ????? ?????????? ??? ???????? ????????.");

    if (g_delivery_boxes[vehicleid] < 10)
        return SendClientMessage(playerid, COLOR_GREY, "?????????? ?????? ?????????: ? ???? ?????? ???? ??????? 10 ù?????.");

    new bool:near_target = false;

    switch (target_type)
    {
        case ARMORY_TYPE_ARMOR:       near_target = IsPlayerInRangeOfPoint(playerid, 40.0, 1632.62, 1770.57, 16.01);
        case ARMORY_TYPE_FSB:         near_target = IsPlayerInRangeOfPoint(playerid, 40.0, -2353.47, -426.17, 29.44);
        case ARMORY_TYPE_SECURITY:    near_target = IsPlayerInRangeOfPoint(playerid, 60.0, -2594.04, 2261.85, 58.2);
        case ARMORY_TYPE_POLICE:      near_target = IsPlayerInRangeOfPoint(playerid, 40.0, 2563.22, -2436.47, 21.84);
        case ARMORY_TYPE_FSIN:        near_target = IsPlayerInRangeOfPoint(playerid, 60.0, -1863.95, -2746.14, 7.62);
    }

    if (!near_target)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ?????????ù ?ù??? ? ????? ?????? ?????????.");

    RemovePlayerFromVehicle(playerid);
    SendClientMessage(playerid, -1, "?? ?????? ?????????, ????????? ? ???? ??ù ????????ù ù????.");

    new Float:veh_x, Float:veh_y, Float:veh_z, Float:veh_angle;
    GetVehiclePos(vehicleid, veh_x, veh_y, veh_z);
    GetVehicleZAngle(vehicleid, veh_angle);

    new Float:offset_x = floatcos(veh_angle - 90.0, degrees) * 5.5;
	new Float:offset_y = floatsin(veh_angle - 90.0, degrees) * 5.5;

    new Float:pickup_x = veh_x + offset_x;
    new Float:pickup_y = veh_y + offset_y;
    new Float:pickup_z = veh_z;

    g_delivery_unload_pickup[vehicleid] = CreateDynamicPickup(
        2969, 23,
        pickup_x, pickup_y, pickup_z,
        -1, -1, -1, 20.0
    );

    g_delivery_unload_area[vehicleid] = CreateDynamicSphere(
        pickup_x, pickup_y, pickup_z,
        1.5, -1, -1, -1
    );

    return 1;
}

forward TimerCallAdelivery(playerid);
public TimerCallAdelivery(playerid)
{
    if (!IsPlayerConnected(playerid)) return;

    callcmd::adelivery(playerid, "");
}

public OnWhitelistCheck(playerid)
{
    if (!IsPlayerConnected(playerid)) return 1;
    if (!gWhitelist) return 1;

    new name[MAX_PLAYER_NAME];
    GetPlayerName(playerid, name, sizeof(name));

    if (cache_num_rows())
    {
        SCM(playerid, -1, "{00FF00}[WHITELIST] {FFFFFF}?? ? ?????? ???????. ?????? ????????.");
        printf("[DEBUG] %s ?????? ????????. ??????.", name);
        ContinuePlayerConnect(playerid);
    }
    else
    {
        SCM(playerid, -1, "{FF0000}[WHITELIST] {FFFFFF}?? ?? ? ?????? ???????. ??????????? ????? ?????????.");
		//SCM(playerid, -1, "{FFFFFF}???????? ??????? ó {00FF00}01.08.2025 ? 12:00 ?? ???. {FFFFFF}???????????: {00BFFF}t.me/l4ird");
        printf("[DEBUG] %s ?? ?????? ? ?????????. ????? ????? ??????.", name);
        SetTimerEx("KickPlayerDelayed", 1000, false, "i", playerid); // ???????? 1 ???????
    }
    return 1;
}

forward KickPlayerDelayed(playerid);
public KickPlayerDelayed(playerid)
{
    if (IsPlayerConnected(playerid))
    {
        new name[MAX_PLAYER_NAME];
        GetPlayerName(playerid, name, sizeof(name));
        printf("[DEBUG] Kick: %s ??? ?????? ??-?? ?????????ù ? ?????????.", name);
        Kick(playerid);
    }
    return 1;
}

CMD:whitelist(playerid, params[])
{
    if (GetPlayerAdminEx(playerid) < 7)
        return SendClientMessage(playerid, 0xFF0000FF, "? ??? ??? ??????? ? ???? ???????.");

    new subcmd[32], name[MAX_PLAYER_NAME];
    if (sscanf(params, "s[32]S()[24]", subcmd, name))
    {
        SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /whitelist [on/off/add/remove] [??? (??ù add/remove)]");
        return 1;
    }

    if (!strcmp(subcmd, "on", true))
    {
        gWhitelist = true;
        SendClientMessage(playerid, 0x00FF00FF, ""SC"???????? ???????.");
        printf("[WHITELIST] ???????? ??????? ??????????????? %s", GetPlayerNameEx(playerid));
        
        new announce[128];
        format(announce, sizeof(announce), "????????????? %s ??????? ????????", GetPlayerNameEx(playerid));
        SendClientMessageToAll(0x3399FFFF, announce);
    }
    else if (!strcmp(subcmd, "off", true))
    {
        gWhitelist = false;
        SendClientMessage(playerid, 0xFFFF00FF, ""SC"???????? ????????.");
        printf("[WHITELIST] ???????? ???????? ??????????????? %s", GetPlayerNameEx(playerid));
        
        new announce[128];
        format(announce, sizeof(announce), "????????????? %s ???????? ????????", GetPlayerNameEx(playerid));
        SendClientMessageToAll(0x3399FFFF, announce);
    }
    else if (!strcmp(subcmd, "add", true))
    {
        if (!name[0])
            return SendClientMessage(playerid, 0xCECECEFF, ""SC"??????? ???: /whitelist add [???]");

        new query[128];
        mysql_format(mysql, query, sizeof(query), "INSERT IGNORE INTO whitelist (name) VALUES ('%e')", name);
        mysql_tquery(mysql, query, "", "");

        new msg[128];
        format(msg, sizeof(msg), ""SC"????? %s ???????? ? ????????.", name);
        SendClientMessage(playerid, 0x00FF00FF, msg);
        printf("[WHITELIST] ????? %s ??????? %s ? ????????.", GetPlayerNameEx(playerid), name);
        
        new announce[128];
        format(announce, sizeof(announce), "????????????? %s ??????? ?????? %s ? ????????", GetPlayerNameEx(playerid), name);
        SendClientMessageToAll(0x3399FFFF, announce);
    }
    else if (!strcmp(subcmd, "remove", true))
    {
        if (!name[0])
            return SendClientMessage(playerid, 0xCECECEFF, ""SC"??????? ???: /whitelist remove [???]");

        new query[128];
        mysql_format(mysql, query, sizeof(query), "DELETE FROM whitelist WHERE name='%e'", name);
        mysql_tquery(mysql, query, "", "");

        new msg[128];
        format(msg, sizeof(msg), ""SC"????? %s ?????? ?? ?????????.", name);
        SendClientMessage(playerid, 0xFFFF00FF, msg);
        printf("[WHITELIST] ????? %s ?????? %s ?? ?????????.", GetPlayerNameEx(playerid), name);
        
        new announce[128];
        format(announce, sizeof(announce), "????????????? %s ?????? ?????? %s ?? ?????????", GetPlayerNameEx(playerid), name);
        SendClientMessageToAll(0x3399FFFF, announce);
    }
    else
    {
        SendClientMessage(playerid, 0xCECECEFF, ""SC"???????????: /whitelist [on/off/add/remove] [???]");
    }

    return 1;
}

stock ContinuePlayerConnect(playerid)
{
    LoadPlayerTextDrawBJ(playerid);

    if(GetPlayerLevel(playerid) == 0)
    {
        new query[64];
        SetPlayerData(playerid, P_LEVEL, 1);
        format(query, sizeof query, "UPDATE accounts SET level=1 WHERE id=%d LIMIT 1", GetPlayerAccountID(playerid));
        mysql_query(mysql, query, false);
        UpdatePlayerDatabaseInt(playerid, "level", 1);
    }

    TogglePlayerAllDynamicCPs(playerid, false);

    if (SvGetVersion(playerid) == SV_NULL)
    {
        SendClientMessage(playerid, -1, "{D3D3D3}?????????? ? Baze Russia RP");
        SendClientMessage(playerid, -1, "{D3D3D3}?????????. ?????????? ? ????...");
    }
    else if (SvHasMicro(playerid) == SV_FALSE)
    {
        SendClientMessage(playerid, -1, "The microphone could not be found.");
    }
    else if ((lstream[playerid] = SvCreateDLStreamAtPlayer(40.0, SV_INFINITY, playerid, 0xff0000ff, "Local")))
    {
        SendClientMessage(playerid, -1, "Press Z to talk to global chat and B to talk to local chat.");
        if (gstream) SvAttachListenerToStream(gstream, playerid);
        SvAddKey(playerid, 0x5A);
    }
	
	CheckAdminStatDate(playerid);
    // ????????ù ????????????ù
    timeduel[playerid] = 11;
    CreateAvtosalonTextDraws(playerid);
    Autorize[playerid] = 0;
    UseAnimWerton[playerid] = 0;
    SpawnWertonFix[playerid] = 0;
    testrazdevstatus[playerid] = false;
    player_sell_ownable_car[playerid] = false;
    Shopclothing[playerid] = 0;
    gPlayerInMedBed[playerid] = false;
    SetPlayerData(playerid, P_OCCUPIED_BED, -1);

    SendClientMessage(playerid, 0xFFFF00FF, "{34C924}| {FFFFFF}????? ?????????? ?? {FF6347}"SERVER_NAME"!");
    PlayerPlayStream(playerid, "http://wh3606.web3.maze-host.ru/music/enter_.mp3");
    if(TEST_SERVER == 1) SendClientMessage(playerid, -1, ""SC"{00CCFF}[DEBUG]{ffffff} Enter TestDev ID: 62");

    new hour, minute, seconds;
    gettime(hour, minute, seconds);
    times[playerid] = true;
    SetPlayerTime(playerid, hour, minute, seconds);

    PlayerIsDalnoboi[playerid] = 0;
    PlayerIsInkasator[playerid] = 0;
    SetPlayerColor(playerid, 0x999999FF);
    SetPlayerVirtualWorld(playerid, playerid + 0xFF);
    ClearPlayerInfo(playerid);

    GetPlayerName(playerid, g_player[playerid][P_NAME], MAX_PLAYER_NAME);
    GetPlayerIp(playerid, g_player[playerid][P_IP], 16);

    busTimer[playerid] = -1;
    buses[playerid] = INVALID_VEHICLE_ID;

    InitFly(playerid);

    SetTimerEx("CheckPlayerAccount", 1000, false, "ii", playerid, mysql_race[playerid]);
}


stock InitGuardPosts() {
    new Float:data[MAX_POSTS][3] = {
        {1884.61, 1736.23, 21.54}, {1886.52, 1708.51, 21.37}, {1936.54, 1651.32, 21.37},
        {1970.69, 1550.27, 21.37}, {1886.38, 1773.84, 21.37}, {1884.51, 1825.23, 21.37},
        {1831.80, 1825.72, 21.37}, {1660.26, 1825.68, 21.37}, {1495.64, 1826.06, 21.37},
        {1495.68, 1758.16, 21.37}, {1495.64, 1695.45, 21.37}, {1517.40, 1633.33, 21.37},
        {1426.59, 1612.75, 21.37}, {1426.65, 1549.91, 21.37}, {1648.94, 1550.26, 21.38},
        {1797.05, 1550.25, 21.37}
    };

    for (new i = 0; i < MAX_POSTS; i++) {
        GuardPostX[i] = data[i][0];
        GuardPostY[i] = data[i][1];
        GuardPostZ[i] = data[i][2];

        GuardPostZoneBudka[i] = CreateDynamicSphere(data[i][0], data[i][1], data[i][2], 1.5);
        GuardPostZonePost[i] = CreateDynamicSphere(data[i][0], data[i][1], data[i][2], 10.0);

        for (new j = 0; j < MAX_GUARDS; j++) {
            GuardPostGuards[i][j] = INVALID_PLAYER_ID;
            GuardPostGuardTime[i][j] = 0;
        }

        GuardPostTimerID[i] = -1;
        UpdatePostLabel(i);
    }
}

stock UpdatePostLabel(postid) {
    new text[512];
    format(text, sizeof(text),
        "{FFFF00}<< {FFFFFF}???? ?%d {FFFF00}>>\n\n\n{FFFF00}| {FFFFFF}??????????:\n\n", postid + 1);

    for (new i = 0; i < MAX_GUARDS; i++) {
        if (GuardPostGuards[postid][i] == INVALID_PLAYER_ID) {
            format(text, sizeof(text), "%s{FFFF00}%d. {FFFFFF}???????????\n", text, i + 1);
        } else {
            new name[MAX_PLAYER_NAME];
            GetPlayerName(GuardPostGuards[postid][i], name, sizeof(name));
            format(text, sizeof(text), "%s{FFFF00}%d. {FFFFFF}%s {FFFF00}| {FFFFFF}%d ???.\n",
                text, i + 1, name, GuardPostGuardTime[postid][i]);
        }
    }

    strcat(text, "\n{FFFF00}|{FFFFFF} ????????? ??ù ?????????????ù");

    if (IsValidDynamic3DTextLabel(GuardPostLabel[postid])) {
        UpdateDynamic3DTextLabelText(GuardPostLabel[postid], COLOR_WHITE, text);
    } else {
        GuardPostLabel[postid] = CreateDynamic3DTextLabel(text, COLOR_WHITE,
            GuardPostX[postid], GuardPostY[postid], GuardPostZ[postid] + 1.0, 8.0);
    }
}

stock ShowPostJournal(playerid, postid) {
    new dialog[512];
    format(dialog, sizeof(dialog), "{FF6666}?????\t{FF6666}??ù ???????????\t{FF6666}??????ù? ?????{FFFFFF}\n");

    for (new i = 0; i < MAX_JOURNAL; i++) {
        if (GuardPostJournal[postid][i][0]) {
            format(dialog, sizeof(dialog), "%s#%d\t%s\t%d\n",
                dialog, i + 1, GuardPostJournal[postid][i], GuardPostJournalTime[postid][i]);
        }
    }

    ShowPlayerDialog(playerid, DIALOG_POST + 1, DIALOG_STYLE_TABLIST_HEADERS,
        "?????? ?????", dialog, "??", "");
}

stock TryJoinPost(playerid, postid) {
    for (new i = 0; i < MAX_GUARDS; i++) {
        if (GuardPostGuards[postid][i] == playerid) {
            SendClientMessage(playerid, COLOR_GREY, "?? ??? ?????? ?? ???? ?????.");
            return 1;
        }
    }

    for (new i = 0; i < MAX_GUARDS; i++) {
        if (GuardPostGuards[postid][i] == INVALID_PLAYER_ID) {
            GuardPostGuards[postid][i] = playerid;
            GuardPostGuardTime[postid][i] = 0;
            UpdatePostLabel(postid);

            if (GuardPostTimerID[postid] == -1) {
                GuardPostTimerID[postid] = SetTimerEx("UpdatePostTimer", 60000, true, "i", postid);
            }

            SendClientMessage(playerid, COLOR_GREY, "?? ????????? ?? ????.");
            return 1;
        }
    }

    SendClientMessage(playerid, COLOR_GREY, "?? ????? ??? ????????? ????.");
}

stock LeavePost(playerid, postid) {
    for (new i = 0; i < MAX_GUARDS; i++) {
        if (GuardPostGuards[postid][i] == playerid) {
            AddToJournal(postid, playerid, GuardPostGuardTime[postid][i]);
            GuardPostGuards[postid][i] = INVALID_PLAYER_ID;
            GuardPostGuardTime[postid][i] = 0;
            UpdatePostLabel(postid);
            SendClientMessage(playerid, COLOR_GREY, "?? ???????? ????.");
            return 1;
        }
    }
    SendClientMessage(playerid, COLOR_GREY, "?? ?? ?????? ?? ???? ?????.");
}

public UpdatePostTimer(postid) {
    new active = false;
    for (new i = 0; i < MAX_GUARDS; i++) {
        if (GuardPostGuards[postid][i] != INVALID_PLAYER_ID) {
            GuardPostGuardTime[postid][i]++;
            active = true;
        }
    }

    UpdatePostLabel(postid);

    if (!active) {
        KillTimer(GuardPostTimerID[postid]);
        GuardPostTimerID[postid] = -1;
    }
}

stock ShowPostDialog(playerid, postid) {
    new dialog[512];
    strcat(dialog, "{FF6666}?????\t{FF6666}????????????\t{FF6666}????????? ????????\n");
    strcat(dialog, "{FF6666}#1\t{FFFFFF}?????? ?????\t{FF6666}??????? ??ù ????????????\n");
    strcat(dialog, "{FF6666}#2\t{FFFFFF}????????? ?? ????\t{FF6666}??????? ??ù ?????????ù ???????ù\n");
    strcat(dialog, "{FF6666}#3\t{FFFFFF}???????? ????\t{FF6666}??????? ??ù ?????????ù ???????ù");

    Dialog(playerid, DIALOG_POST, DIALOG_STYLE_TABLIST_HEADERS,
        "{FF6666}Baze Russia RolePlay {FFFFFF}| ????????? ????", dialog, "???????", "???????");

    SetPVarInt(playerid, "CurrentPostID", postid);
}

stock AddToJournal(postid, playerid, minutes) {
    for (new i = MAX_JOURNAL - 1; i > 0; i--) {
        strmid(GuardPostJournal[postid][i], GuardPostJournal[postid][i - 1], 0, MAX_PLAYER_NAME);
        GuardPostJournalTime[postid][i] = GuardPostJournalTime[postid][i - 1];
    }

    GetPlayerName(playerid, GuardPostJournal[postid][0], MAX_PLAYER_NAME);
    GuardPostJournalTime[postid][0] = minutes;
}

stock GetFormattedDate(output[])
{
    new year, month, day;
    getdate(year, month, day);
    format(output, 16, "%02d.%02d.%d", day, month, year);
}

stock GetNextMilitaryID()
{
	new next_id = 1,
		query[64],
		Cache: result;

	mysql_format(mysql, query, sizeof query, "SELECT MAX(nomerbilet) FROM `accounts`");
	result = mysql_query(mysql, query, true);

	if (cache_num_rows())
	{
		new max_id = cache_get_row_int(0, 0);
		if (max_id > 0) next_id = max_id + 1;
	}

	cache_delete(result);
	return next_id;
}

forward FinishMedcardTimer(playerid);
public FinishMedcardTimer(playerid)
{
    if (!IsPlayerConnected(playerid)) return;
    if (GetPlayerData(playerid, P_MEDCARD_STATE) == 1)
    {
        SetPlayerData(playerid, P_MEDCARD_STATE, 2);
        SCM(playerid, COLOR_WHITE, "???? ??????????ù ????? ??????. ???????? ?? ? ????????? ????????.");
    }
}

stock GetOnlineDoctors()
{
    new count = 0;
    for (new i = 0; i < MAX_PLAYERS; i++)
    {
        if (!IsPlayerConnected(i)) continue;
        if (GetPlayerTeamEx(i) == TEAM_HOSPITAL && GetPlayerJob(i) >= 3)
            count++;
    }
    return count;
}

stock medcardcheck(playerid)
{
    if (GetPlayerData(playerid, P_MEDCARD) == 1)
    {
        new year, month, day;
        getdate(year, month, day);

        new card_day, card_month, card_year;
        sscanf(GetPlayerData(playerid, P_MEDCARD_DATE), "p<.>d.d.d", card_day, card_month, card_year);

        new days_passed = ((year - card_year) * 365 + (month - card_month) * 30 + (day - card_day));

        if (days_passed >= 30)
        {
            SetPlayerData(playerid, P_MEDCARD, 0);
            SetPlayerData(playerid, P_MEDCARD_DATE, "");
            SetPlayerData(playerid, P_MEDCARD_STATE, 0);
            SetPlayerData(playerid, P_MEDCARD_WARNED_DATE, "");
            UpdatePlayerDatabaseInt(playerid, "medcard", 0);
            UpdatePlayerDatabaseString(playerid, "medcard_date", "");
            UpdatePlayerDatabaseString(playerid, "medcard_warned", "");
            SCM(playerid, COLOR_WHITE, "???? ???????ù ????? ??????????? ????? ??????? ? ?????.");
        }
    }

    if (GetPlayerTeamEx(playerid) >= 1 && GetPlayerData(playerid, P_MEDCARD) == 0)
    {
        new year, month, day;
        getdate(year, month, day);

        new warn_day, warn_month, warn_year;
        sscanf(GetPlayerData(playerid, P_MEDCARD_WARNED_DATE), "p<.>d.d.d", warn_day, warn_month, warn_year);

        new days_since_warn = ((year - warn_year) * 365 + (month - warn_month) * 30 + (day - warn_day));

        if (strlen(GetPlayerData(playerid, P_MEDCARD_WARNED_DATE)) == 0)
        {
            new date[16];
            GetFormattedDate(date);
            SetPlayerData(playerid, P_MEDCARD_WARNED_DATE, date);
            UpdatePlayerDatabaseString(playerid, "medcard_warned", date);
            SCM(playerid, COLOR_WHITE, "? ??? ??????????? ??????????ù ?????. ???????? ?? ? ??????? ?????.");
        }
        else if (days_since_warn >= 1)
        {
            InvitePlayer(playerid, 0, 0, true);
            SetPlayerData(playerid, P_MEDCARD_WARNED_DATE, "");
            UpdatePlayerDatabaseString(playerid, "medcard_warned", "");
            SCM(playerid, COLOR_GREY, "?? ???? ??????? ?? ??????????? ??-?? ?????????ù ????????.");
        }
    }
    else
    {
        SetPlayerData(playerid, P_MEDCARD_WARNED_DATE, "");
        UpdatePlayerDatabaseString(playerid, "medcard_warned", "");
    }
}

CMD:gmedcard(playerid, params[])
{
    if (GetPlayerTeamEx(playerid) != TEAM_HOSPITAL)
        return SCM(playerid, COLOR_GREY, "???????? ?????? ??????????? ????????.");
       
    if(!IsWorkDayStarted(playerid)) return 1;

    if (GetPlayerJob(playerid) < 3)
        return SCM(playerid, COLOR_GREY, "???????? ???. ????? ????? ?????? ? 3-?? ?????.");

    new target, price;
    if (sscanf(params, "dd", target, price))
        return SCM(playerid, COLOR_WHITE, "???????????: /gmedcard [id] [????]");

    if (target == playerid)
        return SCM(playerid, COLOR_GREY, "?? ?? ?????? ?????? ???????? ????.");

    if (!IsPlayerInRangeOfPlayer(playerid, target, 10.0))
        return SCM(playerid, COLOR_WHITE, "????? ??????? ??????.");

    if (GetPlayerData(target, P_MEDCARD) == 1)
        return SCM(playerid, COLOR_WHITE, "? ?????? ??? ???? ??????????ù ?????.");

    if (price < 1 || price > 10000)
        return SCM(playerid, COLOR_GREY, "???? ?????? ???? ?? 1 ?? 10000 ??????.");

    if (GetPlayerMoney(target) < price)
        return SCM(playerid, COLOR_GREY, "? ?????? ???????????? ???????.");

    SetPVarInt(target, "med_offer_from", playerid);
    SetPVarInt(target, "med_offer_price", price);
    SendPlayerOffer(playerid, target, OFFER_TYPE_MEDCARD);

    new fmt_self[128];
    format(fmt_self, sizeof fmt_self, "?? ?????????? %s ?????? ???????????? ?? %d ??????.", GetPlayerNameEx(target), price);
    SCM(playerid, COLOR_BLUE, fmt_self);

    return 1;
}

stock ShowMedicalCardDialog(viewerid, targetid, name_target[], health, date[])
{
    new fmt_str[1024];
    format(fmt_str, sizeof fmt_str,
        "{FFFF00}| {FFFFFF}??????? ??????: {FFFF00}%s\n"\
        "{FFFF00}| {FFFFFF}?????ù??? ??????: {FFFF00}%d\n"\
        "{FFFF00}| {FFFFFF}??? ??????: {FFFF00}????????ù ????????\n"\
        "{FFFF00}| {FFFFFF}???? ??????: {FFFF00}%s",
        name_target,
        health,
        date
    );

    Dialog(viewerid, 3563, DIALOG_STYLE_MSGBOX, "{EB4C42}Baze Russia RolePlay {FFFFFF}| ??????????ù ?????", fmt_str, "???????", "");

    new action_show[128];
    format(action_show, sizeof action_show, "??????? ??????????? ????? %s", GetPlayerNameEx(viewerid));
    Action(targetid, action_show, _, false);

    new action_view[128];
    format(action_view, sizeof action_view, "????????????? ??????????? ????? %s", name_target);
    Action(viewerid, action_view, _, false);

    return 1;
}

stock ShowMilitaryCardDialog(playerid, nomer, name[], date[], kem[], zvanie[])
{
    new fmt_str[1024];
    format(fmt_str, sizeof fmt_str,
        "\n"\
        "{FFFFFF}????? ???????? ??????:\t{FFFF00}?%d\n"\
        "{FFFFFF}??ù ? ??????ù:\t{FFFF00}%s\n"\
        "{FFFFFF}???? ??????:\t{FFFF00}%s\n"\
        "{FFFFFF}??? ??? ?????:\t{FFFF00}%s\n"\
        "{FFFFFF}??????:\t{FFFF00}%s",
        nomer,
        name,
        date,
        kem,
        zvanie
    );

    Dialog(playerid, 3562, DIALOG_STYLE_TABLIST_HEADERS, "{EB4C42}??????? ?????", fmt_str, "???????", "");
}

stock ShowLicenseDialog(playerid, target_id)
{
	new fmt_str[512];

	format(fmt_str, sizeof fmt_str,
		"{EB4C42}?????\t{EB4C42}????????????\t{EB4C42}???????\n"\
		"{EB4C42}#1\t{FFFFFF}????????ù \"B\"\t%s\n"\
		"{EB4C42}#2\t{FFFFFF}????????? \"C ? D\"\t%s\n"\
		"{EB4C42}#3\t{FFFFFF}??????\t%s",
		GetPlayerData(target_id, P_DRIVING_LIC) >= 1 ? ("{2fdb07}??????ù") : ("{EB4C42}???????????"),
		GetPlayerData(target_id, P_DRIVING_LIC) == 2 ? ("{2fdb07}??????ù") : ("{EB4C42}???????????"),
		GetPlayerData(target_id, P_WEAPON_LIC) == 1 ? ("{2fdb07}??????ù") : ("{EB4C42}???????????")
	);

	Dialog(playerid, 3562, DIALOG_STYLE_TABLIST_HEADERS, "{EB4C42}Baze Russia RolePlay{FFFFFF} | ???????? ??????????", fmt_str, "???????", "");
}

CMD:radial(playerid)
{
	new Node:json=JSON_Object();
	ShowPlayerGUI(playerid, 27, json);
	return true;
}


stock SetVehicleSpeedometerInfo(vehicleid, Float:fuel = 0.0, Float:mileage = 0.0)
{
	vInfo[vehicleid][vFuel] = fuel;
	vInfo[vehicleid][vMileage] = mileage;

	foreach(new playerid: Player)
	{	
		if(GetPlayerVehicleID(playerid) == vehicleid && GetPlayerState(playerid) == PLAYER_STATE_DRIVER) SetVehicleSpeedometerInfoFP(playerid, vehicleid, fuel, mileage); 
		else continue;
	}
} 

stock SetVehicleSpeedometerInfoFP(playerid, vehicleid, Float:fuel = 0.0, Float:mileage = 0.0)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 14);

	BS_WriteValue(bitstream, PR_UINT32, fuel);
	BS_WriteValue(bitstream, PR_UINT32, mileage); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}
stock SetVehicleTonerForPlayer(playerid, vehicleid, front, rear, front_side, back_side)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 0);

	BS_WriteValue(bitstream, PR_UINT32, front);
	BS_WriteValue(bitstream, PR_UINT32, rear);
	BS_WriteValue(bitstream, PR_UINT32, front_side);
	BS_WriteValue(bitstream, PR_UINT32, back_side); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleClearance(vehicleid, clearance, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vClearance] = clearance;
	foreach(new playerid : streamed_players_in_veh[vehicleid])  SetVehicleClearanceForPlayer(playerid, vehicleid, clearance); 
} 

stock SetVehicleClearanceForPlayer(playerid, vehicleid, clearance)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 1);

	new Float:change = clearance / 50.0;
	BS_WriteValue(bitstream, PR_FLOAT, change);  

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleSeparateClearance(vehicleid, clearance, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vSeparate] = clearance;
	foreach(new playerid : streamed_players_in_veh[vehicleid])  SetVehicleSeparateClearanceFP(playerid, vehicleid, clearance); 
} 

stock SetVehicleSeparateClearanceFP(playerid, vehicleid, clearance)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 2);

	new Float:change = clearance / 100.0;
	BS_WriteValue(bitstream, PR_FLOAT, change);  

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleWheelRadius(vehicleid, radius, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vWheel][Radius] = radius; 
	foreach(new playerid : streamed_players_in_veh[vehicleid]) SetVehicleWheelRadiusFP(playerid, vehicleid, radius); 
} 

stock SetVehicleWheelRadiusFP(playerid, vehicleid, radius)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 3);

	new Float:change = (radius / 250.0) + 0.7;
	BS_WriteValue(bitstream, PR_FLOAT, change);   

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleLightColor(vehicleid, color, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vLightColor] = color; 
	foreach(new playerid : streamed_players_in_veh[vehicleid])  SetVehicleLightColorForPlayer(playerid, vehicleid, RGBA_to_ARGB(color)); 
} 

stock SetVehicleLightColorForPlayer(playerid, vehicleid, color)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 8);

	BS_WriteValue(bitstream, PR_UINT32, color);  

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}

stock SetVehicleLightingForPlayer(playerid, vehicleid, center, right, left)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 9);

	BS_WriteValue(bitstream, PR_UINT32, center);  
	BS_WriteValue(bitstream, PR_UINT32, right);
	BS_WriteValue(bitstream, PR_UINT32, left);

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleWheelAlignment(vehicleid, front, rear, setvalue=0)
{
	if(setvalue)
	{
		vInfo[vehicleid][vWheel][Alignment][0] = front; 
		vInfo[vehicleid][vWheel][Alignment][1] = rear; 
	}
	foreach(new playerid : streamed_players_in_veh[vehicleid]) SetVehicleWheelAlignmentFP(playerid, vehicleid, front, rear); 
} 

stock SetVehicleWheelAlignmentFP(playerid, vehicleid, front, rear)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 10);

	new Float:change;
	change = front / -200.0; 
	BS_WriteValue(bitstream, PR_FLOAT, change);  
	change = rear / -200.0; 
	BS_WriteValue(bitstream, PR_FLOAT, change); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
} 

stock SetVehicleHornSound(vehicleid, horn_id, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vHornSound] = horn_id;
	foreach(new playerid: Player) SetVehicleHornSoundForPlayer(playerid, vehicleid, horn_id); 
} 

stock SetVehicleHornSoundForPlayer(playerid, vehicleid, horn_id)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 15);

	BS_WriteValue(bitstream, PR_UINT8, horn_id); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleWheelDeparture(vehicleid, front, rear, setvalue=0)
{
	if(setvalue)
	{
		vInfo[vehicleid][vWheel][Departure][0] = front; 
		vInfo[vehicleid][vWheel][Departure][1] = rear; 
	}
	foreach(new playerid: Player) SetVehicleWheelDepartureFP(playerid, vehicleid, front, rear);
} 

stock SetVehicleWheelDepartureFP(playerid, vehicleid, front, rear)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 16);

	new Float:change;
	change = (front / 400.0) + -0.125;
	BS_WriteValue(bitstream, PR_FLOAT, change);
	change = (rear / 400.0) + -0.125;
	BS_WriteValue(bitstream, PR_FLOAT, change); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleWheelWidth(vehicleid, front, rear, setvalue=0)
{
	if(setvalue)
	{
		vInfo[vehicleid][vWheel][Width][0] = front; 
		vInfo[vehicleid][vWheel][Width][1] = rear; 
	}
	foreach(new playerid: Player) SetVehicleWheelWidthFP(playerid, vehicleid, front, rear); 
} 

stock SetVehicleWheelWidthFP(playerid, vehicleid, front, rear)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 17);

	new Float:change;
	change = (front / 80.0) + 0.5;
	BS_WriteValue(bitstream, PR_FLOAT, change);
	change = (rear / 80.0) + 0.5;
	BS_WriteValue(bitstream, PR_FLOAT, change); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleColor(vehicleid, body, wheel, setvalue=0)
{
	if(setvalue)
	{
		vInfo[vehicleid][vColorBody] = body;
		vInfo[vehicleid][vColorWheels] = wheel;
	}
	foreach(new playerid: Player) SetVehicleColorForPlayer(playerid, vehicleid, RGBA_to_ARGB(body), RGBA_to_ARGB(wheel)); 
} 

stock SetVehicleColorForPlayer(playerid, vehicleid, body, wheel)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 18);

	BS_WriteValue(bitstream, PR_UINT32, body);
	BS_WriteValue(bitstream, PR_UINT32, wheel);
	BS_WriteValue(bitstream, PR_UINT32, wheel);
	BS_WriteValue(bitstream, PR_UINT32, body); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleStroboscope(vehicleid, type, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vStrob] = type;
	foreach(new playerid: Player) SetVehicleStroboscopeForPlayer(playerid, vehicleid, type); 
} 

stock SetVehicleStroboscopeForPlayer(playerid, vehicleid, type)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 19);

	BS_WriteValue(bitstream, PR_UINT32, type); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleChipTune(vehicleid, type)
{   
	foreach(new playerid: Player) SetVehicleChipTuneForPlayer(playerid, vehicleid, type); 
} 
//???????? ??????ù? ?? ?????????
stock SetVehicleChipTuneForPlayer(playerid, vehicleid, type)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 20);

	BS_WriteValue(bitstream, PR_UINT32, type); //PR_UINT32 
	//0x3DCCCCCD - ??????
	//0x3F666666 - ???????
	//0x3F800000 - ?????
	//0x3F4CCCCD - ?????
	//0x3F7AE148 - ?????+

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleHydraulics(vehicleid, type, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vHydraulics] = type;
	foreach(new playerid: Player) SetVehicleHydraulicsForPlayer(playerid, vehicleid, type); 
} 

stock SetVehicleHydraulicsForPlayer(playerid, vehicleid, type)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 21);

	BS_WriteValue(bitstream, PR_UINT8, type); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleHighLight(vehicleid, type, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vHighLights] = type;
	foreach(new playerid: Player) SetVehicleHighLightForPlayer(playerid, vehicleid, type); 
} 

stock SetVehicleHighLightForPlayer(playerid, vehicleid, type)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 22);

	BS_WriteValue(bitstream, PR_UINT8, type); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleLaunchControl(vehicleid, type, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vLaunchControl] = type;
	foreach(new playerid: Player) SetVehicleLaunchControlFP(playerid, vehicleid, type); 
} 

stock SetVehicleLaunchControlFP(playerid, vehicleid, type)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 23);

	BS_WriteValue(bitstream, PR_UINT8, type); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleExhaust(vehicleid, type, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vExhaustSound] = type;
	foreach(new playerid: Player) SetVehicleExhaustForPlayer(playerid, vehicleid, type); 
} 

stock SetVehicleExhaustForPlayer(playerid, vehicleid, type)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 24);

	BS_WriteValue(bitstream, PR_UINT16, type); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleSiren(vehicleid, type, setvalue=0)
{
	if(setvalue) vInfo[vehicleid][vSiren] = type;
	foreach(new playerid: Player) SetVehicleSirenForPlayer(playerid, vehicleid, type); 
} 

stock SetVehicleSirenForPlayer(playerid, vehicleid, type)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 26);

	BS_WriteValue(bitstream, PR_UINT8, type); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}





//by KBAS's  t.me/kbasstudio 
stock SetVehicleEnableSiren(vehicleid, type) //????????????ù ?????????? ??????
{
	//vInfo[vehicleid][vEnableSiren] = type;
	foreach(new playerid: Player) SetVehicleEnableSirenForPlayer(playerid, vehicleid, type); 
} 

stock SetVehicleEnableSirenForPlayer(playerid, vehicleid, type)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	BS_WriteValue(bitstream, PR_UINT8, 27);

	BS_WriteValue(bitstream, PR_UINT8, type); 

	PR_SendRPC(bitstream, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}

CMD:setvinyl(playerid, params[])
{
    new vehicleid;
    new texture[16];

    if (sscanf(params, "ds[16]", vehicleid, texture))
        return SendClientMessage(playerid, -1, "???????????: /setvinyl [vehicleid] [texture]");

    if (!IsValidVehicle(vehicleid))
        return SendClientMessage(playerid, -1, "ù???????? ? ????? ID ?? ??????????.");

    SetVehicleVinyl(vehicleid, texture, 1);

    new msg[64];
    format(msg, sizeof(msg), "????? \"%s\" ?????????? ?? ?? %d", texture, vehicleid);
    SendClientMessage(playerid, -1, msg);
    return 1;
}

stock RGBA_to_ARGB(rgba) return ((rgba & 0xFFFFFF00) >> 8) | ((rgba & 0xFF) << 24);

CMD:tint(playerid, params[])
{
    new level;
    if(sscanf(params, "i", level)) 
        return SendClientMessage(playerid, -1, !"?????????: /tint [??????? 0-3]");

    if(level < 0 || level > 3) 
        return SendClientMessage(playerid, -1, !"??????? ????? ???? ?? 0 (???) ?? 3 (????)");

    new vehicleid = GetPlayerVehicleID(playerid);
    if(!vehicleid) return SendClientMessage(playerid, -1, !"ù? ?? ? ??????!");

    SetVehicleTint(vehicleid, level, 1);
    new msg[64];
    format(msg, sizeof(msg), !"ù???????? ??????????? ?? ??????? %d", level);
    SendClientMessage(playerid, -1, msg);
    return 1;
}

CMD:hydra(playerid, params[])
{
    if(!IsPlayerInAnyVehicle(playerid))
        return SendClientMessage(playerid, -1, "?? ?????? ?????????ù ? ??????????!");

    new vehicleid = GetPlayerVehicleID(playerid);

    // type 1
    SetVehicleHydraulics(vehicleid, 1, 1);

    SendClientMessage(playerid, -1, "Hydraulics (type: 1).");

    SendClientMessage(playerid, -1, "?????????? ?????????");

    return 1;
}

CMD:siren(playerid)
{
   new vehicleid = GetPlayerVehicleID(playerid);
   SetVehicleSirenForPlayer(playerid, vehicleid, 1);
}

CMD:temno(playerid)
{
   ShowPlayerBackground(playerid, 400, 400, 200);
}

CMD:lc(playerid, params[])
{
    if(!IsPlayerInAnyVehicle(playerid))
        return SendClientMessage(playerid, -1, "?? ?????? ?????????ù ? ??????????!");

    new vehicleid = GetPlayerVehicleID(playerid);

    // type ?????? 1
    SetVehicleLaunchControl(vehicleid, 1, 1);

    SendClientMessage(playerid, -1, "Launch Control ???????? (type: 1).");

    SendClientMessage(playerid, -1, "Launch Control ????????");

    return 1;
}

CMD:strab(playerid)
{
  new vehicleid = GetPlayerVehicleID(playerid);
  
  SetVehicleStroboscope(vehicleid, 2, 1);
  
  return 1;
}


CMD:strab1(playerid)
{
  new vehicleid = GetPlayerVehicleID(playerid);
  
  SetVehicleStroboscope(vehicleid, 4, 1);
  
  return 1;
}

stock ShowPlayerBackground(playerid, showtime, waittime, hidetime)
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT8, 13); 
	
	BS_WriteValue(bitstream, PR_UINT32, showtime);  
	BS_WriteValue(bitstream, PR_UINT32, waittime);  
	BS_WriteValue(bitstream, PR_UINT32, hidetime);  

	PR_SendRPC(bitstream, playerid, 168, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream); 
}

stock SetVehicleTint(vehicleid, level, setvalue=0)
{
    if(setvalue)
    {
        vInfo[vehicleid][vTint] = level;
    }
    foreach(new playerid: Player) SetVehicleTintForPlayer(playerid, vehicleid, level);
}

stock SetVehicleTintForPlayer(playerid, vehicleid, level)
{
    new BitStream:bs = BS_New();
    BS_WriteValue(bs, PR_UINT16, vehicleid);
    BS_WriteValue(bs, PR_UINT8, 10);   // ??? ???? (?????????)

    BS_WriteValue(bs, PR_UINT8, level); // ??????? ?????????

    PR_SendRPC(bs, playerid, 167, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bs);
}

CMD:numberr(playerid, params[])
{
    ShowPlayerDialog(playerid, DIALOG_VEHICLE_NUMBER, DIALOG_STYLE_INPUT, "????????? ????????? ?????", 
        "??????? ?????? ? ???????:\nù?? ????? ??????\n\n????????: 1 ABC123 RU", "??????????", "??????");
    return 1;
}

stock SetVehicleNumberPlateEx(vehicleid, type, number[], region[])
{
	//vInfo[vehicleid][vNumber][Type] = type;
	//format(vInfo[vehicleid][vNumber][Number], 9, number);
	//format(vInfo[vehicleid][vNumber][Region], 4, region); //?????????? ??ù ?????????ù ???????.
	foreach(new playerid: Player)
	{	
		SetVehicleNumberPlateForPlayer(playerid, vehicleid, type, number, region); 
	}
} 

stock SetVehicleNumberPlateForPlayer(playerid, vehicleid, type, number[], region[])
{
	new BitStream:bitstream = BS_New();
	BS_WriteValue(bitstream, PR_UINT8, 7);

	BS_WriteValue(bitstream, PR_UINT16, vehicleid);
	
	BS_WriteValue(bitstream, PR_UINT8, type); 
	
	BS_WriteValue(bitstream, PR_UINT8, strlen(number));
	BS_WriteValue(bitstream, PR_STRING, number);
	
	BS_WriteValue(bitstream, PR_UINT8, strlen(region));
	BS_WriteValue(bitstream, PR_STRING, region); 

	PR_SendRPC(bitstream, playerid, 168, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
	BS_Delete(bitstream);
}

stock DrawGPSLineForPlayer(playerid, Float:x, Float:y, Float:z)
{
    new BitStream:bs = BS_New();
    BS_WriteValue(bs, 
        PR_UINT8, 26,
        PR_UINT32, 0xFF00D7FF,
        PR_FLOAT, x,
        PR_FLOAT, y, 
        PR_FLOAT, z
    );
    PR_SendRPC(bs, playerid, 168, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bs);
    return 1;
}

CMD:gpstest(playerid, params[])
{
    new Float:x = float(GetRandomInt(-3500, 3500));
    new Float:y = float(GetRandomInt(-3500, 3500));
    new Float:z = float(GetRandomInt(10, 15));
   
    new message[128];
    format(message, sizeof(message), "GPS ?????: %.1f, %.1f, %.1f", x, y, z);
    SendClientMessage(playerid, -1, message);
  
    EnablePlayerGPS(playerid, x, y, z, message);
    
    
    
    return 1;
}

stock GetRandomInt(min, max)
{
    return random(max - min + 1) + min;
}

stock ShowNotificationNew(playerid, type, duration, id, subId, caption[], btnCaption[])
{
    new Node:JSONObject = JSON_Object();

    JSON_SetInt(JSONObject, "t", type);
    JSON_SetInt(JSONObject, "d", duration);
    JSON_SetInt(JSONObject, "s", id);
    JSON_SetInt(JSONObject, "b", subId);
    JSON_SetString(JSONObject, "i", caption, strlen(caption));
    JSON_SetString(JSONObject, "k", btnCaption, strlen(btnCaption));

    OnPacketIncoming(playerid, 13, JSONObject);
}

stock ShowNotificationDefault(playerid, type, duration, id, subId, caption[])
{
    ShowNotificationNew(playerid, type, duration, id, subId, caption, ">>>");
}

CMD:showgui(playerid, params[])
{
    if (isnull(params)) return SendClientMessage(playerid, -1, "?????????????: /showgui [????? GUI]");

    new gui_id = strval(params);

    new Node:json = JSON_Object();
    JSON_SetInt(json, "t", 1);

    new title[32];
    format(title, sizeof(title), "GUI #%d", gui_id);
    JSON_SetString(json, "title", title);

    ShowPlayerGUI(playerid, gui_id, json);
    return 1;
}

forward ShowEngineNotification(playerid);
public ShowEngineNotification(playerid)
{
	if(!IsPlayerInAnyVehicle(playerid)) 
		return 1;
	
	new vehicleid = GetPlayerVehicleID(playerid);

	if(!IsPlayerDriver(playerid))
		return 1;

	if(!IsABike(vehicleid) && GetVehicleParam(vehicleid, V_ENGINE) == VEHICLE_PARAM_OFF)
	{
		ShowNotificationNew(playerid, 4, 10, notifcmde, 0, "???????, ????? ??????? ??????", ">");
	}
	return 1;
}

new VehicleNames[][32] = {
    "BMW F6",         // 400: BMW X6M F16
    "???????",           // 401: VAZ 2101
    "GT63s",             // 402: Mercedes-Benz GT63s
    "Truck Premium",     // 403: Renault Premium
    "???????",           // 404: ??? 2107
    "Aura Road 6",       // 405: Audi RS6
    "?? 131",            // 406: ??? 131 ????????
    "???????",           // 407: ???????
    "?????????",         // 408: ?????????
    "???????",           // 409: ???????
    "C63s",              // 410: Mercedes-Benz C63s AMG
    "AMerlin 11",        // 411: Aston Martin DB11
    "????????",          // 412: VAZ 2106
    "?? 3221",           // 413: Gazelle 3221
    "?? 3204",           // 414: Gaz Vector Next
    "Emperador",         // 415: Lamborghini Aventador S
    "M Sprint ???",      // 416: Mercedes-Benz Sprinter
    "Leviafan",          // 417: Leviathn
    "V Multibus",        // 418: Volkswagen Multivan T6
    "E420",              // 419: Mercedes-Benz E420 W210
    "Aura Road 6 C7",    // 420: Audi RS6 C7 ??????????
    "W124",              // 421: Mercedes-Benz W124
    "?? ???????",        // 422: ??? ???????
    "MrWhoop",           // 423: MrWhoop
    "CM?",               // 424: CM?
    "Auto Hunter",       // 425: Hunter
    "BMW M5 E39",      // 426: BMW M5 E39
    "?? 3221",           // 427: Gazelle 3221
    "?????????",         // 428: ?????????
    "M GT-R",            // 429: Mercedes-Benz GT-R
    "????? ?????",       // 430: ????? ?????
    "???? 677",          // 431: ???? 677
    "ù???",              // 432: ù???
    "CUMZ 54115",        // 433: ????? 54115
    "HotRoad 1933",      // 434: Ford 1933 HotRod
    "??????",            // 435: ??????
    "Mitsu EVA",         // 436: Mitsubishi Lancer Evo X
    "??????",            // 437: ??????
    "?? ????",           // 438: Gaz 2402 Halloween
    "?????????",         // 439: VAZ 2108
    "M Multibus",        // 440: Mercedes-Benz V-Class W447
    "RCcar",             // 441: RCcar
    "60 V",              // 442: Volvo V60
    "???????",           // 443: ???????
    "??????",            // 444: ??????
    "TSX",               // 445: Acura TSX
    "????? ???????",     // 446: ????? ???????
    "?????? ????",       // 447: ?????? ????
    "??????",            // 448: ????? 125
    "????????",          // 449: ????????
    "??????",            // 450: ??????
    "600 LT",            // 451: McLaren 600LT
    "Marine Yacht",      // 452: Marine Yacht
    "Sea Yacht",         // 453: Sea Yacht
    "Ocean Yacht",       // 454: Ocean Yacht
    "???????",           // 455: ???????
    "???????",           // 456: Gazelle 3310 (???????)
    "????? ???",         // 457: ????? ???
    "???????",           // 458: VAZ 2114
    "Topfun",            // 459: Topfun
    "???? ???????",      // 460: ???? ???????
    "Moto SuperSport",   // 461: Ducati SuperSport S
    "Moto Light",        // 462: Racer Sport
    "Moto Diavel",       // 463: Ducati XDiavel S
    "RCplane",           // 464: RCplane
    "RCheli",            // 465: RCheli
    "BMW M5 F90",      // 466: BMW M5 F90
    "S600 W140",         // 467: Mercedes-Benz S600 W140
    "Moto MXV",          // 468: Aprilla MXV 450
    "Sparrow",           // 469: Sparrow
    "?? ù???",           // 470: Gaz Tigr
    "??????????",        // 471: ??????????
    "???????ù ?????",    // 472: ???????ù ?????
    "?????????",         // 473: ?????????
    "??? 21",            // 474: ??? 21
    "Aura O8",           // 475: Audi Q8
    "???????????",       // 476: ???????????
    "RX-7",              // 477: Mazda RX-7
    "?? 27151",          // 478: ?? 27151
    "?? 2410",           // 479: GAZ Volga 2410
    "BMW M4 ?????????",// 480: BMW Z4 M40i
    "????????? ????",    // 481: ????????? ????
    "M Multibus",        // 482: Mercedes-Benz V-Class
    "M Sprint",          // 483: Mercedes-Benz Sprinter 319CDI
    "ù???????",          // 484: ù???????
    "??? ????",          // 485: ??? ????
    "?????????",         // 486: ?????????
    "????????",          // 487: ????????
    "News ????",         // 488: News ????
    "XC90",              // 489: Volvo XC90
    "RR Jip",            // 490: Range Rover SVR
    "????????",          // 491: VAZ 2112
    "???ù???",           // 492: VAZ 2109
    "Speedy Yacht",      // 493: Speedy Yacht
    "BMW M8 Roadster", // 494: BMW I8 Roadster
    "F Pickup",          // 495: Ford Raptor F-150
    "Goal 2",            // 496: Volkswagen Golf GTI 2
    "??? ????",          // 497: ??? ????
    "M Sprint",          // 498: Mercedes-Benz Sprinter
    "?? 53",             // 499: ??? 53
    "?? 69",             // 500: GAZ 69
    "RCgobl",            // 501: RCgobl
    "N GT-R 35",         // 502: Nissan GT-R R35
    "Demon",             // 503: Dodge Demon SRT
    "Bloodra",           // 504: Bloodra
    "Escaludore OLD",    // 505: Cadillac Escalade IV
    "911 S",             // 506: Porsche 911 Carrera S
    "Aura 4",            // 507: Audi A4
    "?? ???????",        // 508: ??? ???????
    "????????? ????",    // 509: ????????? ????
    "?????? ?????????",  // 510: ?????? ?????????
    "Beagle",            // 511: Beagle
    "Cropdast",          // 512: Cropdast
    "Stunt",             // 513: Stunt
    "Truck Euro",        // 514: DAF XF16 Euro 6
    "???",               // 515: ???
    "Dulo",              // 516: Volkswagen Polo
    "??? ?????ù",        // 517: ??? ?????ù
    "???? 977",          // 518: ???? 977
    "Shamal",            // 519: Shamal
    "???????????",       // 520: ???????????
    "Moto S1000",        // 521: BMW S 1000 RR
    "Moto Nindzya",      // 522: Kawasaki Ninja H2R
    "Moto Yama",         // 523: Yamaha FZ-10
    "??????????",        // 524: ??????????
    "?????????",         // 525: ?????????
    "Trinity 60",        // 526: Infiniti Q60S
    "BMW M3 E46",      // 527: BMW M3 E46
    "ù???????",          // 528: ù???????
    "?? 2170",           // 529: VAZ 2170
    "?????????",         // 530: ?????????
    "ù??????",           // 531: ù??????
    "???????",           // 532: ???????
    "Aura Road 8",       // 533: Audi R8 V10
    "BMW M3 E30",      // 534: BMW M3 E30
    "Slamvan",           // 535: Slamvan
    "242 DL",            // 536: Volvo 242DL
    "?????",             // 537: ?????
    "?????",             // 538: ?????
    "???? ???????",      // 539: ???? ???????
    "Sedan 3",           // 540: Mazda Sedan 3
    "488 Good",          // 541: Ferrari 488 GTB
    "?????? 4?4",        // 542: Niva Urban
    "Comaric",           // 543: Chevrolet Camaro ZL1
    "???????",           // 544: ???????
    "Sport Kapriz",      // 545: Daewoo Matiz Sport
    "Sunarise",          // 546: Hyundai Solaris 2021
    "???ù???",           // 547: VAZ 2110
    "???? ????",         // 548: ???? ????
    "?? 1111",           // 549: VAZ 1111
    "Camrita 3.5",       // 550: Toyota Camry 3.5
    "Julia",             // 551: Alfa Romeo Guilia
    "?????? ?????",      // 552: ?????? ?????
    "??????????",        // 553: ??????????
    "??? 3303",          // 554: ??? 3303
    "?? 968",            // 555: ZAZ 968
    "??????",            // 556: ??????
    "??????",            // 557: ??????
    "BMW M4 F84",      // 558: BMW M4 F84
    "Mark II",           // 559: Toyota Mark II
    "Syberia WinR",      // 560: Subaru WRX STI
    "??????? 427",       // 561: ??????? 427
    "Sunline 34",        // 562: Nissan Skyline R34
    "???? ????",         // 563: ???? ????
    "RCtank",            // 564: RCtank
    "A45",               // 565: Mercedes-Benz A45 AMG
    "????????",          // 566: ??? 2104
    "Ampala",            // 567: Chevrolet Impala 1967
    "Bandito",           // 568: Bandito
    "?????",             // 569: ?????
    "?????",             // 570: ?????
    "????",              // 571: ????
    "?????????????",     // 572: ?????????????
    "Punsh Pinga",       // 573: Puch Pinzgauer 710K
    "????? ????",        // 574: ????? ????
    "?? 20",             // 575: ??? 20
    "58-Russia 2",       // 576: Marussia B2
    "AT 400",            // 577: AT 400
    "??? ????",          // 578: ??? ????
    "Gelik 65",          // 579: Mercedes-Benz G65 AMG
    "?? 13",             // 580: ??? 13
    "GSX 750",           // 581: Suzuki GSX-R750
    "F Transfer",        // 582: Ford Transit
    "Tug",               // 583: Tug
    "????????",          // 584: ????????
    "?ù??????",          // 585: VAZ 2115
    "Moto Yama R6",      // 586: Yamaha YZF-R6
    "Hocus Mocus RS",    // 587: Ford Focus RS
    "???? ????",         // 588: ???? ????
    "Goal",              // 589: Volkswagen Golf GTI
    "?????",             // 590: ?????
    "??????",            // 591: ??????
    "Androm",            // 592: Androm
    "Dodo",              // 593: Dodo
    "RCcam",             // 594: RCcam
    "Launch",            // 595: Launch
    "BMW M5 F90 ???",      // 596: BMW M5 F90
    "?? 2170",           // 597: ??? 2170
    "Gretta",            // 598: Volkswagen Jetta
    "??? ???",           // 599: ??? ???
    "???? 2335",         // 600: ???? 2335
    "????",              // 601: ????
    "Black R1",          // 602: Brawn GP F1
    "F Must GT",         // 603: Ford Mustang GT
    "Panama",            // 604: Porsche Panamera S
    "?????? ???",        // 605: ?????? ???
    "??????",            // 606: ??????
    "??????",            // 607: ??????
    "????????",          // 608: ????????
    "????",              // 609: ????
    "????",              // 610: ????
    "?????? ?????",      // 611: ?????? ?????
    "F Crow Victory",    // 612: Ford Crown Victoria
    "Link Navigate",     // 613: Lincoln Navigator
    "?? 41",             // 614: ??? 4104
    "GtCLK",             // 615: Mercedes-Benz CLK GTR
    "Silver 6x6",        // 616: Chevrolet Silverado 6x6
    "BMW M4 GT",       // 617: BMW M4 GT3
    "F Tor",             // 618: Ford Torino
    "Linka Sport",       // 619: Lada Kalina Sport
    "",                  // 620: ?????
    "",                  // 621: ?????
    "",                  // 622: ?????
    "",                  // 623: ?????
    "Projectile 1",      // 624: Mercedes-Benz AMG Project One
    "Hudsornet",         // 625: Hudson Hornet
    "Truck 3100",        // 626: Chevrolet 3100 Tow Truck
    "Fer Day-tone",      // 627: Ferrari Daytona
    "Mursiege L",        // 628: Lamborghini Murcielago
    "Ice Charger",       // 629: Dodge Ice Charger
    "F FalcXB",          // 630: FORD FALCON XB
    "Hot-Rod F132",      // 631: Hot-Road F132
    "SCG 003",           // 632: SCG 003
    "Mitsu Clips",       // 633: Mitsubishi Eclipse
    "Smart2",            // 634: Smart Fortwo 2
    "Bell-Wind",         // 635: Chevrolet Bel Air
    "",                  // 636: ?????
    "",                  // 637: ?????
    "280 P",             // 638: Mercedes 280SL Pagoda
    "Comaric 1968",      // 639: Chevrolet Camaro SS
    "Hand 650R",         // 640: Honda CB 650R
    "F Bro",             // 641: Ford Bronco
    "BMW M3 81 Tour",  // 642: BMW M3 G81
    "Drakar 11",         // 643: Porsche 911 Dakar
    "",                  // 644: ?????
    "Punker",            // 645: Punker
    "",                  // 646: ?????
    "",                  // 647: ?????
    "",                  // 648: ?????
    "",                  // 649: ?????
    "",                  // 650: ?????
    "",                  // 651: ?????
    "",                  // 652: ?????
    "",                  // 653: ?????
    "",                  // 654: ?????
    "",                  // 655: ?????
    "S240 X",            // 656: Nissan 240SX
    "Pag Zond",          // 657: Pagani Zonda
    "Carnaval",          // 658: KIA Carnival
    "Rent 5 3E",         // 659: Renault R5 Turbo 3E
    "Must B302",         // 660: Boss 302 Mustang
    "Fer 812S",          // 661: Ferrari 812 Superfast
    "",                  // 662: ?????
    "",                  // 663: ?????
    "",                  // 664: ?????
    "Mist 16",           // 665: Bugatti W16 Mistral
    "Veneron",           // 666: Bugatti Veyron
    "Koenig Dominant",   // 667: Koenigsegg Regera
    "Fer LFer",          // 668: Ferrari LaFerrari
    "Electra Truck",     // 669: Tesla CyberTruck
    "NSSIX",             // 670: Acura NSX 2023
    "Emirrora",          // 671: Lotus Emira
    "MX5 Medgalia",      // 672: Mazda MX-5 Miata
    "True 86",           // 673: Toyota AE86
    "Sunliner 32",       // 674: Nissan Skyline R32
    "Wave Rider 160",    // 675: Kawasaki JetSki STX
    "",                  // 676: ?????
    "",                  // 677: ?????
    "Siberia LevG",      // 678: Subaru Levorg
    "Aura 8",            // 679: Audi A8 2022
    "RV20",              // 680: Range Rover Velar
    "October 7",         // 681: Skoda Octavia A7
    "Premierus",         // 682: Toyota Prius 2018
    "",                  // 683: ?????
    "",                  // 684: ?????
    "",                  // 685: ?????
    "",                  // 686: ?????
    "",                  // 687: ?????
    "",                  // 688: ?????
    "",                  // 689: ?????
    "",                  // 690: ?????
    "",                  // 691: ?????
    "",                  // 692: ?????
    "",                  // 693: ?????
    "",                  // 694: ?????
    "",                  // 695: ?????
    "",                  // 696: ?????
    "",                  // 697: ?????
    "",                  // 698: ?????
    "",                  // 699: ?????
    "",                  // 700: ?????
    "",                  // 701: ?????
    "",                  // 702: ?????
    "",                  // 703: ?????
    "",                  // 704: ?????
    "",                  // 705: ?????
    "",                  // 706: ?????
    "",                  // 707: ?????
    "",                  // 708: ?????
    "",                  // 709: ?????
    "",                  // 710: ?????
    "",                  // 711: ?????
    "",                  // 712: ?????
    "",                  // 713: ?????
    "",                  // 714: ?????
    "",                  // 715: ?????
    "",                  // 716: ?????
    "",                  // 717: ?????
    "",                  // 718: ?????
    "",                  // 719: ?????
    "",                  // 720: ?????
    "",                  // 721: ?????
    "",                  // 722: ?????
    "",                  // 723: ?????
    "",                  // 724: ?????
    "",                  // 725: ?????
    "",                  // 726: ?????
    "",                  // 727: ?????
    "",                  // 728: ?????
    "",                  // 729: ?????
    "",                  // 730: ?????
    "",                  // 731: ?????
    "",                  // 732: ?????
    "",                  // 733: ?????
    "",                  // 734: ?????
    "",                  // 735: ?????
    "",                  // 736: ?????
    "",                  // 737: ?????
    "",                  // 738: ?????
    "Celelica",          // 739: Toyota Celica
    "Aura R8 GT",        // 740: Audi R8 LMS GT2
    "Suzu 1100G",        // 741: Suzuki gsxr1100
    "GT 992R",           // 742: Porsche GT3 RS 992
    "190 Eva 2",         // 743: Mercedes-Benz 190E Evo II
    "Tundanas Car",      // 744: Toyota Tundra Nascar
    "Viper",             // 745: Dodge Viper 2017 GTC
    "Count Touch",       // 746: Lamborghini Countach
    "BMW 3.5"      // 747: BMW 3.5 CSL 1974
};

// ?????????????? ?????? ??ù ????????????? ID (??????ù ? 2371)
new ExtendedVehicleNames[][32] = {
    "Cornet",            // 2371: Chevrolet Corvette C6
    "McSLR",             // 2372: Mercedes-Benz SLR McLaren
    "Devils",            // 2373: Lamborghini Diablo SV
    "F Must Memoir",     // 2374: Ford Mustang Eleanor
    "Atlantis 56",       // 2375: Bugatti Type 57SC Atlantic
    "Moto Fire",         // 2376: DarkFire
    "Livan Sport",       // 2377: Lykan HyperSport
    "???????",           // 2378: UAZ 452 Buhanka
    "?????????",         // 2379: GAZ 3307
    "Black Finder",      // 2380: Nissan Pathfinder 2022
    "Guitara",           // 2381: Opel Vivaro 2022
    "Storm 4x4",         // 2382: Niva 4x4 Storm
    "??????? (?????ù)",  // 2383: UAZ 452 Braviy
    "???????? ??????",   // 2384: ???????? ??????
    "Qishqa",            // 2385: Nissan Qashqai
    "Aura Road 6S",      // 2386: Audi RS6 C8
    "BMW 3-Series G20",      // 2387: BMW 3-Series G20
    "BMW M5 F10",      // 2388: BMW M5 F10
    "BMW M6M F12",      // 2389: BMW M6 F12
    "BMW X5M E70",     // 2390: BMW X5M E70
    "BMW X5M G05",     // 2391: BMW X5M G05
    "Supra 90YO",        // 2392: Toyota Supra A90
    "Cornet C8",         // 2393: Chevrolet Corvette C8
    "Charger",           // 2394: Dodge Charger SRT
    "Mitsu EVA 8",       // 2395: Mitsubishi Lancer Evo 8
    "RK8",               // 2396: Mazda RX-8
    "370 Sport",         // 2397: Nissan 370Z
    "Danger",            // 2398: Flanker F
    "6 Element",         // 2399: Lamborghini Sesto Elemento
    "Salon 7",           // 2400: Saleen S7
    "Fre40",             // 2401: Ferrari F40
    "ToxicGT",           // 2402: Hennessey Venom GT
    "CelestrialSLS",     // 2403: Mercedes-Benz SLS AMG
    "Rotessa",           // 2404: Ferrari Testarossa
    "SportNX",           // 2405: Honda NSX
    "Zondo",             // 2406: Ferrari Enzo
    "Future DLX12",      // 2407: DeLorean DMC
    "Super Taxi",        // 2408: Peugeot 406
    "S200R",             // 2409: Honda S2000
    "", "", "", "", "", "", "", "", "", "", // 2410-2419
    "", "", "", "", "", "", "", "", "", "", // 2420-2429
    "", "", "", "", "", "", "", "", "", "", // 2430-2439
    "", "", "", "", "", "", "", "", "", "", // 2440-2449
    "", "", "", "", "", "", "", "", "", "", // 2450-2459
    "", "", "", "", "", "", "", "", "", "", // 2460-2469
    "", "", "", "", "", "", "", "", "", "", // 2470-2479
    "", "", "", "", "", "", "", "", "", "", // 2480-2489
    "", "", "", "", "", "", "", "", "", "", // 2490-2499
    "", "", "", "", "", "", "", "", "", "", // 2500-2509
    "", "", "", "", "", "", "", "", "", "", // 2510-2519
    "", "", "", "", "", "", "", "", "", "", // 2520-2529
    "", "", "", "", "", "", "", "", "", "", // 2530-2539
    "", "", "", "", "Electra X",         // 2543: Tesla Model X
    "Electra S",         // 2544: Tesla Model S
    "Aura 7 Sport",      // 2545: Audi RS7 Sport
    "E63S",              // 2546: Mercedes-Benz E63S
    "LC 200",            // 2547: Toyota Land Cruiser 200
    "Nevesta 1.5",       // 2548: Lada Vesta Sedan
    "Uragan",            // 2549: Lamborghini Huracan
    "Geep 400LS",        // 2550: Mercedes-Benz GLS 400
    "Lumus",             // 2551: Lamborghini Urus
    "Supra",             // 2552: Toyota Supra A80
    "Aura O7",           // 2553: Audi Q7
    "Grand Big",         // 2554: Jeep Grand Cherokee
    "?? ???????",        // 2555: Lada Granta
    "?? ???????",        // 2556: Lada Granta
    "Nevesta 2.0",       // 2557: Lada Vesta SW Cross
    "S650",              // 2558: Mercedes-Benz MB S650
    "Escaludore NEW",    // 2559: Cadillac Escalade
    "Motherland",        // 2560: UAZ Patriot
    "Motherland Pickup", // 2561: UAZ Patriot Pickup
    "Motherland",        // 2562: UAZ Patriot
    "Sapphire",          // 2563: Rolls-Royce Phantom
    "Amber",             // 2564: Rolls-Royce Cullinan
    "Roggane",           // 2565: Renault Logan
    "River",             // 2566: Kia Rio
    "BMW 5 E60",      // 2567: BMW M5 E60
    "BMW F5",         // 2568: BMW X5 E53
    "La Noire",          // 2569: Bugatti La Noire
    "Divero",            // 2570: Bugatti Divo
    "V Minibus Halloween", // 2571: Volkswagen Station Delux
    "Taycon Halloween",  // 2572: Raesr Tachyon 2019
    "Gelik 63",          // 2573: Mercedes-Benz G63 AMG
    "BMW F7",         // 2574: BMW X7 M50i
    "Luxe 4x4",          // 2575: Lexus LX570
    "Mercy Coupe",       // 2576: Mercury Coupe
    "Borris Minor",      // 2577: Morris Minor
    "BMW 8 F92",      // 2578: BMW M8 F92
    "BMW 8 F93",      // 2579: BMW M8 F93 Gran Coupe
    "BMW 7 E38",      // 2580: BMW 7-Series E38
    "Taigan",            // 2581: Porsche Taycan Turbo S
    "Banana 63",         // 2582: Mercedes-Benz CLS63 AMG
    "Diamond",           // 2583: Rolls-Royce Wraith
    "Elegant 5",         // 2584: KIA K5
    "Old Coupe",         // 2585: Mercedes-Benz 300SL Coupe
    "Panthera Old",      // 2586: Jaguar XK120 Roadster
    "F Transfer",        // 2587: Ford Transit 2020
    "Hocus Mocus 3",     // 2588: Ford Focus 3 Sedan
    "Faster",            // 2589: Skoda Rapid 2020
    "G6",                // 2590: Mercedes-Benz EQS580
    "Materic",           // 2591: Bentley Continental GT
    "Halloween Car",     // 2592: Lotus Exige Halloween
    "Colorado",          // 2593: Lamborghini Gallardo
    "Syberia BR",        // 2594: Subaru BRZ
    "Singer 11",         // 2595: Porsche 911 Singer
    "Dogger 4x4",        // 2596: Dodge RAM TRX
    "Senator",           // 2597: Aurus Senat
    "BMW 4 G82",      // 2598: BMW M4 G82
    "BMW 7 750Li",   // 2599: BMW 7-Series 750Li
    "Millioner",         // 2600: Bentley Mulliner Bacalar
    "Richon",            // 2601: Bugatti Chiron
    "Taco",              // 2602: Chevrolet Tahoe RST
    "E63",               // 2603: Mercedes-Benz E63 W212
    "Trassar",           // 2604: Volkswagen Passat 2021
    "California LA",     // 2605: Ferrari California T
    "Cobra",             // 2606: AC Shelby Cobra
    "BMW M1",         // 2607: BMW M1
    "Rangler",           // 2608: Jeep Wrangler
    "Little Coop",       // 2609: Mini Cooper
    "BMW 5 E34",      // 2610: BMW M5 E34
    "Aura 100",          // 2611: Audi 100 C4
    "F Must Hoon",       // 2612: Ford Mustang Hoonigan
    "H2 6x6",            // 2613: Hummer H2 6X6
    "California 250",    // 2614: Ferrari 250GT California
    "Moto 5",            // 2615: ?? ?????? 5
    "Track 4x4",         // 2616: UAZ Hunter
    "Big Hum",           // 2617: Hummer Humvee
    "BMW 3 E36",      // 2618: BMW M3 E36
    "488 Pizza",         // 2619: Ferrari 488 Pista
    "Luxe RCF",          // 2620: Lexus RCF
    "China Car P7",      // 2621: Xpeng P7
    "F Must E",          // 2622: Ford Mustang Mach E
    "Camrita 55",        // 2623: Toyota Camry XV55
    "Aura 6",            // 2624: Audi A6 C5
    "Trinity XF50",      // 2625: Infiniti FX50S
    "Canyone",           // 2626: Porsche Cayenne S
    "Sliva S15",         // 2627: Nissan Silvia S15
    "BRF 6x6",           // 2628: BRF Outlander 6x6
    "Moto BP",           // 2629: ???? ??? 8.103
    "??????-?????",      // 2630: ??????? 412 Rally
    "Syberia Ibizza Rally", // 2631: Subaru WRX STI Rally
    "Deluxe Car",        // 2632: Toyota Hilux Dakar
    "Sport GT"           // 2633: Ford GT Sport
};


stock GetVehicleNameByModel(modelid) {
    if (modelid >= 400 && modelid <= 747) {
        return VehicleNames[modelid - 400];
    }
    else if (modelid >= 2371 && modelid <= 2633) {
        return ExtendedVehicleNames[modelid - 2371];
    }
    else if (modelid >= 2543 && modelid <= 2633) {
        return ExtendedVehicleNames[modelid - 2371];
    }
//    return "Unknown"; // ???? ID ?? ??????
}

CMD:tuning2(playerid, params[])
{
    new Node:tuning_json = JSON_Object();
    
    JSON_SetInt(tuning_json, "o", 1);
    JSON_SetInt(tuning_json, "w", 0);
    JSON_SetInt(tuning_json, "t", 0);
    JSON_SetInt(tuning_json, "j", 1000);
    JSON_SetString(tuning_json, "nm", GetPlayerNameEx(playerid));
    // ?????????? ??????? ??ù ????????ù ???????ù ??????
    JSON_SetString(tuning_json, "n", GetVehicleNameByModel(GetVehicleModel(GetPlayerVehicleID(playerid))));
    JSON_SetInt(tuning_json, "m", GetPlayerMoneyEx(playerid));

    // ?????????? ????????? ??????-????
    new Float:x = 998.23653, Float:y = 1499.67341, Float:z = 1499.66617;
    SetVehiclePos(GetPlayerVehicleID(playerid), x, y, z);
    SetVehicleZAngle(GetPlayerVehicleID(playerid), 270.0); // ??????? ?????? ? ??????

    // ????????? ?????????
    new interior = 1;
    SetPlayerInterior(playerid, interior);

    // ??????
    SetPlayerCameraPos(playerid, x - 4.0, y + 4.0, z + 1.0);
    SetPlayerCameraLookAt(playerid, x, y, z + 1.0);

    ShowPlayerGUI(playerid, 28, tuning_json);
    JSON_Cleanup(tuning_json);
    return 1;
}

public FindGameId(internalId, array[][], array_size)
{
    for(new i = 0; i < array_size; i++)
    {
        if(array[i][0] == internalId)
        {
            return array[i][1];
        }
    }
    return -1;
}

public BuyPlayerCar(playerid, internal_id, game_id, color)
{
    if(game_id == -1)
    {
        return;
    }

    new free_car_id = GetFreeOwnableCarID();
    new Float:pos_x = 2498.205810;
    new Float:pos_y = -742.256042;
    new Float:pos_z = 12.164166;
    new Float:angle = 356.240051;

    SetOwnableCarData(free_car_id, OC_OWNER_ID, GetPlayerAccountID(playerid));
    SetOwnableCarData(free_car_id, OC_MODEL_ID, game_id);
    SetOwnableCarData(free_car_id, OC_COLOR_1, color);
    SetOwnableCarData(free_car_id, OC_COLOR_2, 0);
    SetOwnableCarData(free_car_id, OC_POS_X, pos_x);
    SetOwnableCarData(free_car_id, OC_POS_Y, pos_y);
    SetOwnableCarData(free_car_id, OC_POS_Z, pos_z);
    SetOwnableCarData(free_car_id, OC_ANGLE, angle);

    strmid(g_ownable_car[free_car_id][OC_NUMBER], "regerds_test_number", 0, 8, 8);

    SetOwnableCarData(free_car_id, OC_ALARM, false);
    SetOwnableCarData(free_car_id, OC_KEY_IN, false);
    SetOwnableCarData(free_car_id, OC_CREATE, gettime());

    format(g_ownable_car[free_car_id][OC_OWNER_NAME], 21, GetPlayerNameEx(playerid));

    new database_query[256];
    format(database_query, sizeof(database_query), "INSERT INTO ownable_cars (owner_id, model_id, color_1, color_2, pos_x, pos_y, pos_z, angle, create_time) VALUES ('%d','%d','%d','%d','%f','%f','%f','%f','%d')",
        GetPlayerAccountID(playerid), game_id, color, 0, pos_x, pos_y, pos_z, angle, gettime());
    mysql_query(mysql, database_query, true);

    for(new i = 0; i < g_player_donate_data[playerid][ADDED_PROMOTIONS]; i++)
    {
        if(g_player_added_promotions_data[playerid][i][0] == internal_id)
        {
            g_player_added_promotions_data[playerid][i][0] = -1;
        }
    }
}

public BuyPlayerSkin(playerid, internal_id, game_id)
{
    SetPlayerData(playerid, P_SKIN, game_id);
    UpdatePlayerDatabaseInt(playerid, "skin", game_id);
    SetPlayerSkin(playerid, game_id);
    SetPlayerSkinInit(playerid);
}

public ShowSuccesfullBuyPack(playerid, pack_name[128], price, internal_id)
{
    new Node:json_packet_data = JSON_Object(), json_data[512];
    JSON_SetInt(json_packet_data, "t", 0);
    JSON_SetInt(json_packet_data, "y", 1);
    JSON_SetInt(json_packet_data, "g", internal_id);
    JSON_SetInt(json_packet_data, "r", GetPlayerMoney(playerid));
    JSON_SetInt(json_packet_data, "s", GetPlayerDonateRub(playerid));
    JSON_SetString(json_packet_data, "m", "-");
    JSON_SetString(json_packet_data, "n", pack_name);
    JSON_Stringify(json_packet_data, json_data);
    OnPacketIncoming(playerid, 22, json_packet_data);
    JSON_Cleanup(json_packet_data);
}

CMD:donatetest(playerid)
{
	new Node:donate_outcoming_json = JSON_Object(), donate_outcoming_data[512], promotions_array_len;

	JSON_ArrayLength(g_player_donate_data[playerid][JSON_PROMOTIONS_ARRAY], promotions_array_len);

	if(promotions_array_len == 0)
	{
		RestorePlayerPromotions(playerid);
	}

	JSON_SetInt(donate_outcoming_json, "o", 1); // ????????, ????? ??????? ???, ??????????? ????? ? ?????? ???????

	if(strcmp("None", GetPlayerData(playerid, P_EMAIL)))
	{
		JSON_SetString(donate_outcoming_json, "em", GetPlayerData(playerid, P_EMAIL));
	}

	JSON_SetString(donate_outcoming_json, "nm", GetPlayerNameEx(playerid));

	JSON_SetInt(donate_outcoming_json, "ds", 0); // ???? ?????? ?????? ??????? ?2, ????????? ?? ?????? ??????????, ??????? ?????? ??????? ????? ?? ???????
	JSON_SetInt(donate_outcoming_json, "sv", 1); // ???? ?????????? id ?????? ??????? (??? ????? ???? ?????, ??????? ???? ????? ?????)

	JSON_SetInt(donate_outcoming_json, "r", GetPlayerMoney(playerid));
	JSON_SetInt(donate_outcoming_json, "d", GetPlayerDonateRub(playerid));

	JSON_SetArray(donate_outcoming_json, "s", g_player_donate_data[playerid][JSON_PROMOTIONS_ARRAY]);

	JSON_SetInt(donate_outcoming_json, "p", 7200); // ????? ? ????????? ???????, ??????? ???????? ????????????

    ShowPlayerGUI(playerid, 22, donate_outcoming_json);


}

CMD:posteeenujno(playerid, params[])
{
    if (!IsPlayerInArmy(playerid)) {
        SendClientMessage(playerid, COLOR_GREY, "?? ?? ???????? ? ?????.");
        return 1;
    }

    new postid = GetPVarInt(playerid, "CurrentPostID");

    if (postid < 0 || postid >= MAX_POSTS) {
        SendClientMessage(playerid, COLOR_GREY, "?? ?? ?????????? ?ù??? ? ????????? ??????.");
        return 1;
    }

    ShowPostDialog(playerid, postid);
    return 1;
}

stock IsPlayerInArmy(playerid)
{
    return GetPlayerTeamEx(playerid) == TEAM_ARMY;
}

CMD:opendoor(playerid, params[])
{
    if(IsPlayerInDynamicArea(playerid, door)) {
        if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI)) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[0]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(doorf, -1101.12, 1518.60, 1500.18, 5.0, 0.0, 0.0, 180.0);
        g_doorOpened[0] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 0);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, door1)) {
        if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI)) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[1]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(doorf1, -1098.72, 1493.37, 1500.18, 5.0, 0.0, 0.0, 90.0);
        g_doorOpened[1] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 1);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, door2)) {
        if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI)) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[2]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(doorf2, -1104.93, 1501.30, 1500.18, 5.0, 0.0, 0.0, -90.0);
        g_doorOpened[2] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 2);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, door3)) {
        if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI)) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[3]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(doorf3, -1110.83, 1503.07, 1500.18, 5.0, 0.0, 0.0, 90.0);
        g_doorOpened[3] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 3);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, door4)) {
        if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI)) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[4]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(doorf4, -1114.52, 1507.87, 1500.18, 5.0, 0.0, 0.0, 0.0);
        g_doorOpened[4] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 4);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, door5)) {
        if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI)) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[5]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(doorf5, -1105.26, 1515.25, 1500.18, 5.0, 0.0, 0.0, 90.0);
        g_doorOpened[5] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 5);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, door6)) {
        if(!(TEAM_DPS <= GetPlayerTeamEx(playerid) <= TEAM_FBI)) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[6]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(doorf6, -1114.28, 1485.00, 1500.18, 5.0, 0.0, 0.0, 0.0);
        g_doorOpened[6] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 6);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, voenka)) {
        if(GetPlayerTeamEx(playerid) != TEAM_ARMY) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[7]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(doorvoen, 1795.92, 1732.29, 1493.28, 5.0, 0.0, 0.0, 90.0);
        g_doorOpened[7] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 7);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, bolk1)) {
        if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[8]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(bolka1, 1500.70, 2509.14, 2501.10, 5.0, 0.0, 0.0, 0.0);
        MoveObject(bolka2, 1502.44, 2509.14, 2501.10, 5.0, 0.0, 0.0, 180.0);
        g_doorOpened[8] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 8);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, bolk2)) {
        if(GetPlayerTeamEx(playerid) != TEAM_HOSPITAL) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[9]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(bolka4, 1514.15, 2500.95, 2501.10, 5.0, 0.0, 0.0, -90.0);
        MoveObject(bolka5, 1514.15, 2499.23, 2501.10, 5.0, 0.0, 0.0, 90.0);
        g_doorOpened[9] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 9);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, spherekalitka1)) {
        if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[10]) return SendClientMessage(playerid, COLOR_GREY, "ù??????? ??? ??????");
        MoveObject(kalitka1, -1776.81,-2731.33, 7.5, 5.522, 0.0, 0.0, 323.0);
        g_doorOpened[10] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 10);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, spherekalitka2)) {
        if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[11]) return SendClientMessage(playerid, COLOR_GREY, "ù??????? ??? ??????");
        MoveObject(kalitka2, -1764.28,-2795.48, 7.5, 5.522, 0.0, 0.0, 323.0);
        g_doorOpened[11] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 11);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, spherekalitka3)) {
        if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[12]) return SendClientMessage(playerid, COLOR_GREY, "ù??????? ??? ??????");
        MoveObject(kalitka3, -1683.55,-2812.77, 7.5, 5.522, 0.0, 0.0, 143.0);
        g_doorOpened[12] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 12);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, spherekalitka4)) {
        if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[13]) return SendClientMessage(playerid, COLOR_GREY, "ù??????? ??? ??????");
        MoveObject(kalitka4, -1681.68, -2737.23, 7.5, 5.522, 0.0, 0.0, 53.0);
        g_doorOpened[13] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 13);
        return 1;
    }
    if(IsPlayerInDynamicArea(playerid, svidaniesphere)) {
        if(GetPlayerTeamEx(playerid) != TEAM_FSIN) return SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????????????? ? ???? ??????");
        if(g_doorOpened[14]) return SendClientMessage(playerid, COLOR_GREY, "????? ??? ???????");
        MoveObject(svidaniedoor, -2023.03, -1800.54, 1501.33, 5.522, 0.0, 0.0, -90.0);
        g_doorOpened[14] = true;
        SetTimerEx("CloseDoor", 5000, false, "i", 14);
        return 1;
    }

    SendClientMessage(playerid, COLOR_GREY, "?ù??? ? ???? ???? ?????? ??ù ???????ù");
    return 1;
}

forward CloseDoor(doorid);
public CloseDoor(doorid)
{
    switch(doorid)
    {
        case 0:
        {
            MoveObject(doorf, -1101.12, 1518.60, 1500.18, 5.0, 0.0, 0.0, 90.0);
            g_doorOpened[0] = false;
            return 1;
        }
        case 1:
        {
            MoveObject(doorf1, -1098.72, 1493.37, 1500.18, 5.0, 0.0, 0.0, 0.0);
            g_doorOpened[1] = false;
            return 1;
        }
        case 2:
        {
            MoveObject(doorf2, -1104.93, 1501.30, 1500.18, 5.0, 0.0, 0.0, 0.0);
            g_doorOpened[2] = false;
            return 1;
        }
        case 3:
        {
            MoveObject(doorf3, -1110.83, 1503.07, 1500.18, 5.0, 0.0, 0.0, 0.0);
            g_doorOpened[3] = false;
            return 1;
        }
        case 4:
        {
            MoveObject(doorf4, -1114.52, 1507.87, 1500.18, 5.0, 0.0, 0.0, -90.0);
            g_doorOpened[4] = false;
            return 1;
        }
        case 5:
        {
            MoveObject(doorf5, -1105.26, 1515.25, 1500.18, 5.0, 0.0, 0.0, 0.0);
            g_doorOpened[5] = false;
            return 1;
        }
        case 6:
        {
            MoveObject(doorf6, -1114.28, 1485.00, 1500.18, 5.0, 0.0, 0.0, -90.0);
            g_doorOpened[6] = false;
            return 1;
        }
        case 7:
        {
            MoveObject(doorvoen, 1795.92, 1732.29, 1493.28, 5.0, 0.0, 0.0, 0.0);
            g_doorOpened[7] = false;
            return 1;
        }
        case 8:
        {
            MoveObject(bolka1, 1500.70, 2509.14, 2501.10, 5.0, 0.0, 0.0, 90.0);
            MoveObject(bolka2, 1502.44, 2509.14, 2501.10, 5.0, 0.0, 0.0, 90.0);
            g_doorOpened[8] = false;
            return 1;
        }
        case 9:
        {
            MoveObject(bolka4, 1514.15, 2500.95, 2501.10, 5.0, 0.0, 0.0, 0.0);
            MoveObject(bolka5, 1514.15, 2499.23, 2501.10, 5.0, 0.0, 0.0, 0.0);
            g_doorOpened[9] = false;
            return 1;
        }
        case 10:
        {
            MoveObject(kalitka1, -1776.81, -2731.33, 7.5, 5.522, 0.0, 0.0, 233.0);
            g_doorOpened[10] = false;
            return 1;
        }
        case 11:
        {
            MoveObject(kalitka2, -1764.28, -2795.48, 7.5, 5.522, 0.0, 0.0, 233.0);
            g_doorOpened[11] = false;
            return 1;
        }
        case 12:
        {
            MoveObject(kalitka3, -1683.55, -2812.77, 7.5, 5.522, 0.0, 0.0, 51.0);
            g_doorOpened[12] = false;
            return 1;
        }
        case 13:
        {
            MoveObject(kalitka4, -1681.68, -2737.23, 7.5, 5.522, 0.0, 0.0, 143.0);
            g_doorOpened[13] = false;
            return 1;
        }
        case 14:
        {
            MoveObject(svidaniedoor, -2023.03, -1800.54, 1501.33, 5.522, 0.0, 0.0, 0.0);
            g_doorOpened[14] = false;
            return 1;
        }
    }
    return 1;
}

stock bool:IsWorkDayStarted(playerid)
{
	if(GetPlayerData(playerid, P_WORKDAY) == 1)
	{
		return true;
	}
	ShowNotificationNew(playerid, 0, 5, 0, 0, "??????? ??????? ????", " ");
	return false;
}

stock StartWorkDay(playerid)
{
	new org_id = GetPlayerTeamEx(playerid);

	SetPlayerSkin(playerid, GetPlayerData(playerid, P_OSKIN));
	SetPlayerColorEx(playerid, g_organization[org_id][O_COLOR]);
	SetPVarInt(playerid, "Form", 1);
	SetPlayerData(playerid, P_WORKDAY, 1);

	new query[100];
	mysql_format(mysql, query, sizeof query, "UPDATE accounts SET work_day=1 WHERE id=%d LIMIT 1", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, false);

	ShowNotificationNew(playerid, 1, 5, 0, 0, "?? ?????? ??????? ????", "");
	return 1;
}

stock ApplyWorkDayVisuals(playerid)
{
	if(GetPlayerData(playerid, P_WORKDAY) != 1) return 0;

	new org_id = GetPlayerTeamEx(playerid);

	SetPlayerSkin(playerid, GetPlayerData(playerid, P_OSKIN));
	SetPlayerColorEx(playerid, g_organization[org_id][O_COLOR]);
	SetPVarInt(playerid, "Form", 1);

	return 1;
}

stock EndWorkDay(playerid)
{
	SetPlayerData(playerid, P_WORKDAY, 0);
	SetPVarInt(playerid, "Form", 0);

	SetPlayerSkin(playerid, GetPlayerData(playerid, P_SKIN));
	SetPlayerColorEx(playerid, 0xFFFFFFFF);

	new query[100];
	mysql_format(mysql, query, sizeof query, "UPDATE accounts SET work_day=0 WHERE id=%d LIMIT 1", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, false);

	ShowNotificationNew(playerid, 1, 5, 0, 0, "?? ????????? ??????? ????", "");
	return 1;
}

CMD:kpp(playerid)
{
	if(kpp_hacked)
	{
		ShowPlayerDialog(playerid, DIALOG_KPP_ARMY, DIALOG_STYLE_MSGBOX,
			"{FF5555}Baze Russia RolePlay{FFFFFF} | ?????????? ???",
			"{FF5555}??? ???????. ?????????? ???????? ??????????.",
			"??", "");
		return 1;
	}

	new team = GetPlayerTeamEx(playerid);
	new rank = GetPlayerJob(playerid);

	if(team == TEAM_ARMY && rank >= 3)
	{
		ShowArmyKPPDialog(playerid);
	}
	else if(team >= 9 && team <= 11 && rank >= 6)
	{
		ShowPlayerDialog(playerid, DIALOG_KPP_HACK, DIALOG_STYLE_LIST,
			"{FF5555}Baze Russia RolePlay{FFFFFF} | ????? ???",
			"?????? ?????\n?????????", "???????", "???????");
	}
	else
	{
		SendClientMessage(playerid, COLOR_GREY, "??? ?????????? ?????? ????????.");
	}
	return 1;
}


stock SetupCameraEntrances()
{
    kamerazone1 = CreateDynamicSphere(-1798.07, -2759.53, 1501.04, 1.0);
    kameratext1 = CreateDynamic3DTextLabel("{FFFF00}<< ???? ? ?????? >>\n\n|{FFFFFF} ????? ??????: {FFFF00}1\n\n{FFFFFF}??????? ?? {FFFF00}????????? {FFFFFF}??ù ?????????????ù", COLOR_WHITE, -1798.07, -2759.53, 1501.34, 3.0);

    kamerazone2 = CreateDynamicSphere(-1801.93, -2757.65, 1501.04, 1.0);
    kameratext2 = CreateDynamic3DTextLabel("{FFFF00}<< ???? ? ?????? >>\n\n|{FFFFFF} ????? ??????: {FFFF00}2\n\n{FFFFFF}??????? ?? {FFFF00}????????? {FFFFFF}??ù ?????????????ù", COLOR_WHITE, -1801.93, -2757.65, 1501.34, 3.0);

    kamerazone3 = CreateDynamicSphere(-1798.06, -2750.95, 1501.04, 1.0);
    kameratext3 = CreateDynamic3DTextLabel("{FFFF00}<< ???? ? ?????? >>\n\n|{FFFFFF} ????? ??????: {FFFF00}3\n\n{FFFFFF}??????? ?? {FFFF00}????????? {FFFFFF}??ù ?????????????ù", COLOR_WHITE, -1798.06, -2750.95, 1501.34, 3.0);

    kamerazone4 = CreateDynamicSphere(-1801.93, -2749.02, 1501.04, 1.0);
    kameratext4 = CreateDynamic3DTextLabel("{FFFF00}<< ???? ? ?????? >>\n\n|{FFFFFF} ????? ??????: {FFFF00}4\n\n{FFFFFF}??????? ?? {FFFF00}????????? {FFFFFF}??ù ?????????????ù", COLOR_WHITE, -1801.93, -2749.02, 1501.34, 3.0);

    kamerazone5 = CreateDynamicSphere(-1798.06, -2742.24, 1501.04, 1.0);
    kameratext5 = CreateDynamic3DTextLabel("{FFFF00}<< ???? ? ?????? >>\n\n|{FFFFFF} ????? ??????: {FFFF00}5\n\n{FFFFFF}??????? ?? {FFFF00}????????? {FFFFFF}??ù ?????????????ù", COLOR_WHITE, -1798.06, -2742.24, 1501.34, 3.0);
}

stock SetupKarcerEntrances()
{
    karcerzone1 = CreateDynamicSphere(-1816.29, -2733.57, 1501.04, 1.0);
    karcertext1 = CreateDynamic3DTextLabel("{FFFF00}<< ???? ? ?????? >>\n\n|{FFFFFF} ????? ???????: {FFFF00}1\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", COLOR_WHITE, -1816.29, -2733.57, 1501.34, 3.0);

    karcerzone2 = CreateDynamicSphere(-1807.66, -2733.50, 1501.04, 1.0);
    karcertext2 = CreateDynamic3DTextLabel("{FFFF00}<< ???? ? ?????? >>\n\n|{FFFFFF} ????? ???????: {FFFF00}2\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", COLOR_WHITE, -1807.66, -2733.50, 1501.34, 3.0);

    karcerzone3 = CreateDynamicSphere(-1799.09, -2733.52, 1501.04, 1.0);
    karcertext3 = CreateDynamic3DTextLabel("{FFFF00}<< ???? ? ?????? >>\n\n|{FFFFFF} ????? ???????: {FFFF00}3\n\n{FFFFFF}????????? ?????\n??ù ?????????????ù", COLOR_WHITE, -1799.09, -2733.52, 1501.34, 3.0);
}

CMD:tptocamerafsin(playerid, params[])
{
    new Float:x, Float:y, Float:z;
    GetPlayerPos(playerid, x, y, z);

    if (IsPlayerInDynamicArea(playerid, kamerazone1))
    {
        SetPlayerPos(playerid, cameraTargets[0][0], cameraTargets[0][1], cameraTargets[0][2]);
        SetPlayerFacingAngle(playerid, 89.03);
        SetPlayerVirtualWorld(playerid, 2);
        SetPlayerInterior(playerid, 1);
        return 1;
    }
    if (IsPlayerInDynamicArea(playerid, kamerazone2))
    {
        SetPlayerPos(playerid, cameraTargets[1][0], cameraTargets[1][1], cameraTargets[1][2]);
        SetPlayerFacingAngle(playerid, 89.03);
        SetPlayerVirtualWorld(playerid, 3);
        SetPlayerInterior(playerid, 1);
        return 1;
    }
    if (IsPlayerInDynamicArea(playerid, kamerazone3))
    {
        SetPlayerPos(playerid, cameraTargets[2][0], cameraTargets[2][1], cameraTargets[2][2]);
        SetPlayerFacingAngle(playerid, 89.03);
        SetPlayerVirtualWorld(playerid, 4);
        SetPlayerInterior(playerid, 1);
        return 1;
    }
    if (IsPlayerInDynamicArea(playerid, kamerazone4))
    {
        SetPlayerPos(playerid, cameraTargets[3][0], cameraTargets[3][1], cameraTargets[3][2]);
        SetPlayerFacingAngle(playerid, 89.03);
        SetPlayerVirtualWorld(playerid, 5);
        SetPlayerInterior(playerid, 1);
        return 1;
    }
    if (IsPlayerInDynamicArea(playerid, kamerazone5))
    {
        SetPlayerPos(playerid, cameraTargets[4][0], cameraTargets[4][1], cameraTargets[4][2]);
        SetPlayerFacingAngle(playerid, 89.03);
        SetPlayerVirtualWorld(playerid, 6);
        SetPlayerInterior(playerid, 1);
        return 1;
    }

    SendClientMessage(playerid, -1, "?? ?? ?????????? ????? ????? ? ??????.");
    return 1;
}

CMD:tptokarcerfsin(playerid, params[])
{
    if (IsPlayerInDynamicArea(playerid, karcerzone1))
    {
        SetPlayerPos(playerid, karcerTarget[0], karcerTarget[1], karcerTarget[2]);
        SetPlayerFacingAngle(playerid, 357.63);
        SetPlayerVirtualWorld(playerid, 98);
        SetPlayerInterior(playerid, 1);
        return 1;
    }
    if (IsPlayerInDynamicArea(playerid, karcerzone2))
    {
        SetPlayerPos(playerid, karcerTarget[0], karcerTarget[1], karcerTarget[2]);
        SetPlayerFacingAngle(playerid, 357.63);
        SetPlayerVirtualWorld(playerid, 99);
        SetPlayerInterior(playerid, 1);
        return 1;
    }
    if (IsPlayerInDynamicArea(playerid, karcerzone3))
    {
        SetPlayerPos(playerid, karcerTarget[0], karcerTarget[1], karcerTarget[2]);
        SetPlayerFacingAngle(playerid, 357.63);
        SetPlayerVirtualWorld(playerid, 100);
        SetPlayerInterior(playerid, 1);
        return 1;
    }

    SendClientMessage(playerid, -1, "?? ?? ?????????? ????? ????? ? ??????.");
    return 1;
}

stock StartFollowing(followerid, targetid)
{
    g_IsFollowing[followerid] = true;
    g_FollowingTarget[followerid] = targetid;

    if(g_FollowTimer[followerid]) KillTimer(g_FollowTimer[followerid]);
    g_FollowTimer[followerid] = SetTimerEx("FollowTick", 1500, true, "i", followerid);

    TogglePlayerControllable(followerid, false);
}

stock StopFollowing(playerid)
{
    g_IsFollowing[playerid] = false;
    g_FollowingTarget[playerid] = INVALID_PLAYER_ID;

    if(g_FollowTimer[playerid]) {
        KillTimer(g_FollowTimer[playerid]);
        g_FollowTimer[playerid] = 0;
    }
}

public FollowTick(followerid)
{
	if(!g_IsFollowing[followerid]) return StopFollowing(followerid);

	new targetid = g_FollowingTarget[followerid];
	if(!IsPlayerConnected(targetid) || !IsPlayerConnected(followerid)) return StopFollowing(followerid);
	if(!IsPlayerLogged(targetid) || !IsPlayerLogged(followerid)) return StopFollowing(followerid);
	if(!GetPlayerData(followerid, P_CUFFED)) return StopFollowing(followerid);

	new Float:tx, Float:ty, Float:tz;
	GetPlayerPos(targetid, tx, ty, tz);

	new Float:fx, Float:fy, Float:fz;
	GetPlayerPos(followerid, fx, fy, fz);

	new Float:dist = floatsqroot((tx - fx)*(tx - fx) + (ty - fy)*(ty - fy));
	if(dist > 700.0) return StopFollowing(followerid);

	// ???????? ?? 2 ????? ????? ?? ????????????
	new Float:angle;
	GetPlayerFacingAngle(targetid, angle);
	tx -= floatsin(-angle, degrees) * 2.0;
	ty -= floatcos(-angle, degrees) * 2.0;

	// ????????????ù ???? ? ?????????
	new target_world = GetPlayerVirtualWorld(targetid);
	new target_interior = GetPlayerInterior(targetid);

	if(GetPlayerVirtualWorld(followerid) != target_world)
		SetPlayerVirtualWorld(followerid, target_world);

	if(GetPlayerInterior(followerid) != target_interior)
		SetPlayerInterior(followerid, target_interior);

	SetPlayerPos(followerid, tx, ty, tz);
	return 1;
}

forward EjectSuspect(policeid, suspectid);
public EjectSuspect(policeid, suspectid)
{
    if(IsPlayerInAnyVehicle(suspectid))
        RemovePlayerFromVehicle(suspectid);

    if(IsPlayerInAnyVehicle(policeid))
        RemovePlayerFromVehicle(policeid);

    new fmt_str[90];
    format(fmt_str, sizeof fmt_str, "%s %s ??????? %s ?? ??????", GetPlayerJobAndRankName(policeid), GetPlayerNameEx(policeid), GetPlayerNameEx(suspectid));
    SendMessageInLocal(policeid, fmt_str, 0xDD90FFFF, 25.0);

    return 1;
}

CMD:ceject(playerid, params[])
{
	if(!IsPlayerInPoliceTeam(playerid)) return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ???????");
	if(!IsWorkDayStarted(playerid)) return 1;

	new targetid;
	if(sscanf(params, "u", targetid)) return SendClientMessage(playerid, COLOR_GREY, "?????????????: /ceject [ID ??????]");

	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????");
	if(!IsPlayerInAnyVehicle(targetid)) return SendClientMessage(playerid, COLOR_GREY, "????? ?? ? ??????");
	if(!IsPlayerInRangeOfPlayer(playerid, targetid, 5.0)) return SendClientMessage(playerid, COLOR_GREY, "????? ??????? ??????");

	if(IsPlayerInAnyVehicle(playerid)) RemovePlayerFromVehicle(playerid);

	SetTimerEx("CejectTarget", 3000, false, "ii", playerid, targetid);

	return 1;
}

forward CejectTarget(policeid, targetid);
public CejectTarget(policeid, targetid)
{
	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid)) return;
	if(!IsPlayerInAnyVehicle(targetid)) return;

	RemovePlayerFromVehicle(targetid);
	TogglePlayerControllable(targetid, false);

	new police_name[24], target_name[24], fmt_text[128];
	GetPlayerName(policeid, police_name, sizeof police_name);
	GetPlayerName(targetid, target_name, sizeof target_name);

	format(fmt_text, sizeof fmt_text, "?? ???????? %s[%d] ?? ?????????ù", target_name, targetid);
	SendClientMessage(policeid, COLOR_GOLD, fmt_text);

	format(fmt_text, sizeof fmt_text, "????????? %s ??????? ??? ?? ?????? ????????????? ????????", police_name);
	SendClientMessage(targetid, COLOR_GOLD, fmt_text);

	SetTimerEx("UnfreezePlayerAfterCeject", 5000, false, "i", targetid);
}

forward UnfreezePlayerAfterCeject(playerid);
public UnfreezePlayerAfterCeject(playerid)
{
	if(IsPlayerConnected(playerid))
	{
		TogglePlayerControllable(playerid, true);
	}
}

stock EndWorkDayUval(playerid)
{
	SetPlayerData(playerid, P_WORKDAY, 0);
	SetPVarInt(playerid, "Form", 0);

	SetPlayerSkin(playerid, GetPlayerData(playerid, P_SKIN));
	SetPlayerColorEx(playerid, 0xFFFFFFFF);

	new query[100];
	mysql_format(mysql, query, sizeof query, "UPDATE accounts SET work_day=0 WHERE id=%d LIMIT 1", GetPlayerAccountID(playerid));
	mysql_query(mysql, query, false);
	
	return 1;
}

CMD:admfly(playerid, params[])
{
	if (GetPlayerAdminEx(playerid) < 7)
		return ShowNotificationNew(playerid, 0, 5, 0, 0, "???????? ?????? ??????????????? 7 ?????ù ? ????", ">");

	TogglePlayerControllable(playerid, false);
	ShowPlayerDialog(playerid, DIALOG_ADMFLY, DIALOG_STYLE_LIST, "????? ??????",
		"??????\n?????\n?????\n??????\n????? ?? ??????", "???????", "???????");

	return 1;
}

CMD:groom(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
		return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ??????????? ????");

	if(GetPlayerJob(playerid) < 5)
		return SendClientMessage(playerid, COLOR_GREY, "??????? ???????? ?????? ? 5-?? ?????");

	if(!IsWorkDayStarted(playerid)) return 1;

	new targetid;
	if(sscanf(params, "d", targetid))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /groom [id ??????]");

	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid) || targetid == playerid)
		return SendClientMessage(playerid, COLOR_GREY, "ù????? ?????? ???");

	if(!IsPlayerInRangeOfPlayer(playerid, targetid, 5.0))
		return SendClientMessage(playerid, COLOR_GREY, "????? ??????? ??????");

	if(GetPlayerData(targetid, P_JAIL) > 0 || GetPlayerData(targetid, P_FJAIL) > 0)
		return SendClientMessage(playerid, COLOR_GREY, "?????ù ?????? ??????? ????????????");

	new pname[24], tname[24];
	GetPlayerName(playerid, pname, sizeof pname);
	GetPlayerName(targetid, tname, sizeof tname);

	if(GetPVarInt(targetid, "groomaccess") == 1)
	{
		DeletePVar(targetid, "groomaccess");

		new fmt_msg[144];
		format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d] ???ù? ??????? ? ??????? ??ù ???????? ? ?????? %s[%d]",
			GetPlayerJobAndRankName(playerid),
			pname,
			playerid,
			tname,
			targetid);
		SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);

		format(fmt_msg, sizeof fmt_msg, "????????? ???? %s ???ù? ??? ??????? ? ??????? ??ù ????????", pname);
		SendClientMessage(targetid, COLOR_BLUE, fmt_msg);

		format(fmt_msg, sizeof fmt_msg, "?? ???ù?? ??????? ? ?????? %s", tname);
		SendClientMessage(playerid, COLOR_BLUE, fmt_msg);
	}
	else
	{
		SetPVarInt(targetid, "groomaccess", 1);

		new fmt_msg[144];
		format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d] ????? ??????? ? ??????? ??ù ???????? ?????? %s[%d]",
			GetPlayerJobAndRankName(playerid),
			pname,
			playerid,
			tname,
			targetid);
		SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);

		format(fmt_msg, sizeof fmt_msg, "????????? ???? %s ????? ??? ??????? ? ??????? ??ù ????????", pname);
		SendClientMessage(targetid, COLOR_BLUE, fmt_msg);

		format(fmt_msg, sizeof fmt_msg, "?? ?????? ??????? ?????? %s", tname);
		SendClientMessage(playerid, COLOR_BLUE, fmt_msg);
	}

	return 1;
}

stock ShowCase(playerid)
{
    new Node:root = JSON_Object();

    JSON_SetInt(root, "o", 1);
    JSON_SetInt(root, "t", 1);

    new playerName[MAX_PLAYER_NAME];
    GetPlayerName(playerid, playerName, sizeof(playerName));
    JSON_SetString(root, "n", playerName);

    JSON_SetInt(root, "cs", 2);

    new donateRub = GetPlayerDonateRub(playerid);
    JSON_SetInt(root, "bc", donateRub);

    JSON_SetInt(root, "pc", 500);
    JSON_SetInt(root, "bcc", 5);
    JSON_SetBool(root, "s", false);
    JSON_SetBool(root, "i", false);
    JSON_SetInt(root, "d", 0);

    new Node:casesArray = JSON_Array();
    for(new i = 0; i < 5; i++)
    {
        new Node:caseObj = JSON_Object();
        JSON_SetInt(caseObj, "id", i + 1);

        new caseName[32];
        format(caseName, sizeof(caseName), "Case %d", i + 1);
        JSON_SetString(caseObj, "name", caseName);

        JSON_SetInt(caseObj, "cost", (i + 1) * 100);
        JSON_SetInt(caseObj, "type", random(3) + 1);
        JSON_SetInt(caseObj, "limit", random(10) + 1);

        casesArray = JSON_Append(casesArray, caseObj);
    }
    JSON_SetArray(root, "cc", casesArray);

    new Node:bonusRewardsArray = JSON_Array();
    for(new i = 0; i < 3; i++)
    {
        new Node:bonusObj = JSON_Object();
        JSON_SetInt(bonusObj, "id", i + 1);
        JSON_SetInt(bonusObj, "type", random(5) + 1);
        JSON_SetInt(bonusObj, "value", (i + 1) * 50);

        bonusRewardsArray = JSON_Append(bonusRewardsArray, bonusObj);
    }
    JSON_SetArray(root, "cb", bonusRewardsArray);

    new Node:rewardsArray = JSON_Array();
    for(new i = 0; i < 10; i++)
    {
        new Node:rewardObj = JSON_Object();
        JSON_SetInt(rewardObj, "id", i + 1);

        new rewardName[32];
        format(rewardName, sizeof(rewardName), "Reward %d", i + 1);
        JSON_SetString(rewardObj, "name", rewardName);

        JSON_SetInt(rewardObj, "rarity", random(5) + 1);
        JSON_SetInt(rewardObj, "render_type", random(2) ? 5 : 11);
        JSON_SetInt(rewardObj, "skin_id", 134);

        rewardsArray = JSON_Append(rewardsArray, rewardObj);
    }
    JSON_SetArray(root, "pr", rewardsArray);

    new Node:slots = JSON_Array();
    for(new i = 0; i < 2; i++)
    {
        new Node:slot = JSON_Object();
        JSON_SetInt(slot, "slot_id", i);
        JSON_SetInt(slot, "item_id", random(100) + 1);
        JSON_SetInt(slot, "count", random(5) + 1);

        slots = JSON_Append(slots, slot);
    }
    JSON_SetArray(root, "slots", slots);

    JSON_SetInt(root, "btn_type", random(3));

    new debugstr[4096];
    JSON_Stringify(root, debugstr);
    printf("Cases JSON: %s", debugstr);

    ShowPlayerGUI(playerid, 73, root);

    return 1;
}

CMD:case(playerid)
{
    ShowCase(playerid);
    return 1;
}

CMD:cases2(playerid, params[])
{
    new Node:cases_json = JSON_Object();

    // ??????? ??????
    JSON_SetInt(cases_json, "t", 1);
    JSON_SetInt(cases_json, "cs", 3);
    JSON_SetString(cases_json, "nm", GetPlayerNameEx(playerid));
    JSON_SetInt(cases_json, "bc", 5000);
    JSON_SetInt(cases_json, "pc", 250);
    JSON_SetInt(cases_json, "bcc", 15);
    JSON_SetBool(cases_json, "i", true);
    JSON_SetInt(cases_json, "s", 1);

    // ?????? ????????? ?????? (cc)
    new Node:case1 = JSON_Object();
    JSON_SetInt(case1, "id", 2);
    JSON_SetInt(case1, "count", 5);
    JSON_SetInt(case1, "usedSale", 0);

    new Node:case2 = JSON_Object();
    JSON_SetInt(case2, "id", 3);
    JSON_SetInt(case2, "count", 3);
    JSON_SetInt(case2, "usedSale", 1);

    new Node:cc_array = JSON_Array();
    cc_array = cc_array + case1; // ?????????? ???????? + ?????? JSON_Append
    cc_array = cc_array + case2;
    JSON_SetArray(cases_json, "cc", cc_array);

    // ?????? ?????? (cb)
    new Node:reward1 = JSON_Object();
    JSON_SetInt(reward1, "idReward", 301);
    JSON_SetInt(reward1, "stateReward", 0);

    new Node:reward2 = JSON_Object();
    JSON_SetInt(reward2, "idReward", 302);
    JSON_SetInt(reward2, "stateReward", 1);

    new Node:cb_array = JSON_Array();
    cb_array = cb_array + reward1;
    cb_array = cb_array + reward2;
    JSON_SetArray(cases_json, "cb", cb_array);

    ShowPlayerGUI(playerid, 73, cases_json);
    JSON_Cleanup(cases_json);
    return 1;
}


CMD:cases(playerid, params[])
{
    new Node:cases_json = JSON_Object();

    // ??????? ??????
    JSON_SetInt(cases_json, "t", 1);
    JSON_SetInt(cases_json, "cs", 2);
    JSON_SetInt(cases_json, "o", 1);
    JSON_SetString(cases_json, "nm", GetPlayerNameEx(playerid));
    JSON_SetInt(cases_json, "bc", GetPlayerDonateRub(playerid));
    JSON_SetInt(cases_json, "cot", 500);
    JSON_SetInt(cases_json, "pc", 1000);
    JSON_SetInt(cases_json, "bcc", 25);
    JSON_SetInt(cases_json, "b", 111);

    ShowPlayerGUI(playerid, 73, cases_json);
    JSON_Cleanup(cases_json);
    return 1;
}

CMD:cases1(playerid, params[])
{
    new Node:cases_json = JSON_Object();
    new case_id;

    // ??????? ??????
    JSON_SetInt(cases_json, "t", 1);
    JSON_SetInt(cases_json, "bc", GetPlayerDonateRub(playerid));
    JSON_SetInt(cases_json, "pc", 1000);
    JSON_SetInt(cases_json, "bcc", 25);
    JSON_SetInt(cases_json, "cs", case_id);

    // ??????? ?????? ?????? (cc)
    new Node:cases_array = JSON_Array();

    // ???? 1 - ???????
    new Node:case1 = JSON_Object();
    JSON_SetInt(case1, "id", 1);
    JSON_SetString(case1, "name", "??????? ????");
    JSON_SetInt(case1, "count", 5);
    JSON_SetBool(case1, "isUsedSale", false);
    JSON_SetInt(case1, "type", 1); // ???????
    JSON_SetString(case1, "dates", "");

    // ???? [????, ???ù??]
    new Node:price1 = JSON_Array();
    JSON_ArrayAppend(price1, "", JSON_Int(100));
    JSON_ArrayAppend(price1, "", JSON_Int(900));
    JSON_SetArray(case1, "price", price1);

    // ?????? [????, ???ù??]
    new Node:discount1 = JSON_Array();
    JSON_ArrayAppend(discount1, "", JSON_Int(0));
    JSON_ArrayAppend(discount1, "", JSON_Int(0));
    JSON_SetArray(case1, "discount", discount1);

    JSON_SetInt(case1, "discountType", 0);
    JSON_SetBool(case1, "isSale", false);

    // ?????? ?????? ?????? ? ???????
    new Node:rewards1 = JSON_Array();
    JSON_SetArray(case1, "caseRewardList", rewards1);

    new Node:bonus1 = JSON_Array();
    JSON_SetArray(case1, "caseBonusList", bonus1);

    // ????????ù ??????? ??ù ???????
    new Node:scroll_reward1 = JSON_Object();
    JSON_SetInt(scroll_reward1, "rewardId", 1);
    JSON_SetInt(scroll_reward1, "rewardType", 1);
    JSON_SetString(scroll_reward1, "rewardName", "??????? 1");
    JSON_SetString(scroll_reward1, "dustCountText", "+100");
    JSON_SetInt(scroll_reward1, "dustValue", 100);
    JSON_SetInt(scroll_reward1, "rarity", 1);
    JSON_SetBool(scroll_reward1, "sprayed", false);
    JSON_SetInt(scroll_reward1, "count", 1);
    JSON_SetObject(case1, "scrolledReward", scroll_reward1);
    JSON_SetInt(case1, "scrolledPosition", 0);

    JSON_ArrayAppend(cases_array, "", case1);

    // ???? 2 - ?? ???????
    new Node:case2 = JSON_Object();
    JSON_SetInt(case2, "id", 2);
    JSON_SetString(case2, "name", "???? ?? ???????");
    JSON_SetInt(case2, "count", 3);
    JSON_SetBool(case2, "isUsedSale", false);
    JSON_SetInt(case2, "type", 3); // ?? ???????
    JSON_SetString(case2, "dates", "");

    new Node:price2 = JSON_Array();
    JSON_ArrayAppend(price2, "", JSON_Int(80));
    JSON_ArrayAppend(price2, "", JSON_Int(720));
    JSON_SetArray(case2, "price", price2);

    new Node:discount2 = JSON_Array();
    JSON_ArrayAppend(discount2, "", JSON_Int(20));
    JSON_ArrayAppend(discount2, "", JSON_Int(20));
    JSON_SetArray(case2, "discount", discount2);

    JSON_SetInt(case2, "discountType", 0);
    JSON_SetBool(case2, "isSale", true);

    new Node:rewards2 = JSON_Array();
    JSON_SetArray(case2, "caseRewardList", rewards2);

    new Node:bonus2 = JSON_Array();
    JSON_SetArray(case2, "caseBonusList", bonus2);

    new Node:scroll_reward2 = JSON_Object();
    JSON_SetInt(scroll_reward2, "rewardId", 2);
    JSON_SetInt(scroll_reward2, "rewardType", 2);
    JSON_SetString(scroll_reward2, "rewardName", "??????? 2");
    JSON_SetString(scroll_reward2, "dustCountText", "+200");
    JSON_SetInt(scroll_reward2, "dustValue", 200);
    JSON_SetInt(scroll_reward2, "rarity", 2);
    JSON_SetBool(scroll_reward2, "sprayed", false);
    JSON_SetInt(scroll_reward2, "count", 1);
    JSON_SetObject(case2, "scrolledReward", scroll_reward2);
    JSON_SetInt(case2, "scrolledPosition", 0);

    JSON_ArrayAppend(cases_array, "", case2);

    // ????????????? ?????? ?????? ? ???????? JSON
    JSON_SetArray(cases_json, "cc", cases_array);

    ShowPlayerGUI(playerid, 73, cases_json);

    // ?????? ??? ????????? ???????
    JSON_Cleanup(price1);
    JSON_Cleanup(discount1);
    JSON_Cleanup(rewards1);
    JSON_Cleanup(bonus1);
    JSON_Cleanup(scroll_reward1);
    JSON_Cleanup(case1);

    JSON_Cleanup(price2);
    JSON_Cleanup(discount2);
    JSON_Cleanup(rewards2);
    JSON_Cleanup(bonus2);
    JSON_Cleanup(scroll_reward2);
    JSON_Cleanup(case2);

    JSON_Cleanup(cases_array);
    JSON_Cleanup(cases_json);

    return 1;
}
stock CreateFSINRoomLabel(roomid)
{
    new Float:x, Float:y, Float:z;
    switch (roomid)
    {
        case 0: { x = -2019.02; y = -1790.33; z = 1501.18; }
        case 1: { x = -2022.37; y = -1790.36; z = 1501.18; }
        case 2: { x = -2019.02; y = -1793.88; z = 1501.18; }
        case 3: { x = -2022.37; y = -1793.92; z = 1501.18; }
        case 4: { x = -2019.02; y = -1806.09; z = 1501.18; }
        case 5: { x = -2022.37; y = -1806.13; z = 1501.18; }
        case 6: { x = -2019.02; y = -1809.62; z = 1501.18; }
        case 7: { x = -2022.37; y = -1809.64; z = 1501.18; }
        default: return;
    }

    if (doorSvidanieLabel[roomid] != Text3D:INVALID_3DTEXT_ID)
        DestroyDynamic3DTextLabel(doorSvidanieLabel[roomid]);

    doorSvidanieLabel[roomid] = CreateDynamic3DTextLabel("????????????ù ???????...", 0xFFFF00FF, x, y, z, 5.0, INVALID_PLAYER_ID, INVALID_VEHICLE_ID, 0, 1, 1);
}

stock UpdateFSINRoomText(roomid)
{
    new label[160];
    new status[32];

    if (!g_fsinRooms[roomid][isBusy])
        format(status, sizeof status, "{FFFF00}????????");
    else
        format(status, sizeof status, "{FFFF00}???? ????????");

    format(label, sizeof label,
        "{FFFF00} << ??????? ??ù ???????? >>\n\
        {FFFF00}|{FFFFFF} ?????:{FFFF00} %d\n\
        {FFFF00}|{FFFFFF} ??????:{FFFFFF} %s",
        roomid + 1,
        status);

    if (doorSvidanieLabel[roomid] != Text3D:INVALID_3DTEXT_ID)
        UpdateDynamic3DTextLabelText(doorSvidanieLabel[roomid], 0xFFFF00FF, label);
}

stock StartMeetFSIN(prisonerid, visitorid, roomid, duration)
{
    g_fsinRooms[roomid][isBusy] = true;
    g_fsinRooms[roomid][roomTimer] = duration * 60;
    g_fsinRooms[roomid][roomPrisonerID] = prisonerid;
    g_fsinRooms[roomid][roomVisitorID] = visitorid;

    SetPlayerPos(prisonerid, -1994.25, -1821.57, 1501.18);
    SetPlayerFacingAngle(prisonerid, 89.32);
    SetPlayerVirtualWorld(prisonerid, roomid + 2);
    SetPlayerInterior(prisonerid, 1);
    TogglePlayerControllable(prisonerid, false);
    SetPlayerCameraPos(prisonerid, -1994.26, -1821.60, 1501.45); // +0.2
    SetPlayerCameraLookAt(prisonerid, -1996.65, -1821.63, 1501.18);

    SetPlayerPos(visitorid, -1996.65, -1821.63, 1501.18);
    SetPlayerFacingAngle(visitorid, 267.94);
    SetPlayerVirtualWorld(visitorid, roomid + 2);
    SetPlayerInterior(visitorid, 1);
    SetPVarInt(visitorid, "groomaccess", 1);

    UpdateFSINRoomText(roomid);
    g_fsinRoomTimerID[roomid] = SetTimerEx("FSINMeetTick", 1000, true, "i", roomid);
}

stock StopMeetFSIN(roomid, bool:manual = false, fsinid = INVALID_PLAYER_ID)
{
    if (g_fsinRoomTimerID[roomid]) KillTimer(g_fsinRoomTimerID[roomid]);
    g_fsinRoomTimerID[roomid] = 0;

    new prisonerid = g_fsinRooms[roomid][roomPrisonerID];
    new visitorid = g_fsinRooms[roomid][roomVisitorID];

    if (IsPlayerConnected(prisonerid))
    {
        SetPlayerPos(prisonerid, -1744.28, -2681.35, 7.59);
        SetPlayerFacingAngle(prisonerid, 230.05);
        SetPlayerVirtualWorld(prisonerid, 0);
        SetPlayerInterior(prisonerid, 0);
        TogglePlayerControllable(prisonerid, true);
        SetCameraBehindPlayer(prisonerid);
        SendClientMessage(prisonerid, COLOR_BLUE, "???????? ????????.");
    }

    if (IsPlayerConnected(visitorid))
    {
        SetPlayerPos(visitorid, -1815.31, -2620.62, 7.73);
        SetPlayerFacingAngle(visitorid, 0.0);
        SetPlayerVirtualWorld(visitorid, 0);
        SetPlayerInterior(visitorid, 0);
        TogglePlayerControllable(visitorid, true);
        DeletePVar(visitorid, "groomaccess");
        SendClientMessage(visitorid, COLOR_BLUE, "???????? ????????.");
    }

    if (manual && IsPlayerConnected(fsinid))
    {
        new msg[64];
        format(msg, sizeof msg, "????????? ???? %s ???????? ???? ????????.", GetPlayerNameEx(fsinid));
        if (IsPlayerConnected(prisonerid)) SendClientMessage(prisonerid, -1, msg);
        if (IsPlayerConnected(visitorid)) SendClientMessage(visitorid, -1, msg);
    }

    g_fsinRooms[roomid][isBusy] = false;
    g_fsinRooms[roomid][roomTimer] = 0;
    g_fsinRooms[roomid][roomPrisonerID] = INVALID_PLAYER_ID;
    g_fsinRooms[roomid][roomVisitorID] = INVALID_PLAYER_ID;

    UpdateFSINRoomText(roomid);
}

CMD:startmeet(playerid, params[])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

    if (GetPlayerJob(playerid) < 5)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");

    if(!IsWorkDayStarted(playerid)) return 1;

    new prisonerid, visitorid, minutes;
    if (sscanf(params, "iii", prisonerid, visitorid, minutes))
        return SendClientMessage(playerid, COLOR_GREY, "??????????? /startmeet [id ????????????] [id ?????????ù] [????ù ? ???????]");

    if (!IsPlayerConnected(prisonerid) || !IsPlayerConnected(visitorid))
        return SendClientMessage(playerid, COLOR_GREY, "???? ?? ????????? ??????? ?? ? ????");

    if (prisonerid == visitorid || prisonerid == playerid || visitorid == playerid)
        return SendClientMessage(playerid, COLOR_GREY, "???????????? ID ???????");

    if (GetPlayerData(prisonerid, P_FJAIL) <= 0)
        return SendClientMessage(playerid, COLOR_GREY, "????? ?? ù??ù???ù ???????????");

    if (GetPlayerDistanceFromPlayer(playerid, prisonerid) > 5.0 || GetPlayerDistanceFromPlayer(playerid, visitorid) > 5.0)
        return SendClientMessage(playerid, COLOR_GREY, "?????? ?????? ???? ?ù??? ? ????");

    if (!IsPlayerInRangeOfPoint(playerid, 20.0, -2023.11, -1799.98, 1501.18))
    return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ???? ? ??????? ??ù ????????");

    if (minutes < 5 || minutes > 15)
        return SendClientMessage(playerid, COLOR_GREY, "????ù ?????? ???? ?? 5 ?? 15 ?????");

    new roomid = -1;
    for (new i = 0; i < sizeof g_fsinRooms; i++)
    {
        if (!g_fsinRooms[i][isBusy])
        {
            roomid = i;
            break;
        }
    }

    if (roomid == -1)
        return SendClientMessage(playerid, COLOR_GREY, "??? ????????? ?????? ??ù ????????");

    StartMeetFSIN(prisonerid, visitorid, roomid, minutes);

    new fmt_msg[144];
    format(fmt_msg, sizeof fmt_msg, "[R] %s %s ????? ???????? ??ù ???????????? %s ? ?????????ù %s ? ??????? ?%d ?? %d ?????.",
        GetPlayerJobAndRankName(playerid),
        GetPlayerNameEx(playerid),
        GetPlayerNameEx(prisonerid),
        GetPlayerNameEx(visitorid),
        roomid + 1,
        minutes);

    if (!GetPlayerTeamEx(playerid))
    {
        SendMessageToJob(GetPlayerJob(playerid), fmt_msg);
        SendClientMessage(playerid, -1, "????????");
    }
    else
    {
        SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
    }

    new info_msg[64];
    format(info_msg, sizeof info_msg, "?????? ???????ù: ?? ?????? ???????? ? ??????? ?%d", roomid + 1);
    SendClientMessage(playerid, COLOR_BLUE, info_msg);
    return 1;
}

CMD:stopmeet(playerid, params[])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

    if (GetPlayerJob(playerid) < 5)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");

    if (!IsWorkDayStarted(playerid)) return 1;

    if (!IsPlayerInRangeOfPoint(playerid, 20.0, -2023.11, -1799.98, 1501.18))
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ???? ? ??????? ??ù ????????");

    new inputRoom;
    if (sscanf(params, "i", inputRoom))
        return SendClientMessage(playerid, COLOR_GREY, "??????????? /stopmeet [????? ??????? ?? 1 ?? 8]");

    new roomid = inputRoom - 1;

    if (roomid < 0 || roomid >= sizeof g_fsinRooms)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ????? ???????");

    if (!g_fsinRooms[roomid][isBusy])
        return SendClientMessage(playerid, COLOR_GREY, "? ???? ??????? ?? ???? ????????");

    StopMeetFSIN(roomid, true, playerid);

    new fmt_msg[144];
    format(fmt_msg, sizeof fmt_msg, "[R] %s %s ???????? ???????? ? ??????? ?%d.",
        GetPlayerJobAndRankName(playerid),
        GetPlayerNameEx(playerid),
        inputRoom);

    if (!GetPlayerTeamEx(playerid))
    {
        SendMessageToJob(GetPlayerJob(playerid), fmt_msg);
        SendClientMessage(playerid, -1, "????????");
    }
    else
    {
        SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, 0x33CC66FF);
    }

    new info_msg[64];
    format(info_msg, sizeof info_msg, "?????????? ???????ù: ?? ????????? ???????? ? ??????? ?%d", inputRoom);
    SendClientMessage(playerid, COLOR_BLUE, info_msg);
    return 1;
}

CMD:startmeettest(playerid, params[])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

    if (GetPlayerJob(playerid) < 5)
        return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");

    if (!IsWorkDayStarted(playerid)) return 1;

    new prisonerid, visitorid, minutes;
    if (sscanf(params, "iii", prisonerid, visitorid, minutes))
        return SendClientMessage(playerid, COLOR_GREY, "??????????? /startmeettest [id ????????????] [id ?????????ù] [????ù ? ???????]");

    if (!IsPlayerConnected(prisonerid) || !IsPlayerConnected(visitorid))
        return SendClientMessage(playerid, COLOR_GREY, "???? ?? ????????? ??????? ?? ? ????");

    if (prisonerid == visitorid)
        return SendClientMessage(playerid, COLOR_GREY, "??????????? ? ?????????? ?? ????? ???? ????? ? ??? ?? ???????");

    if (GetPlayerData(prisonerid, P_FJAIL) <= 0)
        return SendClientMessage(playerid, COLOR_GREY, "????? ?? ù??ù???ù ???????????");

    if (GetPlayerDistanceFromPlayer(playerid, prisonerid) > 5.0 || GetPlayerDistanceFromPlayer(playerid, visitorid) > 5.0)
        return SendClientMessage(playerid, COLOR_GREY, "?????? ?????? ???? ?ù??? ? ????");

    if (!IsPlayerInRangeOfPoint(playerid, 20.0, -2023.11, -1799.98, 1501.18))
        return SendClientMessage(playerid, COLOR_GREY, "?? ?????? ???? ? ??????? ??ù ????????");

    if (minutes < 5 || minutes > 15)
        return SendClientMessage(playerid, COLOR_GREY, "????ù ?????? ???? ?? 5 ?? 15 ?????");

    new roomid = -1;
    for (new i = 0; i < sizeof g_fsinRooms; i++)
    {
        if (!g_fsinRooms[i][isBusy])
        {
            roomid = i;
            break;
        }
    }

    if (roomid == -1)
        return SendClientMessage(playerid, COLOR_GREY, "??? ????????? ?????? ??ù ????????");

    StartMeetFSIN(prisonerid, visitorid, roomid, minutes);

    new fmt_msg[144];
    format(fmt_msg, sizeof fmt_msg, "[ù??ù] %s %s ????? ???????? ??ù ???????????? %s ? ?????????ù %s ? ??????? ?%d ?? %d ?????.",
        GetPlayerJobAndRankName(playerid),
        GetPlayerNameEx(playerid),
        GetPlayerNameEx(prisonerid),
        GetPlayerNameEx(visitorid),
        roomid + 1,
        minutes);

    SendClientMessage(playerid, COLOR_BLUE, fmt_msg);
    return 1;
}

forward FSINMeetTick(roomid);
public FSINMeetTick(roomid)
{
    if (!g_fsinRooms[roomid][isBusy]) return;

    if (--g_fsinRooms[roomid][roomTimer] <= 0)
    {
        StopMeetFSIN(roomid);
    }
    else
    {
        UpdateFSINRoomText(roomid);
    }
}

stock CheckFSINMeetExit(playerid)
{
    for (new i = 0; i < sizeof g_fsinRooms; i++)
    {
        if (!g_fsinRooms[i][isBusy]) continue;

        if (g_fsinRooms[i][roomPrisonerID] == playerid || g_fsinRooms[i][roomVisitorID] == playerid)
        {
            new otherid = (g_fsinRooms[i][roomPrisonerID] == playerid) ? g_fsinRooms[i][roomVisitorID] : g_fsinRooms[i][roomPrisonerID];

            if (IsPlayerConnected(otherid))
            {
                SetPlayerPos(otherid, (g_fsinRooms[i][roomPrisonerID] == playerid) ? -1815.31 : -1744.28,
                                       (g_fsinRooms[i][roomPrisonerID] == playerid) ? -2620.62 : -2681.35,
                                       7.73);
                SetPlayerFacingAngle(otherid, (g_fsinRooms[i][roomPrisonerID] == playerid) ? 0.0 : 230.05);
                SetPlayerVirtualWorld(otherid, 0);
                SetPlayerInterior(otherid, 0);
                TogglePlayerControllable(otherid, true);
                SendClientMessage(otherid, COLOR_BLUE, "?????, ? ??????? ? ??? ???? ????????, ?????. ???????? ????????.");
                if (g_fsinRooms[i][roomVisitorID] == otherid) DeletePVar(otherid, "groomaccess");
            }

            StopMeetFSIN(i);
            break;
        }
    }
}

Float:GetPlayerDistanceFromPlayer(playerid, targetid)
{
    new Float:x1, Float:y1, Float:z1;
    new Float:x2, Float:y2, Float:z2;
    GetPlayerPos(playerid, x1, y1, z1);
    GetPlayerPos(targetid, x2, y2, z2);
    return floatsqroot((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2) + (z1 - z2) * (z1 - z2));
}

stock ShowFSINMeetDialog(playerid)
{
    new dialogText[2048];
    new prisonerName[MAX_PLAYER_NAME], visitorName[MAX_PLAYER_NAME];
    new minutes, seconds;

    strcat(dialogText, "{FF4444}????? ???????\t{FF4444}???????????\t{FF4444}??????????\t{FF4444}????ù ???????ù\n");

    // ??????? #1
    if (!g_fsinRooms[0][isBusy])
        strcat(dialogText, "{FF4444}#1\t{FFFFFF}?? ????????\t{FF4444}???????????\t{FFFFFF}?? ?????????\n");
    else {
        GetPlayerName(g_fsinRooms[0][roomPrisonerID], prisonerName, sizeof prisonerName);
        GetPlayerName(g_fsinRooms[0][roomVisitorID], visitorName, sizeof visitorName);
        minutes = g_fsinRooms[0][roomTimer] / 60;
        seconds = g_fsinRooms[0][roomTimer] % 60;
        format(dialogText, sizeof dialogText, "%s{FF4444}#1\t{FFFFFF}%s\t{FF4444}%s\t{FFFFFF}%02d:%02d ?????\n", dialogText, prisonerName, visitorName, minutes, seconds);
    }

    // ??????? #2
    if (!g_fsinRooms[1][isBusy])
        strcat(dialogText, "{FF4444}#2\t{FFFFFF}?? ????????\t{FF4444}???????????\t{FFFFFF}?? ?????????\n");
    else {
        GetPlayerName(g_fsinRooms[1][roomPrisonerID], prisonerName, sizeof prisonerName);
        GetPlayerName(g_fsinRooms[1][roomVisitorID], visitorName, sizeof visitorName);
        minutes = g_fsinRooms[1][roomTimer] / 60;
        seconds = g_fsinRooms[1][roomTimer] % 60;
        format(dialogText, sizeof dialogText, "%s{FF4444}#2\t{FFFFFF}%s\t{FF4444}%s\t{FFFFFF}%02d:%02d ?????\n", dialogText, prisonerName, visitorName, minutes, seconds);
    }

    // ??????? #3
    if (!g_fsinRooms[2][isBusy])
        strcat(dialogText, "{FF4444}#3\t{FFFFFF}?? ????????\t{FF4444}???????????\t{FFFFFF}?? ?????????\n");
    else {
        GetPlayerName(g_fsinRooms[2][roomPrisonerID], prisonerName, sizeof prisonerName);
        GetPlayerName(g_fsinRooms[2][roomVisitorID], visitorName, sizeof visitorName);
        minutes = g_fsinRooms[2][roomTimer] / 60;
        seconds = g_fsinRooms[2][roomTimer] % 60;
        format(dialogText, sizeof dialogText, "%s{FF4444}#3\t{FFFFFF}%s\t{FF4444}%s\t{FFFFFF}%02d:%02d ?????\n", dialogText, prisonerName, visitorName, minutes, seconds);
    }

    // ??????? #4
    if (!g_fsinRooms[3][isBusy])
        strcat(dialogText, "{FF4444}#4\t{FFFFFF}?? ????????\t{FF4444}???????????\t{FFFFFF}?? ?????????\n");
    else {
        GetPlayerName(g_fsinRooms[3][roomPrisonerID], prisonerName, sizeof prisonerName);
        GetPlayerName(g_fsinRooms[3][roomVisitorID], visitorName, sizeof visitorName);
        minutes = g_fsinRooms[3][roomTimer] / 60;
        seconds = g_fsinRooms[3][roomTimer] % 60;
        format(dialogText, sizeof dialogText, "%s{FF4444}#4\t{FFFFFF}%s\t{FF4444}%s\t{FFFFFF}%02d:%02d ?????\n", dialogText, prisonerName, visitorName, minutes, seconds);
    }

    // ??????? #5
    if (!g_fsinRooms[4][isBusy])
        strcat(dialogText, "{FF4444}#5\t{FFFFFF}?? ????????\t{FF4444}???????????\t{FFFFFF}?? ?????????\n");
    else {
        GetPlayerName(g_fsinRooms[4][roomPrisonerID], prisonerName, sizeof prisonerName);
        GetPlayerName(g_fsinRooms[4][roomVisitorID], visitorName, sizeof visitorName);
        minutes = g_fsinRooms[4][roomTimer] / 60;
        seconds = g_fsinRooms[4][roomTimer] % 60;
        format(dialogText, sizeof dialogText, "%s{FF4444}#5\t{FFFFFF}%s\t{FF4444}%s\t{FFFFFF}%02d:%02d ?????\n", dialogText, prisonerName, visitorName, minutes, seconds);
    }

    // ??????? #6
    if (!g_fsinRooms[5][isBusy])
        strcat(dialogText, "{FF4444}#6\t{FFFFFF}?? ????????\t{FF4444}???????????\t{FFFFFF}?? ?????????\n");
    else {
        GetPlayerName(g_fsinRooms[5][roomPrisonerID], prisonerName, sizeof prisonerName);
        GetPlayerName(g_fsinRooms[5][roomVisitorID], visitorName, sizeof visitorName);
        minutes = g_fsinRooms[5][roomTimer] / 60;
        seconds = g_fsinRooms[5][roomTimer] % 60;
        format(dialogText, sizeof dialogText, "%s{FF4444}#6\t{FFFFFF}%s\t{FF4444}%s\t{FFFFFF}%02d:%02d ?????\n", dialogText, prisonerName, visitorName, minutes, seconds);
    }

    // ??????? #7
    if (!g_fsinRooms[6][isBusy])
        strcat(dialogText, "{FF4444}#7\t{FFFFFF}?? ????????\t{FF4444}???????????\t{FFFFFF}?? ?????????\n");
    else {
        GetPlayerName(g_fsinRooms[6][roomPrisonerID], prisonerName, sizeof prisonerName);
        GetPlayerName(g_fsinRooms[6][roomVisitorID], visitorName, sizeof visitorName);
        minutes = g_fsinRooms[6][roomTimer] / 60;
        seconds = g_fsinRooms[6][roomTimer] % 60;
        format(dialogText, sizeof dialogText, "%s{FF4444}#7\t{FFFFFF}%s\t{FF4444}%s\t{FFFFFF}%02d:%02d ?????\n", dialogText, prisonerName, visitorName, minutes, seconds);
    }

    // ??????? #8
    if (!g_fsinRooms[7][isBusy])
        strcat(dialogText, "{FF4444}#8\t{FFFFFF}?? ????????\t{FF4444}???????????\t{FFFFFF}?? ?????????\n");
    else {
        GetPlayerName(g_fsinRooms[7][roomPrisonerID], prisonerName, sizeof prisonerName);
        GetPlayerName(g_fsinRooms[7][roomVisitorID], visitorName, sizeof visitorName);
        minutes = g_fsinRooms[7][roomTimer] / 60;
        seconds = g_fsinRooms[7][roomTimer] % 60;
        format(dialogText, sizeof dialogText, "%s{FF4444}#8\t{FFFFFF}%s\t{FF4444}%s\t{FFFFFF}%02d:%02d ?????\n", dialogText, prisonerName, visitorName, minutes, seconds);
    }

    ShowPlayerDialog(playerid, DIALOG_FSIN_MEETINFO, DIALOG_STYLE_TABLIST_HEADERS, "{FF4444}Baze Russia RolePlay {FFFFFF}| ?????????ù ? ???????ù?", dialogText, "???????", "");
}

CMD:meetinfo(playerid, params[])
{
    if (GetPlayerTeamEx(playerid) != TEAM_FSIN)
        return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

    ShowFSINMeetDialog(playerid);
    return 1;
}

stock CheckKarcerTime(playerid)
{
	if(GetPlayerData(playerid, P_KARCER) != 1) return;

	new timeLeft = GetPlayerData(playerid, P_KARCER_TIME);
	if(timeLeft <= 0)
	{
		SetPlayerData(playerid, P_KARCER, 0);
		SetPlayerData(playerid, P_KARCER_TIME, 0);
		UpdatePlayerDatabaseInt(playerid, "karcer", 0);
		UpdatePlayerDatabaseInt(playerid, "karcer_time", 0);

		// ???????? ?? ?????
		new fjail = GetPlayerData(playerid, P_FJAIL);
		SetPlayerData(playerid, P_FJAIL, fjail - timeLeft);
		UpdatePlayerDatabaseInt(playerid, "fjail", GetPlayerData(playerid, P_FJAIL));

		// ???? ???? ?????????ù ó ???????????
		if(GetPlayerData(playerid, P_FJAIL) <= 0)
		{
			FSinUnjailPlayer(playerid);
			SendClientMessage(playerid, COLOR_BLUE, "??? ???? ????????. ?? ???? ??????????? ?? ??????? ? ??????.");

			new fmt_msg[144];
			format(fmt_msg, sizeof fmt_msg, "[R] ??????????? %s[%d] ??? ????????????? ?????????? ?? ??????? ? ?????? ????? ?????????ù ?????.",
				GetPlayerNameEx(playerid), playerid);
			SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);
		}
		else
		{
			// ??????? ? ??????? ??????
			new jail_pos = random(sizeof g_fjail_positions);
			SetPlayerPosEx(playerid,
				g_fjail_positions[jail_pos][0],
				g_fjail_positions[jail_pos][1],
				g_fjail_positions[jail_pos][2],
				1,
				g_fjail_positions[jail_pos][4]);

			SetPlayerFacingAngle(playerid, g_fjail_positions[jail_pos][3]);
			SetPlayerInterior(playerid, 1);
			SetPlayerSkin(playerid, FSIN_SKIN_ID);

			SendClientMessage(playerid, COLOR_BLUE, "?? ???? ???????? ?? ??????? ????? ??????ù ?????.");
		}
	}
	else
	{
		// ????????? ??????
		SetPlayerData(playerid, P_KARCER_TIME, timeLeft - 1);
	}
}

CMD:prin(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
		return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

	if(GetPlayerJob(playerid) < 5)
		return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");

	if(!IsWorkDayStarted(playerid)) return 1;

	new targetid, minutes, reason[64];
	if(sscanf(params, "uis[64]", targetid, minutes, reason))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /prin [id] [????ù ? ???????] [???????]");

	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????");

	if(GetPlayerData(targetid, P_FJAIL) <= 0)
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ù??ù???ù ???????????.");

	if(!GetPlayerData(targetid, P_CUFFED))
		return SendClientMessage(playerid, COLOR_GREY, "??????????? ?????? ???? ??????? ? ?????????.");

	new bool:nearEntrance = false;
	for(new i = 0; i < sizeof g_karcer_entrances; i++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 5.0, g_karcer_entrances[i][0], g_karcer_entrances[i][1], g_karcer_entrances[i][2]) &&
		   IsPlayerInRangeOfPoint(targetid, 5.0, g_karcer_entrances[i][0], g_karcer_entrances[i][1], g_karcer_entrances[i][2]))
		{
			nearEntrance = true;
			break;
		}
	}
	if(!nearEntrance)
		return SendClientMessage(playerid, COLOR_GREY, "?? ? ??????????? ?????? ?????????ù ? ????? ? ??????.");

	if(g_IsLeading[playerid])
	{
		StopFollowing(targetid);
		g_IsLeading[playerid] = false;
	}

	// ??ù??? ?????????? ??? ?????????
	SetPlayerSpecialAction(targetid, SPECIAL_ACTION_NONE);
	RemovePlayerAttachedObject(targetid, A_OBJECT_SLOT_HAND);
	SetPlayerData(targetid, P_CUFFED, false);
	TogglePlayerControllable(targetid, true);

	SetPlayerData(targetid, P_KARCER, 1);
	SetPlayerData(targetid, P_KARCER_TIME, minutes * 60);
	UpdatePlayerDatabaseInt(targetid, "karcer", 1);
	UpdatePlayerDatabaseInt(targetid, "karcer_time", GetPlayerData(targetid, P_KARCER_TIME));

	AddPlayerData(targetid, P_FJAIL, +, minutes * 60);
	UpdatePlayerDatabaseInt(targetid, "fjail", GetPlayerData(targetid, P_FJAIL));

	new pos = random(sizeof g_karcer_positions);
	new world = 98 + pos;

	SetPlayerVirtualWorld(targetid, world);
	SetPlayerPosEx(targetid,
		g_karcer_positions[pos][0],
		g_karcer_positions[pos][1],
		g_karcer_positions[pos][2],
		1,
		g_karcer_positions[pos][4]);

	SetPlayerFacingAngle(targetid, g_karcer_positions[pos][3]);
	SetPlayerInterior(targetid, 1);
	SetPlayerSkin(targetid, FSIN_SKIN_ID);

	new msg[144];
	format(msg, sizeof msg, "????????? ???? %s[%d] ???????? ??? ? ?????? ?? %d ????? ?? ???????: %s",
		GetPlayerNameEx(playerid), playerid, minutes, reason);
	SendClientMessage(targetid, COLOR_BLUE, msg);

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d] ???????? ? ?????? ?????? %s[%d] ?? %d ????? ?? ???????: %s",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		playerid,
		GetPlayerNameEx(targetid),
		targetid,
		minutes,
		reason);

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);
	DeletePVar(playerid, "cufferid");
	return 1;
}

CMD:prout(playerid, params[])
{
	if(GetPlayerTeamEx(playerid) != TEAM_FSIN)
		return SendClientMessage(playerid, COLOR_GREY, "?? ?? ????????? ????");

	if(GetPlayerJob(playerid) < 5)
		return SendClientMessage(playerid, COLOR_GREY, "???????? ?????? ? 5-?? ?????!");

	if(!IsWorkDayStarted(playerid)) return 1;

	new targetid, reason[64];
	if(sscanf(params, "us[64]", targetid, reason))
		return SendClientMessage(playerid, COLOR_GREY, "???????????: /prout [id] [???????]");

	if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid))
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????");

	if(GetPlayerData(targetid, P_KARCER) != 1)
		return SendClientMessage(playerid, COLOR_GREY, "????? ?? ????????ù ? ???????.");

	new bool:nearEntrance = false;
	for(new i = 0; i < sizeof g_karcer_entrances; i++)
	{
		if(IsPlayerInRangeOfPoint(playerid, 5.0, g_karcer_entrances[i][0], g_karcer_entrances[i][1], g_karcer_entrances[i][2]) &&
		   IsPlayerInRangeOfPoint(targetid, 5.0, g_karcer_entrances[i][0], g_karcer_entrances[i][1], g_karcer_entrances[i][2]))
		{
			nearEntrance = true;
			break;
		}
	}
	if(!nearEntrance)
		return SendClientMessage(playerid, COLOR_GREY, "?? ? ??????????? ?????? ?????????ù ? ????? ? ??????.");

	SetPlayerData(targetid, P_KARCER, 0);
	SetPlayerData(targetid, P_KARCER_TIME, 0);
	UpdatePlayerDatabaseInt(targetid, "karcer", 0);
	UpdatePlayerDatabaseInt(targetid, "karcer_time", 0);

	new jail_pos = random(sizeof g_fjail_positions);
	SetPlayerPosEx(targetid,
		g_fjail_positions[jail_pos][0],
		g_fjail_positions[jail_pos][1],
		g_fjail_positions[jail_pos][2],
		1,
		g_fjail_positions[jail_pos][4]);

	SetPlayerFacingAngle(targetid, g_fjail_positions[jail_pos][3]);
	SetPlayerInterior(targetid, 1);
	SetPlayerSkin(targetid, FSIN_SKIN_ID);

	new msg[144];
	format(msg, sizeof msg, "????????? ???? %s[%d] ???????? ??? ?? ??????? ?? ???????: %s",
		GetPlayerNameEx(playerid), playerid, reason);
	SendClientMessage(targetid, COLOR_BLUE, msg);

	new fmt_msg[144];
	format(fmt_msg, sizeof fmt_msg, "[R] %s %s[%d] ???????? ?? ??????? ???????????? %s[%d] ?? ???????: %s",
		GetPlayerJobAndRankName(playerid),
		GetPlayerNameEx(playerid),
		playerid,
		GetPlayerNameEx(targetid),
		targetid,
		reason);

	SendMessageToTeam(GetPlayerTeamEx(playerid), fmt_msg, COLOR_RADIO);
	return 1;
}

stock CheckMedicalCardExpiration(playerid)
{
    new medcard_date = GetPlayerData(playerid, P_MEDCARD_DATE);
    new has_medcard = GetPlayerData(playerid, P_MEDCARD);
    new team = GetPlayerTeamEx(playerid);

    new year, month, day;
    getdate(year, month, day);
    new current_days = (year * 365) + (month * 30) + day;

    if (has_medcard != 1 || medcard_date <= 0)
        return 0;

    new delta = current_days - medcard_date;

    if (delta >= 30)
    {
        if (team > 0)
        {
            if (delta == 30)
            {
                SetPlayerData(playerid, P_MEDCARD, 0);
                UpdatePlayerDatabaseInt(playerid, "medcard", 0);
                SCM(playerid, -1, "{FFFFFF}???? ???????ù {FFFF00}???. ????? {FFFFFF}?????????ù, ??? ????? ?? ?????????????.");
                SCM(playerid, -1, "{FFFFFF}???? ?? ?? ???????? ???. ????? ? ??????? ?????, ?? ?????? ??????? ?? ???????????.");
                return 1;
            }

            if (delta >= 31)
            {
                SetPlayerData(playerid, P_MEDCARD, 0);
                SetPlayerData(playerid, P_MEDCARD_DATE, 0);
                UpdatePlayerDatabaseInt(playerid, "medcard", 0);
                UpdatePlayerDatabaseInt(playerid, "medcard_date", 0);
                InvitePlayer(playerid, 0, 0, true);
                SCM(playerid, -1, "?? ???? ??????? ?? ??????????? ??-?? ?????????ù ???. ?????.");
                return 1;
            }
        }
        else
        {
            // 2. ??????? ????? ó ?????????? ?????????
            SetPlayerData(playerid, P_MEDCARD, 0);
            SetPlayerData(playerid, P_MEDCARD_DATE, 0);
            UpdatePlayerDatabaseInt(playerid, "medcard", 0);
            UpdatePlayerDatabaseInt(playerid, "medcard_date", 0);
            SCM(playerid, -1, "{FFFFFF}???? ???????ù {FFFF00}???. ????? {FFFFFF}?????????ù, ??? ????? ?? ?????????????.");
        }
    }

    return 0;
}

stock CheckWorkDayVisuals(playerid)
{
    if (GetPlayerTeamEx(playerid) > 0)
        ApplyWorkDayVisuals(playerid);
    else
        EndWorkDayUval(playerid);
    return 1;
}


stock AddAdminStat(playerid, field[], stat_id)
{
	new value = GetPlayerData(playerid, stat_id) + 1;
	SetPlayerData(playerid, stat_id, value);
	UpdatePlayerDatabaseInt(playerid, field, value);
}

stock CheckAdminStatDate(playerid)
{
	new year, month, day;
	getdate(year, month, day);

	new current_date[11];
	format(current_date, sizeof current_date, "%04d-%02d-%02d", year, month, day);

	new query[128];
	mysql_format(mysql, query, sizeof query,
		"SELECT last_stat_update FROM accounts WHERE id=%d", GetPlayerAccountID(playerid));
	mysql_tquery(mysql, query, "AdminStatDate_Callback", "ds", playerid, current_date);
}

public AdminStatDate_Callback(playerid, current_date[])
{
	if (!IsPlayerConnected(playerid)) return;

	new last_date[11];
	if (cache_num_rows()) cache_get_row(0, 0, last_date);
	else format(last_date, sizeof last_date, "0000-00-00");
	cache_delete();

	if (strcmp(last_date, current_date, false) != 0)
	{
		SetPlayerData(playerid, P_REPS_TODAY, 0);
		SetPlayerData(playerid, P_ASKS_TODAY, 0); // ??????
		SetPlayerData(playerid, P_MUTES_TODAY, 0);
		SetPlayerData(playerid, P_JAILS_TODAY, 0);
		SetPlayerData(playerid, P_WARNS_TODAY, 0);
		SetPlayerData(playerid, P_BANS_TODAY, 0);
		SetPlayerData(playerid, P_SPAWNS_TODAY, 0);
		SetPlayerData(playerid, P_KICKS_TODAY, 0);

		UpdatePlayerDatabaseInt(playerid, "reps_today", 0);
		UpdatePlayerDatabaseInt(playerid, "asks_today", 0); // ??????
		UpdatePlayerDatabaseInt(playerid, "mutes_today", 0);
		UpdatePlayerDatabaseInt(playerid, "jails_today", 0);
		UpdatePlayerDatabaseInt(playerid, "warns_today", 0);
		UpdatePlayerDatabaseInt(playerid, "bans_today", 0);
		UpdatePlayerDatabaseInt(playerid, "spawns_today", 0);
		UpdatePlayerDatabaseInt(playerid, "kicks_today", 0);

		UpdatePlayerDatabaseString(playerid, "last_stat_update", current_date);
	}
}

ShowAdminStatsMenu(playerid)
{
	ShowPlayerDialog(playerid, 8200, DIALOG_STYLE_LIST,
		"{C00040}Baze Russia RolePlay{FFFFFF} | ?????????? ??????????????",
		"????ù ?????????? ??????????????\n?????????? ?? ??????ù",
		"???????", "???????");
}

ShowAdminStatsTotal(playerid)
{
	new text[512];
	format(text, sizeof text,
		""tire" NickName: {FFFF00}%s\n"\
		""tire" ??????? ??????????????: {FFFF00}%d\n"\
		""tire" ?????????: {FFFF00}%s\n"\
		""tire" ????????: {FFFF00}%d ?? 3\n"\
		""tire" ??????? ?? ??????: {FFFF00}%d\n"\
		""tire" ?????: {FFFF00}%d\n"\
		""tire" ???????: {FFFF00}%d\n"\
		""tire" ??????: {FFFF00}%d\n"\
		""tire" ?????: {FFFF00}%d\n"\
		""tire" ???????: {FFFF00}%d\n"\
		""tire" ?????: {FFFF00}%d\n",
		GetPlayerNameEx(playerid),
		GetPlayerAdminEx(playerid),
		GetPlayerData(playerid, P_PREFIX),
		GetPlayerData(playerid, P_ADMIN_WARN),
		GetPlayerData(playerid, P_REPS_TOTAL),
		GetPlayerData(playerid, P_MUTES_TOTAL),
		GetPlayerData(playerid, P_JAILS_TOTAL),
		GetPlayerData(playerid, P_WARNS_TOTAL),
		GetPlayerData(playerid, P_BANS_TOTAL),
		GetPlayerData(playerid, P_SPAWNS_TOTAL),
		GetPlayerData(playerid, P_KICKS_TOTAL)
	);

	ShowPlayerDialog(playerid, 8201, DIALOG_STYLE_MSGBOX,
		"{C00040}Baze Russia RolePlay{FFFFFF} | ?????????? ??????????????",
		text, "???ù?", "");
}

ShowAdminStatsToday(playerid)
{
	new year, month, day;
	getdate(year, month, day);
	
	new text[512];
	format(text, sizeof text,
		""tire" ???????: {FFFF00}%s\n"\
		""tire" ???? ? ????ù: {FFFF00}%d %s %d ?.(??????ù)\n\n"\
		""tire" ??????? ?? ??????: {FFFF00}%d\n"\
		""tire" ?????: {FFFF00}%d\n"\
		""tire" ???????: {FFFF00}%d\n"\
		""tire" ??????: {FFFF00}%d\n"\
		""tire" ?????: {FFFF00}%d\n"\
		""tire" ???????: {FFFF00}%d\n"\
		""tire" ?????: {FFFF00}%d\n",
		GetPlayerNameEx(playerid),
		day,
		month,
		year,
		GetPlayerData(playerid, P_REPS_TODAY),
		GetPlayerData(playerid, P_MUTES_TODAY),
		GetPlayerData(playerid, P_JAILS_TODAY),
		GetPlayerData(playerid, P_WARNS_TODAY),
		GetPlayerData(playerid, P_BANS_TODAY),
		GetPlayerData(playerid, P_SPAWNS_TODAY),
		GetPlayerData(playerid, P_KICKS_TODAY)
	);

	ShowPlayerDialog(playerid, 8202, DIALOG_STYLE_MSGBOX,
		"{C00040}Baze Russia RolePlay{FFFFFF} | ?????????? ??????????????",
		text, "???ù?", "");
}

CMD:astats(playerid)
{
	if (GetPlayerAdminEx(playerid) == 0) return SendClientMessage(playerid, COLOR_GREY, "??? ?? ???????? ??? ???????");

	ShowAdminStatsTotal(playerid);
	return 1;
}

stock UpdateArmoryDatabaseInt(armory_id, field[], value)
{
	if (armory_id < 0 || armory_id >= sizeof(g_armory)) return 0;

	new query[128];
	mysql_format(mysql, query, sizeof query,
		"UPDATE armories SET `%s` = %d WHERE id = %d LIMIT 1",
		field, value, armory_id
	);
	mysql_query(mysql, query, false);

	printf("[armory] SQL ??????????: %s", query);
	return 1;
}

stock LoadAllArmories()
{
	printf("[ARMORY-LOAD] ???????? ???????? ???? ??????? ?? ???? ??????...");
	new query[128];
	mysql_format(mysql, query, sizeof query, "SELECT id, materials FROM armories WHERE id IN (0,1,2,3,4)");
	printf("[ARMORY-LOAD] ??????ù?? ??????: %s", query);
	mysql_tquery(mysql, query, "OnArmoriesLoaded");
}

forward OnArmoriesLoaded();
public OnArmoriesLoaded()
{
	new rows = cache_num_rows();
	printf("[ARMORY-LOAD] ?????? ????????, ???????? ?????: %d", rows);
	
	if(rows == 0)
	{
		printf("[ARMORY-LOAD] ??????: ? ???? ?????? ?? ??????? ???????!");
		return;
	}
	
	printf("[ARMORY-LOAD] ???????????? %d ???????...", rows);
	
	for(new i = 0; i < rows; i++)
	{
		new id = cache_get_field_content_int(i, "id");
		new materials = cache_get_field_content_int(i, "materials");
		
		printf("[ARMORY-LOAD] ???????????? ?????? %d: ?????=%d, ?????????=%d", i, id, materials);
		
		if(id >= 0 && id < sizeof(g_armory))
		{
			g_armory[id][A_MATERIALS] = clamp(materials, 0, 100000);
			UpdateArmoryLabel(id);
			printf("[ARMORY-LOAD] ?????: ????? %d ???????? ? %d ???????????", id, g_armory[id][A_MATERIALS]);
		}
		else
		{
			printf("[ARMORY-LOAD] ??????: ???????? ID ?????? %d (?????? ???????: %d)", id, sizeof(g_armory));
		}
	}
	
	printf("[ARMORY-LOAD] ???????? ???? ??????? ?????????");
	
	for(new i = 0; i < 5; i++)
	{
		printf("[ARMORY-LOAD] ????????: g_armory[%d][A_MATERIALS] = %d", i, g_armory[i][A_MATERIALS]);
	}
}

CMD:nitrogui(playerid, params[])
{
    new vehicleid = GetPlayerVehicleID(playerid);
    if (vehicleid == INVALID_VEHICLE_ID)
    {
        SendClientMessage(playerid, COLOR_RED, "?? ?? ? ????.");
        return 1;
    }


    AddVehicleComponent(vehicleid, 1010);


    SendClientMessage(playerid, COLOR_GREEN, "{ffffff}????? 10X.");
    return 1;
}

CMD:setbodykits(playerid, params[])
{
    new vehicleid = GetPlayerVehicleID(playerid);
    if(!vehicleid) return SendClientMessage(playerid, -1, "????? ???? ? ??????");
    
    if(isnull(params)) 
        return SendClientMessage(playerid, -1, "/setbodykits [ID]");
    
    new componentid = strval(params);
    
    new BitStream:bs = BS_New();
    BS_WriteValue(bs, PR_UINT8, 15);
    BS_WriteValue(bs, PR_UINT8, 0);
    BS_WriteValue(bs, PR_UINT16, vehicleid);
    BS_WriteValue(bs, PR_UINT16, componentid);
    PR_SendRPC(bs, playerid, 168, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bs);
    return 1;
}

stock SetServerLogo(playerid, bool:show)
{
    new BitStream:bitstream = BS_New();
    BS_WriteValue(bitstream, PR_UINT8, 25); // ID RPC ??ù ???????? ???????
    BS_WriteValue(bitstream, PR_BOOL, show); // true - ????????, false - ??????

    PR_SendRPC(bitstream, playerid, 168, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bitstream);
}

CMD:logo(playerid, params[])
{
    if(!strlen(params))
    {
        SendClientMessage(playerid, -1, "?????????????: /logo [on/off] - ????????/?????? ??????? ???????");
        return 1;
    }
    
    if(strcmp(params, "on", true) == 0 || strcmp(params, "1", true) == 0)
    {
        SetServerLogo(playerid, true);
        SendClientMessage(playerid, -1, "??????? ??????? ???????");
    }
    else if(strcmp(params, "off", true) == 0 || strcmp(params, "0", true) == 0)
    {
        SetServerLogo(playerid, false);
        SendClientMessage(playerid, -1, "??????? ??????? ????????");
    }
    else
    {
        SendClientMessage(playerid, -1, "?????????????: /logo [on/off] - ????????/?????? ??????? ???????");
    }
    
    return 1;
}

CMD:specktest(playerid, params[])
{
    new targetid;
    if(sscanf(params, "u", targetid))
        return SendClientMessage(playerid, COLOR_GREY, "?????????????: /speck [id ??????]");
    
    if(!IsPlayerConnected(targetid))
        return SendClientMessage(playerid, COLOR_GREY, "????? ?? ??????!");

	ShowSpectateGUI(playerid, targetid);
    
    return 1;
}

stock ShowSpectateGUI(playerid, targetid)
{
    new target_name[MAX_PLAYER_NAME];
    new Float:hp, Float:armor, Float:speed, ping, money, vehicleid, level;
    
    GetPlayerName(targetid, target_name, sizeof(target_name));
    GetPlayerHealth(targetid, hp);
    GetPlayerArmour(targetid, armor);
    ping = GetPlayerPing(targetid);
    money = GetPlayerMoney(targetid);
    vehicleid = GetPlayerVehicleID(targetid);
    speed = GetPlayerSpeed(targetid);
    level = GetPlayerLevel(targetid);

    new Node:info1 = JSON_Object("p", JSON_Int(5), "n", JSON_String("????"), "v", JSON_Int(ping));
    new Node:info2 = JSON_Object("p", JSON_Int(4), "n", JSON_String("????????"), "v", JSON_Int(floatround(speed)));
    new Node:info3 = JSON_Object("p", JSON_Int(2), "n", JSON_String("????????"), "v", JSON_Int(floatround(hp)));
    new Node:info4 = JSON_Object("p", JSON_Int(3), "n", JSON_String("????ù"), "v", JSON_Int(floatround(armor)));
    new Node:info5 = JSON_Object("p", JSON_Int(6), "n", JSON_String("??????"), "v", JSON_Int(money));
    new Node:info6 = JSON_Object("p", JSON_Int(1), "n", JSON_String("???????"), "v", JSON_Int(level));
    new Node:info7 = JSON_Object("p", JSON_Int(7), "n", JSON_String("ù????????"), "v", JSON_Int(vehicleid));
    
    new Node:pi_array = JSON_Array(info1, info2, info3, info4, info5, info6, info7);
    
    new Node:json = JSON_Object();
    JSON_SetInt(json, "t", 1);
    JSON_SetInt(json, "id", targetid);
    JSON_SetString(json, "pn", target_name);
    JSON_SetArray(json, "pi", pi_array);
    
    JSON_SetString(json, "tableTitle", "?????????ù ?? ??????");
    JSON_SetBool(json, "isShowTable", true);
    JSON_SetString(json, "categoryTitle", "????? ???????ù");
    JSON_SetBool(json, "isInterfaceVisible", true);
    
    ShowPlayerGUI(playerid, 66, json);
    
    JSON_Cleanup(json);
    
    return 1;
}

stock FindPreviousPlayer(currentPlayer)
{
    for(new i = currentPlayer - 1; i >= 0; i--)
    {
        if(i == currentPlayer) continue;
        if(IsPlayerConnected(i) && IsPlayerLogged(i) && !GetPlayerSecretEx(i))
            return i;
    }
    
    for(new i = MAX_PLAYERS - 1; i > currentPlayer; i--)
    {
        if(i == currentPlayer) continue;
        if(IsPlayerConnected(i) && IsPlayerLogged(i) && !GetPlayerSecretEx(i))
            return i;
    }
    
    return -1;
}

stock FindNextPlayer(currentPlayer)
{
    for(new i = currentPlayer + 1; i < MAX_PLAYERS; i++)
    {
        if(i == currentPlayer) continue;
        if(IsPlayerConnected(i) && IsPlayerLogged(i) && !GetPlayerSecretEx(i))
            return i;
    }
    
    for(new i = 0; i < currentPlayer; i++)
    {
        if(i == currentPlayer) continue;
        if(IsPlayerConnected(i) && IsPlayerLogged(i) && !GetPlayerSecretEx(i))
            return i;
    }
    
    return -1;
}

stock AdminSlapPlayer(playerid, targetid, direction, reason[])
{
    if(GetPlayerAdminEx(playerid) < 1) return 0;
    if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid)) return 0;
    if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(targetid)) return 0;

    new Float:x, Float:y, Float:z;
    GetPlayerPos(targetid, x, y, z);

    new fmt_text[256], fmt_msg[256];
    new fixed_reason[64];
    format(fixed_reason, sizeof(fixed_reason), "%s", reason);

    switch(direction)
    {
        case 0:
        {
            SetPlayerPos(targetid, x, y, z + 5.0);
            PlayerPlaySound(targetid, 1130, 0.0, 0.0, 0.0);

            format(fmt_text, sizeof fmt_text, "[A] %s[%d] ????????? ?????? %s[%d]. ???????: %s", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid, fixed_reason);
            SendMessageToAdmins(fmt_text, 0x999999FF);

            format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ?????????? ?????? %s[%d]. ???????: %s", GetPlayerNameEx(targetid), targetid, fixed_reason);
            SendClientMessage(playerid, -1, fmt_msg);

            format(fmt_text, sizeof fmt_text, "{1E90FF}????????????? %s[%d] ????????? ???. ???????: %s", GetPlayerNameEx(playerid), playerid, fixed_reason);
            SendClientMessage(targetid, -1, fmt_text);
        }
        case 1:
        {
            SetPlayerPos(targetid, x, y, z - 5.0);
            PlayerPlaySound(targetid, 1130, 0.0, 0.0, 0.0);

            format(fmt_text, sizeof fmt_text, "[A] %s[%d] ??????? ?????? %s[%d]. ???????: %s", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid, fixed_reason);
            SendMessageToAdmins(fmt_text, 0x999999FF);

            format(fmt_msg, sizeof fmt_msg, "{1E90FF}?? ???????? ?????? %s[%d]. ???????: %s", GetPlayerNameEx(targetid), targetid, fixed_reason);
            SendClientMessage(playerid, -1, fmt_msg);

            format(fmt_text, sizeof fmt_text, "{1E90FF}????????????? %s[%d] ??????? ???. ???????: %s", GetPlayerNameEx(playerid), playerid, fixed_reason);
            SendClientMessage(targetid, -1, fmt_text);
        }
    }
    return 1;
}

stock AdminKickPlayer(playerid, targetid, silent, reason[])
{
    if(GetPlayerAdminEx(playerid) < 1) return 0;
    if(!IsPlayerConnected(targetid)) return 0;
    if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(targetid)) return 0;

    new fixed_reason[64];
    format(fixed_reason, sizeof(fixed_reason), "%s", reason);

    if(silent == 0)
    {
        AddAdminStat(playerid, "kicks_total", P_KICKS_TOTAL);
        AddAdminStat(playerid, "kicks_today", P_KICKS_TODAY);

        new fmt_msg[256];
        format(fmt_msg, sizeof fmt_msg, "????????????? %s ?????? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid));

        if(strlen(fixed_reason) > 0)
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);

        SendClientMessageToAll(0xFF5533FF, fmt_msg);
        
        SendClientMessage(targetid, 0xCECECEFF, "{CC6600}??? ????????? ?? ??????? ?????? ?????");
        
        format(fmt_msg, sizeof fmt_msg, "?????? %s[acc:%d]", GetPlayerNameEx(targetid), GetPlayerAccountID(targetid));
        SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

        SetTimerEx("DelayedKick", 100, false, "i", targetid);
    }
    else
    {
        if(GetPlayerAdminEx(playerid) < 2) return 0;
        
        AddAdminStat(playerid, "kicks_total", P_KICKS_TOTAL);
        AddAdminStat(playerid, "kicks_today", P_KICKS_TODAY);

        new fmt_msg[128];
        format(fmt_msg, sizeof fmt_msg, "[A] ????????????? %s[%d] ?????? %s[%d] ??? ??????? ????", GetPlayerNameEx(playerid), playerid, GetPlayerNameEx(targetid), targetid);
        SendMessageToAdmins(fmt_msg, 0x999999FF);

        format(fmt_msg, sizeof fmt_msg, "??? ???? ?????? %s[acc:%d]", GetPlayerNameEx(targetid), GetPlayerAccountID(targetid));
        SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

        Kick(targetid);
    }
    return 1;
}

forward DelayedKick(playerid);
public DelayedKick(playerid)
{
    Kick(playerid);
}

stock AdminMutePlayer(playerid, targetid, action, mute_time, reason[])
{
    if(GetPlayerAdminEx(playerid) < 1) return 0;
    if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid)) return 0;
    if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(targetid)) return 0;

    new fmt_msg[256];
    new fixed_reason[64];
    format(fixed_reason, sizeof(fixed_reason), "%s", reason);

    if(action == 0)
    {
        if(!(1 <= mute_time <= 360)) return 0;
        if(GetPlayerData(targetid, P_MUTE) > 0) return 0;

        AddAdminStat(playerid, "mutes_total", P_MUTES_TOTAL);
        AddAdminStat(playerid, "mutes_today", P_MUTES_TODAY);

        format(fmt_msg, sizeof fmt_msg, "????????????? %s ????? ?????????? ???? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid), mute_time);

        if(strlen(fixed_reason))
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);

        SendClientMessageToAll(0xFF5533FF, fmt_msg);

        SetPlayerData(targetid, P_MUTE, mute_time * 60);
        UpdatePlayerDatabaseInt(targetid, "mute", mute_time * 60);

        SendClientMessage(targetid, 0xCECECEFF, "????ù ?? ????????ù ???? ????: {CCCC00}/time");

        format(fmt_msg, sizeof fmt_msg, "????? %s[acc:%d] ?????????? ???? ?? %d ???. ???????: %s",
        GetPlayerNameEx(targetid), GetPlayerAccountID(targetid), mute_time, fixed_reason);

        SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);
    }
    else
    {
        if(GetPlayerData(targetid, P_MUTE) <= 0) return 0;

        format(fmt_msg, sizeof fmt_msg, "????????????? %s ??ù? ??? ? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid));

        if(strlen(fixed_reason))
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);

        SendClientMessageToAll(0xFF5533FF, fmt_msg);

        SendClientMessage(targetid, 0x66CC00FF, "?????? ? ??? ????????????");

        format(fmt_msg, sizeof fmt_msg, "????????????? ??? %s[acc:%d]. ???????: %s",
        GetPlayerNameEx(targetid), GetPlayerAccountID(targetid), fixed_reason);

        SetPlayerData(targetid, P_MUTE, 0);
        UpdatePlayerDatabaseInt(targetid, "mute", 0);

        SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);
    }
    return 1;
}

stock AdminJailPlayer(playerid, targetid, action, jail_time, reason[])
{
    if(GetPlayerAdminEx(playerid) < 1) return 0;
    if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid)) return 0;
    if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(targetid)) return 0;

    new fmt_msg[256];
    new fixed_reason[64];
    format(fixed_reason, sizeof(fixed_reason), "%s", reason);

    if(action == 0)
    {
        if(!(1 <= jail_time <= 360)) return 0;
        if(GetPlayerData(targetid, P_JAIL) > 0) return 0;

        AddAdminStat(playerid, "jails_total", P_JAILS_TOTAL);
        AddAdminStat(playerid, "jails_today", P_JAILS_TODAY);

        format(fmt_msg, sizeof fmt_msg, "????????????? %s ??????? ? ?????? ?????? %s ?? %d ???", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid), jail_time);

        if(strlen(fixed_reason))
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);

        SendClientMessageToAll(0xFF5533FF, fmt_msg);

        SendClientMessage(targetid, 0xCECECEFF, "????ù ?? ????????ù ?????????ù: {CCCC00}/time");

        FSinJailPlayer(targetid, jail_time);
        
        SetPlayerData(targetid, P_SUSPECT, 0);
        UpdatePlayerDatabaseInt(targetid, "suspect", 0);

        format(fmt_msg, sizeof fmt_msg, "??????? ? ?????? %s[acc:%d] ?? %d ???. ???????: %s",
        GetPlayerNameEx(targetid), GetPlayerAccountID(targetid), jail_time, fixed_reason);

        SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);
    }
    else
    {
        new bool:isFsin = GetPlayerData(targetid, P_FJAIL) > 0;
        new bool:isJail = GetPlayerData(targetid, P_JAIL) > 0;

        if(!isFsin && !isJail) return 0;

        format(fmt_msg, sizeof fmt_msg, "????????????? %s ???????? ?? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid));
        if(strlen(fixed_reason))
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);

        SendClientMessageToAll(0xFF5533FF, fmt_msg);
        SendClientMessage(targetid, 0x66CC00FF, "??? ????????? ? ??????");

        format(fmt_msg, sizeof fmt_msg, "???????? ? ?????? %s[acc:%d]. ???????: %s",
            GetPlayerNameEx(targetid), GetPlayerAccountID(targetid), fixed_reason);

        if(isFsin)
            FSinUnjailPlayer(targetid);
        else
            UnjailPlayer(targetid);

        SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);
    }
    return 1;
}

stock AdminWarnPlayer(playerid, targetid, action, reason[])
{
    if(GetPlayerAdminEx(playerid) < 2) return 0;
    if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid)) return 0;
    if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(targetid)) return 0;

    new fmt_msg[256];
    new fixed_reason[64];
    format(fixed_reason, sizeof(fixed_reason), "%s", reason);

    if(action == 0)
    {
        AddAdminStat(playerid, "warns_total", P_WARNS_TOTAL);
        AddAdminStat(playerid, "warns_today", P_WARNS_TODAY);

        AddPlayerData(targetid, P_WARN, +, 1);
        SetPlayerData(targetid, P_WARN_TIME, gettime() + (86400 * 10));

        format(fmt_msg, sizeof fmt_msg, "????????????? %s ????? ?????????????? ?????? %s [%d|3]", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid), GetPlayerData(targetid, P_WARN));

        if(strlen(fixed_reason) > 0)
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);

        SendClientMessageToAll(0xFF5533FF, fmt_msg);

        InvitePlayer(targetid, 0, 0, true);

        new uid = GetPlayerAccountID(targetid);
        new warns = GetPlayerData(targetid, P_WARN);
        new warns_time = GetPlayerData(targetid, P_WARN_TIME);

        format(fmt_msg, sizeof fmt_msg, "????? ???? %s[acc:%d] (%d/3). ???????: %s", GetPlayerNameEx(targetid), uid, warns, fixed_reason);
        SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);

        if(warns >= 3)
        {
            SendClientMessage(targetid, 0xFF5533FF, "??????? ???????????? ?? 10 ????");

            warns = 0;
            warns_time = 0;

            AddBan(uid, gettime(), 10, GetPlayerIpEx(targetid), "???????? 3 ?????", GetPlayerNameEx(playerid));
        }
        else SetTimerEx("DelayedKick", 100, false, "i", targetid);

        UpdatePlayerDatabaseInt(targetid, "warn", warns);
        UpdatePlayerDatabaseInt(targetid, "warn_time", warns_time);
    }
    else
    {
        new currentWarns = GetPlayerData(targetid, P_WARN);
        if(currentWarns <= 0)
        {
            SendClientMessage(playerid, COLOR_RED, "? ?????? ??? ??????");
            return 0;
        }

        new newWarns = currentWarns - 1;
        SetPlayerData(targetid, P_WARN, newWarns);
        
        if(newWarns <= 0)
        {
            SetPlayerData(targetid, P_WARN_TIME, 0);
            UpdatePlayerDatabaseInt(targetid, "warn_time", 0);
        }

        UpdatePlayerDatabaseInt(targetid, "warn", newWarns);

        format(fmt_msg, sizeof fmt_msg, "????????????? %s ??ù? ?????????????? ? ?????? %s [%d|3]", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid), newWarns);

        if(strlen(fixed_reason) > 0)
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);

        SendClientMessageToAll(0xFF5533FF, fmt_msg);

        format(fmt_msg, sizeof fmt_msg, "??ù? ???? %s[acc:%d] (%d/3). ???????: %s", 
            GetPlayerNameEx(targetid), GetPlayerAccountID(targetid), newWarns, fixed_reason);
        SendLog(playerid, LOG_TYPE_ADMIN_ACTION, fmt_msg);
    }
    return 1;
}

stock AdminBanPlayer(playerid, targetid, permanent, ban_time, reason[])
{
    if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid)) return 0;
    if(GetPlayerAdminEx(playerid) < GetPlayerAdminEx(targetid)) return 0;

    new fmt_msg[256];
    new fixed_reason[64];
    format(fixed_reason, sizeof(fixed_reason), "%s", reason);

    if(permanent == 0)
    {
        if(GetPlayerAdminEx(playerid) < 3) return 0;
        
        new max_days = GetPlayerAdminEx(playerid) > 4 ? 365 : 30;

        if(!(1 <= ban_time <= max_days)) return 0;

        AddAdminStat(playerid, "bans_total", P_BANS_TOTAL);
        AddAdminStat(playerid, "bans_today", P_BANS_TODAY);

        format(fmt_msg, sizeof fmt_msg, "????????????? %s ???????????? ?????? %s ?? %d ????", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid), ban_time);

        if(strlen(fixed_reason) > 0)
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);

        SendClientMessageToAll(0xFF5533FF, fmt_msg);

        if(strlen(fixed_reason) == 0) fixed_reason = "None";

        format(fmt_msg, sizeof fmt_msg, "??????? %s[acc:%d] ?? %d ????. ??????? %s", GetPlayerNameEx(targetid), GetPlayerAccountID(targetid), ban_time, fixed_reason);

        SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_msg);

        AddBan(GetPlayerAccountID(targetid), gettime(), ban_time, fixed_reason, GetPlayerNameEx(playerid));
    }
    else
    {
        if(GetPlayerAdminEx(playerid) < 4) return 0;
        
        ban_time = 9999;

        format(fmt_msg, sizeof fmt_msg, "????????????? %s ???????? ???????????? ?????? %s", GetPlayerNameEx(playerid), GetPlayerNameEx(targetid));
        if(strlen(fixed_reason) > 0)
            format(fmt_msg, sizeof fmt_msg, "%s. ???????: %s", fmt_msg, fixed_reason);
        SendClientMessageToAll(0xFF5533FF, fmt_msg);
        
        if(strlen(fixed_reason) == 0) fixed_reason = "None";
        
        format(fmt_msg, sizeof fmt_msg, "??????? %s[acc:%d] ????????. ??????? %s", GetPlayerNameEx(targetid), GetPlayerAccountID(targetid), fixed_reason);
        SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_msg);
        
        AddAdminStat(playerid, "bans_total", P_BANS_TOTAL);
        AddAdminStat(playerid, "bans_today", P_BANS_TODAY);
        
        AddBan(GetPlayerAccountID(targetid), gettime(), ban_time, fixed_reason, GetPlayerNameEx(playerid));
    }
    return 1;
}

GetPlayerInitials(const name[], initials[], init_size)
{
    new pos = strfind(name, "_", true);
    
    if(pos != -1 && pos > 0 && pos < strlen(name)-1)
    {
        new firstChar[2], lastName[24];
        format(firstChar, sizeof(firstChar), "%c", name[0]);
        strmid(lastName, name, pos+1, strlen(name));
        
        format(initials, init_size, "%s. %s", firstChar, lastName);
    }
    else
    {
        format(initials, init_size, name);
    }
}

GetFormTypeName(type, name[], size)
{
    switch(type)
    {
        case FORM_BAN: format(name, size, "/ban");
        case FORM_PERMBAN: format(name, size, "/permban");
        case FORM_WARN: format(name, size, "/warn");
        case FORM_UNWARN: format(name, size, "/unwarn");
        case FORM_UNBAN: format(name, size, "/unban");
        default: format(name, size, "Unknown");
    }
}

GetRequiredAdminLevelForApproval(formType)
{
    switch(formType)
    {
        case FORM_BAN: return 3;
        case FORM_PERMBAN: return 4;
        case FORM_WARN: return 2;
        case FORM_UNWARN: return 2;
        case FORM_UNBAN: return 4;
        default: return 1;
    }
}

FindFreeFormSlot()
{
    for(new i = 0; i < MAX_ADMIN_FORMS; i++)
    {
        if(AdminForms[i][form_status] == 0 && AdminForms[i][form_type] == 0)
        {
            return i;
        }
    }
    return -1;
}

AddAdminForm(type, target_name[], target_id, target_account, reason[], duration, author_id, author_name[], author_account)
{
    new slot = FindFreeFormSlot();
    if(slot == -1)
    {
        SendClientMessage(author_id, COLOR_RED, "????????? ????? ????. ?????????? ?????.");
        return -1;
    }
    
    AdminForms[slot][form_type] = type;
    format(AdminForms[slot][form_target_name], MAX_PLAYER_NAME, target_name);
    AdminForms[slot][form_target_id] = target_id;
    AdminForms[slot][form_target_account] = target_account;
    format(AdminForms[slot][form_reason], 128, reason);
    AdminForms[slot][form_duration] = duration;
    AdminForms[slot][form_author] = author_id;
    format(AdminForms[slot][form_author_name], MAX_PLAYER_NAME, author_name);
    AdminForms[slot][form_author_account] = author_account;
    AdminForms[slot][form_time] = gettime();
    AdminForms[slot][form_status] = 0;
    AdminForms[slot][form_approved_by] = INVALID_PLAYER_ID;
    AdminForms[slot][form_approved_name] = EOS;
    
    if(FormCount < MAX_ADMIN_FORMS) FormCount++;
    
    new message[128];
    format(message, sizeof(message), ""c_white"{FFCC00}[A] %s ???? ????? ????? ??ù ????????????? ??????? (/af).", author_name);
    SendMessageToAdmins(message, COLOR_WHITE);
    
    return slot;
}

GetPendingFormsCount()
{
    new count = 0;
    for(new i = 0; i < MAX_ADMIN_FORMS; i++)
    {
        if(AdminForms[i][form_status] == 0 && AdminForms[i][form_type] != 0)
        {
            count++;
        }
    }
    return count;
}

GetPlayerIDFromString(const string[])
{
    new isnumeric = 1;
    for(new i = 0; i < strlen(string); i++)
    {
        if(string[i] < '0' || string[i] > '9')
        {
            isnumeric = 0;
            break;
        }
    }
    
    if(isnumeric)
    {
        new id = strval(string);
        if(IsPlayerConnected(id) && id != INVALID_PLAYER_ID)
        {
            return id;
        }
    }
    else
    {
        for(new i = 0; i < MAX_PLAYERS; i++)
        {
            if(IsPlayerConnected(i))
            {
                if(strfind(GetPlayerNameEx(i), string, true) != -1)
                {
                    return i;
                }
            }
        }
    }
    return INVALID_PLAYER_ID;
}

ProcessBanFormInput(playerid, inputtext[], formType)
{
    new pos = strfind(inputtext, " ", false, 0);
    if(pos == -1)
    {
        if(formType == FORM_BAN)
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "??????????? [ID/NickName] [???(1-30)] [???????]", "");
        }
        else // FORM_PERMBAN
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "??????????? [ID/NickName] [???????]", "");
        }
        return 0;
    }
    
    new targetStr[64], rest[128];
    strmid(targetStr, inputtext, 0, pos);
    strmid(rest, inputtext, pos + 1, strlen(inputtext));
    
    // ??ù ???? ????? ????? ?????? ?????? (??????????? ???? ? ???????)
    new daysStr[16], reason[128];
    if(formType == FORM_BAN)
    {
        new secondPos = strfind(rest, " ", false, 0);
        if(secondPos == -1)
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "??????????? [ID/NickName] [???(1-30)] [???????]", "");
            return 0;
        }
        
        strmid(daysStr, rest, 0, secondPos);
        strmid(reason, rest, secondPos + 1, strlen(rest));
    }
    else // FORM_PERMBAN
    {
        format(reason, sizeof(reason), rest);
    }
    
    // ?????????? ?????? ???????
    utf8_to_cp1251(reason);
    
    new target = GetPlayerIDFromString(targetStr);
    new target_name[MAX_PLAYER_NAME];
    new target_account = 0;
    new playerExists = 0;
    
    if(target != INVALID_PLAYER_ID)
    {
        format(target_name, MAX_PLAYER_NAME, GetPlayerNameEx(target));
        target_account = GetPlayerAccountID(target);
        playerExists = 1;
    }
    else
    {
        format(target_name, MAX_PLAYER_NAME, targetStr);
        new query[128], Cache:result;
        mysql_format(mysql, query, sizeof query, "SELECT id FROM accounts WHERE name = '%e'", targetStr);
        result = mysql_query(mysql, query, true);
        
        if(cache_num_rows())
        {
            target_account = cache_get_row_int(0, 0);
            playerExists = 1;
        }
        cache_delete(result);
    }
    
    if(!playerExists)
    {
        ShowNotificationNew(playerid, 0, 3, 0, 0, "????? ?? ??????", "");
        return 0;
    }
    
    if(formType == FORM_BAN)
    {
        new days = strval(daysStr);
        if(days < 1 || days > 30)
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "??? ?????? ???? ?? 1 ?? 30", "");
            return 0;
        }
    }
    
    // ??????? ?????? ??????? ? ???????
    trim(reason);
    
    if(strlen(reason) == 0)
    {
        ShowNotificationNew(playerid, 0, 3, 0, 0, "??????? ???????", "");
        return 0;
    }
    
    new authorInitials[32], finalReason[128];
    GetPlayerInitials(GetPlayerNameEx(playerid), authorInitials, sizeof(authorInitials));
    format(finalReason, sizeof(finalReason), "%s by %s", reason, authorInitials);
    
    new duration = 0;
    if(formType == FORM_BAN) duration = strval(daysStr);
    if(formType == FORM_PERMBAN) duration = 9999;
    
    new slot = AddAdminForm(formType, target_name, target, target_account, finalReason, duration, 
        playerid, GetPlayerNameEx(playerid), GetPlayerAccountID(playerid));

    return (slot != -1);
}

ProcessSimpleFormInput(playerid, inputtext[], formType)
{
    new pos = strfind(inputtext, " ", false, 0);
    if(pos == -1)
    {
        if(formType == FORM_UNBAN)
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "??????????? [NickName] [???????]", "");
        }
        else
        {
            ShowNotificationNew(playerid, 0, 3, 0, 0, "??????????? [ID/NickName] [???????]", "");
        }
        return 0;
    }
    
    new targetStr[64], reason[128];
    strmid(targetStr, inputtext, 0, pos);
    strmid(reason, inputtext, pos + 1, strlen(inputtext));
    
    // ?????????? ?????? ???????
    utf8_to_cp1251(reason);
    
    // ??????? ?????? ??????? ? ???????
    trim(reason);
    
    if(strlen(reason) == 0)
    {
        ShowNotificationNew(playerid, 0, 3, 0, 0, "??????? ???????", "");
        return 0;
    }
    
    new target = GetPlayerIDFromString(targetStr);
    new target_name[MAX_PLAYER_NAME];
    new target_account = 0;
    new playerExists = 0;
    
    // ??ù UNBAN ??????ù?? ?????? ?? ???? (?? ?? ID)
    if(formType == FORM_UNBAN)
    {
        format(target_name, MAX_PLAYER_NAME, targetStr);
        new query[128], Cache:result;
        mysql_format(mysql, query, sizeof query, "SELECT id FROM accounts WHERE name = '%e'", targetStr);
        result = mysql_query(mysql, query, true);
        
        if(cache_num_rows())
        {
            target_account = cache_get_row_int(0, 0);
            playerExists = 1;
        }
        cache_delete(result);
    }
    else // ??ù ?????? ???? ??????ù?? ? ?????? ? ???????
    {
        if(target != INVALID_PLAYER_ID)
        {
            format(target_name, MAX_PLAYER_NAME, GetPlayerNameEx(target));
            target_account = GetPlayerAccountID(target);
            playerExists = 1;
        }
        else
        {
            format(target_name, MAX_PLAYER_NAME, targetStr);
            new query[128], Cache:result;
            mysql_format(mysql, query, sizeof query, "SELECT id FROM accounts WHERE name = '%e'", targetStr);
            result = mysql_query(mysql, query, true);
            
            if(cache_num_rows())
            {
                target_account = cache_get_row_int(0, 0);
                playerExists = 1;
            }
            cache_delete(result);
        }
    }
    
    if(!playerExists)
    {
        ShowNotificationNew(playerid, 0, 3, 0, 0, "????? ?? ??????", "");
        return 0;
    }
    
    new authorInitials[32], finalReason[128];
    GetPlayerInitials(GetPlayerNameEx(playerid), authorInitials, sizeof(authorInitials));
    format(finalReason, sizeof(finalReason), "%s by %s", reason, authorInitials);
    
    new slot = AddAdminForm(formType, target_name, target, target_account, finalReason, 0, 
        playerid, GetPlayerNameEx(playerid), GetPlayerAccountID(playerid));

    return (slot != -1);
}

stock trim(string[])
{
    new start = 0, end = strlen(string) - 1;
    
    while(string[start] == ' ' || string[start] == '\t') start++;
    while((string[end] == ' ' || string[end] == '\t') && end > start) end--;
    
    if(start > 0 || end < strlen(string) - 1)
    {
        strmid(string, string, start, end + 1);
        string[end - start + 1] = '\0';
    }
}

ExecuteBanForm(formID, approverID)
{
    new targetAccount = AdminForms[formID][form_target_account];
    new targetName[MAX_PLAYER_NAME];
    format(targetName, MAX_PLAYER_NAME, AdminForms[formID][form_target_name]);
    
    if(targetAccount == GetPlayerAccountID(approverID))
    {
        ShowNotificationNew(approverID, 0, 3, 0, 0, "?????ù ???????? ?????-????? ?? ???ù", "");
        CompleteForm(formID, approverID, 0);
        return 0;
    }
    
    // ??????ù?? ???? ?? ??? ??? ? ??????
    new checkQuery[128], Cache:checkResult;
    mysql_format(mysql, checkQuery, sizeof checkQuery, "SELECT id FROM ban_list WHERE user_id = %d AND (unban_time > %d OR unban_time = 0)", targetAccount, gettime());
    checkResult = mysql_query(mysql, checkQuery, true);
    
    if(cache_num_rows() > 0)
    {
        ShowNotificationNew(approverID, 0, 3, 0, 0, "? ?????? ??? ???? ??????????? ???", "");
        cache_delete(checkResult);
        CompleteForm(formID, approverID, 0);
        return 0;
    }
    cache_delete(checkResult);
    
    new onlineTarget = INVALID_PLAYER_ID;
    for(new i = 0; i < MAX_PLAYERS; i++)
    {
        if(IsPlayerConnected(i) && GetPlayerAccountID(i) == targetAccount)
        {
            onlineTarget = i;
            break;
        }
    }
    
    if(onlineTarget != INVALID_PLAYER_ID)
    {
        if(GetPlayerAdminEx(approverID) < GetPlayerAdminEx(onlineTarget))
        {
            ShowNotificationNew(approverID, 0, 3, 0, 0, "?????ù ???????? ?????????????? ???? ??? ?? ??????", "");
            return 0;
        }
        
        new query[200];
        format(query, sizeof(query), "????????????? %s ??????? ?????? %s ?? %d ????. ???????: %s", 
            GetPlayerNameEx(approverID), GetPlayerNameEx(onlineTarget), 
            AdminForms[formID][form_duration], AdminForms[formID][form_reason]);
        SendClientMessageToAll(0xFF5533FF, query);
        
        AddBan(GetPlayerAccountID(onlineTarget), gettime(), AdminForms[formID][form_duration], 
            GetPlayerIpEx(onlineTarget), AdminForms[formID][form_reason], GetPlayerNameEx(approverID));
        
        Kick(onlineTarget);
    }
    else
    {
        new query[144], Cache:result;
        mysql_format(mysql, query, sizeof query, "SELECT last_ip FROM accounts WHERE id=%d", targetAccount);
        result = mysql_query(mysql, query, true);
        
        new ip[16] = "0.0.0.0";
        if(cache_num_rows())
        {
            cache_get_row(0, 0, ip);
        }
        cache_delete(result);
        
        AddBan(targetAccount, gettime(), AdminForms[formID][form_duration], ip, 
            AdminForms[formID][form_reason], GetPlayerNameEx(approverID));
        
        new msg[128];
        format(msg, sizeof(msg), "????????????? %s ??????? ??????? ?????? %s ?? %d ????. ???????: %s", 
            GetPlayerNameEx(approverID), targetName, AdminForms[formID][form_duration], 
            AdminForms[formID][form_reason]);
        SendClientMessageToAll(0xFF5533FF, msg);
    }
    
    return 1;
}

ExecutePermbanForm(formID, approverID)
{
    new targetAccount = AdminForms[formID][form_target_account];
    new targetName[MAX_PLAYER_NAME];
    format(targetName, MAX_PLAYER_NAME, AdminForms[formID][form_target_name]);
    
    if(targetAccount == GetPlayerAccountID(approverID))
    {
        ShowNotificationNew(approverID, 0, 3, 0, 0, "?????ù ???????? ?????-????? ?? ???ù", "");
        CompleteForm(formID, approverID, 0);
        return 0;
    }
    
    new checkQuery[128], Cache:checkResult;
    mysql_format(mysql, checkQuery, sizeof checkQuery, "SELECT id FROM ban_list WHERE user_id = %d AND (unban_time > %d OR unban_time = 0)", targetAccount, gettime());
    checkResult = mysql_query(mysql, checkQuery, true);
    
    if(cache_num_rows() > 0)
    {
        ShowNotificationNew(approverID, 0, 3, 0, 0, "? ?????? ??? ???? ??????????? ???", "");
        cache_delete(checkResult);
        CompleteForm(formID, approverID, 0);
        return 0;
    }
    cache_delete(checkResult);
    
    new onlineTarget = INVALID_PLAYER_ID;
    for(new i = 0; i < MAX_PLAYERS; i++)
    {
        if(IsPlayerConnected(i) && GetPlayerAccountID(i) == targetAccount)
        {
            onlineTarget = i;
            break;
        }
    }
    
    if(onlineTarget != INVALID_PLAYER_ID)
    {
        if(GetPlayerAdminEx(approverID) < GetPlayerAdminEx(onlineTarget))
        {
            ShowNotificationNew(approverID, 0, 3, 0, 0, "?????ù ???????? ?????????????? ???? ??? ?? ??????", "");
            return 0;
        }
        
        new query[200];
        format(query, sizeof(query), "????????????? %s ???????? ???????????? ?????? %s. ???????: %s", GetPlayerNameEx(approverID), GetPlayerNameEx(onlineTarget), AdminForms[formID][form_reason]);
        SendClientMessageToAll(0xFF5533FF, query);
        
        AddBan(GetPlayerAccountID(onlineTarget), gettime(), 9999, GetPlayerIpEx(onlineTarget), AdminForms[formID][form_reason], GetPlayerNameEx(approverID));
        
        Kick(onlineTarget);
    }
    else
    {
        new query[144], Cache:result;
        mysql_format(mysql, query, sizeof query, "SELECT last_ip FROM accounts WHERE id=%d", targetAccount);
        result = mysql_query(mysql, query, true);
        
        new ip[16] = "0.0.0.0";
        if(cache_num_rows())
        {
            cache_get_row(0, 0, ip);
        }
        cache_delete(result);
        
        AddBan(targetAccount, gettime(), 9999, ip, AdminForms[formID][form_reason], GetPlayerNameEx(approverID));
        
        new msg[128];
        format(msg, sizeof(msg), "????????????? %s ???????? ???????????? ?????? %s. ???????: %s", GetPlayerNameEx(approverID), targetName, AdminForms[formID][form_reason]);
        SendClientMessageToAll(0xFF5533FF, msg);
    }
    
    return 1;
}

ExecuteWarnForm(formID, approverID)
{
    new targetAccount = AdminForms[formID][form_target_account];
    new targetName[MAX_PLAYER_NAME];
    format(targetName, MAX_PLAYER_NAME, AdminForms[formID][form_target_name]);
    
    if(targetAccount == GetPlayerAccountID(approverID))
    {
        ShowNotificationNew(approverID, 0, 3, 0, 0, "?????ù ???????? ?????-????? ?? ???ù", "");
        CompleteForm(formID, approverID, 0);
        return 0;
    }
    
    new onlineTarget = INVALID_PLAYER_ID;
    for(new i = 0; i < MAX_PLAYERS; i++)
    {
        if(IsPlayerConnected(i) && GetPlayerAccountID(i) == targetAccount)
        {
            onlineTarget = i;
            break;
        }
    }
    
    if(onlineTarget != INVALID_PLAYER_ID)
    {
        if(GetPlayerAdminEx(approverID) < GetPlayerAdminEx(onlineTarget))
        {
            ShowNotificationNew(approverID, 0, 3, 0, 0, "?????ù ?????? ???? ?????????????? ???? ??? ?? ??????", "");
            return 0;
        }
        
        AddPlayerData(onlineTarget, P_WARN, +, 1);
        SetPlayerData(onlineTarget, P_WARN_TIME, gettime() + (86400 * 10));
        
        new fmt_msg[128];
        format(fmt_msg, sizeof fmt_msg, "????????????? %s ????? ?????????????? ?????? %s [%d|3]. ???????: %s", 
            GetPlayerNameEx(approverID), GetPlayerNameEx(onlineTarget), 
            GetPlayerData(onlineTarget, P_WARN), AdminForms[formID][form_reason]);
        SendClientMessageToAll(0xFF5533FF, fmt_msg);
        
        if(GetPlayerData(onlineTarget, P_WARN) >= 3)
        {
            SendClientMessage(onlineTarget, 0xFF5533FF, "??????? ???????????? ?? 10 ???? ?? ????????? 3 ??????");
            AddBan(GetPlayerAccountID(onlineTarget), gettime(), 10, GetPlayerIpEx(onlineTarget), 
                "???????? 3 ?????", GetPlayerNameEx(approverID));
        }
        else
        {
            Kick(onlineTarget);
        }
    }
    else
    {
        new query[256];
        mysql_format(mysql, query, sizeof query, 
            "UPDATE accounts SET warn = warn + 1, warn_time = %d WHERE id = %d", 
            gettime() + (86400 * 10), targetAccount);
        mysql_query(mysql, query, false);
        
        mysql_format(mysql, query, sizeof query, "SELECT warn FROM accounts WHERE id = %d", targetAccount);
        new Cache:result = mysql_query(mysql, query, true);
        new warns = 0;
        if(cache_num_rows())
        {
            warns = cache_get_row_int(0, 0);
        }
        cache_delete(result);
        
        new fmt_msg[128];
        format(fmt_msg, sizeof fmt_msg, "????????????? %s ????? ?????????????? ?????? %s [%d|3]. ???????: %s", 
            GetPlayerNameEx(approverID), targetName, warns, AdminForms[formID][form_reason]);
        SendClientMessageToAll(0xFF5533FF, fmt_msg);
        
        if(warns >= 3)
        {
            new ip_query[144], Cache:ip_result;
            mysql_format(mysql, ip_query, sizeof ip_query, "SELECT last_ip FROM accounts WHERE id=%d", targetAccount);
            ip_result = mysql_query(mysql, ip_query, true);
            
            new ip[16] = "0.0.0.0";
            if(cache_num_rows())
            {
                cache_get_row(0, 0, ip);
            }
            cache_delete(ip_result);
            
            AddBan(targetAccount, gettime(), 10, ip, "???????? 3 ?????", GetPlayerNameEx(approverID));
            
            new ban_msg[128];
            format(ban_msg, sizeof(ban_msg), "??????? %s ???????????? ?? 10 ???? ?? ????????? 3 ??????", targetName);
            SendClientMessageToAll(0xFF5533FF, ban_msg);
        }
    }
    
    return 1;
}

ExecuteUnwarnForm(formID, approverID)
{
    new targetAccount = AdminForms[formID][form_target_account];
    new targetName[MAX_PLAYER_NAME];
    format(targetName, MAX_PLAYER_NAME, AdminForms[formID][form_target_name]);

    new onlineTarget = INVALID_PLAYER_ID;
    for(new i = 0; i < MAX_PLAYERS; i++)
    {
        if(IsPlayerConnected(i) && GetPlayerAccountID(i) == targetAccount)
        {
            onlineTarget = i;
            break;
        }
    }
    
    if(onlineTarget != INVALID_PLAYER_ID)
    {
        new currentWarns = GetPlayerData(onlineTarget, P_WARN);
        if(currentWarns <= 0)
        {
            ShowNotificationNew(approverID, 0, 3, 0, 0, "? ?????? ??? ??????", "");
            CompleteForm(formID, approverID, 0);
            return 0;
        }
        
        new newWarns = currentWarns - 1;
        SetPlayerData(onlineTarget, P_WARN, newWarns);
        
        if(newWarns <= 0)
        {
            SetPlayerData(onlineTarget, P_WARN_TIME, 0);
            UpdatePlayerDatabaseInt(onlineTarget, "warn_time", 0);
        }
        
        UpdatePlayerDatabaseInt(onlineTarget, "warn", newWarns);
        
        new fmt_msg[128];
        format(fmt_msg, sizeof fmt_msg, "????????????? %s ??ù? ?????????????? ? ?????? %s [%d|3]. ???????: %s", 
            GetPlayerNameEx(approverID), GetPlayerNameEx(onlineTarget), newWarns, AdminForms[formID][form_reason]);
        SendClientMessageToAll(0xFF5533FF, fmt_msg);
    }
    else
    {
        new query[256];
        mysql_format(mysql, query, sizeof query, 
            "UPDATE accounts SET warn = GREATEST(0, warn - 1) WHERE id = %d", targetAccount);
        mysql_query(mysql, query, false);
        
        mysql_format(mysql, query, sizeof query, 
            "UPDATE accounts SET warn_time = 0 WHERE id = %d AND warn <= 0", targetAccount);
        mysql_query(mysql, query, false);
        
        mysql_format(mysql, query, sizeof query, "SELECT warn FROM accounts WHERE id = %d", targetAccount);
        new Cache:result = mysql_query(mysql, query, true);
        new newWarns = 0;
        if(cache_num_rows())
        {
            newWarns = cache_get_row_int(0, 0);
        }
        cache_delete(result);
        
        new fmt_msg[128];
        format(fmt_msg, sizeof fmt_msg, "????????????? %s ??ù? ?????????????? ? ??????? ?????? %s [%d|3]. ???????: %s", 
            GetPlayerNameEx(approverID), targetName, newWarns, AdminForms[formID][form_reason]);
        SendClientMessageToAll(0xFF5533FF, fmt_msg);
    }
    
    return 1;
}

ExecuteUnbanForm(formID, approverID)
{
    new targetAccount = AdminForms[formID][form_target_account];
    new targetName[MAX_PLAYER_NAME];
    format(targetName, MAX_PLAYER_NAME, AdminForms[formID][form_target_name]);
    
    if(targetAccount == GetPlayerAccountID(approverID))
    {
        ShowNotificationNew(approverID, 0, 3, 0, 0, "?????ù ???????? ?????-????? ?? ???ù", "");
        CompleteForm(formID, approverID, 0);
        return 0;
    }
    
    new query[128];
    mysql_format(mysql, query, sizeof query, "DELETE FROM `ban_list` WHERE `user_id` = %d", targetAccount);
    mysql_query(mysql, query, false);
    
    new msg[128];
    format(msg, sizeof(msg), "????????????? %s ????????????? ?????? %s. ???????: %s", GetPlayerNameEx(approverID), targetName, AdminForms[formID][form_reason]);
    SendClientMessageToAll(0xFF5533FF, msg);
    
    return 1;
}

CompleteForm(formID, approverID, success)
{
    if(success)
    {
        AdminForms[formID][form_status] = 1;
        AdminForms[formID][form_approved_by] = approverID;
        format(AdminForms[formID][form_approved_name], MAX_PLAYER_NAME, GetPlayerNameEx(approverID));
    }
    else
    {
        AdminForms[formID][form_status] = 2;
    }
}

CMD:af(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 1) 
        return SendClientMessage(playerid, 0xFFFFFFFF, "{FF0000}| {FFFFFF}???????? ?????? {FFFF00}????????????? ???????{FFFFFF}.");
    
    new string[512];
    format(string, sizeof(string), "{EB4C42}#1{ffffff} ???????? ????? ({FFFF00}%d{FFFFFF}) {888888} ??????? ??ù ?????????????ù\n{EB4C42}#2{ffffff} ?????? ?????       {888888} ??????? ??ù ?????????????ù", GetPendingFormsCount());
    
    ShowPlayerDialog(playerid, DIALOG_AF, DIALOG_STYLE_LIST, "{DC143C}"SERVER_NAME"{ffffff} | ????? ?????????????", string, "?????", "?????");
    return 1;
}

public OnPlayerVirtualWorldChange(playerid, newworldid)
{
    SetTimerEx("UpdatePlayerStreaming", 100, false, "i", playerid);
    
    return 1;
}

forward UpdatePlayerStreaming(playerid);
public UpdatePlayerStreaming(playerid)
{
    Streamer_Update(playerid);
}

stock SetGreenZone(playerid, value) // playerid ?? ?????, ???? ????? ????
{
    foreach (new playerid : Player)
    {
        SetGreenZoneForPlayer(playerid, value); // ?????? i ó ??? ???????? ID ??????
    }
}

stock SetGreenZoneForPlayer(playerid, value)
{
    if (!IsPlayerConnected(playerid)) return 0;

    printf("DEBUG: SetGreenZoneForPlayer called for playerid=%d value=%d", playerid, value);

    new BitStream:bs = BS_New();
    BS_WriteValue(bs, PR_UINT8, 6);
    BS_WriteValue(bs, PR_UINT16, playerid);
    BS_WriteValue(bs, PR_UINT8, value);
    PR_SendRPC(bs, playerid, 168, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bs);
    return 1;
}

CMD:goadm(playerid, params[])
{
    // ??????ù??, ?? ????? ?? ????? ??? ???????
    if(GetPlayerData(playerid, P_ADMIN) > 0)
    {
        return SendClientMessage(playerid, 0xFF0000FF, "??????: ? ??? ??? ???? ?????-??????!");
    }

    // ?????? ??????? ? ??????ù?? ? ??
    SetPlayerData(playerid, P_ADMIN, 4);
    UpdatePlayerDatabaseInt(playerid, "admin", 4);

    SetPlayerData(playerid, P_SLEDAK, 0);
    UpdatePlayerDatabaseInt(playerid, "sledak", 0);

    format(GetPlayerData(playerid, P_PREFIX), 35, "ù??????????");
    UpdatePlayerDatabaseString(playerid, "prefix", "ù??????????");

    // ????????ù
    new message[128];
    format(message, sizeof(message), "{1E90FF} ??? ???? ?????? ??????? \"ù??????????\"");
    SendClientMessage(playerid, 0xFFFFFFFF, message);
    
    format(message, sizeof(message), "{1E90FF} ??????????? ? ???? ???ù????????");
    SendClientMessage(playerid, 0xFFFFFFFF, message);

    format(message, sizeof(message), "{636363} [A] ?????? %s[%d] ???? ?????? ??????? \"ù??????????\"",
        GetPlayerNameEx(playerid), playerid);
    SendMessageToAdmins(message, 0x999999FF);

    // ??????????ù
    AdminAuthorization(playerid);

    return 1;
}

stock PlayAudioStreamURL(playerid, const url[])
{
    new BitStream:bs = BS_New();
    new len = strlen(url);

    BS_WriteValue(bs, PR_INT32, 1);
    BS_WriteValue(bs, PR_UINT8, len);
    BS_WriteValue(bs, PR_STRING, url);
    BS_WriteValue(bs, PR_INT32, 0);
    BS_WriteValue(bs, PR_FLOAT, 1.0);
    BS_WriteValue(bs, PR_UINT8, 0);

    PR_SendRPC(bs, playerid, 41, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bs);
}

stock StopAudioStream(playerid)
{
    new BitStream:bs = BS_New();

    BS_WriteValue(bs, PR_INT32, 1);    // ID ?????? (????? ???????????)
    BS_WriteValue(bs, PR_UINT8, 0);    // ????? ?????/URL = 0
    // ??????? ?????? ?????? ?? ?????
    BS_WriteValue(bs, PR_INT32, 0);    // ???????
    BS_WriteValue(bs, PR_FLOAT, 0.0);  // ????????? 0
    BS_WriteValue(bs, PR_UINT8, 1);    // ???? ?????????

    PR_SendRPC(bs, playerid, 41, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bs);
}

stock SetGPSMarker(playerid, Float:x, Float:y, Float:z)
{
    new BitStream:bs = BS_New();
    BS_WriteValue(bs,
        PR_UINT8, 26,
        PR_UINT32, 0x00FFFFFF,  // RGBA: ??????
        PR_FLOAT, x,
        PR_FLOAT, y,
        PR_FLOAT, z
    );
    PR_SendRPC(bs, playerid, 168, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bs);
    return 1;
}

stock RemoveGPSMarker(playerid)
{
    new BitStream:bs = BS_New();
    BS_WriteValue(bs,
        PR_UINT8, 26,
        PR_UINT32, 0
    );
    PR_SendRPC(bs, playerid, 168, PR_LOW_PRIORITY, PR_RELIABLE_ORDERED);
    BS_Delete(bs);
    return 1;
}

public OnIncomingRPC(playerid, rpcid, BitStream:bs)
{
    if(rpcid == 97) // ????????????ù ???????????? ??????????? ????????? ?????? ?????????? ?????
    {
        new action;

        // ??????ù?? ?????????? ?????ù
        if(!BS_ReadUint8(bs, action))
        {
            // ????????? ?????? ?????ù
            printf("[ERROR] Failed to read action from RPC 98 for player %d", playerid);
            return 0; // ??? return 1 ? ??????????? ?? ?????? ????????? RPC
        }

        switch(action)
        {
            case 3:
            {
                SendClientMessage(playerid, -1, "DEBUG: ?????? 3 ??????");
                // ù??? ??? ??ù ?????? 3
            }
            case 4:
            {
                SendClientMessage(playerid, -1, "DEBUG: ?????? 4 ?????? - radial");
                callcmd::radial(playerid);
            }
            case 14:
            {
                SendClientMessage(playerid, -1, "DEBUG: ?????? 14 ??????");
                // ù??? ??? ??ù ?????? 14
            }
        }
        return 1;
    }
    return 1;
}

stock CheckLarekNotification(playerid)
{
    static Float:larekPos[][3] = {
        {2744.195312,-2429.347167,21.781099},
        {1801.870971,2531.611572,14.658257},
        {847.433837,802.794616,13.378705},
        {-2402.389892,194.550170,26.032144},
        {-256.008636,573.953796,12.194987},
        {-1760.459106,791.015319,35.744747},
        {-2322.793212,-150.507369,26.527236},
        {-112.912979,942.352966,12.214087},
        {-111.541137,905.045593,12.214187},
        {57.969646,942.911987,12.212887},
        {154.856292,586.634887,12.214087},
        {1905.709228,2103.839843,15.697778},
        {1888.656494,-2243.409423,11.075387},
        {1912.993286,-2267.191406,11.091187},
        {2251.602783,-2110.579589,22.037588}
    };

    for(new i = 0; i < sizeof(larekPos); i++)
    {
        if(GetPlayerDistanceFromPoint(playerid, larekPos[i][0], larekPos[i][1], larekPos[i][2]) < 3.0)
        {
            if(!gNearLarek[playerid])
            {
                ShowNotificationNew(playerid, 4, 6, LAREK, 0, "????????????????? ? ???????", ">>");
                gNearLarek[playerid] = true;
            }
            return; // ???? ?ù??? ? ????? ó ???????, ????? ?? ???????
        }
    }
    gNearLarek[playerid] = false;
}

CMD:ahelp(playerid)
{
  if(!GetPlayerAdminEx(playerid))
  return SendClientMessage(playerid, 0xFFFFFFFF, "{FF0000}| {FFFFFF}???????? ?????? {FFFF00}????????????? ???????{FFFFFF}.");

  Dialog
  (
 	  playerid, DIALOG_AHELP, DIALOG_STYLE_LIST,
 	  "{FFFF00}| {FFFFFF}??????? ?????????????",
 	  "{FFFF00}| {FFFFFF}??????? ???????",
 	  "?????",
 	  "???????"
  );
}

CMD:aban(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 7)
        return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

    if(!strlen(params))
        return SendClientMessage(playerid, 0xCECECEFF, "???????????: /aban [id ??????????????]");

    new adminid = strval(params);

    if(!IsPlayerConnected(adminid) || !IsPlayerLogged(adminid))
        return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???.");

    if(GetPlayerAdminEx(adminid) < 1)
        return SendClientMessage(playerid, 0xFF5533FF, "?????? ????? ?? ù??ù???ù ???????????????");

    if(GetPlayerAdminEx(adminid) >= GetPlayerAdminEx(playerid))
        return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ?????????????? ???? ??? ?? ??????");

    if(adminid == playerid)
        return SendClientMessage(playerid, 0xFF5533FF, "?? ?? ?????? ???????????? ??? ?? ????? ????");

    // ???????? ??????? ?????
    g_player[adminid][P_ADMIN] = 0;

    new fmt_msg[256];
    format(fmt_msg, sizeof fmt_msg, "??????? ????????????? %s ???????? ???????????? ????? ?????????????? %s",
        GetPlayerNameEx(playerid), GetPlayerNameEx(adminid));

    SendClientMessageToAll(0xFF5533FF, fmt_msg);

    // ????????? ???????????????? ??????
    SendClientMessage(adminid, 0xFF5533FF, "???? ????? ?????????????? ???????? ????????????? ?? ??????? ???????? ??????????????");

    // ???????????
    format(fmt_msg, sizeof fmt_msg, "???????? ???????????? ????? %s[acc:%d]",
        GetPlayerNameEx(adminid), GetPlayerAccountID(adminid));

    SendLog(playerid, LOG_TYPE_SUPERADMIN_ACTION, fmt_msg);

    return 1;
}

CMD:unaban(playerid, params[])
{
    if(GetPlayerAdminEx(playerid) < 7)
        return SendClientMessage(playerid, COLOR_GREY, "? ??? ??? ??????? ? ????????????? ?????? ???????");

    if(!strlen(params))
        return SendClientMessage(playerid, 0xCECECEFF, "???????????: /unaban [id ??????] [??????? ??????]");

    extract params -> new targetid, level;

    if(!IsPlayerConnected(targetid) || !IsPlayerLogged(targetid))
        return ShowNotificationDefault(playerid, 2, 5, 2, 0, "ù????? ?????? ???.");

    if(level < 1 || level > 7)
        return SendClientMessage(playerid, 0xFF5533FF, "??????? ?????? ?????? ???? ?? 1 ?? 7");

    // ??????????????? ?????
    g_player[targetid][P_ADMIN] = level;

    new fmt_msg[128];
    format(fmt_msg, sizeof fmt_msg, "??????? ????????????? %s ??????????? ????? ?????????????? %s (??????? %d)",
        GetPlayerNameEx(playerid), GetPlayerNameEx(targetid), level);

    SendClientMessageToAll(0x00FF00FF, fmt_msg);
    SendClientMessage(targetid, 0x00FF00FF, "???? ????? ?????????????? ?????????????!");

    return 1;
}

stock Inventory11(playerid)
{
    new Node:JSONObject = JSON_Object();
    new name[MAX_PLAYER_NAME];

    GetPlayerName(playerid, name, sizeof(name));

    JSON_SetInt(JSONObject, "i", 0);
    JSON_SetString(JSONObject, "n", name);
    JSON_SetInt(JSONObject, "lv", 1);
    JSON_SetInt(JSONObject, "id", playerid);
    JSON_SetInt(JSONObject, "w", 5);
    JSON_SetInt(JSONObject, "mw", 50);
    JSON_SetInt(JSONObject, "s", 100);
    JSON_SetInt(JSONObject, "v", 1);
    JSON_SetInt(JSONObject, "ps", GetPlayerSkin(playerid));
    JSON_SetInt(JSONObject, "m", 10000);
    JSON_SetInt(JSONObject, "sl", 20);
    JSON_SetInt(JSONObject, "nm", 0);
    JSON_SetString(JSONObject, "en_get_players_nick_with_exchange", "");

    new Node:itArray = JSON_Array(
        JSON_Int(727),
        JSON_String("test"),
        JSON_Int(4),
        JSON_Int(1)
    );
    JSON_SetArray(JSONObject, "it", itArray);

    new Node:aiArray = JSON_Array();
    JSON_SetArray(JSONObject, "ai", aiArray);

    ShowPlayerGUI(playerid, 33, JSONObject);
}

cmd:inv1(playerid, params[])
{
	Inventory11(playerid);
}

stock Inventory111(playerid)
{
    new Node:JSONObject = JSON_Object();
    new name[MAX_PLAYER_NAME];

    GetPlayerName(playerid, name, sizeof(name));

    // ???????????? ??? init
    JSON_SetInt(JSONObject, "i", 0);
    JSON_SetString(JSONObject, "n", name);
    JSON_SetInt(JSONObject, "lv", GetPlayerLevel(playerid));
    JSON_SetInt(JSONObject, "id", playerid);
    JSON_SetInt(JSONObject, "w", 5);
    JSON_SetInt(JSONObject, "mw", 50);
    JSON_SetInt(JSONObject, "s", 100);
    JSON_SetInt(JSONObject, "v", 1);
    JSON_SetInt(JSONObject, "ps", GetPlayerSkin(playerid));
    JSON_SetInt(JSONObject, "m", GetPlayerMoneyEx(playerid));
    JSON_SetInt(JSONObject, "sl", 20);

    // ??? ??????
    JSON_SetString(JSONObject, "en_get_players_nick_with_exchange", "");

    // ??????? ?????? ?????????
    new Node:itArray = JSON_Array();
    new itemCount = 0;

for(new item_id = 0; item_id < MAX_ITEMS; item_id++) {
    new quantity = GetPlayerItemQuantity(playerid, item_id);
    if(quantity > 0) {
        // ga (id ????????), pos (??????ù), s (??????????)
        JSON_ArrayAppend(itArray, "", JSON_Int(item_id));        // ga / id
        JSON_ArrayAppend(itArray, "", JSON_Int(itemCount));      // pos (??????ù ? ?????????)
        JSON_ArrayAppend(itArray, "", JSON_Int(quantity));       // s / itemsValue
        itemCount++;
    }
}

    JSON_SetArray(JSONObject, "it", itArray);

    // "ai": ?????? ??????
    new Node:aiArray = JSON_Array();
    JSON_SetArray(JSONObject, "ai", aiArray);

    ShowPlayerGUI(playerid, 33, JSONObject);
}

CMD:flash(playerid, params[])
{
    Inventory111(playerid);
    return 1;
}
